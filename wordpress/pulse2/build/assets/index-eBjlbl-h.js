const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index.es-wWVISv58.js","assets/vendor-C4G827jx.js","assets/ui-BX1bnTBV.js"])))=>i.map(i=>d[i]);
var Mv=Object.defineProperty,Ev=Object.defineProperties;var Rv=Object.getOwnPropertyDescriptors;var dd=Object.getOwnPropertySymbols;var Mf=Object.prototype.hasOwnProperty,Ef=Object.prototype.propertyIsEnumerable;var Rf=s=>{throw TypeError(s)},Of=Math.pow,eh=(s,t,r)=>t in s?Mv(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r,E=(s,t)=>{for(var r in t||(t={}))Mf.call(t,r)&&eh(s,r,t[r]);if(dd)for(var r of dd(t))Ef.call(t,r)&&eh(s,r,t[r]);return s},Z=(s,t)=>Ev(s,Rv(t));var Ee=(s,t)=>{var r={};for(var a in s)Mf.call(s,a)&&t.indexOf(a)<0&&(r[a]=s[a]);if(s!=null&&dd)for(var a of dd(s))t.indexOf(a)<0&&Ef.call(s,a)&&(r[a]=s[a]);return r};var ir=(s,t,r)=>eh(s,typeof t!="symbol"?t+"":t,r),th=(s,t,r)=>t.has(s)||Rf("Cannot "+r);var me=(s,t,r)=>(th(s,t,"read from private field"),r?r.call(s):t.get(s)),bt=(s,t,r)=>t.has(s)?Rf("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(s):t.set(s,r),ht=(s,t,r,a)=>(th(s,t,"write to private field"),a?a.call(s,r):t.set(s,r),r),Gt=(s,t,r)=>(th(s,t,"access private method"),r);var ud=(s,t,r,a)=>({set _(n){ht(s,t,n,r)},get _(){return me(s,t,a)}});var he=(s,t,r)=>new Promise((a,n)=>{var i=c=>{try{l(r.next(c))}catch(h){n(h)}},o=c=>{try{l(r.throw(c))}catch(h){n(h)}},l=c=>c.done?a(c.value):Promise.resolve(c.value).then(i,o);l((r=r.apply(s,t)).next())});import{j as e,P as Qt,c as Sn,a as cg,u as Is,B as Ov,b as Zo,d as Qi,e as qt,f as oa,R as Fv,g as dg,h as ca,i as Bv,k as Gd,D as ug,C as hg,l as mg,m as Jd,n as fg,A as pg,o as gg,S as Uv,p as qv,q as zv,r as $v,s as Wv,F as Hv,t as xg,v as vg,w as yg,x as Vv,y as bg,I as wg,z as jg,E as Ng,G as Sg,L as kg,H as Cg,J as Yv,T as Gv,K as Jv,M as Ag,N as Pg,O as _g,Q as Kv,U as ym,V as Ig,W as bm,X as wm,Y as jm,Z as Nm,_ as Lg,$ as Tg,a0 as Dg,a1 as Mg,a2 as Xv}from"./ui-BX1bnTBV.js";import{a as Kd,r as b,R as rt,v as Qv,b as Zv,c as ey,g as ty}from"./vendor-C4G827jx.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();var jh,Ff=Kd;jh=Ff.createRoot,Ff.hydrateRoot;const sy=1,ry=5e3;let sh=0;function ay(){return sh=(sh+1)%Number.MAX_SAFE_INTEGER,sh.toString()}const rh=new Map,Bf=s=>{if(rh.has(s))return;const t=setTimeout(()=>{rh.delete(s),Zl({type:"REMOVE_TOAST",toastId:s})},ry);rh.set(s,t)},ny=(s,t)=>{switch(t.type){case"ADD_TOAST":return Z(E({},s),{toasts:[t.toast,...s.toasts].slice(0,sy)});case"UPDATE_TOAST":return Z(E({},s),{toasts:s.toasts.map(r=>r.id===t.toast.id?E(E({},r),t.toast):r)});case"DISMISS_TOAST":{const{toastId:r}=t;return r?Bf(r):s.toasts.forEach(a=>{Bf(a.id)}),Z(E({},s),{toasts:s.toasts.map(a=>a.id===r||r===void 0?Z(E({},a),{open:!1}):a)})}case"REMOVE_TOAST":return t.toastId===void 0?Z(E({},s),{toasts:[]}):Z(E({},s),{toasts:s.toasts.filter(r=>r.id!==t.toastId)})}},Sd=[];let kd={toasts:[]};function Zl(s){kd=ny(kd,s),Sd.forEach(t=>{t(kd)})}function gn(t){var s=Ee(t,[]);const r=ay(),a=i=>Zl({type:"UPDATE_TOAST",toast:Z(E({},i),{id:r})}),n=()=>Zl({type:"DISMISS_TOAST",toastId:r});return Zl({type:"ADD_TOAST",toast:Z(E({},s),{id:r,open:!0,duration:s.duration||5e3,onOpenChange:i=>{i||n()}})}),{id:r,dismiss:n,update:a}}function da(){const[s,t]=b.useState(kd);return b.useEffect(()=>(Sd.push(t),()=>{const r=Sd.indexOf(t);r>-1&&Sd.splice(r,1)}),[s]),Z(E({},s),{toast:gn,dismiss:r=>Zl({type:"DISMISS_TOAST",toastId:r})})}var Eg=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),iy="VisuallyHidden",gc=b.forwardRef((s,t)=>e.jsx(Qt.span,Z(E({},s),{ref:t,style:E(E({},Eg),s.style)})));gc.displayName=iy;var oy=gc,Rg="ToastProvider",[Sm,ly,cy]=cg("Toast"),[Og,zk]=Sn("Toast",[cy]),[dy,Xd]=Og(Rg),Fg=s=>{const{__scopeToast:t,label:r="Notification",duration:a=5e3,swipeDirection:n="right",swipeThreshold:i=50,children:o}=s,[l,c]=b.useState(null),[h,f]=b.useState(0),p=b.useRef(!1),v=b.useRef(!1);return r.trim(),e.jsx(Sm.Provider,{scope:t,children:e.jsx(dy,{scope:t,label:r,duration:a,swipeDirection:n,swipeThreshold:i,toastCount:h,viewport:l,onViewportChange:c,onToastAdd:b.useCallback(()=>f(u=>u+1),[]),onToastRemove:b.useCallback(()=>f(u=>u-1),[]),isFocusedToastEscapeKeyDownRef:p,isClosePausedRef:v,children:o})})};Fg.displayName=Rg;var Bg="ToastViewport",uy=["F8"],Nh="toast.viewportPause",Sh="toast.viewportResume",Ug=b.forwardRef((s,t)=>{const x=s,{__scopeToast:r,hotkey:a=uy,label:n="Notifications ({hotkey})"}=x,i=Ee(x,["__scopeToast","hotkey","label"]),o=Xd(Bg,r),l=ly(r),c=b.useRef(null),h=b.useRef(null),f=b.useRef(null),p=b.useRef(null),v=Is(t,p,o.onViewportChange),u=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),C=o.toastCount>0;b.useEffect(()=>{const j=_=>{var U;a.length!==0&&a.every(R=>_[R]||_.code===R)&&((U=p.current)==null||U.focus())};return document.addEventListener("keydown",j),()=>document.removeEventListener("keydown",j)},[a]),b.useEffect(()=>{const j=c.current,_=p.current;if(C&&j&&_){const T=()=>{if(!o.isClosePausedRef.current){const $=new CustomEvent(Nh);_.dispatchEvent($),o.isClosePausedRef.current=!0}},U=()=>{if(o.isClosePausedRef.current){const $=new CustomEvent(Sh);_.dispatchEvent($),o.isClosePausedRef.current=!1}},R=$=>{!j.contains($.relatedTarget)&&U()},V=()=>{j.contains(document.activeElement)||U()};return j.addEventListener("focusin",T),j.addEventListener("focusout",R),j.addEventListener("pointermove",T),j.addEventListener("pointerleave",V),window.addEventListener("blur",T),window.addEventListener("focus",U),()=>{j.removeEventListener("focusin",T),j.removeEventListener("focusout",R),j.removeEventListener("pointermove",T),j.removeEventListener("pointerleave",V),window.removeEventListener("blur",T),window.removeEventListener("focus",U)}}},[C,o.isClosePausedRef]);const w=b.useCallback(({tabbingDirection:j})=>{const T=l().map(U=>{const R=U.ref.current,V=[R,...ky(R)];return j==="forwards"?V:V.reverse()});return(j==="forwards"?T.reverse():T).flat()},[l]);return b.useEffect(()=>{const j=p.current;if(j){const _=T=>{var V,$,S;const U=T.altKey||T.ctrlKey||T.metaKey;if(T.key==="Tab"&&!U){const A=document.activeElement,L=T.shiftKey;if(T.target===j&&L){(V=h.current)==null||V.focus();return}const D=w({tabbingDirection:L?"backwards":"forwards"}),I=D.findIndex(H=>H===A);ah(D.slice(I+1))?T.preventDefault():L?($=h.current)==null||$.focus():(S=f.current)==null||S.focus()}};return j.addEventListener("keydown",_),()=>j.removeEventListener("keydown",_)}},[l,w]),e.jsxs(Ov,{ref:c,role:"region","aria-label":n.replace("{hotkey}",u),tabIndex:-1,style:{pointerEvents:C?void 0:"none"},children:[C&&e.jsx(kh,{ref:h,onFocusFromOutsideViewport:()=>{const j=w({tabbingDirection:"forwards"});ah(j)}}),e.jsx(Sm.Slot,{scope:r,children:e.jsx(Qt.ol,Z(E({tabIndex:-1},i),{ref:v}))}),C&&e.jsx(kh,{ref:f,onFocusFromOutsideViewport:()=>{const j=w({tabbingDirection:"backwards"});ah(j)}})]})});Ug.displayName=Bg;var qg="ToastFocusProxy",kh=b.forwardRef((s,t)=>{const o=s,{__scopeToast:r,onFocusFromOutsideViewport:a}=o,n=Ee(o,["__scopeToast","onFocusFromOutsideViewport"]),i=Xd(qg,r);return e.jsx(gc,Z(E({"aria-hidden":!0,tabIndex:0},n),{ref:t,style:{position:"fixed"},onFocus:l=>{var f;const c=l.relatedTarget;!((f=i.viewport)!=null&&f.contains(c))&&a()}}))});kh.displayName=qg;var xc="Toast",hy="toast.swipeStart",my="toast.swipeMove",fy="toast.swipeCancel",py="toast.swipeEnd",zg=b.forwardRef((s,t)=>{const h=s,{forceMount:r,open:a,defaultOpen:n,onOpenChange:i}=h,o=Ee(h,["forceMount","open","defaultOpen","onOpenChange"]),[l,c]=Zo({prop:a,defaultProp:n!=null?n:!0,onChange:i,caller:xc});return e.jsx(Qi,{present:r||l,children:e.jsx(vy,Z(E({open:l},o),{ref:t,onClose:()=>c(!1),onPause:oa(s.onPause),onResume:oa(s.onResume),onSwipeStart:qt(s.onSwipeStart,f=>{f.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:qt(s.onSwipeMove,f=>{const{x:p,y:v}=f.detail.delta;f.currentTarget.setAttribute("data-swipe","move"),f.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${p}px`),f.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${v}px`)}),onSwipeCancel:qt(s.onSwipeCancel,f=>{f.currentTarget.setAttribute("data-swipe","cancel"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),f.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:qt(s.onSwipeEnd,f=>{const{x:p,y:v}=f.detail.delta;f.currentTarget.setAttribute("data-swipe","end"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),f.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${p}px`),f.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${v}px`),c(!1)})}))})});zg.displayName=xc;var[gy,xy]=Og(xc,{onClose(){}}),vy=b.forwardRef((s,t)=>{const I=s,{__scopeToast:r,type:a="foreground",duration:n,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:h,onSwipeStart:f,onSwipeMove:p,onSwipeCancel:v,onSwipeEnd:u}=I,C=Ee(I,["__scopeToast","type","duration","open","onClose","onEscapeKeyDown","onPause","onResume","onSwipeStart","onSwipeMove","onSwipeCancel","onSwipeEnd"]),w=Xd(xc,r),[x,j]=b.useState(null),_=Is(t,H=>j(H)),T=b.useRef(null),U=b.useRef(null),R=n||w.duration,V=b.useRef(0),$=b.useRef(R),S=b.useRef(0),{onToastAdd:A,onToastRemove:L}=w,N=oa(()=>{var se;(x==null?void 0:x.contains(document.activeElement))&&((se=w.viewport)==null||se.focus()),o()}),k=b.useCallback(H=>{!H||H===1/0||(window.clearTimeout(S.current),V.current=new Date().getTime(),S.current=window.setTimeout(N,H))},[N]);b.useEffect(()=>{const H=w.viewport;if(H){const se=()=>{k($.current),h==null||h()},ce=()=>{const le=new Date().getTime()-V.current;$.current=$.current-le,window.clearTimeout(S.current),c==null||c()};return H.addEventListener(Nh,ce),H.addEventListener(Sh,se),()=>{H.removeEventListener(Nh,ce),H.removeEventListener(Sh,se)}}},[w.viewport,R,c,h,k]),b.useEffect(()=>{i&&!w.isClosePausedRef.current&&k(R)},[i,R,w.isClosePausedRef,k]),b.useEffect(()=>(A(),()=>L()),[A,L]);const D=b.useMemo(()=>x?Gg(x):null,[x]);return w.viewport?e.jsxs(e.Fragment,{children:[D&&e.jsx(yy,{__scopeToast:r,role:"status","aria-live":a==="foreground"?"assertive":"polite","aria-atomic":!0,children:D}),e.jsx(gy,{scope:r,onClose:N,children:Kd.createPortal(e.jsx(Sm.ItemSlot,{scope:r,children:e.jsx(Fv,{asChild:!0,onEscapeKeyDown:qt(l,()=>{w.isFocusedToastEscapeKeyDownRef.current||N(),w.isFocusedToastEscapeKeyDownRef.current=!1}),children:e.jsx(Qt.li,Z(E({role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":w.swipeDirection},C),{ref:_,style:E({userSelect:"none",touchAction:"none"},s.style),onKeyDown:qt(s.onKeyDown,H=>{H.key==="Escape"&&(l==null||l(H.nativeEvent),H.nativeEvent.defaultPrevented||(w.isFocusedToastEscapeKeyDownRef.current=!0,N()))}),onPointerDown:qt(s.onPointerDown,H=>{H.button===0&&(T.current={x:H.clientX,y:H.clientY})}),onPointerMove:qt(s.onPointerMove,H=>{if(!T.current)return;const se=H.clientX-T.current.x,ce=H.clientY-T.current.y,le=!!U.current,ne=["left","right"].includes(w.swipeDirection),fe=["left","up"].includes(w.swipeDirection)?Math.min:Math.max,Se=ne?fe(0,se):0,M=ne?0:fe(0,ce),B=H.pointerType==="touch"?10:2,J={x:Se,y:M},te={originalEvent:H,delta:J};le?(U.current=J,hd(my,p,te,{discrete:!1})):Uf(J,w.swipeDirection,B)?(U.current=J,hd(hy,f,te,{discrete:!1}),H.target.setPointerCapture(H.pointerId)):(Math.abs(se)>B||Math.abs(ce)>B)&&(T.current=null)}),onPointerUp:qt(s.onPointerUp,H=>{const se=U.current,ce=H.target;if(ce.hasPointerCapture(H.pointerId)&&ce.releasePointerCapture(H.pointerId),U.current=null,T.current=null,se){const le=H.currentTarget,ne={originalEvent:H,delta:se};Uf(se,w.swipeDirection,w.swipeThreshold)?hd(py,u,ne,{discrete:!0}):hd(fy,v,ne,{discrete:!0}),le.addEventListener("click",fe=>fe.preventDefault(),{once:!0})}})}))})}),w.viewport)})]}):null}),yy=s=>{const h=s,{__scopeToast:t,children:r}=h,a=Ee(h,["__scopeToast","children"]),n=Xd(xc,t),[i,o]=b.useState(!1),[l,c]=b.useState(!1);return Ny(()=>o(!0)),b.useEffect(()=>{const f=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(f)},[]),l?null:e.jsx(dg,{asChild:!0,children:e.jsx(gc,Z(E({},a),{children:i&&e.jsxs(e.Fragment,{children:[n.label," ",r]})}))})},by="ToastTitle",$g=b.forwardRef((s,t)=>{const n=s,{__scopeToast:r}=n,a=Ee(n,["__scopeToast"]);return e.jsx(Qt.div,Z(E({},a),{ref:t}))});$g.displayName=by;var wy="ToastDescription",Wg=b.forwardRef((s,t)=>{const n=s,{__scopeToast:r}=n,a=Ee(n,["__scopeToast"]);return e.jsx(Qt.div,Z(E({},a),{ref:t}))});Wg.displayName=wy;var jy="ToastAction",Hg=b.forwardRef((s,t)=>{const n=s,{altText:r}=n,a=Ee(n,["altText"]);return r.trim()?e.jsx(Yg,{altText:r,asChild:!0,children:e.jsx(km,Z(E({},a),{ref:t}))}):null});Hg.displayName=jy;var Vg="ToastClose",km=b.forwardRef((s,t)=>{const i=s,{__scopeToast:r}=i,a=Ee(i,["__scopeToast"]),n=xy(Vg,r);return e.jsx(Yg,{asChild:!0,children:e.jsx(Qt.button,Z(E({type:"button"},a),{ref:t,onClick:qt(s.onClick,n.onClose)}))})});km.displayName=Vg;var Yg=b.forwardRef((s,t)=>{const i=s,{__scopeToast:r,altText:a}=i,n=Ee(i,["__scopeToast","altText"]);return e.jsx(Qt.div,Z(E({"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":a||void 0},n),{ref:t}))});function Gg(s){const t=[];return Array.from(s.childNodes).forEach(a=>{if(a.nodeType===a.TEXT_NODE&&a.textContent&&t.push(a.textContent),Sy(a)){const n=a.ariaHidden||a.hidden||a.style.display==="none",i=a.dataset.radixToastAnnounceExclude==="";if(!n)if(i){const o=a.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...Gg(a))}}),t}function hd(s,t,r,{discrete:a}){const n=r.originalEvent.currentTarget,i=new CustomEvent(s,{bubbles:!0,cancelable:!0,detail:r});t&&n.addEventListener(s,t,{once:!0}),a?Bv(n,i):n.dispatchEvent(i)}var Uf=(s,t,r=0)=>{const a=Math.abs(s.x),n=Math.abs(s.y),i=a>n;return t==="left"||t==="right"?i&&a>r:!i&&n>r};function Ny(s=()=>{}){const t=oa(s);ca(()=>{let r=0,a=0;return r=window.requestAnimationFrame(()=>a=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(a)}},[t])}function Sy(s){return s.nodeType===s.ELEMENT_NODE}function ky(s){const t=[],r=document.createTreeWalker(s,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{const n=a.tagName==="INPUT"&&a.type==="hidden";return a.disabled||a.hidden||n?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function ah(s){const t=document.activeElement;return s.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var Cy=Fg,Jg=Ug,Kg=zg,Xg=$g,Qg=Wg,Zg=Hg,ex=km;function tx(s){var t,r,a="";if(typeof s=="string"||typeof s=="number")a+=s;else if(typeof s=="object")if(Array.isArray(s)){var n=s.length;for(t=0;t<n;t++)s[t]&&(r=tx(s[t]))&&(a&&(a+=" "),a+=r)}else for(r in s)s[r]&&(a&&(a+=" "),a+=r);return a}function sx(){for(var s,t,r=0,a="",n=arguments.length;r<n;r++)(s=arguments[r])&&(t=tx(s))&&(a&&(a+=" "),a+=t);return a}const qf=s=>typeof s=="boolean"?`${s}`:s===0?"0":s,zf=sx,Qd=(s,t)=>r=>{var a;if((t==null?void 0:t.variants)==null)return zf(s,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:n,defaultVariants:i}=t,o=Object.keys(n).map(h=>{const f=r==null?void 0:r[h],p=i==null?void 0:i[h];if(f===null)return null;const v=qf(f)||qf(p);return n[h][v]}),l=r&&Object.entries(r).reduce((h,f)=>{let[p,v]=f;return v===void 0||(h[p]=v),h},{}),c=t==null||(a=t.compoundVariants)===null||a===void 0?void 0:a.reduce((h,f)=>{let C=f,{class:p,className:v}=C,u=Ee(C,["class","className"]);return Object.entries(u).every(w=>{let[x,j]=w;return Array.isArray(j)?j.includes(E(E({},i),l)[x]):E(E({},i),l)[x]===j})?[...h,p,v]:h},[]);return zf(s,o,c,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ay=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),rx=(...s)=>s.filter((t,r,a)=>!!t&&t.trim()!==""&&a.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Py={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _y=b.forwardRef((h,c)=>{var f=h,{color:s="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:n="",children:i,iconNode:o}=f,l=Ee(f,["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"]);return b.createElement("svg",E(Z(E({ref:c},Py),{width:t,height:t,stroke:s,strokeWidth:a?Number(r)*24/Number(t):r,className:rx("lucide",n)}),l),[...o.map(([p,v])=>b.createElement(p,v)),...Array.isArray(i)?i:[i]])});/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const it=(s,t)=>{const r=b.forwardRef((o,i)=>{var l=o,{className:a}=l,n=Ee(l,["className"]);return b.createElement(_y,E({ref:i,iconNode:t,className:rx(`lucide-${Ay(s)}`,a)},n))});return r.displayName=`${s}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cm=it("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ch=it("ArchiveRestore",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h2",key:"tvwodi"}],["path",{d:"M20 8v11a2 2 0 0 1-2 2h-2",key:"1gkqxj"}],["path",{d:"m9 15 3-3 3 3",key:"1pd0qc"}],["path",{d:"M12 12v9",key:"192myk"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ah=it("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qa=it("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iy=it("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ph=it("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ly=it("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ty=it("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=it("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ax=it("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ja=it("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const el=it("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vc=it("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=it("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dy=it("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tl=it("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zr=it("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ec=it("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=it("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const My=it("CloudUpload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tc=it("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nx=it("CornerDownRight",[["polyline",{points:"15 10 20 15 15 20",key:"1q7qjw"}],["path",{d:"M4 4v7a4 4 0 0 0 4 4h12",key:"z08zvw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _h=it("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ac=it("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ey=it("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ix=it("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Am=it("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dd=it("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const za=it("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ry=it("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Na=it("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oy=it("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Li=it("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ox=it("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fy=it("Library",[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ri=it("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const By=it("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pm=it("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uy=it("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qy=it("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lo=it("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lx=it("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zy=it("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=it("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cx=it("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $y=it("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wy=it("Move",[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=it("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hy=it("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ih=it("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dx=it("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dr=it("PenTool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sc=it("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ua=it("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wi=it("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=it("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=it("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ux=it("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _m=it("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bn=it("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jn=it("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hx=it("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nc=it("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vy=it("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Im=it("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cl=it("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $r=it("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cd=it("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qi=it("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mx=it("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $f=it("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sa=it("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=it("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lh=it("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=it("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yy=it("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gy=it("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Lm="-",Jy=s=>{const t=Xy(s),{conflictingClassGroups:r,conflictingClassGroupModifiers:a}=s;return{getClassGroupId:o=>{const l=o.split(Lm);return l[0]===""&&l.length!==1&&l.shift(),fx(l,t)||Ky(o)},getConflictingClassGroupIds:(o,l)=>{const c=r[o]||[];return l&&a[o]?[...c,...a[o]]:c}}},fx=(s,t)=>{var o;if(s.length===0)return t.classGroupId;const r=s[0],a=t.nextPart.get(r),n=a?fx(s.slice(1),a):void 0;if(n)return n;if(t.validators.length===0)return;const i=s.join(Lm);return(o=t.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},Wf=/^\[(.+)\]$/,Ky=s=>{if(Wf.test(s)){const t=Wf.exec(s)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},Xy=s=>{const{theme:t,prefix:r}=s,a={nextPart:new Map,validators:[]};return Zy(Object.entries(s.classGroups),r).forEach(([i,o])=>{Th(o,a,i,t)}),a},Th=(s,t,r,a)=>{s.forEach(n=>{if(typeof n=="string"){const i=n===""?t:Hf(t,n);i.classGroupId=r;return}if(typeof n=="function"){if(Qy(n)){Th(n(a),t,r,a);return}t.validators.push({validator:n,classGroupId:r});return}Object.entries(n).forEach(([i,o])=>{Th(o,Hf(t,i),r,a)})})},Hf=(s,t)=>{let r=s;return t.split(Lm).forEach(a=>{r.nextPart.has(a)||r.nextPart.set(a,{nextPart:new Map,validators:[]}),r=r.nextPart.get(a)}),r},Qy=s=>s.isThemeGetter,Zy=(s,t)=>t?s.map(([r,a])=>{const n=a.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[t+o,l])):i);return[r,n]}):s,eb=s=>{if(s<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,a=new Map;const n=(i,o)=>{r.set(i,o),t++,t>s&&(t=0,a=r,r=new Map)};return{get(i){let o=r.get(i);if(o!==void 0)return o;if((o=a.get(i))!==void 0)return n(i,o),o},set(i,o){r.has(i)?r.set(i,o):n(i,o)}}},px="!",tb=s=>{const{separator:t,experimentalParseClassName:r}=s,a=t.length===1,n=t[0],i=t.length,o=l=>{const c=[];let h=0,f=0,p;for(let x=0;x<l.length;x++){let j=l[x];if(h===0){if(j===n&&(a||l.slice(x,x+i)===t)){c.push(l.slice(f,x)),f=x+i;continue}if(j==="/"){p=x;continue}}j==="["?h++:j==="]"&&h--}const v=c.length===0?l:l.substring(f),u=v.startsWith(px),C=u?v.substring(1):v,w=p&&p>f?p-f:void 0;return{modifiers:c,hasImportantModifier:u,baseClassName:C,maybePostfixModifierPosition:w}};return r?l=>r({className:l,parseClassName:o}):o},sb=s=>{if(s.length<=1)return s;const t=[];let r=[];return s.forEach(a=>{a[0]==="["?(t.push(...r.sort(),a),r=[]):r.push(a)}),t.push(...r.sort()),t},rb=s=>E({cache:eb(s.cacheSize),parseClassName:tb(s)},Jy(s)),ab=/\s+/,nb=(s,t)=>{const{parseClassName:r,getClassGroupId:a,getConflictingClassGroupIds:n}=t,i=[],o=s.trim().split(ab);let l="";for(let c=o.length-1;c>=0;c-=1){const h=o[c],{modifiers:f,hasImportantModifier:p,baseClassName:v,maybePostfixModifierPosition:u}=r(h);let C=!!u,w=a(C?v.substring(0,u):v);if(!w){if(!C){l=h+(l.length>0?" "+l:l);continue}if(w=a(v),!w){l=h+(l.length>0?" "+l:l);continue}C=!1}const x=sb(f).join(":"),j=p?x+px:x,_=j+w;if(i.includes(_))continue;i.push(_);const T=n(w,C);for(let U=0;U<T.length;++U){const R=T[U];i.push(j+R)}l=h+(l.length>0?" "+l:l)}return l};function ib(){let s=0,t,r,a="";for(;s<arguments.length;)(t=arguments[s++])&&(r=gx(t))&&(a&&(a+=" "),a+=r);return a}const gx=s=>{if(typeof s=="string")return s;let t,r="";for(let a=0;a<s.length;a++)s[a]&&(t=gx(s[a]))&&(r&&(r+=" "),r+=t);return r};function ob(s,...t){let r,a,n,i=o;function o(c){const h=t.reduce((f,p)=>p(f),s());return r=rb(h),a=r.cache.get,n=r.cache.set,i=l,l(c)}function l(c){const h=a(c);if(h)return h;const f=nb(c,r);return n(c,f),f}return function(){return i(ib.apply(null,arguments))}}const Ts=s=>{const t=r=>r[s]||[];return t.isThemeGetter=!0,t},xx=/^\[(?:([a-z-]+):)?(.+)\]$/i,lb=/^\d+\/\d+$/,cb=new Set(["px","full","screen"]),db=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,ub=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,hb=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,mb=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,fb=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,fn=s=>Mo(s)||cb.has(s)||lb.test(s),Un=s=>dl(s,"length",jb),Mo=s=>!!s&&!Number.isNaN(Number(s)),nh=s=>dl(s,"number",Mo),zl=s=>!!s&&Number.isInteger(Number(s)),pb=s=>s.endsWith("%")&&Mo(s.slice(0,-1)),Vt=s=>xx.test(s),qn=s=>db.test(s),gb=new Set(["length","size","percentage"]),xb=s=>dl(s,gb,vx),vb=s=>dl(s,"position",vx),yb=new Set(["image","url"]),bb=s=>dl(s,yb,Sb),wb=s=>dl(s,"",Nb),$l=()=>!0,dl=(s,t,r)=>{const a=xx.exec(s);return a?a[1]?typeof t=="string"?a[1]===t:t.has(a[1]):r(a[2]):!1},jb=s=>ub.test(s)&&!hb.test(s),vx=()=>!1,Nb=s=>mb.test(s),Sb=s=>fb.test(s),kb=()=>{const s=Ts("colors"),t=Ts("spacing"),r=Ts("blur"),a=Ts("brightness"),n=Ts("borderColor"),i=Ts("borderRadius"),o=Ts("borderSpacing"),l=Ts("borderWidth"),c=Ts("contrast"),h=Ts("grayscale"),f=Ts("hueRotate"),p=Ts("invert"),v=Ts("gap"),u=Ts("gradientColorStops"),C=Ts("gradientColorStopPositions"),w=Ts("inset"),x=Ts("margin"),j=Ts("opacity"),_=Ts("padding"),T=Ts("saturate"),U=Ts("scale"),R=Ts("sepia"),V=Ts("skew"),$=Ts("space"),S=Ts("translate"),A=()=>["auto","contain","none"],L=()=>["auto","hidden","clip","visible","scroll"],N=()=>["auto",Vt,t],k=()=>[Vt,t],D=()=>["",fn,Un],I=()=>["auto",Mo,Vt],H=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],se=()=>["solid","dashed","dotted","double","none"],ce=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],le=()=>["start","end","center","between","around","evenly","stretch"],ne=()=>["","0",Vt],fe=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Se=()=>[Mo,Vt];return{cacheSize:500,separator:":",theme:{colors:[$l],spacing:[fn,Un],blur:["none","",qn,Vt],brightness:Se(),borderColor:[s],borderRadius:["none","","full",qn,Vt],borderSpacing:k(),borderWidth:D(),contrast:Se(),grayscale:ne(),hueRotate:Se(),invert:ne(),gap:k(),gradientColorStops:[s],gradientColorStopPositions:[pb,Un],inset:N(),margin:N(),opacity:Se(),padding:k(),saturate:Se(),scale:Se(),sepia:ne(),skew:Se(),space:k(),translate:k()},classGroups:{aspect:[{aspect:["auto","square","video",Vt]}],container:["container"],columns:[{columns:[qn]}],"break-after":[{"break-after":fe()}],"break-before":[{"break-before":fe()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...H(),Vt]}],overflow:[{overflow:L()}],"overflow-x":[{"overflow-x":L()}],"overflow-y":[{"overflow-y":L()}],overscroll:[{overscroll:A()}],"overscroll-x":[{"overscroll-x":A()}],"overscroll-y":[{"overscroll-y":A()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[w]}],"inset-x":[{"inset-x":[w]}],"inset-y":[{"inset-y":[w]}],start:[{start:[w]}],end:[{end:[w]}],top:[{top:[w]}],right:[{right:[w]}],bottom:[{bottom:[w]}],left:[{left:[w]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",zl,Vt]}],basis:[{basis:N()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Vt]}],grow:[{grow:ne()}],shrink:[{shrink:ne()}],order:[{order:["first","last","none",zl,Vt]}],"grid-cols":[{"grid-cols":[$l]}],"col-start-end":[{col:["auto",{span:["full",zl,Vt]},Vt]}],"col-start":[{"col-start":I()}],"col-end":[{"col-end":I()}],"grid-rows":[{"grid-rows":[$l]}],"row-start-end":[{row:["auto",{span:[zl,Vt]},Vt]}],"row-start":[{"row-start":I()}],"row-end":[{"row-end":I()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Vt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Vt]}],gap:[{gap:[v]}],"gap-x":[{"gap-x":[v]}],"gap-y":[{"gap-y":[v]}],"justify-content":[{justify:["normal",...le()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...le(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...le(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[_]}],px:[{px:[_]}],py:[{py:[_]}],ps:[{ps:[_]}],pe:[{pe:[_]}],pt:[{pt:[_]}],pr:[{pr:[_]}],pb:[{pb:[_]}],pl:[{pl:[_]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[$]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[$]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Vt,t]}],"min-w":[{"min-w":[Vt,t,"min","max","fit"]}],"max-w":[{"max-w":[Vt,t,"none","full","min","max","fit","prose",{screen:[qn]},qn]}],h:[{h:[Vt,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Vt,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Vt,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Vt,t,"auto","min","max","fit"]}],"font-size":[{text:["base",qn,Un]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",nh]}],"font-family":[{font:[$l]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Vt]}],"line-clamp":[{"line-clamp":["none",Mo,nh]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",fn,Vt]}],"list-image":[{"list-image":["none",Vt]}],"list-style-type":[{list:["none","disc","decimal",Vt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[s]}],"placeholder-opacity":[{"placeholder-opacity":[j]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[s]}],"text-opacity":[{"text-opacity":[j]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...se(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",fn,Un]}],"underline-offset":[{"underline-offset":["auto",fn,Vt]}],"text-decoration-color":[{decoration:[s]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:k()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Vt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Vt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[j]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...H(),vb]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",xb]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},bb]}],"bg-color":[{bg:[s]}],"gradient-from-pos":[{from:[C]}],"gradient-via-pos":[{via:[C]}],"gradient-to-pos":[{to:[C]}],"gradient-from":[{from:[u]}],"gradient-via":[{via:[u]}],"gradient-to":[{to:[u]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[j]}],"border-style":[{border:[...se(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[j]}],"divide-style":[{divide:se()}],"border-color":[{border:[n]}],"border-color-x":[{"border-x":[n]}],"border-color-y":[{"border-y":[n]}],"border-color-s":[{"border-s":[n]}],"border-color-e":[{"border-e":[n]}],"border-color-t":[{"border-t":[n]}],"border-color-r":[{"border-r":[n]}],"border-color-b":[{"border-b":[n]}],"border-color-l":[{"border-l":[n]}],"divide-color":[{divide:[n]}],"outline-style":[{outline:["",...se()]}],"outline-offset":[{"outline-offset":[fn,Vt]}],"outline-w":[{outline:[fn,Un]}],"outline-color":[{outline:[s]}],"ring-w":[{ring:D()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[s]}],"ring-opacity":[{"ring-opacity":[j]}],"ring-offset-w":[{"ring-offset":[fn,Un]}],"ring-offset-color":[{"ring-offset":[s]}],shadow:[{shadow:["","inner","none",qn,wb]}],"shadow-color":[{shadow:[$l]}],opacity:[{opacity:[j]}],"mix-blend":[{"mix-blend":[...ce(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ce()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[a]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",qn,Vt]}],grayscale:[{grayscale:[h]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[p]}],saturate:[{saturate:[T]}],sepia:[{sepia:[R]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[a]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[h]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[p]}],"backdrop-opacity":[{"backdrop-opacity":[j]}],"backdrop-saturate":[{"backdrop-saturate":[T]}],"backdrop-sepia":[{"backdrop-sepia":[R]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Vt]}],duration:[{duration:Se()}],ease:[{ease:["linear","in","out","in-out",Vt]}],delay:[{delay:Se()}],animate:[{animate:["none","spin","ping","pulse","bounce",Vt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[U]}],"scale-x":[{"scale-x":[U]}],"scale-y":[{"scale-y":[U]}],rotate:[{rotate:[zl,Vt]}],"translate-x":[{"translate-x":[S]}],"translate-y":[{"translate-y":[S]}],"skew-x":[{"skew-x":[V]}],"skew-y":[{"skew-y":[V]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Vt]}],accent:[{accent:["auto",s]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Vt]}],"caret-color":[{caret:[s]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":k()}],"scroll-mx":[{"scroll-mx":k()}],"scroll-my":[{"scroll-my":k()}],"scroll-ms":[{"scroll-ms":k()}],"scroll-me":[{"scroll-me":k()}],"scroll-mt":[{"scroll-mt":k()}],"scroll-mr":[{"scroll-mr":k()}],"scroll-mb":[{"scroll-mb":k()}],"scroll-ml":[{"scroll-ml":k()}],"scroll-p":[{"scroll-p":k()}],"scroll-px":[{"scroll-px":k()}],"scroll-py":[{"scroll-py":k()}],"scroll-ps":[{"scroll-ps":k()}],"scroll-pe":[{"scroll-pe":k()}],"scroll-pt":[{"scroll-pt":k()}],"scroll-pr":[{"scroll-pr":k()}],"scroll-pb":[{"scroll-pb":k()}],"scroll-pl":[{"scroll-pl":k()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Vt]}],fill:[{fill:[s,"none"]}],"stroke-w":[{stroke:[fn,Un,nh]}],stroke:[{stroke:[s,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Cb=ob(kb);function ps(s){const t=Object.prototype.toString.call(s);return s instanceof Date||typeof s=="object"&&t==="[object Date]"?new s.constructor(+s):typeof s=="number"||t==="[object Number]"||typeof s=="string"||t==="[object String]"?new Date(s):new Date(NaN)}function li(s,t){return s instanceof Date?new s.constructor(t):new Date(t)}const yx=6048e5,Ab=864e5,bx=6e4,wx=36e5,md=43200,Vf=1440;let Pb={};function yc(){return Pb}function ic(s,t){var l,c,h,f,p,v,u,C;const r=yc(),a=(C=(u=(f=(h=t==null?void 0:t.weekStartsOn)!=null?h:(c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)!=null?f:r.weekStartsOn)!=null?u:(v=(p=r.locale)==null?void 0:p.options)==null?void 0:v.weekStartsOn)!=null?C:0,n=ps(s),i=n.getDay(),o=(i<a?7:0)+i-a;return n.setDate(n.getDate()-o),n.setHours(0,0,0,0),n}function Md(s){return ic(s,{weekStartsOn:1})}function jx(s){const t=ps(s),r=t.getFullYear(),a=li(s,0);a.setFullYear(r+1,0,4),a.setHours(0,0,0,0);const n=Md(a),i=li(s,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const o=Md(i);return t.getTime()>=n.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function Ed(s){const t=ps(s);return t.setHours(0,0,0,0),t}function Rd(s){const t=ps(s),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+s-+r}function Nx(s,t){const r=Ed(s),a=Ed(t),n=+r-Rd(r),i=+a-Rd(a);return Math.round((n-i)/Ab)}function _b(s){const t=jx(s),r=li(s,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),Md(r)}function Ad(s,t){const r=ps(s),a=ps(t),n=r.getTime()-a.getTime();return n<0?-1:n>0?1:n}function Sx(s){return li(s,Date.now())}function Ib(s,t){const r=Ed(s),a=Ed(t);return+r==+a}function Lb(s){return s instanceof Date||typeof s=="object"&&Object.prototype.toString.call(s)==="[object Date]"}function Tb(s){if(!Lb(s)&&typeof s!="number")return!1;const t=ps(s);return!isNaN(Number(t))}function Db(s,t){const r=ps(s),a=ps(t),n=r.getFullYear()-a.getFullYear(),i=r.getMonth()-a.getMonth();return n*12+i}function ih(s,t){const r=ps(s),a=ps(t),n=Yf(r,a),i=Math.abs(Nx(r,a));r.setDate(r.getDate()-n*i);const o=+(Yf(r,a)===-n),l=n*(i-o);return l===0?0:l}function Yf(s,t){const r=s.getFullYear()-t.getFullYear()||s.getMonth()-t.getMonth()||s.getDate()-t.getDate()||s.getHours()-t.getHours()||s.getMinutes()-t.getMinutes()||s.getSeconds()-t.getSeconds()||s.getMilliseconds()-t.getMilliseconds();return r<0?-1:r>0?1:r}function Mb(s){return t=>{const a=(s?Math[s]:Math.trunc)(t);return a===0?0:a}}function Eb(s,t){return+ps(s)-+ps(t)}function Rb(s){const t=ps(s);return t.setHours(23,59,59,999),t}function Ob(s){const t=ps(s),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function Fb(s){const t=ps(s);return+Rb(t)==+Ob(t)}function Bb(s,t){const r=ps(s),a=ps(t),n=Ad(r,a),i=Math.abs(Db(r,a));let o;if(i<1)o=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-n*i);let l=Ad(r,a)===-n;Fb(ps(s))&&i===1&&Ad(s,a)===1&&(l=!1),o=n*(i-Number(l))}return o===0?0:o}function Ub(s,t,r){const a=Eb(s,t)/1e3;return Mb(r==null?void 0:r.roundingMethod)(a)}function qb(s){const t=ps(s),r=li(s,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}const zb={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},$b=(s,t,r)=>{let a;const n=zb[s];return typeof n=="string"?a=n:t===1?a=n.one:a=n.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+a:a+" ago":a};function oh(s){return(t={})=>{const r=t.width?String(t.width):s.defaultWidth;return s.formats[r]||s.formats[s.defaultWidth]}}const Wb={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Hb={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Vb={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Yb={date:oh({formats:Wb,defaultWidth:"full"}),time:oh({formats:Hb,defaultWidth:"full"}),dateTime:oh({formats:Vb,defaultWidth:"full"})},Gb={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Jb=(s,t,r,a)=>Gb[s];function Wl(s){return(t,r)=>{const a=r!=null&&r.context?String(r.context):"standalone";let n;if(a==="formatting"&&s.formattingValues){const o=s.defaultFormattingWidth||s.defaultWidth,l=r!=null&&r.width?String(r.width):o;n=s.formattingValues[l]||s.formattingValues[o]}else{const o=s.defaultWidth,l=r!=null&&r.width?String(r.width):s.defaultWidth;n=s.values[l]||s.values[o]}const i=s.argumentCallback?s.argumentCallback(t):t;return n[i]}}const Kb={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Xb={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Qb={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Zb={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},ew={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},tw={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},sw=(s,t)=>{const r=Number(s),a=r%100;if(a>20||a<10)switch(a%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},rw={ordinalNumber:sw,era:Wl({values:Kb,defaultWidth:"wide"}),quarter:Wl({values:Xb,defaultWidth:"wide",argumentCallback:s=>s-1}),month:Wl({values:Qb,defaultWidth:"wide"}),day:Wl({values:Zb,defaultWidth:"wide"}),dayPeriod:Wl({values:ew,defaultWidth:"wide",formattingValues:tw,defaultFormattingWidth:"wide"})};function Hl(s){return(t,r={})=>{const a=r.width,n=a&&s.matchPatterns[a]||s.matchPatterns[s.defaultMatchWidth],i=t.match(n);if(!i)return null;const o=i[0],l=a&&s.parsePatterns[a]||s.parsePatterns[s.defaultParseWidth],c=Array.isArray(l)?nw(l,p=>p.test(o)):aw(l,p=>p.test(o));let h;h=s.valueCallback?s.valueCallback(c):c,h=r.valueCallback?r.valueCallback(h):h;const f=t.slice(o.length);return{value:h,rest:f}}}function aw(s,t){for(const r in s)if(Object.prototype.hasOwnProperty.call(s,r)&&t(s[r]))return r}function nw(s,t){for(let r=0;r<s.length;r++)if(t(s[r]))return r}function iw(s){return(t,r={})=>{const a=t.match(s.matchPattern);if(!a)return null;const n=a[0],i=t.match(s.parsePattern);if(!i)return null;let o=s.valueCallback?s.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;const l=t.slice(n.length);return{value:o,rest:l}}}const ow=/^(\d+)(th|st|nd|rd)?/i,lw=/\d+/i,cw={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},dw={any:[/^b/i,/^(a|c)/i]},uw={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},hw={any:[/1/i,/2/i,/3/i,/4/i]},mw={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},fw={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},pw={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},gw={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},xw={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},vw={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},yw={ordinalNumber:iw({matchPattern:ow,parsePattern:lw,valueCallback:s=>parseInt(s,10)}),era:Hl({matchPatterns:cw,defaultMatchWidth:"wide",parsePatterns:dw,defaultParseWidth:"any"}),quarter:Hl({matchPatterns:uw,defaultMatchWidth:"wide",parsePatterns:hw,defaultParseWidth:"any",valueCallback:s=>s+1}),month:Hl({matchPatterns:mw,defaultMatchWidth:"wide",parsePatterns:fw,defaultParseWidth:"any"}),day:Hl({matchPatterns:pw,defaultMatchWidth:"wide",parsePatterns:gw,defaultParseWidth:"any"}),dayPeriod:Hl({matchPatterns:xw,defaultMatchWidth:"any",parsePatterns:vw,defaultParseWidth:"any"})},kx={code:"en-US",formatDistance:$b,formatLong:Yb,formatRelative:Jb,localize:rw,match:yw,options:{weekStartsOn:0,firstWeekContainsDate:1}};function bw(s){const t=ps(s);return Nx(t,qb(t))+1}function ww(s){const t=ps(s),r=+Md(t)-+_b(t);return Math.round(r/yx)+1}function Cx(s,t){var f,p,v,u,C,w,x,j;const r=ps(s),a=r.getFullYear(),n=yc(),i=(j=(x=(u=(v=t==null?void 0:t.firstWeekContainsDate)!=null?v:(p=(f=t==null?void 0:t.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)!=null?u:n.firstWeekContainsDate)!=null?x:(w=(C=n.locale)==null?void 0:C.options)==null?void 0:w.firstWeekContainsDate)!=null?j:1,o=li(s,0);o.setFullYear(a+1,0,i),o.setHours(0,0,0,0);const l=ic(o,t),c=li(s,0);c.setFullYear(a,0,i),c.setHours(0,0,0,0);const h=ic(c,t);return r.getTime()>=l.getTime()?a+1:r.getTime()>=h.getTime()?a:a-1}function jw(s,t){var l,c,h,f,p,v,u,C;const r=yc(),a=(C=(u=(f=(h=t==null?void 0:t.firstWeekContainsDate)!=null?h:(c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)!=null?f:r.firstWeekContainsDate)!=null?u:(v=(p=r.locale)==null?void 0:p.options)==null?void 0:v.firstWeekContainsDate)!=null?C:1,n=Cx(s,t),i=li(s,0);return i.setFullYear(n,0,a),i.setHours(0,0,0,0),ic(i,t)}function Nw(s,t){const r=ps(s),a=+ic(r,t)-+jw(r,t);return Math.round(a/yx)+1}function fs(s,t){const r=s<0?"-":"",a=Math.abs(s).toString().padStart(t,"0");return r+a}const zn={y(s,t){const r=s.getFullYear(),a=r>0?r:1-r;return fs(t==="yy"?a%100:a,t.length)},M(s,t){const r=s.getMonth();return t==="M"?String(r+1):fs(r+1,2)},d(s,t){return fs(s.getDate(),t.length)},a(s,t){const r=s.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(s,t){return fs(s.getHours()%12||12,t.length)},H(s,t){return fs(s.getHours(),t.length)},m(s,t){return fs(s.getMinutes(),t.length)},s(s,t){return fs(s.getSeconds(),t.length)},S(s,t){const r=t.length,a=s.getMilliseconds(),n=Math.trunc(a*Math.pow(10,r-3));return fs(n,t.length)}},ko={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Gf={G:function(s,t,r){const a=s.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(a,{width:"abbreviated"});case"GGGGG":return r.era(a,{width:"narrow"});case"GGGG":default:return r.era(a,{width:"wide"})}},y:function(s,t,r){if(t==="yo"){const a=s.getFullYear(),n=a>0?a:1-a;return r.ordinalNumber(n,{unit:"year"})}return zn.y(s,t)},Y:function(s,t,r,a){const n=Cx(s,a),i=n>0?n:1-n;if(t==="YY"){const o=i%100;return fs(o,2)}return t==="Yo"?r.ordinalNumber(i,{unit:"year"}):fs(i,t.length)},R:function(s,t){const r=jx(s);return fs(r,t.length)},u:function(s,t){const r=s.getFullYear();return fs(r,t.length)},Q:function(s,t,r){const a=Math.ceil((s.getMonth()+1)/3);switch(t){case"Q":return String(a);case"QQ":return fs(a,2);case"Qo":return r.ordinalNumber(a,{unit:"quarter"});case"QQQ":return r.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(a,{width:"wide",context:"formatting"})}},q:function(s,t,r){const a=Math.ceil((s.getMonth()+1)/3);switch(t){case"q":return String(a);case"qq":return fs(a,2);case"qo":return r.ordinalNumber(a,{unit:"quarter"});case"qqq":return r.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(a,{width:"wide",context:"standalone"})}},M:function(s,t,r){const a=s.getMonth();switch(t){case"M":case"MM":return zn.M(s,t);case"Mo":return r.ordinalNumber(a+1,{unit:"month"});case"MMM":return r.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(a,{width:"wide",context:"formatting"})}},L:function(s,t,r){const a=s.getMonth();switch(t){case"L":return String(a+1);case"LL":return fs(a+1,2);case"Lo":return r.ordinalNumber(a+1,{unit:"month"});case"LLL":return r.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(a,{width:"wide",context:"standalone"})}},w:function(s,t,r,a){const n=Nw(s,a);return t==="wo"?r.ordinalNumber(n,{unit:"week"}):fs(n,t.length)},I:function(s,t,r){const a=ww(s);return t==="Io"?r.ordinalNumber(a,{unit:"week"}):fs(a,t.length)},d:function(s,t,r){return t==="do"?r.ordinalNumber(s.getDate(),{unit:"date"}):zn.d(s,t)},D:function(s,t,r){const a=bw(s);return t==="Do"?r.ordinalNumber(a,{unit:"dayOfYear"}):fs(a,t.length)},E:function(s,t,r){const a=s.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(a,{width:"short",context:"formatting"});case"EEEE":default:return r.day(a,{width:"wide",context:"formatting"})}},e:function(s,t,r,a){const n=s.getDay(),i=(n-a.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return fs(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(n,{width:"short",context:"formatting"});case"eeee":default:return r.day(n,{width:"wide",context:"formatting"})}},c:function(s,t,r,a){const n=s.getDay(),i=(n-a.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return fs(i,t.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(n,{width:"narrow",context:"standalone"});case"cccccc":return r.day(n,{width:"short",context:"standalone"});case"cccc":default:return r.day(n,{width:"wide",context:"standalone"})}},i:function(s,t,r){const a=s.getDay(),n=a===0?7:a;switch(t){case"i":return String(n);case"ii":return fs(n,t.length);case"io":return r.ordinalNumber(n,{unit:"day"});case"iii":return r.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(a,{width:"short",context:"formatting"});case"iiii":default:return r.day(a,{width:"wide",context:"formatting"})}},a:function(s,t,r){const n=s.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(s,t,r){const a=s.getHours();let n;switch(a===12?n=ko.noon:a===0?n=ko.midnight:n=a/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(s,t,r){const a=s.getHours();let n;switch(a>=17?n=ko.evening:a>=12?n=ko.afternoon:a>=4?n=ko.morning:n=ko.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(s,t,r){if(t==="ho"){let a=s.getHours()%12;return a===0&&(a=12),r.ordinalNumber(a,{unit:"hour"})}return zn.h(s,t)},H:function(s,t,r){return t==="Ho"?r.ordinalNumber(s.getHours(),{unit:"hour"}):zn.H(s,t)},K:function(s,t,r){const a=s.getHours()%12;return t==="Ko"?r.ordinalNumber(a,{unit:"hour"}):fs(a,t.length)},k:function(s,t,r){let a=s.getHours();return a===0&&(a=24),t==="ko"?r.ordinalNumber(a,{unit:"hour"}):fs(a,t.length)},m:function(s,t,r){return t==="mo"?r.ordinalNumber(s.getMinutes(),{unit:"minute"}):zn.m(s,t)},s:function(s,t,r){return t==="so"?r.ordinalNumber(s.getSeconds(),{unit:"second"}):zn.s(s,t)},S:function(s,t){return zn.S(s,t)},X:function(s,t,r){const a=s.getTimezoneOffset();if(a===0)return"Z";switch(t){case"X":return Kf(a);case"XXXX":case"XX":return Ai(a);case"XXXXX":case"XXX":default:return Ai(a,":")}},x:function(s,t,r){const a=s.getTimezoneOffset();switch(t){case"x":return Kf(a);case"xxxx":case"xx":return Ai(a);case"xxxxx":case"xxx":default:return Ai(a,":")}},O:function(s,t,r){const a=s.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Jf(a,":");case"OOOO":default:return"GMT"+Ai(a,":")}},z:function(s,t,r){const a=s.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Jf(a,":");case"zzzz":default:return"GMT"+Ai(a,":")}},t:function(s,t,r){const a=Math.trunc(s.getTime()/1e3);return fs(a,t.length)},T:function(s,t,r){const a=s.getTime();return fs(a,t.length)}};function Jf(s,t=""){const r=s>0?"-":"+",a=Math.abs(s),n=Math.trunc(a/60),i=a%60;return i===0?r+String(n):r+String(n)+t+fs(i,2)}function Kf(s,t){return s%60===0?(s>0?"-":"+")+fs(Math.abs(s)/60,2):Ai(s,t)}function Ai(s,t=""){const r=s>0?"-":"+",a=Math.abs(s),n=fs(Math.trunc(a/60),2),i=fs(a%60,2);return r+n+t+i}const Xf=(s,t)=>{switch(s){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},Ax=(s,t)=>{switch(s){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},Sw=(s,t)=>{const r=s.match(/(P+)(p+)?/)||[],a=r[1],n=r[2];if(!n)return Xf(s,t);let i;switch(a){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",Xf(a,t)).replace("{{time}}",Ax(n,t))},kw={p:Ax,P:Sw},Cw=/^D+$/,Aw=/^Y+$/,Pw=["D","DD","YY","YYYY"];function _w(s){return Cw.test(s)}function Iw(s){return Aw.test(s)}function Lw(s,t,r){const a=Tw(s,t,r);if(Pw.includes(s))throw new RangeError(a)}function Tw(s,t,r){const a=s[0]==="Y"?"years":"days of the month";return`Use \`${s.toLowerCase()}\` instead of \`${s}\` (in \`${t}\`) for formatting ${a} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Dw=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Mw=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ew=/^'([^]*?)'?$/,Rw=/''/g,Ow=/[a-zA-Z]/;function Px(s,t,r){var f,p,v,u,C,w,x,j,_;const a=yc(),n=(f=a.locale)!=null?f:kx,i=(C=(u=a.firstWeekContainsDate)!=null?u:(v=(p=a.locale)==null?void 0:p.options)==null?void 0:v.firstWeekContainsDate)!=null?C:1,o=(_=(j=a.weekStartsOn)!=null?j:(x=(w=a.locale)==null?void 0:w.options)==null?void 0:x.weekStartsOn)!=null?_:0,l=ps(s);if(!Tb(l))throw new RangeError("Invalid time value");let c=t.match(Mw).map(T=>{const U=T[0];if(U==="p"||U==="P"){const R=kw[U];return R(T,n.formatLong)}return T}).join("").match(Dw).map(T=>{if(T==="''")return{isToken:!1,value:"'"};const U=T[0];if(U==="'")return{isToken:!1,value:Fw(T)};if(Gf[U])return{isToken:!0,value:T};if(U.match(Ow))throw new RangeError("Format string contains an unescaped latin alphabet character `"+U+"`");return{isToken:!1,value:T}});n.localize.preprocessor&&(c=n.localize.preprocessor(l,c));const h={firstWeekContainsDate:i,weekStartsOn:o,locale:n};return c.map(T=>{if(!T.isToken)return T.value;const U=T.value;(Iw(U)||_w(U))&&Lw(U,t,String(s));const R=Gf[U[0]];return R(l,U,n.localize,h)}).join("")}function Fw(s){const t=s.match(Ew);return t?t[1].replace(Rw,"'"):s}function Bw(s,t,r){var C,w;const a=yc(),n=(w=(C=r==null?void 0:r.locale)!=null?C:a.locale)!=null?w:kx,i=2520,o=Ad(s,t);if(isNaN(o))throw new RangeError("Invalid time value");const l=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:o});let c,h;o>0?(c=ps(t),h=ps(s)):(c=ps(s),h=ps(t));const f=Ub(h,c),p=(Rd(h)-Rd(c))/1e3,v=Math.round((f-p)/60);let u;if(v<2)return r!=null&&r.includeSeconds?f<5?n.formatDistance("lessThanXSeconds",5,l):f<10?n.formatDistance("lessThanXSeconds",10,l):f<20?n.formatDistance("lessThanXSeconds",20,l):f<40?n.formatDistance("halfAMinute",0,l):f<60?n.formatDistance("lessThanXMinutes",1,l):n.formatDistance("xMinutes",1,l):v===0?n.formatDistance("lessThanXMinutes",1,l):n.formatDistance("xMinutes",v,l);if(v<45)return n.formatDistance("xMinutes",v,l);if(v<90)return n.formatDistance("aboutXHours",1,l);if(v<Vf){const x=Math.round(v/60);return n.formatDistance("aboutXHours",x,l)}else{if(v<i)return n.formatDistance("xDays",1,l);if(v<md){const x=Math.round(v/Vf);return n.formatDistance("xDays",x,l)}else if(v<md*2)return u=Math.round(v/md),n.formatDistance("aboutXMonths",u,l)}if(u=Bb(h,c),u<12){const x=Math.round(v/md);return n.formatDistance("xMonths",x,l)}else{const x=u%12,j=Math.trunc(u/12);return x<3?n.formatDistance("aboutXYears",j,l):x<9?n.formatDistance("overXYears",j,l):n.formatDistance("almostXYears",j+1,l)}}function ci(s,t){return Bw(s,Sx(s),t)}function Uw(s){return Ib(s,Sx(s))}function qw(s,t){const a=Hw(s);let n;if(a.date){const c=Vw(a.date,2);n=Yw(c.restDateString,c.year)}if(!n||isNaN(n.getTime()))return new Date(NaN);const i=n.getTime();let o=0,l;if(a.time&&(o=Gw(a.time),isNaN(o)))return new Date(NaN);if(a.timezone){if(l=Jw(a.timezone),isNaN(l))return new Date(NaN)}else{const c=new Date(i+o),h=new Date(0);return h.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),h.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),h}return new Date(i+o+l)}const fd={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},zw=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,$w=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Ww=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Hw(s){const t={},r=s.split(fd.dateTimeDelimiter);let a;if(r.length>2)return t;if(/:/.test(r[0])?a=r[0]:(t.date=r[0],a=r[1],fd.timeZoneDelimiter.test(t.date)&&(t.date=s.split(fd.timeZoneDelimiter)[0],a=s.substr(t.date.length,s.length))),a){const n=fd.timezone.exec(a);n?(t.time=a.replace(n[1],""),t.timezone=n[1]):t.time=a}return t}function Vw(s,t){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),a=s.match(r);if(!a)return{year:NaN,restDateString:""};const n=a[1]?parseInt(a[1]):null,i=a[2]?parseInt(a[2]):null;return{year:i===null?n:i*100,restDateString:s.slice((a[1]||a[2]).length)}}function Yw(s,t){if(t===null)return new Date(NaN);const r=s.match(zw);if(!r)return new Date(NaN);const a=!!r[4],n=Vl(r[1]),i=Vl(r[2])-1,o=Vl(r[3]),l=Vl(r[4]),c=Vl(r[5])-1;if(a)return e5(t,l,c)?Kw(t,l,c):new Date(NaN);{const h=new Date(0);return!Qw(t,i,o)||!Zw(t,n)?new Date(NaN):(h.setUTCFullYear(t,i,Math.max(n,o)),h)}}function Vl(s){return s?parseInt(s):1}function Gw(s){const t=s.match($w);if(!t)return NaN;const r=lh(t[1]),a=lh(t[2]),n=lh(t[3]);return t5(r,a,n)?r*wx+a*bx+n*1e3:NaN}function lh(s){return s&&parseFloat(s.replace(",","."))||0}function Jw(s){if(s==="Z")return 0;const t=s.match(Ww);if(!t)return 0;const r=t[1]==="+"?-1:1,a=parseInt(t[2]),n=t[3]&&parseInt(t[3])||0;return s5(a,n)?r*(a*wx+n*bx):NaN}function Kw(s,t,r){const a=new Date(0);a.setUTCFullYear(s,0,4);const n=a.getUTCDay()||7,i=(t-1)*7+r+1-n;return a.setUTCDate(a.getUTCDate()+i),a}const Xw=[31,null,31,30,31,30,31,31,30,31,30,31];function _x(s){return s%400===0||s%4===0&&s%100!==0}function Qw(s,t,r){return t>=0&&t<=11&&r>=1&&r<=(Xw[t]||(_x(s)?29:28))}function Zw(s,t){return t>=1&&t<=(_x(s)?366:365)}function e5(s,t,r){return t>=1&&t<=53&&r>=0&&r<=6}function t5(s,t,r){return s===24?t===0&&r===0:r>=0&&r<60&&t>=0&&t<60&&s>=0&&s<25}function s5(s,t){return t>=0&&t<=59}function Ce(...s){return Cb(sx(s))}function Jt(s,t="PPP"){if(!s)return"N/A";try{const r=typeof s=="string"?qw(s):s;return isNaN(r.getTime())?"Invalid Date":Px(r,t)}catch(r){return"Invalid Date"}}function Ix(s){if(!s)return null;let t=null;try{const r=new URL(s);r.hostname==="youtu.be"?t=r.pathname.slice(1):r.hostname.includes("youtube.com")&&(t=r.searchParams.get("v"))}catch(r){return null}return t}function ch(s){try{return new URL(s),!0}catch(t){return!1}}function r5(s){const t=new Date(s),a=Math.floor((new Date().getTime()-t.getTime())/1e3);if(a<60)return"Just now";const n=Math.floor(a/60);if(n<60)return`${n} ${n===1?"minute":"minutes"} ago`;const i=Math.floor(n/60);if(i<24)return`${i} ${i===1?"hour":"hours"} ago`;const o=Math.floor(i/24);return o<30?`${o} ${o===1?"day":"days"} ago`:Jt(s)}const a5=Cy,Lx=b.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Ee(n,["className"]);return e.jsx(Jg,E({ref:r,className:Ce("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",s)},t))});Lx.displayName=Jg.displayName;const n5=Qd("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Tx=b.forwardRef((n,a)=>{var i=n,{className:s,variant:t}=i,r=Ee(i,["className","variant"]);return e.jsx(Kg,E({ref:a,className:Ce(n5({variant:t}),s)},r))});Tx.displayName=Kg.displayName;const i5=b.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Ee(n,["className"]);return e.jsx(Zg,E({ref:r,className:Ce("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",s)},t))});i5.displayName=Zg.displayName;const Dx=b.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Ee(n,["className"]);return e.jsx(ex,Z(E({ref:r,className:Ce("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",s),"toast-close":""},t),{children:e.jsx(Zs,{className:"h-4 w-4"})}))});Dx.displayName=ex.displayName;const Mx=b.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Ee(n,["className"]);return e.jsx(Xg,E({ref:r,className:Ce("text-sm font-semibold",s)},t))});Mx.displayName=Xg.displayName;const Ex=b.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Ee(n,["className"]);return e.jsx(Qg,E({ref:r,className:Ce("text-sm opacity-90",s)},t))});Ex.displayName=Qg.displayName;function o5(){const{toasts:s}=da();return e.jsxs(a5,{children:[s.map(function(o){var l=o,{id:t,title:r,description:a,action:n}=l,i=Ee(l,["id","title","description","action"]);return e.jsxs(Tx,Z(E({},i),{children:[e.jsxs("div",{className:"grid gap-1",children:[r&&e.jsx(Mx,{children:r}),a&&e.jsx(Ex,{children:a})]}),n,e.jsx(Dx,{})]}),t)}),e.jsx(Lx,{})]})}var Qf=["light","dark"],l5="(prefers-color-scheme: dark)",c5=b.createContext(void 0),d5={setTheme:s=>{},themes:[]},u5=()=>{var s;return(s=b.useContext(c5))!=null?s:d5};b.memo(({forcedTheme:s,storageKey:t,attribute:r,enableSystem:a,enableColorScheme:n,defaultTheme:i,value:o,attrs:l,nonce:c})=>{let h=i==="system",f=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(C=>`'${C}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,p=n?Qf.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",v=(C,w=!1,x=!0)=>{let j=o?o[C]:C,_=w?C+"|| ''":`'${j}'`,T="";return n&&x&&!w&&Qf.includes(C)&&(T+=`d.style.colorScheme = '${C}';`),r==="class"?w||j?T+=`c.add(${_})`:T+="null":j&&(T+=`d[s](n,${_})`),T},u=s?`!function(){${f}${v(s)}}()`:a?`!function(){try{${f}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${h})){var t='${l5}',m=window.matchMedia(t);if(m.media!==t||m.matches){${v("dark")}}else{${v("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${v(o?"x[e]":"e",!0)}}${h?"":"else{"+v(i,!1,!1)+"}"}${p}}catch(e){}}()`:`!function(){try{${f}var e=localStorage.getItem('${t}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${v(o?"x[e]":"e",!0)}}else{${v(i,!1,!1)};}${p}}catch(t){}}();`;return b.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:u}})});var h5=s=>{switch(s){case"success":return p5;case"info":return x5;case"warning":return g5;case"error":return v5;default:return null}},m5=Array(12).fill(0),f5=({visible:s,className:t})=>rt.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":s},rt.createElement("div",{className:"sonner-spinner"},m5.map((r,a)=>rt.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${a}`})))),p5=rt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},rt.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),g5=rt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},rt.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),x5=rt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},rt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),v5=rt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},rt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),y5=rt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},rt.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),rt.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),b5=()=>{let[s,t]=rt.useState(document.hidden);return rt.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),s},Dh=1,w5=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let r=this.subscribers.indexOf(t);this.subscribers.splice(r,1)}),this.publish=t=>{this.subscribers.forEach(r=>r(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var r;let c=t,{message:a}=c,n=Ee(c,["message"]),i=typeof(t==null?void 0:t.id)=="number"||((r=t.id)==null?void 0:r.length)>0?t.id:Dh++,o=this.toasts.find(h=>h.id===i),l=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(h=>h.id===i?(this.publish(Z(E(E({},h),t),{id:i,title:a})),Z(E(E({},h),t),{id:i,dismissible:l,title:a})):h):this.addToast(Z(E({title:a},n),{dismissible:l,id:i})),i},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(r=>{this.subscribers.forEach(a=>a({id:r.id,dismiss:!0}))}),this.subscribers.forEach(r=>r({id:t,dismiss:!0})),t),this.message=(t,r)=>this.create(Z(E({},r),{message:t})),this.error=(t,r)=>this.create(Z(E({},r),{message:t,type:"error"})),this.success=(t,r)=>this.create(Z(E({},r),{type:"success",message:t})),this.info=(t,r)=>this.create(Z(E({},r),{type:"info",message:t})),this.warning=(t,r)=>this.create(Z(E({},r),{type:"warning",message:t})),this.loading=(t,r)=>this.create(Z(E({},r),{type:"loading",message:t})),this.promise=(t,r)=>{if(!r)return;let a;r.loading!==void 0&&(a=this.create(Z(E({},r),{promise:t,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0})));let n=t instanceof Promise?t:t(),i=a!==void 0,o,l=n.then(h=>he(this,null,function*(){if(o=["resolve",h],rt.isValidElement(h))i=!1,this.create({id:a,type:"default",message:h});else if(N5(h)&&!h.ok){i=!1;let f=typeof r.error=="function"?yield r.error(`HTTP error! status: ${h.status}`):r.error,p=typeof r.description=="function"?yield r.description(`HTTP error! status: ${h.status}`):r.description;this.create({id:a,type:"error",message:f,description:p})}else if(r.success!==void 0){i=!1;let f=typeof r.success=="function"?yield r.success(h):r.success,p=typeof r.description=="function"?yield r.description(h):r.description;this.create({id:a,type:"success",message:f,description:p})}})).catch(h=>he(this,null,function*(){if(o=["reject",h],r.error!==void 0){i=!1;let f=typeof r.error=="function"?yield r.error(h):r.error,p=typeof r.description=="function"?yield r.description(h):r.description;this.create({id:a,type:"error",message:f,description:p})}})).finally(()=>{var h;i&&(this.dismiss(a),a=void 0),(h=r.finally)==null||h.call(r)}),c=()=>new Promise((h,f)=>l.then(()=>o[0]==="reject"?f(o[1]):h(o[1])).catch(f));return typeof a!="string"&&typeof a!="number"?{unwrap:c}:Object.assign(a,{unwrap:c})},this.custom=(t,r)=>{let a=(r==null?void 0:r.id)||Dh++;return this.create(E({jsx:t(a),id:a},r)),a},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Zr=new w5,j5=(s,t)=>{let r=(t==null?void 0:t.id)||Dh++;return Zr.addToast(Z(E({title:s},t),{id:r})),r},N5=s=>s&&typeof s=="object"&&"ok"in s&&typeof s.ok=="boolean"&&"status"in s&&typeof s.status=="number",S5=j5,k5=()=>Zr.toasts,C5=()=>Zr.getActiveToasts();Object.assign(S5,{success:Zr.success,info:Zr.info,warning:Zr.warning,error:Zr.error,custom:Zr.custom,message:Zr.message,promise:Zr.promise,dismiss:Zr.dismiss,loading:Zr.loading},{getHistory:k5,getToasts:C5});function A5(s,{insertAt:t}={}){if(typeof document=="undefined")return;let r=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",t==="top"&&r.firstChild?r.insertBefore(a,r.firstChild):r.appendChild(a),a.styleSheet?a.styleSheet.cssText=s:a.appendChild(document.createTextNode(s))}A5(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function pd(s){return s.label!==void 0}var P5=3,_5="32px",I5="16px",Zf=4e3,L5=356,T5=14,D5=20,M5=200;function La(...s){return s.filter(Boolean).join(" ")}function E5(s){let[t,r]=s.split("-"),a=[];return t&&a.push(t),r&&a.push(r),a}var R5=s=>{var t,r,a,n,i,o,l,c,h,f,p;let{invert:v,toast:u,unstyled:C,interacting:w,setHeights:x,visibleToasts:j,heights:_,index:T,toasts:U,expanded:R,removeToast:V,defaultRichColors:$,closeButton:S,style:A,cancelButtonStyle:L,actionButtonStyle:N,className:k="",descriptionClassName:D="",duration:I,position:H,gap:se,loadingIcon:ce,expandByDefault:le,classNames:ne,icons:fe,closeButtonAriaLabel:Se="Close toast",pauseWhenPageIsHidden:M}=s,[B,J]=rt.useState(null),[te,G]=rt.useState(null),[ae,ie]=rt.useState(!1),[ue,Ae]=rt.useState(!1),[re,je]=rt.useState(!1),[Le,X]=rt.useState(!1),[Q,W]=rt.useState(!1),[ve,Pe]=rt.useState(0),[be,Be]=rt.useState(0),Fe=rt.useRef(u.duration||I||Zf),$e=rt.useRef(null),Ke=rt.useRef(null),Qe=T===0,et=T+1<=j,Je=u.type,Re=u.dismissible!==!1,ft=u.className||"",mt=u.descriptionClassName||"",St=rt.useMemo(()=>_.findIndex(tt=>tt.toastId===u.id)||0,[_,u.id]),Ve=rt.useMemo(()=>{var tt;return(tt=u.closeButton)!=null?tt:S},[u.closeButton,S]),es=rt.useMemo(()=>u.duration||I||Zf,[u.duration,I]),jt=rt.useRef(0),Ls=rt.useRef(0),Ft=rt.useRef(0),Lt=rt.useRef(null),[lr,Yt]=H.split("-"),pr=rt.useMemo(()=>_.reduce((tt,Tt,Mt)=>Mt>=St?tt:tt+Tt.height,0),[_,St]),rs=b5(),Hs=u.invert||v,cr=Je==="loading";Ls.current=rt.useMemo(()=>St*se+pr,[St,pr]),rt.useEffect(()=>{Fe.current=es},[es]),rt.useEffect(()=>{ie(!0)},[]),rt.useEffect(()=>{let tt=Ke.current;if(tt){let Tt=tt.getBoundingClientRect().height;return Be(Tt),x(Mt=>[{toastId:u.id,height:Tt,position:u.position},...Mt]),()=>x(Mt=>Mt.filter(As=>As.toastId!==u.id))}},[x,u.id]),rt.useLayoutEffect(()=>{if(!ae)return;let tt=Ke.current,Tt=tt.style.height;tt.style.height="auto";let Mt=tt.getBoundingClientRect().height;tt.style.height=Tt,Be(Mt),x(As=>As.find(xs=>xs.toastId===u.id)?As.map(xs=>xs.toastId===u.id?Z(E({},xs),{height:Mt}):xs):[{toastId:u.id,height:Mt,position:u.position},...As])},[ae,u.title,u.description,x,u.id]);let Kt=rt.useCallback(()=>{Ae(!0),Pe(Ls.current),x(tt=>tt.filter(Tt=>Tt.toastId!==u.id)),setTimeout(()=>{V(u)},M5)},[u,V,x,Ls]);rt.useEffect(()=>{if(u.promise&&Je==="loading"||u.duration===1/0||u.type==="loading")return;let tt;return R||w||M&&rs?(()=>{if(Ft.current<jt.current){let Tt=new Date().getTime()-jt.current;Fe.current=Fe.current-Tt}Ft.current=new Date().getTime()})():Fe.current!==1/0&&(jt.current=new Date().getTime(),tt=setTimeout(()=>{var Tt;(Tt=u.onAutoClose)==null||Tt.call(u,u),Kt()},Fe.current)),()=>clearTimeout(tt)},[R,w,u,Je,M,rs,Kt]),rt.useEffect(()=>{u.delete&&Kt()},[Kt,u.delete]);function Ct(){var tt,Tt,Mt;return fe!=null&&fe.loading?rt.createElement("div",{className:La(ne==null?void 0:ne.loader,(tt=u==null?void 0:u.classNames)==null?void 0:tt.loader,"sonner-loader"),"data-visible":Je==="loading"},fe.loading):ce?rt.createElement("div",{className:La(ne==null?void 0:ne.loader,(Tt=u==null?void 0:u.classNames)==null?void 0:Tt.loader,"sonner-loader"),"data-visible":Je==="loading"},ce):rt.createElement(f5,{className:La(ne==null?void 0:ne.loader,(Mt=u==null?void 0:u.classNames)==null?void 0:Mt.loader),visible:Je==="loading"})}return rt.createElement("li",{tabIndex:0,ref:Ke,className:La(k,ft,ne==null?void 0:ne.toast,(t=u==null?void 0:u.classNames)==null?void 0:t.toast,ne==null?void 0:ne.default,ne==null?void 0:ne[Je],(r=u==null?void 0:u.classNames)==null?void 0:r[Je]),"data-sonner-toast":"","data-rich-colors":(a=u.richColors)!=null?a:$,"data-styled":!(u.jsx||u.unstyled||C),"data-mounted":ae,"data-promise":!!u.promise,"data-swiped":Q,"data-removed":ue,"data-visible":et,"data-y-position":lr,"data-x-position":Yt,"data-index":T,"data-front":Qe,"data-swiping":re,"data-dismissible":Re,"data-type":Je,"data-invert":Hs,"data-swipe-out":Le,"data-swipe-direction":te,"data-expanded":!!(R||le&&ae),style:E(E({"--index":T,"--toasts-before":T,"--z-index":U.length-T,"--offset":`${ue?ve:Ls.current}px`,"--initial-height":le?"auto":`${be}px`},A),u.style),onDragEnd:()=>{je(!1),J(null),Lt.current=null},onPointerDown:tt=>{cr||!Re||($e.current=new Date,Pe(Ls.current),tt.target.setPointerCapture(tt.pointerId),tt.target.tagName!=="BUTTON"&&(je(!0),Lt.current={x:tt.clientX,y:tt.clientY}))},onPointerUp:()=>{var tt,Tt,Mt,As;if(Le||!Re)return;Lt.current=null;let xs=Number(((tt=Ke.current)==null?void 0:tt.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),gt=Number(((Tt=Ke.current)==null?void 0:Tt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Rs=new Date().getTime()-((Mt=$e.current)==null?void 0:Mt.getTime()),Te=B==="x"?xs:gt,ct=Math.abs(Te)/Rs;if(Math.abs(Te)>=D5||ct>.11){Pe(Ls.current),(As=u.onDismiss)==null||As.call(u,u),G(B==="x"?xs>0?"right":"left":gt>0?"down":"up"),Kt(),X(!0),W(!1);return}je(!1),J(null)},onPointerMove:tt=>{var Tt,Mt,As,xs;if(!Lt.current||!Re||((Tt=window.getSelection())==null?void 0:Tt.toString().length)>0)return;let gt=tt.clientY-Lt.current.y,Rs=tt.clientX-Lt.current.x,Te=(Mt=s.swipeDirections)!=null?Mt:E5(H);!B&&(Math.abs(Rs)>1||Math.abs(gt)>1)&&J(Math.abs(Rs)>Math.abs(gt)?"x":"y");let ct={x:0,y:0};B==="y"?(Te.includes("top")||Te.includes("bottom"))&&(Te.includes("top")&&gt<0||Te.includes("bottom")&&gt>0)&&(ct.y=gt):B==="x"&&(Te.includes("left")||Te.includes("right"))&&(Te.includes("left")&&Rs<0||Te.includes("right")&&Rs>0)&&(ct.x=Rs),(Math.abs(ct.x)>0||Math.abs(ct.y)>0)&&W(!0),(As=Ke.current)==null||As.style.setProperty("--swipe-amount-x",`${ct.x}px`),(xs=Ke.current)==null||xs.style.setProperty("--swipe-amount-y",`${ct.y}px`)}},Ve&&!u.jsx?rt.createElement("button",{"aria-label":Se,"data-disabled":cr,"data-close-button":!0,onClick:cr||!Re?()=>{}:()=>{var tt;Kt(),(tt=u.onDismiss)==null||tt.call(u,u)},className:La(ne==null?void 0:ne.closeButton,(n=u==null?void 0:u.classNames)==null?void 0:n.closeButton)},(i=fe==null?void 0:fe.close)!=null?i:y5):null,u.jsx||b.isValidElement(u.title)?u.jsx?u.jsx:typeof u.title=="function"?u.title():u.title:rt.createElement(rt.Fragment,null,Je||u.icon||u.promise?rt.createElement("div",{"data-icon":"",className:La(ne==null?void 0:ne.icon,(o=u==null?void 0:u.classNames)==null?void 0:o.icon)},u.promise||u.type==="loading"&&!u.icon?u.icon||Ct():null,u.type!=="loading"?u.icon||(fe==null?void 0:fe[Je])||h5(Je):null):null,rt.createElement("div",{"data-content":"",className:La(ne==null?void 0:ne.content,(l=u==null?void 0:u.classNames)==null?void 0:l.content)},rt.createElement("div",{"data-title":"",className:La(ne==null?void 0:ne.title,(c=u==null?void 0:u.classNames)==null?void 0:c.title)},typeof u.title=="function"?u.title():u.title),u.description?rt.createElement("div",{"data-description":"",className:La(D,mt,ne==null?void 0:ne.description,(h=u==null?void 0:u.classNames)==null?void 0:h.description)},typeof u.description=="function"?u.description():u.description):null),b.isValidElement(u.cancel)?u.cancel:u.cancel&&pd(u.cancel)?rt.createElement("button",{"data-button":!0,"data-cancel":!0,style:u.cancelButtonStyle||L,onClick:tt=>{var Tt,Mt;pd(u.cancel)&&Re&&((Mt=(Tt=u.cancel).onClick)==null||Mt.call(Tt,tt),Kt())},className:La(ne==null?void 0:ne.cancelButton,(f=u==null?void 0:u.classNames)==null?void 0:f.cancelButton)},u.cancel.label):null,b.isValidElement(u.action)?u.action:u.action&&pd(u.action)?rt.createElement("button",{"data-button":!0,"data-action":!0,style:u.actionButtonStyle||N,onClick:tt=>{var Tt,Mt;pd(u.action)&&((Mt=(Tt=u.action).onClick)==null||Mt.call(Tt,tt),!tt.defaultPrevented&&Kt())},className:La(ne==null?void 0:ne.actionButton,(p=u==null?void 0:u.classNames)==null?void 0:p.actionButton)},u.action.label):null))};function ep(){if(typeof window=="undefined"||typeof document=="undefined")return"ltr";let s=document.documentElement.getAttribute("dir");return s==="auto"||!s?window.getComputedStyle(document.documentElement).direction:s}function O5(s,t){let r={};return[s,t].forEach((a,n)=>{let i=n===1,o=i?"--mobile-offset":"--offset",l=i?I5:_5;function c(h){["top","right","bottom","left"].forEach(f=>{r[`${o}-${f}`]=typeof h=="number"?`${h}px`:h})}typeof a=="number"||typeof a=="string"?c(a):typeof a=="object"?["top","right","bottom","left"].forEach(h=>{a[h]===void 0?r[`${o}-${h}`]=l:r[`${o}-${h}`]=typeof a[h]=="number"?`${a[h]}px`:a[h]}):c(l)}),r}var F5=b.forwardRef(function(s,t){let{invert:r,position:a="bottom-right",hotkey:n=["altKey","KeyT"],expand:i,closeButton:o,className:l,offset:c,mobileOffset:h,theme:f="light",richColors:p,duration:v,style:u,visibleToasts:C=P5,toastOptions:w,dir:x=ep(),gap:j=T5,loadingIcon:_,icons:T,containerAriaLabel:U="Notifications",pauseWhenPageIsHidden:R}=s,[V,$]=rt.useState([]),S=rt.useMemo(()=>Array.from(new Set([a].concat(V.filter(M=>M.position).map(M=>M.position)))),[V,a]),[A,L]=rt.useState([]),[N,k]=rt.useState(!1),[D,I]=rt.useState(!1),[H,se]=rt.useState(f!=="system"?f:typeof window!="undefined"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),ce=rt.useRef(null),le=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),ne=rt.useRef(null),fe=rt.useRef(!1),Se=rt.useCallback(M=>{$(B=>{var J;return(J=B.find(te=>te.id===M.id))!=null&&J.delete||Zr.dismiss(M.id),B.filter(({id:te})=>te!==M.id)})},[]);return rt.useEffect(()=>Zr.subscribe(M=>{if(M.dismiss){$(B=>B.map(J=>J.id===M.id?Z(E({},J),{delete:!0}):J));return}setTimeout(()=>{Qv.flushSync(()=>{$(B=>{let J=B.findIndex(te=>te.id===M.id);return J!==-1?[...B.slice(0,J),E(E({},B[J]),M),...B.slice(J+1)]:[M,...B]})})})}),[]),rt.useEffect(()=>{if(f!=="system"){se(f);return}if(f==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?se("dark"):se("light")),typeof window=="undefined")return;let M=window.matchMedia("(prefers-color-scheme: dark)");try{M.addEventListener("change",({matches:B})=>{se(B?"dark":"light")})}catch(B){M.addListener(({matches:J})=>{try{se(J?"dark":"light")}catch(te){}})}},[f]),rt.useEffect(()=>{V.length<=1&&k(!1)},[V]),rt.useEffect(()=>{let M=B=>{var J,te;n.every(G=>B[G]||B.code===G)&&(k(!0),(J=ce.current)==null||J.focus()),B.code==="Escape"&&(document.activeElement===ce.current||(te=ce.current)!=null&&te.contains(document.activeElement))&&k(!1)};return document.addEventListener("keydown",M),()=>document.removeEventListener("keydown",M)},[n]),rt.useEffect(()=>{if(ce.current)return()=>{ne.current&&(ne.current.focus({preventScroll:!0}),ne.current=null,fe.current=!1)}},[ce.current]),rt.createElement("section",{ref:t,"aria-label":`${U} ${le}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},S.map((M,B)=>{var J;let[te,G]=M.split("-");return V.length?rt.createElement("ol",{key:M,dir:x==="auto"?ep():x,tabIndex:-1,ref:ce,className:l,"data-sonner-toaster":!0,"data-theme":H,"data-y-position":te,"data-lifted":N&&V.length>1&&!i,"data-x-position":G,style:E(E({"--front-toast-height":`${((J=A[0])==null?void 0:J.height)||0}px`,"--width":`${L5}px`,"--gap":`${j}px`},u),O5(c,h)),onBlur:ae=>{fe.current&&!ae.currentTarget.contains(ae.relatedTarget)&&(fe.current=!1,ne.current&&(ne.current.focus({preventScroll:!0}),ne.current=null))},onFocus:ae=>{ae.target instanceof HTMLElement&&ae.target.dataset.dismissible==="false"||fe.current||(fe.current=!0,ne.current=ae.relatedTarget)},onMouseEnter:()=>k(!0),onMouseMove:()=>k(!0),onMouseLeave:()=>{D||k(!1)},onDragEnd:()=>k(!1),onPointerDown:ae=>{ae.target instanceof HTMLElement&&ae.target.dataset.dismissible==="false"||I(!0)},onPointerUp:()=>I(!1)},V.filter(ae=>!ae.position&&B===0||ae.position===M).map((ae,ie)=>{var ue,Ae;return rt.createElement(R5,{key:ae.id,icons:T,index:ie,toast:ae,defaultRichColors:p,duration:(ue=w==null?void 0:w.duration)!=null?ue:v,className:w==null?void 0:w.className,descriptionClassName:w==null?void 0:w.descriptionClassName,invert:r,visibleToasts:C,closeButton:(Ae=w==null?void 0:w.closeButton)!=null?Ae:o,interacting:D,position:M,style:w==null?void 0:w.style,unstyled:w==null?void 0:w.unstyled,classNames:w==null?void 0:w.classNames,cancelButtonStyle:w==null?void 0:w.cancelButtonStyle,actionButtonStyle:w==null?void 0:w.actionButtonStyle,removeToast:Se,toasts:V.filter(re=>re.position==ae.position),heights:A.filter(re=>re.position==ae.position),setHeights:L,expandByDefault:i,gap:j,loadingIcon:_,expanded:N,pauseWhenPageIsHidden:R,swipeDirections:s.swipeDirections})})):null}))});const B5=t=>{var s=Ee(t,[]);const{theme:r="system"}=u5();return e.jsx(F5,E({theme:r,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}}},s))};var[Zd,Wk]=Sn("Tooltip",[Gd]),eu=Gd(),Rx="TooltipProvider",U5=700,Mh="tooltip.open",[q5,Tm]=Zd(Rx),Ox=s=>{const{__scopeTooltip:t,delayDuration:r=U5,skipDelayDuration:a=300,disableHoverableContent:n=!1,children:i}=s,o=b.useRef(!0),l=b.useRef(!1),c=b.useRef(0);return b.useEffect(()=>{const h=c.current;return()=>window.clearTimeout(h)},[]),e.jsx(q5,{scope:t,isOpenDelayedRef:o,delayDuration:r,onOpen:b.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:b.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,a)},[a]),isPointerInTransitRef:l,onPointerInTransitChange:b.useCallback(h=>{l.current=h},[]),disableHoverableContent:n,children:i})};Ox.displayName=Rx;var oc="Tooltip",[z5,tu]=Zd(oc),Fx=s=>{const{__scopeTooltip:t,children:r,open:a,defaultOpen:n,onOpenChange:i,disableHoverableContent:o,delayDuration:l}=s,c=Tm(oc,s.__scopeTooltip),h=eu(t),[f,p]=b.useState(null),v=Jd(),u=b.useRef(0),C=o!=null?o:c.disableHoverableContent,w=l!=null?l:c.delayDuration,x=b.useRef(!1),[j,_]=Zo({prop:a,defaultProp:n!=null?n:!1,onChange:$=>{$?(c.onOpen(),document.dispatchEvent(new CustomEvent(Mh))):c.onClose(),i==null||i($)},caller:oc}),T=b.useMemo(()=>j?x.current?"delayed-open":"instant-open":"closed",[j]),U=b.useCallback(()=>{window.clearTimeout(u.current),u.current=0,x.current=!1,_(!0)},[_]),R=b.useCallback(()=>{window.clearTimeout(u.current),u.current=0,_(!1)},[_]),V=b.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>{x.current=!0,_(!0),u.current=0},w)},[w,_]);return b.useEffect(()=>()=>{u.current&&(window.clearTimeout(u.current),u.current=0)},[]),e.jsx(fg,Z(E({},h),{children:e.jsx(z5,{scope:t,contentId:v,open:j,stateAttribute:T,trigger:f,onTriggerChange:p,onTriggerEnter:b.useCallback(()=>{c.isOpenDelayedRef.current?V():U()},[c.isOpenDelayedRef,V,U]),onTriggerLeave:b.useCallback(()=>{C?R():(window.clearTimeout(u.current),u.current=0)},[R,C]),onOpen:U,onClose:R,disableHoverableContent:C,children:r})}))};Fx.displayName=oc;var Eh="TooltipTrigger",Bx=b.forwardRef((s,t)=>{const v=s,{__scopeTooltip:r}=v,a=Ee(v,["__scopeTooltip"]),n=tu(Eh,r),i=Tm(Eh,r),o=eu(r),l=b.useRef(null),c=Is(t,l,n.onTriggerChange),h=b.useRef(!1),f=b.useRef(!1),p=b.useCallback(()=>h.current=!1,[]);return b.useEffect(()=>()=>document.removeEventListener("pointerup",p),[p]),e.jsx(pg,Z(E({asChild:!0},o),{children:e.jsx(Qt.button,Z(E({"aria-describedby":n.open?n.contentId:void 0,"data-state":n.stateAttribute},a),{ref:c,onPointerMove:qt(s.onPointerMove,u=>{u.pointerType!=="touch"&&!f.current&&!i.isPointerInTransitRef.current&&(n.onTriggerEnter(),f.current=!0)}),onPointerLeave:qt(s.onPointerLeave,()=>{n.onTriggerLeave(),f.current=!1}),onPointerDown:qt(s.onPointerDown,()=>{n.open&&n.onClose(),h.current=!0,document.addEventListener("pointerup",p,{once:!0})}),onFocus:qt(s.onFocus,()=>{h.current||n.onOpen()}),onBlur:qt(s.onBlur,n.onClose),onClick:qt(s.onClick,n.onClose)}))}))});Bx.displayName=Eh;var $5="TooltipPortal",[Hk,W5]=Zd($5,{forceMount:void 0}),sl="TooltipContent",Ux=b.forwardRef((s,t)=>{const r=W5(sl,s.__scopeTooltip),l=s,{forceMount:a=r.forceMount,side:n="top"}=l,i=Ee(l,["forceMount","side"]),o=tu(sl,s.__scopeTooltip);return e.jsx(Qi,{present:a||o.open,children:o.disableHoverableContent?e.jsx(qx,Z(E({side:n},i),{ref:t})):e.jsx(H5,Z(E({side:n},i),{ref:t}))})}),H5=b.forwardRef((s,t)=>{const r=tu(sl,s.__scopeTooltip),a=Tm(sl,s.__scopeTooltip),n=b.useRef(null),i=Is(t,n),[o,l]=b.useState(null),{trigger:c,onClose:h}=r,f=n.current,{onPointerInTransitChange:p}=a,v=b.useCallback(()=>{l(null),p(!1)},[p]),u=b.useCallback((C,w)=>{const x=C.currentTarget,j={x:C.clientX,y:C.clientY},_=K5(j,x.getBoundingClientRect()),T=X5(j,_),U=Q5(w.getBoundingClientRect()),R=ej([...T,...U]);l(R),p(!0)},[p]);return b.useEffect(()=>()=>v(),[v]),b.useEffect(()=>{if(c&&f){const C=x=>u(x,f),w=x=>u(x,c);return c.addEventListener("pointerleave",C),f.addEventListener("pointerleave",w),()=>{c.removeEventListener("pointerleave",C),f.removeEventListener("pointerleave",w)}}},[c,f,u,v]),b.useEffect(()=>{if(o){const C=w=>{const x=w.target,j={x:w.clientX,y:w.clientY},_=(c==null?void 0:c.contains(x))||(f==null?void 0:f.contains(x)),T=!Z5(j,o);_?v():T&&(v(),h())};return document.addEventListener("pointermove",C),()=>document.removeEventListener("pointermove",C)}},[c,f,o,h,v]),e.jsx(qx,Z(E({},s),{ref:i}))}),[V5,Y5]=Zd(oc,{isInside:!1}),G5=mg("TooltipContent"),qx=b.forwardRef((s,t)=>{const p=s,{__scopeTooltip:r,children:a,"aria-label":n,onEscapeKeyDown:i,onPointerDownOutside:o}=p,l=Ee(p,["__scopeTooltip","children","aria-label","onEscapeKeyDown","onPointerDownOutside"]),c=tu(sl,r),h=eu(r),{onClose:f}=c;return b.useEffect(()=>(document.addEventListener(Mh,f),()=>document.removeEventListener(Mh,f)),[f]),b.useEffect(()=>{if(c.trigger){const v=u=>{const C=u.target;C!=null&&C.contains(c.trigger)&&f()};return window.addEventListener("scroll",v,{capture:!0}),()=>window.removeEventListener("scroll",v,{capture:!0})}},[c.trigger,f]),e.jsx(ug,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:v=>v.preventDefault(),onDismiss:f,children:e.jsxs(hg,Z(E(E({"data-state":c.stateAttribute},h),l),{ref:t,style:Z(E({},l.style),{"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}),children:[e.jsx(G5,{children:a}),e.jsx(V5,{scope:r,isInside:!0,children:e.jsx(oy,{id:c.contentId,role:"tooltip",children:n||a})})]}))})});Ux.displayName=sl;var zx="TooltipArrow",J5=b.forwardRef((s,t)=>{const o=s,{__scopeTooltip:r}=o,a=Ee(o,["__scopeTooltip"]),n=eu(r);return Y5(zx,r).isInside?null:e.jsx(gg,Z(E(E({},n),a),{ref:t}))});J5.displayName=zx;function K5(s,t){const r=Math.abs(t.top-s.y),a=Math.abs(t.bottom-s.y),n=Math.abs(t.right-s.x),i=Math.abs(t.left-s.x);switch(Math.min(r,a,n,i)){case i:return"left";case n:return"right";case r:return"top";case a:return"bottom";default:throw new Error("unreachable")}}function X5(s,t,r=5){const a=[];switch(t){case"top":a.push({x:s.x-r,y:s.y+r},{x:s.x+r,y:s.y+r});break;case"bottom":a.push({x:s.x-r,y:s.y-r},{x:s.x+r,y:s.y-r});break;case"left":a.push({x:s.x+r,y:s.y-r},{x:s.x+r,y:s.y+r});break;case"right":a.push({x:s.x-r,y:s.y-r},{x:s.x-r,y:s.y+r});break}return a}function Q5(s){const{top:t,right:r,bottom:a,left:n}=s;return[{x:n,y:t},{x:r,y:t},{x:r,y:a},{x:n,y:a}]}function Z5(s,t){const{x:r,y:a}=s;let n=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],c=t[o],h=l.x,f=l.y,p=c.x,v=c.y;f>a!=v>a&&r<(p-h)*(a-f)/(v-f)+h&&(n=!n)}return n}function ej(s){const t=s.slice();return t.sort((r,a)=>r.x<a.x?-1:r.x>a.x?1:r.y<a.y?-1:r.y>a.y?1:0),tj(t)}function tj(s){if(s.length<=1)return s.slice();const t=[];for(let a=0;a<s.length;a++){const n=s[a];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(n.y-o.y)>=(i.y-o.y)*(n.x-o.x))t.pop();else break}t.push(n)}t.pop();const r=[];for(let a=s.length-1;a>=0;a--){const n=s[a];for(;r.length>=2;){const i=r[r.length-1],o=r[r.length-2];if((i.x-o.x)*(n.y-o.y)>=(i.y-o.y)*(n.x-o.x))r.pop();else break}r.push(n)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var sj=Ox,rj=Fx,aj=Bx,$x=Ux;const Hi=sj,di=rj,ui=aj,Nn=b.forwardRef((n,a)=>{var i=n,{className:s,sideOffset:t=4}=i,r=Ee(i,["className","sideOffset"]);return e.jsx($x,E({ref:a,sideOffset:t,className:Ce("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s)},r))});Nn.displayName=$x.displayName;var ul=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(s){return this.listeners.add(s),this.onSubscribe(),()=>{this.listeners.delete(s),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Vi=typeof window=="undefined"||"Deno"in globalThis;function Ur(){}function nj(s,t){return typeof s=="function"?s(t):s}function Rh(s){return typeof s=="number"&&s>=0&&s!==1/0}function Wx(s,t){return Math.max(s+(t||0)-Date.now(),0)}function ii(s,t){return typeof s=="function"?s(t):s}function ba(s,t){return typeof s=="function"?s(t):s}function tp(s,t){const{type:r="all",exact:a,fetchStatus:n,predicate:i,queryKey:o,stale:l}=s;if(o){if(a){if(t.queryHash!==Dm(o,t.options))return!1}else if(!lc(t.queryKey,o))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||n&&n!==t.state.fetchStatus||i&&!i(t))}function sp(s,t){const{exact:r,status:a,predicate:n,mutationKey:i}=s;if(i){if(!t.options.mutationKey)return!1;if(r){if(Yi(t.options.mutationKey)!==Yi(i))return!1}else if(!lc(t.options.mutationKey,i))return!1}return!(a&&t.state.status!==a||n&&!n(t))}function Dm(s,t){return((t==null?void 0:t.queryKeyHashFn)||Yi)(s)}function Yi(s){return JSON.stringify(s,(t,r)=>Oh(r)?Object.keys(r).sort().reduce((a,n)=>(a[n]=r[n],a),{}):r)}function lc(s,t){return s===t?!0:typeof s!=typeof t?!1:s&&t&&typeof s=="object"&&typeof t=="object"?Object.keys(t).every(r=>lc(s[r],t[r])):!1}function Hx(s,t){if(s===t)return s;const r=rp(s)&&rp(t);if(r||Oh(s)&&Oh(t)){const a=r?s:Object.keys(s),n=a.length,i=r?t:Object.keys(t),o=i.length,l=r?[]:{},c=new Set(a);let h=0;for(let f=0;f<o;f++){const p=r?f:i[f];(!r&&c.has(p)||r)&&s[p]===void 0&&t[p]===void 0?(l[p]=void 0,h++):(l[p]=Hx(s[p],t[p]),l[p]===s[p]&&s[p]!==void 0&&h++)}return n===o&&h===n?s:l}return t}function Od(s,t){if(!t||Object.keys(s).length!==Object.keys(t).length)return!1;for(const r in s)if(s[r]!==t[r])return!1;return!0}function rp(s){return Array.isArray(s)&&s.length===Object.keys(s).length}function Oh(s){if(!ap(s))return!1;const t=s.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!ap(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(s)!==Object.prototype)}function ap(s){return Object.prototype.toString.call(s)==="[object Object]"}function ij(s){return new Promise(t=>{setTimeout(t,s)})}function Fh(s,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(s,t):r.structuralSharing!==!1?Hx(s,t):t}function oj(s,t,r=0){const a=[...s,t];return r&&a.length>r?a.slice(1):a}function lj(s,t,r=0){const a=[t,...s];return r&&a.length>r?a.slice(0,-1):a}var Mm=Symbol();function Vx(s,t){return!s.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!s.queryFn||s.queryFn===Mm?()=>Promise.reject(new Error(`Missing queryFn: '${s.queryHash}'`)):s.queryFn}function Yx(s,t){return typeof s=="function"?s(...t):!!s}var Ti,Yn,qo,Zp,cj=(Zp=class extends ul{constructor(){super();bt(this,Ti);bt(this,Yn);bt(this,qo);ht(this,qo,t=>{if(!Vi&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){me(this,Yn)||this.setEventListener(me(this,qo))}onUnsubscribe(){var t;this.hasListeners()||((t=me(this,Yn))==null||t.call(this),ht(this,Yn,void 0))}setEventListener(t){var r;ht(this,qo,t),(r=me(this,Yn))==null||r.call(this),ht(this,Yn,t(a=>{typeof a=="boolean"?this.setFocused(a):this.onFocus()}))}setFocused(t){me(this,Ti)!==t&&(ht(this,Ti,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof me(this,Ti)=="boolean"?me(this,Ti):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Ti=new WeakMap,Yn=new WeakMap,qo=new WeakMap,Zp),Em=new cj,zo,Gn,$o,eg,dj=(eg=class extends ul{constructor(){super();bt(this,zo,!0);bt(this,Gn);bt(this,$o);ht(this,$o,t=>{if(!Vi&&window.addEventListener){const r=()=>t(!0),a=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",a,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",a)}}})}onSubscribe(){me(this,Gn)||this.setEventListener(me(this,$o))}onUnsubscribe(){var t;this.hasListeners()||((t=me(this,Gn))==null||t.call(this),ht(this,Gn,void 0))}setEventListener(t){var r;ht(this,$o,t),(r=me(this,Gn))==null||r.call(this),ht(this,Gn,t(this.setOnline.bind(this)))}setOnline(t){me(this,zo)!==t&&(ht(this,zo,t),this.listeners.forEach(a=>{a(t)}))}isOnline(){return me(this,zo)}},zo=new WeakMap,Gn=new WeakMap,$o=new WeakMap,eg),Fd=new dj;function Bh(){let s,t;const r=new Promise((n,i)=>{s=n,t=i});r.status="pending",r.catch(()=>{});function a(n){Object.assign(r,n),delete r.resolve,delete r.reject}return r.resolve=n=>{a({status:"fulfilled",value:n}),s(n)},r.reject=n=>{a({status:"rejected",reason:n}),t(n)},r}function uj(s){return Math.min(1e3*Of(2,s),3e4)}function Gx(s){return(s!=null?s:"online")==="online"?Fd.isOnline():!0}var Jx=class extends Error{constructor(s){super("CancelledError"),this.revert=s==null?void 0:s.revert,this.silent=s==null?void 0:s.silent}};function dh(s){return s instanceof Jx}function Kx(s){let t=!1,r=0,a=!1,n;const i=Bh(),o=w=>{var x;a||(v(new Jx(w)),(x=s.abort)==null||x.call(s))},l=()=>{t=!0},c=()=>{t=!1},h=()=>Em.isFocused()&&(s.networkMode==="always"||Fd.isOnline())&&s.canRun(),f=()=>Gx(s.networkMode)&&s.canRun(),p=w=>{var x;a||(a=!0,(x=s.onSuccess)==null||x.call(s,w),n==null||n(),i.resolve(w))},v=w=>{var x;a||(a=!0,(x=s.onError)==null||x.call(s,w),n==null||n(),i.reject(w))},u=()=>new Promise(w=>{var x;n=j=>{(a||h())&&w(j)},(x=s.onPause)==null||x.call(s)}).then(()=>{var w;n=void 0,a||(w=s.onContinue)==null||w.call(s)}),C=()=>{if(a)return;let w;const x=r===0?s.initialPromise:void 0;try{w=x!=null?x:s.fn()}catch(j){w=Promise.reject(j)}Promise.resolve(w).then(p).catch(j=>{var V,$,S;if(a)return;const _=(V=s.retry)!=null?V:Vi?0:3,T=($=s.retryDelay)!=null?$:uj,U=typeof T=="function"?T(r,j):T,R=_===!0||typeof _=="number"&&r<_||typeof _=="function"&&_(r,j);if(t||!R){v(j);return}r++,(S=s.onFail)==null||S.call(s,r,j),ij(U).then(()=>h()?void 0:u()).then(()=>{t?v(j):C()})})};return{promise:i,cancel:o,continue:()=>(n==null||n(),i),cancelRetry:l,continueRetry:c,canStart:f,start:()=>(f()?C():u().then(C),i)}}var hj=s=>setTimeout(s,0);function mj(){let s=[],t=0,r=l=>{l()},a=l=>{l()},n=hj;const i=l=>{t?s.push(l):n(()=>{r(l)})},o=()=>{const l=s;s=[],l.length&&n(()=>{a(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{a=l},setScheduler:l=>{n=l}}}var or=mj(),Di,tg,Xx=(tg=class{constructor(){bt(this,Di)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Rh(this.gcTime)&&ht(this,Di,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(s){this.gcTime=Math.max(this.gcTime||0,s!=null?s:Vi?1/0:5*60*1e3)}clearGcTimeout(){me(this,Di)&&(clearTimeout(me(this,Di)),ht(this,Di,void 0))}},Di=new WeakMap,tg),Wo,Mi,ya,Ei,Pr,hc,Ri,Oa,xn,sg,fj=(sg=class extends Xx{constructor(t){var r;super();bt(this,Oa);bt(this,Wo);bt(this,Mi);bt(this,ya);bt(this,Ei);bt(this,Pr);bt(this,hc);bt(this,Ri);ht(this,Ri,!1),ht(this,hc,t.defaultOptions),this.setOptions(t.options),this.observers=[],ht(this,Ei,t.client),ht(this,ya,me(this,Ei).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,ht(this,Wo,pj(this.options)),this.state=(r=t.state)!=null?r:me(this,Wo),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=me(this,Pr))==null?void 0:t.promise}setOptions(t){this.options=E(E({},me(this,hc)),t),this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&me(this,ya).remove(this)}setData(t,r){const a=Fh(this.state.data,t,this.options);return Gt(this,Oa,xn).call(this,{data:a,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),a}setState(t,r){Gt(this,Oa,xn).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var a,n;const r=(a=me(this,Pr))==null?void 0:a.promise;return(n=me(this,Pr))==null||n.cancel(t),r?r.then(Ur).catch(Ur):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(me(this,Wo))}isActive(){return this.observers.some(t=>ba(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Mm||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>ii(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!Wx(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(a=>a.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=me(this,Pr))==null||r.continue()}onOnline(){var r;const t=this.observers.find(a=>a.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=me(this,Pr))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),me(this,ya).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(me(this,Pr)&&(me(this,Ri)?me(this,Pr).cancel({revert:!0}):me(this,Pr).cancelRetry()),this.scheduleGc()),me(this,ya).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Gt(this,Oa,xn).call(this,{type:"invalidate"})}fetch(t,r){var h,f,p;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(me(this,Pr))return me(this,Pr).continueRetry(),me(this,Pr).promise}if(t&&this.setOptions(t),!this.options.queryFn){const v=this.observers.find(u=>u.options.queryFn);v&&this.setOptions(v.options)}const a=new AbortController,n=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(ht(this,Ri,!0),a.signal)})},i=()=>{const v=Vx(this.options,r),C=(()=>{const w={client:me(this,Ei),queryKey:this.queryKey,meta:this.meta};return n(w),w})();return ht(this,Ri,!1),this.options.persister?this.options.persister(v,C,this):v(C)},l=(()=>{const v={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:me(this,Ei),state:this.state,fetchFn:i};return n(v),v})();(h=this.options.behavior)==null||h.onFetch(l,this),ht(this,Mi,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=l.fetchOptions)==null?void 0:f.meta))&&Gt(this,Oa,xn).call(this,{type:"fetch",meta:(p=l.fetchOptions)==null?void 0:p.meta});const c=v=>{var u,C,w,x;dh(v)&&v.silent||Gt(this,Oa,xn).call(this,{type:"error",error:v}),dh(v)||((C=(u=me(this,ya).config).onError)==null||C.call(u,v,this),(x=(w=me(this,ya).config).onSettled)==null||x.call(w,this.state.data,v,this)),this.scheduleGc()};return ht(this,Pr,Kx({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:a.abort.bind(a),onSuccess:v=>{var u,C,w,x;if(v===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(v)}catch(j){c(j);return}(C=(u=me(this,ya).config).onSuccess)==null||C.call(u,v,this),(x=(w=me(this,ya).config).onSettled)==null||x.call(w,v,this.state.error,this),this.scheduleGc()},onError:c,onFail:(v,u)=>{Gt(this,Oa,xn).call(this,{type:"failed",failureCount:v,error:u})},onPause:()=>{Gt(this,Oa,xn).call(this,{type:"pause"})},onContinue:()=>{Gt(this,Oa,xn).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),me(this,Pr).start()}},Wo=new WeakMap,Mi=new WeakMap,ya=new WeakMap,Ei=new WeakMap,Pr=new WeakMap,hc=new WeakMap,Ri=new WeakMap,Oa=new WeakSet,xn=function(t){const r=a=>{var n,i;switch(t.type){case"failed":return Z(E({},a),{fetchFailureCount:t.failureCount,fetchFailureReason:t.error});case"pause":return Z(E({},a),{fetchStatus:"paused"});case"continue":return Z(E({},a),{fetchStatus:"fetching"});case"fetch":return Z(E(E({},a),Qx(a.data,this.options)),{fetchMeta:(n=t.meta)!=null?n:null});case"success":return ht(this,Mi,void 0),E(Z(E({},a),{data:t.data,dataUpdateCount:a.dataUpdateCount+1,dataUpdatedAt:(i=t.dataUpdatedAt)!=null?i:Date.now(),error:null,isInvalidated:!1,status:"success"}),!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null});case"error":const o=t.error;return dh(o)&&o.revert&&me(this,Mi)?Z(E({},me(this,Mi)),{fetchStatus:"idle"}):Z(E({},a),{error:o,errorUpdateCount:a.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:a.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"});case"invalidate":return Z(E({},a),{isInvalidated:!0});case"setState":return E(E({},a),t.state)}};this.state=r(this.state),or.batch(()=>{this.observers.forEach(a=>{a.onQueryUpdate()}),me(this,ya).notify({query:this,type:"updated",action:t})})},sg);function Qx(s,t){return E({fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Gx(t.networkMode)?"fetching":"paused"},s===void 0&&{error:null,status:"pending"})}function pj(s){const t=typeof s.initialData=="function"?s.initialData():s.initialData,r=t!==void 0,a=r?typeof s.initialDataUpdatedAt=="function"?s.initialDataUpdatedAt():s.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?a!=null?a:Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Ka,rg,gj=(rg=class extends ul{constructor(t={}){super();bt(this,Ka);this.config=t,ht(this,Ka,new Map)}build(t,r,a){var l;const n=r.queryKey,i=(l=r.queryHash)!=null?l:Dm(n,r);let o=this.get(i);return o||(o=new fj({client:t,queryKey:n,queryHash:i,options:t.defaultQueryOptions(r),state:a,defaultOptions:t.getQueryDefaults(n)}),this.add(o)),o}add(t){me(this,Ka).has(t.queryHash)||(me(this,Ka).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=me(this,Ka).get(t.queryHash);r&&(t.destroy(),r===t&&me(this,Ka).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){or.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return me(this,Ka).get(t)}getAll(){return[...me(this,Ka).values()]}find(t){const r=E({exact:!0},t);return this.getAll().find(a=>tp(r,a))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(a=>tp(t,a)):r}notify(t){or.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){or.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){or.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Ka=new WeakMap,rg),Xa,Fr,Oi,Qa,Hn,ag,xj=(ag=class extends Xx{constructor(t){super();bt(this,Qa);bt(this,Xa);bt(this,Fr);bt(this,Oi);this.mutationId=t.mutationId,ht(this,Fr,t.mutationCache),ht(this,Xa,[]),this.state=t.state||Zx(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){me(this,Xa).includes(t)||(me(this,Xa).push(t),this.clearGcTimeout(),me(this,Fr).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){ht(this,Xa,me(this,Xa).filter(r=>r!==t)),this.scheduleGc(),me(this,Fr).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){me(this,Xa).length||(this.state.status==="pending"?this.scheduleGc():me(this,Fr).remove(this))}continue(){var t,r;return(r=(t=me(this,Oi))==null?void 0:t.continue())!=null?r:this.execute(this.state.variables)}execute(t){return he(this,null,function*(){var i,o,l,c,h,f,p,v,u,C,w,x,j,_,T,U,R,V,$,S,A;const r=()=>{Gt(this,Qa,Hn).call(this,{type:"continue"})};ht(this,Oi,Kx({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(L,N)=>{Gt(this,Qa,Hn).call(this,{type:"failed",failureCount:L,error:N})},onPause:()=>{Gt(this,Qa,Hn).call(this,{type:"pause"})},onContinue:r,retry:(i=this.options.retry)!=null?i:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>me(this,Fr).canRun(this)}));const a=this.state.status==="pending",n=!me(this,Oi).canStart();try{if(a)r();else{Gt(this,Qa,Hn).call(this,{type:"pending",variables:t,isPaused:n}),yield(l=(o=me(this,Fr).config).onMutate)==null?void 0:l.call(o,t,this);const N=yield(h=(c=this.options).onMutate)==null?void 0:h.call(c,t);N!==this.state.context&&Gt(this,Qa,Hn).call(this,{type:"pending",context:N,variables:t,isPaused:n})}const L=yield me(this,Oi).start();return yield(p=(f=me(this,Fr).config).onSuccess)==null?void 0:p.call(f,L,t,this.state.context,this),yield(u=(v=this.options).onSuccess)==null?void 0:u.call(v,L,t,this.state.context),yield(w=(C=me(this,Fr).config).onSettled)==null?void 0:w.call(C,L,null,this.state.variables,this.state.context,this),yield(j=(x=this.options).onSettled)==null?void 0:j.call(x,L,null,t,this.state.context),Gt(this,Qa,Hn).call(this,{type:"success",data:L}),L}catch(L){try{throw yield(T=(_=me(this,Fr).config).onError)==null?void 0:T.call(_,L,t,this.state.context,this),yield(R=(U=this.options).onError)==null?void 0:R.call(U,L,t,this.state.context),yield($=(V=me(this,Fr).config).onSettled)==null?void 0:$.call(V,void 0,L,this.state.variables,this.state.context,this),yield(A=(S=this.options).onSettled)==null?void 0:A.call(S,void 0,L,t,this.state.context),L}finally{Gt(this,Qa,Hn).call(this,{type:"error",error:L})}}finally{me(this,Fr).runNext(this)}})}},Xa=new WeakMap,Fr=new WeakMap,Oi=new WeakMap,Qa=new WeakSet,Hn=function(t){const r=a=>{switch(t.type){case"failed":return Z(E({},a),{failureCount:t.failureCount,failureReason:t.error});case"pause":return Z(E({},a),{isPaused:!0});case"continue":return Z(E({},a),{isPaused:!1});case"pending":return Z(E({},a),{context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()});case"success":return Z(E({},a),{data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1});case"error":return Z(E({},a),{data:void 0,error:t.error,failureCount:a.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"})}};this.state=r(this.state),or.batch(()=>{me(this,Xa).forEach(a=>{a.onMutationUpdate(t)}),me(this,Fr).notify({mutation:this,type:"updated",action:t})})},ag);function Zx(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var vn,Fa,mc,ng,vj=(ng=class extends ul{constructor(t={}){super();bt(this,vn);bt(this,Fa);bt(this,mc);this.config=t,ht(this,vn,new Set),ht(this,Fa,new Map),ht(this,mc,0)}build(t,r,a){const n=new xj({mutationCache:this,mutationId:++ud(this,mc)._,options:t.defaultMutationOptions(r),state:a});return this.add(n),n}add(t){me(this,vn).add(t);const r=gd(t);if(typeof r=="string"){const a=me(this,Fa).get(r);a?a.push(t):me(this,Fa).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(me(this,vn).delete(t)){const r=gd(t);if(typeof r=="string"){const a=me(this,Fa).get(r);if(a)if(a.length>1){const n=a.indexOf(t);n!==-1&&a.splice(n,1)}else a[0]===t&&me(this,Fa).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=gd(t);if(typeof r=="string"){const a=me(this,Fa).get(r),n=a==null?void 0:a.find(i=>i.state.status==="pending");return!n||n===t}else return!0}runNext(t){var a,n;const r=gd(t);if(typeof r=="string"){const i=(a=me(this,Fa).get(r))==null?void 0:a.find(o=>o!==t&&o.state.isPaused);return(n=i==null?void 0:i.continue())!=null?n:Promise.resolve()}else return Promise.resolve()}clear(){or.batch(()=>{me(this,vn).forEach(t=>{this.notify({type:"removed",mutation:t})}),me(this,vn).clear(),me(this,Fa).clear()})}getAll(){return Array.from(me(this,vn))}find(t){const r=E({exact:!0},t);return this.getAll().find(a=>sp(r,a))}findAll(t={}){return this.getAll().filter(r=>sp(t,r))}notify(t){or.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return or.batch(()=>Promise.all(t.map(r=>r.continue().catch(Ur))))}},vn=new WeakMap,Fa=new WeakMap,mc=new WeakMap,ng);function gd(s){var t;return(t=s.options.scope)==null?void 0:t.id}function np(s){return{onFetch:(t,r)=>{var f,p,v,u,C;const a=t.options,n=(v=(p=(f=t.fetchOptions)==null?void 0:f.meta)==null?void 0:p.fetchMore)==null?void 0:v.direction,i=((u=t.state.data)==null?void 0:u.pages)||[],o=((C=t.state.data)==null?void 0:C.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const h=()=>he(this,null,function*(){var T;let w=!1;const x=U=>{Object.defineProperty(U,"signal",{enumerable:!0,get:()=>(t.signal.aborted?w=!0:t.signal.addEventListener("abort",()=>{w=!0}),t.signal)})},j=Vx(t.options,t.fetchOptions),_=(U,R,V)=>he(this,null,function*(){if(w)return Promise.reject();if(R==null&&U.pages.length)return Promise.resolve(U);const S=(()=>{const k={client:t.client,queryKey:t.queryKey,pageParam:R,direction:V?"backward":"forward",meta:t.options.meta};return x(k),k})(),A=yield j(S),{maxPages:L}=t.options,N=V?lj:oj;return{pages:N(U.pages,A,L),pageParams:N(U.pageParams,R,L)}});if(n&&i.length){const U=n==="backward",R=U?yj:ip,V={pages:i,pageParams:o},$=R(a,V);l=yield _(V,$,U)}else{const U=s!=null?s:i.length;do{const R=c===0?(T=o[0])!=null?T:a.initialPageParam:ip(a,l);if(c>0&&R==null)break;l=yield _(l,R),c++}while(c<U)}return l});t.options.persister?t.fetchFn=()=>{var w,x;return(x=(w=t.options).persister)==null?void 0:x.call(w,h,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=h}}}function ip(s,{pages:t,pageParams:r}){const a=t.length-1;return t.length>0?s.getNextPageParam(t[a],t,r[a],r):void 0}function yj(s,{pages:t,pageParams:r}){var a;return t.length>0?(a=s.getPreviousPageParam)==null?void 0:a.call(s,t[0],t,r[0],r):void 0}var $s,Jn,Kn,Ho,Vo,Xn,Yo,Go,ig,bj=(ig=class{constructor(s={}){bt(this,$s);bt(this,Jn);bt(this,Kn);bt(this,Ho);bt(this,Vo);bt(this,Xn);bt(this,Yo);bt(this,Go);ht(this,$s,s.queryCache||new gj),ht(this,Jn,s.mutationCache||new vj),ht(this,Kn,s.defaultOptions||{}),ht(this,Ho,new Map),ht(this,Vo,new Map),ht(this,Xn,0)}mount(){ud(this,Xn)._++,me(this,Xn)===1&&(ht(this,Yo,Em.subscribe(s=>he(this,null,function*(){s&&(yield this.resumePausedMutations(),me(this,$s).onFocus())}))),ht(this,Go,Fd.subscribe(s=>he(this,null,function*(){s&&(yield this.resumePausedMutations(),me(this,$s).onOnline())}))))}unmount(){var s,t;ud(this,Xn)._--,me(this,Xn)===0&&((s=me(this,Yo))==null||s.call(this),ht(this,Yo,void 0),(t=me(this,Go))==null||t.call(this),ht(this,Go,void 0))}isFetching(s){return me(this,$s).findAll(Z(E({},s),{fetchStatus:"fetching"})).length}isMutating(s){return me(this,Jn).findAll(Z(E({},s),{status:"pending"})).length}getQueryData(s){var r;const t=this.defaultQueryOptions({queryKey:s});return(r=me(this,$s).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(s){const t=this.defaultQueryOptions(s),r=me(this,$s).build(this,t),a=r.state.data;return a===void 0?this.fetchQuery(s):(s.revalidateIfStale&&r.isStaleByTime(ii(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(a))}getQueriesData(s){return me(this,$s).findAll(s).map(({queryKey:t,state:r})=>{const a=r.data;return[t,a]})}setQueryData(s,t,r){const a=this.defaultQueryOptions({queryKey:s}),n=me(this,$s).get(a.queryHash),i=n==null?void 0:n.state.data,o=nj(t,i);if(o!==void 0)return me(this,$s).build(this,a).setData(o,Z(E({},r),{manual:!0}))}setQueriesData(s,t,r){return or.batch(()=>me(this,$s).findAll(s).map(({queryKey:a})=>[a,this.setQueryData(a,t,r)]))}getQueryState(s){var r;const t=this.defaultQueryOptions({queryKey:s});return(r=me(this,$s).get(t.queryHash))==null?void 0:r.state}removeQueries(s){const t=me(this,$s);or.batch(()=>{t.findAll(s).forEach(r=>{t.remove(r)})})}resetQueries(s,t){const r=me(this,$s);return or.batch(()=>(r.findAll(s).forEach(a=>{a.reset()}),this.refetchQueries(E({type:"active"},s),t)))}cancelQueries(s,t={}){const r=E({revert:!0},t),a=or.batch(()=>me(this,$s).findAll(s).map(n=>n.cancel(r)));return Promise.all(a).then(Ur).catch(Ur)}invalidateQueries(s,t={}){return or.batch(()=>{var r,a;return me(this,$s).findAll(s).forEach(n=>{n.invalidate()}),(s==null?void 0:s.refetchType)==="none"?Promise.resolve():this.refetchQueries(Z(E({},s),{type:(a=(r=s==null?void 0:s.refetchType)!=null?r:s==null?void 0:s.type)!=null?a:"active"}),t)})}refetchQueries(s,t={}){var n;const r=Z(E({},t),{cancelRefetch:(n=t.cancelRefetch)!=null?n:!0}),a=or.batch(()=>me(this,$s).findAll(s).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let o=i.fetch(void 0,r);return r.throwOnError||(o=o.catch(Ur)),i.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(a).then(Ur)}fetchQuery(s){const t=this.defaultQueryOptions(s);t.retry===void 0&&(t.retry=!1);const r=me(this,$s).build(this,t);return r.isStaleByTime(ii(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(s){return this.fetchQuery(s).then(Ur).catch(Ur)}fetchInfiniteQuery(s){return s.behavior=np(s.pages),this.fetchQuery(s)}prefetchInfiniteQuery(s){return this.fetchInfiniteQuery(s).then(Ur).catch(Ur)}ensureInfiniteQueryData(s){return s.behavior=np(s.pages),this.ensureQueryData(s)}resumePausedMutations(){return Fd.isOnline()?me(this,Jn).resumePausedMutations():Promise.resolve()}getQueryCache(){return me(this,$s)}getMutationCache(){return me(this,Jn)}getDefaultOptions(){return me(this,Kn)}setDefaultOptions(s){ht(this,Kn,s)}setQueryDefaults(s,t){me(this,Ho).set(Yi(s),{queryKey:s,defaultOptions:t})}getQueryDefaults(s){const t=[...me(this,Ho).values()],r={};return t.forEach(a=>{lc(s,a.queryKey)&&Object.assign(r,a.defaultOptions)}),r}setMutationDefaults(s,t){me(this,Vo).set(Yi(s),{mutationKey:s,defaultOptions:t})}getMutationDefaults(s){const t=[...me(this,Vo).values()],r={};return t.forEach(a=>{lc(s,a.mutationKey)&&Object.assign(r,a.defaultOptions)}),r}defaultQueryOptions(s){if(s._defaulted)return s;const t=Z(E(E(E({},me(this,Kn).queries),this.getQueryDefaults(s.queryKey)),s),{_defaulted:!0});return t.queryHash||(t.queryHash=Dm(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Mm&&(t.enabled=!1),t}defaultMutationOptions(s){return s!=null&&s._defaulted?s:Z(E(E(E({},me(this,Kn).mutations),(s==null?void 0:s.mutationKey)&&this.getMutationDefaults(s.mutationKey)),s),{_defaulted:!0})}clear(){me(this,$s).clear(),me(this,Jn).clear()}},$s=new WeakMap,Jn=new WeakMap,Kn=new WeakMap,Ho=new WeakMap,Vo=new WeakMap,Xn=new WeakMap,Yo=new WeakMap,Go=new WeakMap,ig),Xr,ss,fc,Br,Fi,Jo,Qn,Zn,pc,Ko,Xo,Bi,Ui,ei,Qo,us,Xl,Uh,qh,zh,$h,Wh,Hh,Vh,e0,og,wj=(og=class extends ul{constructor(t,r){super();bt(this,us);bt(this,Xr);bt(this,ss);bt(this,fc);bt(this,Br);bt(this,Fi);bt(this,Jo);bt(this,Qn);bt(this,Zn);bt(this,pc);bt(this,Ko);bt(this,Xo);bt(this,Bi);bt(this,Ui);bt(this,ei);bt(this,Qo,new Set);this.options=r,ht(this,Xr,t),ht(this,Zn,null),ht(this,Qn,Bh()),this.options.experimental_prefetchInRender||me(this,Qn).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(me(this,ss).addObserver(this),op(me(this,ss),this.options)?Gt(this,us,Xl).call(this):this.updateResult(),Gt(this,us,$h).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Yh(me(this,ss),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Yh(me(this,ss),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Gt(this,us,Wh).call(this),Gt(this,us,Hh).call(this),me(this,ss).removeObserver(this)}setOptions(t){const r=this.options,a=me(this,ss);if(this.options=me(this,Xr).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ba(this.options.enabled,me(this,ss))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Gt(this,us,Vh).call(this),me(this,ss).setOptions(this.options),r._defaulted&&!Od(this.options,r)&&me(this,Xr).getQueryCache().notify({type:"observerOptionsUpdated",query:me(this,ss),observer:this});const n=this.hasListeners();n&&lp(me(this,ss),a,this.options,r)&&Gt(this,us,Xl).call(this),this.updateResult(),n&&(me(this,ss)!==a||ba(this.options.enabled,me(this,ss))!==ba(r.enabled,me(this,ss))||ii(this.options.staleTime,me(this,ss))!==ii(r.staleTime,me(this,ss)))&&Gt(this,us,Uh).call(this);const i=Gt(this,us,qh).call(this);n&&(me(this,ss)!==a||ba(this.options.enabled,me(this,ss))!==ba(r.enabled,me(this,ss))||i!==me(this,ei))&&Gt(this,us,zh).call(this,i)}getOptimisticResult(t){const r=me(this,Xr).getQueryCache().build(me(this,Xr),t),a=this.createResult(r,t);return Nj(this,a)&&(ht(this,Br,a),ht(this,Jo,this.options),ht(this,Fi,me(this,ss).state)),a}getCurrentResult(){return me(this,Br)}trackResult(t,r){return new Proxy(t,{get:(a,n)=>(this.trackProp(n),r==null||r(n),Reflect.get(a,n))})}trackProp(t){me(this,Qo).add(t)}getCurrentQuery(){return me(this,ss)}refetch(r={}){var t=Ee(r,[]);return this.fetch(E({},t))}fetchOptimistic(t){const r=me(this,Xr).defaultQueryOptions(t),a=me(this,Xr).getQueryCache().build(me(this,Xr),r);return a.fetch().then(()=>this.createResult(a,r))}fetch(t){var r;return Gt(this,us,Xl).call(this,Z(E({},t),{cancelRefetch:(r=t.cancelRefetch)!=null?r:!0})).then(()=>(this.updateResult(),me(this,Br)))}createResult(t,r){var A;const a=me(this,ss),n=this.options,i=me(this,Br),o=me(this,Fi),l=me(this,Jo),h=t!==a?t.state:me(this,fc),{state:f}=t;let p=E({},f),v=!1,u;if(r._optimisticResults){const L=this.hasListeners(),N=!L&&op(t,r),k=L&&lp(t,a,r,n);(N||k)&&(p=E(E({},p),Qx(f.data,t.options))),r._optimisticResults==="isRestoring"&&(p.fetchStatus="idle")}let{error:C,errorUpdatedAt:w,status:x}=p;u=p.data;let j=!1;if(r.placeholderData!==void 0&&u===void 0&&x==="pending"){let L;i!=null&&i.isPlaceholderData&&r.placeholderData===(l==null?void 0:l.placeholderData)?(L=i.data,j=!0):L=typeof r.placeholderData=="function"?r.placeholderData((A=me(this,Xo))==null?void 0:A.state.data,me(this,Xo)):r.placeholderData,L!==void 0&&(x="success",u=Fh(i==null?void 0:i.data,L,r),v=!0)}if(r.select&&u!==void 0&&!j)if(i&&u===(o==null?void 0:o.data)&&r.select===me(this,pc))u=me(this,Ko);else try{ht(this,pc,r.select),u=r.select(u),u=Fh(i==null?void 0:i.data,u,r),ht(this,Ko,u),ht(this,Zn,null)}catch(L){ht(this,Zn,L)}me(this,Zn)&&(C=me(this,Zn),u=me(this,Ko),w=Date.now(),x="error");const _=p.fetchStatus==="fetching",T=x==="pending",U=x==="error",R=T&&_,V=u!==void 0,S={status:x,fetchStatus:p.fetchStatus,isPending:T,isSuccess:x==="success",isError:U,isInitialLoading:R,isLoading:R,data:u,dataUpdatedAt:p.dataUpdatedAt,error:C,errorUpdatedAt:w,failureCount:p.fetchFailureCount,failureReason:p.fetchFailureReason,errorUpdateCount:p.errorUpdateCount,isFetched:p.dataUpdateCount>0||p.errorUpdateCount>0,isFetchedAfterMount:p.dataUpdateCount>h.dataUpdateCount||p.errorUpdateCount>h.errorUpdateCount,isFetching:_,isRefetching:_&&!T,isLoadingError:U&&!V,isPaused:p.fetchStatus==="paused",isPlaceholderData:v,isRefetchError:U&&V,isStale:Rm(t,r),refetch:this.refetch,promise:me(this,Qn),isEnabled:ba(r.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const L=D=>{S.status==="error"?D.reject(S.error):S.data!==void 0&&D.resolve(S.data)},N=()=>{const D=ht(this,Qn,S.promise=Bh());L(D)},k=me(this,Qn);switch(k.status){case"pending":t.queryHash===a.queryHash&&L(k);break;case"fulfilled":(S.status==="error"||S.data!==k.value)&&N();break;case"rejected":(S.status!=="error"||S.error!==k.reason)&&N();break}}return S}updateResult(){const t=me(this,Br),r=this.createResult(me(this,ss),this.options);if(ht(this,Fi,me(this,ss).state),ht(this,Jo,this.options),me(this,Fi).data!==void 0&&ht(this,Xo,me(this,ss)),Od(r,t))return;ht(this,Br,r);const a=()=>{if(!t)return!0;const{notifyOnChangeProps:n}=this.options,i=typeof n=="function"?n():n;if(i==="all"||!i&&!me(this,Qo).size)return!0;const o=new Set(i!=null?i:me(this,Qo));return this.options.throwOnError&&o.add("error"),Object.keys(me(this,Br)).some(l=>{const c=l;return me(this,Br)[c]!==t[c]&&o.has(c)})};Gt(this,us,e0).call(this,{listeners:a()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Gt(this,us,$h).call(this)}},Xr=new WeakMap,ss=new WeakMap,fc=new WeakMap,Br=new WeakMap,Fi=new WeakMap,Jo=new WeakMap,Qn=new WeakMap,Zn=new WeakMap,pc=new WeakMap,Ko=new WeakMap,Xo=new WeakMap,Bi=new WeakMap,Ui=new WeakMap,ei=new WeakMap,Qo=new WeakMap,us=new WeakSet,Xl=function(t){Gt(this,us,Vh).call(this);let r=me(this,ss).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(Ur)),r},Uh=function(){Gt(this,us,Wh).call(this);const t=ii(this.options.staleTime,me(this,ss));if(Vi||me(this,Br).isStale||!Rh(t))return;const a=Wx(me(this,Br).dataUpdatedAt,t)+1;ht(this,Bi,setTimeout(()=>{me(this,Br).isStale||this.updateResult()},a))},qh=function(){var t;return(t=typeof this.options.refetchInterval=="function"?this.options.refetchInterval(me(this,ss)):this.options.refetchInterval)!=null?t:!1},zh=function(t){Gt(this,us,Hh).call(this),ht(this,ei,t),!(Vi||ba(this.options.enabled,me(this,ss))===!1||!Rh(me(this,ei))||me(this,ei)===0)&&ht(this,Ui,setInterval(()=>{(this.options.refetchIntervalInBackground||Em.isFocused())&&Gt(this,us,Xl).call(this)},me(this,ei)))},$h=function(){Gt(this,us,Uh).call(this),Gt(this,us,zh).call(this,Gt(this,us,qh).call(this))},Wh=function(){me(this,Bi)&&(clearTimeout(me(this,Bi)),ht(this,Bi,void 0))},Hh=function(){me(this,Ui)&&(clearInterval(me(this,Ui)),ht(this,Ui,void 0))},Vh=function(){const t=me(this,Xr).getQueryCache().build(me(this,Xr),this.options);if(t===me(this,ss))return;const r=me(this,ss);ht(this,ss,t),ht(this,fc,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},e0=function(t){or.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(me(this,Br))}),me(this,Xr).getQueryCache().notify({query:me(this,ss),type:"observerResultsUpdated"})})},og);function jj(s,t){return ba(t.enabled,s)!==!1&&s.state.data===void 0&&!(s.state.status==="error"&&t.retryOnMount===!1)}function op(s,t){return jj(s,t)||s.state.data!==void 0&&Yh(s,t,t.refetchOnMount)}function Yh(s,t,r){if(ba(t.enabled,s)!==!1&&ii(t.staleTime,s)!=="static"){const a=typeof r=="function"?r(s):r;return a==="always"||a!==!1&&Rm(s,t)}return!1}function lp(s,t,r,a){return(s!==t||ba(a.enabled,s)===!1)&&(!r.suspense||s.state.status!=="error")&&Rm(s,r)}function Rm(s,t){return ba(t.enabled,s)!==!1&&s.isStaleByTime(ii(t.staleTime,s))}function Nj(s,t){return!Od(s.getCurrentResult(),t)}var ti,si,Qr,yn,wn,Pd,Gh,lg,Sj=(lg=class extends ul{constructor(r,a){super();bt(this,wn);bt(this,ti);bt(this,si);bt(this,Qr);bt(this,yn);ht(this,ti,r),this.setOptions(a),this.bindMethods(),Gt(this,wn,Pd).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var n;const a=this.options;this.options=me(this,ti).defaultMutationOptions(r),Od(this.options,a)||me(this,ti).getMutationCache().notify({type:"observerOptionsUpdated",mutation:me(this,Qr),observer:this}),a!=null&&a.mutationKey&&this.options.mutationKey&&Yi(a.mutationKey)!==Yi(this.options.mutationKey)?this.reset():((n=me(this,Qr))==null?void 0:n.state.status)==="pending"&&me(this,Qr).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=me(this,Qr))==null||r.removeObserver(this)}onMutationUpdate(r){Gt(this,wn,Pd).call(this),Gt(this,wn,Gh).call(this,r)}getCurrentResult(){return me(this,si)}reset(){var r;(r=me(this,Qr))==null||r.removeObserver(this),ht(this,Qr,void 0),Gt(this,wn,Pd).call(this),Gt(this,wn,Gh).call(this)}mutate(r,a){var n;return ht(this,yn,a),(n=me(this,Qr))==null||n.removeObserver(this),ht(this,Qr,me(this,ti).getMutationCache().build(me(this,ti),this.options)),me(this,Qr).addObserver(this),me(this,Qr).execute(r)}},ti=new WeakMap,si=new WeakMap,Qr=new WeakMap,yn=new WeakMap,wn=new WeakSet,Pd=function(){var a,n;const r=(n=(a=me(this,Qr))==null?void 0:a.state)!=null?n:Zx();ht(this,si,Z(E({},r),{isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset}))},Gh=function(r){or.batch(()=>{var a,n,i,o,l,c,h,f;if(me(this,yn)&&this.hasListeners()){const p=me(this,si).variables,v=me(this,si).context;(r==null?void 0:r.type)==="success"?((n=(a=me(this,yn)).onSuccess)==null||n.call(a,r.data,p,v),(o=(i=me(this,yn)).onSettled)==null||o.call(i,r.data,null,p,v)):(r==null?void 0:r.type)==="error"&&((c=(l=me(this,yn)).onError)==null||c.call(l,r.error,p,v),(f=(h=me(this,yn)).onSettled)==null||f.call(h,void 0,r.error,p,v))}this.listeners.forEach(p=>{p(me(this,si))})})},lg),t0=b.createContext(void 0),bc=s=>{const t=b.useContext(t0);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},kj=({client:s,children:t})=>(b.useEffect(()=>(s.mount(),()=>{s.unmount()}),[s]),e.jsx(t0.Provider,{value:s,children:t})),s0=b.createContext(!1),Cj=()=>b.useContext(s0);s0.Provider;function Aj(){let s=!1;return{clearReset:()=>{s=!1},reset:()=>{s=!0},isReset:()=>s}}var Pj=b.createContext(Aj()),_j=()=>b.useContext(Pj),Ij=(s,t)=>{(s.suspense||s.throwOnError||s.experimental_prefetchInRender)&&(t.isReset()||(s.retryOnMount=!1))},Lj=s=>{b.useEffect(()=>{s.clearReset()},[s])},Tj=({result:s,errorResetBoundary:t,throwOnError:r,query:a,suspense:n})=>s.isError&&!t.isReset()&&!s.isFetching&&a&&(n&&s.data===void 0||Yx(r,[s.error,a])),Dj=s=>{if(s.suspense){const t=a=>a==="static"?a:Math.max(a!=null?a:1e3,1e3),r=s.staleTime;s.staleTime=typeof r=="function"?(...a)=>t(r(...a)):t(r),typeof s.gcTime=="number"&&(s.gcTime=Math.max(s.gcTime,1e3))}},Mj=(s,t)=>s.isLoading&&s.isFetching&&!t,Ej=(s,t)=>(s==null?void 0:s.suspense)&&t.isPending,cp=(s,t,r)=>t.fetchOptimistic(s).catch(()=>{r.clearReset()});function Rj(s,t,r){var p,v,u,C,w;const a=Cj(),n=_j(),i=bc(),o=i.defaultQueryOptions(s);(v=(p=i.getDefaultOptions().queries)==null?void 0:p._experimental_beforeQuery)==null||v.call(p,o),o._optimisticResults=a?"isRestoring":"optimistic",Dj(o),Ij(o,n),Lj(n);const l=!i.getQueryCache().get(o.queryHash),[c]=b.useState(()=>new t(i,o)),h=c.getOptimisticResult(o),f=!a&&s.subscribed!==!1;if(b.useSyncExternalStore(b.useCallback(x=>{const j=f?c.subscribe(or.batchCalls(x)):Ur;return c.updateResult(),j},[c,f]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),b.useEffect(()=>{c.setOptions(o)},[o,c]),Ej(o,h))throw cp(o,c,n);if(Tj({result:h,errorResetBoundary:n,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw h.error;if((C=(u=i.getDefaultOptions().queries)==null?void 0:u._experimental_afterQuery)==null||C.call(u,o,h),o.experimental_prefetchInRender&&!Vi&&Mj(h,a)){const x=l?cp(o,c,n):(w=i.getQueryCache().get(o.queryHash))==null?void 0:w.promise;x==null||x.catch(Ur).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?h:c.trackResult(h)}function rl(s,t){return Rj(s,wj)}function Ba(s,t){const r=bc(),[a]=b.useState(()=>new Sj(r,s));b.useEffect(()=>{a.setOptions(s)},[a,s]);const n=b.useSyncExternalStore(b.useCallback(o=>a.subscribe(or.batchCalls(o)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),i=b.useCallback((o,l)=>{a.mutate(o,l).catch(Ur)},[a]);if(n.error&&Yx(a.options.throwOnError,[n.error]))throw n.error;return Z(E({},n),{mutate:i,mutateAsync:n.mutate})}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bd(){return Bd=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Bd.apply(this,arguments)}var ai;(function(s){s.Pop="POP",s.Push="PUSH",s.Replace="REPLACE"})(ai||(ai={}));const dp="popstate";function Oj(s){s===void 0&&(s={});function t(n,i){let{pathname:o="/",search:l="",hash:c=""}=wc(n.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Jh("",{pathname:o,search:l,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){let o=n.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let c=n.location.href,h=c.indexOf("#");l=h===-1?c:c.slice(0,h)}return l+"#"+(typeof i=="string"?i:r0(i))}function a(n,i){Om(n.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return Bj(t,r,a,s)}function ea(s,t){if(s===!1||s===null||typeof s=="undefined")throw new Error(t)}function Om(s,t){if(!s)try{throw new Error(t)}catch(r){}}function Fj(){return Math.random().toString(36).substr(2,8)}function up(s,t){return{usr:s.state,key:s.key,idx:t}}function Jh(s,t,r,a){return r===void 0&&(r=null),Bd({pathname:typeof s=="string"?s:s.pathname,search:"",hash:""},typeof t=="string"?wc(t):t,{state:r,key:t&&t.key||a||Fj()})}function r0(s){let{pathname:t="/",search:r="",hash:a=""}=s;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),a&&a!=="#"&&(t+=a.charAt(0)==="#"?a:"#"+a),t}function wc(s){let t={};if(s){let r=s.indexOf("#");r>=0&&(t.hash=s.substr(r),s=s.substr(0,r));let a=s.indexOf("?");a>=0&&(t.search=s.substr(a),s=s.substr(0,a)),s&&(t.pathname=s)}return t}function Bj(s,t,r,a){a===void 0&&(a={});let{window:n=document.defaultView,v5Compat:i=!1}=a,o=n.history,l=ai.Pop,c=null,h=f();h==null&&(h=0,o.replaceState(Bd({},o.state,{idx:h}),""));function f(){return(o.state||{idx:null}).idx}function p(){l=ai.Pop;let x=f(),j=x==null?null:x-h;h=x,c&&c({action:l,location:w.location,delta:j})}function v(x,j){l=ai.Push;let _=Jh(w.location,x,j);r&&r(_,x),h=f()+1;let T=up(_,h),U=w.createHref(_);try{o.pushState(T,"",U)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;n.location.assign(U)}i&&c&&c({action:l,location:w.location,delta:1})}function u(x,j){l=ai.Replace;let _=Jh(w.location,x,j);r&&r(_,x),h=f();let T=up(_,h),U=w.createHref(_);o.replaceState(T,"",U),i&&c&&c({action:l,location:w.location,delta:0})}function C(x){let j=n.location.origin!=="null"?n.location.origin:n.location.href,_=typeof x=="string"?x:r0(x);return _=_.replace(/ $/,"%20"),ea(j,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,j)}let w={get action(){return l},get location(){return s(n,o)},listen(x){if(c)throw new Error("A history only accepts one active listener");return n.addEventListener(dp,p),c=x,()=>{n.removeEventListener(dp,p),c=null}},createHref(x){return t(n,x)},createURL:C,encodeLocation(x){let j=C(x);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:v,replace:u,go(x){return o.go(x)}};return w}var hp;(function(s){s.data="data",s.deferred="deferred",s.redirect="redirect",s.error="error"})(hp||(hp={}));function Uj(s,t,r){return r===void 0&&(r="/"),qj(s,t,r)}function qj(s,t,r,a){let n=typeof t=="string"?wc(t):t,i=i0(n.pathname||"/",r);if(i==null)return null;let o=a0(s);zj(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let h=eN(i);l=Xj(o[c],h)}return l}function a0(s,t,r,a){t===void 0&&(t=[]),r===void 0&&(r=[]),a===void 0&&(a="");let n=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(ea(c.relativePath.startsWith(a),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(a.length));let h=Eo([a,c.relativePath]),f=r.concat(c);i.children&&i.children.length>0&&(ea(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),a0(i.children,t,f,h)),!(i.path==null&&!i.index)&&t.push({path:h,score:Jj(h,i.index),routesMeta:f})};return s.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))n(i,o);else for(let c of n0(i.path))n(i,o,c)}),t}function n0(s){let t=s.split("/");if(t.length===0)return[];let[r,...a]=t,n=r.endsWith("?"),i=r.replace(/\?$/,"");if(a.length===0)return n?[i,""]:[i];let o=n0(a.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),n&&l.push(...o),l.map(c=>s.startsWith("/")&&c===""?"/":c)}function zj(s){s.sort((t,r)=>t.score!==r.score?r.score-t.score:Kj(t.routesMeta.map(a=>a.childrenIndex),r.routesMeta.map(a=>a.childrenIndex)))}const $j=/^:[\w-]+$/,Wj=3,Hj=2,Vj=1,Yj=10,Gj=-2,mp=s=>s==="*";function Jj(s,t){let r=s.split("/"),a=r.length;return r.some(mp)&&(a+=Gj),t&&(a+=Hj),r.filter(n=>!mp(n)).reduce((n,i)=>n+($j.test(i)?Wj:i===""?Vj:Yj),a)}function Kj(s,t){return s.length===t.length&&s.slice(0,-1).every((a,n)=>a===t[n])?s[s.length-1]-t[t.length-1]:0}function Xj(s,t,r){let{routesMeta:a}=s,n={},i="/",o=[];for(let l=0;l<a.length;++l){let c=a[l],h=l===a.length-1,f=i==="/"?t:t.slice(i.length)||"/",p=Qj({path:c.relativePath,caseSensitive:c.caseSensitive,end:h},f),v=c.route;if(!p)return null;Object.assign(n,p.params),o.push({params:n,pathname:Eo([i,p.pathname]),pathnameBase:tN(Eo([i,p.pathnameBase])),route:v}),p.pathnameBase!=="/"&&(i=Eo([i,p.pathnameBase]))}return o}function Qj(s,t){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[r,a]=Zj(s.path,s.caseSensitive,s.end),n=t.match(r);if(!n)return null;let i=n[0],o=i.replace(/(.)\/+$/,"$1"),l=n.slice(1);return{params:a.reduce((h,f,p)=>{let{paramName:v,isOptional:u}=f;if(v==="*"){let w=l[p]||"";o=i.slice(0,i.length-w.length).replace(/(.)\/+$/,"$1")}const C=l[p];return u&&!C?h[v]=void 0:h[v]=(C||"").replace(/%2F/g,"/"),h},{}),pathname:i,pathnameBase:o,pattern:s}}function Zj(s,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Om(s==="*"||!s.endsWith("*")||s.endsWith("/*"),'Route path "'+s+'" will be treated as if it were '+('"'+s.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+s.replace(/\*$/,"/*")+'".'));let a=[],n="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(a.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(a.push({paramName:"*"}),n+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?n+="\\/*$":s!==""&&s!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,t?void 0:"i"),a]}function eN(s){try{return s.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Om(!1,'The URL path "'+s+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),s}}function i0(s,t){if(t==="/")return s;if(!s.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,a=s.charAt(r);return a&&a!=="/"?null:s.slice(r)||"/"}const Eo=s=>s.join("/").replace(/\/\/+/g,"/"),tN=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/");function sN(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}const o0=["post","put","patch","delete"];new Set(o0);const rN=["get",...o0];new Set(rN);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ud(){return Ud=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Ud.apply(this,arguments)}const aN=b.createContext(null),nN=b.createContext(null),l0=b.createContext(null),su=b.createContext(null),ru=b.createContext({outlet:null,matches:[],isDataRoute:!1}),c0=b.createContext(null);function Fm(){return b.useContext(su)!=null}function d0(){return Fm()||ea(!1),b.useContext(su).location}function iN(s,t){return oN(s,t)}function oN(s,t,r,a){Fm()||ea(!1);let{navigator:n}=b.useContext(l0),{matches:i}=b.useContext(ru),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let h=d0(),f;if(t){var p;let x=typeof t=="string"?wc(t):t;c==="/"||(p=x.pathname)!=null&&p.startsWith(c)||ea(!1),f=x}else f=h;let v=f.pathname||"/",u=v;if(c!=="/"){let x=c.replace(/^\//,"").split("/");u="/"+v.replace(/^\//,"").split("/").slice(x.length).join("/")}let C=Uj(s,{pathname:u}),w=hN(C&&C.map(x=>Object.assign({},x,{params:Object.assign({},l,x.params),pathname:Eo([c,n.encodeLocation?n.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?c:Eo([c,n.encodeLocation?n.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),i,r,a);return t&&w?b.createElement(su.Provider,{value:{location:Ud({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:ai.Pop}},w):w}function lN(){let s=gN(),t=sN(s)?s.status+" "+s.statusText:s instanceof Error?s.message:JSON.stringify(s),r=s instanceof Error?s.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},t),r?b.createElement("pre",{style:n},r):null,null)}const cN=b.createElement(lN,null);class dN extends b.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){}render(){return this.state.error!==void 0?b.createElement(ru.Provider,{value:this.props.routeContext},b.createElement(c0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function uN(s){let{routeContext:t,match:r,children:a}=s,n=b.useContext(aN);return n&&n.static&&n.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=r.route.id),b.createElement(ru.Provider,{value:t},a)}function hN(s,t,r,a){var n;if(t===void 0&&(t=[]),r===void 0&&(r=null),a===void 0&&(a=null),s==null){var i;if(!r)return null;if(r.errors)s=r.matches;else if((i=a)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)s=r.matches;else return null}let o=s,l=(n=r)==null?void 0:n.errors;if(l!=null){let f=o.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);f>=0||ea(!1),o=o.slice(0,Math.min(o.length,f+1))}let c=!1,h=-1;if(r&&a&&a.v7_partialHydration)for(let f=0;f<o.length;f++){let p=o[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(h=f),p.route.id){let{loaderData:v,errors:u}=r,C=p.route.loader&&v[p.route.id]===void 0&&(!u||u[p.route.id]===void 0);if(p.route.lazy||C){c=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}return o.reduceRight((f,p,v)=>{let u,C=!1,w=null,x=null;r&&(u=l&&p.route.id?l[p.route.id]:void 0,w=p.route.errorElement||cN,c&&(h<0&&v===0?(xN("route-fallback"),C=!0,x=null):h===v&&(C=!0,x=p.route.hydrateFallbackElement||null)));let j=t.concat(o.slice(0,v+1)),_=()=>{let T;return u?T=w:C?T=x:p.route.Component?T=b.createElement(p.route.Component,null):p.route.element?T=p.route.element:T=f,b.createElement(uN,{match:p,routeContext:{outlet:f,matches:j,isDataRoute:r!=null},children:T})};return r&&(p.route.ErrorBoundary||p.route.errorElement||v===0)?b.createElement(dN,{location:r.location,revalidation:r.revalidation,component:w,error:u,children:_(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):_()},null)}var u0=function(s){return s.UseBlocker="useBlocker",s.UseLoaderData="useLoaderData",s.UseActionData="useActionData",s.UseRouteError="useRouteError",s.UseNavigation="useNavigation",s.UseRouteLoaderData="useRouteLoaderData",s.UseMatches="useMatches",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s.UseRouteId="useRouteId",s}(u0||{});function mN(s){let t=b.useContext(nN);return t||ea(!1),t}function fN(s){let t=b.useContext(ru);return t||ea(!1),t}function pN(s){let t=fN(),r=t.matches[t.matches.length-1];return r.route.id||ea(!1),r.route.id}function gN(){var s;let t=b.useContext(c0),r=mN(u0.UseRouteError),a=pN();return t!==void 0?t:(s=r.errors)==null?void 0:s[a]}const fp={};function xN(s,t,r){fp[s]||(fp[s]=!0)}function vN(s,t){s==null||s.v7_startTransition,s==null||s.v7_relativeSplatPath}function Kh(s){ea(!1)}function yN(s){let{basename:t="/",children:r=null,location:a,navigationType:n=ai.Pop,navigator:i,static:o=!1,future:l}=s;Fm()&&ea(!1);let c=t.replace(/^\/*/,"/"),h=b.useMemo(()=>({basename:c,navigator:i,static:o,future:Ud({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof a=="string"&&(a=wc(a));let{pathname:f="/",search:p="",hash:v="",state:u=null,key:C="default"}=a,w=b.useMemo(()=>{let x=i0(f,c);return x==null?null:{location:{pathname:x,search:p,hash:v,state:u,key:C},navigationType:n}},[c,f,p,v,u,C,n]);return w==null?null:b.createElement(l0.Provider,{value:h},b.createElement(su.Provider,{children:r,value:w}))}function bN(s){let{children:t,location:r}=s;return iN(Xh(t),r)}new Promise(()=>{});function Xh(s,t){t===void 0&&(t=[]);let r=[];return b.Children.forEach(s,(a,n)=>{if(!b.isValidElement(a))return;let i=[...t,n];if(a.type===b.Fragment){r.push.apply(r,Xh(a.props.children,i));return}a.type!==Kh&&ea(!1),!a.props.index||!a.props.children||ea(!1);let o={id:a.props.id||i.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(o.children=Xh(a.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const wN="6";try{window.__reactRouterVersion=wN}catch(s){}const jN="startTransition",pp=Zv[jN];function NN(s){let{basename:t,children:r,future:a,window:n}=s,i=b.useRef();i.current==null&&(i.current=Oj({window:n,v5Compat:!0}));let o=i.current,[l,c]=b.useState({action:o.action,location:o.location}),{v7_startTransition:h}=a||{},f=b.useCallback(p=>{h&&pp?pp(()=>c(p)):c(p)},[c,h]);return b.useLayoutEffect(()=>o.listen(f),[o,f]),b.useEffect(()=>vN(a),[a]),b.createElement(yN,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:a})}var gp;(function(s){s.UseScrollRestoration="useScrollRestoration",s.UseSubmit="useSubmit",s.UseSubmitFetcher="useSubmitFetcher",s.UseFetcher="useFetcher",s.useViewTransitionState="useViewTransitionState"})(gp||(gp={}));var xp;(function(s){s.UseFetcher="useFetcher",s.UseFetchers="useFetchers",s.UseScrollRestoration="useScrollRestoration"})(xp||(xp={}));function Qh(s){return{id:s.id||"",name:s.name||"",client:s.client||"",projectManager:s.projectManager||"",artists:Array.isArray(s.artists)?s.artists:[],brief:s.brief||"",externalLinks:Array.isArray(s.externalLinks)?s.externalLinks:[],startDate:s.startDate||new Date().toISOString().split("T")[0],endDate:s.endDate||new Date().toISOString().split("T")[0],priority:s.priority||"medium",status:s.status||"not_started",statusHistory:Array.isArray(s.statusHistory)?s.statusHistory:[],media:Array.isArray(s.media)?s.media:[],videoUrl:s.videoUrl,isArchived:s.isArchived||!1,createdAt:s.createdAt||new Date().toISOString(),updatedAt:s.updatedAt||new Date().toISOString(),createdBy:s.createdBy,notes:Array.isArray(s.notes)?s.notes:[]}}const Bm=Qd("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),de=b.forwardRef((o,i)=>{var l=o,{className:s,variant:t,size:r,asChild:a=!1}=l,n=Ee(l,["className","variant","size","asChild"]);const c=a?Uv:"button";return e.jsx(c,E({className:Ce(Bm({variant:t,size:r,className:s}),"cyrus-ui"),ref:i},n))});de.displayName="Button";function Zh(s,[t,r]){return Math.min(r,Math.max(t,s))}function Um(s){const t=b.useRef({value:s,previous:s});return b.useMemo(()=>(t.current.value!==s&&(t.current.previous=t.current.value,t.current.value=s),t.current.previous),[s])}var SN=[" ","Enter","ArrowUp","ArrowDown"],kN=[" ","Enter"],Gi="Select",[au,nu,CN]=cg(Gi),[hl,Yk]=Sn(Gi,[CN,Gd]),iu=Gd(),[AN,fi]=hl(Gi),[PN,_N]=hl(Gi),h0=s=>{const{__scopeSelect:t,children:r,open:a,defaultOpen:n,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:h,name:f,autoComplete:p,disabled:v,required:u,form:C}=s,w=iu(t),[x,j]=b.useState(null),[_,T]=b.useState(null),[U,R]=b.useState(!1),V=xg(h),[$,S]=Zo({prop:a,defaultProp:n!=null?n:!1,onChange:i,caller:Gi}),[A,L]=Zo({prop:o,defaultProp:l,onChange:c,caller:Gi}),N=b.useRef(null),k=x?C||!!x.closest("form"):!0,[D,I]=b.useState(new Set),H=Array.from(D).map(se=>se.props.value).join(";");return e.jsx(fg,Z(E({},w),{children:e.jsxs(AN,{required:u,scope:t,trigger:x,onTriggerChange:j,valueNode:_,onValueNodeChange:T,valueNodeHasChildren:U,onValueNodeHasChildrenChange:R,contentId:Jd(),value:A,onValueChange:L,open:$,onOpenChange:S,dir:V,triggerPointerDownPosRef:N,disabled:v,children:[e.jsx(au.Provider,{scope:t,children:e.jsx(PN,{scope:s.__scopeSelect,onNativeOptionAdd:b.useCallback(se=>{I(ce=>new Set(ce).add(se))},[]),onNativeOptionRemove:b.useCallback(se=>{I(ce=>{const le=new Set(ce);return le.delete(se),le})},[]),children:r})}),k?e.jsxs(R0,{"aria-hidden":!0,required:u,tabIndex:-1,name:f,autoComplete:p,value:A,onChange:se=>L(se.target.value),disabled:v,form:C,children:[A===void 0?e.jsx("option",{value:""}):null,Array.from(D)]},H):null]})}))};h0.displayName=Gi;var m0="SelectTrigger",f0=b.forwardRef((s,t)=>{const w=s,{__scopeSelect:r,disabled:a=!1}=w,n=Ee(w,["__scopeSelect","disabled"]),i=iu(r),o=fi(m0,r),l=o.disabled||a,c=Is(t,o.onTriggerChange),h=nu(r),f=b.useRef("touch"),[p,v,u]=F0(x=>{const j=h().filter(U=>!U.disabled),_=j.find(U=>U.value===o.value),T=B0(j,x,_);T!==void 0&&o.onValueChange(T.value)}),C=x=>{l||(o.onOpenChange(!0),u()),x&&(o.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)})};return e.jsx(pg,Z(E({asChild:!0},i),{children:e.jsx(Qt.button,Z(E({type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":O0(o.value)?"":void 0},n),{ref:c,onClick:qt(n.onClick,x=>{x.currentTarget.focus(),f.current!=="mouse"&&C(x)}),onPointerDown:qt(n.onPointerDown,x=>{f.current=x.pointerType;const j=x.target;j.hasPointerCapture(x.pointerId)&&j.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&x.pointerType==="mouse"&&(C(x),x.preventDefault())}),onKeyDown:qt(n.onKeyDown,x=>{const j=p.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&v(x.key),!(j&&x.key===" ")&&SN.includes(x.key)&&(C(),x.preventDefault())})}))}))});f0.displayName=m0;var p0="SelectValue",g0=b.forwardRef((s,t)=>{const v=s,{__scopeSelect:r,className:a,style:n,children:i,placeholder:o=""}=v,l=Ee(v,["__scopeSelect","className","style","children","placeholder"]),c=fi(p0,r),{onValueNodeHasChildrenChange:h}=c,f=i!==void 0,p=Is(t,c.onValueNodeChange);return ca(()=>{h(f)},[h,f]),e.jsx(Qt.span,Z(E({},l),{ref:p,style:{pointerEvents:"none"},children:O0(c.value)?e.jsx(e.Fragment,{children:o}):i}))});g0.displayName=p0;var IN="SelectIcon",x0=b.forwardRef((s,t)=>{const i=s,{__scopeSelect:r,children:a}=i,n=Ee(i,["__scopeSelect","children"]);return e.jsx(Qt.span,Z(E({"aria-hidden":!0},n),{ref:t,children:a||"▼"}))});x0.displayName=IN;var LN="SelectPortal",v0=s=>e.jsx(dg,E({asChild:!0},s));v0.displayName=LN;var Ji="SelectContent",y0=b.forwardRef((s,t)=>{const r=fi(Ji,s.__scopeSelect),[a,n]=b.useState();if(ca(()=>{n(new DocumentFragment)},[]),!r.open){const i=a;return i?Kd.createPortal(e.jsx(b0,{scope:s.__scopeSelect,children:e.jsx(au.Slot,{scope:s.__scopeSelect,children:e.jsx("div",{children:s.children})})}),i):null}return e.jsx(w0,Z(E({},s),{ref:t}))});y0.displayName=Ji;var Ea=10,[b0,pi]=hl(Ji),TN="SelectContentImpl",DN=Wv("SelectContent.RemoveScroll"),w0=b.forwardRef((s,t)=>{const ae=s,{__scopeSelect:r,position:a="item-aligned",onCloseAutoFocus:n,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:h,alignOffset:f,arrowPadding:p,collisionBoundary:v,collisionPadding:u,sticky:C,hideWhenDetached:w,avoidCollisions:x}=ae,j=Ee(ae,["__scopeSelect","position","onCloseAutoFocus","onEscapeKeyDown","onPointerDownOutside","side","sideOffset","align","alignOffset","arrowPadding","collisionBoundary","collisionPadding","sticky","hideWhenDetached","avoidCollisions"]),_=fi(Ji,r),[T,U]=b.useState(null),[R,V]=b.useState(null),$=Is(t,ie=>U(ie)),[S,A]=b.useState(null),[L,N]=b.useState(null),k=nu(r),[D,I]=b.useState(!1),H=b.useRef(!1);b.useEffect(()=>{if(T)return qv(T)},[T]),zv();const se=b.useCallback(ie=>{const[ue,...Ae]=k().map(Le=>Le.ref.current),[re]=Ae.slice(-1),je=document.activeElement;for(const Le of ie)if(Le===je||(Le==null||Le.scrollIntoView({block:"nearest"}),Le===ue&&R&&(R.scrollTop=0),Le===re&&R&&(R.scrollTop=R.scrollHeight),Le==null||Le.focus(),document.activeElement!==je))return},[k,R]),ce=b.useCallback(()=>se([S,T]),[se,S,T]);b.useEffect(()=>{D&&ce()},[D,ce]);const{onOpenChange:le,triggerPointerDownPosRef:ne}=_;b.useEffect(()=>{if(T){let ie={x:0,y:0};const ue=re=>{var je,Le,X,Q;ie={x:Math.abs(Math.round(re.pageX)-((Le=(je=ne.current)==null?void 0:je.x)!=null?Le:0)),y:Math.abs(Math.round(re.pageY)-((Q=(X=ne.current)==null?void 0:X.y)!=null?Q:0))}},Ae=re=>{ie.x<=10&&ie.y<=10?re.preventDefault():T.contains(re.target)||le(!1),document.removeEventListener("pointermove",ue),ne.current=null};return ne.current!==null&&(document.addEventListener("pointermove",ue),document.addEventListener("pointerup",Ae,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ue),document.removeEventListener("pointerup",Ae,{capture:!0})}}},[T,le,ne]),b.useEffect(()=>{const ie=()=>le(!1);return window.addEventListener("blur",ie),window.addEventListener("resize",ie),()=>{window.removeEventListener("blur",ie),window.removeEventListener("resize",ie)}},[le]);const[fe,Se]=F0(ie=>{const ue=k().filter(je=>!je.disabled),Ae=ue.find(je=>je.ref.current===document.activeElement),re=B0(ue,ie,Ae);re&&setTimeout(()=>re.ref.current.focus())}),M=b.useCallback((ie,ue,Ae)=>{const re=!H.current&&!Ae;(_.value!==void 0&&_.value===ue||re)&&(A(ie),re&&(H.current=!0))},[_.value]),B=b.useCallback(()=>T==null?void 0:T.focus(),[T]),J=b.useCallback((ie,ue,Ae)=>{const re=!H.current&&!Ae;(_.value!==void 0&&_.value===ue||re)&&N(ie)},[_.value]),te=a==="popper"?em:j0,G=te===em?{side:l,sideOffset:c,align:h,alignOffset:f,arrowPadding:p,collisionBoundary:v,collisionPadding:u,sticky:C,hideWhenDetached:w,avoidCollisions:x}:{};return e.jsx(b0,{scope:r,content:T,viewport:R,onViewportChange:V,itemRefCallback:M,selectedItem:S,onItemLeave:B,itemTextRefCallback:J,focusSelectedItem:ce,selectedItemText:L,position:a,isPositioned:D,searchRef:fe,children:e.jsx($v,{as:DN,allowPinchZoom:!0,children:e.jsx(Hv,{asChild:!0,trapped:_.open,onMountAutoFocus:ie=>{ie.preventDefault()},onUnmountAutoFocus:qt(n,ie=>{var ue;(ue=_.trigger)==null||ue.focus({preventScroll:!0}),ie.preventDefault()}),children:e.jsx(ug,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:ie=>ie.preventDefault(),onDismiss:()=>_.onOpenChange(!1),children:e.jsx(te,Z(E(E({role:"listbox",id:_.contentId,"data-state":_.open?"open":"closed",dir:_.dir,onContextMenu:ie=>ie.preventDefault()},j),G),{onPlaced:()=>I(!0),ref:$,style:E({display:"flex",flexDirection:"column",outline:"none"},j.style),onKeyDown:qt(j.onKeyDown,ie=>{const ue=ie.ctrlKey||ie.altKey||ie.metaKey;if(ie.key==="Tab"&&ie.preventDefault(),!ue&&ie.key.length===1&&Se(ie.key),["ArrowUp","ArrowDown","Home","End"].includes(ie.key)){let re=k().filter(je=>!je.disabled).map(je=>je.ref.current);if(["ArrowUp","End"].includes(ie.key)&&(re=re.slice().reverse()),["ArrowUp","ArrowDown"].includes(ie.key)){const je=ie.target,Le=re.indexOf(je);re=re.slice(Le+1)}setTimeout(()=>se(re)),ie.preventDefault()}})}))})})})})});w0.displayName=TN;var MN="SelectItemAlignedPosition",j0=b.forwardRef((s,t)=>{const $=s,{__scopeSelect:r,onPlaced:a}=$,n=Ee($,["__scopeSelect","onPlaced"]),i=fi(Ji,r),o=pi(Ji,r),[l,c]=b.useState(null),[h,f]=b.useState(null),p=Is(t,S=>f(S)),v=nu(r),u=b.useRef(!1),C=b.useRef(!0),{viewport:w,selectedItem:x,selectedItemText:j,focusSelectedItem:_}=o,T=b.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&h&&w&&x&&j){const S=i.trigger.getBoundingClientRect(),A=h.getBoundingClientRect(),L=i.valueNode.getBoundingClientRect(),N=j.getBoundingClientRect();if(i.dir!=="rtl"){const je=N.left-A.left,Le=L.left-je,X=S.left-Le,Q=S.width+X,W=Math.max(Q,A.width),ve=window.innerWidth-Ea,Pe=Zh(Le,[Ea,Math.max(Ea,ve-W)]);l.style.minWidth=Q+"px",l.style.left=Pe+"px"}else{const je=A.right-N.right,Le=window.innerWidth-L.right-je,X=window.innerWidth-S.right-Le,Q=S.width+X,W=Math.max(Q,A.width),ve=window.innerWidth-Ea,Pe=Zh(Le,[Ea,Math.max(Ea,ve-W)]);l.style.minWidth=Q+"px",l.style.right=Pe+"px"}const k=v(),D=window.innerHeight-Ea*2,I=w.scrollHeight,H=window.getComputedStyle(h),se=parseInt(H.borderTopWidth,10),ce=parseInt(H.paddingTop,10),le=parseInt(H.borderBottomWidth,10),ne=parseInt(H.paddingBottom,10),fe=se+ce+I+ne+le,Se=Math.min(x.offsetHeight*5,fe),M=window.getComputedStyle(w),B=parseInt(M.paddingTop,10),J=parseInt(M.paddingBottom,10),te=S.top+S.height/2-Ea,G=D-te,ae=x.offsetHeight/2,ie=x.offsetTop+ae,ue=se+ce+ie,Ae=fe-ue;if(ue<=te){const je=k.length>0&&x===k[k.length-1].ref.current;l.style.bottom="0px";const Le=h.clientHeight-w.offsetTop-w.offsetHeight,X=Math.max(G,ae+(je?J:0)+Le+le),Q=ue+X;l.style.height=Q+"px"}else{const je=k.length>0&&x===k[0].ref.current;l.style.top="0px";const X=Math.max(te,se+w.offsetTop+(je?B:0)+ae)+Ae;l.style.height=X+"px",w.scrollTop=ue-te+w.offsetTop}l.style.margin=`${Ea}px 0`,l.style.minHeight=Se+"px",l.style.maxHeight=D+"px",a==null||a(),requestAnimationFrame(()=>u.current=!0)}},[v,i.trigger,i.valueNode,l,h,w,x,j,i.dir,a]);ca(()=>T(),[T]);const[U,R]=b.useState();ca(()=>{h&&R(window.getComputedStyle(h).zIndex)},[h]);const V=b.useCallback(S=>{S&&C.current===!0&&(T(),_==null||_(),C.current=!1)},[T,_]);return e.jsx(RN,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:u,onScrollButtonChange:V,children:e.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:U},children:e.jsx(Qt.div,Z(E({},n),{ref:p,style:E({boxSizing:"border-box",maxHeight:"100%"},n.style)}))})})});j0.displayName=MN;var EN="SelectPopperPosition",em=b.forwardRef((s,t)=>{const l=s,{__scopeSelect:r,align:a="start",collisionPadding:n=Ea}=l,i=Ee(l,["__scopeSelect","align","collisionPadding"]),o=iu(r);return e.jsx(hg,Z(E(E({},o),i),{ref:t,align:a,collisionPadding:n,style:Z(E({boxSizing:"border-box"},i.style),{"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"})}))});em.displayName=EN;var[RN,qm]=hl(Ji,{}),tm="SelectViewport",N0=b.forwardRef((s,t)=>{const h=s,{__scopeSelect:r,nonce:a}=h,n=Ee(h,["__scopeSelect","nonce"]),i=pi(tm,r),o=qm(tm,r),l=Is(t,i.onViewportChange),c=b.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),e.jsx(au.Slot,{scope:r,children:e.jsx(Qt.div,Z(E({"data-radix-select-viewport":"",role:"presentation"},n),{ref:l,style:E({position:"relative",flex:1,overflow:"hidden auto"},n.style),onScroll:qt(n.onScroll,f=>{const p=f.currentTarget,{contentWrapper:v,shouldExpandOnScrollRef:u}=o;if(u!=null&&u.current&&v){const C=Math.abs(c.current-p.scrollTop);if(C>0){const w=window.innerHeight-Ea*2,x=parseFloat(v.style.minHeight),j=parseFloat(v.style.height),_=Math.max(x,j);if(_<w){const T=_+C,U=Math.min(w,T),R=T-U;v.style.height=U+"px",v.style.bottom==="0px"&&(p.scrollTop=R>0?R:0,v.style.justifyContent="flex-end")}}}c.current=p.scrollTop})}))})]})});N0.displayName=tm;var S0="SelectGroup",[ON,FN]=hl(S0),BN=b.forwardRef((s,t)=>{const i=s,{__scopeSelect:r}=i,a=Ee(i,["__scopeSelect"]),n=Jd();return e.jsx(ON,{scope:r,id:n,children:e.jsx(Qt.div,Z(E({role:"group","aria-labelledby":n},a),{ref:t}))})});BN.displayName=S0;var k0="SelectLabel",C0=b.forwardRef((s,t)=>{const i=s,{__scopeSelect:r}=i,a=Ee(i,["__scopeSelect"]),n=FN(k0,r);return e.jsx(Qt.div,Z(E({id:n.id},a),{ref:t}))});C0.displayName=k0;var qd="SelectItem",[UN,A0]=hl(qd),P0=b.forwardRef((s,t)=>{const _=s,{__scopeSelect:r,value:a,disabled:n=!1,textValue:i}=_,o=Ee(_,["__scopeSelect","value","disabled","textValue"]),l=fi(qd,r),c=pi(qd,r),h=l.value===a,[f,p]=b.useState(i!=null?i:""),[v,u]=b.useState(!1),C=Is(t,T=>{var U;return(U=c.itemRefCallback)==null?void 0:U.call(c,T,a,n)}),w=Jd(),x=b.useRef("touch"),j=()=>{n||(l.onValueChange(a),l.onOpenChange(!1))};if(a==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(UN,{scope:r,value:a,disabled:n,textId:w,isSelected:h,onItemTextChange:b.useCallback(T=>{p(U=>{var R;return U||((R=T==null?void 0:T.textContent)!=null?R:"").trim()})},[]),children:e.jsx(au.ItemSlot,{scope:r,value:a,disabled:n,textValue:f,children:e.jsx(Qt.div,Z(E({role:"option","aria-labelledby":w,"data-highlighted":v?"":void 0,"aria-selected":h&&v,"data-state":h?"checked":"unchecked","aria-disabled":n||void 0,"data-disabled":n?"":void 0,tabIndex:n?void 0:-1},o),{ref:C,onFocus:qt(o.onFocus,()=>u(!0)),onBlur:qt(o.onBlur,()=>u(!1)),onClick:qt(o.onClick,()=>{x.current!=="mouse"&&j()}),onPointerUp:qt(o.onPointerUp,()=>{x.current==="mouse"&&j()}),onPointerDown:qt(o.onPointerDown,T=>{x.current=T.pointerType}),onPointerMove:qt(o.onPointerMove,T=>{var U;x.current=T.pointerType,n?(U=c.onItemLeave)==null||U.call(c):x.current==="mouse"&&T.currentTarget.focus({preventScroll:!0})}),onPointerLeave:qt(o.onPointerLeave,T=>{var U;T.currentTarget===document.activeElement&&((U=c.onItemLeave)==null||U.call(c))}),onKeyDown:qt(o.onKeyDown,T=>{var R;((R=c.searchRef)==null?void 0:R.current)!==""&&T.key===" "||(kN.includes(T.key)&&j(),T.key===" "&&T.preventDefault())})}))})})});P0.displayName=qd;var Ql="SelectItemText",_0=b.forwardRef((s,t)=>{const j=s,{__scopeSelect:r,className:a,style:n}=j,i=Ee(j,["__scopeSelect","className","style"]),o=fi(Ql,r),l=pi(Ql,r),c=A0(Ql,r),h=_N(Ql,r),[f,p]=b.useState(null),v=Is(t,_=>p(_),c.onItemTextChange,_=>{var T;return(T=l.itemTextRefCallback)==null?void 0:T.call(l,_,c.value,c.disabled)}),u=f==null?void 0:f.textContent,C=b.useMemo(()=>e.jsx("option",{value:c.value,disabled:c.disabled,children:u},c.value),[c.disabled,c.value,u]),{onNativeOptionAdd:w,onNativeOptionRemove:x}=h;return ca(()=>(w(C),()=>x(C)),[w,x,C]),e.jsxs(e.Fragment,{children:[e.jsx(Qt.span,Z(E({id:c.textId},i),{ref:v})),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Kd.createPortal(i.children,o.valueNode):null]})});_0.displayName=Ql;var I0="SelectItemIndicator",L0=b.forwardRef((s,t)=>{const i=s,{__scopeSelect:r}=i,a=Ee(i,["__scopeSelect"]);return A0(I0,r).isSelected?e.jsx(Qt.span,Z(E({"aria-hidden":!0},a),{ref:t})):null});L0.displayName=I0;var sm="SelectScrollUpButton",T0=b.forwardRef((s,t)=>{const r=pi(sm,s.__scopeSelect),a=qm(sm,s.__scopeSelect),[n,i]=b.useState(!1),o=Is(t,a.onScrollButtonChange);return ca(()=>{if(r.viewport&&r.isPositioned){let l=function(){const h=c.scrollTop>0;i(h)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),n?e.jsx(M0,Z(E({},s),{ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}})):null});T0.displayName=sm;var rm="SelectScrollDownButton",D0=b.forwardRef((s,t)=>{const r=pi(rm,s.__scopeSelect),a=qm(rm,s.__scopeSelect),[n,i]=b.useState(!1),o=Is(t,a.onScrollButtonChange);return ca(()=>{if(r.viewport&&r.isPositioned){let l=function(){const h=c.scrollHeight-c.clientHeight,f=Math.ceil(c.scrollTop)<h;i(f)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),n?e.jsx(M0,Z(E({},s),{ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}})):null});D0.displayName=rm;var M0=b.forwardRef((s,t)=>{const h=s,{__scopeSelect:r,onAutoScroll:a}=h,n=Ee(h,["__scopeSelect","onAutoScroll"]),i=pi("SelectScrollButton",r),o=b.useRef(null),l=nu(r),c=b.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return b.useEffect(()=>()=>c(),[c]),ca(()=>{var p;const f=l().find(v=>v.ref.current===document.activeElement);(p=f==null?void 0:f.ref.current)==null||p.scrollIntoView({block:"nearest"})},[l]),e.jsx(Qt.div,Z(E({"aria-hidden":!0},n),{ref:t,style:E({flexShrink:0},n.style),onPointerDown:qt(n.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(a,50))}),onPointerMove:qt(n.onPointerMove,()=>{var f;(f=i.onItemLeave)==null||f.call(i),o.current===null&&(o.current=window.setInterval(a,50))}),onPointerLeave:qt(n.onPointerLeave,()=>{c()})}))}),qN="SelectSeparator",E0=b.forwardRef((s,t)=>{const n=s,{__scopeSelect:r}=n,a=Ee(n,["__scopeSelect"]);return e.jsx(Qt.div,Z(E({"aria-hidden":!0},a),{ref:t}))});E0.displayName=qN;var am="SelectArrow",zN=b.forwardRef((s,t)=>{const l=s,{__scopeSelect:r}=l,a=Ee(l,["__scopeSelect"]),n=iu(r),i=fi(am,r),o=pi(am,r);return i.open&&o.position==="popper"?e.jsx(gg,Z(E(E({},n),a),{ref:t})):null});zN.displayName=am;var $N="SelectBubbleInput",R0=b.forwardRef((n,a)=>{var i=n,{__scopeSelect:s,value:t}=i,r=Ee(i,["__scopeSelect","value"]);const o=b.useRef(null),l=Is(a,o),c=Um(t);return b.useEffect(()=>{const h=o.current;if(!h)return;const f=window.HTMLSelectElement.prototype,v=Object.getOwnPropertyDescriptor(f,"value").set;if(c!==t&&v){const u=new Event("change",{bubbles:!0});v.call(h,t),h.dispatchEvent(u)}},[c,t]),e.jsx(Qt.select,Z(E({},r),{style:E(E({},Eg),r.style),ref:l,defaultValue:t}))});R0.displayName=$N;function O0(s){return s===""||s===void 0}function F0(s){const t=oa(s),r=b.useRef(""),a=b.useRef(0),n=b.useCallback(o=>{const l=r.current+o;t(l),function c(h){r.current=h,window.clearTimeout(a.current),h!==""&&(a.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),i=b.useCallback(()=>{r.current="",window.clearTimeout(a.current)},[]);return b.useEffect(()=>()=>window.clearTimeout(a.current),[]),[r,n,i]}function B0(s,t,r){const n=t.length>1&&Array.from(t).every(h=>h===t[0])?t[0]:t,i=r?s.indexOf(r):-1;let o=WN(s,Math.max(i,0));n.length===1&&(o=o.filter(h=>h!==r));const c=o.find(h=>h.textValue.toLowerCase().startsWith(n.toLowerCase()));return c!==r?c:void 0}function WN(s,t){return s.map((r,a)=>s[(t+a)%s.length])}var HN=h0,U0=f0,VN=g0,YN=x0,GN=v0,q0=y0,JN=N0,z0=C0,$0=P0,KN=_0,XN=L0,W0=T0,H0=D0,V0=E0;const Ss=HN,ks=VN,ys=b.forwardRef((n,a)=>{var i=n,{className:s,children:t}=i,r=Ee(i,["className","children"]);return e.jsxs(U0,Z(E({ref:a,className:Ce("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 cyrus-ui",s)},r),{children:[t,e.jsx(YN,{asChild:!0,children:e.jsx(el,{className:"h-4 w-4 opacity-50"})})]}))});ys.displayName=U0.displayName;const Y0=b.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Ee(n,["className"]);return e.jsx(W0,Z(E({ref:r,className:Ce("flex cursor-default items-center justify-center py-1",s)},t),{children:e.jsx(Dy,{className:"h-4 w-4"})}))});Y0.displayName=W0.displayName;const G0=b.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Ee(n,["className"]);return e.jsx(H0,Z(E({ref:r,className:Ce("flex cursor-default items-center justify-center py-1",s)},t),{children:e.jsx(el,{className:"h-4 w-4"})}))});G0.displayName=H0.displayName;const bs=b.forwardRef((i,n)=>{var o=i,{className:s,children:t,position:r="popper"}=o,a=Ee(o,["className","children","position"]);return e.jsx(GN,{children:e.jsxs(q0,Z(E({ref:n,className:Ce("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:r},a),{children:[e.jsx(Y0,{}),e.jsx(JN,{className:Ce("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),e.jsx(G0,{})]}))})});bs.displayName=q0.displayName;const QN=b.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Ee(n,["className"]);return e.jsx(z0,E({ref:r,className:Ce("py-1.5 pl-8 pr-2 text-sm font-semibold",s)},t))});QN.displayName=z0.displayName;const at=b.forwardRef((n,a)=>{var i=n,{className:s,children:t}=i,r=Ee(i,["className","children"]);return e.jsxs($0,Z(E({ref:a,className:Ce("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s)},r),{children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(XN,{children:e.jsx(ja,{className:"h-4 w-4"})})}),e.jsx(KN,{children:t})]}))});at.displayName=$0.displayName;const ZN=b.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Ee(n,["className"]);return e.jsx(V0,E({ref:r,className:Ce("-mx-1 my-1 h-px bg-muted",s)},t))});ZN.displayName=V0.displayName;const al=Yv,nl=Gv,e4=Jv,J0=b.forwardRef((i,n)=>{var o=i,{className:s,inset:t,children:r}=o,a=Ee(o,["className","inset","children"]);return e.jsxs(vg,Z(E({ref:n,className:Ce("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",s)},a),{children:[r,e.jsx(tn,{className:"ml-auto h-4 w-4"})]}))});J0.displayName=vg.displayName;const K0=b.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Ee(n,["className"]);return e.jsx(yg,E({ref:r,className:Ce("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s)},t))});K0.displayName=yg.displayName;const Ki=b.forwardRef((n,a)=>{var i=n,{className:s,sideOffset:t=4}=i,r=Ee(i,["className","sideOffset"]);return e.jsx(Vv,{children:e.jsx(bg,E({ref:a,sideOffset:t,className:Ce("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s)},r))})});Ki.displayName=bg.displayName;const ds=b.forwardRef((n,a)=>{var i=n,{className:s,inset:t}=i,r=Ee(i,["className","inset"]);return e.jsx(wg,E({ref:a,className:Ce("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",s)},r))});ds.displayName=wg.displayName;const t4=b.forwardRef((i,n)=>{var o=i,{className:s,children:t,checked:r}=o,a=Ee(o,["className","children","checked"]);return e.jsxs(jg,Z(E({ref:n,className:Ce("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:r},a),{children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Ng,{children:e.jsx(ja,{className:"h-4 w-4"})})}),t]}))});t4.displayName=jg.displayName;const s4=b.forwardRef((n,a)=>{var i=n,{className:s,children:t}=i,r=Ee(i,["className","children"]);return e.jsxs(Sg,Z(E({ref:a,className:Ce("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s)},r),{children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Ng,{children:e.jsx(ec,{className:"h-2 w-2 fill-current"})})}),t]}))});s4.displayName=Sg.displayName;const r4=b.forwardRef((n,a)=>{var i=n,{className:s,inset:t}=i,r=Ee(i,["className","inset"]);return e.jsx(kg,E({ref:a,className:Ce("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",s)},r))});r4.displayName=kg.displayName;const nm=b.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Ee(n,["className"]);return e.jsx(Cg,E({ref:r,className:Ce("-mx-1 my-1 h-px bg-muted",s)},t))});nm.displayName=Cg.displayName;const il=Kv,Xi=b.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Ee(n,["className"]);return e.jsx(Ag,E({ref:r,className:Ce("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s)},t))});Xi.displayName=Ag.displayName;const _r=b.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Ee(n,["className"]);return e.jsx(Pg,E({ref:r,className:Ce("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s)},t))});_r.displayName=Pg.displayName;const Ir=b.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Ee(n,["className"]);return e.jsx(_g,E({ref:r,className:Ce("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s)},t))});Ir.displayName=_g.displayName;const Bs=Lg,ou=Tg,a4=Ig,X0=b.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Ee(n,["className"]);return e.jsx(ym,E({ref:r,className:Ce("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s)},t))});X0.displayName=ym.displayName;const Es=b.forwardRef((n,a)=>{var i=n,{className:s,children:t}=i,r=Ee(i,["className","children"]);return e.jsxs(a4,{children:[e.jsx(X0,{}),e.jsxs(bm,Z(E({ref:a,className:Ce("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s)},r),{children:[t,e.jsxs(wm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(Zs,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]}))]})});Es.displayName=bm.displayName;const qr=r=>{var a=r,{className:s}=a,t=Ee(a,["className"]);return e.jsx("div",E({className:Ce("flex flex-col space-y-1.5 text-center sm:text-left",s)},t))};qr.displayName="DialogHeader";const Vn=r=>{var a=r,{className:s}=a,t=Ee(a,["className"]);return e.jsx("div",E({className:Ce("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s)},t))};Vn.displayName="DialogFooter";const rr=b.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Ee(n,["className"]);return e.jsx(jm,E({ref:r,className:Ce("text-lg font-semibold leading-none tracking-tight",s)},t))});rr.displayName=jm.displayName;const _i=b.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Ee(n,["className"]);return e.jsx(Nm,E({ref:r,className:Ce("text-sm text-muted-foreground",s)},t))});_i.displayName=Nm.displayName;const n4=s=>{switch(s){case"delivered":return"bg-green-600";case"preview-approved":return"bg-teal-500";case"render-approved":return"bg-green-500";case"waiting-preview-reply":return"bg-yellow-500";case"waiting-render-reply":return"bg-yellow-500";case"preview":return"bg-blue-500";case"rendering":return"bg-pink-600";case"preview-feedback":return"bg-orange-500";default:return"bg-gray-500"}};function Q0({project:s,isCompact:t}){const r=w=>{try{return new Date(w)}catch(x){return null}},a=r(s.startDate)||new Date,n=r(s.endDate)||new Date,i=new Date,o=Math.max(1,ih(n,a)),l=Math.max(0,ih(i,a)),c=Math.min(100,l/o*100),h=i>n&&s.status!=="delivered";Uw(i);const f=(s.statusHistory||[]).map(w=>{const x=r(w.date)||a,j=ih(x,a),_=Math.max(0,Math.min(100,j/o*100));return Z(E({},w),{position:_})}),p=Math.max(0,Math.min(100,l/o*100)),v=[],u=Math.ceil(o/7);for(let w=1;w<=Math.min(u,8);w++){const x=w*7/o*100;x<=100&&v.push({week:w,position:x})}const C=w=>{const x=r(w);return x?Px(x,"MMM d, yyyy (EEEE)"):"Invalid Date"};return e.jsxs("div",{className:"space-y-3 mt-8",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:`progress-fill ${h?"bg-destructive":""}`,style:{width:`${c}%`}})}),!t&&v.map(w=>e.jsx("div",{className:"absolute top-0 h-2 w-px bg-muted-foreground/30 mb-2.5",style:{left:`${w.position}%`},children:e.jsxs("span",{className:"absolute -top-5 left-1/2 -translate-x-1/2 text-xs text-muted-foreground",children:["W",w.week]})},w.week)),l>=0&&l<=o&&e.jsxs("div",{className:"absolute -top-1 -bottom-1 w-0.5 bg-primary-glow",style:{left:`${p}%`},children:[e.jsx("div",{className:"absolute -top-2 left-1/2 -translate-x-1/2 w-2 h-2 bg-primary-glow rounded-full"}),!t&&e.jsx("span",{className:"absolute -top-7 left-1/2 -translate-x-1/2 text-xs font-medium text-primary whitespace-nowrap",children:"Today"})]}),e.jsx(Hi,{children:f.map(w=>e.jsxs(di,{children:[e.jsx(ui,{asChild:!0,children:e.jsx("div",{className:"absolute -top-2 -bottom-2 w-1 cursor-pointer",style:{left:`${w.position}%`},children:e.jsx("div",{className:`w-3 h-3 rounded-full border-2 border-background absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 hover:scale-110 transition-transform ${n4(w.status)}`})})}),e.jsx(Nn,{children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-medium capitalize",children:w.status.replace("-"," ")}),e.jsx("p",{className:"text-xs text-muted-foreground",children:C(w.date)}),w.note&&e.jsx("p",{className:"text-xs mt-1",children:w.note})]})})]},w.id))})]}),e.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground mt-2",children:[e.jsx("span",{children:Jt(s.startDate)}),e.jsxs("span",{className:h&&s.status!=="delivered"?"text-destructive font-medium":"",children:[Jt(s.endDate),h&&s.status!=="delivered"&&" (Overdue)"]})]}),!t&&e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsxs("span",{children:[Math.round(c),"% Passed"]}),e.jsxs("span",{children:[Math.max(0,o-l)," days remaining"]})]})]})}const i4=Qd("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function nt(a){var n=a,{className:s,variant:t}=n,r=Ee(n,["className","variant"]);return e.jsx("div",E({className:Ce(i4({variant:t}),s)},r))}function Z0({media:s,categoryName:t,onImageClick:r,onCommentClick:a}){const[n,i]=b.useState(0);if(s.length===0)return e.jsx("div",{className:"h-48 bg-muted/50 rounded-lg flex items-center justify-center border-2 border-dashed",children:e.jsxs("div",{className:"text-center text-muted-foreground",children:[e.jsx(Li,{className:"h-8 w-8 mx-auto mb-2"}),e.jsx("p",{className:"text-sm font-semibold",children:"No media in this category"})]})});const o=f=>{f.stopPropagation(),i(p=>p>0?p-1:s.length-1)},l=f=>{f.stopPropagation(),i(p=>p<s.length-1?p+1:0)},c=f=>{f.stopPropagation(),r==null||r(n)},h=f=>{f.stopPropagation(),a==null||a(s[n])};return e.jsxs("div",{className:"relative group w-full h-48 cyrus-image-slider",onClick:f=>f.stopPropagation(),children:[e.jsxs("div",{className:"w-full h-full bg-background rounded-lg overflow-hidden cursor-pointer cyrus-image-container",onClick:c,children:[e.jsx("img",{src:s[n].url,alt:s[n].filename,className:"w-full h-full object-cover transition-transform duration-300 ease-in-out group-hover:scale-105"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 via-black/0 to-black/0 opacity-0 group-hover:opacity-100 transition-opacity"})]}),s.length>1&&e.jsxs(e.Fragment,{children:[e.jsx(de,{variant:"ghost",size:"icon",className:"absolute left-2 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-all duration-300 bg-black/50 hover:bg-black/70 text-white rounded-full h-8 w-8",onClick:o,children:e.jsx(vc,{className:"h-5 w-5"})}),e.jsx(de,{variant:"ghost",size:"icon",className:"absolute right-2 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-all duration-300 bg-black/50 hover:bg-black/70 text-white rounded-full h-8 w-8",onClick:l,children:e.jsx(tn,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"absolute top-2 left-2 flex items-center gap-2",children:e.jsx(nt,{className:"text-xs bg-black/60 text-white border-transparent",children:t==="All"?s[n].type:t})}),a&&e.jsxs(de,{variant:"ghost",size:"sm",className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-all duration-300 bg-blue-500/80 hover:bg-blue-600/90 text-white rounded-full h-8 px-3",onClick:h,children:[e.jsx(Tr,{className:"h-3 w-3 mr-1"}),e.jsx("span",{className:"text-xs",children:"Comments"})]}),s.length>1&&e.jsxs("div",{className:"absolute bottom-2 right-2 bg-black/60 text-white rounded-full px-2 py-0.5 text-xs font-mono",children:[n+1," / ",s.length]})]})}function zm(s){const{onClose:t}=s,{toast:r}=da(),[a,n]=b.useState(s.initialIndex||0);b.useEffect(()=>{"initialIndex"in s&&s.initialIndex!==void 0&&n(s.initialIndex)},[s]);const i="src"in s&&s.src!==void 0,o=f=>{navigator.clipboard.writeText(f),r({title:"Link copied!",description:"The image link has been copied to your clipboard."})},l=f=>{!i&&s.onDelete&&(s.onDelete(f),r({title:"Media deleted",description:"The media file has been removed from the project."})),t()},c=f=>{i||!s.media||n(f==="prev"?a>0?a-1:s.media.length-1:a<s.media.length-1?a+1:0)};if(i)return e.jsx(Bs,{open:!0,onOpenChange:t,children:e.jsx(Es,{className:"max-w-[95vw] max-h-[95vh] p-0 overflow-hidden",onClick:f=>f.stopPropagation(),children:e.jsxs("div",{className:"relative flex items-center justify-center min-h-[70vh] bg-background/95",children:[e.jsx(de,{variant:"ghost",size:"sm",className:"absolute top-4 right-4 z-10 bg-background/80 hover:bg-background",onClick:f=>{f.stopPropagation(),t()},children:e.jsx(Zs,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex items-center justify-center w-full h-full p-8",children:e.jsx("img",{src:s.src,alt:s.alt,className:"max-w-full max-h-[85vh] object-contain"})})]})})});if(!s.media||s.media.length===0)return null;const h=s.media[a];return e.jsx(Bs,{open:!0,onOpenChange:t,children:e.jsx(Es,{className:"max-w-[95vw] max-h-[95vh] p-0 overflow-hidden",onClick:f=>f.stopPropagation(),children:e.jsxs("div",{className:"relative flex items-center justify-center min-h-[70vh] bg-background/95",children:[e.jsx(de,{variant:"ghost",size:"sm",className:"absolute top-4 right-4 z-10 bg-background/80 hover:bg-background",onClick:f=>{f.stopPropagation(),t()},children:e.jsx(Zs,{className:"h-4 w-4"})}),s.media.length>1&&e.jsxs(e.Fragment,{children:[e.jsx(de,{variant:"ghost",size:"sm",className:"absolute left-4 top-1/2 -translate-y-1/2 z-10 bg-background/80 hover:bg-background",onClick:f=>{f.stopPropagation(),c("prev")},children:e.jsx(vc,{className:"h-4 w-4"})}),e.jsx(de,{variant:"ghost",size:"sm",className:"absolute right-4 top-1/2 -translate-y-1/2 z-10 bg-background/80 hover:bg-background",onClick:f=>{f.stopPropagation(),c("next")},children:e.jsx(tn,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"flex items-center justify-center w-full h-full p-8",children:e.jsx("img",{src:h.url,alt:h.filename,className:"max-w-full max-h-[85vh] object-contain"})}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-background/80 backdrop-blur-sm p-4 flex justify-between items-center",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs(nt,{variant:"outline",className:"bg-background/50",children:[a+1," / ",s.media.length]}),e.jsx(nt,{variant:"secondary",children:h.type})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(de,{variant:"outline",size:"sm",onClick:()=>o(h.url),children:[e.jsx(tc,{className:"h-4 w-4 mr-2"}),"Copy Link"]}),s.onDelete&&e.jsxs(de,{variant:"destructive",size:"sm",onClick:()=>l(h.id),children:[e.jsx($r,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})})})}const wa=[{value:"not_started",label:"Not Started",color:"bg-gray-500",borderColor:"border-gray-500"},{value:"preview",label:"Preview",color:"bg-blue-500",borderColor:"border-blue-500"},{value:"waiting-preview-reply",label:"Waiting Preview Reply",color:"bg-yellow-500",borderColor:"border-yellow-500"},{value:"preview-feedback",label:"Preview Feedback",color:"bg-orange-500",borderColor:"border-orange-500"},{value:"preview-approved",label:"Preview Approved",color:"bg-teal-500",borderColor:"border-teal-500"},{value:"rendering",label:"Rendering",color:"bg-primary text-primary-foreground",borderColor:"border-primary"},{value:"waiting-render-reply",label:"Waiting Render Reply",color:"bg-yellow-500",borderColor:"border-yellow-500"},{value:"render-approved",label:"Render Approved",color:"bg-green-500",borderColor:"border-green-500"},{value:"delivered",label:"Delivered",color:"bg-green-600 text-white",borderColor:"border-green-600"}];wa.map(s=>s.value);const vp=s=>{var t,r;return(r=(t=wa.find(a=>a.value===s))==null?void 0:t.color)!=null?r:"bg-gray-500"},zd=s=>{var t,r;return(r=(t=wa.find(a=>a.value===s))==null?void 0:t.borderColor)!=null?r:"border-gray-500"},im=s=>{switch(s){case"high":return"bg-red-500";case"medium":return"bg-yellow-500";case"low":return"bg-green-500";default:return"bg-gray-500"}};class o4{constructor(){ir(this,"activities",[]);ir(this,"listeners",[]);ir(this,"users",new Map([["current-user",{id:"current-user",name:"Current User",avatar:"CU"}],["user-1",{id:"user-1",name:"John Doe",avatar:"JD"}],["user-2",{id:"user-2",name:"Sarah Chen",avatar:"SC"}],["user-3",{id:"user-3",name:"Mike Johnson",avatar:"MJ"}],["user-4",{id:"user-4",name:"Emma Wilson",avatar:"EW"}],["user-5",{id:"user-5",name:"Alex Turner",avatar:"AT"}]]));ir(this,"projects",new Map([["project-1",{id:"project-1",name:"Nike Campaign 2024"}],["project-2",{id:"project-2",name:"Apple Store Redesign"}],["project-3",{id:"project-3",name:"Tesla Model S Campaign"}]]));this.seedMockActivities()}seedMockActivities(){const t=[{id:"1",type:"project_created",projectId:"project-1",userId:"user-1",userName:"Sarah Chen",timestamp:"2024-01-15T10:30:00Z",details:{projectName:"Nike Campaign 2024"}},{id:"2",type:"moodboard_created",projectId:"project-1",userId:"user-2",userName:"Mike Johnson",timestamp:"2024-01-16T14:20:00Z",details:{projectName:"Nike Campaign 2024",workspaceName:"Brand Exploration"}},{id:"3",type:"whiteboard_created",projectId:"project-1",userId:"user-3",userName:"Emma Wilson",timestamp:"2024-01-17T09:15:00Z",details:{projectName:"Nike Campaign 2024",workspaceName:"Homepage Review"}},{id:"4",type:"comment_added",projectId:"project-1",userId:"user-4",userName:"Alex Turner",timestamp:"2024-01-17T16:45:00Z",details:{projectName:"Nike Campaign 2024",commentText:"Feedback on color palette"}},{id:"5",type:"whiteboard_pin_added",projectId:"project-1",userId:"user-1",userName:"Sarah Chen",timestamp:"2024-01-18T11:30:00Z",details:{projectName:"Nike Campaign 2024",notePreview:"Navigation issue noted"}},{id:"6",type:"workflow_created",projectId:"project-1",userId:"user-2",userName:"Mike Johnson",timestamp:"2024-01-19T13:20:00Z",details:{projectName:"Nike Campaign 2024",workspaceName:"Campaign Launch Process"}},{id:"7",type:"timeline_updated",projectId:"project-1",userId:"user-3",userName:"Emma Wilson",timestamp:"2024-01-20T15:10:00Z",details:{projectName:"Nike Campaign 2024",reason:"Updated delivery milestones"}}];this.activities=t}logActivity(t){let r="Unknown User";if(t.userId==="current-user"||t.userId===localStorage.getItem("userId")){const i=localStorage.getItem("userDisplayName");if(i)r=i;else if(this.users.has(t.userId)){const o=this.users.get(t.userId);r=(o==null?void 0:o.name)||"Unknown User"}}else if(this.users.has(t.userId)){const i=this.users.get(t.userId);r=(i==null?void 0:i.name)||"Unknown User"}let a="";if(t.projectId&&this.projects.has(t.projectId)){const i=this.projects.get(t.projectId);a=(i==null?void 0:i.name)||""}const n={id:Math.random().toString(36).substring(2,15),type:t.type,projectId:t.projectId||"",userId:t.userId,userName:r,timestamp:new Date().toISOString(),details:E({projectName:a},t.metadata)};return t.title&&(t.type.includes("moodboard")||t.type.includes("whiteboard")||t.type.includes("workflow")||t.type.includes("timeline")?n.details.workspaceName=t.title:n.details.reason=t.title),t.description&&(n.details.noteContent=t.description),this.activities.unshift(n),this.activities=this.activities.slice(0,100),this.notifyListeners(),n}getActivities(){return[...this.activities]}getActivitiesForDate(t){const r=t.split("T")[0];return this.activities.filter(a=>a.timestamp?a.timestamp.split("T")[0]===r:!1)}getActivitiesForProject(t){return this.activities.filter(r=>r.projectId===t)}getActivitiesByType(t){return this.activities.filter(r=>r.type===t)}getActivitiesInDateRange(t,r){const a=new Date(t),n=new Date(r);return this.activities.filter(i=>{if(!i.timestamp)return!1;const o=new Date(i.timestamp);return o>=a&&o<=n})}getActivityStats(){const t=this.activities.length,r=new Date().toISOString().split("T")[0],a=this.getActivitiesForDate(r).length,n=this.activities.reduce((i,o)=>(i[o.type]=(i[o.type]||0)+1,i),{});return{total:t,today:a,byType:n,mostActiveProject:this.getMostActiveProject(),mostActiveUser:this.getMostActiveUser()}}getMostActiveProject(){const t=this.activities.reduce((n,i)=>(i.projectId&&(n[i.projectId]=(n[i.projectId]||0)+1),n),{}),r=Object.keys(t).reduce((n,i)=>t[n]>t[i]?n:i);if(!r)return null;const a=this.projects.get(r);return a?{id:r,name:a.name,count:t[r]}:null}getMostActiveUser(){const t=this.activities.reduce((n,i)=>(n[i.userId]=(n[i.userId]||0)+1,n),{}),r=Object.keys(t).reduce((n,i)=>t[n]>t[i]?n:i);if(!r)return null;const a=this.users.get(r);return a?{id:r,name:a.name,count:t[r]}:null}subscribe(t){return this.listeners.push(t),()=>{const r=this.listeners.indexOf(t);r>-1&&this.listeners.splice(r,1)}}notifyListeners(){this.listeners.forEach(t=>t([...this.activities]))}logProjectCreated(t,r,a){return this.logActivity({type:"project_created",title:r,projectId:t,userId:a,metadata:{projectId:t}})}logMoodboardCreated(t,r,a,n){return this.logActivity({type:"moodboard_created",title:r,projectId:a,userId:n,metadata:{moodboardId:t}})}logWhiteboardCreated(t,r,a,n){return this.logActivity({type:"whiteboard_created",title:r,projectId:a,userId:n,metadata:{whiteboardId:t}})}logCommentAdded(t,r,a,n,i){return this.logActivity({type:"comment_added",title:`Comment on ${r}`,description:t.substring(0,100)+(t.length>100?"...":""),projectId:n,userId:i,metadata:{targetType:r,targetId:a,content:t}})}logPinAdded(t,r,a,n){return this.logActivity({type:"whiteboard_pin_added",title:"Pin added to image",description:t.substring(0,100)+(t.length>100?"...":""),projectId:a,userId:n,metadata:{imageId:r,pinNote:t}})}logStatusChanged(t,r,a,n,i,o){return this.logActivity({type:"status_changed",title:`${t} status changed`,description:`Changed from ${a} to ${n}`,projectId:i,userId:o,metadata:{itemType:t,itemId:r,oldStatus:a,newStatus:n}})}logWhiteboardUpdated(t,r,a,n,i){return this.logActivity({type:"whiteboard_updated",title:`Whiteboard "${r}" updated`,description:i?`Changes: ${i}`:void 0,projectId:a,userId:n,metadata:{whiteboardId:t,whiteboardName:r}})}logWhiteboardDeleted(t,r,a,n){return this.logActivity({type:"whiteboard_deleted",title:`Whiteboard "${r}" deleted`,projectId:a,userId:n,metadata:{whiteboardId:t,whiteboardName:r}})}logWhiteboardPinAdded(t,r,a,n,i){return this.logActivity({type:"whiteboard_pin_added",title:`Pin added to whiteboard "${r}"`,description:a.length>50?`${a.substring(0,50)}...`:a,projectId:n,userId:i,metadata:{whiteboardId:t,whiteboardName:r,pinContent:a}})}logWhiteboardPinResolved(t,r,a,n,i){return this.logActivity({type:"whiteboard_pin_resolved",title:`Pin resolved on whiteboard "${r}"`,projectId:n,userId:i,metadata:{whiteboardId:t,whiteboardName:r,pinId:a}})}logMoodboardUpdated(t,r,a,n,i){return this.logActivity({type:"moodboard_updated",title:`Moodboard "${r}" updated`,description:i?`Changes: ${i}`:void 0,projectId:a,userId:n,metadata:{moodboardId:t,moodboardName:r}})}logMoodboardDeleted(t,r,a,n){return this.logActivity({type:"moodboard_deleted",title:`Moodboard "${r}" deleted`,projectId:a,userId:n,metadata:{moodboardId:t,moodboardName:r}})}logMoodboardElementAdded(t,r,a,n,i){return this.logActivity({type:"moodboard_element_added",title:`${a} added to moodboard "${r}"`,projectId:n,userId:i,metadata:{moodboardId:t,moodboardName:r,elementType:a}})}logWorkflowUpdated(t,r,a,n,i){return this.logActivity({type:"workflow_updated",title:`Workflow "${r}" updated`,description:i?`Changes: ${i}`:void 0,projectId:a,userId:n,metadata:{workflowId:t,workflowName:r}})}logWorkflowDeleted(t,r,a,n){return this.logActivity({type:"workflow_deleted",title:`Workflow "${r}" deleted`,projectId:a,userId:n,metadata:{workflowId:t,workflowName:r}})}logWorkflowStageCompleted(t,r,a,n,i,o){return this.logActivity({type:"workflow_stage_completed",title:`Stage "${n}" completed in workflow "${r}"`,projectId:i,userId:o,metadata:{workflowId:t,workflowName:r,stageId:a,stageName:n}})}logTimelineUpdated(t,r,a,n,i){return this.logActivity({type:"timeline_updated",title:`Timeline "${r}" updated`,description:i?`Changes: ${i}`:void 0,projectId:a,userId:n,metadata:{timelineId:t,timelineName:r}})}logTimelineDeleted(t,r,a,n){return this.logActivity({type:"timeline_deleted",title:`Timeline "${r}" deleted`,projectId:a,userId:n,metadata:{timelineId:t,timelineName:r}})}logTimelineMilestoneReached(t,r,a,n,i,o){return this.logActivity({type:"timeline_milestone_reached",title:`Milestone "${n}" reached in timeline "${r}"`,projectId:i,userId:o,metadata:{timelineId:t,timelineName:r,milestoneId:a,milestoneName:n}})}clearActivities(){this.activities=[],this.notifyListeners()}exportActivities(){return JSON.stringify(this.activities,null,2)}importActivities(t){try{const r=JSON.parse(t);this.activities=r,this.notifyListeners()}catch(r){}}getActivitiesByUser(t){return this.activities.filter(r=>r.userId===t)}}const Ms=new o4,e1=[],l4=s=>{var t,r;return Z(E({},s),{name:((t=s.name)==null?void 0:t.trim())||"Untitled Project",client:((r=s.client)==null?void 0:r.trim())||"Unknown Client",status:s.status||"planning",startDate:s.startDate?new Date(s.startDate).toISOString():new Date().toISOString(),endDate:s.endDate?new Date(s.endDate).toISOString():null})};e1.map(l4);class c4{constructor(){ir(this,"projects",[]);this.projects=[...e1]}getProjects(){return he(this,null,function*(){return yield new Promise(t=>setTimeout(t,200)),this.projects.map(t=>Qh(t))})}getProject(t){return he(this,null,function*(){yield new Promise(a=>setTimeout(a,100));const r=this.projects.find(a=>a.id===t);if(!r)throw new Error(`Project with ID ${t} not found`);return Qh(r)})}createProject(t){return he(this,null,function*(){if(!t||typeof t!="object"||!t.name||!t.client)throw new Error("Invalid project data");const r={id:`project-${Date.now()}`,name:t.name,client:t.client,projectManager:t.projectManager||"Unassigned",artists:t.artists||[],brief:t.brief||"",externalLinks:t.externalLinks||[],startDate:t.startDate||new Date().toISOString(),endDate:t.endDate||new Date(Date.now()+30*24*60*60*1e3).toISOString(),priority:t.priority||"medium",status:t.status||"Planning",statusHistory:[...t.statusHistory||[],{id:`status-${Date.now()}`,status:t.status||"Planning",date:new Date().toISOString(),note:"Project created"}],media:t.media||[],videoUrl:t.videoUrl,isArchived:t.isArchived||!1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),notes:t.notes||[]};this.projects.push(r);const a=JSON.parse(localStorage.getItem("activities")||"[]"),n=localStorage.getItem("userId")||"current-user",i=localStorage.getItem("userDisplayName")||"Current User",o={id:`activity-${Date.now()}-${Math.random()}`,type:"project_created",title:r.name,description:`Project "${r.name}" was created for ${r.client}`,projectId:r.id,projectName:r.name,userId:n,userName:i,date:new Date().toISOString(),metadata:{projectId:r.id,projectName:r.name,client:r.client}};return a.unshift(o),localStorage.setItem("activities",JSON.stringify(a.slice(0,1e3))),yield new Promise(l=>setTimeout(l,300)),E({},r)})}updateProject(t,r){return he(this,null,function*(){const a=this.projects.findIndex(l=>l.id===t);if(a===-1)throw new Error(`Project with ID ${t} not found`);const n=this.projects[a],i=[...n.statusHistory];r.status&&r.status!==n.status&&i.push({id:`status-${Date.now()}`,status:r.status,date:new Date().toISOString(),note:r.status==="Completed"?"Project completed":`Status changed to ${r.status}`});const o=Z(E(E({},n),r),{statusHistory:i,updatedAt:new Date().toISOString()});return this.projects[a]=o,yield new Promise(l=>setTimeout(l,200)),yield this.syncProjectWithWorkspaces(t),E({},o)})}deleteProject(t){return he(this,null,function*(){const r=this.projects.findIndex(a=>a.id===t);if(r===-1)throw new Error(`Project with ID ${t} not found`);this.projects.splice(r,1),yield new Promise(a=>setTimeout(a,300))})}addProjectMedia(t,r){return he(this,null,function*(){const a=yield this.getProject(t);return a.media=[...a.media,r],a.updatedAt=new Date().toISOString(),yield this.updateProject(t,a),yield this.syncProjectWithWorkspaces(t),a})}updateProjectMedia(t,r,a){return he(this,null,function*(){const i=(yield this.getProject(t)).media.map(l=>l.id===r?E(E({},l),a):l);return yield this.updateProject(t,{media:i,updatedAt:new Date().toISOString()})})}deleteProjectMedia(t,r){return he(this,null,function*(){const n=(yield this.getProject(t)).media.filter(o=>o.id!==r);return yield this.updateProject(t,{media:n,updatedAt:new Date().toISOString()})})}syncProjectWithWorkspaces(t){return he(this,null,function*(){try{yield wt.syncProjectChanges(t)}catch(r){}})}}const ia=new c4,d4=()=>!(typeof window!="undefined"&&window.pulse2),$m=()=>typeof window!="undefined"&&window.pulse2?window.pulse2:{apiUrl:"/wp-json/pulse2/v1",mediaUrl:"/wp-json/wp/v2/media",nonce:""},_t=(r,...a)=>he(void 0,[r,...a],function*(s,t={}){const n=$m(),i=`${n.apiUrl}${s}`,o={"Content-Type":"application/json"},l=typeof window!="undefined"?localStorage.getItem("jwtToken"):null;l&&(o.Authorization=`Bearer ${l}`),n.nonce&&(o["X-WP-Nonce"]=n.nonce);const c=yield fetch(i,Z(E({},t),{headers:E(E({},o),t.headers)}));if(!c.ok)throw new Error(`API request failed: ${c.status} ${c.statusText}`);return c.json()}),u4=(s,t,r)=>he(void 0,null,function*(){const a=$m(),n=new FormData;n.append("file",r);const i={},o=typeof window!="undefined"?localStorage.getItem("jwtToken"):null;o&&(i.Authorization=`Bearer ${o}`),a.nonce&&(i["X-WP-Nonce"]=a.nonce);const l=yield fetch(`${a.apiUrl}/workspaces-json/${s}/images?category_id=${t}`,{method:"POST",headers:i,body:n});if(!l.ok)throw new Error(`Upload failed: ${l.status} ${l.statusText}`);return l.json()});function h4(s){return he(this,null,function*(){return _t(`/projects/${s}`)})}function t1(s){return s&&s.settings&&s.settings.canvas&&!s.canvas&&(s.canvas=s.settings.canvas),s}function yp(s){return(s||[]).map(t=>t1(t))}class m4{constructor(){ir(this,"workspaces",[]);ir(this,"workspacesByProject",new Map);ir(this,"_projectSyncMap")}getWorkspacesByProject(t){return he(this,null,function*(){try{const r=yield _t(`/workspaces/project/${t}`),a=yp(r);this.workspaces=this.mergeAndDedupeWorkspaces(this.workspaces,a);for(const n of a)this.cacheWorkspace(n.projectId,n.type,n.id);return a}catch(r){throw r}})}fetchAllWorkspaces(){return he(this,null,function*(){try{const t=yield _t("/workspaces"),r=yp(t);this.workspaces=this.mergeAndDedupeWorkspaces(this.workspaces,r);for(const a of r)this.cacheWorkspace(a.projectId,a.type,a.id);return r}catch(t){throw t}})}getWorkspace(t){return he(this,null,function*(){try{const r=yield _t(`/workspaces/${t}`),a=t1(r);return this.workspaces=this.mergeAndDedupeWorkspaces(this.workspaces,[a]),this.cacheWorkspace(a.projectId,a.type,a.id),a}catch(r){throw r}})}mergeAndDedupeWorkspaces(t,r){const a=new Map;for(const n of t)a.set(n.id,n);for(const n of r)a.set(n.id,E(E({},a.get(n.id)),n));return Array.from(a.values())}getExistingWorkspace(t,r){return he(this,null,function*(){const a=this.workspaces.find(n=>n.projectId===t&&n.type===r);if(a)return this.cacheWorkspace(t,r,a.id),a;try{const i=(yield this.getWorkspacesByProject(t)).find(o=>o.type===r)||null;return i&&this.cacheWorkspace(t,r,i.id),i}catch(n){return null}})}cacheWorkspace(t,r,a){var n;this.workspacesByProject.has(t)||this.workspacesByProject.set(t,new Map),(n=this.workspacesByProject.get(t))==null||n.set(r,a)}createWorkspace(t){return he(this,null,function*(){try{const r=yield _t("/workspaces",{method:"POST",body:JSON.stringify(t)});return this.workspaces=this.mergeAndDedupeWorkspaces(this.workspaces,[r]),this.cacheWorkspace(r.projectId,r.type,r.id),yield Ms.logActivity({type:`${t.type}_created`,projectId:t.projectId,userId:"current-user",userName:"Current User",metadata:{workspaceId:r.id,workspaceName:r.name,workspaceType:r.type}}),r}catch(r){throw r}})}updateWorkspace(t,r){return he(this,null,function*(){const a=$m();try{if(a){const n=yield fetch(`${a.apiUrl}/workspaces/${t}`,{method:"PUT",headers:{"Content-Type":"application/json","X-WP-Nonce":a.nonce},body:JSON.stringify(Z(E({},r),{updatedAt:new Date().toISOString()}))});if(!n.ok){const o=yield n.text();throw new Error(`Failed to update workspace: ${n.status} ${n.statusText}`)}const i=yield n.json();return this.workspaces=this.workspaces.map(o=>o.id===t?E(E({},o),i):o),i}else{const n=this.getCachedWorkspaces(),i=n.findIndex(l=>l.id===t);if(i===-1)throw new Error("Workspace not found");const o=Z(E(E({},n[i]),r),{updatedAt:new Date().toISOString()});return n[i]=o,localStorage.setItem("workspaces",JSON.stringify(n)),this.workspaces=this.mergeAndDedupeWorkspaces(this.workspaces,[o]),o}}catch(n){throw n}})}persistMoodboardState(t,r){return he(this,null,function*(){var l,c;const a=this.workspaces.find(h=>h.id===t),n=(a==null?void 0:a.settings)||{},i=Z(E({},n),{moodboard:Z(E({},n.moodboard||{}),{images:r.images!==void 0?r.images:((l=n.moodboard)==null?void 0:l.images)||[],links:r.links!==void 0?r.links:((c=n.moodboard)==null?void 0:c.links)||[]})});return yield this.updateWorkspace(t,{settings:i})})}updateMoodboardElement(t,r,a,n,i,o){return he(this,null,function*(){var C,w,x;const l=this.workspaces.find(j=>j.id===t)||(yield this.getWorkspace(t)),c=l.canvas||((C=l.settings)==null?void 0:C.canvas);if(!c||!Array.isArray(c.elements)){const j={width:1920,height:1080,background:"#ffffff",elements:[]};l.canvas=j}const h=l.canvas||((w=l.settings)==null?void 0:w.canvas),f=h.elements||[],p=f.findIndex(j=>j.id===r);p>=0&&(f[p]=E(E({},f[p]),a));const v=yield this.updateWorkspace(t,Z(E({},l),{settings:Z(E({},l.settings),{canvas:Z(E({},h),{elements:f})}),updatedAt:new Date().toISOString()})),u=E(E({},l),v);return u.canvas=((x=v.settings)==null?void 0:x.canvas)||h,this.workspaces=this.mergeAndDedupeWorkspaces(this.workspaces,[u]),Ms.logActivity({type:"moodboard_element_updated",projectId:o||l.projectId,userId:n||"current-user",metadata:{workspaceId:t,elementId:r}}),u})}deleteWorkspace(t){return he(this,null,function*(){try{const r=this.workspaces.findIndex(n=>n.id===t);if(r===-1)throw new Error(`Workspace with ID ${t} not found`);const a=this.workspaces[r];if(this.workspaces.splice(r,1),a.projectId&&this.workspacesByProject.has(a.projectId)){const n=this.workspacesByProject.get(a.projectId);n&&n.has(a.type)&&(n.delete(a.type),n.size===0&&this.workspacesByProject.delete(a.projectId))}Ms.logActivity({type:"project_updated",title:`${a.type} deleted`,description:`Deleted ${a.type}: ${a.name}`,projectId:a.projectId,userId:"current-user",metadata:{workspaceId:t,workspaceName:a.name}})}catch(r){throw r}})}getWorkspaceCategories(t){return he(this,null,function*(){try{return yield _t(`/workspaces-json/${t}/categories`)}catch(r){return[]}})}createWorkspaceCategory(t,r){return he(this,null,function*(){try{return yield _t(`/workspaces-json/${t}/categories`,{method:"POST",body:JSON.stringify(r)})}catch(a){throw a}})}getWorkspaceImages(t){return he(this,null,function*(){try{return yield _t(`/workspaces-json/${t}/images`)}catch(r){return[]}})}uploadWorkspaceImage(t,r,a){return he(this,null,function*(){return u4(t,r,a)})}attachWorkspaceImage(t,r,a){return he(this,null,function*(){try{return yield _t(`/workspaces-json/${t}/images/attach`,{method:"POST",body:JSON.stringify({attachment_id:a,category_id:r})})}catch(n){throw n}})}getImagePins(t,r){return he(this,null,function*(){try{const a=r?`?workspace_id=${encodeURIComponent(r)}`:"";return yield _t(`/workspaces-json/image/${t}/pins${a}`)}catch(a){return[]}})}createImagePin(t,r){return he(this,null,function*(){try{return yield _t(`/workspaces-json/image/${t}/pins`,{method:"POST",body:JSON.stringify(r)})}catch(a){throw a}})}updatePin(t,r){return he(this,null,function*(){try{yield _t(`/workspaces-json/pins/${t}`,{method:"PUT",body:JSON.stringify(r)})}catch(a){throw a}})}deletePin(t){return he(this,null,function*(){try{yield _t(`/workspace-pins/${t}`,{method:"DELETE"})}catch(r){throw r}})}getWorkspaceComments(t){return he(this,null,function*(){try{return yield _t(`/workspaces-json/${t}/comments`)}catch(r){return[]}})}createWorkspaceComment(t,r){return he(this,null,function*(){try{return yield _t(`/workspaces-json/${t}/comments`,{method:"POST",body:JSON.stringify(r)})}catch(a){throw a}})}getWorkspaceActivities(t){return he(this,null,function*(){try{return yield _t(`/workspace-activities/project/${t}`)}catch(r){throw r}})}getMoodboards(t){return he(this,null,function*(){return(yield this.getWorkspacesByProject(t)).filter(a=>a.type==="moodboard")})}createMoodboard(t){return he(this,null,function*(){return this.createWorkspace(Z(E({},t),{type:"moodboard"}))})}updateMoodboard(t,r){return he(this,null,function*(){return this.updateWorkspace(t,r)})}deleteMoodboard(t){return he(this,null,function*(){return this.deleteWorkspace(t)})}addMoodboardElement(t,r){return he(this,null,function*(){try{if(r.type==="image"&&r.content.file){const a=yield this.uploadWorkspaceImage(t,"",r.content.file);return Z(E({id:`element-${Date.now()}`},r),{content:Z(E({},r.content),{filename:r.content.file.name,alt:r.content.file.name})})}throw new Error("Element type not yet implemented")}catch(a){throw a}})}getWhiteboards(t){return he(this,null,function*(){return(yield this.getWorkspacesByProject(t)).filter(a=>a.type==="whiteboard")})}createWhiteboard(t){return he(this,null,function*(){return this.createWorkspace(Z(E({},t),{type:"whiteboard"}))})}updateWhiteboard(t,r){return he(this,null,function*(){return this.updateWorkspace(t,r)})}deleteWhiteboard(t){return he(this,null,function*(){return this.deleteWorkspace(t)})}getWorkflows(t){return he(this,null,function*(){return(yield this.getWorkspacesByProject(t)).filter(a=>a.type==="workflow")})}createWorkflow(t){return he(this,null,function*(){return this.createWorkspace(Z(E({},t),{type:"workflow"}))})}getWorkflowStages(t){return he(this,null,function*(){try{return yield _t(`/workspaces/${t}/stages`)}catch(r){throw r}})}createWorkflowStage(t,r){return he(this,null,function*(){try{return yield _t(`/workspaces/${t}/stages`,{method:"POST",body:JSON.stringify(r)})}catch(a){const n=Z(E({id:`stage-${Date.now()}`,workspaceId:t},r),{checklistItems:r.checklistItems||[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()});try{const i=this.workspaces.find(o=>o.id===t);Ms.logActivity({type:"workflow_updated",title:`New workflow stage created: ${n.name}`,description:`Added stage "${n.name}" to workflow`,projectId:i==null?void 0:i.projectId,userId:"current-user",metadata:{workspaceId:t,stageId:n.id,stageName:n.name,action:"stage_created"}})}catch(i){}return n}})}updateWorkflowStage(t,r){return he(this,null,function*(){try{yield _t(`/workflow-stages/${t}`,{method:"PUT",body:JSON.stringify(r)})}catch(a){throw a}})}completeWorkflowStage(t){return he(this,null,function*(){var r;try{yield _t(`/workflow-stages/${t}/complete`,{method:"POST"})}catch(a){try{let n="Unknown Stage",i="",o="";for(const l of this.workspaces)if(l.type==="workflow"){const h=(r=l.stages)==null?void 0:r.find(f=>f.id===t);if(h){n=h.name,i=l.id,o=l.projectId;break}}Ms.logActivity({type:"workflow_updated",title:`Workflow stage completed: ${n}`,description:`Marked stage "${n}" as completed`,projectId:o,userId:"current-user",metadata:{workspaceId:i,stageId:t,stageName:n,action:"stage_completed"}})}catch(n){}}})}deleteWorkflowStage(t){return he(this,null,function*(){try{yield _t(`/workflow-stages/${t}`,{method:"DELETE"})}catch(r){throw r}})}getStageChecklistItems(t){return he(this,null,function*(){try{return yield _t(`/workflow-stages/${t}/checklist`)}catch(r){throw r}})}createChecklistItem(t,r){return he(this,null,function*(){try{return yield _t(`/workflow-stages/${t}/checklist`,{method:"POST",body:JSON.stringify(r)})}catch(a){throw a}})}updateChecklistItem(t,r){return he(this,null,function*(){try{yield _t(`/workflow-checklist/${t}`,{method:"PUT",body:JSON.stringify(r)})}catch(a){throw a}})}deleteChecklistItem(t){return he(this,null,function*(){try{yield _t(`/workflow-checklist/${t}`,{method:"DELETE"})}catch(r){throw r}})}getWorkflowApprovals(){return he(this,arguments,function*(t={}){try{const r=new URLSearchParams;t.workspaceId&&r.append("workspace_id",t.workspaceId),t.stageId&&r.append("stage_id",t.stageId),t.status&&r.append("status",t.status);const a=`/workflow-approvals${r.toString()?"?"+r.toString():""}`;return yield _t(a)}catch(r){throw r}})}createWorkflowApproval(t){return he(this,null,function*(){try{return yield _t("/workflow-approvals",{method:"POST",body:JSON.stringify(t)})}catch(r){throw r}})}updateWorkflowApproval(t,r){return he(this,null,function*(){try{yield _t(`/workflow-approvals/${t}`,{method:"PUT",body:JSON.stringify(r)})}catch(a){throw a}})}createStageDependency(t,r,a){return he(this,null,function*(){try{yield _t(`/workspaces/${t}/stage-dependencies`,{method:"POST",body:JSON.stringify({fromStageId:r,toStageId:a})})}catch(n){throw n}})}deleteStageDependency(t,r,a){return he(this,null,function*(){try{yield _t(`/workspaces/${t}/stage-dependencies`,{method:"DELETE",body:JSON.stringify({fromStageId:r,toStageId:a})})}catch(n){throw n}})}bulkUpdateStages(t){return he(this,null,function*(){try{yield _t("/workflow-stages/bulk-update",{method:"PUT",body:JSON.stringify({stages:t})})}catch(r){throw r}})}bulkAssignStages(t,r){return he(this,null,function*(){try{yield _t("/workflow-stages/bulk-assign",{method:"POST",body:JSON.stringify({stageIds:t,assigneeIds:r})})}catch(a){throw a}})}getWorkflowTemplates(t){return he(this,null,function*(){try{const r=t?`?category=${t}`:"";return yield _t(`/workflow-templates${r}`)}catch(r){return this.getMockWorkflowTemplates()}})}createWorkflowTemplate(t){return he(this,null,function*(){try{return yield _t("/workflow-templates",{method:"POST",body:JSON.stringify(t)})}catch(r){throw r}})}createWorkflowFromTemplate(t,r){return he(this,null,function*(){try{return yield _t(`/workflow-templates/${t}/create-workflow`,{method:"POST",body:JSON.stringify(r)})}catch(a){throw a}})}getWorkflowMetrics(t){return he(this,null,function*(){try{return yield _t(`/workspaces/${t}/metrics`)}catch(r){return this.getMockWorkflowMetrics(t)}})}validateWorkflowTransition(t,r){return he(this,null,function*(){try{return yield _t(`/workflow-stages/${t}/validate-transition`,{method:"POST",body:JSON.stringify({targetStatus:r})})}catch(a){return{valid:!0,errors:[]}}})}detectDependencyCycles(t){return he(this,null,function*(){try{return yield _t(`/workspaces/${t}/dependency-cycles`)}catch(r){return{hasCycles:!1,cycles:[]}}})}getMockWorkflowTemplates(){return[{id:"template-1",name:"Design Review Workflow",description:"Standard design review process with client feedback",category:"design",stages:[{id:"stage-1",name:"Initial Design",description:"Create initial design concepts",order:0,isRequired:!0,estimatedHours:8,checklistTemplate:[],requiresApproval:!1},{id:"stage-2",name:"Internal Review",description:"Team review and feedback",order:1,isRequired:!0,estimatedHours:4,checklistTemplate:[],requiresApproval:!0},{id:"stage-3",name:"Client Presentation",description:"Present to client for approval",order:2,isRequired:!0,estimatedHours:2,checklistTemplate:[],requiresApproval:!0}],isPublic:!0,createdBy:"1",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),usageCount:15}]}getMockWorkflowMetrics(t){return{id:`metrics-${t}`,workspaceId:t,totalStages:5,completedStages:2,averageStageCompletionTime:16.5,bottleneckStages:["stage-2","stage-4"],teamEfficiency:85.5,onTimeDelivery:78.2,totalEstimatedHours:40,totalActualHours:42.5,lastUpdated:new Date().toISOString()}}getTimelines(t){return he(this,null,function*(){return(yield this.getWorkspacesByProject(t)).filter(a=>a.type==="timeline")})}createTimeline(t){return he(this,null,function*(){return this.createWorkspace(Z(E({},t),{type:"timeline"}))})}getTimelineTasks(t){return he(this,null,function*(){try{return yield _t(`/workspaces/${t}/timeline-tasks`)}catch(r){throw r}})}createTimelineTask(t,r){return he(this,null,function*(){try{return yield _t(`/workspaces/${t}/timeline-tasks`,{method:"POST",body:JSON.stringify(r)})}catch(a){throw a}})}updateTimelineTask(t,r){return he(this,null,function*(){try{yield _t(`/timeline-tasks/${t}`,{method:"PUT",body:JSON.stringify(r)})}catch(a){throw a}})}deleteTimelineTask(t){return he(this,null,function*(){try{yield _t(`/timeline-tasks/${t}`,{method:"DELETE"})}catch(r){throw r}})}getTimelineAssignments(){return he(this,arguments,function*(t={}){try{const r=new URLSearchParams;t.taskId&&r.append("task_id",t.taskId),t.userId&&r.append("user_id",t.userId);const a=`/timeline-assignments${r.toString()?"?"+r.toString():""}`;return yield _t(a)}catch(r){throw r}})}createTimelineAssignment(t){return he(this,null,function*(){try{return yield _t("/timeline-assignments",{method:"POST",body:JSON.stringify(t)})}catch(r){throw r}})}getTimelineMilestones(t){return he(this,null,function*(){try{return yield _t(`/workspaces/${t}/milestones`)}catch(r){throw r}})}createTimelineMilestone(t,r){return he(this,null,function*(){try{return yield _t(`/workspaces/${t}/milestones`,{method:"POST",body:JSON.stringify(r)})}catch(a){throw a}})}getTimelineDependencies(t){return he(this,null,function*(){try{const r=new URLSearchParams;t&&r.append("workspace_id",t);const a=`/timeline-dependencies${r.toString()?"?"+r.toString():""}`;return yield _t(a)}catch(r){throw r}})}createTimelineDependency(t){return he(this,null,function*(){try{return yield _t("/timeline-dependencies",{method:"POST",body:JSON.stringify(t)})}catch(r){throw r}})}createWorkspaceForProject(t,r){return he(this,null,function*(){const a=yield this.getExistingWorkspace(t,r);if(a)return{workspace:a,isNew:!1,message:`Existing ${r} found for this project`};const n=typeof window!="undefined"&&!!window.pulse2;let i="Project";try{if(n){const h=yield h4(t);i=(h==null?void 0:h.name)||"Project"}else i=(yield ia.getProject(t)).name||"Project"}catch(h){}const o=typeof window!="undefined"&&localStorage.getItem("userId")||"current-user",l={projectId:t,type:r,name:`${i} ${r.charAt(0).toUpperCase()+r.slice(1)}`,createdBy:o,collaborators:[o],settings:{isPublic:!1,allowComments:!0,allowEditing:!0,autoSave:!0}},c=yield this.createWorkspace(l);return yield this.getWorkspacesByProject(t),{workspace:c,isNew:!0,message:`New ${r} successfully created`}})}setupProjectSyncListener(t,r,a){var i;const n={projectId:t,workspaceId:r,workspaceType:a,lastSync:new Date().toISOString()};this._projectSyncMap||(this._projectSyncMap=new Map),this._projectSyncMap.has(t)||this._projectSyncMap.set(t,[]),(i=this._projectSyncMap.get(t))==null||i.push(n)}syncProjectChanges(t){return he(this,null,function*(){var a;const r=(a=this._projectSyncMap)==null?void 0:a.get(t);if(!(!r||r.length===0))try{const n=yield ia.getProject(t);for(const i of r){const{workspaceId:o,workspaceType:l}=i,c=this.workspaces.find(h=>h.id===o);c&&(l==="moodboard"?this.updateMoodboardFromProject(c,n):l==="whiteboard"&&this.updateWhiteboardFromProject(c,n),i.lastSync=new Date().toISOString())}}catch(n){}})}updateMoodboardFromProject(t,r){if(t.type==="moodboard"){if(r.name&&!t.name.includes(r.name)&&(t.name=`${r.name} Moodboard`),r.media&&Array.isArray(r.media)){const a=new Set((t.images||[]).map(i=>i.id)),n=r.media.filter(i=>!a.has(i.id)).map(i=>({id:i.id,type:"image",url:i.url,filename:i.filename,category:i.type}));n.length>0&&(t.images=[...t.images||[],...n],t.updatedAt=new Date().toISOString())}if(r.externalLinks&&Array.isArray(r.externalLinks)){const a=new Set((t.links||[]).map(i=>i.id)),n=r.externalLinks.filter(i=>!a.has(i.id)).map(i=>({id:i.id,type:"link",url:i.url,title:i.name}));n.length>0&&(t.links=[...t.links||[],...n],t.updatedAt=new Date().toISOString())}}}updateWhiteboardFromProject(t,r){var n;if(t.type!=="whiteboard")return;r.name&&!t.name.includes(r.name)&&(t.name=`${r.name} Whiteboard`);const a=new Set;if((n=t.categories)==null||n.forEach(i=>{var o;(o=i.images)==null||o.forEach(l=>{const c=l.originalId||l.id;a.add(c)})}),r.media&&Array.isArray(r.media)){const i={};r.media.forEach(o=>{if(a.has(o.id))return;const l=o.type||"Other";i[l]||(i[l]=[]),i[l].push(o)}),Object.entries(i).forEach(([o,l])=>{var f;if(l.length===0)return;let c=(f=t.categories)==null?void 0:f.find(p=>p.name===o);c||(c={id:`cat-${Date.now()}-${o.replace(/\s+/g,"-").toLowerCase()}`,name:o,color:this.getCategoryColor(o),isMinimized:!1,images:[]},t.categories=[...t.categories||[],c]);const h=l.map(p=>({id:`img-${Date.now()}-${Math.random().toString(36).substr(2,5)}`,originalId:p.id,url:p.url,filename:p.filename,categoryId:c.id,label:p.filename,uploadedBy:localStorage.getItem("userId")||"current-user",uploadedAt:new Date().toISOString(),pins:[],comments:[]}));c.images=[...c.images,...h]}),t.updatedAt=new Date().toISOString()}}getCategoryColor(t){return{"Final Render":"#3b82f6","Clay Render":"#10b981","Client Reference":"#8b5cf6",Concept:"#f59e0b",Other:"#6b7280"}[t]||"#6b7280"}getCachedWorkspaces(){try{const t=localStorage.getItem("workspaces");return t?JSON.parse(t):[]}catch(t){return[]}}}const wt=new m4,f4=()=>e.jsx(ri,{className:"h-4 w-4"}),p4=({url:s})=>{const t=Ix(s)||"";return t?e.jsx("iframe",{width:"100%",height:"100%",src:`https://www.youtube.com/embed/${t}`,title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}):e.jsx("p",{className:"text-white p-4",children:"Invalid or unsupported YouTube URL"})};function g4({project:s,isCompact:t,onStatusChange:r,onEdit:a,onArchive:n,onRestore:i,onDelete:o,isLoggedIn:l,onClick:c}){var N,k;const[h,f]=b.useState(null),[p,v]=b.useState(!1),[u,C]=b.useState(!1),[w,x]=b.useState(!1),[j,_]=b.useState(!1),{toast:T}=da(),U=b.useMemo(()=>{const D=s.media||[],I={All:D},H=D.reduce((se,ce)=>(se[ce.type]||(se[ce.type]=[]),se[ce.type].push(ce),se),{});return E(E({},I),H)},[s.media]),R=Object.keys(U),[V,$]=b.useState(R[0]);b.useEffect(()=>{R.length>0&&!R.includes(V)&&$(R[0])},[R,V]);const S=(D,I)=>{f({media:D,index:I})},A=D=>he(this,null,function*(){D.stopPropagation();try{T({title:"Creating moodboard...",description:"Please wait while we set up your moodboard."});const I=yield wt.createWorkspaceForProject(s.id,"moodboard");x(!0),T({title:I.isNew?"Moodboard created":"Existing moodboard found",description:I.message}),T({title:"Ready to view",description:"Click here to go to the Moodboards tab",action:e.jsx(de,{variant:"default",size:"sm",onClick:()=>{const H=document.querySelector('[data-viewmode="moodboards"]');if(H)H.click();else{const se=new CustomEvent("navigate",{detail:{viewMode:"moodboards",workspaceId:I.workspace.id}});window.dispatchEvent(se)}},className:"button-primary-enhanced hover-shimmer cyrus-ui",children:"View Moodboards"}),duration:1e4})}catch(I){T({title:"Error",description:"Failed to create moodboard. Please try again.",variant:"destructive"})}}),L=D=>he(this,null,function*(){D.stopPropagation();try{T({title:"Creating whiteboard...",description:"Please wait while we set up your whiteboard."});const I=yield wt.createWorkspaceForProject(s.id,"whiteboard");_(!0),T({title:I.isNew?"Whiteboard created":"Existing whiteboard found",description:I.message}),T({title:"Ready to view",description:"Click here to go to the Whiteboards tab",action:e.jsx(de,{variant:"default",size:"sm",onClick:()=>{const H=document.querySelector('[data-viewmode="whiteboards"]');if(H)H.click();else{const se=new CustomEvent("navigate",{detail:{viewMode:"whiteboards",workspaceId:I.workspace.id}});window.dispatchEvent(se)}},className:"button-primary-enhanced hover-shimmer cyrus-ui",children:"View Whiteboards"}),duration:1e4})}catch(I){T({title:"Error",description:"Failed to create whiteboard. Please try again.",variant:"destructive"})}});return e.jsxs("div",{className:Ce("glass-card p-4 sm:p-6 relative group",s.isArchived&&"opacity-75",c&&"cursor-pointer hover:shadow-lg transition-shadow"),onClick:c,role:c?"button":void 0,tabIndex:c?0:void 0,onKeyDown:D=>{c&&(D.key==="Enter"||D.key===" ")&&(D.preventDefault(),c())},children:[t?e.jsxs("div",{className:"flex items-center justify-between gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${im(s.priority)} flex-shrink-0`}),e.jsx("h3",{className:"text-base font-semibold text-foreground truncate",title:s.name,children:s.name})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0 w-1/2 justify-end",children:[e.jsx(Hi,{children:e.jsxs(di,{children:[e.jsx(ui,{asChild:!0,children:e.jsx(de,{variant:u?"secondary":"ghost",size:"icon",onClick:D=>{D.stopPropagation(),C(!u)},className:"h-8 w-8 hover-shimmer","aria-label":u?"Shrink card":"Expand card",children:u?e.jsx(cx,{className:"h-4 w-4"}):e.jsx(lx,{className:"h-4 w-4"})})}),e.jsx(Nn,{children:e.jsx("p",{children:u?"Shrink":"Expand"})})]})}),e.jsxs(de,{variant:"ghost",size:"icon",onClick:A,className:`h-8 w-8 hover-shimmer ${w?"bg-primary text-primary-foreground":""}`,children:[e.jsx(yr,{className:"h-4 w-4 text-purple-500"}),e.jsx("span",{className:"sr-only",children:"Moodboard"})]}),e.jsxs(de,{variant:"ghost",size:"icon",onClick:L,className:`h-8 w-8 hover-shimmer ${j?"bg-primary text-primary-foreground":""}`,children:[e.jsx(Dr,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"sr-only",children:"Whiteboard"})]}),e.jsxs(Ss,{value:s.status,onValueChange:D=>r(D),children:[e.jsx(ys,{className:`w-full max-w-[190px] py-1 px-3 text-xs font-medium hover-shimmer border-l-4 ${zd(s.status)}`,children:e.jsx(ks,{children:((N=wa.find(D=>D.value===s.status))==null?void 0:N.label)||s.status})}),e.jsx(bs,{children:wa.map(D=>e.jsx(at,{value:D.value,children:D.label},D.value))})]}),l&&e.jsxs(al,{children:[e.jsx(nl,{asChild:!0,children:e.jsx(de,{variant:"ghost",size:"icon",className:"hover-shimmer cyrus-ui h-8 w-8",children:e.jsx(ac,{className:"h-4 w-4"})})}),e.jsxs(Ki,{children:[e.jsxs(ds,{onClick:()=>a(s),children:[e.jsx(nc,{className:"h-4 w-4 mr-2"}),"Edit"]},"edit"),s.isArchived?e.jsxs(ds,{onClick:i,children:[e.jsx(Ch,{className:"h-4 w-4 mr-2"}),"Restore"]},"restore"):e.jsxs(ds,{onClick:n,children:[e.jsx(Ah,{className:"h-4 w-4 mr-2"}),"Archive"]},"archive"),e.jsxs(ds,{onClick:o,className:"text-destructive",children:[e.jsx($r,{className:"h-4 w-4 mr-2"}),"Delete"]},"delete")]})]})]})]}):e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start justify-between mb-4 gap-4",children:[e.jsxs("div",{className:"flex-1 md:w-1/2",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-2 mb-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${im(s.priority)}`}),e.jsx("h3",{className:"text-lg md:text-xl font-semibold text-foreground",children:s.name})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-1 text-sm text-muted-foreground md:pl-7",children:[e.jsxs("span",{children:[e.jsx("span",{className:"font-semibold",children:"Client:"})," ",s.client]}),e.jsxs("span",{children:[e.jsx("span",{className:"font-semibold",children:"PM:"})," ",s.projectManager]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(wr,{className:"h-4 w-4"}),e.jsx("span",{children:(s.artists||[]).map(D=>D.name).join(", ")})]})]})]}),e.jsxs("div",{className:"flex items-start gap-2 md:w-1/2 justify-end",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(de,{variant:"ghost",size:"icon",onClick:A,className:`h-8 w-8 hover-shimmer ${w?"bg-primary text-primary-foreground":""}`,children:e.jsx(yr,{className:"h-4 w-4 text-purple-500"})}),e.jsx(de,{variant:"ghost",size:"icon",onClick:L,className:`h-8 w-8 hover-shimmer ${j?"bg-primary text-primary-foreground":""}`,children:e.jsx(Dr,{className:"h-4 w-4 text-green-500"})}),e.jsxs(Ss,{value:s.status,onValueChange:D=>r(D),children:[e.jsx(ys,{className:`w-full max-w-[190px] py-1 px-3 text-xs font-medium hover-shimmer border-l-4 ${zd(s.status)}`,children:e.jsx(ks,{children:((k=wa.find(D=>D.value===s.status))==null?void 0:k.label)||s.status})}),e.jsx(bs,{children:wa.map(D=>e.jsx(at,{value:D.value,children:D.label},D.value))})]})]}),l&&e.jsxs(al,{children:[e.jsx(nl,{asChild:!0,children:e.jsx(de,{variant:"ghost",size:"sm",className:"hover-shimmer cyrus-ui",children:e.jsx(ac,{className:"h-4 w-4"})})}),e.jsxs(Ki,{children:[e.jsxs(ds,{onClick:()=>a(s),children:[e.jsx(nc,{className:"h-4 w-4 mr-2"}),"Edit"]},"edit"),s.isArchived?e.jsxs(ds,{onClick:i,children:[e.jsx(Ch,{className:"h-4 w-4 mr-2"}),"Restore"]},"restore"):e.jsxs(ds,{onClick:n,children:[e.jsx(Ah,{className:"h-4 w-4 mr-2"}),"Archive"]},"archive"),e.jsxs(ds,{onClick:o,className:"text-destructive",children:[e.jsx($r,{className:"h-4 w-4 mr-2"}),"Delete"]},"delete")]})]})]})]}),!t||u?e.jsxs(e.Fragment,{children:[s.brief&&e.jsxs("p",{className:"text-muted-foreground mb-4 leading-relaxed",children:[e.jsx("span",{className:"font-semibold",children:"Brief:"})," ",s.brief]}),e.jsx("div",{className:"flex flex-wrap items-center gap-x-6 gap-y-2 mb-4 text-sm text-muted-foreground",children:l&&s.externalLinks&&s.externalLinks.length>0&&e.jsx("div",{className:"flex items-center flex-wrap gap-x-4 gap-y-2",children:s.externalLinks.map(D=>e.jsxs("a",{href:D.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 p-1 rounded-md text-muted-foreground hover:text-foreground hover-shimmer",onClick:I=>I.stopPropagation(),children:[f4(),e.jsx("span",{className:"text-xs font-medium",children:D.name})]},D.id))})}),(s.media&&s.media.length>0||s.videoUrl)&&e.jsx("div",{className:"mb-4 group/slider",children:e.jsxs(il,{value:V,onValueChange:D=>$(D),className:"w-full",children:[e.jsxs("div",{className:"flex items-center border-b",children:[e.jsx(Xi,{className:"bg-transparent border-none p-0",children:R.map(D=>e.jsx(_r,{value:D,className:"text-muted-foreground data-[state=active]:text-primary data-[state=active]:shadow-none hover-shimmer",onClick:I=>I.stopPropagation(),children:D},D))}),s.videoUrl&&e.jsxs(di,{children:[e.jsx(ui,{asChild:!0,children:e.jsxs(de,{variant:"ghost",size:"sm",onClick:D=>{D.stopPropagation(),v(!0)},className:"ml-auto flex items-center gap-2 hover-shimmer",children:[e.jsx(Lh,{className:"h-5 w-5"}),e.jsx("span",{className:"text-xs font-medium",children:"Watch Me"})]})}),e.jsx(Nn,{children:"Watch Video"})]})]}),R.map(D=>e.jsx(Ir,{value:D,className:"mt-4",children:e.jsx("div",{onClick:I=>{I.stopPropagation()},children:e.jsx(Z0,{media:U[D],categoryName:D,onImageClick:I=>{S(U[D],I)}})})},D)),R.length===0&&s.videoUrl&&e.jsx("div",{className:"mt-4 flex justify-center items-center h-48 bg-muted/50 rounded-lg border-2 border-dashed",children:e.jsxs(de,{variant:"outline",onClick:()=>v(!0),className:"hover-shimmer",children:[e.jsx(Lh,{className:"h-5 w-5 mr-2"}),"Watch Project Video"]})})]})})]}):null,e.jsx(Q0,{project:s,isCompact:t&&!u}),h&&e.jsx(zm,{media:h.media,initialIndex:h.index,onClose:()=>f(null)}),s.videoUrl&&e.jsx(Bs,{open:p,onOpenChange:D=>{D||v(!1)},children:e.jsxs(Es,{className:"max-w-3xl h-[60vh] p-0 bg-black",onClick:D=>D.stopPropagation(),children:[e.jsx(gc,{asChild:!0,children:e.jsx(rr,{children:"YouTube Video Player"})}),e.jsx(p4,{url:s.videoUrl})]})})]})}const It=b.forwardRef((n,a)=>{var i=n,{className:s,type:t}=i,r=Ee(i,["className","type"]);return e.jsx("input",E({type:t,className:Ce("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm cyrus-ui",s),ref:a},r))});It.displayName="Input";const br=b.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Ee(n,["className"]);return e.jsx("textarea",E({className:Ce("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 cyrus-ui",s),ref:r},t))});br.displayName="Textarea";var x4="Label",s1=b.forwardRef((s,t)=>e.jsx(Qt.label,Z(E({},s),{ref:t,onMouseDown:r=>{var n;r.target.closest("button, input, select, textarea")||((n=s.onMouseDown)==null||n.call(s,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}})));s1.displayName=x4;var r1=s1;const v4=Qd("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),kt=b.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Ee(n,["className"]);return e.jsx(r1,E({ref:r,className:Ce(v4(),s)},t))});kt.displayName=r1.displayName;const y4=[{value:"Final Render",label:"Final Render"},{value:"Clay Render",label:"Clay Render"},{value:"Client Reference",label:"Client Reference"},{value:"Concept",label:"Concept"},{value:"Other",label:"Other"}];function b4({media:s,onMediaAdd:t,onMediaRemove:r,onShowMediaLibrary:a,showLibraryButton:n,onMediaCategoryChange:i}){const o=l=>{l.target.files&&t(l.target.files)};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-24 border-2 border-dashed rounded-lg cursor-pointer hover:bg-muted/50 transition-colors hover-shimmer",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[e.jsx(My,{className:"w-8 h-8 mb-2 text-muted-foreground"}),e.jsx("p",{className:"mb-1 text-sm text-muted-foreground",children:"Upload from Computer"})]}),e.jsx("input",{type:"file",className:"hidden",multiple:!0,onChange:o})]}),n&&e.jsx("button",{type:"button",onClick:a,className:"flex flex-col items-center justify-center w-full h-24 border-2 border-dashed rounded-lg cursor-pointer hover:bg-muted/50 transition-colors hover-shimmer",children:e.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[e.jsx(Fy,{className:"w-8 h-8 mb-2 text-muted-foreground"}),e.jsx("p",{className:"mb-1 text-sm text-muted-foreground",children:"Choose from Library"})]})})]}),s.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Uploaded Media"}),e.jsx("div",{className:"grid grid-cols-3 gap-4",children:s.map(l=>e.jsxs("div",{className:"relative group flex flex-col items-center",style:{borderRadius:15,overflow:"visible"},children:[e.jsx("div",{className:"relative w-full",style:{borderRadius:15,overflow:"hidden"},children:e.jsx("img",{src:l.url,alt:l.filename,className:"w-full h-32 object-cover",style:{borderRadius:15}})}),e.jsx(de,{variant:"destructive",size:"sm",className:"absolute -top-3 -right-3 z-20 h-8 w-8 p-0 flex items-center justify-center shadow-lg hover-shimmer",onClick:()=>r(l.id),children:e.jsx(Zs,{className:"h-5 w-5"})}),e.jsx("div",{className:"w-full text-xs text-center text-muted-foreground bg-transparent pt-2 pb-1 truncate",children:l.filename}),e.jsx("div",{className:"w-full mt-1 flex justify-center",children:e.jsxs(Ss,{value:l.type,onValueChange:c=>i(l.id,c),children:[e.jsx(ys,{className:"w-60 h-10 text-xs hover-shimmer",children:e.jsx(ks,{})}),e.jsx(bs,{children:y4.map(c=>e.jsx(at,{value:c.value,children:c.label},c.value))})]})})]},l.id))})]})]})}function w4(s,t){return b.useReducer((r,a)=>{const n=t[r][a];return n!=null?n:r},s)}var Wm="ScrollArea",[a1,Gk]=Sn(Wm),[j4,ka]=a1(Wm),n1=b.forwardRef((s,t)=>{const N=s,{__scopeScrollArea:r,type:a="hover",dir:n,scrollHideDelay:i=600}=N,o=Ee(N,["__scopeScrollArea","type","dir","scrollHideDelay"]),[l,c]=b.useState(null),[h,f]=b.useState(null),[p,v]=b.useState(null),[u,C]=b.useState(null),[w,x]=b.useState(null),[j,_]=b.useState(0),[T,U]=b.useState(0),[R,V]=b.useState(!1),[$,S]=b.useState(!1),A=Is(t,k=>c(k)),L=xg(n);return e.jsx(j4,{scope:r,type:a,dir:L,scrollHideDelay:i,scrollArea:l,viewport:h,onViewportChange:f,content:p,onContentChange:v,scrollbarX:u,onScrollbarXChange:C,scrollbarXEnabled:R,onScrollbarXEnabledChange:V,scrollbarY:w,onScrollbarYChange:x,scrollbarYEnabled:$,onScrollbarYEnabledChange:S,onCornerWidthChange:_,onCornerHeightChange:U,children:e.jsx(Qt.div,Z(E({dir:L},o),{ref:A,style:E({position:"relative","--radix-scroll-area-corner-width":j+"px","--radix-scroll-area-corner-height":T+"px"},s.style)}))})});n1.displayName=Wm;var i1="ScrollAreaViewport",o1=b.forwardRef((s,t)=>{const h=s,{__scopeScrollArea:r,children:a,nonce:n}=h,i=Ee(h,["__scopeScrollArea","children","nonce"]),o=ka(i1,r),l=b.useRef(null),c=Is(t,l,o.onViewportChange);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),e.jsx(Qt.div,Z(E({"data-radix-scroll-area-viewport":""},i),{ref:c,style:E({overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden"},s.style),children:e.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:a})}))]})});o1.displayName=i1;var sn="ScrollAreaScrollbar",Hm=b.forwardRef((s,t)=>{const c=s,{forceMount:r}=c,a=Ee(c,["forceMount"]),n=ka(sn,s.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=n,l=s.orientation==="horizontal";return b.useEffect(()=>(l?i(!0):o(!0),()=>{l?i(!1):o(!1)}),[l,i,o]),n.type==="hover"?e.jsx(N4,Z(E({},a),{ref:t,forceMount:r})):n.type==="scroll"?e.jsx(S4,Z(E({},a),{ref:t,forceMount:r})):n.type==="auto"?e.jsx(l1,Z(E({},a),{ref:t,forceMount:r})):n.type==="always"?e.jsx(Vm,Z(E({},a),{ref:t})):null});Hm.displayName=sn;var N4=b.forwardRef((s,t)=>{const l=s,{forceMount:r}=l,a=Ee(l,["forceMount"]),n=ka(sn,s.__scopeScrollArea),[i,o]=b.useState(!1);return b.useEffect(()=>{const c=n.scrollArea;let h=0;if(c){const f=()=>{window.clearTimeout(h),o(!0)},p=()=>{h=window.setTimeout(()=>o(!1),n.scrollHideDelay)};return c.addEventListener("pointerenter",f),c.addEventListener("pointerleave",p),()=>{window.clearTimeout(h),c.removeEventListener("pointerenter",f),c.removeEventListener("pointerleave",p)}}},[n.scrollArea,n.scrollHideDelay]),e.jsx(Qi,{present:r||i,children:e.jsx(l1,Z(E({"data-state":i?"visible":"hidden"},a),{ref:t}))})}),S4=b.forwardRef((s,t)=>{const h=s,{forceMount:r}=h,a=Ee(h,["forceMount"]),n=ka(sn,s.__scopeScrollArea),i=s.orientation==="horizontal",o=cu(()=>c("SCROLL_END"),100),[l,c]=w4("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return b.useEffect(()=>{if(l==="idle"){const f=window.setTimeout(()=>c("HIDE"),n.scrollHideDelay);return()=>window.clearTimeout(f)}},[l,n.scrollHideDelay,c]),b.useEffect(()=>{const f=n.viewport,p=i?"scrollLeft":"scrollTop";if(f){let v=f[p];const u=()=>{const C=f[p];v!==C&&(c("SCROLL"),o()),v=C};return f.addEventListener("scroll",u),()=>f.removeEventListener("scroll",u)}},[n.viewport,i,c,o]),e.jsx(Qi,{present:r||l!=="hidden",children:e.jsx(Vm,Z(E({"data-state":l==="hidden"?"hidden":"visible"},a),{ref:t,onPointerEnter:qt(s.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:qt(s.onPointerLeave,()=>c("POINTER_LEAVE"))}))})}),l1=b.forwardRef((s,t)=>{const r=ka(sn,s.__scopeScrollArea),h=s,{forceMount:a}=h,n=Ee(h,["forceMount"]),[i,o]=b.useState(!1),l=s.orientation==="horizontal",c=cu(()=>{if(r.viewport){const f=r.viewport.offsetWidth<r.viewport.scrollWidth,p=r.viewport.offsetHeight<r.viewport.scrollHeight;o(l?f:p)}},10);return ol(r.viewport,c),ol(r.content,c),e.jsx(Qi,{present:a||i,children:e.jsx(Vm,Z(E({"data-state":i?"visible":"hidden"},n),{ref:t}))})}),Vm=b.forwardRef((s,t)=>{const v=s,{orientation:r="vertical"}=v,a=Ee(v,["orientation"]),n=ka(sn,s.__scopeScrollArea),i=b.useRef(null),o=b.useRef(0),[l,c]=b.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),h=m1(l.viewport,l.content),f=Z(E({},a),{sizes:l,onSizesChange:c,hasThumb:h>0&&h<1,onThumbChange:u=>i.current=u,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:u=>o.current=u});function p(u,C){return I4(u,o.current,l,C)}return r==="horizontal"?e.jsx(k4,Z(E({},f),{ref:t,onThumbPositionChange:()=>{if(n.viewport&&i.current){const u=n.viewport.scrollLeft,C=bp(u,l,n.dir);i.current.style.transform=`translate3d(${C}px, 0, 0)`}},onWheelScroll:u=>{n.viewport&&(n.viewport.scrollLeft=u)},onDragScroll:u=>{n.viewport&&(n.viewport.scrollLeft=p(u,n.dir))}})):r==="vertical"?e.jsx(C4,Z(E({},f),{ref:t,onThumbPositionChange:()=>{if(n.viewport&&i.current){const u=n.viewport.scrollTop,C=bp(u,l);i.current.style.transform=`translate3d(0, ${C}px, 0)`}},onWheelScroll:u=>{n.viewport&&(n.viewport.scrollTop=u)},onDragScroll:u=>{n.viewport&&(n.viewport.scrollTop=p(u))}})):null}),k4=b.forwardRef((s,t)=>{const f=s,{sizes:r,onSizesChange:a}=f,n=Ee(f,["sizes","onSizesChange"]),i=ka(sn,s.__scopeScrollArea),[o,l]=b.useState(),c=b.useRef(null),h=Is(t,c,i.onScrollbarXChange);return b.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),e.jsx(d1,Z(E({"data-orientation":"horizontal"},n),{ref:h,sizes:r,style:E({bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":lu(r)+"px"},s.style),onThumbPointerDown:p=>s.onThumbPointerDown(p.x),onDragScroll:p=>s.onDragScroll(p.x),onWheelScroll:(p,v)=>{if(i.viewport){const u=i.viewport.scrollLeft+p.deltaX;s.onWheelScroll(u),p1(u,v)&&p.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&a({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Wd(o.paddingLeft),paddingEnd:Wd(o.paddingRight)}})}}))}),C4=b.forwardRef((s,t)=>{const f=s,{sizes:r,onSizesChange:a}=f,n=Ee(f,["sizes","onSizesChange"]),i=ka(sn,s.__scopeScrollArea),[o,l]=b.useState(),c=b.useRef(null),h=Is(t,c,i.onScrollbarYChange);return b.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),e.jsx(d1,Z(E({"data-orientation":"vertical"},n),{ref:h,sizes:r,style:E({top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":lu(r)+"px"},s.style),onThumbPointerDown:p=>s.onThumbPointerDown(p.y),onDragScroll:p=>s.onDragScroll(p.y),onWheelScroll:(p,v)=>{if(i.viewport){const u=i.viewport.scrollTop+p.deltaY;s.onWheelScroll(u),p1(u,v)&&p.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&a({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Wd(o.paddingTop),paddingEnd:Wd(o.paddingBottom)}})}}))}),[A4,c1]=a1(sn),d1=b.forwardRef((s,t)=>{const A=s,{__scopeScrollArea:r,sizes:a,hasThumb:n,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:h,onWheelScroll:f,onResize:p}=A,v=Ee(A,["__scopeScrollArea","sizes","hasThumb","onThumbChange","onThumbPointerUp","onThumbPointerDown","onThumbPositionChange","onDragScroll","onWheelScroll","onResize"]),u=ka(sn,r),[C,w]=b.useState(null),x=Is(t,L=>w(L)),j=b.useRef(null),_=b.useRef(""),T=u.viewport,U=a.content-a.viewport,R=oa(f),V=oa(c),$=cu(p,10);function S(L){if(j.current){const N=L.clientX-j.current.left,k=L.clientY-j.current.top;h({x:N,y:k})}}return b.useEffect(()=>{const L=N=>{const k=N.target;(C==null?void 0:C.contains(k))&&R(N,U)};return document.addEventListener("wheel",L,{passive:!1}),()=>document.removeEventListener("wheel",L,{passive:!1})},[T,C,U,R]),b.useEffect(V,[a,V]),ol(C,$),ol(u.content,$),e.jsx(A4,{scope:r,scrollbar:C,hasThumb:n,onThumbChange:oa(i),onThumbPointerUp:oa(o),onThumbPositionChange:V,onThumbPointerDown:oa(l),children:e.jsx(Qt.div,Z(E({},v),{ref:x,style:E({position:"absolute"},v.style),onPointerDown:qt(s.onPointerDown,L=>{L.button===0&&(L.target.setPointerCapture(L.pointerId),j.current=C.getBoundingClientRect(),_.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",u.viewport&&(u.viewport.style.scrollBehavior="auto"),S(L))}),onPointerMove:qt(s.onPointerMove,S),onPointerUp:qt(s.onPointerUp,L=>{const N=L.target;N.hasPointerCapture(L.pointerId)&&N.releasePointerCapture(L.pointerId),document.body.style.webkitUserSelect=_.current,u.viewport&&(u.viewport.style.scrollBehavior=""),j.current=null})}))})}),$d="ScrollAreaThumb",u1=b.forwardRef((s,t)=>{const i=s,{forceMount:r}=i,a=Ee(i,["forceMount"]),n=c1($d,s.__scopeScrollArea);return e.jsx(Qi,{present:r||n.hasThumb,children:e.jsx(P4,E({ref:t},a))})}),P4=b.forwardRef((s,t)=>{const p=s,{__scopeScrollArea:r,style:a}=p,n=Ee(p,["__scopeScrollArea","style"]),i=ka($d,r),o=c1($d,r),{onThumbPositionChange:l}=o,c=Is(t,v=>o.onThumbChange(v)),h=b.useRef(void 0),f=cu(()=>{h.current&&(h.current(),h.current=void 0)},100);return b.useEffect(()=>{const v=i.viewport;if(v){const u=()=>{if(f(),!h.current){const C=L4(v,l);h.current=C,l()}};return l(),v.addEventListener("scroll",u),()=>v.removeEventListener("scroll",u)}},[i.viewport,f,l]),e.jsx(Qt.div,Z(E({"data-state":o.hasThumb?"visible":"hidden"},n),{ref:c,style:E({width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)"},a),onPointerDownCapture:qt(s.onPointerDownCapture,v=>{const C=v.target.getBoundingClientRect(),w=v.clientX-C.left,x=v.clientY-C.top;o.onThumbPointerDown({x:w,y:x})}),onPointerUp:qt(s.onPointerUp,o.onThumbPointerUp)}))});u1.displayName=$d;var Ym="ScrollAreaCorner",h1=b.forwardRef((s,t)=>{const r=ka(Ym,s.__scopeScrollArea),a=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&a?e.jsx(_4,Z(E({},s),{ref:t})):null});h1.displayName=Ym;var _4=b.forwardRef((s,t)=>{const f=s,{__scopeScrollArea:r}=f,a=Ee(f,["__scopeScrollArea"]),n=ka(Ym,r),[i,o]=b.useState(0),[l,c]=b.useState(0),h=!!(i&&l);return ol(n.scrollbarX,()=>{var v;const p=((v=n.scrollbarX)==null?void 0:v.offsetHeight)||0;n.onCornerHeightChange(p),c(p)}),ol(n.scrollbarY,()=>{var v;const p=((v=n.scrollbarY)==null?void 0:v.offsetWidth)||0;n.onCornerWidthChange(p),o(p)}),h?e.jsx(Qt.div,Z(E({},a),{ref:t,style:E({width:i,height:l,position:"absolute",right:n.dir==="ltr"?0:void 0,left:n.dir==="rtl"?0:void 0,bottom:0},s.style)})):null});function Wd(s){return s?parseInt(s,10):0}function m1(s,t){const r=s/t;return isNaN(r)?0:r}function lu(s){const t=m1(s.viewport,s.content),r=s.scrollbar.paddingStart+s.scrollbar.paddingEnd,a=(s.scrollbar.size-r)*t;return Math.max(a,18)}function I4(s,t,r,a="ltr"){const n=lu(r),i=n/2,o=t||i,l=n-o,c=r.scrollbar.paddingStart+o,h=r.scrollbar.size-r.scrollbar.paddingEnd-l,f=r.content-r.viewport,p=a==="ltr"?[0,f]:[f*-1,0];return f1([c,h],p)(s)}function bp(s,t,r="ltr"){const a=lu(t),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-n,o=t.content-t.viewport,l=i-a,c=r==="ltr"?[0,o]:[o*-1,0],h=Zh(s,c);return f1([0,o],[0,l])(h)}function f1(s,t){return r=>{if(s[0]===s[1]||t[0]===t[1])return t[0];const a=(t[1]-t[0])/(s[1]-s[0]);return t[0]+a*(r-s[0])}}function p1(s,t){return s>0&&s<t}var L4=(s,t=()=>{})=>{let r={left:s.scrollLeft,top:s.scrollTop},a=0;return function n(){const i={left:s.scrollLeft,top:s.scrollTop},o=r.left!==i.left,l=r.top!==i.top;(o||l)&&t(),r=i,a=window.requestAnimationFrame(n)}(),()=>window.cancelAnimationFrame(a)};function cu(s,t){const r=oa(s),a=b.useRef(0);return b.useEffect(()=>()=>window.clearTimeout(a.current),[]),b.useCallback(()=>{window.clearTimeout(a.current),a.current=window.setTimeout(r,t)},[r,t])}function ol(s,t){const r=oa(t);ca(()=>{let a=0;if(s){const n=new ResizeObserver(()=>{cancelAnimationFrame(a),a=window.requestAnimationFrame(r)});return n.observe(s),()=>{window.cancelAnimationFrame(a),n.unobserve(s)}}},[s,r])}var g1=n1,T4=o1,D4=h1;const Gm=b.forwardRef((n,a)=>{var i=n,{className:s,children:t}=i,r=Ee(i,["className","children"]);return e.jsxs(g1,Z(E({ref:a,className:Ce("relative overflow-hidden",s)},r),{children:[e.jsx(T4,{className:"h-full w-full rounded-[inherit]",children:t}),e.jsx(x1,{}),e.jsx(D4,{})]}))});Gm.displayName=g1.displayName;const x1=b.forwardRef((n,a)=>{var i=n,{className:s,orientation:t="vertical"}=i,r=Ee(i,["className","orientation"]);return e.jsx(Hm,Z(E({ref:a,orientation:t,className:Ce("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s)},r),{children:e.jsx(u1,{className:"relative flex-1 rounded-full bg-border"})}))});x1.displayName=Hm.displayName;function M4({isOpen:s,onClose:t,onSelect:r,mediaUrl:a,nonce:n}){const[i,o]=b.useState([]),{data:l=[],isLoading:c}=rl({queryKey:["wp-media"],queryFn:()=>he(this,null,function*(){const p=yield fetch(`${a}?per_page=100`,{headers:{"X-WP-Nonce":n}});if(!p.ok)throw new Error("Failed to fetch media library");return p.json()}),enabled:s}),h=p=>{o(v=>v.some(u=>u.id===p.id)?v.filter(u=>u.id!==p.id):[...v,p])},f=()=>{r(i),t()};return b.useEffect(()=>{s||o([])},[s]),e.jsx(Bs,{open:s,onOpenChange:t,children:e.jsxs(Es,{className:"max-w-4xl h-[80vh]",children:[e.jsx(qr,{children:e.jsx(rr,{children:"WordPress Media Library"})}),e.jsx(Gm,{className:"h-full",children:c?e.jsx("p",{children:"Loading media..."}):e.jsx("div",{className:"grid grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-4 p-4",children:l.map(p=>{var u,C,w;const v=i.some(x=>x.id===p.id);return e.jsxs("div",{className:"relative aspect-square cursor-pointer group",onClick:()=>h(p),children:[e.jsx("img",{src:((w=(C=(u=p.media_details)==null?void 0:u.sizes)==null?void 0:C.thumbnail)==null?void 0:w.source_url)||p.source_url,alt:p.alt_text,className:"w-full h-full object-cover rounded-md transition-transform group-hover:scale-105"}),v&&e.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:e.jsx(ja,{className:"h-8 w-8 text-white"})})]},p.id)})})}),e.jsxs(Vn,{children:[e.jsx(de,{variant:"ghost",onClick:t,className:"hover-shimmer",children:"Cancel"}),e.jsxs(de,{onClick:f,disabled:i.length===0,className:"hover-shimmer",children:["Select ",i.length>0?`(${i.length})`:""]})]})]})})}const wp={name:"",client:"",projectManager:"",artists:[],brief:"",externalLinks:[],startDate:"",endDate:"",priority:"medium",status:"preview",media:[],videoUrl:"",isArchived:!1},jp=[{value:"google-drive",label:"Google Drive"},{value:"google-sheets",label:"Google Sheets"},{value:"google-maps",label:"Google Maps"},{value:"dropbox",label:"Dropbox"},{value:"filestage",label:"Filestage"},{value:"other",label:"Other"}];function E4({onClose:s,onSubmit:t,project:r,isLoggedIn:a}){const{toast:n}=da(),i=d4(),[o,l]=b.useState(wp),[c,h]=b.useState(!1),f=!i||typeof window!="undefined"&&"pulse2"in window,p=typeof window!="undefined"&&"pulse2"in window?window.pulse2:{mediaUrl:"",nonce:""};b.useEffect(()=>{l(r?Z(E({},r),{videoUrl:r.videoUrl||""}):wp)},[r]);const v=A=>{const{name:L,value:N}=A.target;l(k=>Z(E({},k),{[L]:N}))},u=(A,L)=>{l(N=>Z(E({},N),{[A]:L}))},C=A=>he(this,null,function*(){const L=Array.from(A).map(N=>he(this,null,function*(){if(i)return{id:`${N.name}-${Date.now()}`,filename:N.name,url:URL.createObjectURL(N),type:"Final Render",uploadedAt:new Date().toISOString()};{const k=new FormData;k.append("file",N);const D={};p.nonce&&(D["X-WP-Nonce"]=p.nonce);const I=typeof window!="undefined"&&localStorage.getItem("jwtToken")||"";I&&(D.Authorization=`Bearer ${I}`);const H=yield fetch(p.mediaUrl,{method:"POST",headers:D,body:k});if(!H.ok)throw yield H.text(),new Error("Failed to upload media");const se=yield H.json();return{id:se.id.toString(),filename:se.title.rendered,url:se.source_url,type:"Final Render",uploadedAt:se.date}}}));try{const N=yield Promise.all(L),k=new Set(o.media.map(H=>H.filename)),D=new Set(o.media.map(H=>H.url)),I=N.filter(H=>!k.has(H.filename)&&!D.has(H.url));if(I.length<N.length){const H=N.length-I.length;n({title:"Some files were skipped",description:`${H} duplicate file(s) were not added.`,variant:"default"})}l(H=>Z(E({},H),{media:[...H.media,...I]})),I.length>0&&n({title:"Media uploaded successfully"})}catch(N){n({title:"Error uploading media",description:N.message,variant:"destructive"})}}),w=A=>{l(L=>Z(E({},L),{media:L.media.filter(N=>N.id!==A)}))},x=(A,L)=>{l(N=>Z(E({},N),{media:N.media.map(k=>k.id===A?Z(E({},k),{type:L}):k)}))},j=A=>{const L=A.map(I=>{const H=I.source_url.split("/").pop()||I.alt_text||`media_${I.id}`;return{id:I.id.toString(),filename:H,url:I.source_url,type:"Final Render",uploadedAt:new Date().toISOString()}}),N=new Set(o.media.map(I=>I.filename)),k=new Set(o.media.map(I=>I.url)),D=L.filter(I=>!N.has(I.filename)&&!k.has(I.url));if(D.length<L.length){const I=L.length-D.length;n({title:"Some files were skipped",description:`${I} duplicate file(s) were not added.`,variant:"default"})}l(I=>Z(E({},I),{media:[...I.media,...D]})),D.length>0&&n({title:"Media added successfully"})},_=A=>{A.preventDefault();const L=o.externalLinks.filter(k=>k.url.trim()!==""&&!ch(k.url));if(L.length>0){n({title:"Invalid URLs",description:`Please fix ${L.length} invalid URL${L.length>1?"s":""} before submitting.`,variant:"destructive"});return}if(o.videoUrl&&!ch(o.videoUrl)){n({title:"Invalid Video URL",description:"Please enter a valid video URL or leave it empty.",variant:"destructive"});return}const N=Z(E({},o),{artists:o.artists.filter(k=>k.name.trim()!=="")});t(N),s()},T=()=>{l(A=>Z(E({},A),{artists:[...A.artists,{id:`new-${Date.now()}`,name:""}]}))},U=A=>{l(L=>Z(E({},L),{artists:L.artists.filter(N=>N.id!==A)}))},R=(A,L)=>{l(N=>Z(E({},N),{artists:N.artists.map(k=>k.id===A?Z(E({},k),{name:L}):k)}))},V=()=>{l(A=>Z(E({},A),{externalLinks:[...A.externalLinks,{id:`new-${Date.now()}`,type:"other",name:"",url:""}]}))},$=A=>{l(L=>Z(E({},L),{externalLinks:L.externalLinks.filter(N=>N.id!==A)}))},S=(A,L,N)=>{l(k=>Z(E({},k),{externalLinks:k.externalLinks.map(D=>{if(D.id===A){const I=Z(E({},D),{[L]:N});if(L==="type"&&N!=="other"){const H=jp.find(se=>se.value===N);I.name=H?H.label:""}return L==="url"&&typeof N=="string"&&N.trim()!==""&&(ch(N)||n({title:"Invalid URL",description:"Please enter a valid URL (e.g., https://example.com)",variant:"destructive"})),I}return D})}))};return a?e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[e.jsxs("form",{onSubmit:_,className:"space-y-6 glass-card p-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:r?"Edit Project":"Create New Project"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-7 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(kt,{htmlFor:"name",children:"Project Name"}),e.jsx(It,{id:"name",name:"name",className:"input-glass cyrus-ui",value:o.name,onChange:v})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(kt,{htmlFor:"client",children:"Client"}),e.jsx(It,{id:"client",name:"client",className:"input-glass cyrus-ui",value:o.client,onChange:v})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(kt,{htmlFor:"projectManager",children:"Project Manager"}),e.jsx(It,{id:"projectManager",name:"projectManager",className:"input-glass cyrus-ui",value:o.projectManager,onChange:v})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(kt,{htmlFor:"priority",children:"Priority"}),e.jsxs(Ss,{name:"priority",value:o.priority,onValueChange:A=>u("priority",A),children:[e.jsx(ys,{className:"input-glass cyrus-ui",children:e.jsx(ks,{})}),e.jsxs(bs,{children:[e.jsx(at,{value:"high",children:"High"}),e.jsx(at,{value:"medium",children:"Medium"}),e.jsx(at,{value:"low",children:"Low"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(kt,{htmlFor:"startDate",children:"Start Date"}),e.jsx(It,{id:"startDate",name:"startDate",type:"date",className:"input-glass cyrus-ui",value:o.startDate,onChange:v})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(kt,{htmlFor:"endDate",children:"End Date"}),e.jsx(It,{id:"endDate",name:"endDate",type:"date",className:"input-glass cyrus-ui",value:o.endDate,onChange:v})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(kt,{htmlFor:"videoUrl",children:"Video URL"}),e.jsx(It,{id:"videoUrl",name:"videoUrl",className:"input-glass cyrus-ui",value:o.videoUrl,onChange:v})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(kt,{children:"Artists"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:o.artists.map((A,L)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(It,{value:A.name,onChange:N=>R(A.id,N.target.value),placeholder:`Artist ${L+1}`,className:"input-glass cyrus-ui px-2 py-1 w-auto min-w-[60px] max-w-[180px]",style:{width:`${Math.max(A.name.length*10+40,80)}px`}}),e.jsx(de,{variant:"ghost",size:"icon",onClick:()=>U(A.id),className:"text-destructive hover-shimmer",children:e.jsx(Zs,{className:"h-4 w-4"})})]},A.id))}),e.jsxs(de,{type:"button",variant:"outline",onClick:T,className:"hover-shimmer",children:[e.jsx(ws,{className:"mr-2 h-4 w-4"})," Add Artist"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(kt,{htmlFor:"brief",children:"Brief"}),e.jsx(br,{id:"brief",name:"brief",className:"input-glass cyrus-ui h-32",value:o.brief,onChange:v})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(kt,{children:"External Links"}),e.jsx("div",{className:"space-y-3",children:o.externalLinks.map(A=>e.jsxs("div",{className:"grid grid-cols-[160px_150px_1fr_auto] gap-3 items-center p-2",children:[e.jsxs(Ss,{value:A.type,onValueChange:L=>S(A.id,"type",L),children:[e.jsx(ys,{className:"input-glass cyrus-ui hover-shimmer",children:e.jsx(ks,{})}),e.jsx(bs,{children:jp.map(L=>e.jsx(at,{value:L.value,children:L.label},L.value))})]}),e.jsx(It,{value:A.name,onChange:L=>S(A.id,"name",L.target.value),placeholder:"Name",className:"input-glass cyrus-ui w-[150px]",disabled:A.type!=="other"}),e.jsx(It,{value:A.url,onChange:L=>S(A.id,"url",L.target.value),placeholder:"URL",className:"input-glass cyrus-ui"}),e.jsx(de,{variant:"ghost",size:"icon",onClick:()=>$(A.id),className:"text-destructive hover-shimmer",children:e.jsx(Zs,{className:"h-4 w-4"})})]},A.id))}),e.jsxs(de,{type:"button",variant:"outline",onClick:V,className:"hover-shimmer",children:[e.jsx(ws,{className:"mr-2 h-4 w-4"})," Add Link"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(kt,{children:"Project Media"}),e.jsx(b4,{onMediaAdd:C,onMediaRemove:w,media:o.media,onShowMediaLibrary:()=>h(!0),showLibraryButton:f,onMediaCategoryChange:x})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-6",children:[e.jsx(de,{type:"button",variant:"ghost",onClick:s,className:"hover-shimmer",children:"Cancel"}),e.jsx(de,{type:"submit",className:"button-primary-enhanced hover-shimmer cyrus-ui",children:r?"Update Project":"Create Project"})]})]}),c&&e.jsx(M4,{isOpen:c,onClose:()=>h(!1),onSelect:j,mediaUrl:p.mediaUrl,nonce:p.nonce})]}):e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("p",{children:"You must be logged in to create or edit a project."}),e.jsx(de,{onClick:s,className:"mt-4 hover-shimmer",children:"Go Back"})]})}const Xe=b.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Ee(n,["className"]);return e.jsx("div",E({ref:r,className:Ce("rounded-lg border text-card-foreground shadow-sm",s)},t))});Xe.displayName="Card";const Dt=b.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Ee(n,["className"]);return e.jsx("div",E({ref:r,className:Ce("flex flex-col space-y-1.5 p-6",s)},t))});Dt.displayName="CardHeader";const zt=b.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Ee(n,["className"]);return e.jsx("h3",E({ref:r,className:Ce("text-2xl font-semibold leading-none tracking-tight",s)},t))});zt.displayName="CardTitle";const R4=b.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Ee(n,["className"]);return e.jsx("p",E({ref:r,className:Ce("text-sm text-muted-foreground",s)},t))});R4.displayName="CardDescription";const Ze=b.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Ee(n,["className"]);return e.jsx("div",E({ref:r,className:Ce("p-6 pt-0",s)},t))});Ze.displayName="CardContent";const O4=b.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Ee(n,["className"]);return e.jsx("div",E({ref:r,className:Ce("flex items-center p-6 pt-0",s)},t))});O4.displayName="CardFooter";const xd={project_created:{icon:Cs,color:"bg-blue-500",label:"Project"},project_updated:{icon:Cs,color:"bg-blue-400",label:"Project Update"},moodboard_created:{icon:yr,color:"bg-purple-500",label:"Moodboard"},moodboard_updated:{icon:yr,color:"bg-purple-400",label:"Moodboard Update"},whiteboard_created:{icon:Dr,color:"bg-green-500",label:"Whiteboard"},whiteboard_updated:{icon:Dr,color:"bg-green-400",label:"Whiteboard Update"},workflow_created:{icon:Na,color:"bg-orange-500",label:"Workflow"},workflow_updated:{icon:Na,color:"bg-orange-400",label:"Workflow Update"},comment_added:{icon:Tr,color:"bg-yellow-500",label:"Comment"},pin_added:{icon:Ua,color:"bg-red-500",label:"Pin"},timeline_updated:{icon:ns,color:"bg-indigo-500",label:"Timeline"},whiteboard_pin_added:{icon:Ua,color:"bg-red-500",label:"Pin Added"},whiteboard_pin_resolved:{icon:Ua,color:"bg-green-500",label:"Pin Resolved"},workflow_stage_completed:{icon:Na,color:"bg-orange-300",label:"Stage Completed"},timeline_milestone_reached:{icon:ns,color:"bg-indigo-300",label:"Milestone Reached"}};function F4({projects:s=[],selectedDate:t,onDateSelect:r,onProjectEdit:a,isLoggedIn:n=!0,onProjectClick:i,onActivityClick:o}){const[l,c]=b.useState(new Date),[h,f]=b.useState(null),[p,v]=b.useState([]),[u,C]=b.useState([]),w=b.useMemo(()=>{const N={};return s.forEach(k=>{if(k.startDate){const D=k.startDate.split("T")[0];N[D]||(N[D]=[]),N[D].push(Z(E({},k),{_displayType:"start"}))}if(k.endDate&&k.endDate!==k.startDate){const D=k.endDate.split("T")[0];N[D]||(N[D]=[]),N[D].push(Z(E({},k),{_displayType:"end"}))}}),N},[s]);b.useEffect(()=>{const N=Ms.subscribe(k=>{if(h){const D=k.filter(I=>I.timestamp?new Date(I.timestamp).toISOString().split("T")[0]===h:!1);v(D)}});if(h){const D=Ms.getActivities().filter(H=>H.timestamp?new Date(H.timestamp).toISOString().split("T")[0]===h:!1);v(D);const I=w[h]||[];C(I)}return N},[h,w]);const x=()=>{c(new Date(l.getFullYear(),l.getMonth()-1,1))},j=()=>{c(new Date(l.getFullYear(),l.getMonth()+1,1))},_=(N,k)=>new Date(N,k+1,0).getDate(),T=(N,k)=>new Date(N,k,1).getDay(),U=N=>N.toISOString().split("T")[0],R=b.useMemo(()=>{const N={};return Ms.getActivities().forEach(k=>{if(!k.timestamp)return;const D=k.timestamp.split("T")[0];N[D]||(N[D]=[]),N[D].push(k)}),N},[]),V=b.useMemo(()=>{const N=l.getFullYear(),k=l.getMonth(),D=_(N,k),I=T(N,k),H=[];for(let se=0;se<I;se++)H.push(null);for(let se=1;se<=D;se++){const ce=new Date(N,k,se),le=U(ce),ne=R[le]||[],fe=w[le]||[],Se=U(new Date)===le,M=h===le;H.push({day:se,date:ce,dateKey:le,activities:ne,projects:fe,isToday:Se,isSelected:M,activityCount:ne.length,projectCount:fe.length})}return H},[l,R,h]),$=["January","February","March","April","May","June","July","August","September","October","November","December"],S=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],A=N=>{const k=xd[N];if(!k)return e.jsx(ec,{className:"h-4 w-4"});const D=k.icon;return e.jsx(D,{className:"h-4 w-4"})},L=N=>{const k=xd[N];return(k==null?void 0:k.color)||"bg-gray-500"};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(Xe,{className:"glass-card",children:[e.jsx(Dt,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(zt,{className:"flex items-center gap-2",children:[e.jsx(Cs,{className:"h-5 w-5"}),"Activity Calendar"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(de,{variant:"outline",size:"sm",onClick:x,className:"hover-shimmer cyrus-ui",children:e.jsx(vc,{className:"h-4 w-4"})}),e.jsxs("span",{className:"text-lg font-semibold min-w-[160px] text-center",children:[$[l.getMonth()]," ",l.getFullYear()]}),e.jsx(de,{variant:"outline",size:"sm",onClick:j,className:"hover-shimmer cyrus-ui",children:e.jsx(tn,{className:"h-4 w-4"})})]})]})}),e.jsx(Ze,{children:e.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[S.map(N=>e.jsx("div",{className:"h-10 flex items-center justify-center text-sm font-medium text-muted-foreground",children:N},N)),V.map((N,k)=>e.jsx("div",{className:Ce("h-20 border border-border/20 p-1 cursor-pointer transition-all hover:bg-muted/50 relative",(N==null?void 0:N.isToday)&&"bg-primary/10 border-primary/30",(N==null?void 0:N.isSelected)&&"bg-primary/20 border-primary",!N&&"cursor-default"),onClick:()=>N&&f(N.dateKey),children:N&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-sm font-medium",children:N.day}),N.projectCount>0&&e.jsxs("div",{className:"absolute top-6 left-1 right-1",children:[N.projects.slice(0,2).map((D,I)=>e.jsxs("div",{className:Ce("text-xs px-1 py-0.5 rounded mb-1 truncate",vp(D.status)),title:`${D.name} (${D._displayType==="start"?"Start":"End"})`,children:[D._displayType==="start"?"▶":"◀"," ",D.name.slice(0,8)]},I)),N.projectCount>2&&e.jsxs("div",{className:"text-xs text-primary font-medium",children:["+",N.projectCount-2," more"]})]}),N.activityCount>0&&e.jsx("div",{className:"absolute bottom-1 left-1 right-1",children:N.activityCount<=3?e.jsx("div",{className:"flex gap-1",children:N.activities.slice(0,3).map((D,I)=>e.jsx("div",{className:Ce("w-2 h-2 rounded-full flex-shrink-0",L(D.type))},I))}):e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"flex gap-1",children:N.activities.slice(0,2).map((D,I)=>e.jsx("div",{className:Ce("w-2 h-2 rounded-full flex-shrink-0",L(D.type))},I))}),e.jsxs("span",{className:"text-xs font-medium text-primary",children:["+",N.activityCount-2]})]})})]})},k))]})})]})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(Xe,{className:"glass-card h-full",children:[e.jsx(Dt,{children:e.jsxs(zt,{className:"flex items-center gap-2",children:[e.jsx(ec,{className:"h-5 w-5"}),h?`Activities for ${new Date(h).toLocaleDateString()}`:"Select a Date"]})}),e.jsx(Ze,{children:u.length>0||p.length>0?e.jsxs("div",{className:"space-y-4 max-h-[calc(100vh-350px)] overflow-y-auto pr-1",children:[u.length>0&&e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium mb-2 text-primary",children:"Projects"}),e.jsx("div",{className:"space-y-2",children:u.map((N,k)=>e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg border hover:bg-muted/50 transition-colors cursor-pointer",onClick:()=>i==null?void 0:i(N.id),children:[e.jsx("div",{className:Ce("p-2 rounded-full text-white",vp(N.status)),children:N._displayType==="start"?"▶":"◀"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-medium text-sm truncate",children:N.name}),e.jsx(nt,{variant:"secondary",className:"text-xs",children:N._displayType==="start"?"Start":"End"})]}),e.jsxs("p",{className:"text-xs text-muted-foreground mb-1",children:["Client: ",N.client]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(Cs,{className:"h-3 w-3"}),e.jsxs("span",{children:[N._displayType==="start"?"Starts":"Ends"," today"]}),e.jsx("span",{children:"•"}),e.jsx(nt,{variant:"outline",className:"text-xs",children:N.status})]})]})]},`${N.id}-${k}`))})]}),p.length>0&&e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium mb-2 text-primary",children:"Activities"}),e.jsx("div",{className:"space-y-2",children:p.map(N=>{var k;return e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg border hover:bg-muted/50 transition-colors cursor-pointer",onClick:()=>o==null?void 0:o(N),children:[e.jsx("div",{className:Ce("p-2 rounded-full text-white",L(N.type)),children:A(N.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-medium text-sm truncate",children:N.details.projectName||N.details.workspaceName||"Activity"}),e.jsx(nt,{variant:"secondary",className:"text-xs",children:((k=xd[N.type])==null?void 0:k.label)||N.type})]}),N.projectId&&e.jsxs("p",{className:"text-xs text-muted-foreground mb-1",children:["Project: ",N.details.projectName||N.projectId]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(Sa,{className:"h-3 w-3"}),e.jsx("span",{children:N.userName}),e.jsx("span",{children:"•"}),e.jsx("span",{children:N.timestamp?new Date(N.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"Unknown time"})]})]})]},N.id)})})]})]}):h?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(ec,{className:"h-8 w-8 mx-auto mb-2"}),e.jsx("p",{children:"No projects or activities on this date"}),e.jsx("p",{className:"text-xs mt-1",children:"Projects and activities will appear here"})]}):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Cs,{className:"h-8 w-8 mx-auto mb-2"}),e.jsx("p",{children:"Select a date to view projects and activities"}),e.jsx("p",{className:"text-xs mt-1",children:"Click on any day in the calendar"})]})})]})})]}),e.jsxs(Xe,{className:"glass-card mt-6",children:[e.jsx(Dt,{children:e.jsx(zt,{className:"text-sm",children:"Activity Types"})}),e.jsx(Ze,{children:e.jsx("div",{className:"flex flex-wrap gap-4",children:Object.entries(xd).map(([N,k])=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:Ce("p-1 rounded-full text-white",k.color),children:e.jsx(k.icon,{className:"h-3 w-3"})}),e.jsx("span",{className:"text-sm",children:k.label})]},N))})})]})]})}var v1={exports:{}},y1={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ll=b;function B4(s,t){return s===t&&(s!==0||1/s===1/t)||s!==s&&t!==t}var U4=typeof Object.is=="function"?Object.is:B4,q4=ll.useState,z4=ll.useEffect,$4=ll.useLayoutEffect,W4=ll.useDebugValue;function H4(s,t){var r=t(),a=q4({inst:{value:r,getSnapshot:t}}),n=a[0].inst,i=a[1];return $4(function(){n.value=r,n.getSnapshot=t,uh(n)&&i({inst:n})},[s,r,t]),z4(function(){return uh(n)&&i({inst:n}),s(function(){uh(n)&&i({inst:n})})},[s]),W4(r),r}function uh(s){var t=s.getSnapshot;s=s.value;try{var r=t();return!U4(s,r)}catch(a){return!0}}function V4(s,t){return t()}var Y4=typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"?V4:H4;y1.useSyncExternalStore=ll.useSyncExternalStore!==void 0?ll.useSyncExternalStore:Y4;v1.exports=y1;var G4=v1.exports;function J4(){return G4.useSyncExternalStore(K4,()=>!0,()=>!1)}function K4(){return()=>{}}var Jm="Avatar",[X4,Jk]=Sn(Jm),[Q4,b1]=X4(Jm),w1=b.forwardRef((s,t)=>{const o=s,{__scopeAvatar:r}=o,a=Ee(o,["__scopeAvatar"]),[n,i]=b.useState("idle");return e.jsx(Q4,{scope:r,imageLoadingStatus:n,onImageLoadingStatusChange:i,children:e.jsx(Qt.span,Z(E({},a),{ref:t}))})});w1.displayName=Jm;var j1="AvatarImage",N1=b.forwardRef((s,t)=>{const h=s,{__scopeAvatar:r,src:a,onLoadingStatusChange:n=()=>{}}=h,i=Ee(h,["__scopeAvatar","src","onLoadingStatusChange"]),o=b1(j1,r),l=Z4(a,i),c=oa(f=>{n(f),o.onImageLoadingStatusChange(f)});return ca(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?e.jsx(Qt.img,Z(E({},i),{ref:t,src:a})):null});N1.displayName=j1;var S1="AvatarFallback",k1=b.forwardRef((s,t)=>{const c=s,{__scopeAvatar:r,delayMs:a}=c,n=Ee(c,["__scopeAvatar","delayMs"]),i=b1(S1,r),[o,l]=b.useState(a===void 0);return b.useEffect(()=>{if(a!==void 0){const h=window.setTimeout(()=>l(!0),a);return()=>window.clearTimeout(h)}},[a]),o&&i.imageLoadingStatus!=="loaded"?e.jsx(Qt.span,Z(E({},n),{ref:t})):null});k1.displayName=S1;function Np(s,t){return s?t?(s.src!==t&&(s.src=t),s.complete&&s.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Z4(s,{referrerPolicy:t,crossOrigin:r}){const a=J4(),n=b.useRef(null),i=a?(n.current||(n.current=new window.Image),n.current):null,[o,l]=b.useState(()=>Np(i,s));return ca(()=>{l(Np(i,s))},[i,s]),ca(()=>{const c=p=>()=>{l(p)};if(!i)return;const h=c("loaded"),f=c("error");return i.addEventListener("load",h),i.addEventListener("error",f),t&&(i.referrerPolicy=t),typeof r=="string"&&(i.crossOrigin=r),()=>{i.removeEventListener("load",h),i.removeEventListener("error",f)}},[i,r,t]),o}var C1=w1,A1=N1,P1=k1;const du=b.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Ee(n,["className"]);return e.jsx(C1,E({ref:r,className:Ce("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s)},t))});du.displayName=C1.displayName;const Km=b.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Ee(n,["className"]);return e.jsx(A1,E({ref:r,className:Ce("aspect-square h-full w-full",s)},t))});Km.displayName=A1.displayName;const uu=b.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Ee(n,["className"]);return e.jsx(P1,E({ref:r,className:Ce("flex h-full w-full items-center justify-center rounded-full bg-muted",s)},t))});uu.displayName=P1.displayName;const e3=({projects:s,onEditProject:t,onStatusChange:r,onArchiveProject:a,onRestoreProject:n,onDeleteProject:i,isLoggedIn:o,onProjectClick:l})=>{const[c,h]=b.useState(new Set(["Active","This month","Next month"])),[f,p]=b.useState(null),v=b.useMemo(()=>{const j=new Date,_=j.getMonth(),T=j.getFullYear(),U={Active:[],"This month":[],"Next month":[],Future:[],Past:[]};return s.forEach(R=>{R.status!=="delivered"&&!R.isArchived&&U.Active.push(R);const V=R.endDate?new Date(R.endDate):null;if(!V){U.Future.find(A=>A.id===R.id)||U.Future.push(R);return}const $=V.getMonth(),S=V.getFullYear();S<T||S===T&&$<_?U.Past.find(A=>A.id===R.id)||U.Past.push(R):S===T&&$===_?U["This month"].find(A=>A.id===R.id)||U["This month"].push(R):S===T&&$===_+1?U["Next month"].find(A=>A.id===R.id)||U["Next month"].push(R):U.Future.find(A=>A.id===R.id)||U.Future.push(R)}),U},[s]),u=j=>{const _=new Set(c);_.has(j)?_.delete(j):_.add(j),h(_)},C=j=>{j.media.length>0&&p({media:j.media,index:0})},w=j=>he(void 0,null,function*(){try{const _=yield wt.createWorkspaceForProject(j.id,"moodboard")}catch(_){}}),x=j=>he(void 0,null,function*(){try{const _=yield wt.createWorkspaceForProject(j.id,"whiteboard")}catch(_){}});return e.jsxs("div",{className:"p-4 space-y-4",children:[Object.entries(v).map(([j,_])=>e.jsxs(Xe,{className:"glass-card shadow-md monday-group-card",children:[e.jsx("div",{className:"flex justify-between items-center px-6 py-3 bg-muted/50 cursor-pointer hover:bg-muted transition-colors monday-group-header",onClick:()=>u(j),children:e.jsxs("div",{className:"flex items-center gap-2",children:[c.has(j)?e.jsx(el,{className:"h-5 w-5 text-muted-foreground"}):e.jsx(tn,{className:"h-5 w-5 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold",children:j}),e.jsx(nt,{variant:"outline",className:"ml-2 bg-primary/10",children:_.length})]})}),c.has(j)&&_.length>0&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-muted bg-muted/30",children:[e.jsx("th",{className:"text-left py-1 px-4 pl-6 w-[16%] font-medium text-sm text-muted-foreground",children:"Project"}),e.jsx("th",{className:"text-left py-1 px-4 w-20 font-medium text-sm text-muted-foreground",children:"PM"}),e.jsx("th",{className:"text-center py-1 px-4 w-[12rem] font-medium text-sm text-muted-foreground",children:"Status"}),e.jsx("th",{className:"text-center py-1 px-4 font-medium text-sm text-muted-foreground",children:"Timeline"}),e.jsx("th",{className:"text-center py-1 px-4 w-20 font-medium text-sm text-muted-foreground",children:"Images"}),e.jsx("th",{className:"text-center py-1 px-4 w-24 font-medium text-sm text-muted-foreground",children:"Brief"}),e.jsx("th",{className:"text-center py-1 px-4 w-24 font-medium text-sm text-muted-foreground",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(yr,{className:"h-3 w-3"}),e.jsx("span",{children:"Moodboard"})]})}),e.jsx("th",{className:"text-center py-1 px-4 w-24 font-medium text-sm text-muted-foreground",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(Dr,{className:"h-3 w-3"}),e.jsx("span",{children:"Whiteboard"})]})}),e.jsx("th",{className:"py-1 px-4 w-12"})]})}),e.jsx("tbody",{children:_.map(T=>{var U;return e.jsxs("tr",{className:"border-b border-muted hover:bg-muted/20 transition-colors cursor-pointer",onClick:()=>l(T.id),children:[e.jsx("td",{className:"py-1 px-4 pl-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full flex-shrink-0 ${im(T.priority)}`}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-sm",children:T.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:T.client})]})]})}),e.jsx("td",{className:"py-1 px-4",children:e.jsx(Hi,{children:e.jsxs(di,{children:[e.jsx(ui,{asChild:!0,children:e.jsx(du,{className:"h-8 w-8",children:e.jsx(uu,{className:"bg-primary/10 text-primary",children:T.projectManager?T.projectManager.substring(0,2).toUpperCase():"NA"})})}),e.jsx(Nn,{children:e.jsx("p",{children:T.projectManager||"Not assigned"})})]})})}),e.jsx("td",{className:"py-1 px-4 text-center",onClick:R=>R.stopPropagation(),children:e.jsxs(Ss,{value:T.status,onValueChange:R=>r(T,R),children:[e.jsx(ys,{className:`w-full max-w-[190px] mx-auto py-1 px-3 text-xs font-medium hover-shimmer border-l-4 ${zd(T.status)}`,children:e.jsx(ks,{children:((U=wa.find(R=>R.value===T.status))==null?void 0:U.label)||T.status})}),e.jsx(bs,{children:wa.map(R=>e.jsx(at,{value:R.value,children:R.label},R.value))})]})}),e.jsx("td",{className:"py-1 px-4 pr-6",children:e.jsx("div",{className:"min-w-[300px]",children:e.jsx(Q0,{project:T,isCompact:!0})})}),e.jsx("td",{className:"py-1 px-4 text-center",children:T.media.length>0?e.jsx("div",{className:"w-12 h-12 mx-auto cursor-pointer",onClick:R=>{R.stopPropagation(),C(T)},children:e.jsx("img",{src:T.media[0].url,alt:T.media[0].filename,className:"w-full h-full object-cover rounded-md hover:scale-105 transition-transform"})}):e.jsx("span",{className:"text-xs text-muted-foreground",children:"None"})}),e.jsx("td",{className:"py-1 px-4 text-center",children:T.brief?e.jsx(Hi,{children:e.jsxs(di,{children:[e.jsx(ui,{asChild:!0,children:e.jsx(de,{variant:"ghost",size:"icon",className:"h-8 w-8 hover-shimmer",onClick:R=>R.stopPropagation(),children:e.jsx(Dd,{className:"h-4 w-4"})})}),e.jsx(Nn,{className:"max-w-sm",children:e.jsx("p",{children:T.brief})})]})}):e.jsx("span",{className:"text-xs text-muted-foreground",children:"None"})}),e.jsx("td",{className:"py-1 px-4 text-center",children:e.jsx(de,{variant:"ghost",size:"icon",className:"h-8 w-8 hover-shimmer",onClick:R=>{R.stopPropagation(),w(T)},children:e.jsx(yr,{className:"h-4 w-4 text-purple-500"})})}),e.jsx("td",{className:"py-1 px-4 text-center",children:e.jsx(de,{variant:"ghost",size:"icon",className:"h-8 w-8 hover-shimmer",onClick:R=>{R.stopPropagation(),x(T)},children:e.jsx(Dr,{className:"h-4 w-4 text-green-500"})})}),e.jsx("td",{className:"py-1 px-4 text-center",children:o&&e.jsxs(al,{children:[e.jsx(nl,{asChild:!0,children:e.jsx(de,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:R=>R.stopPropagation(),children:e.jsx(ac,{className:"h-4 w-4"})})}),e.jsxs(Ki,{align:"end",onClick:R=>R.stopPropagation(),children:[e.jsxs(ds,{onClick:()=>t(T),children:[e.jsx(nc,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Edit"})]}),T.isArchived?e.jsxs(ds,{onClick:()=>n(T),children:[e.jsx(Ch,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Restore"})]}):e.jsxs(ds,{onClick:()=>a(T),children:[e.jsx(Ah,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Archive"})]}),e.jsxs(ds,{onClick:()=>i(T),className:"text-red-500",children:[e.jsx($r,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Delete"})]})]})]})})]},T.id)})})]})}),c.has(j)&&_.length===0&&e.jsx("div",{className:"text-center p-8 text-muted-foreground",children:"No projects in this group."})]},j)),f&&e.jsx(zm,{media:f.media,initialIndex:f.index,onClose:()=>p(null)})]})},t3=s=>he(void 0,null,function*(){var i;const t=typeof window!="undefined"&&window.pulse2?window.pulse2:null,r={};t!=null&&t.nonce&&(r["X-WP-Nonce"]=t.nonce);let a=`${(t==null?void 0:t.apiUrl)||""}/activities?limit=${s.limit||50}`;s.projectId&&(a+=`&project_id=${s.projectId}`),s.userId&&(a+=`&user_id=${s.userId}`),(i=s.search)!=null&&i.trim()&&(a+=`&search=${encodeURIComponent(s.search.trim())}`),s.type&&s.type!=="all"&&(a+=`&type=${encodeURIComponent(s.type)}`);const n=yield fetch(a,{headers:r});if(!n.ok)throw new Error("Failed to fetch activities");return n.json()});function s3(s){const t=typeof window!="undefined"&&!!window.pulse2;return rl({queryKey:["activities",s],queryFn:()=>t3(s),enabled:t})}function _1({projectId:s,limit:t=20,onActivityClick:r,showFilters:a=!1,userId:n,isMainActivityTab:i=!1,showRefreshButton:o=!1,hideAllUsersFilter:l=!1}){const[c,h]=b.useState(""),[f,p]=b.useState("all"),[v,u]=b.useState("all"),[C,w]=b.useState("");b.useEffect(()=>{const X=setTimeout(()=>{w(c)},300);return()=>clearTimeout(X)},[c]);const[x,j]=b.useState(null),[_,T]=b.useState(""),[U,R]=b.useState(!1),[V,$]=b.useState(!1),[S,A]=b.useState([]),L=typeof window!="undefined"&&window.pulse2?window.pulse2:null,N=typeof window!="undefined"&&localStorage.getItem("jwtToken")||"",k=b.useCallback((X,Q={})=>{const W=E({},Q.headers||{});return N&&(W.Authorization=`Bearer ${N}`),L!=null&&L.nonce&&(W["X-WP-Nonce"]=L.nonce),fetch(X,Z(E({},Q),{headers:W}))},[N,L]);b.useEffect(()=>{L&&k(`${L.apiUrl}/settings`).then(X=>X.json()).then(X=>j(X)).catch(()=>j({}))},[L,k]),b.useMemo(()=>["activities",s,n,t,C,f],[s,n,t,C,f]);const{data:D=[],isLoading:I,error:H}=s3({projectId:s,userId:n,search:C,type:f,limit:t});b.useEffect(()=>{},[H]);const[se,ce]=b.useState([]);b.useEffect(()=>{if(L)return;const X=Ms.subscribe(W=>{let ve=W;n&&(ve=ve.filter(be=>be.userId===n));const Pe=ve.map(be=>{var Be,Fe,$e,Ke;return{id:be.id,type:be.type,title:be.title||be.type,description:be.title||be.type,userId:be.userId,userName:be.userName,projectId:be.projectId||"",projectName:((Be=be.metadata)==null?void 0:Be.projectName)||"",relatedId:((Fe=be.metadata)==null?void 0:Fe.imageId)||(($e=be.metadata)==null?void 0:$e.commentId)||((Ke=be.metadata)==null?void 0:Ke.pinId)||"",createdAt:be.timestamp}});ce(Pe)}),Q=Ms.getActivities().map(W=>{var ve,Pe,be,Be;return{id:W.id,type:W.type,title:W.title||W.type,description:W.title||W.type,userId:W.userId,userName:W.userName,projectId:W.projectId||"",projectName:((ve=W.metadata)==null?void 0:ve.projectName)||"",relatedId:((Pe=W.metadata)==null?void 0:Pe.imageId)||((be=W.metadata)==null?void 0:be.commentId)||((Be=W.metadata)==null?void 0:Be.pinId)||"",createdAt:W.timestamp}});return ce(Q),X},[n,L]);const le=L?D.map(X=>({id:X.id||X.post_id||X.uuid||`${X.type}-${X.date}`,type:X.type,title:X.title||X.type,description:X.description||X.title||X.type,userId:`${X.user_id||""}`,userName:X.user_name||"",projectId:X.project_id||"",projectName:X.project_name||"",relatedId:X.related_id||"",createdAt:X.date||X.created_at||X.timestamp})):se,ne=L?I:!1,fe=L?H:null,Se=b.useCallback(()=>{if(L){w(Q=>Q);return}const X=Ms.getActivities().map(Q=>{var W,ve,Pe,be;return{id:Q.id,type:Q.type,title:Q.title,description:Q.title,userId:Q.userId,userName:Q.userName,projectId:Q.projectId||"",projectName:((W=Q.metadata)==null?void 0:W.projectName)||"",relatedId:((ve=Q.metadata)==null?void 0:ve.imageId)||((Pe=Q.metadata)==null?void 0:Pe.commentId)||((be=Q.metadata)==null?void 0:be.pinId)||"",createdAt:Q.timestamp}});ce(X)},[L]),[M,B]=b.useState(1),[J,te]=b.useState(!0),[G,ae]=b.useState(!1);b.useEffect(()=>{te(le.length===t)},[le,t]);const ie=()=>he(this,null,function*(){if(!(!L||!J||G)){ae(!0);try{const X=M+1;let Q=`${L.apiUrl}/activities?limit=${t}&page=${X}`;s&&(Q+=`&project_id=${s}`),n&&(Q+=`&user_id=${n}`),C.trim()&&(Q+=`&search=${encodeURIComponent(C.trim())}`),f!=="all"&&(Q+=`&type=${encodeURIComponent(f)}`);const W=yield k(Q);if(!W.ok)throw new Error("Failed to fetch more activities");const ve=yield W.json();te(ve.length===t),B(X)}catch(X){}finally{ae(!1)}}}),ue=le.filter(X=>{if(v!=="all"){const Q=typeof window!="undefined"?localStorage.getItem("userId"):null;if(v==="me"&&X.userId!==Q||v==="others"&&X.userId===Q)return!1}return!0}),Ae=X=>{switch(X){case"note_added":case"note_edited":case"note_deleted":return e.jsx(Tr,{className:"h-4 w-4"});case"project_created":return e.jsx(ws,{className:"h-4 w-4"});case"status_changed":return e.jsx(Im,{className:"h-4 w-4"});case"member_added":case"member_removed":return e.jsx(Sa,{className:"h-4 w-4"});case"deadline_extended":case"deadline_shortened":return e.jsx(Cs,{className:"h-4 w-4"});default:return e.jsx(nc,{className:"h-4 w-4"})}},re=X=>{switch(X){case"project_created":return"bg-green-100 text-green-800";case"note_added":return"bg-blue-100 text-blue-800";case"note_edited":return"bg-yellow-100 text-yellow-800";case"note_deleted":return"bg-red-100 text-red-800";case"status_changed":return"bg-purple-100 text-purple-800";case"member_added":return"bg-indigo-100 text-indigo-800";case"member_removed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},je=(X,Q)=>{try{const W=JSON.parse(X);let ve="";return W.noteContentPreview?ve=W.noteContentPreview:W.projectName?ve=`Project: ${W.projectName}`:W.statusFrom&&W.statusTo?ve=`Status changed from ${W.statusFrom} to ${W.statusTo}`:ve=X,Q.projectName&&!ve.includes("Project:")&&(ve+=` • Project: ${Q.projectName}`),ve}catch(W){let ve=X;return Q.projectName&&!ve.includes("Project:")&&(ve+=` • Project: ${Q.projectName}`),ve}},Le=()=>he(this,null,function*(){var X;if(!(!_.trim()||!L)){R(!0);try{const Q=[];if(S.length>0){const ve=localStorage.getItem("userName")||"unknown",Pe=localStorage.getItem("userId")||"unknown";for(const be of S){const Be=new FormData,Fe=Date.now(),$e=be.name.split(".").pop(),Ke=`${ve}_${Pe}_${Fe}.${$e}`;Be.append("file",new File([be],Ke,{type:be.type})),Be.append("title",`Idea by ${ve}`),Be.append("alt_text",`Image shared by ${ve}`);const Qe=yield k(`${L.mediaUrl||typeof window!="undefined"&&((X=window.pulse2)==null?void 0:X.mediaUrl)||"/wp-json/wp/v2/media"}`,{method:"POST",body:Be});if(Qe.ok){const et=yield Qe.json();Q.push(et.id.toString())}}}(yield k(`${L.apiUrl}/notes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:_,project_id:s||"general",is_team_note:!0,type:s?"project_note":"general_idea",media_ids:Q})})).ok&&(T(""),A([]),$(!1),Se())}catch(Q){}finally{R(!1)}}});return ne?e.jsxs(Xe,{children:[e.jsx(Dt,{children:e.jsxs(zt,{className:"flex items-center gap-2",children:[e.jsx(To,{className:"h-5 w-5 animate-spin"}),"Activity Feed"]})}),e.jsx(Ze,{children:e.jsx("div",{className:"space-y-4",children:[1,2,3].map(X=>e.jsxs("div",{className:"flex items-center gap-3 p-4 border rounded-lg animate-pulse",children:[e.jsx("div",{className:"h-8 w-8 bg-muted rounded-full"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-1/3"}),e.jsx("div",{className:"h-3 bg-muted rounded w-1/2"})]})]},X))})})]}):fe?e.jsxs(Xe,{children:[e.jsx(Dt,{children:e.jsx(zt,{children:"Activity Feed"})}),e.jsx(Ze,{children:e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx("p",{children:"Failed to load activities"}),e.jsxs(de,{onClick:()=>Se(),variant:"outline",className:"mt-2",children:[e.jsx(To,{className:"h-4 w-4 mr-2"}),"Retry"]})]})})]}):e.jsxs(Xe,{children:[e.jsxs(Dt,{children:[e.jsxs(zt,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Activity Feed"}),e.jsxs("div",{className:"flex items-center gap-2",children:[o&&e.jsxs(de,{onClick:()=>Se(),variant:"outline",size:"sm",children:[e.jsx(To,{className:"h-4 w-4 mr-2"}),"Refresh"]}),e.jsxs(de,{onClick:()=>$(!V),variant:"outline",size:"sm",className:"rounded-full px-3",children:[e.jsx(ws,{className:"h-4 w-4 mr-2"})," ",s?"Add Note":"Share Idea"]}),e.jsx(de,{onClick:()=>Se(),variant:"outline",size:"sm",children:e.jsx(To,{className:"h-4 w-4"})})]})]}),V&&e.jsx("div",{className:"mt-4 p-4 border rounded-lg bg-muted/50",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 p-2 rounded-full bg-primary/10",children:e.jsx(Tr,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(br,{placeholder:s?"Add a project note... Use @ to mention people, add links, or attach images":"Share a general idea with the team... Use @ to mention people, add links, or attach images",value:_,onChange:X=>T(X.target.value),className:"min-h-[80px] resize-none",onKeyDown:X=>{X.key==="Enter"&&(X.metaKey||X.ctrlKey)&&Le()}}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:X=>{X.target.files&&A(Array.from(X.target.files))},className:"hidden",id:"image-upload"}),e.jsxs(de,{type:"button",variant:"outline",size:"sm",onClick:()=>{var X;return(X=document.getElementById("image-upload"))==null?void 0:X.click()},children:[e.jsx(Hy,{className:"h-4 w-4 mr-2"}),"Attach Images"]}),S.length>0&&e.jsxs("span",{className:"text-sm text-muted-foreground",children:[S.length," image(s) selected"]})]}),S.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:S.map((X,Q)=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:URL.createObjectURL(X),alt:`Selected ${Q+1}`,className:"w-16 h-16 object-cover rounded border"}),e.jsx(de,{size:"sm",variant:"destructive",className:"absolute -top-2 -right-2 h-6 w-6 rounded-full p-0",onClick:()=>{A(W=>W.filter((ve,Pe)=>Pe!==Q))},children:e.jsx(Zs,{className:"h-3 w-3"})})]},Q))}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx("span",{children:"Press Cmd/Ctrl + Enter to send"}),e.jsx("span",{children:"•"}),e.jsx("span",{children:"Use @ to mention people"}),e.jsx("span",{children:"•"}),e.jsx("span",{children:"Paste links to attach"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(de,{onClick:()=>$(!1),variant:"outline",size:"sm",children:"Cancel"}),e.jsxs(de,{onClick:Le,disabled:!_.trim()||U,size:"sm",children:[e.jsx(jn,{className:"h-4 w-4 mr-2"}),U?"Sending...":s?"Send Note":"Share Idea"]})]})]})]})]})}),a&&e.jsxs("div",{className:"flex items-center gap-4 mt-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(bn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(It,{placeholder:"Search activities...",value:c,onChange:X=>h(X.target.value),className:"pl-10"})]})}),e.jsxs(Ss,{value:f,onValueChange:p,children:[e.jsx(ys,{className:"w-48",children:e.jsx(ks,{placeholder:"Filter by type"})}),e.jsxs(bs,{children:[e.jsx(at,{value:"all",children:"All Activities"}),e.jsx(at,{value:"project_created",children:"Project Created"}),e.jsx(at,{value:"note_added",children:"Note Added"}),e.jsx(at,{value:"note_edited",children:"Note Edited"}),e.jsx(at,{value:"note_deleted",children:"Note Deleted"}),e.jsx(at,{value:"status_changed",children:"Status Changed"}),e.jsx(at,{value:"member_added",children:"Member Added"}),e.jsx(at,{value:"member_removed",children:"Member Removed"})]})]}),!l&&e.jsxs(Ss,{value:v,onValueChange:u,children:[e.jsx(ys,{className:"w-48",children:e.jsx(ks,{placeholder:"Filter by user"})}),e.jsxs(bs,{children:[e.jsx(at,{value:"all",children:"All Users"}),e.jsx(at,{value:"me",children:"My Activities"}),e.jsx(at,{value:"others",children:"Others' Activities"})]})]})]})]}),e.jsx(Ze,{children:e.jsxs("div",{className:"space-y-4",children:[ue.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Tr,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No activities found"})]}):ue.map(X=>e.jsxs("div",{className:`flex items-start gap-3 p-4 border rounded-lg transition-colors ${r?"hover:bg-muted/50 cursor-pointer":"hover:bg-muted/50"}`,onClick:()=>{r?r(X):x!=null&&x.app_url&&X.projectId&&(window.location.href=`${x.app_url}#project-${X.projectId}`)},children:[e.jsx("div",{className:"flex-shrink-0 p-2 rounded-full bg-muted",children:Ae(X.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-medium text-sm",children:X.userName}),e.jsx(nt,{className:re(X.type),children:X.title}),e.jsx("span",{className:"text-xs text-muted-foreground",children:ci(new Date(X.createdAt),{addSuffix:!0})})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:je(X.description,X)}),X.projectName&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Project: ",X.projectName]})]})]},X.id)),J&&e.jsx(de,{onClick:ie,disabled:G,className:"w-full mt-4",children:G?"Loading...":"Load More"})]})})]})}var hu="Switch",[r3,Kk]=Sn(hu),[a3,n3]=r3(hu),I1=b.forwardRef((s,t)=>{const T=s,{__scopeSwitch:r,name:a,checked:n,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:h,form:f}=T,p=Ee(T,["__scopeSwitch","name","checked","defaultChecked","required","disabled","value","onCheckedChange","form"]),[v,u]=b.useState(null),C=Is(t,U=>u(U)),w=b.useRef(!1),x=v?f||!!v.closest("form"):!0,[j,_]=Zo({prop:n,defaultProp:i!=null?i:!1,onChange:h,caller:hu});return e.jsxs(a3,{scope:r,checked:j,disabled:l,children:[e.jsx(Qt.button,Z(E({type:"button",role:"switch","aria-checked":j,"aria-required":o,"data-state":M1(j),"data-disabled":l?"":void 0,disabled:l,value:c},p),{ref:C,onClick:qt(s.onClick,U=>{_(R=>!R),x&&(w.current=U.isPropagationStopped(),w.current||U.stopPropagation())})})),x&&e.jsx(D1,{control:v,bubbles:!w.current,name:a,value:c,checked:j,required:o,disabled:l,form:f,style:{transform:"translateX(-100%)"}})]})});I1.displayName=hu;var L1="SwitchThumb",T1=b.forwardRef((s,t)=>{const i=s,{__scopeSwitch:r}=i,a=Ee(i,["__scopeSwitch"]),n=n3(L1,r);return e.jsx(Qt.span,Z(E({"data-state":M1(n.checked),"data-disabled":n.disabled?"":void 0},a),{ref:t}))});T1.displayName=L1;var i3="SwitchBubbleInput",D1=b.forwardRef((o,i)=>{var l=o,{__scopeSwitch:s,control:t,checked:r,bubbles:a=!0}=l,n=Ee(l,["__scopeSwitch","control","checked","bubbles"]);const c=b.useRef(null),h=Is(c,i),f=Um(r),p=Dg(t);return b.useEffect(()=>{const v=c.current;if(!v)return;const u=window.HTMLInputElement.prototype,w=Object.getOwnPropertyDescriptor(u,"checked").set;if(f!==r&&w){const x=new Event("click",{bubbles:a});w.call(v,r),v.dispatchEvent(x)}},[f,r,a]),e.jsx("input",Z(E({type:"checkbox","aria-hidden":!0,defaultChecked:r},n),{tabIndex:-1,ref:h,style:Z(E(E({},n.style),p),{position:"absolute",pointerEvents:"none",opacity:0,margin:0})}))});D1.displayName=i3;function M1(s){return s?"checked":"unchecked"}var E1=I1,o3=T1;const R1=b.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Ee(n,["className"]);return e.jsx(E1,Z(E({className:Ce("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s)},t),{ref:r,children:e.jsx(o3,{className:Ce("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}))});R1.displayName=E1.displayName;const Xm=()=>typeof window!="undefined"&&window.pulse2?window.pulse2:null,Qm=()=>typeof window!="undefined"&&localStorage.getItem("jwtToken")||"",O1=()=>he(void 0,null,function*(){const s=Xm();if(!s)throw new Error("API not available");const t=yield fetch(`${s.apiUrl}/token/refresh`,{method:"POST",headers:{Authorization:`Bearer ${Qm()}`}});if(!t.ok)throw new Error("Token refresh failed");const r=yield t.json();return localStorage.setItem("jwtToken",r.token),r.token}),l3=()=>he(void 0,null,function*(){const s=Qm();if(s)try{const t=s.split(".")[1];if(!t)return;const r=JSON.parse(atob(t));if(!r.exp)return;const a=r.exp*1e3,n=Date.now();a-n<5*60*1e3&&(yield O1())}catch(t){}}),Ta=(r,...a)=>he(void 0,[r,...a],function*(s,t={}){yield l3();const n=Xm();let i=Qm();const o=Z(E({},t.headers),{Authorization:`Bearer ${i}`});n!=null&&n.nonce&&(o["X-WP-Nonce"]=n.nonce);let l=yield fetch(s,Z(E({},t),{headers:o}));if(l.status===401)try{i=yield O1(),o.Authorization=`Bearer ${i}`,l=yield fetch(s,Z(E({},t),{headers:o}))}catch(c){typeof window!="undefined"&&(localStorage.removeItem("jwtToken"),localStorage.removeItem("userId"),localStorage.removeItem("userDisplayName"))}return l});function c3(){const{toast:s}=da(),t=bc(),r=Xm(),[a,n]=b.useState(()=>{if(typeof window!="undefined"){const S=localStorage.getItem("userId"),A=localStorage.getItem("userDisplayName"),L=localStorage.getItem("jwtToken");if(S&&A&&L)return{id:S,username:A,email:"",display_name:A,role:"subscriber",timezone:"UTC",notifications_enabled:"true",status:"active",created_at:new Date().toISOString(),last_active:new Date().toISOString()}}return null}),{data:i=[],isLoading:o}=rl({queryKey:["users"],queryFn:()=>he(this,null,function*(){if(!r)return[];const[S,A]=yield Promise.all([Ta(`${r.apiUrl}/users`),Ta(`${r.apiUrl}/presence`)]);if(!S.ok)throw new Error("Failed to fetch users");const L=yield S.json(),N=A.ok?yield A.json():[];return L.map(k=>{const D=N.find(I=>I.userId===k.id);return Z(E({},k),{isOnline:(D==null?void 0:D.isOnline)||!1,lastActivity:(D==null?void 0:D.lastActivity)||null})})}),enabled:!!r&&!!a}),{data:l=[],isLoading:c}=rl({queryKey:["invitations"],queryFn:()=>he(this,null,function*(){if(!r)return[];const S=yield Ta(`${r.apiUrl}/invitations`);if(!S.ok)throw new Error("Failed to fetch invitations");return S.json()}),enabled:!!r&&!!a}),h=Ba({mutationFn:S=>he(this,null,function*(){if(!r)throw new Error("API not available");const A=yield Ta(`${r.apiUrl}/users`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(S)});if(!A.ok){const L=yield A.json();throw new Error(L.message||"Failed to create user")}return A.json()}),onSuccess:S=>{t.invalidateQueries({queryKey:["users"]}),t.invalidateQueries({queryKey:["invitations"]}),s({title:"User created successfully",description:`User ${S.user.display_name} has been created.`}),S.credentials&&s({title:"User Credentials",description:`Username: ${S.credentials.username}
Password: ${S.credentials.password}

Please share these credentials securely with the user.`,duration:1e4})},onError:S=>{s({title:"Failed to create user",description:S instanceof Error?S.message:"An error occurred",variant:"destructive"})}}),f=Ba({mutationFn:L=>he(this,[L],function*({userId:S,updates:A}){if(!r)throw new Error("API not available");const N=yield Ta(`${r.apiUrl}/users/${S}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(A)});if(!N.ok){const k=yield N.json();throw new Error(k.message||"Failed to update user")}return N.json()}),onSuccess:S=>{t.invalidateQueries({queryKey:["users"]}),s({title:"User updated successfully",description:`User ${S.display_name} has been updated.`})},onError:S=>{s({title:"Failed to update user",description:S instanceof Error?S.message:"An error occurred",variant:"destructive"})}}),p=Ba({mutationFn:S=>he(this,null,function*(){if(!r)throw new Error("API not available");const A=yield Ta(`${r.apiUrl}/users/${S}`,{method:"DELETE"});if(!A.ok){const L=yield A.json();throw new Error(L.message||"Failed to delete user")}}),onSuccess:()=>{t.invalidateQueries({queryKey:["users"]}),s({title:"User deleted successfully",description:"The user has been removed from the system."})},onError:S=>{s({title:"Failed to delete user",description:S instanceof Error?S.message:"An error occurred",variant:"destructive"})}}),v=Ba({mutationFn:S=>he(this,null,function*(){if(!r)throw new Error("API not available");const A=x(),L=yield Ta(`${r.apiUrl}/invitations`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Z(E({},S),{invited_by:(A==null?void 0:A.id)||"",invited_by_name:(A==null?void 0:A.display_name)||"",status:"pending",expires_at:new Date(Date.now()+7*24*60*60*1e3).toISOString()}))});if(!L.ok){const N=yield L.json();throw new Error(N.message||"Failed to create invitation")}return L.json()}),onSuccess:S=>{t.invalidateQueries({queryKey:["invitations"]});const A=S.invitation||S;s({title:"Invitation sent",description:`Invitation has been sent to ${A.email}`})},onError:S=>{s({title:"Failed to send invitation",description:S instanceof Error?S.message:"An error occurred",variant:"destructive"})}}),u=Ba({mutationFn:L=>he(this,[L],function*({invitationId:S,updates:A}){if(!r)throw new Error("API not available");const N=yield Ta(`${r.apiUrl}/invitations/${S}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(A)});if(!N.ok){const k=yield N.json();throw new Error(k.message||"Failed to update invitation")}return N.json()}),onSuccess:()=>{t.invalidateQueries({queryKey:["invitations"]}),s({title:"Invitation updated",description:"The invitation has been updated successfully."})},onError:S=>{s({title:"Failed to update invitation",description:S instanceof Error?S.message:"An error occurred",variant:"destructive"})}}),C=Ba({mutationFn:S=>he(this,null,function*(){if(!r)throw new Error("API not available");const A=yield Ta(`${r.apiUrl}/invitations/${S}`,{method:"DELETE"});if(!A.ok){const L=yield A.json();throw new Error(L.message||"Failed to delete invitation")}}),onSuccess:()=>{t.invalidateQueries({queryKey:["invitations"]}),s({title:"Invitation cancelled",description:"The invitation has been cancelled."})},onError:S=>{s({title:"Failed to cancel invitation",description:S instanceof Error?S.message:"An error occurred",variant:"destructive"})}}),w=Ba({mutationFn:S=>he(this,null,function*(){if(!r)throw new Error("API not available");const A=yield Ta(`${r.apiUrl}/password-reset`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:S})});if(!A.ok){const L=yield A.json();throw new Error(L.message||"Failed to request password reset")}return A.json()}),onSuccess:()=>{s({title:"Password reset requested",description:"If an account exists with this email, a password reset link has been sent."})},onError:S=>{s({title:"Failed to request password reset",description:S instanceof Error?S.message:"An error occurred",variant:"destructive"})}}),x=b.useCallback(()=>a,[a]),j=b.useCallback(()=>he(this,null,function*(){if(!(!r||!a))try{yield Ta(`${r.apiUrl}/presence`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({timestamp:new Date().toISOString()})})}catch(S){}}),[r,a]);b.useEffect(()=>{a&&j()},[a,j]);const _=b.useCallback(S=>{if(!a)return!1;const A={administrator:["all"],editor:["edit_posts","create_users","invite_members"],author:["edit_posts","add_notes"],contributor:["add_notes"],subscriber:["view_projects"]},L=a.role,N=A[L]||[];return N.includes("all")||N.includes(S)},[a]),T=b.useCallback(()=>_("create_users"),[_]),U=b.useCallback(()=>_("invite_members"),[_]),R=b.useCallback(()=>_("edit_posts"),[_]),V=b.useCallback(()=>_("add_notes"),[_]),$=b.useCallback(S=>i.filter(A=>A.role===S),[i]);return{currentUser:a,users:i,invitations:l,loadingUsers:o,loadingInvitations:c,createUser:h.mutate,updateUser:f.mutate,deleteUser:p.mutate,createInvitation:v.mutate,updateInvitation:u.mutate,deleteInvitation:C.mutate,requestPasswordReset:w.mutate,isCreatingUser:h.isPending,isUpdatingUser:f.isPending,isDeletingUser:p.isPending,isCreatingInvitation:v.isPending,isUpdatingInvitation:u.isPending,isDeletingInvitation:C.isPending,isRequestingPasswordReset:w.isPending,hasPermission:_,canManageUsers:T,canInviteMembers:U,canEditProjects:R,canAddNotes:V,getUsersByRole:$,getCurrentUser:x}}var d3="Separator",Sp="horizontal",u3=["horizontal","vertical"],F1=b.forwardRef((s,t)=>{const c=s,{decorative:r,orientation:a=Sp}=c,n=Ee(c,["decorative","orientation"]),i=h3(a)?a:Sp,l=r?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return e.jsx(Qt.div,Z(E(E({"data-orientation":i},l),n),{ref:t}))});F1.displayName=d3;function h3(s){return u3.includes(s)}var B1=F1;const cc=b.forwardRef((i,n)=>{var o=i,{className:s,orientation:t="horizontal",decorative:r=!0}=o,a=Ee(o,["className","orientation","decorative"]);return e.jsx(B1,E({ref:n,decorative:r,orientation:t,className:Ce("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",s)},a))});cc.displayName=B1.displayName;function m3({currentUser:s,hasPermission:t,setIsEditProfileDialogOpen:r,setIsPasswordResetDialogOpen:a,getRoleColor:n}){var i,o;return e.jsxs(Xe,{className:"glass-card",children:[e.jsx(Dt,{children:e.jsxs(zt,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"My Profile"}),e.jsxs(de,{variant:"outline",size:"sm",onClick:()=>r(!0),disabled:!t("canEditUsers"),className:"glass-card hover:shadow-lg transition-all duration-300",children:[e.jsx(nc,{className:"h-4 w-4 mr-2"}),"Edit Profile"]})]})}),e.jsx(Ze,{children:e.jsxs("div",{className:"flex items-start gap-6",children:[e.jsxs(du,{className:"h-20 w-20",children:[e.jsx(Km,{src:s.avatar||void 0}),e.jsx(uu,{className:"text-lg",children:((i=s.displayName)==null?void 0:i.split(" ").map(l=>l[0]).join(""))||((o=s.username)==null?void 0:o.charAt(0).toUpperCase())||"U"})]}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold",children:s.displayName}),e.jsx("p",{className:"text-muted-foreground",children:s.email}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(nt,{className:n(s.role),children:s.role.replace("_"," ")}),e.jsx(nt,{variant:"outline",children:s.status})]})]}),s.bio&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-1",children:"Bio"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.bio})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Username:"}),e.jsx("p",{className:"text-muted-foreground",children:s.username})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Timezone:"}),e.jsx("p",{className:"text-muted-foreground",children:s.timezone})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Member since:"}),e.jsx("p",{className:"text-muted-foreground",children:s.createdAt&&!isNaN(new Date(s.createdAt).getTime())?ci(new Date(s.createdAt),{addSuffix:!0}):"Unknown"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Last active:"}),e.jsx("p",{className:"text-muted-foreground",children:s.lastActive&&!isNaN(new Date(s.lastActive).getTime())?ci(new Date(s.lastActive),{addSuffix:!0}):"Unknown"})]})]}),e.jsx(cc,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Password Management"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Request a password reset or change your password"})]}),e.jsxs(de,{variant:"outline",onClick:()=>a(!0),className:"glass-card hover:shadow-lg transition-all duration-300",children:[e.jsx(Pm,{className:"h-4 w-4 mr-2"}),"Reset Password"]})]})]})]})})]})}function f3({teamStats:s,users:t,loadingUsers:r,currentUser:a,hasPermission:n,handleDeleteUser:i,isDeletingUser:o,getRoleColor:l}){return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(Xe,{className:"glass-card",children:[e.jsx(Dt,{className:"pb-2",children:e.jsx(zt,{className:"text-sm font-medium",children:"Total Members"})}),e.jsx(Ze,{children:e.jsx("div",{className:"text-2xl font-bold",children:s.totalMembers})})]}),e.jsxs(Xe,{className:"glass-card",children:[e.jsx(Dt,{className:"pb-2",children:e.jsx(zt,{className:"text-sm font-medium",children:"Active Members"})}),e.jsx(Ze,{children:e.jsx("div",{className:"text-2xl font-bold",children:s.activeMembers})})]}),e.jsxs(Xe,{className:"glass-card",children:[e.jsx(Dt,{className:"pb-2",children:e.jsx(zt,{className:"text-sm font-medium",children:"Projects"})}),e.jsx(Ze,{children:e.jsx("div",{className:"text-2xl font-bold",children:s.projectsCount})})]}),e.jsxs(Xe,{className:"glass-card",children:[e.jsx(Dt,{className:"pb-2",children:e.jsx(zt,{className:"text-sm font-medium",children:"Avg Response Time"})}),e.jsx(Ze,{children:e.jsxs("div",{className:"text-2xl font-bold",children:[s.averageResponseTime,"h"]})})]})]}),e.jsxs(Xe,{className:"glass-card",children:[e.jsx(Dt,{children:e.jsxs(zt,{className:"flex items-center gap-2",children:[e.jsx(wr,{className:"h-5 w-5"}),"Team Members"]})}),e.jsx(Ze,{children:r?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(c=>e.jsxs("div",{className:"flex items-center gap-3 p-4 border rounded-lg animate-pulse",children:[e.jsx("div",{className:"h-10 w-10 bg-muted rounded-full"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-1/3"}),e.jsx("div",{className:"h-3 bg-muted rounded w-1/2"})]})]},c))}):e.jsxs("div",{className:"space-y-4",children:[t.map(c=>{var h,f;return e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(du,{children:[e.jsx(Km,{src:c.avatar||void 0}),e.jsx(uu,{children:((h=c.display_name)==null?void 0:h.split(" ").map(p=>p[0]).join(""))||((f=c.username)==null?void 0:f.charAt(0).toUpperCase())||"U"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:c.display_name}),e.jsx(nt,{className:l(c.role),children:c.role.replace("_"," ")}),e.jsx(nt,{variant:"outline",children:c.status})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:c.email}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Last active ",ci(new Date(c.last_active),{addSuffix:!0})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[n("canEditUsers")&&e.jsx(de,{variant:"outline",size:"sm",className:"hover-shimmer",children:e.jsx(hx,{className:"h-4 w-4"})}),n("canDeleteUsers")&&c.id!==a.id&&e.jsx(de,{variant:"outline",size:"sm",className:"hover-shimmer text-destructive",onClick:()=>i(c.id),disabled:o,children:e.jsx($r,{className:"h-4 w-4"})})]})]},c.id)}),t.length===0&&e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(wr,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No team members found"})]})]})})]})]})}var U1={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/(function(s,t){((r,a)=>{s.exports=a()})(ey,function r(){var a=typeof self!="undefined"?self:typeof window!="undefined"?window:a!==void 0?a:{},n,i=!a.document&&!!a.postMessage,o=a.IS_PAPA_WORKER||!1,l={},c=0,h={};function f(S){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(A){var L=R(A);L.chunkSize=parseInt(L.chunkSize),A.step||A.chunk||(L.chunkSize=null),this._handle=new w(L),(this._handle.streamer=this)._config=L}.call(this,S),this.parseChunk=function(A,L){var N=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<N){let D=this._config.newline;D||(k=this._config.quoteChar||'"',D=this._handle.guessLineEndings(A,k)),A=[...A.split(D).slice(N)].join(D)}this.isFirstChunk&&$(this._config.beforeFirstChunk)&&(k=this._config.beforeFirstChunk(A))!==void 0&&(A=k),this.isFirstChunk=!1,this._halted=!1;var N=this._partialLine+A,k=(this._partialLine="",this._handle.parse(N,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(A=k.meta.cursor,N=(this._finished||(this._partialLine=N.substring(A-this._baseIndex),this._baseIndex=A),k&&k.data&&(this._rowCount+=k.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),o)a.postMessage({results:k,workerId:h.WORKER_ID,finished:N});else if($(this._config.chunk)&&!L){if(this._config.chunk(k,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=k=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(k.data),this._completeResults.errors=this._completeResults.errors.concat(k.errors),this._completeResults.meta=k.meta),this._completed||!N||!$(this._config.complete)||k&&k.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),N||k&&k.meta.paused||this._nextChunk(),k}this._halted=!0},this._sendError=function(A){$(this._config.error)?this._config.error(A):o&&this._config.error&&a.postMessage({workerId:h.WORKER_ID,error:A,finished:!1})}}function p(S){var A;(S=S||{}).chunkSize||(S.chunkSize=h.RemoteChunkSize),f.call(this,S),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(L){this._input=L,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(A=new XMLHttpRequest,this._config.withCredentials&&(A.withCredentials=this._config.withCredentials),i||(A.onload=V(this._chunkLoaded,this),A.onerror=V(this._chunkError,this)),A.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var L,N=this._config.downloadRequestHeaders;for(L in N)A.setRequestHeader(L,N[L])}var k;this._config.chunkSize&&(k=this._start+this._config.chunkSize-1,A.setRequestHeader("Range","bytes="+this._start+"-"+k));try{A.send(this._config.downloadRequestBody)}catch(D){this._chunkError(D.message)}i&&A.status===0&&this._chunkError()}},this._chunkLoaded=function(){A.readyState===4&&(A.status<200||400<=A.status?this._chunkError():(this._start+=this._config.chunkSize||A.responseText.length,this._finished=!this._config.chunkSize||this._start>=(L=>(L=L.getResponseHeader("Content-Range"))!==null?parseInt(L.substring(L.lastIndexOf("/")+1)):-1)(A),this.parseChunk(A.responseText)))},this._chunkError=function(L){L=A.statusText||L,this._sendError(new Error(L))}}function v(S){(S=S||{}).chunkSize||(S.chunkSize=h.LocalChunkSize),f.call(this,S);var A,L,N=typeof FileReader!="undefined";this.stream=function(k){this._input=k,L=k.slice||k.webkitSlice||k.mozSlice,N?((A=new FileReader).onload=V(this._chunkLoaded,this),A.onerror=V(this._chunkError,this)):A=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var k=this._input,D=(this._config.chunkSize&&(D=Math.min(this._start+this._config.chunkSize,this._input.size),k=L.call(k,this._start,D)),A.readAsText(k,this._config.encoding));N||this._chunkLoaded({target:{result:D}})},this._chunkLoaded=function(k){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(k.target.result)},this._chunkError=function(){this._sendError(A.error)}}function u(S){var A;f.call(this,S=S||{}),this.stream=function(L){return A=L,this._nextChunk()},this._nextChunk=function(){var L,N;if(!this._finished)return L=this._config.chunkSize,A=L?(N=A.substring(0,L),A.substring(L)):(N=A,""),this._finished=!A,this.parseChunk(N)}}function C(S){f.call(this,S=S||{});var A=[],L=!0,N=!1;this.pause=function(){f.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){f.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(k){this._input=k,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){N&&A.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),A.length?this.parseChunk(A.shift()):L=!0},this._streamData=V(function(k){try{A.push(typeof k=="string"?k:k.toString(this._config.encoding)),L&&(L=!1,this._checkIsFinished(),this.parseChunk(A.shift()))}catch(D){this._streamError(D)}},this),this._streamError=V(function(k){this._streamCleanUp(),this._sendError(k)},this),this._streamEnd=V(function(){this._streamCleanUp(),N=!0,this._streamData("")},this),this._streamCleanUp=V(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function w(S){var A,L,N,k,D=Math.pow(2,53),I=-D,H=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,se=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,ce=this,le=0,ne=0,fe=!1,Se=!1,M=[],B={data:[],errors:[],meta:{}};function J(ie){return S.skipEmptyLines==="greedy"?ie.join("").trim()==="":ie.length===1&&ie[0].length===0}function te(){if(B&&N&&(ae("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+h.DefaultDelimiter+"'"),N=!1),S.skipEmptyLines&&(B.data=B.data.filter(function(re){return!J(re)})),G()){let re=function(je,Le){$(S.transformHeader)&&(je=S.transformHeader(je,Le)),M.push(je)};if(B)if(Array.isArray(B.data[0])){for(var ie=0;G()&&ie<B.data.length;ie++)B.data[ie].forEach(re);B.data.splice(0,1)}else B.data.forEach(re)}function ue(re,je){for(var Le=S.header?{}:[],X=0;X<re.length;X++){var Q=X,W=re[X],W=((ve,Pe)=>(be=>(S.dynamicTypingFunction&&S.dynamicTyping[be]===void 0&&(S.dynamicTyping[be]=S.dynamicTypingFunction(be)),(S.dynamicTyping[be]||S.dynamicTyping)===!0))(ve)?Pe==="true"||Pe==="TRUE"||Pe!=="false"&&Pe!=="FALSE"&&((be=>{if(H.test(be)&&(be=parseFloat(be),I<be&&be<D))return 1})(Pe)?parseFloat(Pe):se.test(Pe)?new Date(Pe):Pe===""?null:Pe):Pe)(Q=S.header?X>=M.length?"__parsed_extra":M[X]:Q,W=S.transform?S.transform(W,Q):W);Q==="__parsed_extra"?(Le[Q]=Le[Q]||[],Le[Q].push(W)):Le[Q]=W}return S.header&&(X>M.length?ae("FieldMismatch","TooManyFields","Too many fields: expected "+M.length+" fields but parsed "+X,ne+je):X<M.length&&ae("FieldMismatch","TooFewFields","Too few fields: expected "+M.length+" fields but parsed "+X,ne+je)),Le}var Ae;B&&(S.header||S.dynamicTyping||S.transform)&&(Ae=1,!B.data.length||Array.isArray(B.data[0])?(B.data=B.data.map(ue),Ae=B.data.length):B.data=ue(B.data,0),S.header&&B.meta&&(B.meta.fields=M),ne+=Ae)}function G(){return S.header&&M.length===0}function ae(ie,ue,Ae,re){ie={type:ie,code:ue,message:Ae},re!==void 0&&(ie.row=re),B.errors.push(ie)}$(S.step)&&(k=S.step,S.step=function(ie){B=ie,G()?te():(te(),B.data.length!==0&&(le+=ie.data.length,S.preview&&le>S.preview?L.abort():(B.data=B.data[0],k(B,ce))))}),this.parse=function(ie,ue,Ae){var re=S.quoteChar||'"',re=(S.newline||(S.newline=this.guessLineEndings(ie,re)),N=!1,S.delimiter?$(S.delimiter)&&(S.delimiter=S.delimiter(ie),B.meta.delimiter=S.delimiter):((re=((je,Le,X,Q,W)=>{var ve,Pe,be,Be;W=W||[",","	","|",";",h.RECORD_SEP,h.UNIT_SEP];for(var Fe=0;Fe<W.length;Fe++){for(var $e,Ke=W[Fe],Qe=0,et=0,Je=0,Re=(be=void 0,new j({comments:Q,delimiter:Ke,newline:Le,preview:10}).parse(je)),ft=0;ft<Re.data.length;ft++)X&&J(Re.data[ft])?Je++:($e=Re.data[ft].length,et+=$e,be===void 0?be=$e:0<$e&&(Qe+=Math.abs($e-be),be=$e));0<Re.data.length&&(et/=Re.data.length-Je),(Pe===void 0||Qe<=Pe)&&(Be===void 0||Be<et)&&1.99<et&&(Pe=Qe,ve=Ke,Be=et)}return{successful:!!(S.delimiter=ve),bestDelimiter:ve}})(ie,S.newline,S.skipEmptyLines,S.comments,S.delimitersToGuess)).successful?S.delimiter=re.bestDelimiter:(N=!0,S.delimiter=h.DefaultDelimiter),B.meta.delimiter=S.delimiter),R(S));return S.preview&&S.header&&re.preview++,A=ie,L=new j(re),B=L.parse(A,ue,Ae),te(),fe?{meta:{paused:!0}}:B||{meta:{paused:!1}}},this.paused=function(){return fe},this.pause=function(){fe=!0,L.abort(),A=$(S.chunk)?"":A.substring(L.getCharIndex())},this.resume=function(){ce.streamer._halted?(fe=!1,ce.streamer.parseChunk(A,!0)):setTimeout(ce.resume,3)},this.aborted=function(){return Se},this.abort=function(){Se=!0,L.abort(),B.meta.aborted=!0,$(S.complete)&&S.complete(B),A=""},this.guessLineEndings=function(je,re){je=je.substring(0,1048576);var re=new RegExp(x(re)+"([^]*?)"+x(re),"gm"),Ae=(je=je.replace(re,"")).split("\r"),re=je.split(`
`),je=1<re.length&&re[0].length<Ae[0].length;if(Ae.length===1||je)return`
`;for(var Le=0,X=0;X<Ae.length;X++)Ae[X][0]===`
`&&Le++;return Le>=Ae.length/2?`\r
`:"\r"}}function x(S){return S.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function j(S){var A=(S=S||{}).delimiter,L=S.newline,N=S.comments,k=S.step,D=S.preview,I=S.fastMode,H=null,se=!1,ce=S.quoteChar==null?'"':S.quoteChar,le=ce;if(S.escapeChar!==void 0&&(le=S.escapeChar),(typeof A!="string"||-1<h.BAD_DELIMITERS.indexOf(A))&&(A=","),N===A)throw new Error("Comment character same as delimiter");N===!0?N="#":(typeof N!="string"||-1<h.BAD_DELIMITERS.indexOf(N))&&(N=!1),L!==`
`&&L!=="\r"&&L!==`\r
`&&(L=`
`);var ne=0,fe=!1;this.parse=function(Se,M,B){if(typeof Se!="string")throw new Error("Input must be a string");var J=Se.length,te=A.length,G=L.length,ae=N.length,ie=$(k),ue=[],Ae=[],re=[],je=ne=0;if(!Se)return Qe();if(I||I!==!1&&Se.indexOf(ce)===-1){for(var Le=Se.split(L),X=0;X<Le.length;X++){if(re=Le[X],ne+=re.length,X!==Le.length-1)ne+=L.length;else if(B)return Qe();if(!N||re.substring(0,ae)!==N){if(ie){if(ue=[],Be(re.split(A)),et(),fe)return Qe()}else Be(re.split(A));if(D&&D<=X)return ue=ue.slice(0,D),Qe(!0)}}return Qe()}for(var Q=Se.indexOf(A,ne),W=Se.indexOf(L,ne),ve=new RegExp(x(le)+x(ce),"g"),Pe=Se.indexOf(ce,ne);;)if(Se[ne]===ce)for(Pe=ne,ne++;;){if((Pe=Se.indexOf(ce,Pe+1))===-1)return B||Ae.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:ue.length,index:ne}),$e();if(Pe===J-1)return $e(Se.substring(ne,Pe).replace(ve,ce));if(ce===le&&Se[Pe+1]===le)Pe++;else if(ce===le||Pe===0||Se[Pe-1]!==le){Q!==-1&&Q<Pe+1&&(Q=Se.indexOf(A,Pe+1));var be=Fe((W=W!==-1&&W<Pe+1?Se.indexOf(L,Pe+1):W)===-1?Q:Math.min(Q,W));if(Se.substr(Pe+1+be,te)===A){re.push(Se.substring(ne,Pe).replace(ve,ce)),Se[ne=Pe+1+be+te]!==ce&&(Pe=Se.indexOf(ce,ne)),Q=Se.indexOf(A,ne),W=Se.indexOf(L,ne);break}if(be=Fe(W),Se.substring(Pe+1+be,Pe+1+be+G)===L){if(re.push(Se.substring(ne,Pe).replace(ve,ce)),Ke(Pe+1+be+G),Q=Se.indexOf(A,ne),Pe=Se.indexOf(ce,ne),ie&&(et(),fe))return Qe();if(D&&ue.length>=D)return Qe(!0);break}Ae.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:ue.length,index:ne}),Pe++}}else if(N&&re.length===0&&Se.substring(ne,ne+ae)===N){if(W===-1)return Qe();ne=W+G,W=Se.indexOf(L,ne),Q=Se.indexOf(A,ne)}else if(Q!==-1&&(Q<W||W===-1))re.push(Se.substring(ne,Q)),ne=Q+te,Q=Se.indexOf(A,ne);else{if(W===-1)break;if(re.push(Se.substring(ne,W)),Ke(W+G),ie&&(et(),fe))return Qe();if(D&&ue.length>=D)return Qe(!0)}return $e();function Be(Je){ue.push(Je),je=ne}function Fe(Je){var Re=0;return Re=Je!==-1&&(Je=Se.substring(Pe+1,Je))&&Je.trim()===""?Je.length:Re}function $e(Je){return B||(Je===void 0&&(Je=Se.substring(ne)),re.push(Je),ne=J,Be(re),ie&&et()),Qe()}function Ke(Je){ne=Je,Be(re),re=[],W=Se.indexOf(L,ne)}function Qe(Je){if(S.header&&!M&&ue.length&&!se){var Re=ue[0],ft=Object.create(null),mt=new Set(Re);let St=!1;for(let Ve=0;Ve<Re.length;Ve++){let es=Re[Ve];if(ft[es=$(S.transformHeader)?S.transformHeader(es,Ve):es]){let jt,Ls=ft[es];for(;jt=es+"_"+Ls,Ls++,mt.has(jt););mt.add(jt),Re[Ve]=jt,ft[es]++,St=!0,(H=H===null?{}:H)[jt]=es}else ft[es]=1,Re[Ve]=es;mt.add(es)}se=!0}return{data:ue,errors:Ae,meta:{delimiter:A,linebreak:L,aborted:fe,truncated:!!Je,cursor:je+(M||0),renamedHeaders:H}}}function et(){k(Qe()),ue=[],Ae=[]}},this.abort=function(){fe=!0},this.getCharIndex=function(){return ne}}function _(S){var A=S.data,L=l[A.workerId],N=!1;if(A.error)L.userError(A.error,A.file);else if(A.results&&A.results.data){var k={abort:function(){N=!0,T(A.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:U,resume:U};if($(L.userStep)){for(var D=0;D<A.results.data.length&&(L.userStep({data:A.results.data[D],errors:A.results.errors,meta:A.results.meta},k),!N);D++);delete A.results}else $(L.userChunk)&&(L.userChunk(A.results,k,A.file),delete A.results)}A.finished&&!N&&T(A.workerId,A.results)}function T(S,A){var L=l[S];$(L.userComplete)&&L.userComplete(A),L.terminate(),delete l[S]}function U(){throw new Error("Not implemented.")}function R(S){if(typeof S!="object"||S===null)return S;var A,L=Array.isArray(S)?[]:{};for(A in S)L[A]=R(S[A]);return L}function V(S,A){return function(){S.apply(A,arguments)}}function $(S){return typeof S=="function"}return h.parse=function(S,A){var L=(A=A||{}).dynamicTyping||!1;if($(L)&&(A.dynamicTypingFunction=L,L={}),A.dynamicTyping=L,A.transform=!!$(A.transform)&&A.transform,!A.worker||!h.WORKERS_SUPPORTED)return L=null,h.NODE_STREAM_INPUT,typeof S=="string"?(S=(N=>N.charCodeAt(0)!==65279?N:N.slice(1))(S),L=new(A.download?p:u)(A)):S.readable===!0&&$(S.read)&&$(S.on)?L=new C(A):(a.File&&S instanceof File||S instanceof Object)&&(L=new v(A)),L.stream(S);(L=(()=>{var N;return!!h.WORKERS_SUPPORTED&&(N=(()=>{var k=a.URL||a.webkitURL||null,D=r.toString();return h.BLOB_URL||(h.BLOB_URL=k.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",D,")();"],{type:"text/javascript"})))})(),(N=new a.Worker(N)).onmessage=_,N.id=c++,l[N.id]=N)})()).userStep=A.step,L.userChunk=A.chunk,L.userComplete=A.complete,L.userError=A.error,A.step=$(A.step),A.chunk=$(A.chunk),A.complete=$(A.complete),A.error=$(A.error),delete A.worker,L.postMessage({input:S,config:A,workerId:L.id})},h.unparse=function(S,A){var L=!1,N=!0,k=",",D=`\r
`,I='"',H=I+I,se=!1,ce=null,le=!1,ne=((()=>{if(typeof A=="object"){if(typeof A.delimiter!="string"||h.BAD_DELIMITERS.filter(function(M){return A.delimiter.indexOf(M)!==-1}).length||(k=A.delimiter),typeof A.quotes!="boolean"&&typeof A.quotes!="function"&&!Array.isArray(A.quotes)||(L=A.quotes),typeof A.skipEmptyLines!="boolean"&&typeof A.skipEmptyLines!="string"||(se=A.skipEmptyLines),typeof A.newline=="string"&&(D=A.newline),typeof A.quoteChar=="string"&&(I=A.quoteChar),typeof A.header=="boolean"&&(N=A.header),Array.isArray(A.columns)){if(A.columns.length===0)throw new Error("Option columns is empty");ce=A.columns}A.escapeChar!==void 0&&(H=A.escapeChar+I),A.escapeFormulae instanceof RegExp?le=A.escapeFormulae:typeof A.escapeFormulae=="boolean"&&A.escapeFormulae&&(le=/^[=+\-@\t\r].*$/)}})(),new RegExp(x(I),"g"));if(typeof S=="string"&&(S=JSON.parse(S)),Array.isArray(S)){if(!S.length||Array.isArray(S[0]))return fe(null,S,se);if(typeof S[0]=="object")return fe(ce||Object.keys(S[0]),S,se)}else if(typeof S=="object")return typeof S.data=="string"&&(S.data=JSON.parse(S.data)),Array.isArray(S.data)&&(S.fields||(S.fields=S.meta&&S.meta.fields||ce),S.fields||(S.fields=Array.isArray(S.data[0])?S.fields:typeof S.data[0]=="object"?Object.keys(S.data[0]):[]),Array.isArray(S.data[0])||typeof S.data[0]=="object"||(S.data=[S.data])),fe(S.fields||[],S.data||[],se);throw new Error("Unable to serialize unrecognized input");function fe(M,B,J){var te="",G=(typeof M=="string"&&(M=JSON.parse(M)),typeof B=="string"&&(B=JSON.parse(B)),Array.isArray(M)&&0<M.length),ae=!Array.isArray(B[0]);if(G&&N){for(var ie=0;ie<M.length;ie++)0<ie&&(te+=k),te+=Se(M[ie],ie);0<B.length&&(te+=D)}for(var ue=0;ue<B.length;ue++){var Ae=(G?M:B[ue]).length,re=!1,je=G?Object.keys(B[ue]).length===0:B[ue].length===0;if(J&&!G&&(re=J==="greedy"?B[ue].join("").trim()==="":B[ue].length===1&&B[ue][0].length===0),J==="greedy"&&G){for(var Le=[],X=0;X<Ae;X++){var Q=ae?M[X]:X;Le.push(B[ue][Q])}re=Le.join("").trim()===""}if(!re){for(var W=0;W<Ae;W++){0<W&&!je&&(te+=k);var ve=G&&ae?M[W]:W;te+=Se(B[ue][ve],W)}ue<B.length-1&&(!J||0<Ae&&!je)&&(te+=D)}}return te}function Se(M,B){var J,te;return M==null?"":M.constructor===Date?JSON.stringify(M).slice(1,25):(te=!1,le&&typeof M=="string"&&le.test(M)&&(M="'"+M,te=!0),J=M.toString().replace(ne,H),(te=te||L===!0||typeof L=="function"&&L(M,B)||Array.isArray(L)&&L[B]||((G,ae)=>{for(var ie=0;ie<ae.length;ie++)if(-1<G.indexOf(ae[ie]))return!0;return!1})(J,h.BAD_DELIMITERS)||-1<J.indexOf(k)||J.charAt(0)===" "||J.charAt(J.length-1)===" ")?I+J+I:J)}},h.RECORD_SEP="",h.UNIT_SEP="",h.BYTE_ORDER_MARK="\uFEFF",h.BAD_DELIMITERS=["\r",`
`,'"',h.BYTE_ORDER_MARK],h.WORKERS_SUPPORTED=!i&&!!a.Worker,h.NODE_STREAM_INPUT=1,h.LocalChunkSize=10485760,h.RemoteChunkSize=5242880,h.DefaultDelimiter=",",h.Parser=j,h.ParserHandle=w,h.NetworkStreamer=p,h.FileStreamer=v,h.StringStreamer=u,h.ReadableStreamStreamer=C,a.jQuery&&((n=a.jQuery).fn.parse=function(S){var A=S.config||{},L=[];return this.each(function(D){if(!(n(this).prop("tagName").toUpperCase()==="INPUT"&&n(this).attr("type").toLowerCase()==="file"&&a.FileReader)||!this.files||this.files.length===0)return!0;for(var I=0;I<this.files.length;I++)L.push({file:this.files[I],inputElem:this,instanceConfig:n.extend({},A)})}),N(),this;function N(){if(L.length===0)$(S.complete)&&S.complete();else{var D,I,H,se,ce=L[0];if($(S.before)){var le=S.before(ce.file,ce.inputElem);if(typeof le=="object"){if(le.action==="abort")return D="AbortError",I=ce.file,H=ce.inputElem,se=le.reason,void($(S.error)&&S.error({name:D},I,H,se));if(le.action==="skip")return void k();typeof le.config=="object"&&(ce.instanceConfig=n.extend(ce.instanceConfig,le.config))}else if(le==="skip")return void k()}var ne=ce.instanceConfig.complete;ce.instanceConfig.complete=function(fe){$(ne)&&ne(fe,ce.file,ce.inputElem),k()},h.parse(ce.file,ce.instanceConfig)}}function k(){L.splice(0,1),N()}}),o&&(a.onmessage=function(S){S=S.data,h.WORKER_ID===void 0&&S&&(h.WORKER_ID=S.workerId),typeof S.input=="string"?a.postMessage({workerId:h.WORKER_ID,results:h.parse(S.input,S.config),finished:!0}):(a.File&&S.input instanceof File||S.input instanceof Object)&&(S=h.parse(S.input,S.config))&&a.postMessage({workerId:h.WORKER_ID,results:S,finished:!0})}),(p.prototype=Object.create(f.prototype)).constructor=p,(v.prototype=Object.create(f.prototype)).constructor=v,(u.prototype=Object.create(u.prototype)).constructor=u,(C.prototype=Object.create(f.prototype)).constructor=C,h})})(U1);var p3=U1.exports;const g3=ty(p3),x3="modulepreload",v3=function(s){return"/"+s},kp={},om=function(t,r,a){let n=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));n=Promise.allSettled(r.map(c=>{if(c=v3(c),c in kp)return;kp[c]=!0;const h=c.endsWith(".css"),f=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const p=document.createElement("link");if(p.rel=h?"stylesheet":x3,h||(p.as="script"),p.crossOrigin="",p.href=c,l&&p.setAttribute("nonce",l),document.head.appendChild(p),h)return new Promise((v,u)=>{p.addEventListener("load",v),p.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return n.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})};function gs(s){"@babel/helpers - typeof";return gs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gs(s)}var Lr=Uint8Array,la=Uint16Array,Zm=Int32Array,mu=new Lr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fu=new Lr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),lm=new Lr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),q1=function(s,t){for(var r=new la(31),a=0;a<31;++a)r[a]=t+=1<<s[a-1];for(var n=new Zm(r[30]),a=1;a<30;++a)for(var i=r[a];i<r[a+1];++i)n[i]=i-r[a]<<5|a;return{b:r,r:n}},z1=q1(mu,2),$1=z1.b,cm=z1.r;$1[28]=258,cm[258]=28;var W1=q1(fu,0),y3=W1.b,Cp=W1.r,dm=new la(32768);for(var Ds=0;Ds<32768;++Ds){var $n=(Ds&43690)>>1|(Ds&21845)<<1;$n=($n&52428)>>2|($n&13107)<<2,$n=($n&61680)>>4|($n&3855)<<4,dm[Ds]=(($n&65280)>>8|($n&255)<<8)>>1}var en=function(s,t,r){for(var a=s.length,n=0,i=new la(t);n<a;++n)s[n]&&++i[s[n]-1];var o=new la(t);for(n=1;n<t;++n)o[n]=o[n-1]+i[n-1]<<1;var l;if(r){l=new la(1<<t);var c=15-t;for(n=0;n<a;++n)if(s[n])for(var h=n<<4|s[n],f=t-s[n],p=o[s[n]-1]++<<f,v=p|(1<<f)-1;p<=v;++p)l[dm[p]>>c]=h}else for(l=new la(a),n=0;n<a;++n)s[n]&&(l[n]=dm[o[s[n]-1]++]>>15-s[n]);return l},hi=new Lr(288);for(var Ds=0;Ds<144;++Ds)hi[Ds]=8;for(var Ds=144;Ds<256;++Ds)hi[Ds]=9;for(var Ds=256;Ds<280;++Ds)hi[Ds]=7;for(var Ds=280;Ds<288;++Ds)hi[Ds]=8;var dc=new Lr(32);for(var Ds=0;Ds<32;++Ds)dc[Ds]=5;var b3=en(hi,9,0),w3=en(hi,9,1),j3=en(dc,5,0),N3=en(dc,5,1),hh=function(s){for(var t=s[0],r=1;r<s.length;++r)s[r]>t&&(t=s[r]);return t},Da=function(s,t,r){var a=t/8|0;return(s[a]|s[a+1]<<8)>>(t&7)&r},mh=function(s,t){var r=t/8|0;return(s[r]|s[r+1]<<8|s[r+2]<<16)>>(t&7)},ef=function(s){return(s+7)/8|0},H1=function(s,t,r){return(r==null||r>s.length)&&(r=s.length),new Lr(s.subarray(t,r))},S3=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ra=function(s,t,r){var a=new Error(t||S3[s]);if(a.code=s,Error.captureStackTrace&&Error.captureStackTrace(a,Ra),!r)throw a;return a},k3=function(s,t,r,a){var n=s.length,i=0;if(!n||t.f&&!t.l)return r||new Lr(0);var o=!r,l=o||t.i!=2,c=t.i;o&&(r=new Lr(n*3));var h=function(re){var je=r.length;if(re>je){var Le=new Lr(Math.max(je*2,re));Le.set(r),r=Le}},f=t.f||0,p=t.p||0,v=t.b||0,u=t.l,C=t.d,w=t.m,x=t.n,j=n*8;do{if(!u){f=Da(s,p,1);var _=Da(s,p+1,3);if(p+=3,_)if(_==1)u=w3,C=N3,w=9,x=5;else if(_==2){var V=Da(s,p,31)+257,$=Da(s,p+10,15)+4,S=V+Da(s,p+5,31)+1;p+=14;for(var A=new Lr(S),L=new Lr(19),N=0;N<$;++N)L[lm[N]]=Da(s,p+N*3,7);p+=$*3;for(var k=hh(L),D=(1<<k)-1,I=en(L,k,1),N=0;N<S;){var H=I[Da(s,p,D)];p+=H&15;var T=H>>4;if(T<16)A[N++]=T;else{var se=0,ce=0;for(T==16?(ce=3+Da(s,p,3),p+=2,se=A[N-1]):T==17?(ce=3+Da(s,p,7),p+=3):T==18&&(ce=11+Da(s,p,127),p+=7);ce--;)A[N++]=se}}var le=A.subarray(0,V),ne=A.subarray(V);w=hh(le),x=hh(ne),u=en(le,w,1),C=en(ne,x,1)}else Ra(1);else{var T=ef(p)+4,U=s[T-4]|s[T-3]<<8,R=T+U;if(R>n){c&&Ra(0);break}l&&h(v+U),r.set(s.subarray(T,R),v),t.b=v+=U,t.p=p=R*8,t.f=f;continue}if(p>j){c&&Ra(0);break}}l&&h(v+131072);for(var fe=(1<<w)-1,Se=(1<<x)-1,M=p;;M=p){var se=u[mh(s,p)&fe],B=se>>4;if(p+=se&15,p>j){c&&Ra(0);break}if(se||Ra(2),B<256)r[v++]=B;else if(B==256){M=p,u=null;break}else{var J=B-254;if(B>264){var N=B-257,te=mu[N];J=Da(s,p,(1<<te)-1)+$1[N],p+=te}var G=C[mh(s,p)&Se],ae=G>>4;G||Ra(3),p+=G&15;var ne=y3[ae];if(ae>3){var te=fu[ae];ne+=mh(s,p)&(1<<te)-1,p+=te}if(p>j){c&&Ra(0);break}l&&h(v+131072);var ie=v+J;if(v<ne){var ue=i-ne,Ae=Math.min(ne,ie);for(ue+v<0&&Ra(3);v<Ae;++v)r[v]=a[ue+v]}for(;v<ie;++v)r[v]=r[v-ne]}}t.l=u,t.p=M,t.b=v,t.f=f,u&&(f=1,t.m=w,t.d=C,t.n=x)}while(!f);return v!=r.length&&o?H1(r,0,v):r.subarray(0,v)},pn=function(s,t,r){r<<=t&7;var a=t/8|0;s[a]|=r,s[a+1]|=r>>8},Yl=function(s,t,r){r<<=t&7;var a=t/8|0;s[a]|=r,s[a+1]|=r>>8,s[a+2]|=r>>16},fh=function(s,t){for(var r=[],a=0;a<s.length;++a)s[a]&&r.push({s:a,f:s[a]});var n=r.length,i=r.slice();if(!n)return{t:Y1,l:0};if(n==1){var o=new Lr(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(R,V){return R.f-V.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],h=0,f=1,p=2;for(r[0]={s:-1,f:l.f+c.f,l,r:c};f!=n-1;)l=r[r[h].f<r[p].f?h++:p++],c=r[h!=f&&r[h].f<r[p].f?h++:p++],r[f++]={s:-1,f:l.f+c.f,l,r:c};for(var v=i[0].s,a=1;a<n;++a)i[a].s>v&&(v=i[a].s);var u=new la(v+1),C=um(r[f-1],u,0);if(C>t){var a=0,w=0,x=C-t,j=1<<x;for(i.sort(function(V,$){return u[$.s]-u[V.s]||V.f-$.f});a<n;++a){var _=i[a].s;if(u[_]>t)w+=j-(1<<C-u[_]),u[_]=t;else break}for(w>>=x;w>0;){var T=i[a].s;u[T]<t?w-=1<<t-u[T]++-1:++a}for(;a>=0&&w;--a){var U=i[a].s;u[U]==t&&(--u[U],++w)}C=t}return{t:new Lr(u),l:C}},um=function(s,t,r){return s.s==-1?Math.max(um(s.l,t,r+1),um(s.r,t,r+1)):t[s.s]=r},Ap=function(s){for(var t=s.length;t&&!s[--t];);for(var r=new la(++t),a=0,n=s[0],i=1,o=function(c){r[a++]=c},l=1;l<=t;++l)if(s[l]==n&&l!=t)++i;else{if(!n&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(n),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(n);i=1,n=s[l]}return{c:r.subarray(0,a),n:t}},Gl=function(s,t){for(var r=0,a=0;a<t.length;++a)r+=s[a]*t[a];return r},V1=function(s,t,r){var a=r.length,n=ef(t+2);s[n]=a&255,s[n+1]=a>>8,s[n+2]=s[n]^255,s[n+3]=s[n+1]^255;for(var i=0;i<a;++i)s[n+i+4]=r[i];return(n+4+a)*8},Pp=function(s,t,r,a,n,i,o,l,c,h,f){pn(t,f++,r),++n[256];for(var p=fh(n,15),v=p.t,u=p.l,C=fh(i,15),w=C.t,x=C.l,j=Ap(v),_=j.c,T=j.n,U=Ap(w),R=U.c,V=U.n,$=new la(19),S=0;S<_.length;++S)++$[_[S]&31];for(var S=0;S<R.length;++S)++$[R[S]&31];for(var A=fh($,7),L=A.t,N=A.l,k=19;k>4&&!L[lm[k-1]];--k);var D=h+5<<3,I=Gl(n,hi)+Gl(i,dc)+o,H=Gl(n,v)+Gl(i,w)+o+14+3*k+Gl($,L)+2*$[16]+3*$[17]+7*$[18];if(c>=0&&D<=I&&D<=H)return V1(t,f,s.subarray(c,c+h));var se,ce,le,ne;if(pn(t,f,1+(H<I)),f+=2,H<I){se=en(v,u,0),ce=v,le=en(w,x,0),ne=w;var fe=en(L,N,0);pn(t,f,T-257),pn(t,f+5,V-1),pn(t,f+10,k-4),f+=14;for(var S=0;S<k;++S)pn(t,f+3*S,L[lm[S]]);f+=3*k;for(var Se=[_,R],M=0;M<2;++M)for(var B=Se[M],S=0;S<B.length;++S){var J=B[S]&31;pn(t,f,fe[J]),f+=L[J],J>15&&(pn(t,f,B[S]>>5&127),f+=B[S]>>12)}}else se=b3,ce=hi,le=j3,ne=dc;for(var S=0;S<l;++S){var te=a[S];if(te>255){var J=te>>18&31;Yl(t,f,se[J+257]),f+=ce[J+257],J>7&&(pn(t,f,te>>23&31),f+=mu[J]);var G=te&31;Yl(t,f,le[G]),f+=ne[G],G>3&&(Yl(t,f,te>>5&8191),f+=fu[G])}else Yl(t,f,se[te]),f+=ce[te]}return Yl(t,f,se[256]),f+ce[256]},C3=new Zm([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Y1=new Lr(0),A3=function(s,t,r,a,n,i){var o=i.z||s.length,l=new Lr(a+o+5*(1+Math.ceil(o/7e3))+n),c=l.subarray(a,l.length-n),h=i.l,f=(i.r||0)&7;if(t){f&&(c[0]=i.r>>3);for(var p=C3[t-1],v=p>>13,u=p&8191,C=(1<<r)-1,w=i.p||new la(32768),x=i.h||new la(C+1),j=Math.ceil(r/3),_=2*j,T=function(X){return(s[X]^s[X+1]<<j^s[X+2]<<_)&C},U=new Zm(25e3),R=new la(288),V=new la(32),$=0,S=0,A=i.i||0,L=0,N=i.w||0,k=0;A+2<o;++A){var D=T(A),I=A&32767,H=x[D];if(w[I]=H,x[D]=I,N<=A){var se=o-A;if(($>7e3||L>24576)&&(se>423||!h)){f=Pp(s,c,0,U,R,V,S,L,k,A-k,f),L=$=S=0,k=A;for(var ce=0;ce<286;++ce)R[ce]=0;for(var ce=0;ce<30;++ce)V[ce]=0}var le=2,ne=0,fe=u,Se=I-H&32767;if(se>2&&D==T(A-Se))for(var M=Math.min(v,se)-1,B=Math.min(32767,A),J=Math.min(258,se);Se<=B&&--fe&&I!=H;){if(s[A+le]==s[A+le-Se]){for(var te=0;te<J&&s[A+te]==s[A+te-Se];++te);if(te>le){if(le=te,ne=Se,te>M)break;for(var G=Math.min(Se,te-2),ae=0,ce=0;ce<G;++ce){var ie=A-Se+ce&32767,ue=w[ie],Ae=ie-ue&32767;Ae>ae&&(ae=Ae,H=ie)}}}I=H,H=w[I],Se+=I-H&32767}if(ne){U[L++]=268435456|cm[le]<<18|Cp[ne];var re=cm[le]&31,je=Cp[ne]&31;S+=mu[re]+fu[je],++R[257+re],++V[je],N=A+le,++$}else U[L++]=s[A],++R[s[A]]}}for(A=Math.max(A,N);A<o;++A)U[L++]=s[A],++R[s[A]];f=Pp(s,c,h,U,R,V,S,L,k,A-k,f),h||(i.r=f&7|c[f/8|0]<<3,f-=7,i.h=x,i.p=w,i.i=A,i.w=N)}else{for(var A=i.w||0;A<o+h;A+=65535){var Le=A+65535;Le>=o&&(c[f/8|0]=h,Le=o),f=V1(c,f+1,s.subarray(A,Le))}i.i=o}return H1(l,0,a+ef(f)+n)},G1=function(){var s=1,t=0;return{p:function(r){for(var a=s,n=t,i=r.length|0,o=0;o!=i;){for(var l=Math.min(o+2655,i);o<l;++o)n+=a+=r[o];a=(a&65535)+15*(a>>16),n=(n&65535)+15*(n>>16)}s=a,t=n},d:function(){return s%=65521,t%=65521,(s&255)<<24|(s&65280)<<8|(t&255)<<8|t>>8}}},P3=function(s,t,r,a,n){if(!n&&(n={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),o=new Lr(i.length+s.length);o.set(i),o.set(s,i.length),s=o,n.w=i.length}return A3(s,t.level==null?6:t.level,t.mem==null?n.l?Math.ceil(Math.max(8,Math.min(13,Math.log(s.length)))*1.5):20:12+t.mem,r,a,n)},J1=function(s,t,r){for(;r;++t)s[t]=r,r>>>=8},_3=function(s,t){var r=t.level,a=r==0?0:r<6?1:r==9?3:2;if(s[0]=120,s[1]=a<<6|(t.dictionary&&32),s[1]|=31-(s[0]<<8|s[1])%31,t.dictionary){var n=G1();n.p(t.dictionary),J1(s,2,n.d())}},I3=function(s,t){return((s[0]&15)!=8||s[0]>>4>7||(s[0]<<8|s[1])%31)&&Ra(6,"invalid zlib data"),(s[1]>>5&1)==1&&Ra(6,"invalid zlib data: "+(s[1]&32?"need":"unexpected")+" dictionary"),(s[1]>>3&4)+2};function hm(s,t){t||(t={});var r=G1();r.p(s);var a=P3(s,t,t.dictionary?6:2,4);return _3(a,t),J1(a,a.length-4,r.d()),a}function L3(s,t){return k3(s.subarray(I3(s),-4),{i:2},t,t)}var T3=typeof TextDecoder!="undefined"&&new TextDecoder,D3=0;try{T3.decode(Y1,{stream:!0}),D3=1}catch(s){}var Pt=function(){return typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:this}();function ph(){Pt.console&&typeof Pt.console.log=="function"&&Pt.console.log.apply(Pt.console,arguments)}var Ns={log:ph,warn:function(s){Pt.console&&(typeof Pt.console.warn=="function"?Pt.console.warn.apply(Pt.console,arguments):ph.call(null,arguments))},error:function(s){Pt.console&&(typeof Pt.console.error=="function"?Pt.console.error.apply(Pt.console,arguments):ph(s))}};function gh(s,t,r){var a=new XMLHttpRequest;a.open("GET",s),a.responseType="blob",a.onload=function(){Pi(a.response,t,r)},a.onerror=function(){Ns.error("could not download file")},a.send()}function _p(s){var t=new XMLHttpRequest;t.open("HEAD",s,!1);try{t.send()}catch(r){}return t.status>=200&&t.status<=299}function vd(s){try{s.dispatchEvent(new MouseEvent("click"))}catch(r){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),s.dispatchEvent(t)}}var rc,mm,Pi=Pt.saveAs||((typeof window=="undefined"?"undefined":gs(window))!=="object"||window!==Pt?function(){}:typeof HTMLAnchorElement!="undefined"&&"download"in HTMLAnchorElement.prototype?function(s,t,r){var a=Pt.URL||Pt.webkitURL,n=document.createElement("a");t=t||s.name||"download",n.download=t,n.rel="noopener",typeof s=="string"?(n.href=s,n.origin!==location.origin?_p(n.href)?gh(s,t,r):vd(n,n.target="_blank"):vd(n)):(n.href=a.createObjectURL(s),setTimeout(function(){a.revokeObjectURL(n.href)},4e4),setTimeout(function(){vd(n)},0))}:"msSaveOrOpenBlob"in navigator?function(s,t,r){if(t=t||s.name||"download",typeof s=="string")if(_p(s))gh(s,t,r);else{var a=document.createElement("a");a.href=s,a.target="_blank",setTimeout(function(){vd(a)})}else navigator.msSaveOrOpenBlob(function(n,i){return i===void 0?i={autoBom:!1}:gs(i)!=="object"&&(Ns.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(n.type)?new Blob(["\uFEFF",n],{type:n.type}):n}(s,r),t)}:function(s,t,r,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),typeof s=="string")return gh(s,t,r);var n=s.type==="application/octet-stream",i=/constructor/i.test(Pt.HTMLElement)||Pt.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||n&&i)&&(typeof FileReader=="undefined"?"undefined":gs(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var f=l.result;f=o?f:f.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=f:location=f,a=null},l.readAsDataURL(s)}else{var c=Pt.URL||Pt.webkitURL,h=c.createObjectURL(s);a?a.location=h:location.href=h,a=null,setTimeout(function(){c.revokeObjectURL(h)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function K1(s){var t;s=s||"",this.ok=!1,s.charAt(0)=="#"&&(s=s.substr(1,6)),s={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[s=(s=s.replace(/ /g,"")).toLowerCase()]||s;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],a=0;a<r.length;a++){var n=r[a].re,i=r[a].process,o=n.exec(s);o&&(t=i(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),h=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),h.length==1&&(h="0"+h),"#"+l+c+h}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function xh(s,t){var r=s[0],a=s[1],n=s[2],i=s[3];r=Sr(r,a,n,i,t[0],7,-680876936),i=Sr(i,r,a,n,t[1],12,-389564586),n=Sr(n,i,r,a,t[2],17,606105819),a=Sr(a,n,i,r,t[3],22,-1044525330),r=Sr(r,a,n,i,t[4],7,-176418897),i=Sr(i,r,a,n,t[5],12,1200080426),n=Sr(n,i,r,a,t[6],17,-1473231341),a=Sr(a,n,i,r,t[7],22,-45705983),r=Sr(r,a,n,i,t[8],7,1770035416),i=Sr(i,r,a,n,t[9],12,-1958414417),n=Sr(n,i,r,a,t[10],17,-42063),a=Sr(a,n,i,r,t[11],22,-1990404162),r=Sr(r,a,n,i,t[12],7,1804603682),i=Sr(i,r,a,n,t[13],12,-40341101),n=Sr(n,i,r,a,t[14],17,-1502002290),r=kr(r,a=Sr(a,n,i,r,t[15],22,1236535329),n,i,t[1],5,-165796510),i=kr(i,r,a,n,t[6],9,-1069501632),n=kr(n,i,r,a,t[11],14,643717713),a=kr(a,n,i,r,t[0],20,-373897302),r=kr(r,a,n,i,t[5],5,-701558691),i=kr(i,r,a,n,t[10],9,38016083),n=kr(n,i,r,a,t[15],14,-660478335),a=kr(a,n,i,r,t[4],20,-405537848),r=kr(r,a,n,i,t[9],5,568446438),i=kr(i,r,a,n,t[14],9,-1019803690),n=kr(n,i,r,a,t[3],14,-187363961),a=kr(a,n,i,r,t[8],20,1163531501),r=kr(r,a,n,i,t[13],5,-1444681467),i=kr(i,r,a,n,t[2],9,-51403784),n=kr(n,i,r,a,t[7],14,1735328473),r=Cr(r,a=kr(a,n,i,r,t[12],20,-1926607734),n,i,t[5],4,-378558),i=Cr(i,r,a,n,t[8],11,-2022574463),n=Cr(n,i,r,a,t[11],16,1839030562),a=Cr(a,n,i,r,t[14],23,-35309556),r=Cr(r,a,n,i,t[1],4,-1530992060),i=Cr(i,r,a,n,t[4],11,1272893353),n=Cr(n,i,r,a,t[7],16,-155497632),a=Cr(a,n,i,r,t[10],23,-1094730640),r=Cr(r,a,n,i,t[13],4,681279174),i=Cr(i,r,a,n,t[0],11,-358537222),n=Cr(n,i,r,a,t[3],16,-722521979),a=Cr(a,n,i,r,t[6],23,76029189),r=Cr(r,a,n,i,t[9],4,-640364487),i=Cr(i,r,a,n,t[12],11,-421815835),n=Cr(n,i,r,a,t[15],16,530742520),r=Ar(r,a=Cr(a,n,i,r,t[2],23,-995338651),n,i,t[0],6,-198630844),i=Ar(i,r,a,n,t[7],10,1126891415),n=Ar(n,i,r,a,t[14],15,-1416354905),a=Ar(a,n,i,r,t[5],21,-57434055),r=Ar(r,a,n,i,t[12],6,1700485571),i=Ar(i,r,a,n,t[3],10,-1894986606),n=Ar(n,i,r,a,t[10],15,-1051523),a=Ar(a,n,i,r,t[1],21,-2054922799),r=Ar(r,a,n,i,t[8],6,1873313359),i=Ar(i,r,a,n,t[15],10,-30611744),n=Ar(n,i,r,a,t[6],15,-1560198380),a=Ar(a,n,i,r,t[13],21,1309151649),r=Ar(r,a,n,i,t[4],6,-145523070),i=Ar(i,r,a,n,t[11],10,-1120210379),n=Ar(n,i,r,a,t[2],15,718787259),a=Ar(a,n,i,r,t[9],21,-343485551),s[0]=ni(r,s[0]),s[1]=ni(a,s[1]),s[2]=ni(n,s[2]),s[3]=ni(i,s[3])}function pu(s,t,r,a,n,i){return t=ni(ni(t,s),ni(a,i)),ni(t<<n|t>>>32-n,r)}function Sr(s,t,r,a,n,i,o){return pu(t&r|~t&a,s,t,n,i,o)}function kr(s,t,r,a,n,i,o){return pu(t&a|r&~a,s,t,n,i,o)}function Cr(s,t,r,a,n,i,o){return pu(t^r^a,s,t,n,i,o)}function Ar(s,t,r,a,n,i,o){return pu(r^(t|~a),s,t,n,i,o)}function X1(s){var t,r=s.length,a=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=s.length;t+=64)xh(a,M3(s.substring(t-64,t)));s=s.substring(t-64);var n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<s.length;t++)n[t>>2]|=s.charCodeAt(t)<<(t%4<<3);if(n[t>>2]|=128<<(t%4<<3),t>55)for(xh(a,n),t=0;t<16;t++)n[t]=0;return n[14]=8*r,xh(a,n),a}function M3(s){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=s.charCodeAt(t)+(s.charCodeAt(t+1)<<8)+(s.charCodeAt(t+2)<<16)+(s.charCodeAt(t+3)<<24);return r}rc=Pt.atob.bind(Pt),mm=Pt.btoa.bind(Pt);var Ip="0123456789abcdef".split("");function E3(s){for(var t="",r=0;r<4;r++)t+=Ip[s>>8*r+4&15]+Ip[s>>8*r&15];return t}function R3(s){return String.fromCharCode((255&s)>>0,(65280&s)>>8,(16711680&s)>>16,(4278190080&s)>>24)}function fm(s){return X1(s).map(R3).join("")}var O3=function(s){for(var t=0;t<s.length;t++)s[t]=E3(s[t]);return s.join("")}(X1("hello"))!="5d41402abc4b2a76b9719d911017c592";function ni(s,t){if(O3){var r=(65535&s)+(65535&t);return(s>>16)+(t>>16)+(r>>16)<<16|65535&r}return s+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function pm(s,t){var r,a,n,i;if(s!==r){for(var o=(n=s,i=1+(256/s.length>>0),new Array(i+1).join(n)),l=[],c=0;c<256;c++)l[c]=c;var h=0;for(c=0;c<256;c++){var f=l[c];h=(h+f+o.charCodeAt(c))%256,l[c]=l[h],l[h]=f}r=s,a=l}else l=a;var p=t.length,v=0,u=0,C="";for(c=0;c<p;c++)u=(u+(f=l[v=(v+1)%256]))%256,l[v]=l[u],l[u]=f,o=l[(l[v]+l[u])%256],C+=String.fromCharCode(t.charCodeAt(c)^o);return C}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Lp={print:4,modify:8,copy:16,"annot-forms":32};function Po(s,t,r,a){this.v=1,this.r=2;var n=192;s.forEach(function(l){if(Lp.perm!==void 0)throw new Error("Invalid permission: "+l);n+=Lp[l]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var i=(t+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,o),this.P=-(1+(255^n)),this.encryptionKey=fm(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(a)).substr(0,5),this.U=pm(this.encryptionKey,this.padding)}function _o(s){if(/[^\u0000-\u00ff]/.test(s))throw new Error("Invalid PDF Name Object: "+s+", Only accept ASCII characters.");for(var t="",r=s.length,a=0;a<r;a++){var n=s.charCodeAt(a);n<33||n===35||n===37||n===40||n===41||n===47||n===60||n===62||n===91||n===93||n===123||n===125||n>126?t+="#"+("0"+n.toString(16)).slice(-2):t+=s[a]}return t}function Tp(s){if(gs(s)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,a,n){if(n=n||!1,typeof r!="string"||typeof a!="function"||typeof n!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var i=Math.random().toString(35);return t[r][i]=[a,!!n],i},this.unsubscribe=function(r){for(var a in t)if(t[a][r])return delete t[a][r],Object.keys(t[a]).length===0&&delete t[a],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var a=Array.prototype.slice.call(arguments,1),n=[];for(var i in t[r]){var o=t[r][i];try{o[0].apply(s,a)}catch(l){Pt.console&&Ns.error("jsPDF PubSub Error",l.message,l)}o[1]&&n.push(i)}n.length&&n.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Hd(s){if(!(this instanceof Hd))return new Hd(s);var t="opacity,stroke-opacity".split(",");for(var r in s)s.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=s[r]);this.id="",this.objectNumber=-1}function Q1(s,t){this.gState=s,this.matrix=t,this.id="",this.objectNumber=-1}function Ii(s,t,r,a,n){if(!(this instanceof Ii))return new Ii(s,t,r,a,n);this.type=s==="axial"?2:3,this.coords=t,this.colors=r,Q1.call(this,a,n)}function Do(s,t,r,a,n){if(!(this instanceof Do))return new Do(s,t,r,a,n);this.boundingBox=s,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,Q1.call(this,a,n)}function At(s){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",a=arguments[1],n=arguments[2],i=arguments[3],o=[],l=1,c=16,h="S",f=null;gs(s=s||{})==="object"&&(r=s.orientation,a=s.unit||a,n=s.format||n,i=s.compress||s.compressPdf||i,(f=s.encryption||null)!==null&&(f.userPassword=f.userPassword||"",f.ownerPassword=f.ownerPassword||"",f.userPermissions=f.userPermissions||[]),l=typeof s.userUnit=="number"?Math.abs(s.userUnit):1,s.precision!==void 0&&(t=s.precision),s.floatPrecision!==void 0&&(c=s.floatPrecision),h=s.defaultPathOperation||"S"),o=s.filters||(i===!0?["FlateEncode"]:o),a=a||"mm",r=(""+(r||"P")).toLowerCase();var p=s.putOnlyUsedFonts||!1,v={},u={internal:{},__private__:{}};u.__private__.PubSub=Tp;var C="1.3",w=u.__private__.getPdfVersion=function(){return C};u.__private__.setPdfVersion=function(g){C=g};var x={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};u.__private__.getPageFormats=function(){return x};var j=u.__private__.getPageFormat=function(g){return x[g]};n=n||"a4";var _={COMPAT:"compat",ADVANCED:"advanced"},T=_.COMPAT;function U(){this.saveGraphicsState(),W(new gt(Ve,0,0,-Ve,0,Pn()*Ve).toString()+" cm"),this.setFontSize(this.getFontSize()/Ve),h="n",T=_.ADVANCED}function R(){this.restoreGraphicsState(),h="S",T=_.COMPAT}var V=u.__private__.combineFontStyleAndFontWeight=function(g,F){if(g=="bold"&&F=="normal"||g=="bold"&&F==400||g=="normal"&&F=="italic"||g=="bold"&&F=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return F&&(g=F==400||F==="normal"?g==="italic"?"italic":"normal":F!=700&&F!=="bold"||g!=="normal"?(F==700?"bold":F)+""+g:"bold"),g};u.advancedAPI=function(g){var F=T===_.COMPAT;return F&&U.call(this),typeof g!="function"||(g(this),F&&R.call(this)),this},u.compatAPI=function(g){var F=T===_.ADVANCED;return F&&R.call(this),typeof g!="function"||(g(this),F&&U.call(this)),this},u.isAdvancedAPI=function(){return T===_.ADVANCED};var $,S=function(g){if(T!==_.ADVANCED)throw new Error(g+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},A=u.roundToPrecision=u.__private__.roundToPrecision=function(g,F){var oe=t||F;if(isNaN(g)||isNaN(oe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return g.toFixed(oe).replace(/0+$/,"")};$=u.hpf=u.__private__.hpf=typeof c=="number"?function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.hpf");return A(g,c)}:c==="smart"?function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.hpf");return A(g,g>-1&&g<1?16:5)}:function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.hpf");return A(g,16)};var L=u.f2=u.__private__.f2=function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.f2");return A(g,2)},N=u.__private__.f3=function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.f3");return A(g,3)},k=u.scale=u.__private__.scale=function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.scale");return T===_.COMPAT?g*Ve:T===_.ADVANCED?g:void 0},D=function(g){return T===_.COMPAT?Pn()-g:T===_.ADVANCED?g:void 0},I=function(g){return k(D(g))};u.__private__.setPrecision=u.setPrecision=function(g){typeof parseInt(g,10)=="number"&&(t=parseInt(g,10))};var H,se="00000000000000000000000000000000",ce=u.__private__.getFileId=function(){return se},le=u.__private__.setFileId=function(g){return se=g!==void 0&&/^[a-fA-F0-9]{32}$/.test(g)?g.toUpperCase():se.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),f!==null&&(jr=new Po(f.userPermissions,f.userPassword,f.ownerPassword,se)),se};u.setFileId=function(g){return le(g),this},u.getFileId=function(){return ce()};var ne=u.__private__.convertDateToPDFDate=function(g){var F=g.getTimezoneOffset(),oe=F<0?"+":"-",pe=Math.floor(Math.abs(F/60)),ke=Math.abs(F%60),Oe=[oe,J(pe),"'",J(ke),"'"].join("");return["D:",g.getFullYear(),J(g.getMonth()+1),J(g.getDate()),J(g.getHours()),J(g.getMinutes()),J(g.getSeconds()),Oe].join("")},fe=u.__private__.convertPDFDateToDate=function(g){var F=parseInt(g.substr(2,4),10),oe=parseInt(g.substr(6,2),10)-1,pe=parseInt(g.substr(8,2),10),ke=parseInt(g.substr(10,2),10),Oe=parseInt(g.substr(12,2),10),He=parseInt(g.substr(14,2),10);return new Date(F,oe,pe,ke,Oe,He,0)},Se=u.__private__.setCreationDate=function(g){var F;if(g===void 0&&(g=new Date),g instanceof Date)F=ne(g);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(g))throw new Error("Invalid argument passed to jsPDF.setCreationDate");F=g}return H=F},M=u.__private__.getCreationDate=function(g){var F=H;return g==="jsDate"&&(F=fe(H)),F};u.setCreationDate=function(g){return Se(g),this},u.getCreationDate=function(g){return M(g)};var B,J=u.__private__.padd2=function(g){return("0"+parseInt(g)).slice(-2)},te=u.__private__.padd2Hex=function(g){return("00"+(g=g.toString())).substr(g.length)},G=0,ae=[],ie=[],ue=0,Ae=[],re=[],je=!1,Le=ie,X=function(){G=0,ue=0,ie=[],ae=[],Ae=[],Vs=Wt(),dr=Wt()};u.__private__.setCustomOutputDestination=function(g){je=!0,Le=g};var Q=function(g){je||(Le=g)};u.__private__.resetCustomOutputDestination=function(){je=!1,Le=ie};var W=u.__private__.out=function(g){return g=g.toString(),ue+=g.length+1,Le.push(g),Le},ve=u.__private__.write=function(g){return W(arguments.length===1?g.toString():Array.prototype.join.call(arguments," "))},Pe=u.__private__.getArrayBuffer=function(g){for(var F=g.length,oe=new ArrayBuffer(F),pe=new Uint8Array(oe);F--;)pe[F]=g.charCodeAt(F);return oe},be=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];u.__private__.getStandardFonts=function(){return be};var Be=s.fontSize||16;u.__private__.setFontSize=u.setFontSize=function(g){return Be=T===_.ADVANCED?g/Ve:g,this};var Fe,$e=u.__private__.getFontSize=u.getFontSize=function(){return T===_.COMPAT?Be:Be*Ve},Ke=s.R2L||!1;u.__private__.setR2L=u.setR2L=function(g){return Ke=g,this},u.__private__.getR2L=u.getR2L=function(){return Ke};var Qe,et=u.__private__.setZoomMode=function(g){var F=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(g))Fe=g;else if(isNaN(g)){if(F.indexOf(g)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+g+'" is not recognized.');Fe=g}else Fe=parseInt(g,10)};u.__private__.getZoomMode=function(){return Fe};var Je,Re=u.__private__.setPageMode=function(g){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(g)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+g+'" is not recognized.');Qe=g};u.__private__.getPageMode=function(){return Qe};var ft=u.__private__.setLayoutMode=function(g){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(g)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+g+'" is not recognized.');Je=g};u.__private__.getLayoutMode=function(){return Je},u.__private__.setDisplayMode=u.setDisplayMode=function(g,F,oe){return et(g),ft(F),Re(oe),this};var mt={title:"",subject:"",author:"",keywords:"",creator:""};u.__private__.getDocumentProperty=function(g){if(Object.keys(mt).indexOf(g)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return mt[g]},u.__private__.getDocumentProperties=function(){return mt},u.__private__.setDocumentProperties=u.setProperties=u.setDocumentProperties=function(g){for(var F in mt)mt.hasOwnProperty(F)&&g[F]&&(mt[F]=g[F]);return this},u.__private__.setDocumentProperty=function(g,F){if(Object.keys(mt).indexOf(g)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return mt[g]=F};var St,Ve,es,jt,Ls,Ft={},Lt={},lr=[],Yt={},pr={},rs={},Hs={},cr=null,Kt=0,Ct=[],tt=new Tp(u),Tt=s.hotfixes||[],Mt={},As={},xs=[],gt=function g(F,oe,pe,ke,Oe,He){if(!(this instanceof g))return new g(F,oe,pe,ke,Oe,He);isNaN(F)&&(F=1),isNaN(oe)&&(oe=0),isNaN(pe)&&(pe=0),isNaN(ke)&&(ke=1),isNaN(Oe)&&(Oe=0),isNaN(He)&&(He=0),this._matrix=[F,oe,pe,ke,Oe,He]};Object.defineProperty(gt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(g){this._matrix[0]=g}}),Object.defineProperty(gt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(g){this._matrix[1]=g}}),Object.defineProperty(gt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(g){this._matrix[2]=g}}),Object.defineProperty(gt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(g){this._matrix[3]=g}}),Object.defineProperty(gt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(g){this._matrix[4]=g}}),Object.defineProperty(gt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(g){this._matrix[5]=g}}),Object.defineProperty(gt.prototype,"a",{get:function(){return this._matrix[0]},set:function(g){this._matrix[0]=g}}),Object.defineProperty(gt.prototype,"b",{get:function(){return this._matrix[1]},set:function(g){this._matrix[1]=g}}),Object.defineProperty(gt.prototype,"c",{get:function(){return this._matrix[2]},set:function(g){this._matrix[2]=g}}),Object.defineProperty(gt.prototype,"d",{get:function(){return this._matrix[3]},set:function(g){this._matrix[3]=g}}),Object.defineProperty(gt.prototype,"e",{get:function(){return this._matrix[4]},set:function(g){this._matrix[4]=g}}),Object.defineProperty(gt.prototype,"f",{get:function(){return this._matrix[5]},set:function(g){this._matrix[5]=g}}),Object.defineProperty(gt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(gt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(gt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(gt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),gt.prototype.join=function(g){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map($).join(g)},gt.prototype.multiply=function(g){var F=g.sx*this.sx+g.shy*this.shx,oe=g.sx*this.shy+g.shy*this.sy,pe=g.shx*this.sx+g.sy*this.shx,ke=g.shx*this.shy+g.sy*this.sy,Oe=g.tx*this.sx+g.ty*this.shx+this.tx,He=g.tx*this.shy+g.ty*this.sy+this.ty;return new gt(F,oe,pe,ke,Oe,He)},gt.prototype.decompose=function(){var g=this.sx,F=this.shy,oe=this.shx,pe=this.sy,ke=this.tx,Oe=this.ty,He=Math.sqrt(g*g+F*F),dt=(g/=He)*oe+(F/=He)*pe;oe-=g*dt,pe-=F*dt;var yt=Math.sqrt(oe*oe+pe*pe);return dt/=yt,g*(pe/=yt)<F*(oe/=yt)&&(g=-g,F=-F,dt=-dt,He=-He),{scale:new gt(He,0,0,yt,0,0),translate:new gt(1,0,0,1,ke,Oe),rotate:new gt(g,F,-F,g,0,0),skew:new gt(1,0,dt,1,0,0)}},gt.prototype.toString=function(g){return this.join(" ")},gt.prototype.inversed=function(){var g=this.sx,F=this.shy,oe=this.shx,pe=this.sy,ke=this.tx,Oe=this.ty,He=1/(g*pe-F*oe),dt=pe*He,yt=-F*He,$t=-oe*He,Bt=g*He;return new gt(dt,yt,$t,Bt,-dt*ke-$t*Oe,-yt*ke-Bt*Oe)},gt.prototype.applyToPoint=function(g){var F=g.x*this.sx+g.y*this.shx+this.tx,oe=g.x*this.shy+g.y*this.sy+this.ty;return new lo(F,oe)},gt.prototype.applyToRectangle=function(g){var F=this.applyToPoint(g),oe=this.applyToPoint(new lo(g.x+g.w,g.y+g.h));return new jl(F.x,F.y,oe.x-F.x,oe.y-F.y)},gt.prototype.clone=function(){var g=this.sx,F=this.shy,oe=this.shx,pe=this.sy,ke=this.tx,Oe=this.ty;return new gt(g,F,oe,pe,ke,Oe)},u.Matrix=gt;var Rs=u.matrixMult=function(g,F){return F.multiply(g)},Te=new gt(1,0,0,1,0,0);u.unitMatrix=u.identityMatrix=Te;var ct=function(g,F){if(!pr[g]){var oe=(F instanceof Ii?"Sh":"P")+(Object.keys(Yt).length+1).toString(10);F.id=oe,pr[g]=oe,Yt[oe]=F,tt.publish("addPattern",F)}};u.ShadingPattern=Ii,u.TilingPattern=Do,u.addShadingPattern=function(g,F){return S("addShadingPattern()"),ct(g,F),this},u.beginTilingPattern=function(g){S("beginTilingPattern()"),Fc(g.boundingBox[0],g.boundingBox[1],g.boundingBox[2]-g.boundingBox[0],g.boundingBox[3]-g.boundingBox[1],g.matrix)},u.endTilingPattern=function(g,F){S("endTilingPattern()"),F.stream=re[B].join(`
`),ct(g,F),tt.publish("endTilingPattern",F),xs.pop().restore()};var vt=u.__private__.newObject=function(){var g=Wt();return Xt(g,!0),g},Wt=u.__private__.newObjectDeferred=function(){return G++,ae[G]=function(){return ue},G},Xt=function(g,F){return F=typeof F=="boolean"&&F,ae[g]=ue,F&&W(g+" 0 obj"),g},Mr=u.__private__.newAdditionalObject=function(){var g={objId:Wt(),content:""};return Ae.push(g),g},Vs=Wt(),dr=Wt(),gr=u.__private__.decodeColorString=function(g){var F=g.split(" ");if(F.length!==2||F[1]!=="g"&&F[1]!=="G")F.length===5&&(F[4]==="k"||F[4]==="K")&&(F=[(1-F[0])*(1-F[3]),(1-F[1])*(1-F[3]),(1-F[2])*(1-F[3]),"r"]);else{var oe=parseFloat(F[0]);F=[oe,oe,oe,"r"]}for(var pe="#",ke=0;ke<3;ke++)pe+=("0"+Math.floor(255*parseFloat(F[ke])).toString(16)).slice(-2);return pe},Wr=u.__private__.encodeColorString=function(g){var F;typeof g=="string"&&(g={ch1:g});var oe=g.ch1,pe=g.ch2,ke=g.ch3,Oe=g.ch4,He=g.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof oe=="string"&&oe.charAt(0)!=="#"){var dt=new K1(oe);if(dt.ok)oe=dt.toHex();else if(!/^\d*\.?\d*$/.test(oe))throw new Error('Invalid color "'+oe+'" passed to jsPDF.encodeColorString.')}if(typeof oe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(oe)&&(oe="#"+oe[1]+oe[1]+oe[2]+oe[2]+oe[3]+oe[3]),typeof oe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(oe)){var yt=parseInt(oe.substr(1),16);oe=yt>>16&255,pe=yt>>8&255,ke=255&yt}if(pe===void 0||Oe===void 0&&oe===pe&&pe===ke)if(typeof oe=="string")F=oe+" "+He[0];else switch(g.precision){case 2:F=L(oe/255)+" "+He[0];break;case 3:default:F=N(oe/255)+" "+He[0]}else if(Oe===void 0||gs(Oe)==="object"){if(Oe&&!isNaN(Oe.a)&&Oe.a===0)return F=["1.","1.","1.",He[1]].join(" ");if(typeof oe=="string")F=[oe,pe,ke,He[1]].join(" ");else switch(g.precision){case 2:F=[L(oe/255),L(pe/255),L(ke/255),He[1]].join(" ");break;default:case 3:F=[N(oe/255),N(pe/255),N(ke/255),He[1]].join(" ")}}else if(typeof oe=="string")F=[oe,pe,ke,Oe,He[2]].join(" ");else switch(g.precision){case 2:F=[L(oe),L(pe),L(ke),L(Oe),He[2]].join(" ");break;case 3:default:F=[N(oe),N(pe),N(ke),N(Oe),He[2]].join(" ")}return F},ua=u.__private__.getFilters=function(){return o},Hr=u.__private__.putStream=function(g){var F=(g=g||{}).data||"",oe=g.filters||ua(),pe=g.alreadyAppliedFilters||[],ke=g.addLength1||!1,Oe=F.length,He=g.objectId,dt=function(Nr){return Nr};if(f!==null&&He===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");f!==null&&(dt=jr.encryptor(He,0));var yt={};oe===!0&&(oe=["FlateEncode"]);var $t=g.additionalKeyValues||[],Bt=(yt=At.API.processDataByFilters!==void 0?At.API.processDataByFilters(F,oe):{data:F,reverseChain:[]}).reverseChain+(Array.isArray(pe)?pe.join(" "):pe.toString());if(yt.data.length!==0&&($t.push({key:"Length",value:yt.data.length}),ke===!0&&$t.push({key:"Length1",value:Oe})),Bt.length!=0)if(Bt.split("/").length-1==1)$t.push({key:"Filter",value:Bt});else{$t.push({key:"Filter",value:"["+Bt+"]"});for(var as=0;as<$t.length;as+=1)if($t[as].key==="DecodeParms"){for(var Fs=[],qs=0;qs<yt.reverseChain.split("/").length-1;qs+=1)Fs.push("null");Fs.push($t[as].value),$t[as].value="["+Fs.join(" ")+"]"}}W("<<");for(var er=0;er<$t.length;er++)W("/"+$t[er].key+" "+$t[er].value);W(">>"),yt.data.length!==0&&(W("stream"),W(dt(yt.data)),W("endstream"))},Ne=u.__private__.putPage=function(g){var F=g.number,oe=g.data,pe=g.objId,ke=g.contentsObjId;Xt(pe,!0),W("<</Type /Page"),W("/Parent "+g.rootDictionaryObjId+" 0 R"),W("/Resources "+g.resourceDictionaryObjId+" 0 R"),W("/MediaBox ["+parseFloat($(g.mediaBox.bottomLeftX))+" "+parseFloat($(g.mediaBox.bottomLeftY))+" "+$(g.mediaBox.topRightX)+" "+$(g.mediaBox.topRightY)+"]"),g.cropBox!==null&&W("/CropBox ["+$(g.cropBox.bottomLeftX)+" "+$(g.cropBox.bottomLeftY)+" "+$(g.cropBox.topRightX)+" "+$(g.cropBox.topRightY)+"]"),g.bleedBox!==null&&W("/BleedBox ["+$(g.bleedBox.bottomLeftX)+" "+$(g.bleedBox.bottomLeftY)+" "+$(g.bleedBox.topRightX)+" "+$(g.bleedBox.topRightY)+"]"),g.trimBox!==null&&W("/TrimBox ["+$(g.trimBox.bottomLeftX)+" "+$(g.trimBox.bottomLeftY)+" "+$(g.trimBox.topRightX)+" "+$(g.trimBox.topRightY)+"]"),g.artBox!==null&&W("/ArtBox ["+$(g.artBox.bottomLeftX)+" "+$(g.artBox.bottomLeftY)+" "+$(g.artBox.topRightX)+" "+$(g.artBox.topRightY)+"]"),typeof g.userUnit=="number"&&g.userUnit!==1&&W("/UserUnit "+g.userUnit),tt.publish("putPage",{objId:pe,pageContext:Ct[F],pageNumber:F,page:oe}),W("/Contents "+ke+" 0 R"),W(">>"),W("endobj");var Oe=oe.join(`
`);return T===_.ADVANCED&&(Oe+=`
Q`),Xt(ke,!0),Hr({data:Oe,filters:ua(),objectId:ke}),W("endobj"),pe},De=u.__private__.putPages=function(){var g,F,oe=[];for(g=1;g<=Kt;g++)Ct[g].objId=Wt(),Ct[g].contentsObjId=Wt();for(g=1;g<=Kt;g++)oe.push(Ne({number:g,data:re[g],objId:Ct[g].objId,contentsObjId:Ct[g].contentsObjId,mediaBox:Ct[g].mediaBox,cropBox:Ct[g].cropBox,bleedBox:Ct[g].bleedBox,trimBox:Ct[g].trimBox,artBox:Ct[g].artBox,userUnit:Ct[g].userUnit,rootDictionaryObjId:Vs,resourceDictionaryObjId:dr}));Xt(Vs,!0),W("<</Type /Pages");var pe="/Kids [";for(F=0;F<Kt;F++)pe+=oe[F]+" 0 R ";W(pe+"]"),W("/Count "+Kt),W(">>"),W("endobj"),tt.publish("postPutPages")},Ye=function(g){tt.publish("putFont",{font:g,out:W,newObject:vt,putStream:Hr}),g.isAlreadyPutted!==!0&&(g.objectNumber=vt(),W("<<"),W("/Type /Font"),W("/BaseFont /"+_o(g.postScriptName)),W("/Subtype /Type1"),typeof g.encoding=="string"&&W("/Encoding /"+g.encoding),W("/FirstChar 32"),W("/LastChar 255"),W(">>"),W("endobj"))},Ge=function(){for(var g in Ft)Ft.hasOwnProperty(g)&&(p===!1||p===!0&&v.hasOwnProperty(g))&&Ye(Ft[g])},ot=function(g){g.objectNumber=vt();var F=[];F.push({key:"Type",value:"/XObject"}),F.push({key:"Subtype",value:"/Form"}),F.push({key:"BBox",value:"["+[$(g.x),$(g.y),$(g.x+g.width),$(g.y+g.height)].join(" ")+"]"}),F.push({key:"Matrix",value:"["+g.matrix.toString()+"]"});var oe=g.pages[1].join(`
`);Hr({data:oe,additionalKeyValues:F,objectId:g.objectNumber}),W("endobj")},xt=function(){for(var g in Mt)Mt.hasOwnProperty(g)&&ot(Mt[g])},Et=function(g,F){var oe,pe=[],ke=1/(F-1);for(oe=0;oe<1;oe+=ke)pe.push(oe);if(pe.push(1),g[0].offset!=0){var Oe={offset:0,color:g[0].color};g.unshift(Oe)}if(g[g.length-1].offset!=1){var He={offset:1,color:g[g.length-1].color};g.push(He)}for(var dt="",yt=0,$t=0;$t<pe.length;$t++){for(oe=pe[$t];oe>g[yt+1].offset;)yt++;var Bt=g[yt].offset,as=(oe-Bt)/(g[yt+1].offset-Bt),Fs=g[yt].color,qs=g[yt+1].color;dt+=te(Math.round((1-as)*Fs[0]+as*qs[0]).toString(16))+te(Math.round((1-as)*Fs[1]+as*qs[1]).toString(16))+te(Math.round((1-as)*Fs[2]+as*qs[2]).toString(16))}return dt.trim()},Zt=function(g,F){F||(F=21);var oe=vt(),pe=Et(g.colors,F),ke=[];ke.push({key:"FunctionType",value:"0"}),ke.push({key:"Domain",value:"[0.0 1.0]"}),ke.push({key:"Size",value:"["+F+"]"}),ke.push({key:"BitsPerSample",value:"8"}),ke.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ke.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Hr({data:pe,additionalKeyValues:ke,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:oe}),W("endobj"),g.objectNumber=vt(),W("<< /ShadingType "+g.type),W("/ColorSpace /DeviceRGB");var Oe="/Coords ["+$(parseFloat(g.coords[0]))+" "+$(parseFloat(g.coords[1]))+" ";g.type===2?Oe+=$(parseFloat(g.coords[2]))+" "+$(parseFloat(g.coords[3])):Oe+=$(parseFloat(g.coords[2]))+" "+$(parseFloat(g.coords[3]))+" "+$(parseFloat(g.coords[4]))+" "+$(parseFloat(g.coords[5])),W(Oe+="]"),g.matrix&&W("/Matrix ["+g.matrix.toString()+"]"),W("/Function "+oe+" 0 R"),W("/Extend [true true]"),W(">>"),W("endobj")},is=function(g,F){var oe=Wt(),pe=vt();F.push({resourcesOid:oe,objectOid:pe}),g.objectNumber=pe;var ke=[];ke.push({key:"Type",value:"/Pattern"}),ke.push({key:"PatternType",value:"1"}),ke.push({key:"PaintType",value:"1"}),ke.push({key:"TilingType",value:"1"}),ke.push({key:"BBox",value:"["+g.boundingBox.map($).join(" ")+"]"}),ke.push({key:"XStep",value:$(g.xStep)}),ke.push({key:"YStep",value:$(g.yStep)}),ke.push({key:"Resources",value:oe+" 0 R"}),g.matrix&&ke.push({key:"Matrix",value:"["+g.matrix.toString()+"]"}),Hr({data:g.stream,additionalKeyValues:ke,objectId:g.objectNumber}),W("endobj")},Rt=function(g){var F;for(F in Yt)Yt.hasOwnProperty(F)&&(Yt[F]instanceof Ii?Zt(Yt[F]):Yt[F]instanceof Do&&is(Yt[F],g))},cs=function(g){for(var F in g.objectNumber=vt(),W("<<"),g)switch(F){case"opacity":W("/ca "+L(g[F]));break;case"stroke-opacity":W("/CA "+L(g[F]))}W(">>"),W("endobj")},Us=function(){var g;for(g in rs)rs.hasOwnProperty(g)&&cs(rs[g])},Os=function(){for(var g in W("/XObject <<"),Mt)Mt.hasOwnProperty(g)&&Mt[g].objectNumber>=0&&W("/"+g+" "+Mt[g].objectNumber+" 0 R");tt.publish("putXobjectDict"),W(">>")},ar=function(){jr.oid=vt(),W("<<"),W("/Filter /Standard"),W("/V "+jr.v),W("/R "+jr.r),W("/U <"+jr.toHexString(jr.U)+">"),W("/O <"+jr.toHexString(jr.O)+">"),W("/P "+jr.P),W(">>"),W("endobj")},gi=function(){for(var g in W("/Font <<"),Ft)Ft.hasOwnProperty(g)&&(p===!1||p===!0&&v.hasOwnProperty(g))&&W("/"+g+" "+Ft[g].objectNumber+" 0 R");W(">>")},eo=function(){if(Object.keys(Yt).length>0){for(var g in W("/Shading <<"),Yt)Yt.hasOwnProperty(g)&&Yt[g]instanceof Ii&&Yt[g].objectNumber>=0&&W("/"+g+" "+Yt[g].objectNumber+" 0 R");tt.publish("putShadingPatternDict"),W(">>")}},to=function(g){if(Object.keys(Yt).length>0){for(var F in W("/Pattern <<"),Yt)Yt.hasOwnProperty(F)&&Yt[F]instanceof u.TilingPattern&&Yt[F].objectNumber>=0&&Yt[F].objectNumber<g&&W("/"+F+" "+Yt[F].objectNumber+" 0 R");tt.publish("putTilingPatternDict"),W(">>")}},xu=function(){if(Object.keys(rs).length>0){var g;for(g in W("/ExtGState <<"),rs)rs.hasOwnProperty(g)&&rs[g].objectNumber>=0&&W("/"+g+" "+rs[g].objectNumber+" 0 R");tt.publish("putGStateDict"),W(">>")}},Ys=function(g){Xt(g.resourcesOid,!0),W("<<"),W("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),gi(),eo(),to(g.objectOid),xu(),Os(),W(">>"),W("endobj")},Nc=function(){var g=[];Ge(),Us(),xt(),Rt(g),tt.publish("putResources"),g.forEach(Ys),Ys({resourcesOid:dr,objectOid:Number.MAX_SAFE_INTEGER}),tt.publish("postPutResources")},Sc=function(){tt.publish("putAdditionalObjects");for(var g=0;g<Ae.length;g++){var F=Ae[g];Xt(F.objId,!0),W(F.content),W("endobj")}tt.publish("postPutAdditionalObjects")},kc=function(g){Lt[g.fontName]=Lt[g.fontName]||{},Lt[g.fontName][g.fontStyle]=g.id},ml=function(g,F,oe,pe,ke){var Oe={id:"F"+(Object.keys(Ft).length+1).toString(10),postScriptName:g,fontName:F,fontStyle:oe,encoding:pe,isStandardFont:ke||!1,metadata:{}};return tt.publish("addFont",{font:Oe,instance:this}),Ft[Oe.id]=Oe,kc(Oe),Oe.id},vu=function(g){for(var F=0,oe=be.length;F<oe;F++){var pe=ml.call(this,g[F][0],g[F][1],g[F][2],be[F][3],!0);p===!1&&(v[pe]=!0);var ke=g[F][0].split("-");kc({id:pe,fontName:ke[0],fontStyle:ke[1]||""})}tt.publish("addFonts",{fonts:Ft,dictionary:Lt})},Ca=function(g){return g.foo=function(){try{return g.apply(this,arguments)}catch(pe){var F=pe.stack||"";~F.indexOf(" at ")&&(F=F.split(" at ")[1]);var oe="Error in function "+F.split(`
`)[0].split("<")[0]+": "+pe.message;if(!Pt.console)throw new Error(oe);Pt.console.error(oe,pe),Pt.alert&&alert(oe)}},g.foo.bar=g,g.foo},so=function(g,F){var oe,pe,ke,Oe,He,dt,yt,$t,Bt;if(ke=(F=F||{}).sourceEncoding||"Unicode",He=F.outputEncoding,(F.autoencode||He)&&Ft[St].metadata&&Ft[St].metadata[ke]&&Ft[St].metadata[ke].encoding&&(Oe=Ft[St].metadata[ke].encoding,!He&&Ft[St].encoding&&(He=Ft[St].encoding),!He&&Oe.codePages&&(He=Oe.codePages[0]),typeof He=="string"&&(He=Oe[He]),He)){for(yt=!1,dt=[],oe=0,pe=g.length;oe<pe;oe++)($t=He[g.charCodeAt(oe)])?dt.push(String.fromCharCode($t)):dt.push(g[oe]),dt[oe].charCodeAt(0)>>8&&(yt=!0);g=dt.join("")}for(oe=g.length;yt===void 0&&oe!==0;)g.charCodeAt(oe-1)>>8&&(yt=!0),oe--;if(!yt)return g;for(dt=F.noBOM?[]:[254,255],oe=0,pe=g.length;oe<pe;oe++){if((Bt=($t=g.charCodeAt(oe))>>8)>>8)throw new Error("Character at position "+oe+" of string '"+g+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");dt.push(Bt),dt.push($t-(Bt<<8))}return String.fromCharCode.apply(void 0,dt)},Vr=u.__private__.pdfEscape=u.pdfEscape=function(g,F){return so(g,F).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},fl=u.__private__.beginPage=function(g){re[++Kt]=[],Ct[Kt]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(g[0]),topRightY:Number(g[1])}},Ac(Kt),Q(re[B])},Cc=function(g,F){var oe,pe,ke;switch(r=F||r,typeof g=="string"&&(oe=j(g.toLowerCase()),Array.isArray(oe)&&(pe=oe[0],ke=oe[1])),Array.isArray(g)&&(pe=g[0]*Ve,ke=g[1]*Ve),isNaN(pe)&&(pe=n[0],ke=n[1]),(pe>14400||ke>14400)&&(Ns.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),pe=Math.min(14400,pe),ke=Math.min(14400,ke)),n=[pe,ke],r.substr(0,1)){case"l":ke>pe&&(n=[ke,pe]);break;case"p":pe>ke&&(n=[ke,pe])}fl(n),Dc(vl),W(Aa),bl!==0&&W(bl+" J"),wl!==0&&W(wl+" j"),tt.publish("addPage",{pageNumber:Kt})},yu=function(g){g>0&&g<=Kt&&(re.splice(g,1),Ct.splice(g,1),Kt--,B>Kt&&(B=Kt),this.setPage(B))},Ac=function(g){g>0&&g<=Kt&&(B=g)},bu=u.__private__.getNumberOfPages=u.getNumberOfPages=function(){return re.length-1},Pc=function(g,F,oe){var pe,ke=void 0;return oe=oe||{},g=g!==void 0?g:Ft[St].fontName,F=F!==void 0?F:Ft[St].fontStyle,pe=g.toLowerCase(),Lt[pe]!==void 0&&Lt[pe][F]!==void 0?ke=Lt[pe][F]:Lt[g]!==void 0&&Lt[g][F]!==void 0?ke=Lt[g][F]:oe.disableWarning===!1&&Ns.warn("Unable to look up font label for font '"+g+"', '"+F+"'. Refer to getFontList() for available fonts."),ke||oe.noFallback||(ke=Lt.times[F])==null&&(ke=Lt.times.normal),ke},wu=u.__private__.putInfo=function(){var g=vt(),F=function(pe){return pe};for(var oe in f!==null&&(F=jr.encryptor(g,0)),W("<<"),W("/Producer ("+Vr(F("jsPDF "+At.version))+")"),mt)mt.hasOwnProperty(oe)&&mt[oe]&&W("/"+oe.substr(0,1).toUpperCase()+oe.substr(1)+" ("+Vr(F(mt[oe]))+")");W("/CreationDate ("+Vr(F(H))+")"),W(">>"),W("endobj")},pl=u.__private__.putCatalog=function(g){var F=(g=g||{}).rootDictionaryObjId||Vs;switch(vt(),W("<<"),W("/Type /Catalog"),W("/Pages "+F+" 0 R"),Fe||(Fe="fullwidth"),Fe){case"fullwidth":W("/OpenAction [3 0 R /FitH null]");break;case"fullheight":W("/OpenAction [3 0 R /FitV null]");break;case"fullpage":W("/OpenAction [3 0 R /Fit]");break;case"original":W("/OpenAction [3 0 R /XYZ null null 1]");break;default:var oe=""+Fe;oe.substr(oe.length-1)==="%"&&(Fe=parseInt(Fe)/100),typeof Fe=="number"&&W("/OpenAction [3 0 R /XYZ null null "+L(Fe)+"]")}switch(Je||(Je="continuous"),Je){case"continuous":W("/PageLayout /OneColumn");break;case"single":W("/PageLayout /SinglePage");break;case"two":case"twoleft":W("/PageLayout /TwoColumnLeft");break;case"tworight":W("/PageLayout /TwoColumnRight")}Qe&&W("/PageMode /"+Qe),tt.publish("putCatalog"),W(">>"),W("endobj")},ju=u.__private__.putTrailer=function(){W("trailer"),W("<<"),W("/Size "+(G+1)),W("/Root "+G+" 0 R"),W("/Info "+(G-1)+" 0 R"),f!==null&&W("/Encrypt "+jr.oid+" 0 R"),W("/ID [ <"+se+"> <"+se+"> ]"),W(">>")},Nu=u.__private__.putHeader=function(){W("%PDF-"+C),W("%ºß¬à")},Su=u.__private__.putXRef=function(){var g="0000000000";W("xref"),W("0 "+(G+1)),W("0000000000 65535 f ");for(var F=1;F<=G;F++)typeof ae[F]=="function"?W((g+ae[F]()).slice(-10)+" 00000 n "):ae[F]!==void 0?W((g+ae[F]).slice(-10)+" 00000 n "):W("0000000000 00000 n ")},an=u.__private__.buildDocument=function(){X(),Q(ie),tt.publish("buildDocument"),Nu(),De(),Sc(),Nc(),f!==null&&ar(),wu(),pl();var g=ue;return Su(),ju(),W("startxref"),W(""+g),W("%%EOF"),Q(re[B]),ie.join(`
`)},ro=u.__private__.getBlob=function(g){return new Blob([Pe(g)],{type:"application/pdf"})},ao=u.output=u.__private__.output=Ca(function(g,F){switch(typeof(F=F||{})=="string"?F={filename:F}:F.filename=F.filename||"generated.pdf",g){case void 0:return an();case"save":u.save(F.filename);break;case"arraybuffer":return Pe(an());case"blob":return ro(an());case"bloburi":case"bloburl":if(Pt.URL!==void 0&&typeof Pt.URL.createObjectURL=="function")return Pt.URL&&Pt.URL.createObjectURL(ro(an()))||void 0;Ns.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var oe="",pe=an();try{oe=mm(pe)}catch(qs){oe=mm(unescape(encodeURIComponent(pe)))}return"data:application/pdf;filename="+F.filename+";base64,"+oe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Pt)==="[object Window]"){var ke="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Oe=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';F.pdfObjectUrl&&(ke=F.pdfObjectUrl,Oe="");var He='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ke+'"'+Oe+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(F)+");<\/script></body></html>",dt=Pt.open();return dt!==null&&dt.document.write(He),dt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Pt)==="[object Window]"){var yt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(F.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+F.filename+'" width="500px" height="400px" /></body></html>',$t=Pt.open();if($t!==null){$t.document.write(yt);var Bt=this;$t.document.documentElement.querySelector("#pdfViewer").onload=function(){$t.document.title=F.filename,$t.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Bt.output("bloburl"))}}return $t}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Pt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var as='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",F)+'"></iframe></body></html>',Fs=Pt.open();if(Fs!==null&&(Fs.document.write(as),Fs.document.title=F.filename),Fs||typeof safari=="undefined")return Fs;break;case"datauri":case"dataurl":return Pt.document.location.href=this.output("datauristring",F);default:return null}}),_c=function(g){return Array.isArray(Tt)===!0&&Tt.indexOf(g)>-1};switch(a){case"pt":Ve=1;break;case"mm":Ve=72/25.4;break;case"cm":Ve=72/2.54;break;case"in":Ve=72;break;case"px":Ve=_c("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ve=12;break;case"ex":Ve=6;break;default:if(typeof a!="number")throw new Error("Invalid unit: "+a);Ve=a}var jr=null;Se(),le();var ku=function(g){return f!==null?jr.encryptor(g,0):function(F){return F}},Ic=u.__private__.getPageInfo=u.getPageInfo=function(g){if(isNaN(g)||g%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Ct[g].objId,pageNumber:g,pageContext:Ct[g]}},Ot=u.__private__.getPageInfoByObjId=function(g){if(isNaN(g)||g%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var F in Ct)if(Ct[F].objId===g)break;return Ic(F)},Cu=u.__private__.getCurrentPageInfo=u.getCurrentPageInfo=function(){return{objId:Ct[B].objId,pageNumber:B,pageContext:Ct[B]}};u.addPage=function(){return Cc.apply(this,arguments),this},u.setPage=function(){return Ac.apply(this,arguments),Q.call(this,re[B]),this},u.insertPage=function(g){return this.addPage(),this.movePage(B,g),this},u.movePage=function(g,F){var oe,pe;if(g>F){oe=re[g],pe=Ct[g];for(var ke=g;ke>F;ke--)re[ke]=re[ke-1],Ct[ke]=Ct[ke-1];re[F]=oe,Ct[F]=pe,this.setPage(F)}else if(g<F){oe=re[g],pe=Ct[g];for(var Oe=g;Oe<F;Oe++)re[Oe]=re[Oe+1],Ct[Oe]=Ct[Oe+1];re[F]=oe,Ct[F]=pe,this.setPage(F)}return this},u.deletePage=function(){return yu.apply(this,arguments),this},u.__private__.text=u.text=function(g,F,oe,pe,ke){var Oe,He,dt,yt,$t,Bt,as,Fs,qs,er=(pe=pe||{}).scope||this;if(typeof g=="number"&&typeof F=="number"&&(typeof oe=="string"||Array.isArray(oe))){var Nr=oe;oe=F,F=g,g=Nr}if(arguments[3]instanceof gt?(S("The transform parameter of text() with a Matrix value"),qs=ke):(dt=arguments[4],yt=arguments[5],gs(as=arguments[3])==="object"&&as!==null||(typeof dt=="string"&&(yt=dt,dt=null),typeof as=="string"&&(yt=as,as=null),typeof as=="number"&&(dt=as,as=null),pe={flags:as,angle:dt,align:yt})),isNaN(F)||isNaN(oe)||g==null)throw new Error("Invalid arguments passed to jsPDF.text");if(g.length===0)return er;var ur="",Pa=!1,sa=typeof pe.lineHeightFactor=="number"?pe.lineHeightFactor:vi,Ya=er.internal.scaleFactor;function Bc(Ps){return Ps=Ps.split("	").join(Array(pe.TabLen||9).join(" ")),Vr(Ps,as)}function Cl(Ps){for(var _s,Js=Ps.concat(),nr=[],dn=Js.length;dn--;)typeof(_s=Js.shift())=="string"?nr.push(_s):Array.isArray(Ps)&&(_s.length===1||_s[1]===void 0&&_s[2]===void 0)?nr.push(_s[0]):nr.push([_s[0],_s[1],_s[2]]);return nr}function Al(Ps,_s){var Js;if(typeof Ps=="string")Js=_s(Ps)[0];else if(Array.isArray(Ps)){for(var nr,dn,El=Ps.concat(),bo=[],Wc=El.length;Wc--;)typeof(nr=El.shift())=="string"?bo.push(_s(nr)[0]):Array.isArray(nr)&&typeof nr[0]=="string"&&(dn=_s(nr[0],nr[1],nr[2]),bo.push([dn[0],dn[1],dn[2]]));Js=bo}return Js}var uo=!1,Pl=!0;if(typeof g=="string")uo=!0;else if(Array.isArray(g)){var _l=g.concat();He=[];for(var ho,xr=_l.length;xr--;)(typeof(ho=_l.shift())!="string"||Array.isArray(ho)&&typeof ho[0]!="string")&&(Pl=!1);uo=Pl}if(uo===!1)throw new Error('Type of text must be string or Array. "'+g+'" is not recognized.');typeof g=="string"&&(g=g.match(/[\r?\n]/)?g.split(/\r\n|\r|\n/g):[g]);var mo=Be/er.internal.scaleFactor,fo=mo*(sa-1);switch(pe.baseline){case"bottom":oe-=fo;break;case"top":oe+=mo-fo;break;case"hanging":oe+=mo-2*fo;break;case"middle":oe+=mo/2-fo}if((Bt=pe.maxWidth||0)>0&&(typeof g=="string"?g=er.splitTextToSize(g,Bt):Object.prototype.toString.call(g)==="[object Array]"&&(g=g.reduce(function(Ps,_s){return Ps.concat(er.splitTextToSize(_s,Bt))},[]))),Oe={text:g,x:F,y:oe,options:pe,mutex:{pdfEscape:Vr,activeFontKey:St,fonts:Ft,activeFontSize:Be}},tt.publish("preProcessText",Oe),g=Oe.text,dt=(pe=Oe.options).angle,!(qs instanceof gt)&&dt&&typeof dt=="number"){dt*=Math.PI/180,pe.rotationDirection===0&&(dt=-dt),T===_.ADVANCED&&(dt=-dt);var po=Math.cos(dt),Il=Math.sin(dt);qs=new gt(po,Il,-Il,po,0,0)}else dt&&dt instanceof gt&&(qs=dt);T!==_.ADVANCED||qs||(qs=Te),($t=pe.charSpace||oo)!==void 0&&(ur+=$(k($t))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Fs=pe.horizontalScale)!==void 0&&(ur+=$(100*Fs)+` Tz
`),pe.lang;var Yr=-1,Ru=pe.renderingMode!==void 0?pe.renderingMode:pe.stroke,Ll=er.internal.getCurrentPageInfo().pageContext;switch(Ru){case 0:case!1:case"fill":Yr=0;break;case 1:case!0:case"stroke":Yr=1;break;case 2:case"fillThenStroke":Yr=2;break;case 3:case"invisible":Yr=3;break;case 4:case"fillAndAddForClipping":Yr=4;break;case 5:case"strokeAndAddPathForClipping":Yr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Yr=6;break;case 7:case"addToPathForClipping":Yr=7}var Uc=Ll.usedRenderingMode!==void 0?Ll.usedRenderingMode:-1;Yr!==-1?ur+=Yr+` Tr
`:Uc!==-1&&(ur+=`0 Tr
`),Yr!==-1&&(Ll.usedRenderingMode=Yr),yt=pe.align||"left";var ha,go=Be*sa,qc=er.internal.pageSize.getWidth(),zc=Ft[St];$t=pe.charSpace||oo,Bt=pe.maxWidth||0,as=Object.assign({autoencode:!0,noBOM:!0},pe.flags);var _n=[],wi=function(Ps){return er.getStringUnitWidth(Ps,{font:zc,charSpace:$t,fontSize:Be,doKerning:!1})*Be/Ya};if(Object.prototype.toString.call(g)==="[object Array]"){var Gr;He=Cl(g),yt!=="left"&&(ha=He.map(wi));var Er,In=0;if(yt==="right"){F-=ha[0],g=[],xr=He.length;for(var on=0;on<xr;on++)on===0?(Er=Va(F),Gr=nn(oe)):(Er=k(In-ha[on]),Gr=-go),g.push([He[on],Er,Gr]),In=ha[on]}else if(yt==="center"){F-=ha[0]/2,g=[],xr=He.length;for(var ln=0;ln<xr;ln++)ln===0?(Er=Va(F),Gr=nn(oe)):(Er=k((In-ha[ln])/2),Gr=-go),g.push([He[ln],Er,Gr]),In=ha[ln]}else if(yt==="left"){g=[],xr=He.length;for(var xo=0;xo<xr;xo++)g.push(He[xo])}else if(yt==="justify"&&zc.encoding==="Identity-H"){g=[],xr=He.length,Bt=Bt!==0?Bt:qc;for(var cn=0,Gs=0;Gs<xr;Gs++)if(Gr=Gs===0?nn(oe):-go,Er=Gs===0?Va(F):cn,Gs<xr-1){var Tl=k((Bt-ha[Gs])/(He[Gs].split(" ").length-1)),Rr=He[Gs].split(" ");g.push([Rr[0]+" ",Er,Gr]),cn=0;for(var ma=1;ma<Rr.length;ma++){var vo=(wi(Rr[ma-1]+" "+Rr[ma])-wi(Rr[ma]))*Ya+Tl;ma==Rr.length-1?g.push([Rr[ma],vo,0]):g.push([Rr[ma]+" ",vo,0]),cn-=vo}}else g.push([He[Gs],Er,Gr]);g.push(["",cn,0])}else{if(yt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(g=[],xr=He.length,Bt=Bt!==0?Bt:qc,Gs=0;Gs<xr;Gs++)Gr=Gs===0?nn(oe):-go,Er=Gs===0?Va(F):0,Gs<xr-1?_n.push($(k((Bt-ha[Gs])/(He[Gs].split(" ").length-1)))):_n.push(0),g.push([He[Gs],Er,Gr])}}var $c=typeof pe.R2L=="boolean"?pe.R2L:Ke;$c===!0&&(g=Al(g,function(Ps,_s,Js){return[Ps.split("").reverse().join(""),_s,Js]})),Oe={text:g,x:F,y:oe,options:pe,mutex:{pdfEscape:Vr,activeFontKey:St,fonts:Ft,activeFontSize:Be}},tt.publish("postProcessText",Oe),g=Oe.text,Pa=Oe.mutex.isHex||!1;var Dl=Ft[St].encoding;Dl!=="WinAnsiEncoding"&&Dl!=="StandardEncoding"||(g=Al(g,function(Ps,_s,Js){return[Bc(Ps),_s,Js]})),He=Cl(g),g=[];for(var ji,Ni,Ln,Si=0,yo=1,ki=Array.isArray(He[0])?yo:Si,Tn="",Ml=function(Ps,_s,Js){var nr="";return Js instanceof gt?(Js=typeof pe.angle=="number"?Rs(Js,new gt(1,0,0,1,Ps,_s)):Rs(new gt(1,0,0,1,Ps,_s),Js),T===_.ADVANCED&&(Js=Rs(new gt(1,0,0,-1,0,0),Js)),nr=Js.join(" ")+` Tm
`):nr=$(Ps)+" "+$(_s)+` Td
`,nr},fa=0;fa<He.length;fa++){switch(Tn="",ki){case yo:Ln=(Pa?"<":"(")+He[fa][0]+(Pa?">":")"),ji=parseFloat(He[fa][1]),Ni=parseFloat(He[fa][2]);break;case Si:Ln=(Pa?"<":"(")+He[fa]+(Pa?">":")"),ji=Va(F),Ni=nn(oe)}_n!==void 0&&_n[fa]!==void 0&&(Tn=_n[fa]+` Tw
`),fa===0?g.push(Tn+Ml(ji,Ni,qs)+Ln):ki===Si?g.push(Tn+Ln):ki===yo&&g.push(Tn+Ml(ji,Ni,qs)+Ln)}g=ki===Si?g.join(` Tj
T* `):g.join(` Tj
`),g+=` Tj
`;var pa=`BT
/`;return pa+=St+" "+Be+` Tf
`,pa+=$(Be*sa)+` TL
`,pa+=yi+`
`,pa+=ur,pa+=g,W(pa+="ET"),v[St]=!0,er};var Au=u.__private__.clip=u.clip=function(g){return W(g==="evenodd"?"W*":"W"),this};u.clipEvenOdd=function(){return Au("evenodd")},u.__private__.discardPath=u.discardPath=function(){return W("n"),this};var Ha=u.__private__.isValidStyle=function(g){var F=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(g)!==-1&&(F=!0),F};u.__private__.setDefaultPathOperation=u.setDefaultPathOperation=function(g){return Ha(g)&&(h=g),this};var Lc=u.__private__.getStyle=u.getStyle=function(g){var F=h;switch(g){case"D":case"S":F="S";break;case"F":F="f";break;case"FD":case"DF":F="B";break;case"f":case"f*":case"B":case"B*":F=g}return F},Tc=u.close=function(){return W("h"),this};u.stroke=function(){return W("S"),this},u.fill=function(g){return no("f",g),this},u.fillEvenOdd=function(g){return no("f*",g),this},u.fillStroke=function(g){return no("B",g),this},u.fillStrokeEvenOdd=function(g){return no("B*",g),this};var no=function(g,F){gs(F)==="object"?_u(F,g):W(g)},gl=function(g){g===null||T===_.ADVANCED&&g===void 0||(g=Lc(g),W(g))};function Pu(g,F,oe,pe,ke){var Oe=new Do(F||this.boundingBox,oe||this.xStep,pe||this.yStep,this.gState,ke||this.matrix);Oe.stream=this.stream;var He=g+"$$"+this.cloneIndex+++"$$";return ct(He,Oe),Oe}var _u=function(g,F){var oe=pr[g.key],pe=Yt[oe];if(pe instanceof Ii)W("q"),W(Iu(F)),pe.gState&&u.setGState(pe.gState),W(g.matrix.toString()+" cm"),W("/"+oe+" sh"),W("Q");else if(pe instanceof Do){var ke=new gt(1,0,0,-1,0,Pn());g.matrix&&(ke=ke.multiply(g.matrix||Te),oe=Pu.call(pe,g.key,g.boundingBox,g.xStep,g.yStep,ke).id),W("q"),W("/Pattern cs"),W("/"+oe+" scn"),pe.gState&&u.setGState(pe.gState),W(F),W("Q")}},Iu=function(g){switch(g){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},xl=u.moveTo=function(g,F){return W($(k(g))+" "+$(I(F))+" m"),this},xi=u.lineTo=function(g,F){return W($(k(g))+" "+$(I(F))+" l"),this},Cn=u.curveTo=function(g,F,oe,pe,ke,Oe){return W([$(k(g)),$(I(F)),$(k(oe)),$(I(pe)),$(k(ke)),$(I(Oe)),"c"].join(" ")),this};u.__private__.line=u.line=function(g,F,oe,pe,ke){if(isNaN(g)||isNaN(F)||isNaN(oe)||isNaN(pe)||!Ha(ke))throw new Error("Invalid arguments passed to jsPDF.line");return T===_.COMPAT?this.lines([[oe-g,pe-F]],g,F,[1,1],ke||"S"):this.lines([[oe-g,pe-F]],g,F,[1,1]).stroke()},u.__private__.lines=u.lines=function(g,F,oe,pe,ke,Oe){var He,dt,yt,$t,Bt,as,Fs,qs,er,Nr,ur,Pa;if(typeof g=="number"&&(Pa=oe,oe=F,F=g,g=Pa),pe=pe||[1,1],Oe=Oe||!1,isNaN(F)||isNaN(oe)||!Array.isArray(g)||!Array.isArray(pe)||!Ha(ke)||typeof Oe!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(xl(F,oe),He=pe[0],dt=pe[1],$t=g.length,Nr=F,ur=oe,yt=0;yt<$t;yt++)(Bt=g[yt]).length===2?(Nr=Bt[0]*He+Nr,ur=Bt[1]*dt+ur,xi(Nr,ur)):(as=Bt[0]*He+Nr,Fs=Bt[1]*dt+ur,qs=Bt[2]*He+Nr,er=Bt[3]*dt+ur,Nr=Bt[4]*He+Nr,ur=Bt[5]*dt+ur,Cn(as,Fs,qs,er,Nr,ur));return Oe&&Tc(),gl(ke),this},u.path=function(g){for(var F=0;F<g.length;F++){var oe=g[F],pe=oe.c;switch(oe.op){case"m":xl(pe[0],pe[1]);break;case"l":xi(pe[0],pe[1]);break;case"c":Cn.apply(this,pe);break;case"h":Tc()}}return this},u.__private__.rect=u.rect=function(g,F,oe,pe,ke){if(isNaN(g)||isNaN(F)||isNaN(oe)||isNaN(pe)||!Ha(ke))throw new Error("Invalid arguments passed to jsPDF.rect");return T===_.COMPAT&&(pe=-pe),W([$(k(g)),$(I(F)),$(k(oe)),$(k(pe)),"re"].join(" ")),gl(ke),this},u.__private__.triangle=u.triangle=function(g,F,oe,pe,ke,Oe,He){if(isNaN(g)||isNaN(F)||isNaN(oe)||isNaN(pe)||isNaN(ke)||isNaN(Oe)||!Ha(He))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[oe-g,pe-F],[ke-oe,Oe-pe],[g-ke,F-Oe]],g,F,[1,1],He,!0),this},u.__private__.roundedRect=u.roundedRect=function(g,F,oe,pe,ke,Oe,He){if(isNaN(g)||isNaN(F)||isNaN(oe)||isNaN(pe)||isNaN(ke)||isNaN(Oe)||!Ha(He))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var dt=4/3*(Math.SQRT2-1);return ke=Math.min(ke,.5*oe),Oe=Math.min(Oe,.5*pe),this.lines([[oe-2*ke,0],[ke*dt,0,ke,Oe-Oe*dt,ke,Oe],[0,pe-2*Oe],[0,Oe*dt,-ke*dt,Oe,-ke,Oe],[2*ke-oe,0],[-ke*dt,0,-ke,-Oe*dt,-ke,-Oe],[0,2*Oe-pe],[0,-Oe*dt,ke*dt,-Oe,ke,-Oe]],g+ke,F,[1,1],He,!0),this},u.__private__.ellipse=u.ellipse=function(g,F,oe,pe,ke){if(isNaN(g)||isNaN(F)||isNaN(oe)||isNaN(pe)||!Ha(ke))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Oe=4/3*(Math.SQRT2-1)*oe,He=4/3*(Math.SQRT2-1)*pe;return xl(g+oe,F),Cn(g+oe,F-He,g+Oe,F-pe,g,F-pe),Cn(g-Oe,F-pe,g-oe,F-He,g-oe,F),Cn(g-oe,F+He,g-Oe,F+pe,g,F+pe),Cn(g+Oe,F+pe,g+oe,F+He,g+oe,F),gl(ke),this},u.__private__.circle=u.circle=function(g,F,oe,pe){if(isNaN(g)||isNaN(F)||isNaN(oe)||!Ha(pe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(g,F,oe,oe,pe)},u.setFont=function(g,F,oe){return oe&&(F=V(F,oe)),St=Pc(g,F,{disableWarning:!1}),this};var Lu=u.__private__.getFont=u.getFont=function(){return Ft[Pc.apply(u,arguments)]};u.__private__.getFontList=u.getFontList=function(){var g,F,oe={};for(g in Lt)if(Lt.hasOwnProperty(g))for(F in oe[g]=[],Lt[g])Lt[g].hasOwnProperty(F)&&oe[g].push(F);return oe},u.addFont=function(g,F,oe,pe,ke){var Oe=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Oe.indexOf(arguments[3])!==-1?ke=arguments[3]:arguments[3]&&Oe.indexOf(arguments[3])==-1&&(oe=V(oe,pe)),ke=ke||"Identity-H",ml.call(this,g,F,oe,ke)};var vi,vl=s.lineWidth||.200025,io=u.__private__.getLineWidth=u.getLineWidth=function(){return vl},Dc=u.__private__.setLineWidth=u.setLineWidth=function(g){return vl=g,W($(k(g))+" w"),this};u.__private__.setLineDash=At.API.setLineDash=At.API.setLineDashPattern=function(g,F){if(g=g||[],F=F||0,isNaN(F)||!Array.isArray(g))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return g=g.map(function(oe){return $(k(oe))}).join(" "),F=$(k(F)),W("["+g+"] "+F+" d"),this};var Mc=u.__private__.getLineHeight=u.getLineHeight=function(){return Be*vi};u.__private__.getLineHeight=u.getLineHeight=function(){return Be*vi};var Ec=u.__private__.setLineHeightFactor=u.setLineHeightFactor=function(g){return typeof(g=g||1.15)=="number"&&(vi=g),this},Rc=u.__private__.getLineHeightFactor=u.getLineHeightFactor=function(){return vi};Ec(s.lineHeight);var Va=u.__private__.getHorizontalCoordinate=function(g){return k(g)},nn=u.__private__.getVerticalCoordinate=function(g){return T===_.ADVANCED?g:Ct[B].mediaBox.topRightY-Ct[B].mediaBox.bottomLeftY-k(g)},Tu=u.__private__.getHorizontalCoordinateString=u.getHorizontalCoordinateString=function(g){return $(Va(g))},An=u.__private__.getVerticalCoordinateString=u.getVerticalCoordinateString=function(g){return $(nn(g))},Aa=s.strokeColor||"0 G";u.__private__.getStrokeColor=u.getDrawColor=function(){return gr(Aa)},u.__private__.setStrokeColor=u.setDrawColor=function(g,F,oe,pe){return Aa=Wr({ch1:g,ch2:F,ch3:oe,ch4:pe,pdfColorType:"draw",precision:2}),W(Aa),this};var yl=s.fillColor||"0 g";u.__private__.getFillColor=u.getFillColor=function(){return gr(yl)},u.__private__.setFillColor=u.setFillColor=function(g,F,oe,pe){return yl=Wr({ch1:g,ch2:F,ch3:oe,ch4:pe,pdfColorType:"fill",precision:2}),W(yl),this};var yi=s.textColor||"0 g",Du=u.__private__.getTextColor=u.getTextColor=function(){return gr(yi)};u.__private__.setTextColor=u.setTextColor=function(g,F,oe,pe){return yi=Wr({ch1:g,ch2:F,ch3:oe,ch4:pe,pdfColorType:"text",precision:3}),this};var oo=s.charSpace,Mu=u.__private__.getCharSpace=u.getCharSpace=function(){return parseFloat(oo||0)};u.__private__.setCharSpace=u.setCharSpace=function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return oo=g,this};var bl=0;u.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},u.__private__.setLineCap=u.setLineCap=function(g){var F=u.CapJoinStyles[g];if(F===void 0)throw new Error("Line cap style of '"+g+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return bl=F,W(F+" J"),this};var wl=0;u.__private__.setLineJoin=u.setLineJoin=function(g){var F=u.CapJoinStyles[g];if(F===void 0)throw new Error("Line join style of '"+g+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return wl=F,W(F+" j"),this},u.__private__.setLineMiterLimit=u.__private__.setMiterLimit=u.setLineMiterLimit=u.setMiterLimit=function(g){if(g=g||0,isNaN(g))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return W($(k(g))+" M"),this},u.GState=Hd,u.setGState=function(g){(g=typeof g=="string"?rs[Hs[g]]:Oc(null,g)).equals(cr)||(W("/"+g.id+" gs"),cr=g)};var Oc=function(g,F){if(!g||!Hs[g]){var oe=!1;for(var pe in rs)if(rs.hasOwnProperty(pe)&&rs[pe].equals(F)){oe=!0;break}if(oe)F=rs[pe];else{var ke="GS"+(Object.keys(rs).length+1).toString(10);rs[ke]=F,F.id=ke}return g&&(Hs[g]=F.id),tt.publish("addGState",F),F}};u.addGState=function(g,F){return Oc(g,F),this},u.saveGraphicsState=function(){return W("q"),lr.push({key:St,size:Be,color:yi}),this},u.restoreGraphicsState=function(){W("Q");var g=lr.pop();return St=g.key,Be=g.size,yi=g.color,cr=null,this},u.setCurrentTransformationMatrix=function(g){return W(g.toString()+" cm"),this},u.comment=function(g){return W("#"+g),this};var lo=function(g,F){var oe=g||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return oe},set:function(Oe){isNaN(Oe)||(oe=parseFloat(Oe))}});var pe=F||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return pe},set:function(Oe){isNaN(Oe)||(pe=parseFloat(Oe))}});var ke="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ke},set:function(Oe){ke=Oe.toString()}}),this},jl=function(g,F,oe,pe){lo.call(this,g,F),this.type="rect";var ke=oe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ke},set:function(He){isNaN(He)||(ke=parseFloat(He))}});var Oe=pe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Oe},set:function(He){isNaN(He)||(Oe=parseFloat(He))}}),this},Nl=function(){this.page=Kt,this.currentPage=B,this.pages=re.slice(0),this.pagesContext=Ct.slice(0),this.x=es,this.y=jt,this.matrix=Ls,this.width=bi(B),this.height=Pn(B),this.outputDestination=Le,this.id="",this.objectNumber=-1};Nl.prototype.restore=function(){Kt=this.page,B=this.currentPage,Ct=this.pagesContext,re=this.pages,es=this.x,jt=this.y,Ls=this.matrix,Sl(B,this.width),kl(B,this.height),Le=this.outputDestination};var Fc=function(g,F,oe,pe,ke){xs.push(new Nl),Kt=B=0,re=[],es=g,jt=F,Ls=ke,fl([oe,pe])},Eu=function(g){if(As[g])xs.pop().restore();else{var F=new Nl,oe="Xo"+(Object.keys(Mt).length+1).toString(10);F.id=oe,As[g]=oe,Mt[oe]=F,tt.publish("addFormObject",F),xs.pop().restore()}};for(var co in u.beginFormObject=function(g,F,oe,pe,ke){return Fc(g,F,oe,pe,ke),this},u.endFormObject=function(g){return Eu(g),this},u.doFormObject=function(g,F){var oe=Mt[As[g]];return W("q"),W(F.toString()+" cm"),W("/"+oe.id+" Do"),W("Q"),this},u.getFormObject=function(g){var F=Mt[As[g]];return{x:F.x,y:F.y,width:F.width,height:F.height,matrix:F.matrix}},u.save=function(g,F){return g=g||"generated.pdf",(F=F||{}).returnPromise=F.returnPromise||!1,F.returnPromise===!1?(Pi(ro(an()),g),typeof Pi.unload=="function"&&Pt.setTimeout&&setTimeout(Pi.unload,911),this):new Promise(function(oe,pe){try{var ke=Pi(ro(an()),g);typeof Pi.unload=="function"&&Pt.setTimeout&&setTimeout(Pi.unload,911),oe(ke)}catch(Oe){pe(Oe.message)}})},At.API)At.API.hasOwnProperty(co)&&(co==="events"&&At.API.events.length?function(g,F){var oe,pe,ke;for(ke=F.length-1;ke!==-1;ke--)oe=F[ke][0],pe=F[ke][1],g.subscribe.apply(g,[oe].concat(typeof pe=="function"?[pe]:pe))}(tt,At.API.events):u[co]=At.API[co]);var bi=u.getPageWidth=function(g){return(Ct[g=g||B].mediaBox.topRightX-Ct[g].mediaBox.bottomLeftX)/Ve},Sl=u.setPageWidth=function(g,F){Ct[g].mediaBox.topRightX=F*Ve+Ct[g].mediaBox.bottomLeftX},Pn=u.getPageHeight=function(g){return(Ct[g=g||B].mediaBox.topRightY-Ct[g].mediaBox.bottomLeftY)/Ve},kl=u.setPageHeight=function(g,F){Ct[g].mediaBox.topRightY=F*Ve+Ct[g].mediaBox.bottomLeftY};return u.internal={pdfEscape:Vr,getStyle:Lc,getFont:Lu,getFontSize:$e,getCharSpace:Mu,getTextColor:Du,getLineHeight:Mc,getLineHeightFactor:Rc,getLineWidth:io,write:ve,getHorizontalCoordinate:Va,getVerticalCoordinate:nn,getCoordinateString:Tu,getVerticalCoordinateString:An,collections:{},newObject:vt,newAdditionalObject:Mr,newObjectDeferred:Wt,newObjectDeferredBegin:Xt,getFilters:ua,putStream:Hr,events:tt,scaleFactor:Ve,pageSize:{getWidth:function(){return bi(B)},setWidth:function(g){Sl(B,g)},getHeight:function(){return Pn(B)},setHeight:function(g){kl(B,g)}},encryptionOptions:f,encryption:jr,getEncryptor:ku,output:ao,getNumberOfPages:bu,pages:re,out:W,f2:L,f3:N,getPageInfo:Ic,getPageInfoByObjId:Ot,getCurrentPageInfo:Cu,getPDFVersion:w,Point:lo,Rectangle:jl,Matrix:gt,hasHotfix:_c},Object.defineProperty(u.internal.pageSize,"width",{get:function(){return bi(B)},set:function(g){Sl(B,g)},enumerable:!0,configurable:!0}),Object.defineProperty(u.internal.pageSize,"height",{get:function(){return Pn(B)},set:function(g){kl(B,g)},enumerable:!0,configurable:!0}),vu.call(u,be),St="F1",Cc(n,r),tt.publish("initialized"),u}Po.prototype.lsbFirstWord=function(s){return String.fromCharCode(s>>0&255,s>>8&255,s>>16&255,s>>24&255)},Po.prototype.toHexString=function(s){return s.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Po.prototype.hexToBytes=function(s){for(var t=[],r=0;r<s.length;r+=2)t.push(String.fromCharCode(parseInt(s.substr(r,2),16)));return t.join("")},Po.prototype.processOwnerPassword=function(s,t){return pm(fm(t).substr(0,5),s)},Po.prototype.encryptor=function(s,t){var r=fm(this.encryptionKey+String.fromCharCode(255&s,s>>8&255,s>>16&255,255&t,t>>8&255)).substr(0,10);return function(a){return pm(r,a)}},Hd.prototype.equals=function(s){var t,r="id,objectNumber,equals";if(!s||gs(s)!==gs(this))return!1;var a=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!s.hasOwnProperty(t)||this[t]!==s[t])return!1;a++}for(t in s)s.hasOwnProperty(t)&&r.indexOf(t)<0&&a--;return a===0},At.API={events:[]},At.version="3.0.1";var Ws=At.API,tf=1,Zi=function(s){return s.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Co=function(s){return s.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Ut=function(s){return s.toFixed(2)},Wn=function(s){return s.toFixed(5)};Ws.__acroform__={};var ta=function(s,t){s.prototype=Object.create(t.prototype),s.prototype.constructor=s},Dp=function(s){return s*tf},Ja=function(s){var t=new e2,r=pt.internal.getHeight(s)||0,a=pt.internal.getWidth(s)||0;return t.BBox=[0,0,Number(Ut(a)),Number(Ut(r))],t},F3=Ws.__acroform__.setBit=function(s,t){if(s=s||0,t=t||0,isNaN(s)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return s|=1<<t},B3=Ws.__acroform__.clearBit=function(s,t){if(s=s||0,t=t||0,isNaN(s)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return s&=~(1<<t)},U3=Ws.__acroform__.getBit=function(s,t){if(isNaN(s)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return s&1<<t?1:0},Ks=Ws.__acroform__.getBitForPdf=function(s,t){if(isNaN(s)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return U3(s,t-1)},Xs=Ws.__acroform__.setBitForPdf=function(s,t){if(isNaN(s)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return F3(s,t-1)},Qs=Ws.__acroform__.clearBitForPdf=function(s,t){if(isNaN(s)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return B3(s,t-1)},q3=Ws.__acroform__.calculateCoordinates=function(s,t){var r=t.internal.getHorizontalCoordinate,a=t.internal.getVerticalCoordinate,n=s[0],i=s[1],o=s[2],l=s[3],c={};return c.lowerLeft_X=r(n)||0,c.lowerLeft_Y=a(i+l)||0,c.upperRight_X=r(n+o)||0,c.upperRight_Y=a(i)||0,[Number(Ut(c.lowerLeft_X)),Number(Ut(c.lowerLeft_Y)),Number(Ut(c.upperRight_X)),Number(Ut(c.upperRight_Y))]},z3=function(s){if(s.appearanceStreamContent)return s.appearanceStreamContent;if(s.V||s.DV){var t=[],r=s._V||s.DV,a=gm(s,r),n=s.scope.internal.getFont(s.fontName,s.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(s.scope.__private__.encodeColorString(s.color)),t.push("/"+n+" "+Ut(a.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(a.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=Ja(s);return i.scope=s.scope,i.stream=t.join(`
`),i}},gm=function(s,t){var r=s.fontSize===0?s.maxFontSize:s.fontSize,a={text:"",fontSize:""},n=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");n=s.multiline?n.map(function(N){return N.split(`
`)}):n.map(function(N){return[N]});var i=r,o=pt.internal.getHeight(s)||0;o=o<0?-o:o;var l=pt.internal.getWidth(s)||0;l=l<0?-l:l;var c=function(N,k,D){if(N+1<n.length){var I=k+" "+n[N+1][0];return yd(I,s,D).width<=l-4}return!1};i++;e:for(;i>0;){t="",i--;var h,f,p=yd("3",s,i).height,v=s.multiline?o-i:(o-p)/2,u=v+=2,C=0,w=0,x=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+yd(t,s,i=12).width+", FieldWidth:"+l+`
`;break}for(var j="",_=0,T=0;T<n.length;T++)if(n.hasOwnProperty(T)){var U=!1;if(n[T].length!==1&&x!==n[T].length-1){if((p+2)*(_+2)+2>o)continue e;j+=n[T][x],U=!0,w=T,T--}else{j=(j+=n[T][x]+" ").substr(j.length-1)==" "?j.substr(0,j.length-1):j;var R=parseInt(T),V=c(R,j,i),$=T>=n.length-1;if(V&&!$){j+=" ",x=0;continue}if(V||$){if($)w=R;else if(s.multiline&&(p+2)*(_+2)+2>o)continue e}else{if(!s.multiline||(p+2)*(_+2)+2>o)continue e;w=R}}for(var S="",A=C;A<=w;A++){var L=n[A];if(s.multiline){if(A===w){S+=L[x]+" ",x=(x+1)%L.length;continue}if(A===C){S+=L[L.length-1]+" ";continue}}S+=L[0]+" "}switch(S=S.substr(S.length-1)==" "?S.substr(0,S.length-1):S,f=yd(S,s,i).width,s.textAlign){case"right":h=l-f-2;break;case"center":h=(l-f)/2;break;case"left":default:h=2}t+=Ut(h)+" "+Ut(u)+` Td
`,t+="("+Zi(S)+`) Tj
`,t+=-Ut(h)+` 0 Td
`,u=-(i+2),f=0,C=U?w:w+1,_++,j=""}break}return a.text=t,a.fontSize=i,a},yd=function(s,t,r){var a=t.scope.internal.getFont(t.fontName,t.fontStyle),n=t.scope.getStringUnitWidth(s,{font:a,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:a,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:n}},$3={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},W3=function(s,t){var r={type:"reference",object:s};t.internal.getPageInfo(s.page).pageContext.annotations.find(function(a){return a.type===r.type&&a.object===r.object})===void 0&&t.internal.getPageInfo(s.page).pageContext.annotations.push(r)},H3=function(s,t){for(var r in s)if(s.hasOwnProperty(r)){var a=r,n=s[r];t.internal.newObjectDeferredBegin(n.objId,!0),gs(n)==="object"&&typeof n.putStream=="function"&&n.putStream(),delete s[a]}},V3=function(s,t){if(t.scope=s,s.internal!==void 0&&(s.internal.acroformPlugin===void 0||s.internal.acroformPlugin.isInitialized===!1)){if($a.FieldNum=0,s.internal.acroformPlugin=JSON.parse(JSON.stringify($3)),s.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");tf=s.internal.scaleFactor,s.internal.acroformPlugin.acroFormDictionaryRoot=new t2,s.internal.acroformPlugin.acroFormDictionaryRoot.scope=s,s.internal.acroformPlugin.acroFormDictionaryRoot._eventID=s.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(s)}),s.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var a=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var n in a)if(a.hasOwnProperty(n)){var i=a[n];i.objId=void 0,i.hasAnnotation&&W3(i,r)}})(s)}),s.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(s)}),s.internal.events.subscribe("postPutPages",function(r){(function(a,n){var i=!a;for(var o in a||(n.internal.newObjectDeferredBegin(n.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),n.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),a=a||n.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(a.hasOwnProperty(o)){var l=a[o],c=[],h=l.Rect;if(l.Rect&&(l.Rect=q3(l.Rect,n)),n.internal.newObjectDeferredBegin(l.objId,!0),l.DA=pt.createDefaultAppearanceStream(l),gs(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=h,l.hasAppearanceStream&&!l.appearanceStreamContent){var f=z3(l);c.push({key:"AP",value:"<</N "+f+">>"}),n.internal.acroformPlugin.xForms.push(f)}if(l.appearanceStreamContent){var p="";for(var v in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(v)){var u=l.appearanceStreamContent[v];if(p+="/"+v+" ",p+="<<",Object.keys(u).length>=1||Array.isArray(u)){for(var o in u)if(u.hasOwnProperty(o)){var C=u[o];typeof C=="function"&&(C=C.call(n,l)),p+="/"+o+" "+C+" ",n.internal.acroformPlugin.xForms.indexOf(C)>=0||n.internal.acroformPlugin.xForms.push(C)}}else typeof(C=u)=="function"&&(C=C.call(n,l)),p+="/"+o+" "+C,n.internal.acroformPlugin.xForms.indexOf(C)>=0||n.internal.acroformPlugin.xForms.push(C);p+=">>"}c.push({key:"AP",value:`<<
`+p+">>"})}n.internal.putStream({additionalKeyValues:c,objectId:l.objId}),n.internal.out("endobj")}i&&H3(n.internal.acroformPlugin.xForms,n)})(r,s)}),s.internal.acroformPlugin.isInitialized=!0}},Z1=Ws.__acroform__.arrayToPdfArray=function(s,t,r){var a=function(o){return o};if(Array.isArray(s)){for(var n="[",i=0;i<s.length;i++)switch(i!==0&&(n+=" "),gs(s[i])){case"boolean":case"number":case"object":n+=s[i].toString();break;case"string":s[i].substr(0,1)!=="/"?(t!==void 0&&r&&(a=r.internal.getEncryptor(t)),n+="("+Zi(a(s[i].toString()))+")"):n+=s[i].toString()}return n+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},vh=function(s,t,r){var a=function(n){return n};return t!==void 0&&r&&(a=r.internal.getEncryptor(t)),(s=s||"").toString(),s="("+Zi(a(s))+")"},Za=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(s){this._objId=s}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Za.prototype.toString=function(){return this.objId+" 0 R"},Za.prototype.putStream=function(){var s=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:s,objectId:this.objId}),this.scope.internal.out("endobj")},Za.prototype.getKeyValueListForStream=function(){var s=[],t=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var a=t[r],n=this[a];n&&(Array.isArray(n)?s.push({key:a,value:Z1(n,this.objId,this.scope)}):n instanceof Za?(n.scope=this.scope,s.push({key:a,value:n.objId+" 0 R"})):typeof n!="function"&&s.push({key:a,value:n}))}return s};var e2=function(){Za.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var s,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){s=r.trim()},get:function(){return s||null}})};ta(e2,Za);var t2=function(){Za.call(this);var s,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(s){var r=function(a){return a};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Zi(r(s))+")"}},set:function(r){s=r}})};ta(t2,Za);var $a=function s(){Za.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(j){if(isNaN(j))throw new Error('Invalid value "'+j+'" for attribute F supplied.');t=j}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Ks(t,3)},set:function(j){j?this.F=Xs(t,3):this.F=Qs(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(j){if(isNaN(j))throw new Error('Invalid value "'+j+'" for attribute Ff supplied.');r=j}});var a=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(a.length!==0)return a},set:function(j){a=j!==void 0?j:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[0])?0:a[0]},set:function(j){a[0]=j}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[1])?0:a[1]},set:function(j){a[1]=j}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[2])?0:a[2]},set:function(j){a[2]=j}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[3])?0:a[3]},set:function(j){a[3]=j}});var n="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return n},set:function(j){switch(j){case"/Btn":case"/Tx":case"/Ch":case"/Sig":n=j;break;default:throw new Error('Invalid value "'+j+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof Vd)return;i="FieldObject"+s.FieldNum++}var j=function(_){return _};return this.scope&&(j=this.scope.internal.getEncryptor(this.objId)),"("+Zi(j(i))+")"},set:function(j){i=j.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(j){i=j}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(j){o=j}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(j){l=j}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(j){c=j}});var h=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return h===void 0?50/tf:h},set:function(j){h=j}});var f="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return f},set:function(j){f=j}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof Vd||this instanceof zi))return vh(p,this.objId,this.scope)},set:function(j){j=j.toString(),p=j}});var v=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof fr?v:vh(v,this.objId,this.scope)},set:function(j){j=j.toString(),v=this instanceof fr?j:j.substr(0,1)==="("?Co(j.substr(1,j.length-2)):Co(j)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof fr?Co(v.substr(1,v.length-1)):v},set:function(j){j=j.toString(),v=this instanceof fr?"/"+j:j}});var u=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(u)return u},set:function(j){this.V=j}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(u)return this instanceof fr?u:vh(u,this.objId,this.scope)},set:function(j){j=j.toString(),u=this instanceof fr?j:j.substr(0,1)==="("?Co(j.substr(1,j.length-2)):Co(j)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof fr?Co(u.substr(1,u.length-1)):u},set:function(j){j=j.toString(),u=this instanceof fr?"/"+j:j}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var C,w=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return w},set:function(j){j=!!j,w=j}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(C)return C},set:function(j){C=j}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,1)},set:function(j){j?this.Ff=Xs(this.Ff,1):this.Ff=Qs(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,2)},set:function(j){j?this.Ff=Xs(this.Ff,2):this.Ff=Qs(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,3)},set:function(j){j?this.Ff=Xs(this.Ff,3):this.Ff=Qs(this.Ff,3)}});var x=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(x!==null)return x},set:function(j){if([0,1,2].indexOf(j)===-1)throw new Error('Invalid value "'+j+'" for attribute Q supplied.');x=j}}),Object.defineProperty(this,"textAlign",{get:function(){var j;switch(x){case 0:default:j="left";break;case 1:j="center";break;case 2:j="right"}return j},configurable:!0,enumerable:!0,set:function(j){switch(j){case"right":case 2:x=2;break;case"center":case 1:x=1;break;case"left":case 0:default:x=0}}})};ta($a,Za);var Ro=function(){$a.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var s=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return s},set:function(r){s=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return s},set:function(r){s=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Z1(t,this.objId,this.scope)},set:function(r){var a,n;n=[],typeof(a=r)=="string"&&(n=function(i,o,l){l||(l=1);for(var c,h=[];c=o.exec(i);)h.push(c[l]);return h}(a,/\((.*?)\)/g)),t=n}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,a){for(a=a||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),a!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,18)},set:function(r){r?this.Ff=Xs(this.Ff,18):this.Ff=Qs(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Xs(this.Ff,19):this.Ff=Qs(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,20)},set:function(r){r?(this.Ff=Xs(this.Ff,20),t.sort()):this.Ff=Qs(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,22)},set:function(r){r?this.Ff=Xs(this.Ff,22):this.Ff=Qs(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,23)},set:function(r){r?this.Ff=Xs(this.Ff,23):this.Ff=Qs(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,27)},set:function(r){r?this.Ff=Xs(this.Ff,27):this.Ff=Qs(this.Ff,27)}}),this.hasAppearanceStream=!1};ta(Ro,$a);var Oo=function(){Ro.call(this),this.fontName="helvetica",this.combo=!1};ta(Oo,Ro);var Fo=function(){Oo.call(this),this.combo=!0};ta(Fo,Oo);var _d=function(){Fo.call(this),this.edit=!0};ta(_d,Fo);var fr=function(){$a.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,15)},set:function(r){r?this.Ff=Xs(this.Ff,15):this.Ff=Qs(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,16)},set:function(r){r?this.Ff=Xs(this.Ff,16):this.Ff=Qs(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,17)},set:function(r){r?this.Ff=Xs(this.Ff,17):this.Ff=Qs(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,26)},set:function(r){r?this.Ff=Xs(this.Ff,26):this.Ff=Qs(this.Ff,26)}});var s,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var a,n=[];for(a in n.push("<<"),t)n.push("/"+a+" ("+Zi(r(t[a]))+")");return n.push(">>"),n.join(`
`)}},set:function(r){gs(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return s},set:function(r){s=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return s.substr(1,s.length-1)},set:function(r){s="/"+r}})};ta(fr,$a);var Id=function(){fr.call(this),this.pushButton=!0};ta(Id,fr);var Bo=function(){fr.call(this),this.radio=!0,this.pushButton=!1;var s=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return s},set:function(t){s=t!==void 0?t:[]}})};ta(Bo,fr);var Vd=function(){var s,t;$a.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return s},set:function(n){s=n}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(n){t=n}});var r,a={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(l){return l};this.scope&&(n=this.scope.internal.getEncryptor(this.objId));var i,o=[];for(i in o.push("<<"),a)o.push("/"+i+" ("+Zi(n(a[i]))+")");return o.push(">>"),o.join(`
`)},set:function(n){gs(n)==="object"&&(a=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return a.CA||""},set:function(n){typeof n=="string"&&(a.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(n){r=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(n){r="/"+n}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=pt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ta(Vd,$a),Bo.prototype.setAppearance=function(s){if(!("createAppearanceStream"in s)||!("getCA"in s))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=s.createAppearanceStream(r.optionName),r.caption=s.getCA()}},Bo.prototype.createOption=function(s){var t=new Vd;return t.Parent=this,t.optionName=s,this.Kids.push(t),Y3.call(this.scope,t),t};var Ld=function(){fr.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=pt.CheckBox.createAppearanceStream()};ta(Ld,fr);var zi=function(){$a.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,13)},set:function(t){t?this.Ff=Xs(this.Ff,13):this.Ff=Qs(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,21)},set:function(t){t?this.Ff=Xs(this.Ff,21):this.Ff=Qs(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,23)},set:function(t){t?this.Ff=Xs(this.Ff,23):this.Ff=Qs(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,24)},set:function(t){t?this.Ff=Xs(this.Ff,24):this.Ff=Qs(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,25)},set:function(t){t?this.Ff=Xs(this.Ff,25):this.Ff=Qs(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,26)},set:function(t){t?this.Ff=Xs(this.Ff,26):this.Ff=Qs(this.Ff,26)}});var s=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return s},set:function(t){s=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return s},set:function(t){Number.isInteger(t)&&(s=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ta(zi,$a);var Td=function(){zi.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,14)},set:function(s){s?this.Ff=Xs(this.Ff,14):this.Ff=Qs(this.Ff,14)}}),this.password=!0};ta(Td,zi);var pt={CheckBox:{createAppearanceStream:function(){return{N:{On:pt.CheckBox.YesNormal},D:{On:pt.CheckBox.YesPushDown,Off:pt.CheckBox.OffPushDown}}},YesPushDown:function(s){var t=Ja(s);t.scope=s.scope;var r=[],a=s.scope.internal.getFont(s.fontName,s.fontStyle).id,n=s.scope.__private__.encodeColorString(s.color),i=gm(s,s.caption);return r.push("0.749023 g"),r.push("0 0 "+Ut(pt.internal.getWidth(s))+" "+Ut(pt.internal.getHeight(s))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+a+" "+Ut(i.fontSize)+" Tf "+n),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(s){var t=Ja(s);t.scope=s.scope;var r=s.scope.internal.getFont(s.fontName,s.fontStyle).id,a=s.scope.__private__.encodeColorString(s.color),n=[],i=pt.internal.getHeight(s),o=pt.internal.getWidth(s),l=gm(s,s.caption);return n.push("1 g"),n.push("0 0 "+Ut(o)+" "+Ut(i)+" re"),n.push("f"),n.push("q"),n.push("0 0 1 rg"),n.push("0 0 "+Ut(o-1)+" "+Ut(i-1)+" re"),n.push("W"),n.push("n"),n.push("0 g"),n.push("BT"),n.push("/"+r+" "+Ut(l.fontSize)+" Tf "+a),n.push(l.text),n.push("ET"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(s){var t=Ja(s);t.scope=s.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Ut(pt.internal.getWidth(s))+" "+Ut(pt.internal.getHeight(s))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(s){var t={D:{Off:pt.RadioButton.Circle.OffPushDown},N:{}};return t.N[s]=pt.RadioButton.Circle.YesNormal,t.D[s]=pt.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(s){var t=Ja(s);t.scope=s.scope;var r=[],a=pt.internal.getWidth(s)<=pt.internal.getHeight(s)?pt.internal.getWidth(s)/4:pt.internal.getHeight(s)/4;a=Number((.9*a).toFixed(5));var n=pt.internal.Bezier_C,i=Number((a*n).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Wn(pt.internal.getWidth(s)/2)+" "+Wn(pt.internal.getHeight(s)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(s){var t=Ja(s);t.scope=s.scope;var r=[],a=pt.internal.getWidth(s)<=pt.internal.getHeight(s)?pt.internal.getWidth(s)/4:pt.internal.getHeight(s)/4;a=Number((.9*a).toFixed(5));var n=Number((2*a).toFixed(5)),i=Number((n*pt.internal.Bezier_C).toFixed(5)),o=Number((a*pt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Wn(pt.internal.getWidth(s)/2)+" "+Wn(pt.internal.getHeight(s)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Wn(pt.internal.getWidth(s)/2)+" "+Wn(pt.internal.getHeight(s)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),r.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),r.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),r.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(s){var t=Ja(s);t.scope=s.scope;var r=[],a=pt.internal.getWidth(s)<=pt.internal.getHeight(s)?pt.internal.getWidth(s)/4:pt.internal.getHeight(s)/4;a=Number((.9*a).toFixed(5));var n=Number((2*a).toFixed(5)),i=Number((n*pt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Wn(pt.internal.getWidth(s)/2)+" "+Wn(pt.internal.getHeight(s)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(s){var t={D:{Off:pt.RadioButton.Cross.OffPushDown},N:{}};return t.N[s]=pt.RadioButton.Cross.YesNormal,t.D[s]=pt.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(s){var t=Ja(s);t.scope=s.scope;var r=[],a=pt.internal.calculateCross(s);return r.push("q"),r.push("1 1 "+Ut(pt.internal.getWidth(s)-2)+" "+Ut(pt.internal.getHeight(s)-2)+" re"),r.push("W"),r.push("n"),r.push(Ut(a.x1.x)+" "+Ut(a.x1.y)+" m"),r.push(Ut(a.x2.x)+" "+Ut(a.x2.y)+" l"),r.push(Ut(a.x4.x)+" "+Ut(a.x4.y)+" m"),r.push(Ut(a.x3.x)+" "+Ut(a.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(s){var t=Ja(s);t.scope=s.scope;var r=pt.internal.calculateCross(s),a=[];return a.push("0.749023 g"),a.push("0 0 "+Ut(pt.internal.getWidth(s))+" "+Ut(pt.internal.getHeight(s))+" re"),a.push("f"),a.push("q"),a.push("1 1 "+Ut(pt.internal.getWidth(s)-2)+" "+Ut(pt.internal.getHeight(s)-2)+" re"),a.push("W"),a.push("n"),a.push(Ut(r.x1.x)+" "+Ut(r.x1.y)+" m"),a.push(Ut(r.x2.x)+" "+Ut(r.x2.y)+" l"),a.push(Ut(r.x4.x)+" "+Ut(r.x4.y)+" m"),a.push(Ut(r.x3.x)+" "+Ut(r.x3.y)+" l"),a.push("s"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(s){var t=Ja(s);t.scope=s.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Ut(pt.internal.getWidth(s))+" "+Ut(pt.internal.getHeight(s))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(s){var t=s.scope.internal.getFont(s.fontName,s.fontStyle).id,r=s.scope.__private__.encodeColorString(s.color);return"/"+t+" "+s.fontSize+" Tf "+r}};pt.internal={Bezier_C:.551915024494,calculateCross:function(s){var t=pt.internal.getWidth(s),r=pt.internal.getHeight(s),a=Math.min(t,r);return{x1:{x:(t-a)/2,y:(r-a)/2+a},x2:{x:(t-a)/2+a,y:(r-a)/2},x3:{x:(t-a)/2,y:(r-a)/2},x4:{x:(t-a)/2+a,y:(r-a)/2+a}}}},pt.internal.getWidth=function(s){var t=0;return gs(s)==="object"&&(t=Dp(s.Rect[2])),t},pt.internal.getHeight=function(s){var t=0;return gs(s)==="object"&&(t=Dp(s.Rect[3])),t};var Y3=Ws.addField=function(s){if(V3(this,s),!(s instanceof $a))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=s).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),s.page=s.scope.internal.getCurrentPageInfo().pageNumber,this};Ws.AcroFormChoiceField=Ro,Ws.AcroFormListBox=Oo,Ws.AcroFormComboBox=Fo,Ws.AcroFormEditBox=_d,Ws.AcroFormButton=fr,Ws.AcroFormPushButton=Id,Ws.AcroFormRadioButton=Bo,Ws.AcroFormCheckBox=Ld,Ws.AcroFormTextField=zi,Ws.AcroFormPasswordField=Td,Ws.AcroFormAppearance=pt,Ws.AcroForm={ChoiceField:Ro,ListBox:Oo,ComboBox:Fo,EditBox:_d,Button:fr,PushButton:Id,RadioButton:Bo,CheckBox:Ld,TextField:zi,PasswordField:Td,Appearance:pt},At.AcroForm={ChoiceField:Ro,ListBox:Oo,ComboBox:Fo,EditBox:_d,Button:fr,PushButton:Id,RadioButton:Bo,CheckBox:Ld,TextField:zi,PasswordField:Td,Appearance:pt};At.AcroForm;function s2(s){return s.reduce(function(t,r,a){return t[r]=a,t},{})}(function(s){s.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=s.__addimage__.getImageFileTypeByImageData=function(N,k){var D,I,H,se,ce,le=t;if((k=k||t)==="RGBA"||N.data!==void 0&&N.data instanceof Uint8ClampedArray&&"height"in N&&"width"in N)return"RGBA";if(V(N))for(ce in r)for(H=r[ce],D=0;D<H.length;D+=1){for(se=!0,I=0;I<H[D].length;I+=1)if(H[D][I]!==void 0&&H[D][I]!==N[I]){se=!1;break}if(se===!0){le=ce;break}}else for(ce in r)for(H=r[ce],D=0;D<H.length;D+=1){for(se=!0,I=0;I<H[D].length;I+=1)if(H[D][I]!==void 0&&H[D][I]!==N.charCodeAt(I)){se=!1;break}if(se===!0){le=ce;break}}return le===t&&k!==t&&(le=k),le},n=function N(k){for(var D=this.internal.write,I=this.internal.putStream,H=(0,this.internal.getFilters)();H.indexOf("FlateEncode")!==-1;)H.splice(H.indexOf("FlateEncode"),1);k.objectId=this.internal.newObject();var se=[];if(se.push({key:"Type",value:"/XObject"}),se.push({key:"Subtype",value:"/Image"}),se.push({key:"Width",value:k.width}),se.push({key:"Height",value:k.height}),k.colorSpace===x.INDEXED?se.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(k.palette.length/3-1)+" "+("sMask"in k&&k.sMask!==void 0?k.objectId+2:k.objectId+1)+" 0 R]"}):(se.push({key:"ColorSpace",value:"/"+k.colorSpace}),k.colorSpace===x.DEVICE_CMYK&&se.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),se.push({key:"BitsPerComponent",value:k.bitsPerComponent}),"decodeParameters"in k&&k.decodeParameters!==void 0&&se.push({key:"DecodeParms",value:"<<"+k.decodeParameters+">>"}),"transparency"in k&&Array.isArray(k.transparency)){for(var ce="",le=0,ne=k.transparency.length;le<ne;le++)ce+=k.transparency[le]+" "+k.transparency[le]+" ";se.push({key:"Mask",value:"["+ce+"]"})}k.sMask!==void 0&&se.push({key:"SMask",value:k.objectId+1+" 0 R"});var fe=k.filter!==void 0?["/"+k.filter]:void 0;if(I({data:k.data,additionalKeyValues:se,alreadyAppliedFilters:fe,objectId:k.objectId}),D("endobj"),"sMask"in k&&k.sMask!==void 0){var Se="/Predictor "+k.predictor+" /Colors 1 /BitsPerComponent "+k.bitsPerComponent+" /Columns "+k.width,M={width:k.width,height:k.height,colorSpace:"DeviceGray",bitsPerComponent:k.bitsPerComponent,decodeParameters:Se,data:k.sMask};"filter"in k&&(M.filter=k.filter),N.call(this,M)}if(k.colorSpace===x.INDEXED){var B=this.internal.newObject();I({data:S(new Uint8Array(k.palette)),objectId:B}),D("endobj")}},i=function(){var N=this.internal.collections.addImage_images;for(var k in N)n.call(this,N[k])},o=function(){var N,k=this.internal.collections.addImage_images,D=this.internal.write;for(var I in k)D("/I"+(N=k[I]).index,N.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var N=this.internal.collections.addImage_images;return l.call(this),N},h=function(){return Object.keys(this.internal.collections.addImage_images).length},f=function(N){return typeof s["process"+N.toUpperCase()]=="function"},p=function(N){return gs(N)==="object"&&N.nodeType===1},v=function(N,k){if(N.nodeName==="IMG"&&N.hasAttribute("src")){var D=""+N.getAttribute("src");if(D.indexOf("data:image/")===0)return rc(unescape(D).split("base64,").pop());var I=s.loadFile(D,!0);if(I!==void 0)return I}if(N.nodeName==="CANVAS"){if(N.width===0||N.height===0)throw new Error("Given canvas must have data. Canvas width: "+N.width+", height: "+N.height);var H;switch(k){case"PNG":H="image/png";break;case"WEBP":H="image/webp";break;case"JPEG":case"JPG":default:H="image/jpeg"}return rc(N.toDataURL(H,1).split("base64,").pop())}},u=function(N){var k=this.internal.collections.addImage_images;if(k){for(var D in k)if(N===k[D].alias)return k[D]}},C=function(N,k,D){return N||k||(N=-96,k=-96),N<0&&(N=-1*D.width*72/N/this.internal.scaleFactor),k<0&&(k=-1*D.height*72/k/this.internal.scaleFactor),N===0&&(N=k*D.width/D.height),k===0&&(k=N*D.height/D.width),[N,k]},w=function(N,k,D,I,H,se){var ce=C.call(this,D,I,H),le=this.internal.getCoordinateString,ne=this.internal.getVerticalCoordinateString,fe=c.call(this);if(D=ce[0],I=ce[1],fe[H.index]=H,se){se*=Math.PI/180;var Se=Math.cos(se),M=Math.sin(se),B=function(te){return te.toFixed(4)},J=[B(Se),B(M),B(-1*M),B(Se),0,0,"cm"]}this.internal.write("q"),se?(this.internal.write([1,"0","0",1,le(N),ne(k+I),"cm"].join(" ")),this.internal.write(J.join(" ")),this.internal.write([le(D),"0","0",le(I),"0","0","cm"].join(" "))):this.internal.write([le(D),"0","0",le(I),le(N),ne(k+I),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+H.index+" Do"),this.internal.write("Q")},x=s.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};s.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var j=s.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},_=s.__addimage__.sHashCode=function(N){var k,D,I=0;if(typeof N=="string")for(D=N.length,k=0;k<D;k++)I=(I<<5)-I+N.charCodeAt(k),I|=0;else if(V(N))for(D=N.byteLength/2,k=0;k<D;k++)I=(I<<5)-I+N[k],I|=0;return I},T=s.__addimage__.validateStringAsBase64=function(N){(N=N||"").toString().trim();var k=!0;return N.length===0&&(k=!1),N.length%4!=0&&(k=!1),/^[A-Za-z0-9+/]+$/.test(N.substr(0,N.length-2))===!1&&(k=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(N.substr(-2))===!1&&(k=!1),k},U=s.__addimage__.extractImageFromDataUrl=function(N){if(N==null||!(N=N.trim()).startsWith("data:"))return null;var k=N.indexOf(",");return k<0?null:N.substring(0,k).trim().endsWith("base64")?N.substring(k+1):null},R=s.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer!="undefined"&&typeof Uint8Array!="undefined"};s.__addimage__.isArrayBuffer=function(N){return R()&&N instanceof ArrayBuffer};var V=s.__addimage__.isArrayBufferView=function(N){return R()&&typeof Uint32Array!="undefined"&&(N instanceof Int8Array||N instanceof Uint8Array||typeof Uint8ClampedArray!="undefined"&&N instanceof Uint8ClampedArray||N instanceof Int16Array||N instanceof Uint16Array||N instanceof Int32Array||N instanceof Uint32Array||N instanceof Float32Array||N instanceof Float64Array)},$=s.__addimage__.binaryStringToUint8Array=function(N){for(var k=N.length,D=new Uint8Array(k),I=0;I<k;I++)D[I]=N.charCodeAt(I);return D},S=s.__addimage__.arrayBufferToBinaryString=function(N){for(var k="",D=V(N)?N:new Uint8Array(N),I=0;I<D.length;I+=8192)k+=String.fromCharCode.apply(null,D.subarray(I,I+8192));return k};s.addImage=function(){var N,k,D,I,H,se,ce,le,ne;if(typeof arguments[1]=="number"?(k=t,D=arguments[1],I=arguments[2],H=arguments[3],se=arguments[4],ce=arguments[5],le=arguments[6],ne=arguments[7]):(k=arguments[1],D=arguments[2],I=arguments[3],H=arguments[4],se=arguments[5],ce=arguments[6],le=arguments[7],ne=arguments[8]),gs(N=arguments[0])==="object"&&!p(N)&&"imageData"in N){var fe=N;N=fe.imageData,k=fe.format||k||t,D=fe.x||D||0,I=fe.y||I||0,H=fe.w||fe.width||H,se=fe.h||fe.height||se,ce=fe.alias||ce,le=fe.compression||le,ne=fe.rotation||fe.angle||ne}var Se=this.internal.getFilters();if(le===void 0&&Se.indexOf("FlateEncode")!==-1&&(le="SLOW"),isNaN(D)||isNaN(I))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var M=A.call(this,N,k,ce,le);return w.call(this,D,I,H,se,M,ne),this};var A=function(N,k,D,I){var H,se,ce;if(typeof N=="string"&&a(N)===t){N=unescape(N);var le=L(N,!1);(le!==""||(le=s.loadFile(N,!0))!==void 0)&&(N=le)}if(p(N)&&(N=v(N,k)),k=a(N,k),!f(k))throw new Error("addImage does not support files of type '"+k+"', please ensure that a plugin for '"+k+"' support is added.");if(((ce=D)==null||ce.length===0)&&(D=function(ne){return typeof ne=="string"||V(ne)?_(ne):V(ne.data)?_(ne.data):null}(N)),(H=u.call(this,D))||(R()&&(N instanceof Uint8Array||k==="RGBA"||(se=N,N=$(N))),H=this["process"+k.toUpperCase()](N,h.call(this),D,function(ne){return ne&&typeof ne=="string"&&(ne=ne.toUpperCase()),ne in s.image_compression?ne:j.NONE}(I),se)),!H)throw new Error("An unknown error occurred whilst processing the image.");return H},L=s.__addimage__.convertBase64ToBinaryString=function(N,k){k=typeof k!="boolean"||k;var D,I="";if(typeof N=="string"){var H;D=(H=U(N))!==null&&H!==void 0?H:N;try{I=rc(D)}catch(se){if(k)throw T(D)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+se.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return I};s.getImageProperties=function(N){var k,D,I="";if(p(N)&&(N=v(N)),typeof N=="string"&&a(N)===t&&((I=L(N,!1))===""&&(I=s.loadFile(N)||""),N=I),D=a(N),!f(D))throw new Error("addImage does not support files of type '"+D+"', please ensure that a plugin for '"+D+"' support is added.");if(!R()||N instanceof Uint8Array||(N=$(N)),!(k=this["process"+D.toUpperCase()](N)))throw new Error("An unknown error occurred whilst processing the image");return k.fileType=D,k}})(At.API),function(s){var t=function(r){if(r!==void 0&&r!="")return!0};At.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),s.events.push(["putPage",function(r){for(var a,n,i,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),h=r.pageContext.annotations,f=!1,p=0;p<h.length&&!f;p++)switch((a=h[p]).type){case"link":(t(a.options.url)||t(a.options.pageNumber))&&(f=!0);break;case"reference":case"text":case"freetext":f=!0}if(f!=0){this.internal.write("/Annots [");for(var v=0;v<h.length;v++){a=h[v];var u=this.internal.pdfEscape,C=this.internal.getEncryptor(r.objId);switch(a.type){case"reference":this.internal.write(" "+a.object.objId+" 0 R ");break;case"text":var w=this.internal.newAdditionalObject(),x=this.internal.newAdditionalObject(),j=this.internal.getEncryptor(w.objId),_=a.title||"Note";i="<</Type /Annot /Subtype /Text "+(n="/Rect ["+o(a.bounds.x)+" "+l(a.bounds.y+a.bounds.h)+" "+o(a.bounds.x+a.bounds.w)+" "+l(a.bounds.y)+"] ")+"/Contents ("+u(j(a.contents))+")",i+=" /Popup "+x.objId+" 0 R",i+=" /P "+c.objId+" 0 R",i+=" /T ("+u(j(_))+") >>",w.content=i;var T=w.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(n="/Rect ["+o(a.bounds.x+30)+" "+l(a.bounds.y+a.bounds.h)+" "+o(a.bounds.x+a.bounds.w+30)+" "+l(a.bounds.y)+"] ")+" /Parent "+T,a.open&&(i+=" /Open true"),i+=" >>",x.content=i,this.internal.write(w.objId,"0 R",x.objId,"0 R");break;case"freetext":n="/Rect ["+o(a.bounds.x)+" "+l(a.bounds.y)+" "+o(a.bounds.x+a.bounds.w)+" "+l(a.bounds.y+a.bounds.h)+"] ";var U=a.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+n+"/Contents ("+u(C(a.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+U+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(a.options.name){var R=this.annotations._nameMap[a.options.name];a.options.pageNumber=R.page,a.options.top=R.y}else a.options.top||(a.options.top=0);if(n="/Rect ["+a.finalBounds.x+" "+a.finalBounds.y+" "+a.finalBounds.w+" "+a.finalBounds.h+"] ",i="",a.options.url)i="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /A <</S /URI /URI ("+u(C(a.options.url))+") >>";else if(a.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(a.options.pageNumber).objId+" 0 R",a.options.magFactor=a.options.magFactor||"XYZ",a.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+a.options.top+"]";break;case"FitV":a.options.left=a.options.left||0,i+=" /FitV "+a.options.left+"]";break;case"XYZ":default:var V=l(a.options.top);a.options.left=a.options.left||0,a.options.zoom===void 0&&(a.options.zoom=0),i+=" /XYZ "+a.options.left+" "+V+" "+a.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),s.createAnnotation=function(r){var a=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":a.pageContext.annotations.push(r)}},s.link=function(r,a,n,i,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,h=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(r),y:h(a),w:c(r+n),h:h(a+i)},options:o,type:"link"})},s.textWithLink=function(r,a,n,i){var o,l,c=this.getTextWidth(r),h=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){l=i.maxWidth;var f=this.splitTextToSize(r,l).length;o=Math.ceil(h*f)}else l=c,o=h;return this.text(r,a,n,i),n+=.2*h,i.align==="center"&&(a-=c/2),i.align==="right"&&(a-=c),this.link(a,n-h,l,o,i),c},s.getTextWidth=function(r){var a=this.internal.getFontSize();return this.getStringUnitWidth(r)*a/this.internal.scaleFactor}}(At.API),function(s){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},a={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},n=[1570,1571,1573,1575];s.__arabicParser__={};var i=s.__arabicParser__.isInArabicSubstitutionA=function(w){return t[w.charCodeAt(0)]!==void 0},o=s.__arabicParser__.isArabicLetter=function(w){return typeof w=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(w)},l=s.__arabicParser__.isArabicEndLetter=function(w){return o(w)&&i(w)&&t[w.charCodeAt(0)].length<=2},c=s.__arabicParser__.isArabicAlfLetter=function(w){return o(w)&&n.indexOf(w.charCodeAt(0))>=0};s.__arabicParser__.arabicLetterHasIsolatedForm=function(w){return o(w)&&i(w)&&t[w.charCodeAt(0)].length>=1};var h=s.__arabicParser__.arabicLetterHasFinalForm=function(w){return o(w)&&i(w)&&t[w.charCodeAt(0)].length>=2};s.__arabicParser__.arabicLetterHasInitialForm=function(w){return o(w)&&i(w)&&t[w.charCodeAt(0)].length>=3};var f=s.__arabicParser__.arabicLetterHasMedialForm=function(w){return o(w)&&i(w)&&t[w.charCodeAt(0)].length==4},p=s.__arabicParser__.resolveLigatures=function(w){var x=0,j=r,_="",T=0;for(x=0;x<w.length;x+=1)j[w.charCodeAt(x)]!==void 0?(T++,typeof(j=j[w.charCodeAt(x)])=="number"&&(_+=String.fromCharCode(j),j=r,T=0),x===w.length-1&&(j=r,_+=w.charAt(x-(T-1)),x-=T-1,T=0)):(j=r,_+=w.charAt(x-T),x-=T,T=0);return _};s.__arabicParser__.isArabicDiacritic=function(w){return w!==void 0&&a[w.charCodeAt(0)]!==void 0};var v=s.__arabicParser__.getCorrectForm=function(w,x,j){return o(w)?i(w)===!1?-1:!h(w)||!o(x)&&!o(j)||!o(j)&&l(x)||l(w)&&!o(x)||l(w)&&c(x)||l(w)&&l(x)?0:f(w)&&o(x)&&!l(x)&&o(j)&&h(j)?3:l(w)||!o(j)?1:2:-1},u=function(w){var x=0,j=0,_=0,T="",U="",R="",V=(w=w||"").split("\\s+"),$=[];for(x=0;x<V.length;x+=1){for($.push(""),j=0;j<V[x].length;j+=1)T=V[x][j],U=V[x][j-1],R=V[x][j+1],o(T)?(_=v(T,U,R),$[x]+=_!==-1?String.fromCharCode(t[T.charCodeAt(0)][_]):T):$[x]+=T;$[x]=p($[x])}return $.join(" ")},C=s.__arabicParser__.processArabic=s.processArabic=function(){var w,x=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,j=[];if(Array.isArray(x)){var _=0;for(j=[],_=0;_<x.length;_+=1)Array.isArray(x[_])?j.push([u(x[_][0]),x[_][1],x[_][2]]):j.push([u(x[_])]);w=j}else w=u(x);return typeof arguments[0]=="string"?w:(arguments[0].text=w,arguments[0])};s.events.push(["preProcessText",C])}(At.API),At.API.autoPrint=function(s){var t;switch((s=s||{}).variant=s.variant||"non-conform",s.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(s){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var a=150;Object.defineProperty(this,"width",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=a+1)}});var n=300;Object.defineProperty(this,"height",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=n+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(l){i=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,a){var n;if((r=r||"2d")!=="2d")return null;for(n in a)this.pdf.context2d.hasOwnProperty(n)&&(this.pdf.context2d[n]=a[n]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},s.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(At.API),function(s){var t={left:0,top:0,bottom:0,right:0},r=!1,a=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),n.call(this))},n=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(w){c=w}});var h=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return h},set:function(w){h=w}});var f=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return f},set:function(w){f=w}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(w){p=w}});var v=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return v},set:function(w){v=w}});var u=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return u},set:function(w){u=w}});var C=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return C},set:function(w){C=w}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},s.setHeaderFunction=function(c){return a.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},s.getTextDimensions=function(c,h){a.call(this);var f=(h=h||{}).fontSize||this.getFontSize(),p=h.font||this.getFont(),v=h.scaleFactor||this.internal.scaleFactor,u=0,C=0,w=0,x=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var j=h.maxWidth;j>0?typeof c=="string"?c=this.splitTextToSize(c,j):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(T,U){return T.concat(x.splitTextToSize(U,j))},[])):c=Array.isArray(c)?c:[c];for(var _=0;_<c.length;_++)u<(w=this.getStringUnitWidth(c[_],{font:p})*f)&&(u=w);return u!==0&&(C=c.length),{w:u/=v,h:Math.max((C*f*this.getLineHeightFactor()-f*(this.getLineHeightFactor()-1))/v,0)}},s.cellAddPage=function(){a.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=s.cell=function(){var c;c=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),a.call(this);var h=this.internal.__cell__.lastCell,f=this.internal.__cell__.padding,p=this.internal.__cell__.margins||t,v=this.internal.__cell__.tableHeaderRow,u=this.internal.__cell__.printHeaders;return h.lineNumber!==void 0&&(h.lineNumber===c.lineNumber?(c.x=(h.x||0)+(h.width||0),c.y=h.y||0):h.y+h.height+c.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=p.top,u&&v&&(this.printHeaderRow(c.lineNumber,!0),c.y+=v[0].height)):c.y=h.y+h.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-f,c.y+f,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+f,{align:"center",baseline:"top",maxWidth:c.width-f-f}):this.text(c.text,c.x+f,c.y+f,{align:"left",baseline:"top",maxWidth:c.width-f-f})),this.internal.__cell__.lastCell=c,this};s.table=function(c,h,f,p,v){if(a.call(this),!f)throw new Error("No data for PDF table.");var u,C,w,x,j=[],_=[],T=[],U={},R={},V=[],$=[],S=(v=v||{}).autoSize||!1,A=v.printHeaders!==!1,L=v.css&&v.css["font-size"]!==void 0?16*v.css["font-size"]:v.fontSize||12,N=v.margins||Object.assign({width:this.getPageWidth()},t),k=typeof v.padding=="number"?v.padding:3,D=v.headerBackgroundColor||"#c8c8c8",I=v.headerTextColor||"#000";if(n.call(this),this.internal.__cell__.printHeaders=A,this.internal.__cell__.margins=N,this.internal.__cell__.table_font_size=L,this.internal.__cell__.padding=k,this.internal.__cell__.headerBackgroundColor=D,this.internal.__cell__.headerTextColor=I,this.setFontSize(L),p==null)_=j=Object.keys(f[0]),T=j.map(function(){return"left"});else if(Array.isArray(p)&&gs(p[0])==="object")for(j=p.map(function(fe){return fe.name}),_=p.map(function(fe){return fe.prompt||fe.name||""}),T=p.map(function(fe){return fe.align||"left"}),u=0;u<p.length;u+=1)R[p[u].name]=p[u].width*(19.049976/25.4);else Array.isArray(p)&&typeof p[0]=="string"&&(_=j=p,T=j.map(function(){return"left"}));if(S||Array.isArray(p)&&typeof p[0]=="string")for(u=0;u<j.length;u+=1){for(U[x=j[u]]=f.map(function(fe){return fe[x]}),this.setFont(void 0,"bold"),V.push(this.getTextDimensions(_[u],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),C=U[x],this.setFont(void 0,"normal"),w=0;w<C.length;w+=1)V.push(this.getTextDimensions(C[w],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);R[x]=Math.max.apply(null,V)+k+k,V=[]}if(A){var H={};for(u=0;u<j.length;u+=1)H[j[u]]={},H[j[u]].text=_[u],H[j[u]].align=T[u];var se=l.call(this,H,R);$=j.map(function(fe){return new i(c,h,R[fe],se,H[fe].text,void 0,H[fe].align)}),this.setTableHeaderRow($),this.printHeaderRow(1,!1)}var ce=p.reduce(function(fe,Se){return fe[Se.name]=Se.align,fe},{});for(u=0;u<f.length;u+=1){"rowStart"in v&&v.rowStart instanceof Function&&v.rowStart({row:u,data:f[u]},this);var le=l.call(this,f[u],R);for(w=0;w<j.length;w+=1){var ne=f[u][j[w]];"cellStart"in v&&v.cellStart instanceof Function&&v.cellStart({row:u,col:w,data:ne},this),o.call(this,new i(c,h,R[j[w]],le,ne,u+2,ce[j[w]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=h,this};var l=function(c,h){var f=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,v=this.internal.scaleFactor;return Object.keys(c).map(function(u){var C=c[u];return this.splitTextToSize(C.hasOwnProperty("text")?C.text:C,h[u]-f-f)},this).map(function(u){return this.getLineHeightFactor()*u.length*p/v+f+f},this).reduce(function(u,C){return Math.max(u,C)},0)};s.setTableHeaderRow=function(c){a.call(this),this.internal.__cell__.tableHeaderRow=c},s.printHeaderRow=function(c,h){if(a.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var f;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var v=[],u=0;u<this.internal.__cell__.tableHeaderRow.length;u+=1){f=this.internal.__cell__.tableHeaderRow[u].clone(),h&&(f.y=this.internal.__cell__.margins.top||0,v.push(f)),f.lineNumber=c;var C=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,f),this.setTextColor(C)}v.length>0&&this.setTableHeaderRow(v),this.setFont(void 0,"normal"),r=!1}}(At.API);var r2={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},a2=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],xm=s2(a2),n2=[100,200,300,400,500,600,700,800,900],G3=s2(n2);function vm(s){var t=s.family.replace(/"|'/g,"").toLowerCase(),r=function(i){return r2[i=i||"normal"]?i:"normal"}(s.style),a=function(i){if(!i)return 400;if(typeof i=="number")return i>=100&&i<=900&&i%100==0?i:400;if(/^\d00$/.test(i))return parseInt(i);switch(i){case"bold":return 700;case"normal":default:return 400}}(s.weight),n=function(i){return typeof xm[i=i||"normal"]=="number"?i:"normal"}(s.stretch);return{family:t,style:r,weight:a,stretch:n,src:s.src||[],ref:s.ref||{name:t,style:[n,r,a].join(" ")}}}function Mp(s,t,r,a){var n;for(n=r;n>=0&&n<t.length;n+=a)if(s[t[n]])return s[t[n]];for(n=r;n>=0&&n<t.length;n-=a)if(s[t[n]])return s[t[n]]}var J3={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Ep={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Rp(s){return[s.stretch,s.style,s.weight,s.family].join(" ")}function K3(s,t,r){for(var a=(r=r||{}).defaultFontFamily||"times",n=Object.assign({},J3,r.genericFontFamilies||{}),i=null,o=null,l=0;l<t.length;++l)if(n[(i=vm(t[l])).family]&&(i.family=n[i.family]),s.hasOwnProperty(i.family)){o=s[i.family];break}if(!(o=o||s[a]))throw new Error("Could not find a font-family for the rule '"+Rp(i)+"' and default family '"+a+"'.");if(o=function(c,h){if(h[c])return h[c];var f=xm[c],p=f<=xm.normal?-1:1,v=Mp(h,a2,f,p);if(!v)throw new Error("Could not find a matching font-stretch value for "+c);return v}(i.stretch,o),o=function(c,h){if(h[c])return h[c];for(var f=r2[c],p=0;p<f.length;++p)if(h[f[p]])return h[f[p]];throw new Error("Could not find a matching font-style for "+c)}(i.style,o),!(o=function(c,h){if(h[c])return h[c];if(c===400&&h[500])return h[500];if(c===500&&h[400])return h[400];var f=G3[c],p=Mp(h,n2,f,c<400?-1:1);if(!p)throw new Error("Could not find a matching font-weight for value "+c);return p}(i.weight,o)))throw new Error("Failed to resolve a font for the rule '"+Rp(i)+"'.");return o}function Op(s){return s.trimLeft()}function X3(s,t){for(var r=0;r<s.length;){if(s.charAt(r)===t)return[s.substring(0,r),s.substring(r+1)];r+=1}return null}function Q3(s){var t=s.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],s.substring(t[0].length)]}var bd,Fp,Bp,yh=["times"];(function(s){var t,r,a,n,i,o,l,c,h,f=function(M){return M=M||{},this.isStrokeTransparent=M.isStrokeTransparent||!1,this.strokeOpacity=M.strokeOpacity||1,this.strokeStyle=M.strokeStyle||"#000000",this.fillStyle=M.fillStyle||"#000000",this.isFillTransparent=M.isFillTransparent||!1,this.fillOpacity=M.fillOpacity||1,this.font=M.font||"10px sans-serif",this.textBaseline=M.textBaseline||"alphabetic",this.textAlign=M.textAlign||"left",this.lineWidth=M.lineWidth||1,this.lineJoin=M.lineJoin||"miter",this.lineCap=M.lineCap||"butt",this.path=M.path||[],this.transform=M.transform!==void 0?M.transform.clone():new c,this.globalCompositeOperation=M.globalCompositeOperation||"normal",this.globalAlpha=M.globalAlpha||1,this.clip_path=M.clip_path||[],this.currentPoint=M.currentPoint||new o,this.miterLimit=M.miterLimit||10,this.lastPoint=M.lastPoint||new o,this.lineDashOffset=M.lineDashOffset||0,this.lineDash=M.lineDash||[],this.margin=M.margin||[0,0,0,0],this.prevPageLastElemOffset=M.prevPageLastElemOffset||0,this.ignoreClearRect=typeof M.ignoreClearRect!="boolean"||M.ignoreClearRect,this};s.events.push(["initialized",function(){this.context2d=new p(this),t=this.internal.f2,r=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,n=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,h=new f}]);var p=function(M){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var B=M;Object.defineProperty(this,"pdf",{get:function(){return B}});var J=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return J},set:function(Q){J=!!Q}});var te=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return te},set:function(Q){te=!!Q}});var G=0;Object.defineProperty(this,"posX",{get:function(){return G},set:function(Q){isNaN(Q)||(G=Q)}});var ae=0;Object.defineProperty(this,"posY",{get:function(){return ae},set:function(Q){isNaN(Q)||(ae=Q)}}),Object.defineProperty(this,"margin",{get:function(){return h.margin},set:function(Q){var W;typeof Q=="number"?W=[Q,Q,Q,Q]:((W=new Array(4))[0]=Q[0],W[1]=Q.length>=2?Q[1]:W[0],W[2]=Q.length>=3?Q[2]:W[0],W[3]=Q.length>=4?Q[3]:W[1]),h.margin=W}});var ie=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ie},set:function(Q){ie=Q}});var ue=0;Object.defineProperty(this,"lastBreak",{get:function(){return ue},set:function(Q){ue=Q}});var Ae=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ae},set:function(Q){Ae=Q}}),Object.defineProperty(this,"ctx",{get:function(){return h},set:function(Q){Q instanceof f&&(h=Q)}}),Object.defineProperty(this,"path",{get:function(){return h.path},set:function(Q){h.path=Q}});var re=[];Object.defineProperty(this,"ctxStack",{get:function(){return re},set:function(Q){re=Q}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Q){var W;W=v(Q),this.ctx.fillStyle=W.style,this.ctx.isFillTransparent=W.a===0,this.ctx.fillOpacity=W.a,this.pdf.setFillColor(W.r,W.g,W.b,{a:W.a}),this.pdf.setTextColor(W.r,W.g,W.b,{a:W.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Q){var W=v(Q);this.ctx.strokeStyle=W.style,this.ctx.isStrokeTransparent=W.a===0,this.ctx.strokeOpacity=W.a,W.a===0?this.pdf.setDrawColor(255,255,255):(W.a,this.pdf.setDrawColor(W.r,W.g,W.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Q){["butt","round","square"].indexOf(Q)!==-1&&(this.ctx.lineCap=Q,this.pdf.setLineCap(Q))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Q){isNaN(Q)||(this.ctx.lineWidth=Q,this.pdf.setLineWidth(Q))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Q){["bevel","round","miter"].indexOf(Q)!==-1&&(this.ctx.lineJoin=Q,this.pdf.setLineJoin(Q))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Q){isNaN(Q)||(this.ctx.miterLimit=Q,this.pdf.setMiterLimit(Q))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Q){this.ctx.textBaseline=Q}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Q){["right","end","center","left","start"].indexOf(Q)!==-1&&(this.ctx.textAlign=Q)}});var je=null;function Le(Q,W){if(je===null){var ve=function(Pe){var be=[];return Object.keys(Pe).forEach(function(Be){Pe[Be].forEach(function(Fe){var $e=null;switch(Fe){case"bold":$e={family:Be,weight:"bold"};break;case"italic":$e={family:Be,style:"italic"};break;case"bolditalic":$e={family:Be,weight:"bold",style:"italic"};break;case"":case"normal":$e={family:Be}}$e!==null&&($e.ref={name:Be,style:Fe},be.push($e))})}),be}(Q.getFontList());je=function(Pe){for(var be={},Be=0;Be<Pe.length;++Be){var Fe=vm(Pe[Be]),$e=Fe.family,Ke=Fe.stretch,Qe=Fe.style,et=Fe.weight;be[$e]=be[$e]||{},be[$e][Ke]=be[$e][Ke]||{},be[$e][Ke][Qe]=be[$e][Ke][Qe]||{},be[$e][Ke][Qe][et]=Fe}return be}(ve.concat(W))}return je}var X=null;Object.defineProperty(this,"fontFaces",{get:function(){return X},set:function(Q){je=null,X=Q}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Q){var W;if(this.ctx.font=Q,(W=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Q))!==null){var ve=W[1];W[2];var Pe=W[3],be=W[4];W[5];var Be=W[6],Fe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(be)[2];be=Math.floor(Fe==="px"?parseFloat(be)*this.pdf.internal.scaleFactor:Fe==="em"?parseFloat(be)*this.pdf.getFontSize():parseFloat(be)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(be);var $e=function(mt){var St,Ve,es=[],jt=mt.trim();if(jt==="")return yh;if(jt in Ep)return[Ep[jt]];for(;jt!=="";){switch(Ve=null,St=(jt=Op(jt)).charAt(0)){case'"':case"'":Ve=X3(jt.substring(1),St);break;default:Ve=Q3(jt)}if(Ve===null||(es.push(Ve[0]),(jt=Op(Ve[1]))!==""&&jt.charAt(0)!==","))return yh;jt=jt.replace(/^,/,"")}return es}(Be);if(this.fontFaces){var Ke=K3(Le(this.pdf,this.fontFaces),$e.map(function(mt){return{family:mt,stretch:"normal",weight:Pe,style:ve}}));this.pdf.setFont(Ke.ref.name,Ke.ref.style)}else{var Qe="";(Pe==="bold"||parseInt(Pe,10)>=700||ve==="bold")&&(Qe="bold"),ve==="italic"&&(Qe+="italic"),Qe.length===0&&(Qe="normal");for(var et="",Je={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Re=0;Re<$e.length;Re++){if(this.pdf.internal.getFont($e[Re],Qe,{noFallback:!0,disableWarning:!0})!==void 0){et=$e[Re];break}if(Qe==="bolditalic"&&this.pdf.internal.getFont($e[Re],"bold",{noFallback:!0,disableWarning:!0})!==void 0)et=$e[Re],Qe="bold";else if(this.pdf.internal.getFont($e[Re],"normal",{noFallback:!0,disableWarning:!0})!==void 0){et=$e[Re],Qe="normal";break}}if(et===""){for(var ft=0;ft<$e.length;ft++)if(Je[$e[ft]]){et=Je[$e[ft]];break}}et=et===""?"Times":et,this.pdf.setFont(et,Qe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Q){this.ctx.globalCompositeOperation=Q}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Q){this.ctx.globalAlpha=Q}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Q){this.ctx.lineDashOffset=Q,Se.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Q){this.ctx.lineDash=Q,Se.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Q){this.ctx.ignoreClearRect=!!Q}})};p.prototype.setLineDash=function(M){this.lineDash=M},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){U.call(this,"fill",!1)},p.prototype.stroke=function(){U.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(M,B){if(isNaN(M)||isNaN(B))throw Ns.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var J=this.ctx.transform.applyToPoint(new o(M,B));this.path.push({type:"mt",x:J.x,y:J.y}),this.ctx.lastPoint=new o(M,B)},p.prototype.closePath=function(){var M=new o(0,0),B=0;for(B=this.path.length-1;B!==-1;B--)if(this.path[B].type==="begin"&&gs(this.path[B+1])==="object"&&typeof this.path[B+1].x=="number"){M=new o(this.path[B+1].x,this.path[B+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(M.x,M.y)},p.prototype.lineTo=function(M,B){if(isNaN(M)||isNaN(B))throw Ns.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var J=this.ctx.transform.applyToPoint(new o(M,B));this.path.push({type:"lt",x:J.x,y:J.y}),this.ctx.lastPoint=new o(J.x,J.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),U.call(this,null,!0)},p.prototype.quadraticCurveTo=function(M,B,J,te){if(isNaN(J)||isNaN(te)||isNaN(M)||isNaN(B))throw Ns.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var G=this.ctx.transform.applyToPoint(new o(J,te)),ae=this.ctx.transform.applyToPoint(new o(M,B));this.path.push({type:"qct",x1:ae.x,y1:ae.y,x:G.x,y:G.y}),this.ctx.lastPoint=new o(G.x,G.y)},p.prototype.bezierCurveTo=function(M,B,J,te,G,ae){if(isNaN(G)||isNaN(ae)||isNaN(M)||isNaN(B)||isNaN(J)||isNaN(te))throw Ns.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ie=this.ctx.transform.applyToPoint(new o(G,ae)),ue=this.ctx.transform.applyToPoint(new o(M,B)),Ae=this.ctx.transform.applyToPoint(new o(J,te));this.path.push({type:"bct",x1:ue.x,y1:ue.y,x2:Ae.x,y2:Ae.y,x:ie.x,y:ie.y}),this.ctx.lastPoint=new o(ie.x,ie.y)},p.prototype.arc=function(M,B,J,te,G,ae){if(isNaN(M)||isNaN(B)||isNaN(J)||isNaN(te)||isNaN(G))throw Ns.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ae=!!ae,!this.ctx.transform.isIdentity){var ie=this.ctx.transform.applyToPoint(new o(M,B));M=ie.x,B=ie.y;var ue=this.ctx.transform.applyToPoint(new o(0,J)),Ae=this.ctx.transform.applyToPoint(new o(0,0));J=Math.sqrt(Math.pow(ue.x-Ae.x,2)+Math.pow(ue.y-Ae.y,2))}Math.abs(G-te)>=2*Math.PI&&(te=0,G=2*Math.PI),this.path.push({type:"arc",x:M,y:B,radius:J,startAngle:te,endAngle:G,counterclockwise:ae})},p.prototype.arcTo=function(M,B,J,te,G){throw new Error("arcTo not implemented.")},p.prototype.rect=function(M,B,J,te){if(isNaN(M)||isNaN(B)||isNaN(J)||isNaN(te))throw Ns.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(M,B),this.lineTo(M+J,B),this.lineTo(M+J,B+te),this.lineTo(M,B+te),this.lineTo(M,B),this.lineTo(M+J,B),this.lineTo(M,B)},p.prototype.fillRect=function(M,B,J,te){if(isNaN(M)||isNaN(B)||isNaN(J)||isNaN(te))throw Ns.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!u.call(this)){var G={};this.lineCap!=="butt"&&(G.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(G.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(M,B,J,te),this.fill(),G.hasOwnProperty("lineCap")&&(this.lineCap=G.lineCap),G.hasOwnProperty("lineJoin")&&(this.lineJoin=G.lineJoin)}},p.prototype.strokeRect=function(M,B,J,te){if(isNaN(M)||isNaN(B)||isNaN(J)||isNaN(te))throw Ns.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");C.call(this)||(this.beginPath(),this.rect(M,B,J,te),this.stroke())},p.prototype.clearRect=function(M,B,J,te){if(isNaN(M)||isNaN(B)||isNaN(J)||isNaN(te))throw Ns.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(M,B,J,te))},p.prototype.save=function(M){M=typeof M!="boolean"||M;for(var B=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("q");if(this.pdf.setPage(B),M){this.ctx.fontSize=this.pdf.internal.getFontSize();var te=new f(this.ctx);this.ctxStack.push(this.ctx),this.ctx=te}},p.prototype.restore=function(M){M=typeof M!="boolean"||M;for(var B=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("Q");this.pdf.setPage(B),M&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var v=function(M){var B,J,te,G;if(M.isCanvasGradient===!0&&(M=M.getColor()),!M)return{r:0,g:0,b:0,a:0,style:M};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(M))B=0,J=0,te=0,G=0;else{var ae=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(M);if(ae!==null)B=parseInt(ae[1]),J=parseInt(ae[2]),te=parseInt(ae[3]),G=1;else if((ae=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(M))!==null)B=parseInt(ae[1]),J=parseInt(ae[2]),te=parseInt(ae[3]),G=parseFloat(ae[4]);else{if(G=1,typeof M=="string"&&M.charAt(0)!=="#"){var ie=new K1(M);M=ie.ok?ie.toHex():"#000000"}M.length===4?(B=M.substring(1,2),B+=B,J=M.substring(2,3),J+=J,te=M.substring(3,4),te+=te):(B=M.substring(1,3),J=M.substring(3,5),te=M.substring(5,7)),B=parseInt(B,16),J=parseInt(J,16),te=parseInt(te,16)}}return{r:B,g:J,b:te,a:G,style:M}},u=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},C=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(M,B,J,te){if(isNaN(B)||isNaN(J)||typeof M!="string")throw Ns.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(te=isNaN(te)?void 0:te,!u.call(this)){var G=le(this.ctx.transform.rotation),ae=this.ctx.transform.scaleX;k.call(this,{text:M,x:B,y:J,scale:ae,angle:G,align:this.textAlign,maxWidth:te})}},p.prototype.strokeText=function(M,B,J,te){if(isNaN(B)||isNaN(J)||typeof M!="string")throw Ns.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!C.call(this)){te=isNaN(te)?void 0:te;var G=le(this.ctx.transform.rotation),ae=this.ctx.transform.scaleX;k.call(this,{text:M,x:B,y:J,scale:ae,renderingMode:"stroke",angle:G,align:this.textAlign,maxWidth:te})}},p.prototype.measureText=function(M){if(typeof M!="string")throw Ns.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var B=this.pdf,J=this.pdf.internal.scaleFactor,te=B.internal.getFontSize(),G=B.getStringUnitWidth(M)*te/B.internal.scaleFactor,ae=function(ie){var ue=(ie=ie||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ue}}),this};return new ae({width:G*=Math.round(96*J/72*1e4)/1e4})},p.prototype.scale=function(M,B){if(isNaN(M)||isNaN(B))throw Ns.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var J=new c(M,0,0,B,0,0);this.ctx.transform=this.ctx.transform.multiply(J)},p.prototype.rotate=function(M){if(isNaN(M))throw Ns.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var B=new c(Math.cos(M),Math.sin(M),-Math.sin(M),Math.cos(M),0,0);this.ctx.transform=this.ctx.transform.multiply(B)},p.prototype.translate=function(M,B){if(isNaN(M)||isNaN(B))throw Ns.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var J=new c(1,0,0,1,M,B);this.ctx.transform=this.ctx.transform.multiply(J)},p.prototype.transform=function(M,B,J,te,G,ae){if(isNaN(M)||isNaN(B)||isNaN(J)||isNaN(te)||isNaN(G)||isNaN(ae))throw Ns.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ie=new c(M,B,J,te,G,ae);this.ctx.transform=this.ctx.transform.multiply(ie)},p.prototype.setTransform=function(M,B,J,te,G,ae){M=isNaN(M)?1:M,B=isNaN(B)?0:B,J=isNaN(J)?0:J,te=isNaN(te)?1:te,G=isNaN(G)?0:G,ae=isNaN(ae)?0:ae,this.ctx.transform=new c(M,B,J,te,G,ae)};var w=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(M,B,J,te,G,ae,ie,ue,Ae){var re=this.pdf.getImageProperties(M),je=1,Le=1,X=1,Q=1;te!==void 0&&ue!==void 0&&(X=ue/te,Q=Ae/G,je=re.width/te*ue/te,Le=re.height/G*Ae/G),ae===void 0&&(ae=B,ie=J,B=0,J=0),te!==void 0&&ue===void 0&&(ue=te,Ae=G),te===void 0&&ue===void 0&&(ue=re.width,Ae=re.height);for(var W,ve=this.ctx.transform.decompose(),Pe=le(ve.rotate.shx),be=new c,Be=(be=(be=(be=be.multiply(ve.translate)).multiply(ve.skew)).multiply(ve.scale)).applyToRectangle(new l(ae-B*X,ie-J*Q,te*je,G*Le)),Fe=x.call(this,Be),$e=[],Ke=0;Ke<Fe.length;Ke+=1)$e.indexOf(Fe[Ke])===-1&&$e.push(Fe[Ke]);if(T($e),this.autoPaging)for(var Qe=$e[0],et=$e[$e.length-1],Je=Qe;Je<et+1;Je++){this.pdf.setPage(Je);var Re=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ft=Je===1?this.posY+this.margin[0]:this.margin[0],mt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],St=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ve=Je===1?0:mt+(Je-2)*St;if(this.ctx.clip_path.length!==0){var es=this.path;W=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=_(W,this.posX+this.margin[3],-Ve+ft+this.ctx.prevPageLastElemOffset),R.call(this,"fill",!0),this.path=es}var jt=JSON.parse(JSON.stringify(Be));jt=_([jt],this.posX+this.margin[3],-Ve+ft+this.ctx.prevPageLastElemOffset)[0];var Ls=(Je>Qe||Je<et)&&w.call(this);Ls&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Re,St,null).clip().discardPath()),this.pdf.addImage(M,"JPEG",jt.x,jt.y,jt.w,jt.h,null,null,Pe),Ls&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(M,"JPEG",Be.x,Be.y,Be.w,Be.h,null,null,Pe)};var x=function(M,B,J){var te=[];B=B||this.pdf.internal.pageSize.width,J=J||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var G=this.posY+this.ctx.prevPageLastElemOffset;switch(M.type){default:case"mt":case"lt":te.push(Math.floor((M.y+G)/J)+1);break;case"arc":te.push(Math.floor((M.y+G-M.radius)/J)+1),te.push(Math.floor((M.y+G+M.radius)/J)+1);break;case"qct":var ae=ne(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x,M.y);te.push(Math.floor((ae.y+G)/J)+1),te.push(Math.floor((ae.y+ae.h+G)/J)+1);break;case"bct":var ie=fe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x2,M.y2,M.x,M.y);te.push(Math.floor((ie.y+G)/J)+1),te.push(Math.floor((ie.y+ie.h+G)/J)+1);break;case"rect":te.push(Math.floor((M.y+G)/J)+1),te.push(Math.floor((M.y+M.h+G)/J)+1)}for(var ue=0;ue<te.length;ue+=1)for(;this.pdf.internal.getNumberOfPages()<te[ue];)j.call(this);return te},j=function(){var M=this.fillStyle,B=this.strokeStyle,J=this.font,te=this.lineCap,G=this.lineWidth,ae=this.lineJoin;this.pdf.addPage(),this.fillStyle=M,this.strokeStyle=B,this.font=J,this.lineCap=te,this.lineWidth=G,this.lineJoin=ae},_=function(M,B,J){for(var te=0;te<M.length;te++)switch(M[te].type){case"bct":M[te].x2+=B,M[te].y2+=J;case"qct":M[te].x1+=B,M[te].y1+=J;case"mt":case"lt":case"arc":default:M[te].x+=B,M[te].y+=J}return M},T=function(M){return M.sort(function(B,J){return B-J})},U=function(M,B){for(var J,te,G=this.fillStyle,ae=this.strokeStyle,ie=this.lineCap,ue=this.lineWidth,Ae=Math.abs(ue*this.ctx.transform.scaleX),re=this.lineJoin,je=JSON.parse(JSON.stringify(this.path)),Le=JSON.parse(JSON.stringify(this.path)),X=[],Q=0;Q<Le.length;Q++)if(Le[Q].x!==void 0)for(var W=x.call(this,Le[Q]),ve=0;ve<W.length;ve+=1)X.indexOf(W[ve])===-1&&X.push(W[ve]);for(var Pe=0;Pe<X.length;Pe++)for(;this.pdf.internal.getNumberOfPages()<X[Pe];)j.call(this);if(T(X),this.autoPaging)for(var be=X[0],Be=X[X.length-1],Fe=be;Fe<Be+1;Fe++){this.pdf.setPage(Fe),this.fillStyle=G,this.strokeStyle=ae,this.lineCap=ie,this.lineWidth=Ae,this.lineJoin=re;var $e=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ke=Fe===1?this.posY+this.margin[0]:this.margin[0],Qe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],et=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Je=Fe===1?0:Qe+(Fe-2)*et;if(this.ctx.clip_path.length!==0){var Re=this.path;J=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=_(J,this.posX+this.margin[3],-Je+Ke+this.ctx.prevPageLastElemOffset),R.call(this,M,!0),this.path=Re}if(te=JSON.parse(JSON.stringify(je)),this.path=_(te,this.posX+this.margin[3],-Je+Ke+this.ctx.prevPageLastElemOffset),B===!1||Fe===0){var ft=(Fe>be||Fe<Be)&&w.call(this);ft&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],$e,et,null).clip().discardPath()),R.call(this,M,B),ft&&this.pdf.restoreGraphicsState()}this.lineWidth=ue}else this.lineWidth=Ae,R.call(this,M,B),this.lineWidth=ue;this.path=je},R=function(M,B){if((M!=="stroke"||B||!C.call(this))&&(M==="stroke"||B||!u.call(this))){for(var J,te,G=[],ae=this.path,ie=0;ie<ae.length;ie++){var ue=ae[ie];switch(ue.type){case"begin":G.push({begin:!0});break;case"close":G.push({close:!0});break;case"mt":G.push({start:ue,deltas:[],abs:[]});break;case"lt":var Ae=G.length;if(ae[ie-1]&&!isNaN(ae[ie-1].x)&&(J=[ue.x-ae[ie-1].x,ue.y-ae[ie-1].y],Ae>0)){for(;Ae>=0;Ae--)if(G[Ae-1].close!==!0&&G[Ae-1].begin!==!0){G[Ae-1].deltas.push(J),G[Ae-1].abs.push(ue);break}}break;case"bct":J=[ue.x1-ae[ie-1].x,ue.y1-ae[ie-1].y,ue.x2-ae[ie-1].x,ue.y2-ae[ie-1].y,ue.x-ae[ie-1].x,ue.y-ae[ie-1].y],G[G.length-1].deltas.push(J);break;case"qct":var re=ae[ie-1].x+2/3*(ue.x1-ae[ie-1].x),je=ae[ie-1].y+2/3*(ue.y1-ae[ie-1].y),Le=ue.x+2/3*(ue.x1-ue.x),X=ue.y+2/3*(ue.y1-ue.y),Q=ue.x,W=ue.y;J=[re-ae[ie-1].x,je-ae[ie-1].y,Le-ae[ie-1].x,X-ae[ie-1].y,Q-ae[ie-1].x,W-ae[ie-1].y],G[G.length-1].deltas.push(J);break;case"arc":G.push({deltas:[],abs:[],arc:!0}),Array.isArray(G[G.length-1].abs)&&G[G.length-1].abs.push(ue)}}te=B?null:M==="stroke"?"stroke":"fill";for(var ve=!1,Pe=0;Pe<G.length;Pe++)if(G[Pe].arc)for(var be=G[Pe].abs,Be=0;Be<be.length;Be++){var Fe=be[Be];Fe.type==="arc"?S.call(this,Fe.x,Fe.y,Fe.radius,Fe.startAngle,Fe.endAngle,Fe.counterclockwise,void 0,B,!ve):D.call(this,Fe.x,Fe.y),ve=!0}else if(G[Pe].close===!0)this.pdf.internal.out("h"),ve=!1;else if(G[Pe].begin!==!0){var $e=G[Pe].start.x,Ke=G[Pe].start.y;I.call(this,G[Pe].deltas,$e,Ke),ve=!0}te&&A.call(this,te),B&&L.call(this)}},V=function(M){var B=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,J=B*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return M-J;case"top":return M+B-J;case"hanging":return M+B-2*J;case"middle":return M+B/2-J;case"ideographic":return M;case"alphabetic":default:return M}},$=function(M){return M+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var M=function(){};return M.colorStops=[],M.addColorStop=function(B,J){this.colorStops.push([B,J])},M.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},M.isCanvasGradient=!0,M},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var S=function(M,B,J,te,G,ae,ie,ue,Ae){for(var re=se.call(this,J,te,G,ae),je=0;je<re.length;je++){var Le=re[je];je===0&&(Ae?N.call(this,Le.x1+M,Le.y1+B):D.call(this,Le.x1+M,Le.y1+B)),H.call(this,M,B,Le.x2,Le.y2,Le.x3,Le.y3,Le.x4,Le.y4)}ue?L.call(this):A.call(this,ie)},A=function(M){switch(M){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},L=function(){this.pdf.clip(),this.pdf.discardPath()},N=function(M,B){this.pdf.internal.out(r(M)+" "+a(B)+" m")},k=function(M){var B;switch(M.align){case"right":case"end":B="right";break;case"center":B="center";break;case"left":case"start":default:B="left"}var J=this.pdf.getTextDimensions(M.text),te=V.call(this,M.y),G=$.call(this,te)-J.h,ae=this.ctx.transform.applyToPoint(new o(M.x,te)),ie=this.ctx.transform.decompose(),ue=new c;ue=(ue=(ue=ue.multiply(ie.translate)).multiply(ie.skew)).multiply(ie.scale);for(var Ae,re,je,Le=this.ctx.transform.applyToRectangle(new l(M.x,te,J.w,J.h)),X=ue.applyToRectangle(new l(M.x,G,J.w,J.h)),Q=x.call(this,X),W=[],ve=0;ve<Q.length;ve+=1)W.indexOf(Q[ve])===-1&&W.push(Q[ve]);if(T(W),this.autoPaging)for(var Pe=W[0],be=W[W.length-1],Be=Pe;Be<be+1;Be++){this.pdf.setPage(Be);var Fe=Be===1?this.posY+this.margin[0]:this.margin[0],$e=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ke=this.pdf.internal.pageSize.height-this.margin[2],Qe=Ke-this.margin[0],et=this.pdf.internal.pageSize.width-this.margin[1],Je=et-this.margin[3],Re=Be===1?0:$e+(Be-2)*Qe;if(this.ctx.clip_path.length!==0){var ft=this.path;Ae=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=_(Ae,this.posX+this.margin[3],-1*Re+Fe),R.call(this,"fill",!0),this.path=ft}var mt=_([JSON.parse(JSON.stringify(X))],this.posX+this.margin[3],-Re+Fe+this.ctx.prevPageLastElemOffset)[0];M.scale>=.01&&(re=this.pdf.internal.getFontSize(),this.pdf.setFontSize(re*M.scale),je=this.lineWidth,this.lineWidth=je*M.scale);var St=this.autoPaging!=="text";if(St||mt.y+mt.h<=Ke){if(St||mt.y>=Fe&&mt.x<=et){var Ve=St?M.text:this.pdf.splitTextToSize(M.text,M.maxWidth||et-mt.x)[0],es=_([JSON.parse(JSON.stringify(Le))],this.posX+this.margin[3],-Re+Fe+this.ctx.prevPageLastElemOffset)[0],jt=St&&(Be>Pe||Be<be)&&w.call(this);jt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Je,Qe,null).clip().discardPath()),this.pdf.text(Ve,es.x,es.y,{angle:M.angle,align:B,renderingMode:M.renderingMode}),jt&&this.pdf.restoreGraphicsState()}}else mt.y<Ke&&(this.ctx.prevPageLastElemOffset+=Ke-mt.y);M.scale>=.01&&(this.pdf.setFontSize(re),this.lineWidth=je)}else M.scale>=.01&&(re=this.pdf.internal.getFontSize(),this.pdf.setFontSize(re*M.scale),je=this.lineWidth,this.lineWidth=je*M.scale),this.pdf.text(M.text,ae.x+this.posX,ae.y+this.posY,{angle:M.angle,align:B,renderingMode:M.renderingMode,maxWidth:M.maxWidth}),M.scale>=.01&&(this.pdf.setFontSize(re),this.lineWidth=je)},D=function(M,B,J,te){J=J||0,te=te||0,this.pdf.internal.out(r(M+J)+" "+a(B+te)+" l")},I=function(M,B,J){return this.pdf.lines(M,B,J,null,null)},H=function(M,B,J,te,G,ae,ie,ue){this.pdf.internal.out([t(n(J+M)),t(i(te+B)),t(n(G+M)),t(i(ae+B)),t(n(ie+M)),t(i(ue+B)),"c"].join(" "))},se=function(M,B,J,te){for(var G=2*Math.PI,ae=Math.PI/2;B>J;)B-=G;var ie=Math.abs(J-B);ie<G&&te&&(ie=G-ie);for(var ue=[],Ae=te?-1:1,re=B;ie>1e-5;){var je=re+Ae*Math.min(ie,ae);ue.push(ce.call(this,M,re,je)),ie-=Math.abs(je-re),re=je}return ue},ce=function(M,B,J){var te=(J-B)/2,G=M*Math.cos(te),ae=M*Math.sin(te),ie=G,ue=-ae,Ae=ie*ie+ue*ue,re=Ae+ie*G+ue*ae,je=4/3*(Math.sqrt(2*Ae*re)-re)/(ie*ae-ue*G),Le=ie-je*ue,X=ue+je*ie,Q=Le,W=-X,ve=te+B,Pe=Math.cos(ve),be=Math.sin(ve);return{x1:M*Math.cos(B),y1:M*Math.sin(B),x2:Le*Pe-X*be,y2:Le*be+X*Pe,x3:Q*Pe-W*be,y3:Q*be+W*Pe,x4:M*Math.cos(J),y4:M*Math.sin(J)}},le=function(M){return 180*M/Math.PI},ne=function(M,B,J,te,G,ae){var ie=M+.5*(J-M),ue=B+.5*(te-B),Ae=G+.5*(J-G),re=ae+.5*(te-ae),je=Math.min(M,G,ie,Ae),Le=Math.max(M,G,ie,Ae),X=Math.min(B,ae,ue,re),Q=Math.max(B,ae,ue,re);return new l(je,X,Le-je,Q-X)},fe=function(M,B,J,te,G,ae,ie,ue){var Ae,re,je,Le,X,Q,W,ve,Pe,be,Be,Fe,$e,Ke,Qe=J-M,et=te-B,Je=G-J,Re=ae-te,ft=ie-G,mt=ue-ae;for(re=0;re<41;re++)Pe=(W=(je=M+(Ae=re/40)*Qe)+Ae*((X=J+Ae*Je)-je))+Ae*(X+Ae*(G+Ae*ft-X)-W),be=(ve=(Le=B+Ae*et)+Ae*((Q=te+Ae*Re)-Le))+Ae*(Q+Ae*(ae+Ae*mt-Q)-ve),re==0?(Be=Pe,Fe=be,$e=Pe,Ke=be):(Be=Math.min(Be,Pe),Fe=Math.min(Fe,be),$e=Math.max($e,Pe),Ke=Math.max(Ke,be));return new l(Math.round(Be),Math.round(Fe),Math.round($e-Be),Math.round(Ke-Fe))},Se=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var M,B,J=(M=this.ctx.lineDash,B=this.ctx.lineDashOffset,JSON.stringify({lineDash:M,lineDashOffset:B}));this.prevLineDash!==J&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=J)}}})(At.API),function(s){var t=function(i){var o,l,c,h,f,p,v,u,C,w;for(l=[],c=0,h=(i+=o="\0\0\0\0".slice(i.length%4||4)).length;h>c;c+=4)(f=(i.charCodeAt(c)<<24)+(i.charCodeAt(c+1)<<16)+(i.charCodeAt(c+2)<<8)+i.charCodeAt(c+3))!==0?(p=(f=((f=((f=((f=(f-(w=f%85))/85)-(C=f%85))/85)-(u=f%85))/85)-(v=f%85))/85)%85,l.push(p+33,v+33,u+33,C+33,w+33)):l.push(122);return function(x,j){for(var _=j;_>0;_--)x.pop()}(l,o.length),String.fromCharCode.apply(String,l)+"~>"},r=function(i){var o,l,c,h,f,p=String,v="length",u=255,C="charCodeAt",w="slice",x="replace";for(i[w](-2),i=i[w](0,-2)[x](/\s/g,"")[x]("z","!!!!!"),c=[],h=0,f=(i+=o="uuuuu"[w](i[v]%5||5))[v];f>h;h+=5)l=52200625*(i[C](h)-33)+614125*(i[C](h+1)-33)+7225*(i[C](h+2)-33)+85*(i[C](h+3)-33)+(i[C](h+4)-33),c.push(u&l>>24,u&l>>16,u&l>>8,u&l);return function(j,_){for(var T=_;T>0;T--)j.pop()}(c,o[v]),p.fromCharCode.apply(p,c)},a=function(i){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),o.test(i)===!1)return"";for(var l="",c=0;c<i.length;c+=2)l+=String.fromCharCode("0x"+(i[c]+i[c+1]));return l},n=function(i){for(var o=new Uint8Array(i.length),l=i.length;l--;)o[l]=i.charCodeAt(l);return i=(o=hm(o)).reduce(function(c,h){return c+String.fromCharCode(h)},"")};s.processDataByFilters=function(i,o){var l=0,c=i||"",h=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":c=r(c),h.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),h.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=a(c),h.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(f){return("0"+f.charCodeAt().toString(16)).slice(-2)}).join("")+">",h.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=n(c),h.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:c,reverseChain:h.reverse().join(" ")}}}(At.API),function(s){s.loadFile=function(t,r,a){return function(n,i,o){i=i!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=function(c,h,f){var p=new XMLHttpRequest,v=0,u=function(C){var w=C.length,x=[],j=String.fromCharCode;for(v=0;v<w;v+=1)x.push(j(255&C.charCodeAt(v)));return x.join("")};if(p.open("GET",c,!h),p.overrideMimeType("text/plain; charset=x-user-defined"),h===!1&&(p.onload=function(){p.status===200?f(u(this.responseText)):f(void 0)}),p.send(null),h&&p.status===200)return u(p.responseText)}(n,i,o)}catch(c){}return l}(t,r,a)},s.loadImageFile=s.loadFile}(At.API),function(s){function t(){return(Pt.html2canvas?Promise.resolve(Pt.html2canvas):om(()=>import("./html2canvas.esm-Bhn31G5V.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function r(){return(Pt.DOMPurify?Promise.resolve(Pt.DOMPurify):om(()=>import("./purify.es-B7tJ63FD.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var a=function(o){var l=gs(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},n=function(o,l){var c=document.createElement(o);for(var h in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[h]=l.style[h];return c},i=function o(l){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),h=o.convert(Promise.resolve(),c);return h=(h=h.setProgress(1,o,1,[o])).set(l)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(o,l){return o.__proto__=l||i.prototype,o},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(o,l){return this.then(function(){switch(l=l||function(c){switch(a(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(r).then(function(c){return this.set({src:n("div",{innerHTML:o,dompurify:c})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},i.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=function c(h,f){for(var p=h.nodeType===3?document.createTextNode(h.nodeValue):h.cloneNode(!1),v=h.firstChild;v;v=v.nextSibling)f!==!0&&v.nodeType===1&&v.nodeName==="SCRIPT"||p.appendChild(c(v,f));return h.nodeType===1&&(h.nodeName==="CANVAS"?(p.width=h.width,p.height=h.height,p.getContext("2d").drawImage(h,0,0)):h.nodeName!=="TEXTAREA"&&h.nodeName!=="SELECT"||(p.value=h.value),p.addEventListener("load",function(){p.scrollTop=h.scrollTop,p.scrollLeft=h.scrollLeft},!0)),p}(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=n("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=n("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(n("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},i.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},i.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=this.opt.jsPDF,h=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=h,h)for(var v=0;v<h.length;++v){var u=h[v],C=u.src.find(function(w){return w.format==="truetype"});C&&c.addFont(C.url,u.ref.name,u.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,c.context2d.save(!0),l(this.prop.container,p)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},i.prototype.output=function(o,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},i.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,l)})},i.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},i.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},i.prototype.set=function(o){if(a(o)!=="object")return this;var l=Object.keys(o||{}).map(function(c){if(c in i.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}},this);return this.then(function(){return this.thenList(l)})},i.prototype.get=function(o,l){return this.then(function(){var c=o in i.template.prop?this.prop[o]:this.opt[o];return l?l(c):c})},i.prototype.setMargin=function(o){return this.then(function(){switch(a(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},i.prototype.setPageSize=function(o){function l(c,h){return Math.floor(c*h/72*96)}return this.then(function(){(o=o||At.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},i.prototype.setProgress=function(o,l,c,h){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),h!=null&&(this.progress.stack=h),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(o,l,c,h){return this.setProgress(o?this.progress.val+o:null,l||null,c?this.progress.n+c:null,h?this.progress.stack.concat(h):null)},i.prototype.then=function(o,l){var c=this;return this.thenCore(o,l,function(h,f){return c.updateProgress(null,null,1,[h]),Promise.prototype.then.call(this,function(p){return c.updateProgress(null,h),p}).then(h,f).then(function(p){return c.updateProgress(1),p})})},i.prototype.thenCore=function(o,l,c){c=c||Promise.prototype.then,o&&(o=o.bind(this)),l&&(l=l.bind(this));var h=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:i.convert(Object.assign({},this),Promise.prototype),f=c.call(h,o,l);return i.convert(f,this.__proto__)},i.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},i.prototype.thenList=function(o){var l=this;return o.forEach(function(c){l=l.thenCore(c)}),l},i.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return i.convert(l,this)},i.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},i.prototype.error=function(o){return this.then(function(){throw new Error(o)})},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,At.getPageSize=function(o,l,c){if(gs(o)==="object"){var h=o;o=h.orientation,l=h.unit||l,c=h.format||c}l=l||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var f,p=(""+c).toLowerCase(),v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+l}var u,C=0,w=0;if(v.hasOwnProperty(p))C=v[p][1]/f,w=v[p][0]/f;else try{C=c[1],w=c[0]}catch(x){throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",w>C&&(u=w,w=C,C=u);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",C>w&&(u=w,w=C,C=u)}return{width:w,height:C,unit:l,k:f,orientation:o}},s.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(vm):null;var c=new i(l);return l.worker?c:c.from(o).doCallback()}}(At.API),At.API.addJS=function(s){return Bp=s,this.internal.events.subscribe("postPutResources",function(){bd=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(bd+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Fp=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Bp+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){bd!==void 0&&Fp!==void 0&&this.internal.out("/Names <</JavaScript "+bd+" 0 R>>")}),this},function(s){var t;s.events.push(["postPutResources",function(){var r=this,a=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var n=r.outline.render().split(/\r\n/),i=0;i<n.length;i++){var o=n[i],l=a.exec(o);if(l!=null){var c=l[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var h=this.internal.pages.length,f=[];for(i=0;i<h;i++){var p=r.internal.newObject();f.push(p);var v=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+v.objId+" 0 R /XYZ null null null]>> endobj")}var u=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<f.length;i++)r.internal.write("(page_"+(i+1)+")"+f[i]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+u+" 0 R"),r.internal.write(">>","endobj")}}]),s.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),s.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(a,n,i){var o={title:n,options:i,children:[]};return a==null&&(a=this.root),a.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(a){a.id=r.internal.newObjectDeferred();for(var n=0;n<a.children.length;n++)this.genIds_r(a.children[n])},r.outline.renderRoot=function(a){this.objStart(a),this.line("/Type /Outlines"),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1]))),this.line("/Count "+this.count_r({count:0},a)),this.objEnd()},r.outline.renderItems=function(a){for(var n=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<a.children.length;i++){var o=a.children[i];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(a)),i>0&&this.line("/Prev "+this.makeRef(a.children[i-1])),i<a.children.length-1&&this.line("/Next "+this.makeRef(a.children[i+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+n(0)+" 0]")}this.objEnd()}for(var h=0;h<a.children.length;h++)this.renderItems(a.children[h])},r.outline.line=function(a){this.ctx.val+=a+`\r
`},r.outline.makeRef=function(a){return a.id+" 0 R"},r.outline.makeString=function(a){return"("+r.internal.pdfEscape(a)+")"},r.outline.objStart=function(a){this.ctx.val+=`\r
`+a.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(a,n){for(var i=0;i<n.children.length;i++)a.count++,this.count_r(a,n.children[i]);return a.count}}])}(At.API),function(s){var t=[192,193,194,195,196,197,198,199];s.processJPEG=function(r,a,n,i,o,l){var c,h=this.decode.DCT_DECODE,f=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(c=function(p){for(var v,u=256*p.charCodeAt(4)+p.charCodeAt(5),C=p.length,w={width:0,height:0,numcomponents:1},x=4;x<C;x+=2){if(x+=u,t.indexOf(p.charCodeAt(x+1))!==-1){v=256*p.charCodeAt(x+5)+p.charCodeAt(x+6),w={width:256*p.charCodeAt(x+7)+p.charCodeAt(x+8),height:v,numcomponents:p.charCodeAt(x+9)};break}u=256*p.charCodeAt(x+2)+p.charCodeAt(x+3)}return w}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}f={data:r,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:h,index:a,alias:n}}return f}}(At.API);var Ao,wd,Up,qp,zp,Z3=function(){var s,t,r;function a(i){var o,l,c,h,f,p,v,u,C,w,x,j,_,T;for(this.data=i,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},p=null;;){switch(o=this.readUInt32(),C=function(){var U,R;for(R=[],U=0;U<4;++U)R.push(String.fromCharCode(this.data[this.pos++]));return R}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":p&&this.animation.frames.push(p),this.pos+=4,p={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},f=this.readUInt16(),h=this.readUInt16()||100,p.delay=1e3*f/h,p.disposeOp=this.data[this.pos++],p.blendOp=this.data[this.pos++],p.data=[];break;case"IDAT":case"fdAT":for(C==="fdAT"&&(this.pos+=4,o-=4),i=(p!=null?p.data:void 0)||this.imgData,j=0;0<=o?j<o:j>o;0<=o?++j:--j)i.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((w=c-this.transparency.indexed.length)>0)for(_=0;0<=w?_<w:_>w;0<=w?++_:--_)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":v=(x=this.read(o)).indexOf(0),u=String.fromCharCode.apply(String,x.slice(0,v)),this.text[u]=String.fromCharCode.apply(String,x.slice(v+1));break;case"IEND":return p&&this.animation.frames.push(p),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=(T=this.colorType)===4||T===6,l=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*l,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}a.prototype.read=function(i){var o,l;for(l=[],o=0;0<=i?o<i:o>i;0<=i?++o:--o)l.push(this.data[this.pos++]);return l},a.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.decodePixels=function(i){var o=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*o),c=0,h=this;if(i==null&&(i=this.imgData),i.length===0)return new Uint8Array(0);function f(p,v,u,C){var w,x,j,_,T,U,R,V,$,S,A,L,N,k,D,I,H,se,ce,le,ne,fe=Math.ceil((h.width-p)/u),Se=Math.ceil((h.height-v)/C),M=h.width==fe&&h.height==Se;for(k=o*fe,L=M?l:new Uint8Array(k*Se),U=i.length,N=0,x=0;N<Se&&c<U;){switch(i[c++]){case 0:for(_=H=0;H<k;_=H+=1)L[x++]=i[c++];break;case 1:for(_=se=0;se<k;_=se+=1)w=i[c++],T=_<o?0:L[x-o],L[x++]=(w+T)%256;break;case 2:for(_=ce=0;ce<k;_=ce+=1)w=i[c++],j=(_-_%o)/o,D=N&&L[(N-1)*k+j*o+_%o],L[x++]=(D+w)%256;break;case 3:for(_=le=0;le<k;_=le+=1)w=i[c++],j=(_-_%o)/o,T=_<o?0:L[x-o],D=N&&L[(N-1)*k+j*o+_%o],L[x++]=(w+Math.floor((T+D)/2))%256;break;case 4:for(_=ne=0;ne<k;_=ne+=1)w=i[c++],j=(_-_%o)/o,T=_<o?0:L[x-o],N===0?D=I=0:(D=L[(N-1)*k+j*o+_%o],I=j&&L[(N-1)*k+(j-1)*o+_%o]),R=T+D-I,V=Math.abs(R-T),S=Math.abs(R-D),A=Math.abs(R-I),$=V<=S&&V<=A?T:S<=A?D:I,L[x++]=(w+$)%256;break;default:throw new Error("Invalid filter algorithm: "+i[c-1])}if(!M){var B=((v+N*C)*h.width+p)*o,J=N*k;for(_=0;_<fe;_+=1){for(var te=0;te<o;te+=1)l[B++]=L[J++];B+=(u-1)*o}}N++}}return i=L3(i),h.interlaceMethod==1?(f(0,0,8,8),f(4,0,8,8),f(0,4,4,8),f(2,0,4,4),f(0,2,2,4),f(1,0,2,2),f(0,1,1,2)):f(0,0,1,1),l},a.prototype.decodePalette=function(){var i,o,l,c,h,f,p,v,u;for(l=this.palette,f=this.transparency.indexed||[],h=new Uint8Array((f.length||0)+l.length),c=0,i=0,o=p=0,v=l.length;p<v;o=p+=3)h[c++]=l[o],h[c++]=l[o+1],h[c++]=l[o+2],h[c++]=(u=f[i++])!=null?u:255;return h},a.prototype.copyToImageData=function(i,o){var l,c,h,f,p,v,u,C,w,x,j;if(c=this.colors,w=null,l=this.hasAlphaChannel,this.palette.length&&(w=(j=this._decodedPalette)!=null?j:this._decodedPalette=this.decodePalette(),c=4,l=!0),C=(h=i.data||i).length,p=w||o,f=v=0,c===1)for(;f<C;)u=w?4*o[f/4]:v,x=p[u++],h[f++]=x,h[f++]=x,h[f++]=x,h[f++]=l?p[u++]:255,v=u;else for(;f<C;)u=w?4*o[f/4]:v,h[f++]=p[u++],h[f++]=p[u++],h[f++]=p[u++],h[f++]=l?p[u++]:255,v=u},a.prototype.decode=function(){var i;return i=new Uint8Array(this.width*this.height*4),this.copyToImageData(i,this.decodePixels()),i};var n=function(){if(Object.prototype.toString.call(Pt)==="[object Window]"){try{t=Pt.document.createElement("canvas"),r=t.getContext("2d")}catch(i){return!1}return!0}return!1};return n(),s=function(i){var o;if(n()===!0)return r.width=i.width,r.height=i.height,r.clearRect(0,0,i.width,i.height),r.putImageData(i,0,0),(o=new Image).src=t.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},a.prototype.decodeFrames=function(i){var o,l,c,h,f,p,v,u;if(this.animation){for(u=[],l=f=0,p=(v=this.animation.frames).length;f<p;l=++f)o=v[l],c=i.createImageData(o.width,o.height),h=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(c,h),o.imageData=c,u.push(o.image=s(c));return u}},a.prototype.renderFrame=function(i,o){var l,c,h;return l=(c=this.animation.frames)[o],h=c[o-1],o===0&&i.clearRect(0,0,this.width,this.height),(h!=null?h.disposeOp:void 0)===1?i.clearRect(h.xOffset,h.yOffset,h.width,h.height):(h!=null?h.disposeOp:void 0)===2&&i.putImageData(h.imageData,h.xOffset,h.yOffset),l.blendOp===0&&i.clearRect(l.xOffset,l.yOffset,l.width,l.height),i.drawImage(l.image,l.xOffset,l.yOffset)},a.prototype.animate=function(i){var o,l,c,h,f,p,v=this;return l=0,p=this.animation,h=p.numFrames,c=p.frames,f=p.numPlays,(o=function(){var u,C;if(u=l++%h,C=c[u],v.renderFrame(i,u),h>1&&l/h<f)return v.animation._timeout=setTimeout(o,C.delay)})()},a.prototype.stopAnimation=function(){var i;return clearTimeout((i=this.animation)!=null?i._timeout:void 0)},a.prototype.render=function(i){var o,l;return i._png&&i._png.stopAnimation(),i._png=this,i.width=this.width,i.height=this.height,o=i.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(l=o.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),o.putImageData(l,0,0))},a}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function eS(s){var t=0;if(s[t++]!==71||s[t++]!==73||s[t++]!==70||s[t++]!==56||(s[t++]+1&253)!=56||s[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=s[t++]|s[t++]<<8,a=s[t++]|s[t++]<<8,n=s[t++],i=n>>7,o=1<<(7&n)+1;s[t++],s[t++];var l=null,c=null;i&&(l=t,c=o,t+=3*o);var h=!0,f=[],p=0,v=null,u=0,C=null;for(this.width=r,this.height=a;h&&t<s.length;)switch(s[t++]){case 33:switch(s[t++]){case 255:if(s[t]!==11||s[t+1]==78&&s[t+2]==69&&s[t+3]==84&&s[t+4]==83&&s[t+5]==67&&s[t+6]==65&&s[t+7]==80&&s[t+8]==69&&s[t+9]==50&&s[t+10]==46&&s[t+11]==48&&s[t+12]==3&&s[t+13]==1&&s[t+16]==0)t+=14,C=s[t++]|s[t++]<<8,t++;else for(t+=12;;){if(!((N=s[t++])>=0))throw Error("Invalid block size");if(N===0)break;t+=N}break;case 249:if(s[t++]!==4||s[t+4]!==0)throw new Error("Invalid graphics extension block.");var w=s[t++];p=s[t++]|s[t++]<<8,v=s[t++],!(1&w)&&(v=null),u=w>>2&7,t++;break;case 254:for(;;){if(!((N=s[t++])>=0))throw Error("Invalid block size");if(N===0)break;t+=N}break;default:throw new Error("Unknown graphic control label: 0x"+s[t-1].toString(16))}break;case 44:var x=s[t++]|s[t++]<<8,j=s[t++]|s[t++]<<8,_=s[t++]|s[t++]<<8,T=s[t++]|s[t++]<<8,U=s[t++],R=U>>6&1,V=1<<(7&U)+1,$=l,S=c,A=!1;U>>7&&(A=!0,$=t,S=V,t+=3*V);var L=t;for(t++;;){var N;if(!((N=s[t++])>=0))throw Error("Invalid block size");if(N===0)break;t+=N}f.push({x,y:j,width:_,height:T,has_local_palette:A,palette_offset:$,palette_size:S,data_offset:L,data_length:t-L,transparent_index:v,interlaced:!!R,delay:p,disposal:u});break;case 59:h=!1;break;default:throw new Error("Unknown gif block: 0x"+s[t-1].toString(16))}this.numFrames=function(){return f.length},this.loopCount=function(){return C},this.frameInfo=function(k){if(k<0||k>=f.length)throw new Error("Frame index out of range.");return f[k]},this.decodeAndBlitFrameBGRA=function(k,D){var I=this.frameInfo(k),H=I.width*I.height,se=new Uint8Array(H);$p(s,I.data_offset,se,H);var ce=I.palette_offset,le=I.transparent_index;le===null&&(le=256);var ne=I.width,fe=r-ne,Se=ne,M=4*(I.y*r+I.x),B=4*((I.y+I.height)*r+I.x),J=M,te=4*fe;I.interlaced===!0&&(te+=4*r*7);for(var G=8,ae=0,ie=se.length;ae<ie;++ae){var ue=se[ae];if(Se===0&&(Se=ne,(J+=te)>=B&&(te=4*fe+4*r*(G-1),J=M+(ne+fe)*(G<<1),G>>=1)),ue===le)J+=4;else{var Ae=s[ce+3*ue],re=s[ce+3*ue+1],je=s[ce+3*ue+2];D[J++]=je,D[J++]=re,D[J++]=Ae,D[J++]=255}--Se}},this.decodeAndBlitFrameRGBA=function(k,D){var I=this.frameInfo(k),H=I.width*I.height,se=new Uint8Array(H);$p(s,I.data_offset,se,H);var ce=I.palette_offset,le=I.transparent_index;le===null&&(le=256);var ne=I.width,fe=r-ne,Se=ne,M=4*(I.y*r+I.x),B=4*((I.y+I.height)*r+I.x),J=M,te=4*fe;I.interlaced===!0&&(te+=4*r*7);for(var G=8,ae=0,ie=se.length;ae<ie;++ae){var ue=se[ae];if(Se===0&&(Se=ne,(J+=te)>=B&&(te=4*fe+4*r*(G-1),J=M+(ne+fe)*(G<<1),G>>=1)),ue===le)J+=4;else{var Ae=s[ce+3*ue],re=s[ce+3*ue+1],je=s[ce+3*ue+2];D[J++]=Ae,D[J++]=re,D[J++]=je,D[J++]=255}--Se}}}function $p(s,t,r,a){for(var n=s[t++],i=1<<n,o=i+1,l=o+1,c=n+1,h=(1<<c)-1,f=0,p=0,v=0,u=s[t++],C=new Int32Array(4096),w=null;;){for(;f<16&&u!==0;)p|=s[t++]<<f,f+=8,u===1?u=s[t++]:--u;if(f<c)break;var x=p&h;if(p>>=c,f-=c,x!==i){if(x===o)break;for(var j=x<l?x:w,_=0,T=j;T>i;)T=C[T]>>8,++_;var U=T;if(v+_+(j!==x?1:0)>a)return void Ns.log("Warning, gif stream longer than expected.");r[v++]=U;var R=v+=_;for(j!==x&&(r[v++]=U),T=j;_--;)T=C[T],r[--R]=255&T,T>>=8;w!==null&&l<4096&&(C[l++]=w<<8|U,l>=h+1&&c<12&&(++c,h=h<<1|1)),w=x}else l=o+1,h=(1<<(c=n+1))-1,w=null}return v!==a&&Ns.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function bh(s){var t,r,a,n,i,o=Math.floor,l=new Array(64),c=new Array(64),h=new Array(64),f=new Array(64),p=new Array(65535),v=new Array(65535),u=new Array(64),C=new Array(64),w=[],x=0,j=7,_=new Array(64),T=new Array(64),U=new Array(64),R=new Array(256),V=new Array(2048),$=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],S=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],A=[0,1,2,3,4,5,6,7,8,9,10,11],L=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],N=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],k=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],D=[0,1,2,3,4,5,6,7,8,9,10,11],I=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],H=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function se(M,B){for(var J=0,te=0,G=new Array,ae=1;ae<=16;ae++){for(var ie=1;ie<=M[ae];ie++)G[B[te]]=[],G[B[te]][0]=J,G[B[te]][1]=ae,te++,J++;J*=2}return G}function ce(M){for(var B=M[0],J=M[1]-1;J>=0;)B&1<<J&&(x|=1<<j),J--,--j<0&&(x==255?(le(255),le(0)):le(x),j=7,x=0)}function le(M){w.push(M)}function ne(M){le(M>>8&255),le(255&M)}function fe(M,B,J,te,G){for(var ae,ie=G[0],ue=G[240],Ae=function(be,Be){var Fe,$e,Ke,Qe,et,Je,Re,ft,mt,St,Ve=0;for(mt=0;mt<8;++mt){Fe=be[Ve],$e=be[Ve+1],Ke=be[Ve+2],Qe=be[Ve+3],et=be[Ve+4],Je=be[Ve+5],Re=be[Ve+6];var es=Fe+(ft=be[Ve+7]),jt=Fe-ft,Ls=$e+Re,Ft=$e-Re,Lt=Ke+Je,lr=Ke-Je,Yt=Qe+et,pr=Qe-et,rs=es+Yt,Hs=es-Yt,cr=Ls+Lt,Kt=Ls-Lt;be[Ve]=rs+cr,be[Ve+4]=rs-cr;var Ct=.707106781*(Kt+Hs);be[Ve+2]=Hs+Ct,be[Ve+6]=Hs-Ct;var tt=.382683433*((rs=pr+lr)-(Kt=Ft+jt)),Tt=.5411961*rs+tt,Mt=1.306562965*Kt+tt,As=.707106781*(cr=lr+Ft),xs=jt+As,gt=jt-As;be[Ve+5]=gt+Tt,be[Ve+3]=gt-Tt,be[Ve+1]=xs+Mt,be[Ve+7]=xs-Mt,Ve+=8}for(Ve=0,mt=0;mt<8;++mt){Fe=be[Ve],$e=be[Ve+8],Ke=be[Ve+16],Qe=be[Ve+24],et=be[Ve+32],Je=be[Ve+40],Re=be[Ve+48];var Rs=Fe+(ft=be[Ve+56]),Te=Fe-ft,ct=$e+Re,vt=$e-Re,Wt=Ke+Je,Xt=Ke-Je,Mr=Qe+et,Vs=Qe-et,dr=Rs+Mr,gr=Rs-Mr,Wr=ct+Wt,ua=ct-Wt;be[Ve]=dr+Wr,be[Ve+32]=dr-Wr;var Hr=.707106781*(ua+gr);be[Ve+16]=gr+Hr,be[Ve+48]=gr-Hr;var Ne=.382683433*((dr=Vs+Xt)-(ua=vt+Te)),De=.5411961*dr+Ne,Ye=1.306562965*ua+Ne,Ge=.707106781*(Wr=Xt+vt),ot=Te+Ge,xt=Te-Ge;be[Ve+40]=xt+De,be[Ve+24]=xt-De,be[Ve+8]=ot+Ye,be[Ve+56]=ot-Ye,Ve++}for(mt=0;mt<64;++mt)St=be[mt]*Be[mt],u[mt]=St>0?St+.5|0:St-.5|0;return u}(M,B),re=0;re<64;++re)C[$[re]]=Ae[re];var je=C[0]-J;J=C[0],je==0?ce(te[0]):(ce(te[v[ae=32767+je]]),ce(p[ae]));for(var Le=63;Le>0&&C[Le]==0;)Le--;if(Le==0)return ce(ie),J;for(var X,Q=1;Q<=Le;){for(var W=Q;C[Q]==0&&Q<=Le;)++Q;var ve=Q-W;if(ve>=16){X=ve>>4;for(var Pe=1;Pe<=X;++Pe)ce(ue);ve&=15}ae=32767+C[Q],ce(G[(ve<<4)+v[ae]]),ce(p[ae]),Q++}return Le!=63&&ce(ie),J}function Se(M){M=Math.min(Math.max(M,1),100),i!=M&&(function(B){for(var J=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],te=0;te<64;te++){var G=o((J[te]*B+50)/100);G=Math.min(Math.max(G,1),255),l[$[te]]=G}for(var ae=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ie=0;ie<64;ie++){var ue=o((ae[ie]*B+50)/100);ue=Math.min(Math.max(ue,1),255),c[$[ie]]=ue}for(var Ae=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],re=0,je=0;je<8;je++)for(var Le=0;Le<8;Le++)h[re]=1/(l[$[re]]*Ae[je]*Ae[Le]*8),f[re]=1/(c[$[re]]*Ae[je]*Ae[Le]*8),re++}(M<50?Math.floor(5e3/M):Math.floor(200-2*M)),i=M)}this.encode=function(M,B){B&&Se(B),w=new Array,x=0,j=7,ne(65496),ne(65504),ne(16),le(74),le(70),le(73),le(70),le(0),le(1),le(1),le(0),ne(1),ne(1),le(0),le(0),function(){ne(65499),ne(132),le(0);for(var $e=0;$e<64;$e++)le(l[$e]);le(1);for(var Ke=0;Ke<64;Ke++)le(c[Ke])}(),function($e,Ke){ne(65472),ne(17),le(8),ne(Ke),ne($e),le(3),le(1),le(17),le(0),le(2),le(17),le(1),le(3),le(17),le(1)}(M.width,M.height),function(){ne(65476),ne(418),le(0);for(var $e=0;$e<16;$e++)le(S[$e+1]);for(var Ke=0;Ke<=11;Ke++)le(A[Ke]);le(16);for(var Qe=0;Qe<16;Qe++)le(L[Qe+1]);for(var et=0;et<=161;et++)le(N[et]);le(1);for(var Je=0;Je<16;Je++)le(k[Je+1]);for(var Re=0;Re<=11;Re++)le(D[Re]);le(17);for(var ft=0;ft<16;ft++)le(I[ft+1]);for(var mt=0;mt<=161;mt++)le(H[mt])}(),ne(65498),ne(12),le(3),le(1),le(0),le(2),le(17),le(3),le(17),le(0),le(63),le(0);var J=0,te=0,G=0;x=0,j=7,this.encode.displayName="_encode_";for(var ae,ie,ue,Ae,re,je,Le,X,Q,W=M.data,ve=M.width,Pe=M.height,be=4*ve,Be=0;Be<Pe;){for(ae=0;ae<be;){for(re=be*Be+ae,Le=-1,X=0,Q=0;Q<64;Q++)je=re+(X=Q>>3)*be+(Le=4*(7&Q)),Be+X>=Pe&&(je-=be*(Be+1+X-Pe)),ae+Le>=be&&(je-=ae+Le-be+4),ie=W[je++],ue=W[je++],Ae=W[je++],_[Q]=(V[ie]+V[ue+256>>0]+V[Ae+512>>0]>>16)-128,T[Q]=(V[ie+768>>0]+V[ue+1024>>0]+V[Ae+1280>>0]>>16)-128,U[Q]=(V[ie+1280>>0]+V[ue+1536>>0]+V[Ae+1792>>0]>>16)-128;J=fe(_,h,J,t,a),te=fe(T,f,te,r,n),G=fe(U,f,G,r,n),ae+=32}Be+=8}if(j>=0){var Fe=[];Fe[1]=j+1,Fe[0]=(1<<j+1)-1,ce(Fe)}return ne(65497),new Uint8Array(w)},s=s||50,function(){for(var M=String.fromCharCode,B=0;B<256;B++)R[B]=M(B)}(),t=se(S,A),r=se(k,D),a=se(L,N),n=se(I,H),function(){for(var M=1,B=2,J=1;J<=15;J++){for(var te=M;te<B;te++)v[32767+te]=J,p[32767+te]=[],p[32767+te][1]=J,p[32767+te][0]=te;for(var G=-(B-1);G<=-M;G++)v[32767+G]=J,p[32767+G]=[],p[32767+G][1]=J,p[32767+G][0]=B-1+G;M<<=1,B<<=1}}(),function(){for(var M=0;M<256;M++)V[M]=19595*M,V[M+256>>0]=38470*M,V[M+512>>0]=7471*M+32768,V[M+768>>0]=-11059*M,V[M+1024>>0]=-21709*M,V[M+1280>>0]=32768*M+8421375,V[M+1536>>0]=-27439*M,V[M+1792>>0]=-5329*M}(),Se(s)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Ma(s,t){if(this.pos=0,this.buffer=s,this.datav=new DataView(s.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Wp(s){function t(S){if(!S)throw Error("assert :P")}function r(S,A,L){for(var N=0;4>N;N++)if(S[A+N]!=L.charCodeAt(N))return!0;return!1}function a(S,A,L,N,k){for(var D=0;D<k;D++)S[A+D]=L[N+D]}function n(S,A,L,N){for(var k=0;k<N;k++)S[A+k]=L}function i(S){return new Int32Array(S)}function o(S,A){for(var L=[],N=0;N<S;N++)L.push(new A);return L}function l(S,A){var L=[];return function N(k,D,I){for(var H=I[D],se=0;se<H&&(k.push(I.length>D+1?[]:new A),!(I.length<D+1));se++)N(k[se],D+1,I)}(L,0,S),L}var c=function(){var S=this;function A(d,m){for(var y=1<<m-1>>>0;d&y;)y>>>=1;return y?(d&y-1)+y:d}function L(d,m,y,P,O){t(!(P%y));do d[m+(P-=y)]=O;while(0<P)}function N(d,m,y,P,O){if(t(2328>=O),512>=O)var q=i(512);else if((q=i(O))==null)return 0;return function(z,Y,K,ee,ge,_e){var Ie,we,ze=Y,Me=1<<K,xe=i(16),ye=i(16);for(t(ge!=0),t(ee!=null),t(z!=null),t(0<K),we=0;we<ge;++we){if(15<ee[we])return 0;++xe[ee[we]]}if(xe[0]==ge)return 0;for(ye[1]=0,Ie=1;15>Ie;++Ie){if(xe[Ie]>1<<Ie)return 0;ye[Ie+1]=ye[Ie]+xe[Ie]}for(we=0;we<ge;++we)Ie=ee[we],0<ee[we]&&(_e[ye[Ie]++]=we);if(ye[15]==1)return(ee=new k).g=0,ee.value=_e[0],L(z,ze,1,Me,ee),Me;var Ue,We=-1,qe=Me-1,ut=0,st=1,Nt=1,lt=1<<K;for(we=0,Ie=1,ge=2;Ie<=K;++Ie,ge<<=1){if(st+=Nt<<=1,0>(Nt-=xe[Ie]))return 0;for(;0<xe[Ie];--xe[Ie])(ee=new k).g=Ie,ee.value=_e[we++],L(z,ze+ut,ge,lt,ee),ut=A(ut,Ie)}for(Ie=K+1,ge=2;15>=Ie;++Ie,ge<<=1){if(st+=Nt<<=1,0>(Nt-=xe[Ie]))return 0;for(;0<xe[Ie];--xe[Ie]){if(ee=new k,(ut&qe)!=We){for(ze+=lt,Ue=1<<(We=Ie)-K;15>We&&!(0>=(Ue-=xe[We]));)++We,Ue<<=1;Me+=lt=1<<(Ue=We-K),z[Y+(We=ut&qe)].g=Ue+K,z[Y+We].value=ze-Y-We}ee.g=Ie-K,ee.value=_e[we++],L(z,ze+(ut>>K),ge,lt,ee),ut=A(ut,Ie)}}return st!=2*ye[15]-1?0:Me}(d,m,y,P,O,q)}function k(){this.value=this.g=0}function D(){this.value=this.g=0}function I(){this.G=o(5,k),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(xr,D)}function H(d,m,y,P){t(d!=null),t(m!=null),t(2147483648>P),d.Ca=254,d.I=0,d.b=-8,d.Ka=0,d.oa=m,d.pa=y,d.Jd=m,d.Yc=y+P,d.Zc=4<=P?y+P-4+1:y,ae(d)}function se(d,m){for(var y=0;0<m--;)y|=ue(d,128)<<m;return y}function ce(d,m){var y=se(d,m);return ie(d)?-y:y}function le(d,m,y,P){var O,q=0;for(t(d!=null),t(m!=null),t(4294967288>P),d.Sb=P,d.Ra=0,d.u=0,d.h=0,4<P&&(P=4),O=0;O<P;++O)q+=m[y+O]<<8*O;d.Ra=q,d.bb=P,d.oa=m,d.pa=y}function ne(d){for(;8<=d.u&&d.bb<d.Sb;)d.Ra>>>=8,d.Ra+=d.oa[d.pa+d.bb]<<po-8>>>0,++d.bb,d.u-=8;J(d)&&(d.h=1,d.u=0)}function fe(d,m){if(t(0<=m),!d.h&&m<=fo){var y=B(d)&mo[m];return d.u+=m,ne(d),y}return d.h=1,d.u=0}function Se(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function M(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function B(d){return d.Ra>>>(d.u&po-1)>>>0}function J(d){return t(d.bb<=d.Sb),d.h||d.bb==d.Sb&&d.u>po}function te(d,m){d.u=m,d.h=J(d)}function G(d){d.u>=Il&&(t(d.u>=Il),ne(d))}function ae(d){t(d!=null&&d.oa!=null),d.pa<d.Zc?(d.I=(d.oa[d.pa++]|d.I<<8)>>>0,d.b+=8):(t(d!=null&&d.oa!=null),d.pa<d.Yc?(d.b+=8,d.I=d.oa[d.pa++]|d.I<<8):d.Ka?d.b=0:(d.I<<=8,d.b+=8,d.Ka=1))}function ie(d){return se(d,1)}function ue(d,m){var y=d.Ca;0>d.b&&ae(d);var P=d.b,O=y*m>>>8,q=(d.I>>>P>O)+0;for(q?(y-=O,d.I-=O+1<<P>>>0):y=O+1,P=y,O=0;256<=P;)O+=8,P>>=8;return P=7^O+Yr[P],d.b-=P,d.Ca=(y<<P)-1,q}function Ae(d,m,y){d[m+0]=y>>24&255,d[m+1]=y>>16&255,d[m+2]=y>>8&255,d[m+3]=y>>0&255}function re(d,m){return d[m+0]<<0|d[m+1]<<8}function je(d,m){return re(d,m)|d[m+2]<<16}function Le(d,m){return re(d,m)|re(d,m+2)<<16}function X(d,m){var y=1<<m;return t(d!=null),t(0<m),d.X=i(y),d.X==null?0:(d.Mb=32-m,d.Xa=m,1)}function Q(d,m){t(d!=null),t(m!=null),t(d.Xa==m.Xa),a(m.X,0,d.X,0,1<<m.Xa)}function W(){this.X=[],this.Xa=this.Mb=0}function ve(d,m,y,P){t(y!=null),t(P!=null);var O=y[0],q=P[0];return O==0&&(O=(d*q+m/2)/m),q==0&&(q=(m*O+d/2)/d),0>=O||0>=q?0:(y[0]=O,P[0]=q,1)}function Pe(d,m){return d+(1<<m)-1>>>m}function be(d,m){return((4278255360&d)+(4278255360&m)>>>0&4278255360)+((16711935&d)+(16711935&m)>>>0&16711935)>>>0}function Be(d,m){S[m]=function(y,P,O,q,z,Y,K){var ee;for(ee=0;ee<z;++ee){var ge=S[d](Y[K+ee-1],O,q+ee);Y[K+ee]=be(y[P+ee],ge)}}}function Fe(){this.ud=this.hd=this.jd=0}function $e(d,m){return((4278124286&(d^m))>>>1)+(d&m)>>>0}function Ke(d){return 0<=d&&256>d?d:0>d?0:255<d?255:void 0}function Qe(d,m){return Ke(d+(d-m+.5>>1))}function et(d,m,y){return Math.abs(m-y)-Math.abs(d-y)}function Je(d,m,y,P,O,q,z){for(P=q[z-1],y=0;y<O;++y)q[z+y]=P=be(d[m+y],P)}function Re(d,m,y,P,O){var q;for(q=0;q<y;++q){var z=d[m+q],Y=z>>8&255,K=16711935&(K=(K=16711935&z)+((Y<<16)+Y));P[O+q]=(4278255360&z)+K>>>0}}function ft(d,m){m.jd=d>>0&255,m.hd=d>>8&255,m.ud=d>>16&255}function mt(d,m,y,P,O,q){var z;for(z=0;z<P;++z){var Y=m[y+z],K=Y>>>8,ee=Y,ge=255&(ge=(ge=Y>>>16)+((d.jd<<24>>24)*(K<<24>>24)>>>5));ee=255&(ee=(ee=ee+((d.hd<<24>>24)*(K<<24>>24)>>>5))+((d.ud<<24>>24)*(ge<<24>>24)>>>5)),O[q+z]=(4278255360&Y)+(ge<<16)+ee}}function St(d,m,y,P,O){S[m]=function(q,z,Y,K,ee,ge,_e,Ie,we){for(K=_e;K<Ie;++K)for(_e=0;_e<we;++_e)ee[ge++]=O(Y[P(q[z++])])},S[d]=function(q,z,Y,K,ee,ge,_e){var Ie=8>>q.b,we=q.Ea,ze=q.K[0],Me=q.w;if(8>Ie)for(q=(1<<q.b)-1,Me=(1<<Ie)-1;z<Y;++z){var xe,ye=0;for(xe=0;xe<we;++xe)xe&q||(ye=P(K[ee++])),ge[_e++]=O(ze[ye&Me]),ye>>=Ie}else S["VP8LMapColor"+y](K,ee,ze,Me,ge,_e,z,Y,we)}}function Ve(d,m,y,P,O){for(y=m+y;m<y;){var q=d[m++];P[O++]=q>>16&255,P[O++]=q>>8&255,P[O++]=q>>0&255}}function es(d,m,y,P,O){for(y=m+y;m<y;){var q=d[m++];P[O++]=q>>16&255,P[O++]=q>>8&255,P[O++]=q>>0&255,P[O++]=q>>24&255}}function jt(d,m,y,P,O){for(y=m+y;m<y;){var q=(z=d[m++])>>16&240|z>>12&15,z=z>>0&240|z>>28&15;P[O++]=q,P[O++]=z}}function Ls(d,m,y,P,O){for(y=m+y;m<y;){var q=(z=d[m++])>>16&248|z>>13&7,z=z>>5&224|z>>3&31;P[O++]=q,P[O++]=z}}function Ft(d,m,y,P,O){for(y=m+y;m<y;){var q=d[m++];P[O++]=q>>0&255,P[O++]=q>>8&255,P[O++]=q>>16&255}}function Lt(d,m,y,P,O,q){if(q==0)for(y=m+y;m<y;)Ae(P,((q=d[m++])[0]>>24|q[1]>>8&65280|q[2]<<8&16711680|q[3]<<24)>>>0),O+=32;else a(P,O,d,m,y)}function lr(d,m){S[m][0]=S[d+"0"],S[m][1]=S[d+"1"],S[m][2]=S[d+"2"],S[m][3]=S[d+"3"],S[m][4]=S[d+"4"],S[m][5]=S[d+"5"],S[m][6]=S[d+"6"],S[m][7]=S[d+"7"],S[m][8]=S[d+"8"],S[m][9]=S[d+"9"],S[m][10]=S[d+"10"],S[m][11]=S[d+"11"],S[m][12]=S[d+"12"],S[m][13]=S[d+"13"],S[m][14]=S[d+"0"],S[m][15]=S[d+"0"]}function Yt(d){return d==Bu||d==Uu||d==Kc||d==qu}function pr(){this.eb=[],this.size=this.A=this.fb=0}function rs(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Hs(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new pr,this.f.kb=new rs,this.sd=null}function cr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Kt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Ct(d){return alert("todo:WebPSamplerProcessPlane"),d.T}function tt(d,m){var y=d.T,P=m.ba.f.RGBA,O=P.eb,q=P.fb+d.ka*P.A,z=xa[m.ba.S],Y=d.y,K=d.O,ee=d.f,ge=d.N,_e=d.ea,Ie=d.W,we=m.cc,ze=m.dc,Me=m.Mc,xe=m.Nc,ye=d.ka,Ue=d.ka+d.T,We=d.U,qe=We+1>>1;for(ye==0?z(Y,K,null,null,ee,ge,_e,Ie,ee,ge,_e,Ie,O,q,null,null,We):(z(m.ec,m.fc,Y,K,we,ze,Me,xe,ee,ge,_e,Ie,O,q-P.A,O,q,We),++y);ye+2<Ue;ye+=2)we=ee,ze=ge,Me=_e,xe=Ie,ge+=d.Rc,Ie+=d.Rc,q+=2*P.A,z(Y,(K+=2*d.fa)-d.fa,Y,K,we,ze,Me,xe,ee,ge,_e,Ie,O,q-P.A,O,q,We);return K+=d.fa,d.j+Ue<d.o?(a(m.ec,m.fc,Y,K,We),a(m.cc,m.dc,ee,ge,qe),a(m.Mc,m.Nc,_e,Ie,qe),y--):1&Ue||z(Y,K,null,null,ee,ge,_e,Ie,ee,ge,_e,Ie,O,q+P.A,null,null,We),y}function Tt(d,m,y){var P=d.F,O=[d.J];if(P!=null){var q=d.U,z=m.ba.S,Y=z==Jc||z==Kc;m=m.ba.f.RGBA;var K=[0],ee=d.ka;K[0]=d.T,d.Kb&&(ee==0?--K[0]:(--ee,O[0]-=d.width),d.j+d.ka+d.T==d.o&&(K[0]=d.o-d.j-ee));var ge=m.eb;ee=m.fb+ee*m.A,d=_s(P,O[0],d.width,q,K,ge,ee+(Y?0:3),m.A),t(y==K),d&&Yt(z)&&pa(ge,ee,Y,q,K,m.A)}return 0}function Mt(d){var m=d.ma,y=m.ba.S,P=11>y,O=y==Yc||y==Gc||y==Jc||y==Fu||y==12||Yt(y);if(m.memory=null,m.Ib=null,m.Jb=null,m.Nd=null,!Pl(m.Oa,d,O?11:12))return 0;if(O&&Yt(y)&&He(),d.da)alert("todo:use_scaling");else{if(P){if(m.Ib=Ct,d.Kb){if(y=d.U+1>>1,m.memory=i(d.U+2*y),m.memory==null)return 0;m.ec=m.memory,m.fc=0,m.cc=m.ec,m.dc=m.fc+d.U,m.Mc=m.cc,m.Nc=m.dc+y,m.Ib=tt,He()}}else alert("todo:EmitYUV");O&&(m.Jb=Tt,P&&ke())}if(P&&!gf){for(d=0;256>d;++d)pv[d]=89858*(d-128)+Qc>>Xc,vv[d]=-22014*(d-128)+Qc,xv[d]=-45773*(d-128),gv[d]=113618*(d-128)+Qc>>Xc;for(d=Ol;d<Wu;++d)m=76283*(d-16)+Qc>>Xc,yv[d-Ol]=sa(m,255),bv[d-Ol]=sa(m+8>>4,15);gf=1}return 1}function As(d){var m=d.ma,y=d.U,P=d.T;return t(!(1&d.ka)),0>=y||0>=P?0:(y=m.Ib(d,m),m.Jb!=null&&m.Jb(d,m,y),m.Dc+=y,1)}function xs(d){d.ma.memory=null}function gt(d,m,y,P){return fe(d,8)!=47?0:(m[0]=fe(d,14)+1,y[0]=fe(d,14)+1,P[0]=fe(d,1),fe(d,3)!=0?0:!d.h)}function Rs(d,m){if(4>d)return d+1;var y=d-2>>1;return(2+(1&d)<<y)+fe(m,y)+1}function Te(d,m){return 120<m?m-120:1<=(y=((y=tv[m-1])>>4)*d+(8-(15&y)))?y:1;var y}function ct(d,m,y){var P=B(y),O=d[m+=255&P].g-8;return 0<O&&(te(y,y.u+8),P=B(y),m+=d[m].value,m+=P&(1<<O)-1),te(y,y.u+d[m].g),d[m].value}function vt(d,m,y){return y.g+=d.g,y.value+=d.value<<m>>>0,t(8>=y.g),d.g}function Wt(d,m,y){var P=d.xc;return t((m=P==0?0:d.vc[d.md*(y>>P)+(m>>P)])<d.Wb),d.Ya[m]}function Xt(d,m,y,P){var O=d.ab,q=d.c*m,z=d.C;m=z+m;var Y=y,K=P;for(P=d.Ta,y=d.Ua;0<O--;){var ee=d.gc[O],ge=z,_e=m,Ie=Y,we=K,ze=(K=P,Y=y,ee.Ea);switch(t(ge<_e),t(_e<=ee.nc),ee.hc){case 2:Uc(Ie,we,(_e-ge)*ze,K,Y);break;case 0:var Me=ge,xe=_e,ye=K,Ue=Y,We=(lt=ee).Ea;Me==0&&(Ru(Ie,we,null,null,1,ye,Ue),Je(Ie,we+1,0,0,We-1,ye,Ue+1),we+=We,Ue+=We,++Me);for(var qe=1<<lt.b,ut=qe-1,st=Pe(We,lt.b),Nt=lt.K,lt=lt.w+(Me>>lt.b)*st;Me<xe;){var ls=Nt,hs=lt,os=1;for(Ll(Ie,we,ye,Ue-We,1,ye,Ue);os<We;){var ts=(os&~ut)+qe;ts>We&&(ts=We),(0,_n[ls[hs++]>>8&15])(Ie,we+ +os,ye,Ue+os-We,ts-os,ye,Ue+os),os=ts}we+=We,Ue+=We,++Me&ut||(lt+=st)}_e!=ee.nc&&a(K,Y-ze,K,Y+(_e-ge-1)*ze,ze);break;case 1:for(ze=Ie,xe=we,We=(Ie=ee.Ea)-(Ue=Ie&~(ye=(we=1<<ee.b)-1)),Me=Pe(Ie,ee.b),qe=ee.K,ee=ee.w+(ge>>ee.b)*Me;ge<_e;){for(ut=qe,st=ee,Nt=new Fe,lt=xe+Ue,ls=xe+Ie;xe<lt;)ft(ut[st++],Nt),wi(Nt,ze,xe,we,K,Y),xe+=we,Y+=we;xe<ls&&(ft(ut[st++],Nt),wi(Nt,ze,xe,We,K,Y),xe+=We,Y+=We),++ge&ye||(ee+=Me)}break;case 3:if(Ie==K&&we==Y&&0<ee.b){for(xe=K,Ie=ze=Y+(_e-ge)*ze-(Ue=(_e-ge)*Pe(ee.Ea,ee.b)),we=K,ye=Y,Me=[],Ue=(We=Ue)-1;0<=Ue;--Ue)Me[Ue]=we[ye+Ue];for(Ue=We-1;0<=Ue;--Ue)xe[Ie+Ue]=Me[Ue];ha(ee,ge,_e,K,ze,K,Y)}else ha(ee,ge,_e,Ie,we,K,Y)}Y=P,K=y}K!=y&&a(P,y,Y,K,q)}function Mr(d,m){var y=d.V,P=d.Ba+d.c*d.C,O=m-d.C;if(t(m<=d.l.o),t(16>=O),0<O){var q=d.l,z=d.Ta,Y=d.Ua,K=q.width;if(Xt(d,O,y,P),O=Y=[Y],t((y=d.C)<(P=m)),t(q.v<q.va),P>q.o&&(P=q.o),y<q.j){var ee=q.j-y;y=q.j,O[0]+=ee*K}if(y>=P?y=0:(O[0]+=4*q.v,q.ka=y-q.j,q.U=q.va-q.v,q.T=P-y,y=1),y){if(Y=Y[0],11>(y=d.ca).S){var ge=y.f.RGBA,_e=(P=y.S,O=q.U,q=q.T,ee=ge.eb,ge.A),Ie=q;for(ge=ge.fb+d.Ma*ge.A;0<Ie--;){var we=z,ze=Y,Me=O,xe=ee,ye=ge;switch(P){case Vc:Gr(we,ze,Me,xe,ye);break;case Yc:Er(we,ze,Me,xe,ye);break;case Bu:Er(we,ze,Me,xe,ye),pa(xe,ye,0,Me,1,0);break;case of:ln(we,ze,Me,xe,ye);break;case Gc:Lt(we,ze,Me,xe,ye,1);break;case Uu:Lt(we,ze,Me,xe,ye,1),pa(xe,ye,0,Me,1,0);break;case Jc:Lt(we,ze,Me,xe,ye,0);break;case Kc:Lt(we,ze,Me,xe,ye,0),pa(xe,ye,1,Me,1,0);break;case Fu:In(we,ze,Me,xe,ye);break;case qu:In(we,ze,Me,xe,ye),Ps(xe,ye,Me,1,0);break;case lf:on(we,ze,Me,xe,ye);break;default:t(0)}Y+=K,ge+=_e}d.Ma+=q}else alert("todo:EmitRescaledRowsYUVA");t(d.Ma<=y.height)}}d.C=m,t(d.C<=d.i)}function Vs(d){var m;if(0<d.ua)return 0;for(m=0;m<d.Wb;++m){var y=d.Ya[m].G,P=d.Ya[m].H;if(0<y[1][P[1]+0].g||0<y[2][P[2]+0].g||0<y[3][P[3]+0].g)return 0}return 1}function dr(d,m,y,P,O,q){if(d.Z!=0){var z=d.qd,Y=d.rd;for(t(Mn[d.Z]!=null);m<y;++m)Mn[d.Z](z,Y,P,O,P,O,q),z=P,Y=O,O+=q;d.qd=z,d.rd=Y}}function gr(d,m){var y=d.l.ma,P=y.Z==0||y.Z==1?d.l.j:d.C;if(P=d.C<P?P:d.C,t(m<=d.l.o),m>P){var O=d.l.width,q=y.ca,z=y.tb+O*P,Y=d.V,K=d.Ba+d.c*P,ee=d.gc;t(d.ab==1),t(ee[0].hc==3),qc(ee[0],P,m,Y,K,q,z),dr(y,P,m,q,z,O)}d.C=d.Ma=m}function Wr(d,m,y,P,O,q,z){var Y=d.$/P,K=d.$%P,ee=d.m,ge=d.s,_e=y+d.$,Ie=_e;O=y+P*O;var we=y+P*q,ze=280+ge.ua,Me=d.Pb?Y:16777216,xe=0<ge.ua?ge.Wa:null,ye=ge.wc,Ue=_e<we?Wt(ge,K,Y):null;t(d.C<q),t(we<=O);var We=!1;e:for(;;){for(;We||_e<we;){var qe=0;if(Y>=Me){var ut=_e-y;t((Me=d).Pb),Me.wd=Me.m,Me.xd=ut,0<Me.s.ua&&Q(Me.s.Wa,Me.s.vb),Me=Y+rv}if(K&ye||(Ue=Wt(ge,K,Y)),t(Ue!=null),Ue.Qb&&(m[_e]=Ue.qb,We=!0),!We)if(G(ee),Ue.jc){qe=ee,ut=m;var st=_e,Nt=Ue.pd[B(qe)&xr-1];t(Ue.jc),256>Nt.g?(te(qe,qe.u+Nt.g),ut[st]=Nt.value,qe=0):(te(qe,qe.u+Nt.g-256),t(256<=Nt.value),qe=Nt.value),qe==0&&(We=!0)}else qe=ct(Ue.G[0],Ue.H[0],ee);if(ee.h)break;if(We||256>qe){if(!We)if(Ue.nd)m[_e]=(Ue.qb|qe<<8)>>>0;else{if(G(ee),We=ct(Ue.G[1],Ue.H[1],ee),G(ee),ut=ct(Ue.G[2],Ue.H[2],ee),st=ct(Ue.G[3],Ue.H[3],ee),ee.h)break;m[_e]=(st<<24|We<<16|qe<<8|ut)>>>0}if(We=!1,++_e,++K>=P&&(K=0,++Y,z!=null&&Y<=q&&!(Y%16)&&z(d,Y),xe!=null))for(;Ie<_e;)qe=m[Ie++],xe.X[(506832829*qe&4294967295)>>>xe.Mb]=qe}else if(280>qe){if(qe=Rs(qe-256,ee),ut=ct(Ue.G[4],Ue.H[4],ee),G(ee),ut=Te(P,ut=Rs(ut,ee)),ee.h)break;if(_e-y<ut||O-_e<qe)break e;for(st=0;st<qe;++st)m[_e+st]=m[_e+st-ut];for(_e+=qe,K+=qe;K>=P;)K-=P,++Y,z!=null&&Y<=q&&!(Y%16)&&z(d,Y);if(t(_e<=O),K&ye&&(Ue=Wt(ge,K,Y)),xe!=null)for(;Ie<_e;)qe=m[Ie++],xe.X[(506832829*qe&4294967295)>>>xe.Mb]=qe}else{if(!(qe<ze))break e;for(We=qe-280,t(xe!=null);Ie<_e;)qe=m[Ie++],xe.X[(506832829*qe&4294967295)>>>xe.Mb]=qe;qe=_e,t(!(We>>>(ut=xe).Xa)),m[qe]=ut.X[We],We=!0}We||t(ee.h==J(ee))}if(d.Pb&&ee.h&&_e<O)t(d.m.h),d.a=5,d.m=d.wd,d.$=d.xd,0<d.s.ua&&Q(d.s.vb,d.s.Wa);else{if(ee.h)break e;z!=null&&z(d,Y>q?q:Y),d.a=0,d.$=_e-y}return 1}return d.a=3,0}function ua(d){t(d!=null),d.vc=null,d.yc=null,d.Ya=null;var m=d.Wa;m!=null&&(m.X=null),d.vb=null,t(d!=null)}function Hr(){var d=new Eu;return d==null?null:(d.a=0,d.xb=uf,lr("Predictor","VP8LPredictors"),lr("Predictor","VP8LPredictors_C"),lr("PredictorAdd","VP8LPredictorsAdd"),lr("PredictorAdd","VP8LPredictorsAdd_C"),Uc=Re,wi=mt,Gr=Ve,Er=es,In=jt,on=Ls,ln=Ft,S.VP8LMapColor32b=go,S.VP8LMapColor8b=zc,d)}function Ne(d,m,y,P,O){var q=1,z=[d],Y=[m],K=P.m,ee=P.s,ge=null,_e=0;e:for(;;){if(y)for(;q&&fe(K,1);){var Ie=z,we=Y,ze=P,Me=1,xe=ze.m,ye=ze.gc[ze.ab],Ue=fe(xe,2);if(ze.Oc&1<<Ue)q=0;else{switch(ze.Oc|=1<<Ue,ye.hc=Ue,ye.Ea=Ie[0],ye.nc=we[0],ye.K=[null],++ze.ab,t(4>=ze.ab),Ue){case 0:case 1:ye.b=fe(xe,3)+2,Me=Ne(Pe(ye.Ea,ye.b),Pe(ye.nc,ye.b),0,ze,ye.K),ye.K=ye.K[0];break;case 3:var We,qe=fe(xe,8)+1,ut=16<qe?0:4<qe?1:2<qe?2:3;if(Ie[0]=Pe(ye.Ea,ut),ye.b=ut,We=Me=Ne(qe,1,0,ze,ye.K)){var st,Nt=qe,lt=ye,ls=1<<(8>>lt.b),hs=i(ls);if(hs==null)We=0;else{var os=lt.K[0],ts=lt.w;for(hs[0]=lt.K[0][0],st=1;st<1*Nt;++st)hs[st]=be(os[ts+st],hs[st-1]);for(;st<4*ls;++st)hs[st]=0;lt.K[0]=null,lt.K[0]=hs,We=1}}Me=We;break;case 2:break;default:t(0)}q=Me}}if(z=z[0],Y=Y[0],q&&fe(K,1)&&!(q=1<=(_e=fe(K,4))&&11>=_e)){P.a=3;break e}var js;if(js=q)t:{var vs,Ht,tr,Jr=P,sr=z,Kr=Y,ms=_e,aa=y,na=Jr.m,hr=Jr.s,vr=[null],Or=1,va=0,Ga=sv[ms];s:for(;;){if(aa&&fe(na,1)){var mr=fe(na,3)+2,hn=Pe(sr,mr),Ci=Pe(Kr,mr),wo=hn*Ci;if(!Ne(hn,Ci,0,Jr,vr))break s;for(vr=vr[0],hr.xc=mr,vs=0;vs<wo;++vs){var En=vr[vs]>>8&65535;vr[vs]=En,En>=Or&&(Or=En+1)}}if(na.h)break s;for(Ht=0;5>Ht;++Ht){var zs=cf[Ht];!Ht&&0<ms&&(zs+=1<<ms),va<zs&&(va=zs)}var Hu=o(Or*Ga,k),yf=Or,bf=o(yf,I);if(bf==null)var ed=null;else t(65536>=yf),ed=bf;var Fl=i(va);if(ed==null||Fl==null||Hu==null){Jr.a=1;break s}var td=Hu;for(vs=tr=0;vs<Or;++vs){var Ia=ed[vs],jo=Ia.G,No=Ia.H,wf=0,sd=1,jf=0;for(Ht=0;5>Ht;++Ht){zs=cf[Ht],jo[Ht]=td,No[Ht]=tr,!Ht&&0<ms&&(zs+=1<<ms);a:{var rd,Vu=zs,ad=Jr,Bl=Fl,Nv=td,Sv=tr,Yu=0,Rn=ad.m,kv=fe(Rn,1);if(n(Bl,0,0,Vu),kv){var Cv=fe(Rn,1)+1,Av=fe(Rn,1),Nf=fe(Rn,Av==0?1:8);Bl[Nf]=1,Cv==2&&(Bl[Nf=fe(Rn,8)]=1);var nd=1}else{var Sf=i(19),kf=fe(Rn,4)+4;if(19<kf){ad.a=3;var id=0;break a}for(rd=0;rd<kf;++rd)Sf[ev[rd]]=fe(Rn,3);var Gu=void 0,Ul=void 0,Cf=ad,Pv=Sf,od=Vu,Af=Bl,Ju=0,On=Cf.m,Pf=8,_f=o(128,k);r:for(;N(_f,0,7,Pv,19);){if(fe(On,1)){var _v=2+2*fe(On,3);if((Gu=2+fe(On,_v))>od)break r}else Gu=od;for(Ul=0;Ul<od&&Gu--;){G(On);var If=_f[0+(127&B(On))];te(On,On.u+If.g);var So=If.value;if(16>So)Af[Ul++]=So,So!=0&&(Pf=So);else{var Iv=So==16,Lf=So-16,Lv=Q2[Lf],Tf=fe(On,X2[Lf])+Lv;if(Ul+Tf>od)break r;for(var Tv=Iv?Pf:0;0<Tf--;)Af[Ul++]=Tv}}Ju=1;break r}Ju||(Cf.a=3),nd=Ju}(nd=nd&&!Rn.h)&&(Yu=N(Nv,Sv,8,Bl,Vu)),nd&&Yu!=0?id=Yu:(ad.a=3,id=0)}if(id==0)break s;if(sd&&Z2[Ht]==1&&(sd=td[tr].g==0),wf+=td[tr].g,tr+=id,3>=Ht){var ql,Ku=Fl[0];for(ql=1;ql<zs;++ql)Fl[ql]>Ku&&(Ku=Fl[ql]);jf+=Ku}}if(Ia.nd=sd,Ia.Qb=0,sd&&(Ia.qb=(jo[3][No[3]+0].value<<24|jo[1][No[1]+0].value<<16|jo[2][No[2]+0].value)>>>0,wf==0&&256>jo[0][No[0]+0].value&&(Ia.Qb=1,Ia.qb+=jo[0][No[0]+0].value<<8)),Ia.jc=!Ia.Qb&&6>jf,Ia.jc){var ld,mn=Ia;for(ld=0;ld<xr;++ld){var Fn=ld,Bn=mn.pd[Fn],cd=mn.G[0][mn.H[0]+Fn];256<=cd.value?(Bn.g=cd.g+256,Bn.value=cd.value):(Bn.g=0,Bn.value=0,Fn>>=vt(cd,8,Bn),Fn>>=vt(mn.G[1][mn.H[1]+Fn],16,Bn),Fn>>=vt(mn.G[2][mn.H[2]+Fn],0,Bn),vt(mn.G[3][mn.H[3]+Fn],24,Bn))}}}hr.vc=vr,hr.Wb=Or,hr.Ya=ed,hr.yc=Hu,js=1;break t}js=0}if(!(q=js)){P.a=3;break e}if(0<_e){if(ee.ua=1<<_e,!X(ee.Wa,_e)){P.a=1,q=0;break e}}else ee.ua=0;var Xu=P,Df=z,Dv=Y,Qu=Xu.s,Zu=Qu.xc;if(Xu.c=Df,Xu.i=Dv,Qu.md=Pe(Df,Zu),Qu.wc=Zu==0?-1:(1<<Zu)-1,y){P.xb=dv;break e}if((ge=i(z*Y))==null){P.a=1,q=0;break e}q=(q=Wr(P,ge,0,z,Y,Y,null))&&!K.h;break e}return q?(O!=null?O[0]=ge:(t(ge==null),t(y)),P.$=0,y||ua(ee)):ua(ee),q}function De(d,m){var y=d.c*d.i,P=y+m+16*m;return t(d.c<=m),d.V=i(P),d.V==null?(d.Ta=null,d.Ua=0,d.a=1,0):(d.Ta=d.V,d.Ua=d.Ba+y+m,1)}function Ye(d,m){var y=d.C,P=m-y,O=d.V,q=d.Ba+d.c*y;for(t(m<=d.l.o);0<P;){var z=16<P?16:P,Y=d.l.ma,K=d.l.width,ee=K*z,ge=Y.ca,_e=Y.tb+K*y,Ie=d.Ta,we=d.Ua;Xt(d,z,O,q),Js(Ie,we,ge,_e,ee),dr(Y,y,y+z,ge,_e,K),P-=z,O+=z*d.c,y+=z}t(y==m),d.C=d.Ma=m}function Ge(){this.ub=this.yd=this.td=this.Rb=0}function ot(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function xt(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function Et(){this.Yb=function(){var d=[];return function m(y,P,O){for(var q=O[P],z=0;z<q&&(y.push(O.length>P+1?[]:0),!(O.length<P+1));z++)m(y[z],P+1,O)}(d,0,[3,11]),d}()}function Zt(){this.jb=i(3),this.Wc=l([4,8],Et),this.Xc=l([4,17],Et)}function is(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function Rt(){this.ld=this.La=this.dd=this.tc=0}function cs(){this.Na=this.la=0}function Us(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Os(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function ar(){this.uc=this.M=this.Nb=0,this.wa=Array(new Rt),this.Y=0,this.ya=Array(new Os),this.aa=0,this.l=new to}function gi(){this.y=i(16),this.f=i(8),this.ea=i(8)}function eo(){this.cb=this.a=0,this.sc="",this.m=new Se,this.Od=new Ge,this.Kc=new ot,this.ed=new is,this.Qa=new xt,this.Ic=this.$c=this.Aa=0,this.D=new ar,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,Se),this.ia=0,this.pb=o(4,Us),this.Pa=new Zt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new gi),this.Hd=0,this.rb=Array(new cs),this.sb=0,this.wa=Array(new Rt),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Os),this.L=this.aa=0,this.gd=l([4,2],Rt),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function to(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function xu(){var d=new eo;return d!=null&&(d.a=0,d.sc="OK",d.cb=0,d.Xb=0,Rl||(Rl=kc)),d}function Ys(d,m,y){return d.a==0&&(d.a=m,d.sc=y,d.cb=0),0}function Nc(d,m,y){return 3<=y&&d[m+0]==157&&d[m+1]==1&&d[m+2]==42}function Sc(d,m){if(d==null)return 0;if(d.a=0,d.sc="OK",m==null)return Ys(d,2,"null VP8Io passed to VP8GetHeaders()");var y=m.data,P=m.w,O=m.ha;if(4>O)return Ys(d,7,"Truncated header.");var q=y[P+0]|y[P+1]<<8|y[P+2]<<16,z=d.Od;if(z.Rb=!(1&q),z.td=q>>1&7,z.yd=q>>4&1,z.ub=q>>5,3<z.td)return Ys(d,3,"Incorrect keyframe parameters.");if(!z.yd)return Ys(d,4,"Frame not displayable.");P+=3,O-=3;var Y=d.Kc;if(z.Rb){if(7>O)return Ys(d,7,"cannot parse picture header");if(!Nc(y,P,O))return Ys(d,3,"Bad code word");Y.c=16383&(y[P+4]<<8|y[P+3]),Y.Td=y[P+4]>>6,Y.i=16383&(y[P+6]<<8|y[P+5]),Y.Ud=y[P+6]>>6,P+=7,O-=7,d.za=Y.c+15>>4,d.Ub=Y.i+15>>4,m.width=Y.c,m.height=Y.i,m.Da=0,m.j=0,m.v=0,m.va=m.width,m.o=m.height,m.da=0,m.ib=m.width,m.hb=m.height,m.U=m.width,m.T=m.height,n((q=d.Pa).jb,0,255,q.jb.length),t((q=d.Qa)!=null),q.Cb=0,q.Bb=0,q.Fb=1,n(q.Zb,0,0,q.Zb.length),n(q.Lb,0,0,q.Lb)}if(z.ub>O)return Ys(d,7,"bad partition length");H(q=d.m,y,P,z.ub),P+=z.ub,O-=z.ub,z.Rb&&(Y.Ld=ie(q),Y.Kd=ie(q)),Y=d.Qa;var K,ee=d.Pa;if(t(q!=null),t(Y!=null),Y.Cb=ie(q),Y.Cb){if(Y.Bb=ie(q),ie(q)){for(Y.Fb=ie(q),K=0;4>K;++K)Y.Zb[K]=ie(q)?ce(q,7):0;for(K=0;4>K;++K)Y.Lb[K]=ie(q)?ce(q,6):0}if(Y.Bb)for(K=0;3>K;++K)ee.jb[K]=ie(q)?se(q,8):255}else Y.Bb=0;if(q.Ka)return Ys(d,3,"cannot parse segment header");if((Y=d.ed).zd=ie(q),Y.Tb=se(q,6),Y.wb=se(q,3),Y.Pc=ie(q),Y.Pc&&ie(q)){for(ee=0;4>ee;++ee)ie(q)&&(Y.vd[ee]=ce(q,6));for(ee=0;4>ee;++ee)ie(q)&&(Y.od[ee]=ce(q,6))}if(d.L=Y.Tb==0?0:Y.zd?1:2,q.Ka)return Ys(d,3,"cannot parse filter header");var ge=O;if(O=K=P,P=K+ge,Y=ge,d.Xb=(1<<se(d.m,2))-1,ge<3*(ee=d.Xb))y=7;else{for(K+=3*ee,Y-=3*ee,ge=0;ge<ee;++ge){var _e=y[O+0]|y[O+1]<<8|y[O+2]<<16;_e>Y&&(_e=Y),H(d.Jc[+ge],y,K,_e),K+=_e,Y-=_e,O+=3}H(d.Jc[+ee],y,K,Y),y=K<P?0:5}if(y!=0)return Ys(d,y,"cannot parse partitions");for(y=se(K=d.m,7),O=ie(K)?ce(K,4):0,P=ie(K)?ce(K,4):0,Y=ie(K)?ce(K,4):0,ee=ie(K)?ce(K,4):0,K=ie(K)?ce(K,4):0,ge=d.Qa,_e=0;4>_e;++_e){if(ge.Cb){var Ie=ge.Zb[_e];ge.Fb||(Ie+=y)}else{if(0<_e){d.pb[_e]=d.pb[0];continue}Ie=y}var we=d.pb[_e];we.Sc[0]=zu[sa(Ie+O,127)],we.Sc[1]=$u[sa(Ie+0,127)],we.Eb[0]=2*zu[sa(Ie+P,127)],we.Eb[1]=101581*$u[sa(Ie+Y,127)]>>16,8>we.Eb[1]&&(we.Eb[1]=8),we.Qc[0]=zu[sa(Ie+ee,117)],we.Qc[1]=$u[sa(Ie+K,127)],we.lc=Ie+K}if(!z.Rb)return Ys(d,4,"Not a key frame.");for(ie(q),z=d.Pa,y=0;4>y;++y){for(O=0;8>O;++O)for(P=0;3>P;++P)for(Y=0;11>Y;++Y)ee=ue(q,lv[y][O][P][Y])?se(q,8):iv[y][O][P][Y],z.Wc[y][O].Yb[P][Y]=ee;for(O=0;17>O;++O)z.Xc[y][O]=z.Wc[y][cv[O]]}return d.kc=ie(q),d.kc&&(d.Bd=se(q,8)),d.cb=1}function kc(d,m,y,P,O,q,z){var Y=m[O].Yb[y];for(y=0;16>O;++O){if(!ue(d,Y[y+0]))return O;for(;!ue(d,Y[y+1]);)if(Y=m[++O].Yb[0],y=0,O==16)return 16;var K=m[O+1].Yb;if(ue(d,Y[y+2])){var ee=d,ge=0;if(ue(ee,(Ie=Y)[(_e=y)+3]))if(ue(ee,Ie[_e+6])){for(Y=0,_e=2*(ge=ue(ee,Ie[_e+8]))+(Ie=ue(ee,Ie[_e+9+ge])),ge=0,Ie=av[_e];Ie[Y];++Y)ge+=ge+ue(ee,Ie[Y]);ge+=3+(8<<_e)}else ue(ee,Ie[_e+7])?(ge=7+2*ue(ee,165),ge+=ue(ee,145)):ge=5+ue(ee,159);else ge=ue(ee,Ie[_e+4])?3+ue(ee,Ie[_e+5]):2;Y=K[2]}else ge=1,Y=K[1];K=z+nv[O],0>(ee=d).b&&ae(ee);var _e,Ie=ee.b,we=(_e=ee.Ca>>1)-(ee.I>>Ie)>>31;--ee.b,ee.Ca+=we,ee.Ca|=1,ee.I-=(_e+1&we)<<Ie,q[K]=((ge^we)-we)*P[(0<O)+0]}return 16}function ml(d){var m=d.rb[d.sb-1];m.la=0,m.Na=0,n(d.zc,0,0,d.zc.length),d.ja=0}function vu(d,m){if(d==null)return 0;if(m==null)return Ys(d,2,"NULL VP8Io parameter in VP8Decode().");if(!d.cb&&!Sc(d,m))return 0;if(t(d.cb),m.ac==null||m.ac(m)){m.ob&&(d.L=0);var y=Zc[d.L];if(d.L==2?(d.yb=0,d.zb=0):(d.yb=m.v-y>>4,d.zb=m.j-y>>4,0>d.yb&&(d.yb=0),0>d.zb&&(d.zb=0)),d.Va=m.o+15+y>>4,d.Hb=m.va+15+y>>4,d.Hb>d.za&&(d.Hb=d.za),d.Va>d.Ub&&(d.Va=d.Ub),0<d.L){var P=d.ed;for(y=0;4>y;++y){var O;if(d.Qa.Cb){var q=d.Qa.Lb[y];d.Qa.Fb||(q+=P.Tb)}else q=P.Tb;for(O=0;1>=O;++O){var z=d.gd[y][O],Y=q;if(P.Pc&&(Y+=P.vd[0],O&&(Y+=P.od[0])),0<(Y=0>Y?0:63<Y?63:Y)){var K=Y;0<P.wb&&(K=4<P.wb?K>>2:K>>1)>9-P.wb&&(K=9-P.wb),1>K&&(K=1),z.dd=K,z.tc=2*Y+K,z.ld=40<=Y?2:15<=Y?1:0}else z.tc=0;z.La=O}}}y=0}else Ys(d,6,"Frame setup failed"),y=d.a;if(y=y==0){if(y){d.$c=0,0<d.Aa||(d.Ic=jv);e:{y=d.Ic,P=4*(K=d.za);var ee=32*K,ge=K+1,_e=0<d.L?K*(0<d.Aa?2:1):0,Ie=(d.Aa==2?2:1)*K;if((z=P+832+(O=3*(16*y+Zc[d.L])/2*ee)+(q=d.Fa!=null&&0<d.Fa.length?d.Kc.c*d.Kc.i:0))!=z)y=0;else{if(z>d.Vb){if(d.Vb=0,d.Ec=i(z),d.Fc=0,d.Ec==null){y=Ys(d,1,"no memory during frame initialization.");break e}d.Vb=z}z=d.Ec,Y=d.Fc,d.Ac=z,d.Bc=Y,Y+=P,d.Gd=o(ee,gi),d.Hd=0,d.rb=o(ge+1,cs),d.sb=1,d.wa=_e?o(_e,Rt):null,d.Y=0,d.D.Nb=0,d.D.wa=d.wa,d.D.Y=d.Y,0<d.Aa&&(d.D.Y+=K),t(!0),d.oc=z,d.pc=Y,Y+=832,d.ya=o(Ie,Os),d.aa=0,d.D.ya=d.ya,d.D.aa=d.aa,d.Aa==2&&(d.D.aa+=K),d.R=16*K,d.B=8*K,K=(ee=Zc[d.L])*d.R,ee=ee/2*d.B,d.sa=z,d.ta=Y+K,d.qa=d.sa,d.ra=d.ta+16*y*d.R+ee,d.Ha=d.qa,d.Ia=d.ra+8*y*d.B+ee,d.$c=0,Y+=O,d.mb=q?z:null,d.nb=q?Y:null,t(Y+q<=d.Fc+d.Vb),ml(d),n(d.Ac,d.Bc,0,P),y=1}}if(y){if(m.ka=0,m.y=d.sa,m.O=d.ta,m.f=d.qa,m.N=d.ra,m.ea=d.Ha,m.Vd=d.Ia,m.fa=d.R,m.Rc=d.B,m.F=null,m.J=0,!Wc){for(y=-255;255>=y;++y)nr[255+y]=0>y?-y:y;for(y=-1020;1020>=y;++y)dn[1020+y]=-128>y?-128:127<y?127:y;for(y=-112;112>=y;++y)El[112+y]=-16>y?-16:15<y?15:y;for(y=-255;510>=y;++y)bo[255+y]=0>y?0:255<y?255:y;Wc=1}xo=wu,cn=yu,Tl=Ac,Rr=bu,ma=Pc,Gs=Cc,vo=yl,$c=yi,Dl=Mu,ji=bl,Ni=Du,Ln=oo,Si=wl,yo=Oc,ki=Rc,Tn=Va,Ml=nn,fa=Tu,_a[0]=Ha,_a[1]=ju,_a[2]=Cu,_a[3]=Au,_a[4]=Lc,_a[5]=no,_a[6]=Tc,_a[7]=gl,_a[8]=_u,_a[9]=Pu,Dn[0]=_c,Dn[1]=Su,Dn[2]=an,Dn[3]=ro,Dn[4]=jr,Dn[5]=ku,Dn[6]=Ic,un[0]=Cn,un[1]=Nu,un[2]=Iu,un[3]=xl,un[4]=vi,un[5]=Lu,un[6]=vl,y=1}else y=0}y&&(y=function(we,ze){for(we.M=0;we.M<we.Va;++we.M){var Me,xe=we.Jc[we.M&we.Xb],ye=we.m,Ue=we;for(Me=0;Me<Ue.za;++Me){var We=ye,qe=Ue,ut=qe.Ac,st=qe.Bc+4*Me,Nt=qe.zc,lt=qe.ya[qe.aa+Me];if(qe.Qa.Bb?lt.$b=ue(We,qe.Pa.jb[0])?2+ue(We,qe.Pa.jb[2]):ue(We,qe.Pa.jb[1]):lt.$b=0,qe.kc&&(lt.Ad=ue(We,qe.Bd)),lt.Za=!ue(We,145)+0,lt.Za){var ls=lt.Ob,hs=0;for(qe=0;4>qe;++qe){var os,ts=Nt[0+qe];for(os=0;4>os;++os){ts=ov[ut[st+os]][ts];for(var js=df[ue(We,ts[0])];0<js;)js=df[2*js+ue(We,ts[js])];ts=-js,ut[st+os]=ts}a(ls,hs,ut,st,4),hs+=4,Nt[0+qe]=ts}}else ts=ue(We,156)?ue(We,128)?1:3:ue(We,163)?2:0,lt.Ob[0]=ts,n(ut,st,ts,4),n(Nt,0,ts,4);lt.Dd=ue(We,142)?ue(We,114)?ue(We,183)?1:3:2:0}if(Ue.m.Ka)return Ys(we,7,"Premature end-of-partition0 encountered.");for(;we.ja<we.za;++we.ja){if(Ue=xe,We=(ye=we).rb[ye.sb-1],ut=ye.rb[ye.sb+ye.ja],Me=ye.ya[ye.aa+ye.ja],st=ye.kc?Me.Ad:0)We.la=ut.la=0,Me.Za||(We.Na=ut.Na=0),Me.Hc=0,Me.Gc=0,Me.ia=0;else{var vs,Ht;if(We=ut,ut=Ue,st=ye.Pa.Xc,Nt=ye.ya[ye.aa+ye.ja],lt=ye.pb[Nt.$b],qe=Nt.ad,ls=0,hs=ye.rb[ye.sb-1],ts=os=0,n(qe,ls,0,384),Nt.Za)var tr=0,Jr=st[3];else{js=i(16);var sr=We.Na+hs.Na;if(sr=Rl(ut,st[1],sr,lt.Eb,0,js,0),We.Na=hs.Na=(0<sr)+0,1<sr)xo(js,0,qe,ls);else{var Kr=js[0]+3>>3;for(js=0;256>js;js+=16)qe[ls+js]=Kr}tr=1,Jr=st[0]}var ms=15&We.la,aa=15&hs.la;for(js=0;4>js;++js){var na=1&aa;for(Kr=Ht=0;4>Kr;++Kr)ms=ms>>1|(na=(sr=Rl(ut,Jr,sr=na+(1&ms),lt.Sc,tr,qe,ls))>tr)<<7,Ht=Ht<<2|(3<sr?3:1<sr?2:qe[ls+0]!=0),ls+=16;ms>>=4,aa=aa>>1|na<<7,os=(os<<8|Ht)>>>0}for(Jr=ms,tr=aa>>4,vs=0;4>vs;vs+=2){for(Ht=0,ms=We.la>>4+vs,aa=hs.la>>4+vs,js=0;2>js;++js){for(na=1&aa,Kr=0;2>Kr;++Kr)sr=na+(1&ms),ms=ms>>1|(na=0<(sr=Rl(ut,st[2],sr,lt.Qc,0,qe,ls)))<<3,Ht=Ht<<2|(3<sr?3:1<sr?2:qe[ls+0]!=0),ls+=16;ms>>=2,aa=aa>>1|na<<5}ts|=Ht<<4*vs,Jr|=ms<<4<<vs,tr|=(240&aa)<<vs}We.la=Jr,hs.la=tr,Nt.Hc=os,Nt.Gc=ts,Nt.ia=43690&ts?0:lt.ia,st=!(os|ts)}if(0<ye.L&&(ye.wa[ye.Y+ye.ja]=ye.gd[Me.$b][Me.Za],ye.wa[ye.Y+ye.ja].La|=!st),Ue.Ka)return Ys(we,7,"Premature end-of-file encountered.")}if(ml(we),ye=ze,Ue=1,Me=(xe=we).D,We=0<xe.L&&xe.M>=xe.zb&&xe.M<=xe.Va,xe.Aa==0)e:{if(Me.M=xe.M,Me.uc=We,Al(xe,Me),Ue=1,Me=(Ht=xe.D).Nb,We=(ts=Zc[xe.L])*xe.R,ut=ts/2*xe.B,js=16*Me*xe.R,Kr=8*Me*xe.B,st=xe.sa,Nt=xe.ta-We+js,lt=xe.qa,qe=xe.ra-ut+Kr,ls=xe.Ha,hs=xe.Ia-ut+Kr,aa=(ms=Ht.M)==0,os=ms>=xe.Va-1,xe.Aa==2&&Al(xe,Ht),Ht.uc)for(na=(sr=xe).D.M,t(sr.D.uc),Ht=sr.yb;Ht<sr.Hb;++Ht){tr=Ht,Jr=na;var hr=(vr=(zs=sr).D).Nb;vs=zs.R;var vr=vr.wa[vr.Y+tr],Or=zs.sa,va=zs.ta+16*hr*vs+16*tr,Ga=vr.dd,mr=vr.tc;if(mr!=0)if(t(3<=mr),zs.L==1)0<tr&&Tn(Or,va,vs,mr+4),vr.La&&fa(Or,va,vs,mr),0<Jr&&ki(Or,va,vs,mr+4),vr.La&&Ml(Or,va,vs,mr);else{var hn=zs.B,Ci=zs.qa,wo=zs.ra+8*hr*hn+8*tr,En=zs.Ha,zs=zs.Ia+8*hr*hn+8*tr;hr=vr.ld,0<tr&&($c(Or,va,vs,mr+4,Ga,hr),ji(Ci,wo,En,zs,hn,mr+4,Ga,hr)),vr.La&&(Ln(Or,va,vs,mr,Ga,hr),yo(Ci,wo,En,zs,hn,mr,Ga,hr)),0<Jr&&(vo(Or,va,vs,mr+4,Ga,hr),Dl(Ci,wo,En,zs,hn,mr+4,Ga,hr)),vr.La&&(Ni(Or,va,vs,mr,Ga,hr),Si(Ci,wo,En,zs,hn,mr,Ga,hr))}}if(xe.ia&&alert("todo:DitherRow"),ye.put!=null){if(Ht=16*ms,ms=16*(ms+1),aa?(ye.y=xe.sa,ye.O=xe.ta+js,ye.f=xe.qa,ye.N=xe.ra+Kr,ye.ea=xe.Ha,ye.W=xe.Ia+Kr):(Ht-=ts,ye.y=st,ye.O=Nt,ye.f=lt,ye.N=qe,ye.ea=ls,ye.W=hs),os||(ms-=ts),ms>ye.o&&(ms=ye.o),ye.F=null,ye.J=null,xe.Fa!=null&&0<xe.Fa.length&&Ht<ms&&(ye.J=kl(xe,ye,Ht,ms-Ht),ye.F=xe.mb,ye.F==null&&ye.F.length==0)){Ue=Ys(xe,3,"Could not decode alpha data.");break e}Ht<ye.j&&(ts=ye.j-Ht,Ht=ye.j,t(!(1&ts)),ye.O+=xe.R*ts,ye.N+=xe.B*(ts>>1),ye.W+=xe.B*(ts>>1),ye.F!=null&&(ye.J+=ye.width*ts)),Ht<ms&&(ye.O+=ye.v,ye.N+=ye.v>>1,ye.W+=ye.v>>1,ye.F!=null&&(ye.J+=ye.v),ye.ka=Ht-ye.j,ye.U=ye.va-ye.v,ye.T=ms-Ht,Ue=ye.put(ye))}Me+1!=xe.Ic||os||(a(xe.sa,xe.ta-We,st,Nt+16*xe.R,We),a(xe.qa,xe.ra-ut,lt,qe+8*xe.B,ut),a(xe.Ha,xe.Ia-ut,ls,hs+8*xe.B,ut))}if(!Ue)return Ys(we,6,"Output aborted.")}return 1}(d,m)),m.bc!=null&&m.bc(m),y&=1}return y?(d.cb=0,y):0}function Ca(d,m,y,P,O){O=d[m+y+32*P]+(O>>3),d[m+y+32*P]=-256&O?0>O?0:255:O}function so(d,m,y,P,O,q){Ca(d,m,0,y,P+O),Ca(d,m,1,y,P+q),Ca(d,m,2,y,P-q),Ca(d,m,3,y,P-O)}function Vr(d){return(20091*d>>16)+d}function fl(d,m,y,P){var O,q=0,z=i(16);for(O=0;4>O;++O){var Y=d[m+0]+d[m+8],K=d[m+0]-d[m+8],ee=(35468*d[m+4]>>16)-Vr(d[m+12]),ge=Vr(d[m+4])+(35468*d[m+12]>>16);z[q+0]=Y+ge,z[q+1]=K+ee,z[q+2]=K-ee,z[q+3]=Y-ge,q+=4,m++}for(O=q=0;4>O;++O)Y=(d=z[q+0]+4)+z[q+8],K=d-z[q+8],ee=(35468*z[q+4]>>16)-Vr(z[q+12]),Ca(y,P,0,0,Y+(ge=Vr(z[q+4])+(35468*z[q+12]>>16))),Ca(y,P,1,0,K+ee),Ca(y,P,2,0,K-ee),Ca(y,P,3,0,Y-ge),q++,P+=32}function Cc(d,m,y,P){var O=d[m+0]+4,q=35468*d[m+4]>>16,z=Vr(d[m+4]),Y=35468*d[m+1]>>16;so(y,P,0,O+z,d=Vr(d[m+1]),Y),so(y,P,1,O+q,d,Y),so(y,P,2,O-q,d,Y),so(y,P,3,O-z,d,Y)}function yu(d,m,y,P,O){fl(d,m,y,P),O&&fl(d,m+16,y,P+4)}function Ac(d,m,y,P){cn(d,m+0,y,P,1),cn(d,m+32,y,P+128,1)}function bu(d,m,y,P){var O;for(d=d[m+0]+4,O=0;4>O;++O)for(m=0;4>m;++m)Ca(y,P,m,O,d)}function Pc(d,m,y,P){d[m+0]&&Rr(d,m+0,y,P),d[m+16]&&Rr(d,m+16,y,P+4),d[m+32]&&Rr(d,m+32,y,P+128),d[m+48]&&Rr(d,m+48,y,P+128+4)}function wu(d,m,y,P){var O,q=i(16);for(O=0;4>O;++O){var z=d[m+0+O]+d[m+12+O],Y=d[m+4+O]+d[m+8+O],K=d[m+4+O]-d[m+8+O],ee=d[m+0+O]-d[m+12+O];q[0+O]=z+Y,q[8+O]=z-Y,q[4+O]=ee+K,q[12+O]=ee-K}for(O=0;4>O;++O)z=(d=q[0+4*O]+3)+q[3+4*O],Y=q[1+4*O]+q[2+4*O],K=q[1+4*O]-q[2+4*O],ee=d-q[3+4*O],y[P+0]=z+Y>>3,y[P+16]=ee+K>>3,y[P+32]=z-Y>>3,y[P+48]=ee-K>>3,P+=64}function pl(d,m,y){var P,O=m-32,q=ra,z=255-d[O-1];for(P=0;P<y;++P){var Y,K=q,ee=z+d[m-1];for(Y=0;Y<y;++Y)d[m+Y]=K[ee+d[O+Y]];m+=32}}function ju(d,m){pl(d,m,4)}function Nu(d,m){pl(d,m,8)}function Su(d,m){pl(d,m,16)}function an(d,m){var y;for(y=0;16>y;++y)a(d,m+32*y,d,m-32,16)}function ro(d,m){var y;for(y=16;0<y;--y)n(d,m,d[m-1],16),m+=32}function ao(d,m,y){var P;for(P=0;16>P;++P)n(m,y+32*P,d,16)}function _c(d,m){var y,P=16;for(y=0;16>y;++y)P+=d[m-1+32*y]+d[m+y-32];ao(P>>5,d,m)}function jr(d,m){var y,P=8;for(y=0;16>y;++y)P+=d[m-1+32*y];ao(P>>4,d,m)}function ku(d,m){var y,P=8;for(y=0;16>y;++y)P+=d[m+y-32];ao(P>>4,d,m)}function Ic(d,m){ao(128,d,m)}function Ot(d,m,y){return d+2*m+y+2>>2}function Cu(d,m){var y,P=m-32;for(P=new Uint8Array([Ot(d[P-1],d[P+0],d[P+1]),Ot(d[P+0],d[P+1],d[P+2]),Ot(d[P+1],d[P+2],d[P+3]),Ot(d[P+2],d[P+3],d[P+4])]),y=0;4>y;++y)a(d,m+32*y,P,0,P.length)}function Au(d,m){var y=d[m-1],P=d[m-1+32],O=d[m-1+64],q=d[m-1+96];Ae(d,m+0,16843009*Ot(d[m-1-32],y,P)),Ae(d,m+32,16843009*Ot(y,P,O)),Ae(d,m+64,16843009*Ot(P,O,q)),Ae(d,m+96,16843009*Ot(O,q,q))}function Ha(d,m){var y,P=4;for(y=0;4>y;++y)P+=d[m+y-32]+d[m-1+32*y];for(P>>=3,y=0;4>y;++y)n(d,m+32*y,P,4)}function Lc(d,m){var y=d[m-1+0],P=d[m-1+32],O=d[m-1+64],q=d[m-1-32],z=d[m+0-32],Y=d[m+1-32],K=d[m+2-32],ee=d[m+3-32];d[m+0+96]=Ot(P,O,d[m-1+96]),d[m+1+96]=d[m+0+64]=Ot(y,P,O),d[m+2+96]=d[m+1+64]=d[m+0+32]=Ot(q,y,P),d[m+3+96]=d[m+2+64]=d[m+1+32]=d[m+0+0]=Ot(z,q,y),d[m+3+64]=d[m+2+32]=d[m+1+0]=Ot(Y,z,q),d[m+3+32]=d[m+2+0]=Ot(K,Y,z),d[m+3+0]=Ot(ee,K,Y)}function Tc(d,m){var y=d[m+1-32],P=d[m+2-32],O=d[m+3-32],q=d[m+4-32],z=d[m+5-32],Y=d[m+6-32],K=d[m+7-32];d[m+0+0]=Ot(d[m+0-32],y,P),d[m+1+0]=d[m+0+32]=Ot(y,P,O),d[m+2+0]=d[m+1+32]=d[m+0+64]=Ot(P,O,q),d[m+3+0]=d[m+2+32]=d[m+1+64]=d[m+0+96]=Ot(O,q,z),d[m+3+32]=d[m+2+64]=d[m+1+96]=Ot(q,z,Y),d[m+3+64]=d[m+2+96]=Ot(z,Y,K),d[m+3+96]=Ot(Y,K,K)}function no(d,m){var y=d[m-1+0],P=d[m-1+32],O=d[m-1+64],q=d[m-1-32],z=d[m+0-32],Y=d[m+1-32],K=d[m+2-32],ee=d[m+3-32];d[m+0+0]=d[m+1+64]=q+z+1>>1,d[m+1+0]=d[m+2+64]=z+Y+1>>1,d[m+2+0]=d[m+3+64]=Y+K+1>>1,d[m+3+0]=K+ee+1>>1,d[m+0+96]=Ot(O,P,y),d[m+0+64]=Ot(P,y,q),d[m+0+32]=d[m+1+96]=Ot(y,q,z),d[m+1+32]=d[m+2+96]=Ot(q,z,Y),d[m+2+32]=d[m+3+96]=Ot(z,Y,K),d[m+3+32]=Ot(Y,K,ee)}function gl(d,m){var y=d[m+0-32],P=d[m+1-32],O=d[m+2-32],q=d[m+3-32],z=d[m+4-32],Y=d[m+5-32],K=d[m+6-32],ee=d[m+7-32];d[m+0+0]=y+P+1>>1,d[m+1+0]=d[m+0+64]=P+O+1>>1,d[m+2+0]=d[m+1+64]=O+q+1>>1,d[m+3+0]=d[m+2+64]=q+z+1>>1,d[m+0+32]=Ot(y,P,O),d[m+1+32]=d[m+0+96]=Ot(P,O,q),d[m+2+32]=d[m+1+96]=Ot(O,q,z),d[m+3+32]=d[m+2+96]=Ot(q,z,Y),d[m+3+64]=Ot(z,Y,K),d[m+3+96]=Ot(Y,K,ee)}function Pu(d,m){var y=d[m-1+0],P=d[m-1+32],O=d[m-1+64],q=d[m-1+96];d[m+0+0]=y+P+1>>1,d[m+2+0]=d[m+0+32]=P+O+1>>1,d[m+2+32]=d[m+0+64]=O+q+1>>1,d[m+1+0]=Ot(y,P,O),d[m+3+0]=d[m+1+32]=Ot(P,O,q),d[m+3+32]=d[m+1+64]=Ot(O,q,q),d[m+3+64]=d[m+2+64]=d[m+0+96]=d[m+1+96]=d[m+2+96]=d[m+3+96]=q}function _u(d,m){var y=d[m-1+0],P=d[m-1+32],O=d[m-1+64],q=d[m-1+96],z=d[m-1-32],Y=d[m+0-32],K=d[m+1-32],ee=d[m+2-32];d[m+0+0]=d[m+2+32]=y+z+1>>1,d[m+0+32]=d[m+2+64]=P+y+1>>1,d[m+0+64]=d[m+2+96]=O+P+1>>1,d[m+0+96]=q+O+1>>1,d[m+3+0]=Ot(Y,K,ee),d[m+2+0]=Ot(z,Y,K),d[m+1+0]=d[m+3+32]=Ot(y,z,Y),d[m+1+32]=d[m+3+64]=Ot(P,y,z),d[m+1+64]=d[m+3+96]=Ot(O,P,y),d[m+1+96]=Ot(q,O,P)}function Iu(d,m){var y;for(y=0;8>y;++y)a(d,m+32*y,d,m-32,8)}function xl(d,m){var y;for(y=0;8>y;++y)n(d,m,d[m-1],8),m+=32}function xi(d,m,y){var P;for(P=0;8>P;++P)n(m,y+32*P,d,8)}function Cn(d,m){var y,P=8;for(y=0;8>y;++y)P+=d[m+y-32]+d[m-1+32*y];xi(P>>4,d,m)}function Lu(d,m){var y,P=4;for(y=0;8>y;++y)P+=d[m+y-32];xi(P>>3,d,m)}function vi(d,m){var y,P=4;for(y=0;8>y;++y)P+=d[m-1+32*y];xi(P>>3,d,m)}function vl(d,m){xi(128,d,m)}function io(d,m,y){var P=d[m-y],O=d[m+0],q=3*(O-P)+Ou[1020+d[m-2*y]-d[m+y]],z=Hc[112+(q+4>>3)];d[m-y]=ra[255+P+Hc[112+(q+3>>3)]],d[m+0]=ra[255+O-z]}function Dc(d,m,y,P){var O=d[m+0],q=d[m+y];return ga[255+d[m-2*y]-d[m-y]]>P||ga[255+q-O]>P}function Mc(d,m,y,P){return 4*ga[255+d[m-y]-d[m+0]]+ga[255+d[m-2*y]-d[m+y]]<=P}function Ec(d,m,y,P,O){var q=d[m-3*y],z=d[m-2*y],Y=d[m-y],K=d[m+0],ee=d[m+y],ge=d[m+2*y],_e=d[m+3*y];return 4*ga[255+Y-K]+ga[255+z-ee]>P?0:ga[255+d[m-4*y]-q]<=O&&ga[255+q-z]<=O&&ga[255+z-Y]<=O&&ga[255+_e-ge]<=O&&ga[255+ge-ee]<=O&&ga[255+ee-K]<=O}function Rc(d,m,y,P){var O=2*P+1;for(P=0;16>P;++P)Mc(d,m+P,y,O)&&io(d,m+P,y)}function Va(d,m,y,P){var O=2*P+1;for(P=0;16>P;++P)Mc(d,m+P*y,1,O)&&io(d,m+P*y,1)}function nn(d,m,y,P){var O;for(O=3;0<O;--O)Rc(d,m+=4*y,y,P)}function Tu(d,m,y,P){var O;for(O=3;0<O;--O)Va(d,m+=4,y,P)}function An(d,m,y,P,O,q,z,Y){for(q=2*q+1;0<O--;){if(Ec(d,m,y,q,z))if(Dc(d,m,y,Y))io(d,m,y);else{var K=d,ee=m,ge=y,_e=K[ee-2*ge],Ie=K[ee-ge],we=K[ee+0],ze=K[ee+ge],Me=K[ee+2*ge],xe=27*(Ue=Ou[1020+3*(we-Ie)+Ou[1020+_e-ze]])+63>>7,ye=18*Ue+63>>7,Ue=9*Ue+63>>7;K[ee-3*ge]=ra[255+K[ee-3*ge]+Ue],K[ee-2*ge]=ra[255+_e+ye],K[ee-ge]=ra[255+Ie+xe],K[ee+0]=ra[255+we-xe],K[ee+ge]=ra[255+ze-ye],K[ee+2*ge]=ra[255+Me-Ue]}m+=P}}function Aa(d,m,y,P,O,q,z,Y){for(q=2*q+1;0<O--;){if(Ec(d,m,y,q,z))if(Dc(d,m,y,Y))io(d,m,y);else{var K=d,ee=m,ge=y,_e=K[ee-ge],Ie=K[ee+0],we=K[ee+ge],ze=Hc[112+((Me=3*(Ie-_e))+4>>3)],Me=Hc[112+(Me+3>>3)],xe=ze+1>>1;K[ee-2*ge]=ra[255+K[ee-2*ge]+xe],K[ee-ge]=ra[255+_e+Me],K[ee+0]=ra[255+Ie-ze],K[ee+ge]=ra[255+we-xe]}m+=P}}function yl(d,m,y,P,O,q){An(d,m,y,1,16,P,O,q)}function yi(d,m,y,P,O,q){An(d,m,1,y,16,P,O,q)}function Du(d,m,y,P,O,q){var z;for(z=3;0<z;--z)Aa(d,m+=4*y,y,1,16,P,O,q)}function oo(d,m,y,P,O,q){var z;for(z=3;0<z;--z)Aa(d,m+=4,1,y,16,P,O,q)}function Mu(d,m,y,P,O,q,z,Y){An(d,m,O,1,8,q,z,Y),An(y,P,O,1,8,q,z,Y)}function bl(d,m,y,P,O,q,z,Y){An(d,m,1,O,8,q,z,Y),An(y,P,1,O,8,q,z,Y)}function wl(d,m,y,P,O,q,z,Y){Aa(d,m+4*O,O,1,8,q,z,Y),Aa(y,P+4*O,O,1,8,q,z,Y)}function Oc(d,m,y,P,O,q,z,Y){Aa(d,m+4,1,O,8,q,z,Y),Aa(y,P+4,1,O,8,q,z,Y)}function lo(){this.ba=new Hs,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Kt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function jl(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Nl(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Fc(){this.ua=0,this.Wa=new W,this.vb=new W,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new I,this.yc=new k}function Eu(){this.xb=this.a=0,this.l=new to,this.ca=new Hs,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new M,this.Pb=0,this.wd=new M,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Fc,this.ab=0,this.gc=o(4,Nl),this.Oc=0}function co(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new to,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function bi(d,m,y,P,O,q,z){for(d=d==null?0:d[m+0],m=0;m<z;++m)O[q+m]=d+y[P+m]&255,d=O[q+m]}function Sl(d,m,y,P,O,q,z){var Y;if(d==null)bi(null,null,y,P,O,q,z);else for(Y=0;Y<z;++Y)O[q+Y]=d[m+Y]+y[P+Y]&255}function Pn(d,m,y,P,O,q,z){if(d==null)bi(null,null,y,P,O,q,z);else{var Y,K=d[m+0],ee=K,ge=K;for(Y=0;Y<z;++Y)ee=ge+(K=d[m+Y])-ee,ge=y[P+Y]+(-256&ee?0>ee?0:255:ee)&255,ee=K,O[q+Y]=ge}}function kl(d,m,y,P){var O=m.width,q=m.o;if(t(d!=null&&m!=null),0>y||0>=P||y+P>q)return null;if(!d.Cc){if(d.ga==null){var z;if(d.ga=new co,(z=d.ga==null)||(z=m.width*m.o,t(d.Gb.length==0),d.Gb=i(z),d.Uc=0,d.Gb==null?z=0:(d.mb=d.Gb,d.nb=d.Uc,d.rc=null,z=1),z=!z),!z){z=d.ga;var Y=d.Fa,K=d.P,ee=d.qc,ge=d.mb,_e=d.nb,Ie=K+1,we=ee-1,ze=z.l;if(t(Y!=null&&ge!=null&&m!=null),Mn[0]=null,Mn[1]=bi,Mn[2]=Sl,Mn[3]=Pn,z.ca=ge,z.tb=_e,z.c=m.width,z.i=m.height,t(0<z.c&&0<z.i),1>=ee)m=0;else if(z.$a=Y[K+0]>>0&3,z.Z=Y[K+0]>>2&3,z.Lc=Y[K+0]>>4&3,K=Y[K+0]>>6&3,0>z.$a||1<z.$a||4<=z.Z||1<z.Lc||K)m=0;else if(ze.put=As,ze.ac=Mt,ze.bc=xs,ze.ma=z,ze.width=m.width,ze.height=m.height,ze.Da=m.Da,ze.v=m.v,ze.va=m.va,ze.j=m.j,ze.o=m.o,z.$a)e:{t(z.$a==1),m=Hr();t:for(;;){if(m==null){m=0;break e}if(t(z!=null),z.mc=m,m.c=z.c,m.i=z.i,m.l=z.l,m.l.ma=z,m.l.width=z.c,m.l.height=z.i,m.a=0,le(m.m,Y,Ie,we),!Ne(z.c,z.i,1,m,null)||(m.ab==1&&m.gc[0].hc==3&&Vs(m.s)?(z.ic=1,Y=m.c*m.i,m.Ta=null,m.Ua=0,m.V=i(Y),m.Ba=0,m.V==null?(m.a=1,m=0):m=1):(z.ic=0,m=De(m,z.c)),!m))break t;m=1;break e}z.mc=null,m=0}else m=we>=z.c*z.i;z=!m}if(z)return null;d.ga.Lc!=1?d.Ga=0:P=q-y}t(d.ga!=null),t(y+P<=q);e:{if(m=(Y=d.ga).c,q=Y.l.o,Y.$a==0){if(Ie=d.rc,we=d.Vc,ze=d.Fa,K=d.P+1+y*m,ee=d.mb,ge=d.nb+y*m,t(K<=d.P+d.qc),Y.Z!=0)for(t(Mn[Y.Z]!=null),z=0;z<P;++z)Mn[Y.Z](Ie,we,ze,K,ee,ge,m),Ie=ee,we=ge,ge+=m,K+=m;else for(z=0;z<P;++z)a(ee,ge,ze,K,m),Ie=ee,we=ge,ge+=m,K+=m;d.rc=Ie,d.Vc=we}else{if(t(Y.mc!=null),m=y+P,t((z=Y.mc)!=null),t(m<=z.i),z.C>=m)m=1;else if(Y.ic||ke(),Y.ic){Y=z.V,Ie=z.Ba,we=z.c;var Me=z.i,xe=(ze=1,K=z.$/we,ee=z.$%we,ge=z.m,_e=z.s,z.$),ye=we*Me,Ue=we*m,We=_e.wc,qe=xe<Ue?Wt(_e,ee,K):null;t(xe<=ye),t(m<=Me),t(Vs(_e));t:for(;;){for(;!ge.h&&xe<Ue;){if(ee&We||(qe=Wt(_e,ee,K)),t(qe!=null),G(ge),256>(Me=ct(qe.G[0],qe.H[0],ge)))Y[Ie+xe]=Me,++xe,++ee>=we&&(ee=0,++K<=m&&!(K%16)&&gr(z,K));else{if(!(280>Me)){ze=0;break t}Me=Rs(Me-256,ge);var ut,st=ct(qe.G[4],qe.H[4],ge);if(G(ge),!(xe>=(st=Te(we,st=Rs(st,ge)))&&ye-xe>=Me)){ze=0;break t}for(ut=0;ut<Me;++ut)Y[Ie+xe+ut]=Y[Ie+xe+ut-st];for(xe+=Me,ee+=Me;ee>=we;)ee-=we,++K<=m&&!(K%16)&&gr(z,K);xe<Ue&&ee&We&&(qe=Wt(_e,ee,K))}t(ge.h==J(ge))}gr(z,K>m?m:K);break t}!ze||ge.h&&xe<ye?(ze=0,z.a=ge.h?5:3):z.$=xe,m=ze}else m=Wr(z,z.V,z.Ba,z.c,z.i,m,Ye);if(!m){P=0;break e}}y+P>=q&&(d.Cc=1),P=1}if(!P)return null;if(d.Cc&&((P=d.ga)!=null&&(P.mc=null),d.ga=null,0<d.Ga))return alert("todo:WebPDequantizeLevels"),null}return d.nb+y*O}function g(d,m,y,P,O,q){for(;0<O--;){var z,Y=d,K=m+(y?1:0),ee=d,ge=m+(y?0:3);for(z=0;z<P;++z){var _e=ee[ge+4*z];_e!=255&&(_e*=32897,Y[K+4*z+0]=Y[K+4*z+0]*_e>>23,Y[K+4*z+1]=Y[K+4*z+1]*_e>>23,Y[K+4*z+2]=Y[K+4*z+2]*_e>>23)}m+=q}}function F(d,m,y,P,O){for(;0<P--;){var q;for(q=0;q<y;++q){var z=d[m+2*q+0],Y=15&(ee=d[m+2*q+1]),K=4369*Y,ee=(240&ee|ee>>4)*K>>16;d[m+2*q+0]=(240&z|z>>4)*K>>16&240|(15&z|z<<4)*K>>16>>4&15,d[m+2*q+1]=240&ee|Y}m+=O}}function oe(d,m,y,P,O,q,z,Y){var K,ee,ge=255;for(ee=0;ee<O;++ee){for(K=0;K<P;++K){var _e=d[m+K];q[z+4*K]=_e,ge&=_e}m+=y,z+=Y}return ge!=255}function pe(d,m,y,P,O){var q;for(q=0;q<O;++q)y[P+q]=d[m+q]>>8}function ke(){pa=g,Ps=F,_s=oe,Js=pe}function Oe(d,m,y){S[d]=function(P,O,q,z,Y,K,ee,ge,_e,Ie,we,ze,Me,xe,ye,Ue,We){var qe,ut=We-1>>1,st=Y[K+0]|ee[ge+0]<<16,Nt=_e[Ie+0]|we[ze+0]<<16;t(P!=null);var lt=3*st+Nt+131074>>2;for(m(P[O+0],255&lt,lt>>16,Me,xe),q!=null&&(lt=3*Nt+st+131074>>2,m(q[z+0],255&lt,lt>>16,ye,Ue)),qe=1;qe<=ut;++qe){var ls=Y[K+qe]|ee[ge+qe]<<16,hs=_e[Ie+qe]|we[ze+qe]<<16,os=st+ls+Nt+hs+524296,ts=os+2*(ls+Nt)>>3;lt=ts+st>>1,st=(os=os+2*(st+hs)>>3)+ls>>1,m(P[O+2*qe-1],255&lt,lt>>16,Me,xe+(2*qe-1)*y),m(P[O+2*qe-0],255&st,st>>16,Me,xe+(2*qe-0)*y),q!=null&&(lt=os+Nt>>1,st=ts+hs>>1,m(q[z+2*qe-1],255&lt,lt>>16,ye,Ue+(2*qe-1)*y),m(q[z+2*qe+0],255&st,st>>16,ye,Ue+(2*qe+0)*y)),st=ls,Nt=hs}1&We||(lt=3*st+Nt+131074>>2,m(P[O+We-1],255&lt,lt>>16,Me,xe+(We-1)*y),q!=null&&(lt=3*Nt+st+131074>>2,m(q[z+We-1],255&lt,lt>>16,ye,Ue+(We-1)*y)))}}function He(){xa[Vc]=uv,xa[Yc]=hf,xa[of]=hv,xa[Gc]=mf,xa[Jc]=ff,xa[Fu]=pf,xa[lf]=mv,xa[Bu]=hf,xa[Uu]=mf,xa[Kc]=ff,xa[qu]=pf}function dt(d){return d&-16384?0>d?0:255:d>>fv}function yt(d,m){return dt((19077*d>>8)+(26149*m>>8)-14234)}function $t(d,m,y){return dt((19077*d>>8)-(6419*m>>8)-(13320*y>>8)+8708)}function Bt(d,m){return dt((19077*d>>8)+(33050*m>>8)-17685)}function as(d,m,y,P,O){P[O+0]=yt(d,y),P[O+1]=$t(d,m,y),P[O+2]=Bt(d,m)}function Fs(d,m,y,P,O){P[O+0]=Bt(d,m),P[O+1]=$t(d,m,y),P[O+2]=yt(d,y)}function qs(d,m,y,P,O){var q=$t(d,m,y);m=q<<3&224|Bt(d,m)>>3,P[O+0]=248&yt(d,y)|q>>5,P[O+1]=m}function er(d,m,y,P,O){var q=240&Bt(d,m)|15;P[O+0]=240&yt(d,y)|$t(d,m,y)>>4,P[O+1]=q}function Nr(d,m,y,P,O){P[O+0]=255,as(d,m,y,P,O+1)}function ur(d,m,y,P,O){Fs(d,m,y,P,O),P[O+3]=255}function Pa(d,m,y,P,O){as(d,m,y,P,O),P[O+3]=255}function sa(d,m){return 0>d?0:d>m?m:d}function Ya(d,m,y){S[d]=function(P,O,q,z,Y,K,ee,ge,_e){for(var Ie=ge+(-2&_e)*y;ge!=Ie;)m(P[O+0],q[z+0],Y[K+0],ee,ge),m(P[O+1],q[z+0],Y[K+0],ee,ge+y),O+=2,++z,++K,ge+=2*y;1&_e&&m(P[O+0],q[z+0],Y[K+0],ee,ge)}}function Bc(d,m,y){return y==0?d==0?m==0?6:5:m==0?4:0:y}function Cl(d,m,y,P,O){switch(d>>>30){case 3:cn(m,y,P,O,0);break;case 2:Gs(m,y,P,O);break;case 1:Rr(m,y,P,O)}}function Al(d,m){var y,P,O=m.M,q=m.Nb,z=d.oc,Y=d.pc+40,K=d.oc,ee=d.pc+584,ge=d.oc,_e=d.pc+600;for(y=0;16>y;++y)z[Y+32*y-1]=129;for(y=0;8>y;++y)K[ee+32*y-1]=129,ge[_e+32*y-1]=129;for(0<O?z[Y-1-32]=K[ee-1-32]=ge[_e-1-32]=129:(n(z,Y-32-1,127,21),n(K,ee-32-1,127,9),n(ge,_e-32-1,127,9)),P=0;P<d.za;++P){var Ie=m.ya[m.aa+P];if(0<P){for(y=-1;16>y;++y)a(z,Y+32*y-4,z,Y+32*y+12,4);for(y=-1;8>y;++y)a(K,ee+32*y-4,K,ee+32*y+4,4),a(ge,_e+32*y-4,ge,_e+32*y+4,4)}var we=d.Gd,ze=d.Hd+P,Me=Ie.ad,xe=Ie.Hc;if(0<O&&(a(z,Y-32,we[ze].y,0,16),a(K,ee-32,we[ze].f,0,8),a(ge,_e-32,we[ze].ea,0,8)),Ie.Za){var ye=z,Ue=Y-32+16;for(0<O&&(P>=d.za-1?n(ye,Ue,we[ze].y[15],4):a(ye,Ue,we[ze+1].y,0,4)),y=0;4>y;y++)ye[Ue+128+y]=ye[Ue+256+y]=ye[Ue+384+y]=ye[Ue+0+y];for(y=0;16>y;++y,xe<<=2)ye=z,Ue=Y+xf[y],_a[Ie.Ob[y]](ye,Ue),Cl(xe,Me,16*+y,ye,Ue)}else if(ye=Bc(P,O,Ie.Ob[0]),Dn[ye](z,Y),xe!=0)for(y=0;16>y;++y,xe<<=2)Cl(xe,Me,16*+y,z,Y+xf[y]);for(y=Ie.Gc,ye=Bc(P,O,Ie.Dd),un[ye](K,ee),un[ye](ge,_e),xe=Me,ye=K,Ue=ee,255&(Ie=y>>0)&&(170&Ie?Tl(xe,256,ye,Ue):ma(xe,256,ye,Ue)),Ie=ge,xe=_e,255&(y>>=8)&&(170&y?Tl(Me,320,Ie,xe):ma(Me,320,Ie,xe)),O<d.Ub-1&&(a(we[ze].y,0,z,Y+480,16),a(we[ze].f,0,K,ee+224,8),a(we[ze].ea,0,ge,_e+224,8)),y=8*q*d.B,we=d.sa,ze=d.ta+16*P+16*q*d.R,Me=d.qa,Ie=d.ra+8*P+y,xe=d.Ha,ye=d.Ia+8*P+y,y=0;16>y;++y)a(we,ze+y*d.R,z,Y+32*y,16);for(y=0;8>y;++y)a(Me,Ie+y*d.B,K,ee+32*y,8),a(xe,ye+y*d.B,ge,_e+32*y,8)}}function uo(d,m,y,P,O,q,z,Y,K){var ee=[0],ge=[0],_e=0,Ie=K!=null?K.kd:0,we=K!=null?K:new jl;if(d==null||12>y)return 7;we.data=d,we.w=m,we.ha=y,m=[m],y=[y],we.gb=[we.gb];e:{var ze=m,Me=y,xe=we.gb;if(t(d!=null),t(Me!=null),t(xe!=null),xe[0]=0,12<=Me[0]&&!r(d,ze[0],"RIFF")){if(r(d,ze[0]+8,"WEBP")){xe=3;break e}var ye=Le(d,ze[0]+4);if(12>ye||4294967286<ye){xe=3;break e}if(Ie&&ye>Me[0]-8){xe=7;break e}xe[0]=ye,ze[0]+=12,Me[0]-=12}xe=0}if(xe!=0)return xe;for(ye=0<we.gb[0],y=y[0];;){e:{var Ue=d;Me=m,xe=y;var We=ee,qe=ge,ut=ze=[0];if((lt=_e=[_e])[0]=0,8>xe[0])xe=7;else{if(!r(Ue,Me[0],"VP8X")){if(Le(Ue,Me[0]+4)!=10){xe=3;break e}if(18>xe[0]){xe=7;break e}var st=Le(Ue,Me[0]+8),Nt=1+je(Ue,Me[0]+12);if(2147483648<=Nt*(Ue=1+je(Ue,Me[0]+15))){xe=3;break e}ut!=null&&(ut[0]=st),We!=null&&(We[0]=Nt),qe!=null&&(qe[0]=Ue),Me[0]+=18,xe[0]-=18,lt[0]=1}xe=0}}if(_e=_e[0],ze=ze[0],xe!=0)return xe;if(Me=!!(2&ze),!ye&&_e)return 3;if(q!=null&&(q[0]=!!(16&ze)),z!=null&&(z[0]=Me),Y!=null&&(Y[0]=0),z=ee[0],ze=ge[0],_e&&Me&&K==null){xe=0;break}if(4>y){xe=7;break}if(ye&&_e||!ye&&!_e&&!r(d,m[0],"ALPH")){y=[y],we.na=[we.na],we.P=[we.P],we.Sa=[we.Sa];e:{st=d,xe=m,ye=y;var lt=we.gb;We=we.na,qe=we.P,ut=we.Sa,Nt=22,t(st!=null),t(ye!=null),Ue=xe[0];var ls=ye[0];for(t(We!=null),t(ut!=null),We[0]=null,qe[0]=null,ut[0]=0;;){if(xe[0]=Ue,ye[0]=ls,8>ls){xe=7;break e}var hs=Le(st,Ue+4);if(4294967286<hs){xe=3;break e}var os=8+hs+1&-2;if(Nt+=os,0<lt&&Nt>lt){xe=3;break e}if(!r(st,Ue,"VP8 ")||!r(st,Ue,"VP8L")){xe=0;break e}if(ls[0]<os){xe=7;break e}r(st,Ue,"ALPH")||(We[0]=st,qe[0]=Ue+8,ut[0]=hs),Ue+=os,ls-=os}}if(y=y[0],we.na=we.na[0],we.P=we.P[0],we.Sa=we.Sa[0],xe!=0)break}y=[y],we.Ja=[we.Ja],we.xa=[we.xa];e:if(lt=d,xe=m,ye=y,We=we.gb[0],qe=we.Ja,ut=we.xa,st=xe[0],Ue=!r(lt,st,"VP8 "),Nt=!r(lt,st,"VP8L"),t(lt!=null),t(ye!=null),t(qe!=null),t(ut!=null),8>ye[0])xe=7;else{if(Ue||Nt){if(lt=Le(lt,st+4),12<=We&&lt>We-12){xe=3;break e}if(Ie&&lt>ye[0]-8){xe=7;break e}qe[0]=lt,xe[0]+=8,ye[0]-=8,ut[0]=Nt}else ut[0]=5<=ye[0]&&lt[st+0]==47&&!(lt[st+4]>>5),qe[0]=ye[0];xe=0}if(y=y[0],we.Ja=we.Ja[0],we.xa=we.xa[0],m=m[0],xe!=0)break;if(4294967286<we.Ja)return 3;if(Y==null||Me||(Y[0]=we.xa?2:1),z=[z],ze=[ze],we.xa){if(5>y){xe=7;break}Y=z,Ie=ze,Me=q,d==null||5>y?d=0:5<=y&&d[m+0]==47&&!(d[m+4]>>5)?(ye=[0],lt=[0],We=[0],le(qe=new M,d,m,y),gt(qe,ye,lt,We)?(Y!=null&&(Y[0]=ye[0]),Ie!=null&&(Ie[0]=lt[0]),Me!=null&&(Me[0]=We[0]),d=1):d=0):d=0}else{if(10>y){xe=7;break}Y=ze,d==null||10>y||!Nc(d,m+3,y-3)?d=0:(Ie=d[m+0]|d[m+1]<<8|d[m+2]<<16,Me=16383&(d[m+7]<<8|d[m+6]),d=16383&(d[m+9]<<8|d[m+8]),1&Ie||3<(Ie>>1&7)||!(Ie>>4&1)||Ie>>5>=we.Ja||!Me||!d?d=0:(z&&(z[0]=Me),Y&&(Y[0]=d),d=1))}if(!d||(z=z[0],ze=ze[0],_e&&(ee[0]!=z||ge[0]!=ze)))return 3;K!=null&&(K[0]=we,K.offset=m-K.w,t(4294967286>m-K.w),t(K.offset==K.ha-y));break}return xe==0||xe==7&&_e&&K==null?(q!=null&&(q[0]|=we.na!=null&&0<we.na.length),P!=null&&(P[0]=z),O!=null&&(O[0]=ze),0):xe}function Pl(d,m,y){var P=m.width,O=m.height,q=0,z=0,Y=P,K=O;if(m.Da=d!=null&&0<d.Da,m.Da&&(Y=d.cd,K=d.bd,q=d.v,z=d.j,11>y||(q&=-2,z&=-2),0>q||0>z||0>=Y||0>=K||q+Y>P||z+K>O))return 0;if(m.v=q,m.j=z,m.va=q+Y,m.o=z+K,m.U=Y,m.T=K,m.da=d!=null&&0<d.da,m.da){if(!ve(Y,K,y=[d.ib],q=[d.hb]))return 0;m.ib=y[0],m.hb=q[0]}return m.ob=d!=null&&d.ob,m.Kb=d==null||!d.Sd,m.da&&(m.ob=m.ib<3*P/4&&m.hb<3*O/4,m.Kb=0),1}function _l(d){if(d==null)return 2;if(11>d.S){var m=d.f.RGBA;m.fb+=(d.height-1)*m.A,m.A=-m.A}else m=d.f.kb,d=d.height,m.O+=(d-1)*m.fa,m.fa=-m.fa,m.N+=(d-1>>1)*m.Ab,m.Ab=-m.Ab,m.W+=(d-1>>1)*m.Db,m.Db=-m.Db,m.F!=null&&(m.J+=(d-1)*m.lb,m.lb=-m.lb);return 0}function ho(d,m,y,P){if(P==null||0>=d||0>=m)return 2;if(y!=null){if(y.Da){var O=y.cd,q=y.bd,z=-2&y.v,Y=-2&y.j;if(0>z||0>Y||0>=O||0>=q||z+O>d||Y+q>m)return 2;d=O,m=q}if(y.da){if(!ve(d,m,O=[y.ib],q=[y.hb]))return 2;d=O[0],m=q[0]}}P.width=d,P.height=m;e:{var K=P.width,ee=P.height;if(d=P.S,0>=K||0>=ee||!(d>=Vc&&13>d))d=2;else{if(0>=P.Rd&&P.sd==null){z=q=O=m=0;var ge=(Y=K*vf[d])*ee;if(11>d||(q=(ee+1)/2*(m=(K+1)/2),d==12&&(z=(O=K)*ee)),(ee=i(ge+2*q+z))==null){d=1;break e}P.sd=ee,11>d?((K=P.f.RGBA).eb=ee,K.fb=0,K.A=Y,K.size=ge):((K=P.f.kb).y=ee,K.O=0,K.fa=Y,K.Fd=ge,K.f=ee,K.N=0+ge,K.Ab=m,K.Cd=q,K.ea=ee,K.W=0+ge+q,K.Db=m,K.Ed=q,d==12&&(K.F=ee,K.J=0+ge+2*q),K.Tc=z,K.lb=O)}if(m=1,O=P.S,q=P.width,z=P.height,O>=Vc&&13>O)if(11>O)d=P.f.RGBA,m&=(Y=Math.abs(d.A))*(z-1)+q<=d.size,m&=Y>=q*vf[O],m&=d.eb!=null;else{d=P.f.kb,Y=(q+1)/2,ge=(z+1)/2,K=Math.abs(d.fa),ee=Math.abs(d.Ab);var _e=Math.abs(d.Db),Ie=Math.abs(d.lb),we=Ie*(z-1)+q;m&=K*(z-1)+q<=d.Fd,m&=ee*(ge-1)+Y<=d.Cd,m=(m&=_e*(ge-1)+Y<=d.Ed)&K>=q&ee>=Y&_e>=Y,m&=d.y!=null,m&=d.f!=null,m&=d.ea!=null,O==12&&(m&=Ie>=q,m&=we<=d.Tc,m&=d.F!=null)}else m=0;d=m?0:2}}return d!=0||y!=null&&y.fd&&(d=_l(P)),d}var xr=64,mo=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],fo=24,po=32,Il=8,Yr=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Be("Predictor0","PredictorAdd0"),S.Predictor0=function(){return 4278190080},S.Predictor1=function(d){return d},S.Predictor2=function(d,m,y){return m[y+0]},S.Predictor3=function(d,m,y){return m[y+1]},S.Predictor4=function(d,m,y){return m[y-1]},S.Predictor5=function(d,m,y){return $e($e(d,m[y+1]),m[y+0])},S.Predictor6=function(d,m,y){return $e(d,m[y-1])},S.Predictor7=function(d,m,y){return $e(d,m[y+0])},S.Predictor8=function(d,m,y){return $e(m[y-1],m[y+0])},S.Predictor9=function(d,m,y){return $e(m[y+0],m[y+1])},S.Predictor10=function(d,m,y){return $e($e(d,m[y-1]),$e(m[y+0],m[y+1]))},S.Predictor11=function(d,m,y){var P=m[y+0];return 0>=et(P>>24&255,d>>24&255,(m=m[y-1])>>24&255)+et(P>>16&255,d>>16&255,m>>16&255)+et(P>>8&255,d>>8&255,m>>8&255)+et(255&P,255&d,255&m)?P:d},S.Predictor12=function(d,m,y){var P=m[y+0];return(Ke((d>>24&255)+(P>>24&255)-((m=m[y-1])>>24&255))<<24|Ke((d>>16&255)+(P>>16&255)-(m>>16&255))<<16|Ke((d>>8&255)+(P>>8&255)-(m>>8&255))<<8|Ke((255&d)+(255&P)-(255&m)))>>>0},S.Predictor13=function(d,m,y){var P=m[y-1];return(Qe((d=$e(d,m[y+0]))>>24&255,P>>24&255)<<24|Qe(d>>16&255,P>>16&255)<<16|Qe(d>>8&255,P>>8&255)<<8|Qe(d>>0&255,P>>0&255))>>>0};var Ru=S.PredictorAdd0;S.PredictorAdd1=Je,Be("Predictor2","PredictorAdd2"),Be("Predictor3","PredictorAdd3"),Be("Predictor4","PredictorAdd4"),Be("Predictor5","PredictorAdd5"),Be("Predictor6","PredictorAdd6"),Be("Predictor7","PredictorAdd7"),Be("Predictor8","PredictorAdd8"),Be("Predictor9","PredictorAdd9"),Be("Predictor10","PredictorAdd10"),Be("Predictor11","PredictorAdd11"),Be("Predictor12","PredictorAdd12"),Be("Predictor13","PredictorAdd13");var Ll=S.PredictorAdd2;St("ColorIndexInverseTransform","MapARGB","32b",function(d){return d>>8&255},function(d){return d}),St("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(d){return d},function(d){return d>>8&255});var Uc,ha=S.ColorIndexInverseTransform,go=S.MapARGB,qc=S.VP8LColorIndexInverseTransformAlpha,zc=S.MapAlpha,_n=S.VP8LPredictorsAdd=[];_n.length=16,(S.VP8LPredictors=[]).length=16,(S.VP8LPredictorsAdd_C=[]).length=16,(S.VP8LPredictors_C=[]).length=16;var wi,Gr,Er,In,on,ln,xo,cn,Gs,Tl,Rr,ma,vo,$c,Dl,ji,Ni,Ln,Si,yo,ki,Tn,Ml,fa,pa,Ps,_s,Js,nr=i(511),dn=i(2041),El=i(225),bo=i(767),Wc=0,Ou=dn,Hc=El,ra=bo,ga=nr,Vc=0,Yc=1,of=2,Gc=3,Jc=4,Fu=5,lf=6,Bu=7,Uu=8,Kc=9,qu=10,X2=[2,3,7],Q2=[3,3,11],cf=[280,256,256,256,40],Z2=[0,1,1,1,0],ev=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],tv=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],sv=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],rv=8,zu=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],$u=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Rl=null,av=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],nv=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],df=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],iv=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],ov=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],lv=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],cv=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Dn=[],_a=[],un=[],dv=1,uf=2,Mn=[],xa=[];Oe("UpsampleRgbLinePair",as,3),Oe("UpsampleBgrLinePair",Fs,3),Oe("UpsampleRgbaLinePair",Pa,4),Oe("UpsampleBgraLinePair",ur,4),Oe("UpsampleArgbLinePair",Nr,4),Oe("UpsampleRgba4444LinePair",er,2),Oe("UpsampleRgb565LinePair",qs,2);var uv=S.UpsampleRgbLinePair,hv=S.UpsampleBgrLinePair,hf=S.UpsampleRgbaLinePair,mf=S.UpsampleBgraLinePair,ff=S.UpsampleArgbLinePair,pf=S.UpsampleRgba4444LinePair,mv=S.UpsampleRgb565LinePair,Xc=16,Qc=1<<Xc-1,Ol=-227,Wu=482,fv=6,gf=0,pv=i(256),gv=i(256),xv=i(256),vv=i(256),yv=i(Wu-Ol),bv=i(Wu-Ol);Ya("YuvToRgbRow",as,3),Ya("YuvToBgrRow",Fs,3),Ya("YuvToRgbaRow",Pa,4),Ya("YuvToBgraRow",ur,4),Ya("YuvToArgbRow",Nr,4),Ya("YuvToRgba4444Row",er,2),Ya("YuvToRgb565Row",qs,2);var xf=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Zc=[0,2,8],wv=[8,7,6,4,4,2,2,2,1,1,1,1],jv=1;this.WebPDecodeRGBA=function(d,m,y,P,O){var q=Yc,z=new lo,Y=new Hs;z.ba=Y,Y.S=q,Y.width=[Y.width],Y.height=[Y.height];var K=Y.width,ee=Y.height,ge=new cr;if(ge==null||d==null)var _e=2;else t(ge!=null),_e=uo(d,m,y,ge.width,ge.height,ge.Pd,ge.Qd,ge.format,null);if(_e!=0?K=0:(K!=null&&(K[0]=ge.width[0]),ee!=null&&(ee[0]=ge.height[0]),K=1),K){Y.width=Y.width[0],Y.height=Y.height[0],P!=null&&(P[0]=Y.width),O!=null&&(O[0]=Y.height);e:{if(P=new to,(O=new jl).data=d,O.w=m,O.ha=y,O.kd=1,m=[0],t(O!=null),((d=uo(O.data,O.w,O.ha,null,null,null,m,null,O))==0||d==7)&&m[0]&&(d=4),(m=d)==0){if(t(z!=null),P.data=O.data,P.w=O.w+O.offset,P.ha=O.ha-O.offset,P.put=As,P.ac=Mt,P.bc=xs,P.ma=z,O.xa){if((d=Hr())==null){z=1;break e}if(function(Ie,we){var ze=[0],Me=[0],xe=[0];t:for(;;){if(Ie==null)return 0;if(we==null)return Ie.a=2,0;if(Ie.l=we,Ie.a=0,le(Ie.m,we.data,we.w,we.ha),!gt(Ie.m,ze,Me,xe)){Ie.a=3;break t}if(Ie.xb=uf,we.width=ze[0],we.height=Me[0],!Ne(ze[0],Me[0],1,Ie,null))break t;return 1}return t(Ie.a!=0),0}(d,P)){if(P=(m=ho(P.width,P.height,z.Oa,z.ba))==0){t:{P=d;s:for(;;){if(P==null){P=0;break t}if(t(P.s.yc!=null),t(P.s.Ya!=null),t(0<P.s.Wb),t((y=P.l)!=null),t((O=y.ma)!=null),P.xb!=0){if(P.ca=O.ba,P.tb=O.tb,t(P.ca!=null),!Pl(O.Oa,y,Gc)){P.a=2;break s}if(!De(P,y.width)||y.da)break s;if((y.da||Yt(P.ca.S))&&ke(),11>P.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),P.ca.f.kb.F!=null&&ke()),P.Pb&&0<P.s.ua&&P.s.vb.X==null&&!X(P.s.vb,P.s.Wa.Xa)){P.a=1;break s}P.xb=0}if(!Wr(P,P.V,P.Ba,P.c,P.i,y.o,Mr))break s;O.Dc=P.Ma,P=1;break t}t(P.a!=0),P=0}P=!P}P&&(m=d.a)}else m=d.a}else{if((d=new xu)==null){z=1;break e}if(d.Fa=O.na,d.P=O.P,d.qc=O.Sa,Sc(d,P)){if((m=ho(P.width,P.height,z.Oa,z.ba))==0){if(d.Aa=0,y=z.Oa,t((O=d)!=null),y!=null){if(0<(K=0>(K=y.Md)?0:100<K?255:255*K/100)){for(ee=ge=0;4>ee;++ee)12>(_e=O.pb[ee]).lc&&(_e.ia=K*wv[0>_e.lc?0:_e.lc]>>3),ge|=_e.ia;ge&&(alert("todo:VP8InitRandom"),O.ia=1)}O.Ga=y.Id,100<O.Ga?O.Ga=100:0>O.Ga&&(O.Ga=0)}vu(d,P)||(m=d.a)}}else m=d.a}m==0&&z.Oa!=null&&z.Oa.fd&&(m=_l(z.ba))}z=m}q=z!=0?null:11>q?Y.f.RGBA.eb:Y.f.kb.y}else q=null;return q};var vf=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function h(S,A){for(var L="",N=0;N<4;N++)L+=String.fromCharCode(S[A++]);return L}function f(S,A){return(S[A+0]<<0|S[A+1]<<8|S[A+2]<<16)>>>0}function p(S,A){return(S[A+0]<<0|S[A+1]<<8|S[A+2]<<16|S[A+3]<<24)>>>0}new c;var v=[0],u=[0],C=[],w=new c,x=s,j=function(S,A){var L={},N=0,k=!1,D=0,I=0;if(L.frames=[],!function(B,J,te,G){for(var ae=0;ae<G;ae++)if(B[J+ae]!=te.charCodeAt(ae))return!0;return!1}(S,A,"RIFF",4)){for(p(S,A+=4),A+=8;A<S.length;){var H=h(S,A),se=p(S,A+=4);A+=4;var ce=se+(1&se);switch(H){case"VP8 ":case"VP8L":L.frames[N]===void 0&&(L.frames[N]={}),(fe=L.frames[N]).src_off=k?I:A-8,fe.src_size=D+se+8,N++,k&&(k=!1,D=0,I=0);break;case"VP8X":(fe=L.header={}).feature_flags=S[A];var le=A+4;fe.canvas_width=1+f(S,le),le+=3,fe.canvas_height=1+f(S,le),le+=3;break;case"ALPH":k=!0,D=ce+8,I=A-8;break;case"ANIM":(fe=L.header).bgcolor=p(S,A),le=A+4,fe.loop_count=(Se=S)[(M=le)+0]<<0|Se[M+1]<<8,le+=2;break;case"ANMF":var ne,fe;(fe=L.frames[N]={}).offset_x=2*f(S,A),A+=3,fe.offset_y=2*f(S,A),A+=3,fe.width=1+f(S,A),A+=3,fe.height=1+f(S,A),A+=3,fe.duration=f(S,A),A+=3,ne=S[A++],fe.dispose=1&ne,fe.blend=ne>>1&1}H!="ANMF"&&(A+=ce)}var Se,M;return L}}(x,0);j.response=x,j.rgbaoutput=!0,j.dataurl=!1;var _=j.header?j.header:null,T=j.frames?j.frames:null;if(_){_.loop_counter=_.loop_count,v=[_.canvas_height],u=[_.canvas_width];for(var U=0;U<T.length&&T[U].blend!=0;U++);}var R=T[0],V=w.WebPDecodeRGBA(x,R.src_off,R.src_size,u,v);R.rgba=V,R.imgwidth=u[0],R.imgheight=v[0];for(var $=0;$<u[0]*v[0]*4;$++)C[$]=V[$];return this.width=u,this.height=v,this.data=C,this}(function(s){var t=function(){return typeof hm=="function"},r=function(v,u,C,w){var x=4,j=o;switch(w){case s.image_compression.FAST:x=1,j=i;break;case s.image_compression.MEDIUM:x=6,j=l;break;case s.image_compression.SLOW:x=9,j=c}v=a(v,u,C,j);var _=hm(v,{level:x});return s.__addimage__.arrayBufferToBinaryString(_)},a=function(v,u,C,w){for(var x,j,_,T=v.length/u,U=new Uint8Array(v.length+T),R=f(),V=0;V<T;V+=1){if(_=V*u,x=v.subarray(_,_+u),w)U.set(w(x,C,j),_+V);else{for(var $,S=R.length,A=[];$<S;$+=1)A[$]=R[$](x,C,j);var L=p(A.concat());U.set(A[L],_+V)}j=x}return U},n=function(v){var u=Array.apply([],v);return u.unshift(0),u},i=function(v,u){var C,w=[],x=v.length;w[0]=1;for(var j=0;j<x;j+=1)C=v[j-u]||0,w[j+1]=v[j]-C+256&255;return w},o=function(v,u,C){var w,x=[],j=v.length;x[0]=2;for(var _=0;_<j;_+=1)w=C&&C[_]||0,x[_+1]=v[_]-w+256&255;return x},l=function(v,u,C){var w,x,j=[],_=v.length;j[0]=3;for(var T=0;T<_;T+=1)w=v[T-u]||0,x=C&&C[T]||0,j[T+1]=v[T]+256-(w+x>>>1)&255;return j},c=function(v,u,C){var w,x,j,_,T=[],U=v.length;T[0]=4;for(var R=0;R<U;R+=1)w=v[R-u]||0,x=C&&C[R]||0,j=C&&C[R-u]||0,_=h(w,x,j),T[R+1]=v[R]-_+256&255;return T},h=function(v,u,C){if(v===u&&u===C)return v;var w=Math.abs(u-C),x=Math.abs(v-C),j=Math.abs(v+u-C-C);return w<=x&&w<=j?v:x<=j?u:C},f=function(){return[n,i,o,l,c]},p=function(v){var u=v.map(function(C){return C.reduce(function(w,x){return w+Math.abs(x)},0)});return u.indexOf(Math.min.apply(null,u))};s.processPNG=function(v,u,C,w){var x,j,_,T,U,R,V,$,S,A,L,N,k,D,I,H=this.decode.FLATE_DECODE,se="";if(this.__addimage__.isArrayBuffer(v)&&(v=new Uint8Array(v)),this.__addimage__.isArrayBufferView(v)){if(v=(_=new Z3(v)).imgData,j=_.bits,x=_.colorSpace,U=_.colors,[4,6].indexOf(_.colorType)!==-1){if(_.bits===8){S=($=_.pixelBitlength==32?new Uint32Array(_.decodePixels().buffer):_.pixelBitlength==16?new Uint16Array(_.decodePixels().buffer):new Uint8Array(_.decodePixels().buffer)).length,L=new Uint8Array(S*_.colors),A=new Uint8Array(S);var ce,le=_.pixelBitlength-_.bits;for(D=0,I=0;D<S;D++){for(k=$[D],ce=0;ce<le;)L[I++]=k>>>ce&255,ce+=_.bits;A[D]=k>>>ce&255}}if(_.bits===16){S=($=new Uint32Array(_.decodePixels().buffer)).length,L=new Uint8Array(S*(32/_.pixelBitlength)*_.colors),A=new Uint8Array(S*(32/_.pixelBitlength)),N=_.colors>1,D=0,I=0;for(var ne=0;D<S;)k=$[D++],L[I++]=k>>>0&255,N&&(L[I++]=k>>>16&255,k=$[D++],L[I++]=k>>>0&255),A[ne++]=k>>>16&255;j=8}w!==s.image_compression.NONE&&t()?(v=r(L,_.width*_.colors,_.colors,w),V=r(A,_.width,1,w)):(v=L,V=A,H=void 0)}if(_.colorType===3&&(x=this.color_spaces.INDEXED,R=_.palette,_.transparency.indexed)){var fe=_.transparency.indexed,Se=0;for(D=0,S=fe.length;D<S;++D)Se+=fe[D];if((Se/=255)===S-1&&fe.indexOf(0)!==-1)T=[fe.indexOf(0)];else if(Se!==S){for($=_.decodePixels(),A=new Uint8Array($.length),D=0,S=$.length;D<S;D++)A[D]=fe[$[D]];V=r(A,_.width,1)}}var M=function(B){var J;switch(B){case s.image_compression.FAST:J=11;break;case s.image_compression.MEDIUM:J=13;break;case s.image_compression.SLOW:J=14;break;default:J=12}return J}(w);return H===this.decode.FLATE_DECODE&&(se="/Predictor "+M+" "),se+="/Colors "+U+" /BitsPerComponent "+j+" /Columns "+_.width,(this.__addimage__.isArrayBuffer(v)||this.__addimage__.isArrayBufferView(v))&&(v=this.__addimage__.arrayBufferToBinaryString(v)),(V&&this.__addimage__.isArrayBuffer(V)||this.__addimage__.isArrayBufferView(V))&&(V=this.__addimage__.arrayBufferToBinaryString(V)),{alias:C,data:v,index:u,filter:H,decodeParameters:se,transparency:T,palette:R,sMask:V,predictor:M,width:_.width,height:_.height,bitsPerComponent:j,colorSpace:x}}}})(At.API),function(s){s.processGIF89A=function(t,r,a,n){var i=new eS(t),o=i.width,l=i.height,c=[];i.decodeAndBlitFrameRGBA(0,c);var h={data:c,width:o,height:l},f=new bh(100).encode(h,100);return s.processJPEG.call(this,f,r,a,n)},s.processGIF87A=s.processGIF89A}(At.API),Ma.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var s=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(s);for(var t=0;t<s;t++){var r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:n,green:a,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Ma.prototype.parseBGR=function(){this.pos=this.offset;try{var s="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[s]()}catch(r){Ns.log("bit decode error:"+r)}},Ma.prototype.bit1=function(){var s,t=Math.ceil(this.width/8),r=t%4;for(s=this.height-1;s>=0;s--){for(var a=this.bottom_up?s:this.height-1-s,n=0;n<t;n++)for(var i=this.datav.getUint8(this.pos++,!0),o=a*this.width*4+8*n*4,l=0;l<8&&8*n+l<this.width;l++){var c=this.palette[i>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}r!==0&&(this.pos+=4-r)}},Ma.prototype.bit4=function(){for(var s=Math.ceil(this.width/2),t=s%4,r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,n=0;n<s;n++){var i=this.datav.getUint8(this.pos++,!0),o=a*this.width*4+2*n*4,l=i>>4,c=15&i,h=this.palette[l];if(this.data[o]=h.blue,this.data[o+1]=h.green,this.data[o+2]=h.red,this.data[o+3]=255,2*n+1>=this.width)break;h=this.palette[c],this.data[o+4]=h.blue,this.data[o+4+1]=h.green,this.data[o+4+2]=h.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},Ma.prototype.bit8=function(){for(var s=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var n=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*a;if(n<this.palette.length){var o=this.palette[n];this.data[i]=o.red,this.data[i+1]=o.green,this.data[i+2]=o.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}s!==0&&(this.pos+=4-s)}},Ma.prototype.bit15=function(){for(var s=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,n=0;n<this.width;n++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,l=(i>>5&t)/t*255|0,c=(i>>10&t)/t*255|0,h=i>>15?255:0,f=a*this.width*4+4*n;this.data[f]=c,this.data[f+1]=l,this.data[f+2]=o,this.data[f+3]=h}this.pos+=s}},Ma.prototype.bit16=function(){for(var s=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),a=this.height-1;a>=0;a--){for(var n=this.bottom_up?a:this.height-1-a,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&t)/t*255|0,c=(o>>5&r)/r*255|0,h=(o>>11)/t*255|0,f=n*this.width*4+4*i;this.data[f]=h,this.data[f+1]=c,this.data[f+2]=l,this.data[f+3]=255}this.pos+=s}},Ma.prototype.bit24=function(){for(var s=this.height-1;s>=0;s--){for(var t=this.bottom_up?s:this.height-1-s,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=i,this.data[o+1]=n,this.data[o+2]=a,this.data[o+3]=255}this.pos+=this.width%4}},Ma.prototype.bit32=function(){for(var s=this.height-1;s>=0;s--)for(var t=this.bottom_up?s:this.height-1-s,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*r;this.data[l]=i,this.data[l+1]=n,this.data[l+2]=a,this.data[l+3]=o}},Ma.prototype.getData=function(){return this.data},function(s){s.processBMP=function(t,r,a,n){var i=new Ma(t,!1),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},h=new bh(100).encode(c,100);return s.processJPEG.call(this,h,r,a,n)}}(At.API),Wp.prototype.getData=function(){return this.data},function(s){s.processWEBP=function(t,r,a,n){var i=new Wp(t),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},h=new bh(100).encode(c,100);return s.processJPEG.call(this,h,r,a,n)}}(At.API),At.API.processRGBA=function(s,t,r){for(var a=s.data,n=a.length,i=new Uint8Array(n/4*3),o=new Uint8Array(n/4),l=0,c=0,h=0;h<n;h+=4){var f=a[h],p=a[h+1],v=a[h+2],u=a[h+3];i[l++]=f,i[l++]=p,i[l++]=v,o[c++]=u}var C=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:C,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:s.width,height:s.height}},At.API.setLanguage=function(s){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[s]!==void 0&&(this.internal.languageSettings.languageCode=s,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Ao=At.API,wd=Ao.getCharWidthsArray=function(s,t){var r,a,n=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:n.metadata.Unicode.widths,c=l.fof?l.fof:1,h=t.kerning?t.kerning:n.metadata.Unicode.kerning,f=h.fof?h.fof:1,p=t.doKerning!==!1,v=0,u=s.length,C=0,w=l[0]||c,x=[];for(r=0;r<u;r++)a=s.charCodeAt(r),typeof n.metadata.widthOfString=="function"?x.push((n.metadata.widthOfGlyph(n.metadata.characterToGlyph(a))+o*(1e3/i)||0)/1e3):(v=p&&gs(h[a])==="object"&&!isNaN(parseInt(h[a][C],10))?h[a][C]/f:0,x.push((l[a]||w)/c+v)),C=a;return x},Up=Ao.getStringUnitWidth=function(s,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),a=t.font||this.internal.getFont(),n=t.charSpace||this.internal.getCharSpace();return Ao.processArabic&&(s=Ao.processArabic(s)),typeof a.metadata.widthOfString=="function"?a.metadata.widthOfString(s,r,n)/r:wd.apply(this,arguments).reduce(function(i,o){return i+o},0)},qp=function(s,t,r,a){for(var n=[],i=0,o=s.length,l=0;i!==o&&l+t[i]<r;)l+=t[i],i++;n.push(s.slice(0,i));var c=i;for(l=0;i!==o;)l+t[i]>a&&(n.push(s.slice(c,i)),l=0,c=i),l+=t[i],i++;return c!==i&&n.push(s.slice(c,i)),n},zp=function(s,t,r){r||(r={});var a,n,i,o,l,c,h,f=[],p=[f],v=r.textIndent||0,u=0,C=0,w=s.split(" "),x=wd.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?w[0].length+2:r.lineIndent||0){var j=Array(c).join(" "),_=[];w.map(function(U){(U=U.split(/\s*\n/)).length>1?_=_.concat(U.map(function(R,V){return(V&&R.length?`
`:"")+R})):_.push(U[0])}),w=_,c=Up.apply(this,[j,r])}for(i=0,o=w.length;i<o;i++){var T=0;if(a=w[i],c&&a[0]==`
`&&(a=a.substr(1),T=1),v+u+(C=(n=wd.apply(this,[a,r])).reduce(function(U,R){return U+R},0))>t||T){if(C>t){for(l=qp.apply(this,[a,n,t-(v+u),t]),f.push(l.shift()),f=[l.pop()];l.length;)p.push([l.shift()]);C=n.slice(a.length-(f[0]?f[0].length:0)).reduce(function(U,R){return U+R},0)}else f=[a];p.push(f),v=C+c,u=x}else f.push(a),v+=u+C,u=x}return h=c?function(U,R){return(R?j:"")+U.join(" ")}:function(U){return U.join(" ")},p.map(h)},Ao.splitTextToSize=function(s,t,r){var a,n=(r=r||{}).fontSize||this.internal.getFontSize(),i=function(f){if(f.widths&&f.kerning)return{widths:f.widths,kerning:f.kerning};var p=this.internal.getFont(f.fontName,f.fontStyle);return p.metadata.Unicode?{widths:p.metadata.Unicode.widths||{0:1},kerning:p.metadata.Unicode.kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,r);a=Array.isArray(s)?s:String(s).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/n;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/n:0,i.lineIndent=r.lineIndent;var l,c,h=[];for(l=0,c=a.length;l<c;l++)h=h.concat(zp.apply(this,[a[l],o,i]));return h},function(s){s.__fontmetrics__=s.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},a={},n=0;n<t.length;n++)r[t[n]]="0123456789abcdef"[n],a["0123456789abcdef"[n]]=t[n];var i=function(p){return"0x"+parseInt(p,10).toString(16)},o=s.__fontmetrics__.compress=function(p){var v,u,C,w,x=["{"];for(var j in p){if(v=p[j],isNaN(parseInt(j,10))?u="'"+j+"'":(j=parseInt(j,10),u=(u=i(j).slice(2)).slice(0,-1)+a[u.slice(-1)]),typeof v=="number")v<0?(C=i(v).slice(3),w="-"):(C=i(v).slice(2),w=""),C=w+C.slice(0,-1)+a[C.slice(-1)];else{if(gs(v)!=="object")throw new Error("Don't know what to do with value type "+gs(v)+".");C=o(v)}x.push(u+C)}return x.push("}"),x.join("")},l=s.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var v,u,C,w,x={},j=1,_=x,T=[],U="",R="",V=p.length-1,$=1;$<V;$+=1)(w=p[$])=="'"?v?(C=v.join(""),v=void 0):v=[]:v?v.push(w):w=="{"?(T.push([_,C]),_={},C=void 0):w=="}"?((u=T.pop())[0][u[1]]=_,C=void 0,_=u[0]):w=="-"?j=-1:C===void 0?r.hasOwnProperty(w)?(U+=r[w],C=parseInt(U,16)*j,j=1,U=""):U+=w:r.hasOwnProperty(w)?(R+=r[w],_[C]=parseInt(R,16)*j,j=1,C=void 0,R=""):R+=w;return x},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},h={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},f={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};s.events.push(["addFont",function(p){var v=p.font,u=f.Unicode[v.postScriptName];u&&(v.metadata.Unicode={},v.metadata.Unicode.widths=u.widths,v.metadata.Unicode.kerning=u.kerning);var C=h.Unicode[v.postScriptName];C&&(v.metadata.Unicode.encoding=C,v.encoding=C.codePages[0])}])}(At.API),function(s){var t=function(r){for(var a=r.length,n=new Uint8Array(a),i=0;i<a;i++)n[i]=r.charCodeAt(i);return n};s.API.events.push(["addFont",function(r){var a=void 0,n=r.font,i=r.instance;if(!n.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+n.postScriptName+"').");if(typeof(a=i.existsFileInVFS(n.postScriptName)===!1?i.loadFile(n.postScriptName):i.getFileFromVFS(n.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+n.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(rc(l)),o.metadata=s.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(n,a)}}])}(At),function(s){function t(){return(Pt.canvg?Promise.resolve(Pt.canvg):om(()=>import("./index.es-wWVISv58.js"),__vite__mapDeps([0,1,2]))).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}At.API.addSvgAsImage=function(r,a,n,i,o,l,c,h){if(isNaN(a)||isNaN(n))throw Ns.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(o))throw Ns.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var f=document.createElement("canvas");f.width=i,f.height=o;var p=f.getContext("2d");p.fillStyle="#fff",p.fillRect(0,0,f.width,f.height);var v={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},u=this;return t().then(function(C){return C.fromString(p,r,v)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(C){return C.render(v)}).then(function(){u.addImage(f.toDataURL("image/jpeg",1),a,n,i,o,c,h)})}}(),At.API.putTotalPages=function(s){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(s,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(s,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var a=1;a<=this.internal.getNumberOfPages();a++)for(var n=0;n<this.internal.pages[a].length;n++)this.internal.pages[a][n]=this.internal.pages[a][n].replace(t,r);return this},At.API.viewerPreferences=function(s,t){var r;s=s||{},t=t||!1;var a,n,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],h=0,f=0,p=0;function v(C,w){var x,j=!1;for(x=0;x<C.length;x+=1)C[x]===w&&(j=!0);return j}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,s==="reset"||t===!0){var u=l.length;for(p=0;p<u;p+=1)r[l[p]].value=r[l[p]].defaultValue,r[l[p]].explicitSet=!1}if(gs(s)==="object"){for(n in s)if(i=s[n],v(l,n)&&i!==void 0){if(r[n].type==="boolean"&&typeof i=="boolean")r[n].value=i;else if(r[n].type==="name"&&v(r[n].valueSet,i))r[n].value=i;else if(r[n].type==="integer"&&Number.isInteger(i))r[n].value=i;else if(r[n].type==="array"){for(h=0;h<i.length;h+=1)if(a=!0,i[h].length===1&&typeof i[h][0]=="number")c.push(String(i[h]-1));else if(i[h].length>1){for(f=0;f<i[h].length;f+=1)typeof i[h][f]!="number"&&(a=!1);a===!0&&c.push([i[h][0]-1,i[h][1]-1].join(" "))}r[n].value="["+c.join(" ")+"]"}else r[n].value=r[n].defaultValue;r[n].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var C,w=[];for(C in r)r[C].explicitSet===!0&&(r[C].type==="name"?w.push("/"+C+" /"+r[C].value):w.push("/"+C+" "+r[C].value));w.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+w.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(s){var t=function(){var a='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',n=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(a)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),h=i.length+o.length+l.length+n.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+h+" >>"),this.internal.write("stream"),this.internal.write(n+i+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};s.addMetadata=function(a,n){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:a,namespaceuri:n||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(At.API),function(s){var t=s.API,r=t.pdfEscape16=function(i,o){for(var l,c=o.metadata.Unicode.widths,h=["","0","00","000","0000"],f=[""],p=0,v=i.length;p<v;++p){if(l=o.metadata.characterToGlyph(i.charCodeAt(p)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=i.charCodeAt(p),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return f.join("");l=l.toString(16),f.push(h[4-l.length],l)}return f.join("")},a=function(i){var o,l,c,h,f,p,v;for(f=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],p=0,v=(l=Object.keys(i).sort(function(u,C){return u-C})).length;p<v;p++)o=l[p],c.length>=100&&(f+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),i[o]!==void 0&&i[o]!==null&&typeof i[o].toString=="function"&&(h=("0000"+i[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+h+">"));return c.length&&(f+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),f+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,h=o.newObject,f=o.putStream;if(l.metadata instanceof s.API.TTFFont&&l.encoding==="Identity-H"){for(var p=l.metadata.Unicode.widths,v=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),u="",C=0;C<v.length;C++)u+=String.fromCharCode(v[C]);var w=h();f({data:u,addLength1:!0,objectId:w}),c("endobj");var x=h();f({data:a(l.metadata.toUnicode),addLength1:!0,objectId:x}),c("endobj");var j=h();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+_o(l.fontName)),c("/FontFile2 "+w+" 0 R"),c("/FontBBox "+s.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var _=h();c("<<"),c("/Type /Font"),c("/BaseFont /"+_o(l.fontName)),c("/FontDescriptor "+j+" 0 R"),c("/W "+s.API.PDFObject.convert(p)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=h(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+x+" 0 R"),c("/BaseFont /"+_o(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+_+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,h=o.newObject,f=o.putStream;if(l.metadata instanceof s.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var p=l.metadata.rawData,v="",u=0;u<p.length;u++)v+=String.fromCharCode(p[u]);var C=h();f({data:v,addLength1:!0,objectId:C}),c("endobj");var w=h();f({data:a(l.metadata.toUnicode),addLength1:!0,objectId:w}),c("endobj");var x=h();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+C+" 0 R"),c("/Flags 96"),c("/FontBBox "+s.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+_o(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=h();for(var j=0;j<l.metadata.hmtx.widths.length;j++)l.metadata.hmtx.widths[j]=parseInt(l.metadata.hmtx.widths[j]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+w+" 0 R/BaseFont/"+_o(l.fontName)+"/FontDescriptor "+x+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+s.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]);var n=function(i){var o,l=i.text||"",c=i.x,h=i.y,f=i.options||{},p=i.mutex||{},v=p.pdfEscape,u=p.activeFontKey,C=p.fonts,w=u,x="",j=0,_="",T=C[w].encoding;if(C[w].encoding!=="Identity-H")return{text:l,x:c,y:h,options:f,mutex:p};for(_=l,w=u,Array.isArray(l)&&(_=l[0]),j=0;j<_.length;j+=1)C[w].metadata.hasOwnProperty("cmap")&&(o=C[w].metadata.cmap.unicode.codeMap[_[j].charCodeAt(0)]),o||_[j].charCodeAt(0)<256&&C[w].metadata.hasOwnProperty("Unicode")?x+=_[j]:x+="";var U="";return parseInt(w.slice(1))<14||T==="WinAnsiEncoding"?U=v(x,w).split("").map(function(R){return R.charCodeAt(0).toString(16)}).join(""):T==="Identity-H"&&(U=r(x,C[w])),p.isHex=!0,{text:U,x:c,y:h,options:f,mutex:p}};t.events.push(["postProcessText",function(i){var o=i.text||"",l=[],c={text:o,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(o)){var h=0;for(h=0;h<o.length;h+=1)Array.isArray(o[h])&&o[h].length===3?l.push([n(Object.assign({},c,{text:o[h][0]})).text,o[h][1],o[h][2]]):l.push(n(Object.assign({},c,{text:o[h]})).text);i.text=l}else i.text=n(Object.assign({},c,{text:o})).text}])}(At),function(s){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};s.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},s.addFileToVFS=function(r,a){return t.call(this),this.internal.vFS[r]=a,this},s.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(At.API),function(s){s.__bidiEngine__=s.prototype.__bidiEngine__=function(a){var n,i,o,l,c,h,f,p=t,v=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],u=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],C={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},w={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},x=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],j=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),_=!1,T=0;this.__bidiEngine__={};var U=function(N){var k=N.charCodeAt(),D=k>>8,I=w[D];return I!==void 0?p[256*I+(255&k)]:D===252||D===253?"AL":j.test(D)?"L":D===8?"R":"N"},R=function(N){for(var k,D=0;D<N.length;D++){if((k=U(N.charAt(D)))==="L")return!1;if(k==="R")return!0}return!1},V=function(N,k,D,I){var H,se,ce,le,ne=k[I];switch(ne){case"L":case"R":_=!1;break;case"N":case"AN":break;case"EN":_&&(ne="AN");break;case"AL":_=!0,ne="R";break;case"WS":ne="N";break;case"CS":I<1||I+1>=k.length||(H=D[I-1])!=="EN"&&H!=="AN"||(se=k[I+1])!=="EN"&&se!=="AN"?ne="N":_&&(se="AN"),ne=se===H?se:"N";break;case"ES":ne=(H=I>0?D[I-1]:"B")==="EN"&&I+1<k.length&&k[I+1]==="EN"?"EN":"N";break;case"ET":if(I>0&&D[I-1]==="EN"){ne="EN";break}if(_){ne="N";break}for(ce=I+1,le=k.length;ce<le&&k[ce]==="ET";)ce++;ne=ce<le&&k[ce]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(le=k.length,ce=I+1;ce<le&&k[ce]==="NSM";)ce++;if(ce<le){var fe=N[I],Se=fe>=1425&&fe<=2303||fe===64286;if(H=k[ce],Se&&(H==="R"||H==="AL")){ne="R";break}}}ne=I<1||(H=k[I-1])==="B"?"N":D[I-1];break;case"B":_=!1,n=!0,ne=T;break;case"S":i=!0,ne="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":_=!1;break;case"BN":ne="N"}return ne},$=function(N,k,D){var I=N.split("");return D&&S(I,D,{hiLevel:T}),I.reverse(),k&&k.reverse(),I.join("")},S=function(N,k,D){var I,H,se,ce,le,ne=-1,fe=N.length,Se=0,M=[],B=T?u:v,J=[];for(_=!1,n=!1,i=!1,H=0;H<fe;H++)J[H]=U(N[H]);for(se=0;se<fe;se++){if(le=Se,M[se]=V(N,J,M,se),I=240&(Se=B[le][C[M[se]]]),Se&=15,k[se]=ce=B[Se][5],I>0)if(I===16){for(H=ne;H<se;H++)k[H]=1;ne=-1}else ne=-1;if(B[Se][6])ne===-1&&(ne=se);else if(ne>-1){for(H=ne;H<se;H++)k[H]=ce;ne=-1}J[se]==="B"&&(k[se]=0),D.hiLevel|=ce}i&&function(te,G,ae){for(var ie=0;ie<ae;ie++)if(te[ie]==="S"){G[ie]=T;for(var ue=ie-1;ue>=0&&te[ue]==="WS";ue--)G[ue]=T}}(J,k,fe)},A=function(N,k,D,I,H){if(!(H.hiLevel<N)){if(N===1&&T===1&&!n)return k.reverse(),void(D&&D.reverse());for(var se,ce,le,ne,fe=k.length,Se=0;Se<fe;){if(I[Se]>=N){for(le=Se+1;le<fe&&I[le]>=N;)le++;for(ne=Se,ce=le-1;ne<ce;ne++,ce--)se=k[ne],k[ne]=k[ce],k[ce]=se,D&&(se=D[ne],D[ne]=D[ce],D[ce]=se);Se=le}Se++}}},L=function(N,k,D){var I=N.split(""),H={hiLevel:T};return D||(D=[]),S(I,D,H),function(se,ce,le){if(le.hiLevel!==0&&f)for(var ne,fe=0;fe<se.length;fe++)ce[fe]===1&&(ne=x.indexOf(se[fe]))>=0&&(se[fe]=x[ne+1])}(I,D,H),A(2,I,k,D,H),A(1,I,k,D,H),I.join("")};return this.__bidiEngine__.doBidiReorder=function(N,k,D){if(function(H,se){if(se)for(var ce=0;ce<H.length;ce++)se[ce]=ce;l===void 0&&(l=R(H)),h===void 0&&(h=R(H))}(N,k),o||!c||h)if(o&&c&&l^h)T=l?1:0,N=$(N,k,D);else if(!o&&c&&h)T=l?1:0,N=L(N,k,D),N=$(N,k);else if(!o||l||c||h){if(o&&!c&&l^h)N=$(N,k),l?(T=0,N=L(N,k,D)):(T=1,N=L(N,k,D),N=$(N,k));else if(o&&l&&!c&&h)T=1,N=L(N,k,D),N=$(N,k);else if(!o&&!c&&l^h){var I=f;l?(T=1,N=L(N,k,D),T=0,f=!1,N=L(N,k,D),f=I):(T=0,N=L(N,k,D),N=$(N,k),T=1,f=!1,N=L(N,k,D),f=I,N=$(N,k))}}else T=0,N=L(N,k,D);else T=l?1:0,N=L(N,k,D);return N},this.__bidiEngine__.setOptions=function(N){N&&(o=N.isInputVisual,c=N.isOutputVisual,l=N.isInputRtl,h=N.isOutputRtl,f=N.isSymmetricSwapping)},this.__bidiEngine__.setOptions(a),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new s.__bidiEngine__({isInputVisual:!0});s.API.events.push(["postProcessText",function(a){var n=a.text;a.x,a.y;var i=a.options||{};a.mutex,i.lang;var o=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(n)==="[object Array]"){var l=0;for(o=[],l=0;l<n.length;l+=1)Object.prototype.toString.call(n[l])==="[object Array]"?o.push([r.doBidiReorder(n[l][0]),n[l][1],n[l][2]]):o.push([r.doBidiReorder(n[l])]);a.text=o}else a.text=r.doBidiReorder(n);r.setOptions({isInputVisual:!0})}])}(At),At.API.TTFFont=function(){function s(t){var r;if(this.rawData=t,r=this.contents=new mi(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new pS(this),this.registerTTF()}return s.open=function(t){return new s(t)},s.prototype.parse=function(){return this.directory=new tS(this.contents),this.head=new rS(this),this.name=new lS(this),this.cmap=new i2(this),this.toUnicode={},this.hhea=new aS(this),this.maxp=new cS(this),this.hmtx=new dS(this),this.post=new iS(this),this.os2=new nS(this),this.loca=new fS(this),this.glyf=new uS(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},s.prototype.registerTTF=function(){var t,r,a,n,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var o,l,c,h;for(h=[],o=0,l=(c=this.bbox).length;o<l;o++)t=c[o],h.push(Math.round(t*this.scaleFactor));return h}.call(this),this.stemV=0,this.post.exists?(a=255&(n=this.post.italic_angle),32768&(r=n>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+a)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},s.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},s.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},s.prototype.widthOfString=function(t,r,a){var n,i,o,l;for(o=0,i=0,l=(t=""+t).length;0<=l?i<l:i>l;i=0<=l?++i:--i)n=t.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(n))+a*(1e3/r)||0;return o*(r/1e3)},s.prototype.lineHeight=function(t,r){var a;return r==null&&(r=!1),a=r?this.lineGap:0,(this.ascender+a-this.decender)/1e3*t},s}();var Wa,mi=function(){function s(t){this.data=t!=null?t:[],this.pos=0,this.length=this.data.length}return s.prototype.readByte=function(){return this.data[this.pos++]},s.prototype.writeByte=function(t){return this.data[this.pos++]=t},s.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},s.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},s.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},s.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},s.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},s.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},s.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},s.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},s.prototype.readString=function(t){var r,a;for(a=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)a[r]=String.fromCharCode(this.readByte());return a.join("")},s.prototype.writeString=function(t){var r,a,n;for(n=[],r=0,a=t.length;0<=a?r<a:r>a;r=0<=a?++r:--r)n.push(this.writeByte(t.charCodeAt(r)));return n},s.prototype.readShort=function(){return this.readInt16()},s.prototype.writeShort=function(t){return this.writeInt16(t)},s.prototype.readLongLong=function(){var t,r,a,n,i,o,l,c;return t=this.readByte(),r=this.readByte(),a=this.readByte(),n=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^a)+4294967296*(255^n)+16777216*(255^i)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*t+281474976710656*r+1099511627776*a+4294967296*n+16777216*i+65536*o+256*l+c},s.prototype.writeLongLong=function(t){var r,a;return r=Math.floor(t/4294967296),a=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(a>>24&255),this.writeByte(a>>16&255),this.writeByte(a>>8&255),this.writeByte(255&a)},s.prototype.readInt=function(){return this.readInt32()},s.prototype.writeInt=function(t){return this.writeInt32(t)},s.prototype.read=function(t){var r,a;for(r=[],a=0;0<=t?a<t:a>t;a=0<=t?++a:--a)r.push(this.readByte());return r},s.prototype.write=function(t){var r,a,n,i;for(i=[],a=0,n=t.length;a<n;a++)r=t[a],i.push(this.writeByte(r));return i},s}(),tS=function(){var s;function t(r){var a,n,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},n=0,i=this.tableCount;0<=i?n<i:n>i;n=0<=i?++n:--n)a={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[a.tag]=a}return t.prototype.encode=function(r){var a,n,i,o,l,c,h,f,p,v,u,C,w;for(w in u=Object.keys(r).length,c=Math.log(2),p=16*Math.floor(Math.log(u)/c),o=Math.floor(p/c),f=16*u-p,(n=new mi).writeInt(this.scalarType),n.writeShort(u),n.writeShort(p),n.writeShort(o),n.writeShort(f),i=16*u,h=n.pos+i,l=null,C=[],r)for(v=r[w],n.writeString(w),n.writeInt(s(v)),n.writeInt(h),n.writeInt(v.length),C=C.concat(v),w==="head"&&(l=h),h+=v.length;h%4;)C.push(0),h++;return n.write(C),a=2981146554-s(n.data),n.pos=l+8,n.writeUInt32(a),n.data},s=function(r){var a,n,i,o;for(r=o2.call(r);r.length%4;)r.push(0);for(i=new mi(r),n=0,a=0,o=r.length;a<o;a=a+=4)n+=i.readUInt32();return 4294967295&n},t}(),sS={}.hasOwnProperty,rn=function(s,t){for(var r in t)sS.call(t,r)&&(s[r]=t[r]);function a(){this.constructor=s}return a.prototype=t.prototype,s.prototype=new a,s.__super__=t.prototype,s};Wa=function(){function s(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return s.prototype.parse=function(){},s.prototype.encode=function(){},s.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},s}();var rS=function(s){function t(){return t.__super__.constructor.apply(this,arguments)}return rn(t,Wa),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var a;return(a=new mi).writeInt(this.version),a.writeInt(this.revision),a.writeInt(this.checkSumAdjustment),a.writeInt(this.magicNumber),a.writeShort(this.flags),a.writeShort(this.unitsPerEm),a.writeLongLong(this.created),a.writeLongLong(this.modified),a.writeShort(this.xMin),a.writeShort(this.yMin),a.writeShort(this.xMax),a.writeShort(this.yMax),a.writeShort(this.macStyle),a.writeShort(this.lowestRecPPEM),a.writeShort(this.fontDirectionHint),a.writeShort(r),a.writeShort(this.glyphDataFormat),a.data},t}(),Hp=function(){function s(t,r){var a,n,i,o,l,c,h,f,p,v,u,C,w,x,j,_,T;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),p=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(u=t.readUInt16(),v=u/2,t.pos+=6,i=function(){var U,R;for(R=[],c=U=0;0<=v?U<v:U>v;c=0<=v?++U:--U)R.push(t.readUInt16());return R}(),t.pos+=2,w=function(){var U,R;for(R=[],c=U=0;0<=v?U<v:U>v;c=0<=v?++U:--U)R.push(t.readUInt16());return R}(),h=function(){var U,R;for(R=[],c=U=0;0<=v?U<v:U>v;c=0<=v?++U:--U)R.push(t.readUInt16());return R}(),f=function(){var U,R;for(R=[],c=U=0;0<=v?U<v:U>v;c=0<=v?++U:--U)R.push(t.readUInt16());return R}(),n=(this.length-t.pos+this.offset)/2,l=function(){var U,R;for(R=[],c=U=0;0<=n?U<n:U>n;c=0<=n?++U:--U)R.push(t.readUInt16());return R}(),c=j=0,T=i.length;j<T;c=++j)for(x=i[c],a=_=C=w[c];C<=x?_<=x:_>=x;a=C<=x?++_:--_)f[c]===0?o=a+h[c]:(o=l[f[c]/2+(a-C)-(v-c)]||0)!==0&&(o+=h[c]),this.codeMap[a]=65535&o}t.pos=p}return s.encode=function(t,r){var a,n,i,o,l,c,h,f,p,v,u,C,w,x,j,_,T,U,R,V,$,S,A,L,N,k,D,I,H,se,ce,le,ne,fe,Se,M,B,J,te,G,ae,ie,ue,Ae,re,je;switch(I=new mi,o=Object.keys(t).sort(function(Le,X){return Le-X}),r){case"macroman":for(w=0,x=function(){var Le=[];for(C=0;C<256;++C)Le.push(0);return Le}(),_={0:0},i={},H=0,ne=o.length;H<ne;H++)_[ue=t[n=o[H]]]==null&&(_[ue]=++w),i[n]={old:t[n],new:_[t[n]]},x[n]=_[t[n]];return I.writeUInt16(1),I.writeUInt16(0),I.writeUInt32(12),I.writeUInt16(0),I.writeUInt16(262),I.writeUInt16(0),I.write(x),{charMap:i,subtable:I.data,maxGlyphID:w+1};case"unicode":for(k=[],p=[],T=0,_={},a={},j=h=null,se=0,fe=o.length;se<fe;se++)_[R=t[n=o[se]]]==null&&(_[R]=++T),a[n]={old:R,new:_[R]},l=_[R]-n,j!=null&&l===h||(j&&p.push(j),k.push(n),h=l),j=n;for(j&&p.push(j),p.push(65535),k.push(65535),L=2*(A=k.length),S=2*Math.pow(Math.log(A)/Math.LN2,2),v=Math.log(S/2)/Math.LN2,$=2*A-S,c=[],V=[],u=[],C=ce=0,Se=k.length;ce<Se;C=++ce){if(N=k[C],f=p[C],N===65535){c.push(0),V.push(0);break}if(N-(D=a[N].new)>=32768)for(c.push(0),V.push(2*(u.length+A-C)),n=le=N;N<=f?le<=f:le>=f;n=N<=f?++le:--le)u.push(a[n].new);else c.push(D-N),V.push(0)}for(I.writeUInt16(3),I.writeUInt16(1),I.writeUInt32(12),I.writeUInt16(4),I.writeUInt16(16+8*A+2*u.length),I.writeUInt16(0),I.writeUInt16(L),I.writeUInt16(S),I.writeUInt16(v),I.writeUInt16($),ae=0,M=p.length;ae<M;ae++)n=p[ae],I.writeUInt16(n);for(I.writeUInt16(0),ie=0,B=k.length;ie<B;ie++)n=k[ie],I.writeUInt16(n);for(Ae=0,J=c.length;Ae<J;Ae++)l=c[Ae],I.writeUInt16(l);for(re=0,te=V.length;re<te;re++)U=V[re],I.writeUInt16(U);for(je=0,G=u.length;je<G;je++)w=u[je],I.writeUInt16(w);return{charMap:a,subtable:I.data,maxGlyphID:T+1}}},s}(),i2=function(s){function t(){return t.__super__.constructor.apply(this,arguments)}return rn(t,Wa),t.prototype.tag="cmap",t.prototype.parse=function(r){var a,n,i;for(r.pos=this.offset,this.version=r.readUInt16(),i=r.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=i?n<i:n>i;n=0<=i?++n:--n)a=new Hp(r,this.offset),this.tables.push(a),a.isUnicode&&this.unicode==null&&(this.unicode=a);return!0},t.encode=function(r,a){var n,i;return a==null&&(a="macroman"),n=Hp.encode(r,a),(i=new mi).writeUInt16(0),i.writeUInt16(1),n.table=i.data.concat(n.subtable),n},t}(),aS=function(s){function t(){return t.__super__.constructor.apply(this,arguments)}return rn(t,Wa),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t}(),nS=function(s){function t(){return t.__super__.constructor.apply(this,arguments)}return rn(t,Wa),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var a,n;for(n=[],a=0;a<10;++a)n.push(r.readByte());return n}(),this.charRange=function(){var a,n;for(n=[],a=0;a<4;++a)n.push(r.readInt());return n}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var a,n;for(n=[],a=0;a<2;a=++a)n.push(r.readInt());return n}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t}(),iS=function(s){function t(){return t.__super__.constructor.apply(this,arguments)}return rn(t,Wa),t.prototype.tag="post",t.prototype.parse=function(r){var a,n,i;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var o;for(n=r.readUInt16(),this.glyphNameIndex=[],o=0;0<=n?o<n:o>n;o=0<=n?++o:--o)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],i=[];r.pos<this.offset+this.length;)a=r.readByte(),i.push(this.names.push(r.readString(a)));return i;case 151552:return n=r.readUInt16(),this.offsets=r.read(n);case 196608:break;case 262144:return this.map=function(){var l,c,h;for(h=[],o=l=0,c=this.file.maxp.numGlyphs;0<=c?l<c:l>c;o=0<=c?++l:--l)h.push(r.readUInt32());return h}.call(this)}},t}(),oS=function(s,t){this.raw=s,this.length=s.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},lS=function(s){function t(){return t.__super__.constructor.apply(this,arguments)}return rn(t,Wa),t.prototype.tag="name",t.prototype.parse=function(r){var a,n,i,o,l,c,h,f,p,v,u;for(r.pos=this.offset,r.readShort(),a=r.readShort(),c=r.readShort(),n=[],o=0;0<=a?o<a:o>a;o=0<=a?++o:--o)n.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+c+r.readShort()});for(h={},o=p=0,v=n.length;p<v;o=++p)i=n[o],r.pos=i.offset,f=r.readString(i.length),l=new oS(f,i),h[u=i.nameID]==null&&(h[u]=[]),h[i.nameID].push(l);this.strings=h,this.copyright=h[0],this.fontFamily=h[1],this.fontSubfamily=h[2],this.uniqueSubfamily=h[3],this.fontName=h[4],this.version=h[5];try{this.postscriptName=h[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch(C){this.postscriptName=h[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=h[7],this.manufacturer=h[8],this.designer=h[9],this.description=h[10],this.vendorUrl=h[11],this.designerUrl=h[12],this.license=h[13],this.licenseUrl=h[14],this.preferredFamily=h[15],this.preferredSubfamily=h[17],this.compatibleFull=h[18],this.sampleText=h[19]},t}(),cS=function(s){function t(){return t.__super__.constructor.apply(this,arguments)}return rn(t,Wa),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t}(),dS=function(s){function t(){return t.__super__.constructor.apply(this,arguments)}return rn(t,Wa),t.prototype.tag="hmtx",t.prototype.parse=function(r){var a,n,i,o,l,c,h;for(r.pos=this.offset,this.metrics=[],a=0,c=this.file.hhea.numberOfMetrics;0<=c?a<c:a>c;a=0<=c?++a:--a)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var f,p;for(p=[],a=f=0;0<=i?f<i:f>i;a=0<=i?++f:--f)p.push(r.readInt16());return p}(),this.widths=function(){var f,p,v,u;for(u=[],f=0,p=(v=this.metrics).length;f<p;f++)o=v[f],u.push(o.advance);return u}.call(this),n=this.widths[this.widths.length-1],h=[],a=l=0;0<=i?l<i:l>i;a=0<=i?++l:--l)h.push(this.widths.push(n));return h},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t}(),o2=[].slice,uS=function(s){function t(){return t.__super__.constructor.apply(this,arguments)}return rn(t,Wa),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var a,n,i,o,l,c,h,f,p,v;return r in this.cache?this.cache[r]:(o=this.file.loca,a=this.file.contents,n=o.indexOf(r),(i=o.lengthOf(r))===0?this.cache[r]=null:(a.pos=this.offset+n,l=(c=new mi(a.read(i))).readShort(),f=c.readShort(),v=c.readShort(),h=c.readShort(),p=c.readShort(),this.cache[r]=l===-1?new mS(c,f,v,h,p):new hS(c,l,f,v,h,p),this.cache[r]))},t.prototype.encode=function(r,a,n){var i,o,l,c,h;for(l=[],o=[],c=0,h=a.length;c<h;c++)i=r[a[c]],o.push(l.length),i&&(l=l.concat(i.encode(n)));return o.push(l.length),{table:l,offsets:o}},t}(),hS=function(){function s(t,r,a,n,i,o){this.raw=t,this.numberOfContours=r,this.xMin=a,this.yMin=n,this.xMax=i,this.yMax=o,this.compound=!1}return s.prototype.encode=function(){return this.raw.data},s}(),mS=function(){function s(t,r,a,n,i){var o,l;for(this.raw=t,this.xMin=r,this.yMin=a,this.xMax=n,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return s.prototype.encode=function(){var t,r,a;for(r=new mi(o2.call(this.raw.data)),t=0,a=this.glyphIDs.length;t<a;++t)r.pos=this.glyphOffsets[t];return r.data},s}(),fS=function(s){function t(){return t.__super__.constructor.apply(this,arguments)}return rn(t,Wa),t.prototype.tag="loca",t.prototype.parse=function(r){var a,n;return r.pos=this.offset,a=this.file.head.indexToLocFormat,this.offsets=a===0?function(){var i,o;for(o=[],n=0,i=this.length;n<i;n+=2)o.push(2*r.readUInt16());return o}.call(this):function(){var i,o;for(o=[],n=0,i=this.length;n<i;n+=4)o.push(r.readUInt32());return o}.call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,a){for(var n=new Uint32Array(this.offsets.length),i=0,o=0,l=0;l<n.length;++l)if(n[l]=i,o<a.length&&a[o]==l){++o,n[l]=i;var c=this.offsets[l],h=this.offsets[l+1]-c;h>0&&(i+=h)}for(var f=new Array(4*n.length),p=0;p<n.length;++p)f[4*p+3]=255&n[p],f[4*p+2]=(65280&n[p])>>8,f[4*p+1]=(16711680&n[p])>>16,f[4*p]=(4278190080&n[p])>>24;return f},t}(),pS=function(){function s(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return s.prototype.generateCmap=function(){var t,r,a,n,i;for(r in n=this.font.cmap.tables[0].codeMap,t={},i=this.subset)a=i[r],t[r]=n[a];return t},s.prototype.glyphsFor=function(t){var r,a,n,i,o,l,c;for(n={},o=0,l=t.length;o<l;o++)n[i=t[o]]=this.font.glyf.glyphFor(i);for(i in r=[],n)(a=n[i])!=null&&a.compound&&r.push.apply(r,a.glyphIDs);if(r.length>0)for(i in c=this.glyphsFor(r))a=c[i],n[i]=a;return n},s.prototype.encode=function(t,r){var a,n,i,o,l,c,h,f,p,v,u,C,w,x,j;for(n in a=i2.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),u={0:0},j=a.charMap)u[(c=j[n]).old]=c.new;for(C in v=a.maxGlyphID,o)C in u||(u[C]=v++);return f=function(_){var T,U;for(T in U={},_)U[_[T]]=T;return U}(u),p=Object.keys(f).sort(function(_,T){return _-T}),w=function(){var _,T,U;for(U=[],_=0,T=p.length;_<T;_++)l=p[_],U.push(f[l]);return U}(),i=this.font.glyf.encode(o,w,u),h=this.font.loca.encode(i.offsets,w),x={cmap:this.font.cmap.raw(),glyf:i.table,loca:h,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(x["OS/2"]=this.font.os2.raw()),this.font.directory.encode(x)},s}();At.API.PDFObject=function(){var s;function t(){}return s=function(r,a){return(Array(a+1).join("0")+r).slice(-a)},t.convert=function(r){var a,n,i,o;if(Array.isArray(r))return"["+function(){var l,c,h;for(h=[],l=0,c=r.length;l<c;l++)a=r[l],h.push(t.convert(a));return h}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+s(r.getUTCFullYear(),4)+s(r.getUTCMonth(),2)+s(r.getUTCDate(),2)+s(r.getUTCHours(),2)+s(r.getUTCMinutes(),2)+s(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(n in i=["<<"],r)o=r[n],i.push("/"+n+" "+t.convert(o));return i.push(">>"),i.join(`
`)}return""+r},t}();function gS({className:s}){const[t,r]=b.useState({dateRange:"30d"}),[a,n]=b.useState(!1),[i,o]=b.useState(null),l=typeof window!="undefined"&&window.pulse2?window.pulse2:null,c=typeof window!="undefined"&&localStorage.getItem("jwtToken")||"",h=(x,j={})=>{const _=E({},j.headers||{});return l!=null&&l.nonce&&(_["X-WP-Nonce"]=l.nonce),c&&(_.Authorization=`Bearer ${c}`),fetch(x,Z(E({},j),{headers:_}))},f=b.useCallback(()=>he(this,null,function*(){if(l){n(!0);try{const x=yield h(`${l.apiUrl}/analytics/summary`);if(x.ok){const j=yield x.json();o(Z(E({},j),{lastUpdated:new Date}))}else{const[j,_,T]=yield Promise.all([h(`${l.apiUrl}/projects`),h(`${l.apiUrl}/activities?limit=200&analytics=true`),h(`${l.apiUrl}/activities?limit=10&sort=desc`)]);if(j.ok&&_.ok&&T.ok){const U=yield j.json(),R=yield _.json(),V=yield T.json(),$={};U.forEach(k=>{const D=k.status||"Unknown";$[D]=($[D]||0)+1});const S={},A={};R.forEach(k=>{const D=k.type||"unknown";S[D]=(S[D]||0)+1;const I=k.userName||"Unknown User";A[I]=(A[I]||0)+1});const L=Object.entries(A).map(([k,D])=>({userName:k,activityCount:D})).sort((k,D)=>D.activityCount-k.activityCount).slice(0,5),N=V.slice(0,10).map(k=>({id:k.id,type:k.type,userName:k.userName,projectName:k.projectName,createdAt:k.createdAt}));o({totalProjects:U.length,totalActivities:R.length,projectsByStatus:$,activitiesByType:S,recentActivities:N,topUsers:L,lastUpdated:new Date})}}}catch(x){}finally{n(!1)}}}),[l]);b.useEffect(()=>{f()},[f]);const p=()=>{f()},v=x=>{if(i){if(x==="json"){const j=JSON.stringify(i,null,2),_=new Blob([j],{type:"application/json"}),T=URL.createObjectURL(_);u(T,"analytics.json")}else if(x==="csv"){const j=g3.unparse([["Metric","Value"],["Total Projects",i.totalProjects],["Total Activities",i.totalActivities]]),_=new Blob([j],{type:"text/csv"}),T=URL.createObjectURL(_);u(T,"analytics.csv")}else if(x==="pdf"){const j=new At;j.text("Analytics Report",10,10),j.text(`Total Projects: ${i.totalProjects}`,10,20),j.text(`Total Activities: ${i.totalActivities}`,10,30),j.save("analytics.pdf")}}},u=(x,j)=>{const _=document.createElement("a");_.href=x,_.download=j,_.click(),URL.revokeObjectURL(x)},C=x=>({planning:"bg-blue-100 text-blue-800",in_progress:"bg-yellow-100 text-yellow-800",review:"bg-purple-100 text-purple-800",completed:"bg-green-100 text-green-800",on_hold:"bg-gray-100 text-gray-800"})[x]||"bg-gray-100 text-gray-800",w=x=>({project_created:"bg-green-100 text-green-800",note_added:"bg-blue-100 text-blue-800",status_changed:"bg-purple-100 text-purple-800",member_added:"bg-indigo-100 text-indigo-800",media_uploaded:"bg-orange-100 text-orange-800"})[x]||"bg-gray-100 text-gray-800";return i?e.jsxs("div",{className:Ce("space-y-6",s),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Analytics Dashboard"}),e.jsxs("p",{className:"text-muted-foreground",children:["Last updated ",ci(i.lastUpdated,{addSuffix:!0})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Ss,{value:t.dateRange,onValueChange:x=>r(j=>Z(E({},j),{dateRange:x})),children:[e.jsx(ys,{className:"w-32",children:e.jsx(ks,{})}),e.jsxs(bs,{children:[e.jsx(at,{value:"7d",children:"Last 7 days"}),e.jsx(at,{value:"30d",children:"Last 30 days"}),e.jsx(at,{value:"90d",children:"Last 90 days"})]})]}),e.jsxs(de,{onClick:p,disabled:a,variant:"outline",children:[e.jsx(To,{className:Ce("h-4 w-4 mr-2",a&&"animate-spin")}),"Refresh"]}),e.jsx(de,{onClick:()=>v("csv"),variant:"outline",children:"CSV"}),e.jsx(de,{onClick:()=>v("json"),variant:"outline",children:"JSON"}),e.jsx(de,{onClick:()=>v("pdf"),variant:"outline",children:"PDF"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(Xe,{children:[e.jsx(Dt,{className:"pb-2",children:e.jsx(zt,{className:"text-sm font-medium",children:"Total Projects"})}),e.jsxs(Ze,{children:[e.jsx("div",{className:"text-2xl font-bold",children:i.totalProjects}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Active projects in the system"})]})]}),e.jsxs(Xe,{children:[e.jsx(Dt,{className:"pb-2",children:e.jsx(zt,{className:"text-sm font-medium",children:"Total Activities"})}),e.jsxs(Ze,{children:[e.jsx("div",{className:"text-2xl font-bold",children:i.totalActivities}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Actions performed by users"})]})]}),e.jsxs(Xe,{children:[e.jsx(Dt,{className:"pb-2",children:e.jsx(zt,{className:"text-sm font-medium",children:"Active Users"})}),e.jsxs(Ze,{children:[e.jsx("div",{className:"text-2xl font-bold",children:i.topUsers.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Users with recent activity"})]})]}),e.jsxs(Xe,{children:[e.jsx(Dt,{className:"pb-2",children:e.jsx(zt,{className:"text-sm font-medium",children:"Avg Activities/Day"})}),e.jsxs(Ze,{children:[e.jsx("div",{className:"text-2xl font-bold",children:i.totalActivities>0?Math.round(i.totalActivities/30):0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Based on last 30 days"})]})]})]}),e.jsxs(Xe,{children:[e.jsx(Dt,{children:e.jsxs(zt,{className:"flex items-center gap-2",children:[e.jsx(cl,{className:"h-5 w-5"}),"Projects by Status"]})}),e.jsx(Ze,{children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(i.projectsByStatus).map(([x,j])=>e.jsx("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:j}),e.jsx(nt,{className:C(x),children:x.replace("_"," ")})]})},x))})})]}),e.jsxs(Xe,{children:[e.jsx(Dt,{children:e.jsxs(zt,{className:"flex items-center gap-2",children:[e.jsx(Cm,{className:"h-5 w-5"}),"Activities by Type"]})}),e.jsx(Ze,{children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(i.activitiesByType).map(([x,j])=>e.jsx("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:j}),e.jsx(nt,{className:w(x),children:x.replace("_"," ")})]})},x))})})]}),e.jsxs(Xe,{children:[e.jsx(Dt,{children:e.jsxs(zt,{className:"flex items-center gap-2",children:[e.jsx(wr,{className:"h-5 w-5"}),"Most Active Users"]})}),e.jsx(Ze,{children:e.jsx("div",{className:"space-y-3",children:i.topUsers.map((x,j)=>e.jsx("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-muted rounded-full flex items-center justify-center text-sm font-medium",children:j+1}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:x.userName}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[x.activityCount," activities"]})]})]})},x.userName))})})]}),e.jsxs(Xe,{children:[e.jsx(Dt,{children:e.jsxs(zt,{className:"flex items-center gap-2",children:[e.jsx(ns,{className:"h-5 w-5"}),"Recent Activities"]})}),e.jsx(Ze,{children:e.jsx("div",{className:"space-y-3",children:i.recentActivities.map(x=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(nt,{className:w(x.type),children:x.type.replace("_"," ")}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:x.userName}),x.projectName&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Project: ",x.projectName]})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:ci(new Date(x.createdAt),{addSuffix:!0})})]},x.id))})})]})]}):e.jsxs("div",{className:Ce("space-y-6",s),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Analytics Dashboard"}),e.jsxs(de,{onClick:p,disabled:a,variant:"outline",children:[e.jsx(To,{className:Ce("h-4 w-4 mr-2",a&&"animate-spin")}),"Refresh"]})]}),e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(ax,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Loading analytics data..."})]})]})}function xS({className:s,onNavigateToProject:t}){const{currentUser:r,users:a,invitations:n,loadingUsers:i,loadingInvitations:o,createUser:l,updateUser:c,deleteUser:h,createInvitation:f,updateInvitation:p,deleteInvitation:v,requestPasswordReset:u,hasPermission:C,canManageUsers:w,canInviteMembers:x,isCreatingUser:j,isUpdatingUser:_,isDeletingUser:T,isCreatingInvitation:U,isUpdatingInvitation:R,isDeletingInvitation:V,isRequestingPasswordReset:$}=c3(),[S,A]=b.useState("profile"),[L,N]=b.useState(!1),[k,D]=b.useState(!1),[I,H]=b.useState(!1),[se,ce]=b.useState(!1),[le,ne]=b.useState(!1),[fe,Se]=b.useState(""),[M,B]=b.useState("client"),[J,te]=b.useState("none"),[G,ae]=b.useState({email:"",displayName:"",role:"client",projectId:"none"}),[ie,ue]=b.useState({displayName:(r==null?void 0:r.display_name)||"",bio:(r==null?void 0:r.bio)||"",timezone:(r==null?void 0:r.timezone)||"UTC",notificationsEnabled:(r==null?void 0:r.notifications_enabled)==="true"}),[Ae,re]=b.useState(""),[je,Le]=b.useState(!1),[X,Q]=b.useState(null),W={totalMembers:a.length,activeMembers:a.filter(Re=>Re.status==="active").length,projectsCount:2,averageResponseTime:4.5,memberActivity:a.slice(0,5).map(Re=>({userId:Re.id,userName:Re.displayName,activityCount:Math.floor(Math.random()*20)+1,lastActivity:Re.lastActive}))},ve=()=>{fe&&(f({email:fe,role:M,project_id:J==="none"?void 0:J,project_name:J==="none"?void 0:"Sample Project"}),N(!1),Se(""),B("client"),te("none"))},Pe=()=>{!G.email||!G.displayName||(l({email:G.email,display_name:G.displayName,role:G.role,project_id:G.projectId==="none"?void 0:G.projectId}),D(!1),ae({email:"",displayName:"",role:"client",projectId:"none"}))},be=()=>{r&&(c({userId:r.id,updates:{id:r.id,display_name:ie.displayName,meta:{bio:ie.bio,timezone:ie.timezone,notifications_enabled:ie.notificationsEnabled.toString()}}}),H(!1))},Be=()=>{Ae&&(u(Ae),ce(!1),re(""))},Fe=Re=>{p({invitationId:Re.id,updates:{status:"pending",expires_at:new Date(Date.now()+7*24*60*60*1e3).toISOString()}})},$e=Re=>{v(Re.id)},Ke=Re=>{confirm("Are you sure you want to delete this user? This action cannot be undone.")&&h(Re)},Qe=Re=>{navigator.clipboard.writeText(Re)},et=Re=>({admin:"bg-red-100 text-red-800",project_manager:"bg-blue-100 text-blue-800",client:"bg-green-100 text-green-800",artist:"bg-purple-100 text-purple-800",viewer:"bg-gray-100 text-gray-800"})[Re],Je=Re=>({pending:"bg-yellow-100 text-yellow-800",accepted:"bg-green-100 text-green-800",declined:"bg-red-100 text-red-800",expired:"bg-gray-100 text-gray-800"})[Re];return r?e.jsxs("div",{className:Ce("p-6 space-y-6",s),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Profile & Team Management"}),e.jsxs("div",{className:"flex gap-2",children:[w()&&e.jsxs(de,{onClick:()=>D(!0),className:"hover-shimmer",children:[e.jsx($f,{className:"h-4 w-4 mr-2"}),"Create User"]}),x()&&e.jsxs(de,{onClick:()=>N(!0),className:"hover-shimmer",children:[e.jsx(Lo,{className:"h-4 w-4 mr-2"}),"Invite Member"]})]})]}),e.jsxs(il,{value:S,onValueChange:A,className:"space-y-4",children:[e.jsxs(Xi,{className:"grid w-full grid-cols-5",children:[e.jsx(_r,{value:"profile",children:"Profile"}),e.jsx(_r,{value:"team",children:"Team"}),e.jsx(_r,{value:"invitations",children:"Invitations"}),e.jsx(_r,{value:"analytics",children:"Analytics"}),e.jsx(_r,{value:"activity",children:"Activity"})]}),e.jsx(Ir,{value:"profile",className:"space-y-4",children:e.jsx(m3,{currentUser:r,hasPermission:C,setIsEditProfileDialogOpen:H,setIsPasswordResetDialogOpen:ce,getRoleColor:et})}),e.jsx(Ir,{value:"team",className:"space-y-4",children:e.jsx(f3,{teamStats:W,users:a,loadingUsers:i,currentUser:r,hasPermission:C,handleDeleteUser:Ke,isDeletingUser:T,getRoleColor:et})}),e.jsx(Ir,{value:"invitations",className:"space-y-4",children:e.jsxs(Xe,{className:"glass-card",children:[e.jsx(Dt,{children:e.jsxs(zt,{className:"flex items-center gap-2",children:[e.jsx(Lo,{className:"h-5 w-5"}),"Pending Invitations"]})}),e.jsx(Ze,{children:o?e.jsx("div",{className:"space-y-4",children:[1,2].map(Re=>e.jsx("div",{className:"flex items-center gap-3 p-4 border rounded-lg animate-pulse",children:e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-1/3"}),e.jsx("div",{className:"h-3 bg-muted rounded w-1/2"})]})},Re))}):e.jsxs("div",{className:"space-y-4",children:[n.map(Re=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:Re.email}),e.jsx(nt,{className:Je(Re.status),children:Re.status}),e.jsx(nt,{variant:"outline",className:et(Re.role),children:Re.role.replace("_"," ")})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Invited by ",Re.invited_by_name," • ",ci(new Date(Re.created_at),{addSuffix:!0})]}),Re.project_name&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Project: ",Re.project_name]})]}),e.jsx("div",{className:"flex items-center gap-2",children:Re.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsxs(de,{variant:"outline",size:"sm",onClick:()=>Fe(Re),disabled:R,className:"hover-shimmer",children:[e.jsx(jn,{className:"h-4 w-4 mr-2"}),"Resend"]}),e.jsx(de,{variant:"outline",size:"sm",onClick:()=>$e(Re),disabled:V,className:"hover-shimmer text-destructive",children:e.jsx(Zs,{className:"h-4 w-4"})})]})})]},Re.id)),n.length===0&&e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Lo,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No pending invitations"}),x&&e.jsxs(de,{onClick:()=>N(!0),className:"mt-4 hover-shimmer",children:[e.jsx(Lo,{className:"h-4 w-4 mr-2"}),"Send Invitation"]})]})]})})]})}),e.jsx(Ir,{value:"analytics",className:"space-y-4",children:e.jsx(gS,{})}),e.jsx(Ir,{value:"activity",className:"space-y-4",children:e.jsx(_1,{limit:50,userId:r==null?void 0:r.id,showFilters:!0,showRefreshButton:!0,isMainActivityTab:!1,hideAllUsersFilter:!0,onActivityClick:Re=>{Re.projectId&&Re.projectId!=="general"&&t&&t(Re.projectId)}})})]}),e.jsx(Bs,{open:L,onOpenChange:N,children:e.jsxs(Es,{className:"glass-card",children:[e.jsxs(qr,{children:[e.jsx(rr,{children:"Invite Team Member"}),e.jsx(_i,{children:"Send an invitation to join your team. They will receive an email with instructions to accept."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(kt,{htmlFor:"invite-email",children:"Email Address"}),e.jsx(It,{id:"invite-email",type:"email",placeholder:"colleague@example.com",value:fe,onChange:Re=>Se(Re.target.value)})]}),e.jsxs("div",{children:[e.jsx(kt,{htmlFor:"invite-role",children:"Role"}),e.jsxs(Ss,{value:M,onValueChange:Re=>B(Re),children:[e.jsx(ys,{children:e.jsx(ks,{})}),e.jsxs(bs,{children:[e.jsx(at,{value:"client",children:"Client"}),e.jsx(at,{value:"artist",children:"Artist"}),e.jsx(at,{value:"project_manager",children:"Project Manager"}),e.jsx(at,{value:"viewer",children:"Viewer"})]})]})]}),e.jsxs("div",{children:[e.jsx(kt,{htmlFor:"invite-project",children:"Project (Optional)"}),e.jsxs(Ss,{value:J,onValueChange:te,children:[e.jsx(ys,{children:e.jsx(ks,{placeholder:"Select a project"})}),e.jsxs(bs,{children:[e.jsx(at,{value:"none",children:"No specific project"}),e.jsx(at,{value:"project-1",children:"Sample Project 1"}),e.jsx(at,{value:"project-2",children:"Sample Project 2"})]})]})]})]}),e.jsxs(Vn,{children:[e.jsx(de,{variant:"outline",onClick:()=>N(!1),children:"Cancel"}),e.jsxs(de,{onClick:ve,className:"hover-shimmer",disabled:U||!fe,children:[e.jsx(jn,{className:"h-4 w-4 mr-2"}),"Send Invitation"]})]})]})}),e.jsx(Bs,{open:k,onOpenChange:D,children:e.jsxs(Es,{className:"glass-card",children:[e.jsxs(qr,{children:[e.jsx(rr,{children:"Create New User"}),e.jsx(_i,{children:"Create a new user account. A secure password will be generated automatically."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(kt,{htmlFor:"create-email",children:"Email Address"}),e.jsx(It,{id:"create-email",type:"email",placeholder:"user@example.com",value:G.email,onChange:Re=>ae(ft=>Z(E({},ft),{email:Re.target.value}))})]}),e.jsxs("div",{children:[e.jsx(kt,{htmlFor:"create-name",children:"Display Name"}),e.jsx(It,{id:"create-name",placeholder:"John Doe",value:G.displayName,onChange:Re=>ae(ft=>Z(E({},ft),{displayName:Re.target.value}))})]}),e.jsxs("div",{children:[e.jsx(kt,{htmlFor:"create-role",children:"Role"}),e.jsxs(Ss,{value:G.role,onValueChange:Re=>ae(ft=>Z(E({},ft),{role:Re})),children:[e.jsx(ys,{children:e.jsx(ks,{})}),e.jsxs(bs,{children:[e.jsx(at,{value:"client",children:"Client"}),e.jsx(at,{value:"artist",children:"Artist"}),e.jsx(at,{value:"project_manager",children:"Project Manager"}),e.jsx(at,{value:"viewer",children:"Viewer"})]})]})]}),e.jsxs("div",{children:[e.jsx(kt,{htmlFor:"create-project",children:"Assign to Project (Optional)"}),e.jsxs(Ss,{value:G.projectId,onValueChange:Re=>ae(ft=>Z(E({},ft),{projectId:Re})),children:[e.jsx(ys,{children:e.jsx(ks,{placeholder:"Select a project"})}),e.jsxs(bs,{children:[e.jsx(at,{value:"none",children:"No specific project"}),e.jsx(at,{value:"project-1",children:"Sample Project 1"}),e.jsx(at,{value:"project-2",children:"Sample Project 2"})]})]})]})]}),e.jsxs(Vn,{children:[e.jsx(de,{variant:"outline",onClick:()=>D(!1),children:"Cancel"}),e.jsxs(de,{onClick:Pe,className:"hover-shimmer",disabled:j||!G.email||!G.displayName,children:[e.jsx($f,{className:"h-4 w-4 mr-2"}),"Create User"]})]})]})}),e.jsx(Bs,{open:I,onOpenChange:H,children:e.jsxs(Es,{className:"glass-card",children:[e.jsxs(qr,{children:[e.jsx(rr,{children:"Edit Profile"}),e.jsx(_i,{children:"Update your profile information and preferences."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(kt,{htmlFor:"edit-name",children:"Display Name"}),e.jsx(It,{id:"edit-name",value:ie.displayName,onChange:Re=>ue(ft=>Z(E({},ft),{displayName:Re.target.value}))})]}),e.jsxs("div",{children:[e.jsx(kt,{htmlFor:"edit-bio",children:"Bio"}),e.jsx(br,{id:"edit-bio",placeholder:"Tell us about yourself...",value:ie.bio,onChange:Re=>ue(ft=>Z(E({},ft),{bio:Re.target.value}))})]}),e.jsxs("div",{children:[e.jsx(kt,{htmlFor:"edit-timezone",children:"Timezone"}),e.jsxs(Ss,{value:ie.timezone,onValueChange:Re=>ue(ft=>Z(E({},ft),{timezone:Re})),children:[e.jsx(ys,{children:e.jsx(ks,{})}),e.jsxs(bs,{children:[e.jsx(at,{value:"UTC",children:"UTC"}),e.jsx(at,{value:"America/New_York",children:"Eastern Time"}),e.jsx(at,{value:"America/Chicago",children:"Central Time"}),e.jsx(at,{value:"America/Denver",children:"Mountain Time"}),e.jsx(at,{value:"America/Los_Angeles",children:"Pacific Time"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R1,{id:"notifications",checked:ie.notificationsEnabled,onCheckedChange:Re=>ue(ft=>Z(E({},ft),{notificationsEnabled:Re}))}),e.jsx(kt,{htmlFor:"notifications",children:"Enable notifications"})]})]}),e.jsxs(Vn,{children:[e.jsx(de,{variant:"outline",onClick:()=>H(!1),children:"Cancel"}),e.jsxs(de,{onClick:be,className:"hover-shimmer",disabled:_,children:[e.jsx(_m,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})]})}),e.jsx(Bs,{open:se,onOpenChange:ce,children:e.jsxs(Es,{className:"glass-card",children:[e.jsxs(qr,{children:[e.jsx(rr,{children:"Request Password Reset"}),e.jsx(_i,{children:"Enter your email address to receive a password reset link."})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx(kt,{htmlFor:"reset-email",children:"Email Address"}),e.jsx(It,{id:"reset-email",type:"email",placeholder:"your@email.com",value:Ae,onChange:Re=>re(Re.target.value)})]})}),e.jsxs(Vn,{children:[e.jsx(de,{variant:"outline",onClick:()=>ce(!1),children:"Cancel"}),e.jsxs(de,{onClick:Be,className:"hover-shimmer",disabled:$||!Ae,children:[e.jsx(Pm,{className:"h-4 w-4 mr-2"}),"Send Reset Link"]})]})]})}),e.jsx(Bs,{open:le,onOpenChange:ne,children:e.jsxs(Es,{className:"glass-card",children:[e.jsxs(qr,{children:[e.jsx(rr,{children:"User Credentials"}),e.jsx(_i,{children:"Please save these credentials securely and share them with the user."})]}),e.jsx("div",{className:"space-y-4",children:X&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(kt,{children:"Email"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(It,{value:X.email,readOnly:!0}),e.jsx(de,{variant:"outline",size:"sm",onClick:()=>Qe(X.email),children:e.jsx(tc,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{children:[e.jsx(kt,{children:"Username"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(It,{value:X.username,readOnly:!0}),e.jsx(de,{variant:"outline",size:"sm",onClick:()=>Qe(X.username),children:e.jsx(tc,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{children:[e.jsx(kt,{children:"Password"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(It,{type:je?"text":"password",value:X.password,readOnly:!0}),e.jsx(de,{variant:"outline",size:"sm",onClick:()=>Le(!je),children:je?e.jsx(ix,{className:"h-4 w-4"}):e.jsx(Am,{className:"h-4 w-4"})}),e.jsx(de,{variant:"outline",size:"sm",onClick:()=>Qe(X.password),children:e.jsx(tc,{className:"h-4 w-4"})})]})]})]})}),e.jsx(Vn,{children:e.jsxs(de,{onClick:()=>ne(!1),children:[e.jsx(zr,{className:"h-4 w-4 mr-2"}),"Got it"]})})]})})]}):e.jsx("div",{className:Ce("flex items-center justify-center h-64",s),children:e.jsxs("div",{className:"text-center",children:[e.jsx(tl,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:"Please log in to view your profile"})]})})}const vS=()=>{const s=(typeof window!="undefined"?window.pulse2:void 0)||{},t=s.apiUrl||"/wp-json/pulse2/v1",r=s.jwtUrl||"/wp-json/jwt-auth/v1/token";return{apiUrl:t,jwtUrl:r}},yS=({isOpen:s,onClose:t,onLoginSuccess:r})=>{const[a,n]=b.useState(""),[i,o]=b.useState(""),[l,c]=b.useState(!1),[h,f]=b.useState("");if(!s)return null;const p=v=>he(void 0,null,function*(){v.preventDefault(),c(!0),f("");try{const{apiUrl:u,jwtUrl:C}=vS(),x=yield(yield fetch(C,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a,password:i})})).json();if(x.token){localStorage.setItem("jwtToken",x.token);let j=null;try{const T=yield fetch(`${u}/me`,{headers:{Authorization:`Bearer ${x.token}`}});if(!T.ok){const R=yield T.text();throw new Error(`Failed to fetch user ID: Status ${T.status} - ${R}`)}const U=yield T.json();U.id&&(j=String(U.id))}catch(T){}j?localStorage.setItem("userId",j):localStorage.setItem("userId","demo-user");const _=x.user_display_name||x.user_nicename||x.user_email||a;localStorage.setItem("userDisplayName",_),r(x.token,_),t()}else f(x.message||"Login failed")}catch(u){f("Network error")}finally{c(!1)}});return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",children:[e.jsxs("div",{className:"bg-background text-foreground rounded-2xl shadow-2xl p-6 w-full max-w-sm relative flex flex-col items-center border border-border",children:[e.jsx("button",{onClick:t,className:"absolute top-2 right-2 text-2xl text-foreground/60 hover:text-foreground",children:"×"}),e.jsxs("div",{className:"flex flex-col items-center mb-6",children:[e.jsx("div",{className:"glassy-login-icon mb-3 flex items-center justify-center",children:e.jsxs("svg",{width:"44",height:"44",viewBox:"0 0 44 44",fill:"none",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"primary-gradient",x1:"0",y1:"0",x2:"44",y2:"44",gradientUnits:"userSpaceOnUse",children:[e.jsx("stop",{stopColor:"#D72660"}),e.jsx("stop",{offset:"1",stopColor:"#FF6FB5"})]})}),e.jsx("circle",{cx:"22",cy:"22",r:"20",fill:"url(#primary-gradient)",fillOpacity:"0.7"}),e.jsx("circle",{cx:"22",cy:"22",r:"20",fill:"white",fillOpacity:"0.08"}),e.jsx("circle",{cx:"22",cy:"22",r:"20",stroke:"white",strokeOpacity:"0.18",strokeWidth:"2"}),e.jsx("path",{d:"M22 13v11l8 5",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})]})}),e.jsx("h2",{className:"text-2xl font-bold mb-1",children:"Welcome Back"})]}),e.jsxs("form",{onSubmit:p,className:"space-y-5 w-full",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Lo,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground"}),e.jsx(It,{type:"text",value:a,onChange:v=>n(v.target.value),className:"pl-10",placeholder:"email address",required:!0})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Pm,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground"}),e.jsx(It,{type:"password",value:i,onChange:v=>o(v.target.value),className:"pl-10",placeholder:"Password",required:!0})]}),h&&e.jsx("div",{className:"text-destructive text-sm text-center",children:h}),e.jsx(de,{type:"submit",className:"w-full button-primary-enhanced hover-shimmer cyrus-ui mt-2",disabled:l,children:l?"Logging in...":"Login"})]})]}),e.jsx("style",{children:`
        .glassy-login-icon {
          background: rgba(255,255,255,0.10);
          border-radius: 9999px;
          box-shadow: 0 4px 32px 0 rgba(215,38,96,0.12), 0 1.5px 8px 0 rgba(255,111,181,0.10);
          backdrop-filter: blur(8px);
          padding: 0.75rem;
        }
      `})]})};function bS(s){const[t,r]=b.useState("active"),[a,n]=b.useState("newest"),[i,o]=b.useState("all"),[l,c]=b.useState("");return{filteredAndSortedProjects:b.useMemo(()=>{if(!Array.isArray(s))return[];const f=p=>{try{return new Date(p)}catch(v){return null}};return s.filter(p=>t==="archived"?p.isArchived:t==="active"?!p.isArchived:!0).filter(p=>i==="all"?!0:p.status===i).filter(p=>{if(!l)return!0;const v=l.toLowerCase();return p.name.toLowerCase().includes(v)||p.client.toLowerCase().includes(v)||p.projectManager.toLowerCase().includes(v)||p.brief.toLowerCase().includes(v)}).sort((p,v)=>{switch(a){case"newest":return new Date(v.createdAt||0).getTime()-new Date(p.createdAt||0).getTime();case"oldest":return new Date(p.createdAt||0).getTime()-new Date(v.createdAt||0).getTime();case"name":return p.name.localeCompare(v.name);case"status":return p.status.localeCompare(v.status);case"priority":const u={urgent:4,high:3,medium:2,low:1};return(u[v.priority]||0)-(u[p.priority]||0);case"deadline":const C=f(p.endDate),w=f(v.endDate);return!C&&!w?0:C?w?C.getTime()-w.getTime():-1:1;default:return 0}})},[s,t,a,i,l]),filterMode:t,setFilterMode:r,sortMode:a,setSortMode:n,statusFilter:i,setStatusFilter:o,searchTerm:l,setSearchTerm:c}}function l2(){const s=typeof window!="undefined"&&window.pulse2?window.pulse2:null,t=typeof window!="undefined"&&localStorage.getItem("jwtToken")||"",r=(L,N={})=>{const k=E({},N.headers||{});return s!=null&&s.nonce&&(k["X-WP-Nonce"]=s.nonce),t&&(k.Authorization=`Bearer ${t}`),fetch(L,Z(E({},N),{headers:k}))},a=b.useCallback(()=>{const L=typeof window!="undefined"&&localStorage.getItem("userId")||"demo-user",N=typeof window!="undefined"&&localStorage.getItem("userDisplayName")||"Demo User",k=typeof window!="undefined"?localStorage.getItem("userAvatar"):void 0;return{userId:L,userName:N,userAvatar:k}},[]),n=b.useCallback(()=>typeof window=="undefined"?{}:{userAgent:navigator.userAgent,ipAddress:void 0,location:void 0},[]),i=b.useCallback(L=>he(this,null,function*(){try{const{userId:N,userName:k,userAvatar:D}=a(),I=n(),H=Z(E({},L),{userId:N,userName:k,userAvatar:D,timestamp:new Date,metadata:I}),se=typeof window!="undefined"&&window.pulse2?window.pulse2:null,ce=typeof window!="undefined"&&localStorage.getItem("jwtToken")||"";if(se){const le=H.details||{},ne={type:H.type,title:H.type.replace("_"," ").replace(/\b\w/g,Se=>Se.toUpperCase()),description:JSON.stringify(le),project_id:H.projectId,project_name:"projectName"in le?le.projectName:void 0,related_id:"noteId"in le?le.noteId:"projectId"in le?le.projectId:H.projectId};(yield fetch(`${se.apiUrl}/activities`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ce}`,"X-WP-Nonce":se.nonce},body:JSON.stringify(ne)})).ok}else{const le=JSON.parse(localStorage.getItem("activities")||"[]");le.unshift(Z(E({},H),{id:`activity-${Date.now()}-${Math.random()}`})),localStorage.setItem("activities",JSON.stringify(le.slice(0,1e3)))}}catch(N){}}),[a,n]),o=b.useCallback((L,N,k)=>he(this,null,function*(){yield i({type:"project_created",projectId:L,details:{projectName:N,client:k}})}),[i]),l=b.useCallback((L,N,k,D=!1,I)=>he(this,null,function*(){let H="Unknown Project";try{const se=typeof window!="undefined"&&window.pulse2?window.pulse2:null;if(se&&L&&L!=="general"){const ce=yield r(`${se.apiUrl}/projects/${L}`);ce.ok&&(H=(yield ce.json()).name||"Unknown Project")}}catch(se){}yield i({type:"note_added",projectId:L,details:{projectName:H,noteId:N,noteContentPreview:k.length>100?k.substring(0,100)+"...":k,isReply:D,parentNoteId:I}})}),[i]),c=b.useCallback((L,N,k,D)=>he(this,null,function*(){yield i({type:"note_edited",projectId:L,details:{noteId:N,noteContentPreview:k.length>100?k.substring(0,100)+"...":k,oldContent:D.length>100?D.substring(0,100)+"...":D}})}),[i]),h=b.useCallback((L,N,k)=>he(this,null,function*(){yield i({type:"note_deleted",projectId:L,details:{noteId:N,noteContentPreview:k.length>100?k.substring(0,100)+"...":k}})}),[i]),f=b.useCallback((L,N,k)=>he(this,null,function*(){yield i({type:"media_uploaded",projectId:L,details:{mediaIds:N,mediaCount:N.length,categories:k}})}),[i]),p=b.useCallback((L,N)=>he(this,null,function*(){yield i({type:"media_deleted",projectId:L,details:{mediaIds:N,mediaCount:N.length}})}),[i]),v=b.useCallback((L,N,k,D)=>he(this,null,function*(){let I="Unknown Project";try{if(s&&L&&L!=="general"){const H=yield r(`${s.apiUrl}/projects/${L}`);H.ok&&(I=(yield H.json()).name||"Unknown Project")}}catch(H){}yield i({type:"status_changed",projectId:L,details:{projectName:I,statusFrom:N,statusTo:k,reason:D}})}),[i,s,r]),u=b.useCallback((L,N,k,D,I)=>he(this,null,function*(){yield i({type:D?"deadline_extended":"deadline_shortened",projectId:L,details:{deadlineFrom:N,deadlineTo:k,reason:I}})}),[i]),C=b.useCallback((L,N,k)=>he(this,null,function*(){yield i({type:"priority_changed",projectId:L,details:{priorityFrom:N,priorityTo:k}})}),[i]),w=b.useCallback((L,N,k,D,I)=>he(this,null,function*(){yield i({type:"external_link_added",projectId:L,details:{linkId:N,linkName:k,linkType:D,linkUrl:I}})}),[i]),x=b.useCallback((L,N,k,D)=>he(this,null,function*(){yield i({type:"external_link_removed",projectId:L,details:{linkId:N,linkName:k,linkType:D}})}),[i]),j=b.useCallback((L,N,k)=>he(this,null,function*(){yield i({type:"brief_updated",projectId:L,details:{briefPreview:N.length>100?N.substring(0,100)+"...":N,oldBriefPreview:k.length>100?k.substring(0,100)+"...":k}})}),[i]),_=b.useCallback((L,N,k,D)=>he(this,null,function*(){yield i({type:"member_added",projectId:L,details:{memberId:N,memberName:k,memberRole:D}})}),[i]),T=b.useCallback((L,N,k,D)=>he(this,null,function*(){yield i({type:"member_removed",projectId:L,details:{memberId:N,memberName:k,memberRole:D}})}),[i]),U=b.useCallback((L,N,k,D,I)=>he(this,null,function*(){yield i({type:"member_role_changed",projectId:L,details:{memberId:N,memberName:k,roleFrom:D,roleTo:I}})}),[i]),R=b.useCallback((L,N,k)=>he(this,null,function*(){yield i({type:"project_manager_changed",projectId:L,details:{managerFrom:N,managerTo:k}})}),[i]),V=b.useCallback((L,N,k)=>he(this,null,function*(){yield i({type:"client_changed",projectId:L,details:{clientFrom:N,clientTo:k}})}),[i]),$=b.useCallback((L,N,k,D)=>he(this,null,function*(){yield i({type:"artists_updated",projectId:L,details:{artistsAdded:N,artistsRemoved:k,totalArtists:D}})}),[i]),S=b.useCallback((L,N,k)=>he(this,null,function*(){yield i({type:"video_url_added",projectId:L,details:{videoUrl:N,videoPlatform:k}})}),[i]),A=b.useCallback((L,N,k)=>he(this,null,function*(){yield i({type:"video_url_removed",projectId:L,details:{videoUrl:N,videoPlatform:k}})}),[i]);return{logActivity:i,logProjectCreated:o,logNoteAdded:l,logNoteEdited:c,logNoteDeleted:h,logMediaUploaded:f,logMediaDeleted:p,logStatusChanged:v,logDeadlineChanged:u,logPriorityChanged:C,logExternalLinkAdded:w,logExternalLinkRemoved:x,logBriefUpdated:j,logMemberAdded:_,logMemberRemoved:T,logMemberRoleChanged:U,logProjectManagerChanged:R,logClientChanged:V,logArtistsUpdated:$,logVideoUrlAdded:S,logVideoUrlRemoved:A}}const c2=b.createContext(void 0);function wS({children:s,defaultTheme:t="dark"}){const[r,a]=b.useState(()=>localStorage.getItem("theme")||t);b.useEffect(()=>{const o=window.document.documentElement;o.classList.remove("light","dark"),o.classList.add(r),localStorage.setItem("theme",r)},[r]);const i={theme:r,setTheme:a,toggleTheme:()=>{a(r==="dark"?"light":"dark")}};return e.jsx(c2.Provider,{value:i,children:s})}const jS=()=>{const s=b.useContext(c2);if(s===void 0)throw new Error("useTheme must be used within a ThemeProvider");return s};var d2="AlertDialog",[NS,Xk]=Sn(d2,[Mg]),kn=Mg(),u2=s=>{const n=s,{__scopeAlertDialog:t}=n,r=Ee(n,["__scopeAlertDialog"]),a=kn(t);return e.jsx(Lg,Z(E(E({},a),r),{modal:!0}))};u2.displayName=d2;var SS="AlertDialogTrigger",kS=b.forwardRef((s,t)=>{const i=s,{__scopeAlertDialog:r}=i,a=Ee(i,["__scopeAlertDialog"]),n=kn(r);return e.jsx(Tg,Z(E(E({},n),a),{ref:t}))});kS.displayName=SS;var CS="AlertDialogPortal",h2=s=>{const n=s,{__scopeAlertDialog:t}=n,r=Ee(n,["__scopeAlertDialog"]),a=kn(t);return e.jsx(Ig,E(E({},a),r))};h2.displayName=CS;var AS="AlertDialogOverlay",m2=b.forwardRef((s,t)=>{const i=s,{__scopeAlertDialog:r}=i,a=Ee(i,["__scopeAlertDialog"]),n=kn(r);return e.jsx(ym,Z(E(E({},n),a),{ref:t}))});m2.displayName=AS;var Uo="AlertDialogContent",[PS,_S]=NS(Uo),IS=mg("AlertDialogContent"),f2=b.forwardRef((s,t)=>{const h=s,{__scopeAlertDialog:r,children:a}=h,n=Ee(h,["__scopeAlertDialog","children"]),i=kn(r),o=b.useRef(null),l=Is(t,o),c=b.useRef(null);return e.jsx(Xv,{contentName:Uo,titleName:p2,docsSlug:"alert-dialog",children:e.jsx(PS,{scope:r,cancelRef:c,children:e.jsxs(bm,Z(E(E({role:"alertdialog"},i),n),{ref:l,onOpenAutoFocus:qt(n.onOpenAutoFocus,f=>{var p;f.preventDefault(),(p=c.current)==null||p.focus({preventScroll:!0})}),onPointerDownOutside:f=>f.preventDefault(),onInteractOutside:f=>f.preventDefault(),children:[e.jsx(IS,{children:a}),e.jsx(TS,{contentRef:o})]}))})})});f2.displayName=Uo;var p2="AlertDialogTitle",g2=b.forwardRef((s,t)=>{const i=s,{__scopeAlertDialog:r}=i,a=Ee(i,["__scopeAlertDialog"]),n=kn(r);return e.jsx(jm,Z(E(E({},n),a),{ref:t}))});g2.displayName=p2;var x2="AlertDialogDescription",v2=b.forwardRef((s,t)=>{const i=s,{__scopeAlertDialog:r}=i,a=Ee(i,["__scopeAlertDialog"]),n=kn(r);return e.jsx(Nm,Z(E(E({},n),a),{ref:t}))});v2.displayName=x2;var LS="AlertDialogAction",y2=b.forwardRef((s,t)=>{const i=s,{__scopeAlertDialog:r}=i,a=Ee(i,["__scopeAlertDialog"]),n=kn(r);return e.jsx(wm,Z(E(E({},n),a),{ref:t}))});y2.displayName=LS;var b2="AlertDialogCancel",w2=b.forwardRef((s,t)=>{const l=s,{__scopeAlertDialog:r}=l,a=Ee(l,["__scopeAlertDialog"]),{cancelRef:n}=_S(b2,r),i=kn(r),o=Is(t,n);return e.jsx(wm,Z(E(E({},i),a),{ref:o}))});w2.displayName=b2;var TS=({contentRef:s})=>{const t=`\`${Uo}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Uo}\` by passing a \`${x2}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Uo}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return b.useEffect(()=>{var a;const r=document.getElementById((a=s.current)==null?void 0:a.getAttribute("aria-describedby"))},[t,s]),null},DS=u2,MS=h2,j2=m2,N2=f2,S2=y2,k2=w2,C2=g2,A2=v2;const ES=DS,RS=MS,P2=b.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Ee(n,["className"]);return e.jsx(j2,Z(E({className:Ce("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s)},t),{ref:r}))});P2.displayName=j2.displayName;const _2=b.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Ee(n,["className"]);return e.jsxs(RS,{children:[e.jsx(P2,{}),e.jsx(N2,E({ref:r,className:Ce("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s)},t))]})});_2.displayName=N2.displayName;const I2=r=>{var a=r,{className:s}=a,t=Ee(a,["className"]);return e.jsx("div",E({className:Ce("flex flex-col space-y-2 text-center sm:text-left",s)},t))};I2.displayName="AlertDialogHeader";const L2=r=>{var a=r,{className:s}=a,t=Ee(a,["className"]);return e.jsx("div",E({className:Ce("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s)},t))};L2.displayName="AlertDialogFooter";const T2=b.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Ee(n,["className"]);return e.jsx(C2,E({ref:r,className:Ce("text-lg font-semibold",s)},t))});T2.displayName=C2.displayName;const D2=b.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Ee(n,["className"]);return e.jsx(A2,E({ref:r,className:Ce("text-sm text-muted-foreground",s)},t))});D2.displayName=A2.displayName;const M2=b.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Ee(n,["className"]);return e.jsx(S2,E({ref:r,className:Ce(Bm(),s)},t))});M2.displayName=S2.displayName;const E2=b.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Ee(n,["className"]);return e.jsx(k2,E({ref:r,className:Ce(Bm({variant:"outline"}),"mt-2 sm:mt-0",s)},t))});E2.displayName=k2.displayName;const OS=()=>typeof window!="undefined"&&window.pulse2?window.pulse2:{apiUrl:"/wp-json/pulse2/v1",mediaUrl:"/wp-json/wp/v2/media",nonce:""},jd=(r,...a)=>he(void 0,[r,...a],function*(s,t={}){const n=OS(),i=E({"Content-Type":"application/json"},t.headers),o=typeof window!="undefined"?localStorage.getItem("jwtToken"):null;o&&(i.Authorization=`Bearer ${o}`),n.nonce&&(i["X-WP-Nonce"]=n.nonce);const l=yield fetch(`${n.apiUrl}${s}`,Z(E({},t),{headers:i}));if(!l.ok){const c=yield l.text().catch(()=>"");throw new Error(`Notes API ${l.status} ${l.statusText}: ${c}`)}return l.json()});class FS{createNote(t){return he(this,null,function*(){return typeof window!="undefined"&&window.pulse2?jd("/notes",{method:"POST",body:JSON.stringify({project_id:t.projectId,content:t.content,parent_id:t.parentId,created_at:t.createdAt,updated_at:t.updatedAt})}):{id:`note-${Date.now()}`,projectId:t.projectId,content:t.content,parentId:t.parentId,createdAt:t.createdAt||new Date().toISOString(),updatedAt:t.updatedAt||new Date().toISOString()}})}getNotesByProject(t){return he(this,null,function*(){return jd(`/notes?project_id=${encodeURIComponent(t)}`)})}updateNote(t,r){return he(this,null,function*(){return jd(`/notes/${t}`,{method:"PUT",body:JSON.stringify({content:r.content})})})}deleteNote(t){return he(this,null,function*(){return jd(`/notes/${t}`,{method:"DELETE"})})}}const Io=new FS;function jc(s){const[t,r]=b.useState([]),[a,n]=b.useState(""),[i,o]=b.useState(null),[l,c]=b.useState(""),[h,f]=b.useState(null),[p,v]=b.useState(""),[u,C]=b.useState(null),w=l2();localStorage.getItem("userId"),localStorage.getItem("userDisplayName");const x=b.useCallback(()=>he(this,null,function*(){try{if(typeof window!="undefined"&&window.pulse2?window.pulse2:null){const V=yield Io.getNotesByProject(s);r(Array.isArray(V)?V:[])}}catch(R){r([])}}),[s]);return b.useEffect(()=>{x();const R=setInterval(x,5e3);return()=>clearInterval(R)},[x]),{notes:t,noteInput:a,setNoteInput:n,replyTo:i,setReplyTo:o,replyInput:l,setReplyInput:c,editingNoteId:h,setEditingNoteId:f,editInput:p,setEditInput:v,noteIdToDelete:u,setNoteIdToDelete:C,handleAddNote:()=>he(this,null,function*(){if(!(!a.trim()||!s))try{const R=yield Io.createNote({projectId:s,content:a});r(V=>[...V,R]),n(""),w.logNoteAdded(s,R.id,a)}catch(R){}}),handleReply:R=>he(this,null,function*(){if(!(!l.trim()||!s))try{const V=yield Io.createNote({projectId:s,content:l,parentId:R});r($=>$.map(S=>S.id===R?Z(E({},S),{replies:[...S.replies||[],V]}):S)),o(null),c(""),w.logNoteAdded(s,V.id,l,!0,R)}catch(V){}}),handleEditNote:R=>he(this,null,function*(){if(!(!p.trim()||!s))try{const V=t.find(A=>A.id===R),$=(V==null?void 0:V.content)||"",S=yield Io.updateNote(R,{content:p});r(A=>A.map(L=>L.id===R?S:L)),f(null),v(""),w.logNoteEdited(s,R,p,$)}catch(V){}}),handleConfirmDelete:()=>he(this,null,function*(){if(!u||!s)return;const R=t.find(V=>V.id===u);if(R)try{yield Io.deleteNote(u),r(V=>V.filter($=>$.id!==u)),w.logNoteDeleted(s,u,R.content)}catch(V){}C(null)})}}function BS({autoRefresh:s,onToggle:t,className:r,size:a="sm"}){return e.jsx("div",{className:`flex items-center gap-2 ${r}`,children:e.jsx(de,{variant:s?"default":"outline",size:a,onClick:()=>t(!s),className:"flex items-center gap-2",children:s?e.jsxs(e.Fragment,{children:[e.jsx(Ih,{className:"h-4 w-4"}),"5s Auto"]}):e.jsxs(e.Fragment,{children:[e.jsx(ux,{className:"h-4 w-4"}),"Manual"]})})})}function US({imageUrl:s,imageAlt:t,projectId:r,mediaId:a,userId:n,userName:i,comments:o=[],onAddComment:l,onResolveComment:c,className:h}){const f=b.useRef(null),[p,v]=b.useState(!0),[u,C]=b.useState(null),w=jc(r),{notes:x,noteInput:j,setNoteInput:_,handleAddNote:T}=w,U=()=>{!u||!u.content.trim()||(_(u.content),T(),C(null))},R=()=>{C(null)},V=S=>{c==null||c(S)},$=S=>{if(u)return;const A=S.currentTarget.getBoundingClientRect(),L=(S.clientX-A.left)/A.width*100,N=(S.clientY-A.top)/A.height*100;C({x:L,y:N,content:""})};return e.jsxs("div",{className:Ce("relative",h),children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Tr,{className:"w-4 h-4 text-blue-600"}),e.jsxs("span",{className:"text-sm font-medium",children:["Comments (",o.filter(S=>!S.resolved).length,")"]})]}),e.jsxs(de,{variant:"outline",size:"sm",onClick:()=>v(!p),className:"text-xs",children:[p?"Hide":"Show"," Comments"]})]}),e.jsxs("div",{className:"relative glass-card p-2 rounded-lg",children:[e.jsx("img",{ref:f,src:s,alt:t,className:"w-full h-auto rounded cursor-crosshair",onClick:$}),p&&o.map(S=>e.jsx(qS,{comment:S,onResolve:()=>V(S.id),currentUserId:n},S.id)),u&&e.jsx("div",{className:"absolute z-20",style:{left:`${u.x}%`,top:`${u.y}%`,transform:"translate(-50%, -50%)"},children:e.jsx(zS,{value:u.content,onChange:S=>C(Z(E({},u),{content:S})),onSave:U,onCancel:R})})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2 text-center",children:"Click anywhere on the image to add a comment"})]})}function qS({comment:s,onResolve:t,currentUserId:r}){const[a,n]=b.useState(!1),i=s.authorId===r;return e.jsxs(e.Fragment,{children:[e.jsx("button",{className:Ce("absolute w-6 h-6 rounded-full border-2 border-white shadow-lg transition-all duration-200 z-10",s.resolved?"bg-green-500 hover:bg-green-600":"bg-blue-500 hover:bg-blue-600",a&&"scale-110"),style:{left:`${s.x}%`,top:`${s.y}%`,transform:"translate(-50%, -50%)"},onClick:o=>{o.stopPropagation(),n(!a)},children:e.jsx(Tr,{className:"w-3 h-3 text-white mx-auto"})}),a&&e.jsx("div",{className:"absolute z-20 min-w-[250px] max-w-[300px]",style:{left:`${s.x}%`,top:`${s.y}%`,transform:"translate(-50%, calc(-100% - 10px))"},children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg border p-3",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium",children:s.authorName}),s.resolved&&e.jsx(nt,{variant:"secondary",className:"text-xs",children:"Resolved"})]}),e.jsx("button",{onClick:()=>n(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(Zs,{className:"w-3 h-3"})})]}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 mb-2",children:s.content}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-gray-500",children:new Date(s.createdAt).toLocaleDateString()}),!s.resolved&&i&&e.jsxs(de,{size:"sm",variant:"outline",onClick:t,className:"text-xs h-6",children:[e.jsx(ja,{className:"w-3 h-3 mr-1"}),"Resolve"]})]})]})})]})}function zS({value:s,onChange:t,onSave:r,onCancel:a}){const n=i=>{i.key==="Enter"&&!i.shiftKey?(i.preventDefault(),r()):i.key==="Escape"&&a()};return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg border p-3 min-w-[250px]",children:[e.jsx(br,{value:s,onChange:i=>t(i.target.value),placeholder:"Add your comment...",className:"min-h-[60px] mb-2 text-sm",onKeyDown:n,autoFocus:!0}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(de,{variant:"outline",size:"sm",onClick:a,children:"Cancel"}),e.jsxs(de,{size:"sm",onClick:r,disabled:!s.trim(),children:[e.jsx(jn,{className:"w-3 h-3 mr-1"}),"Comment"]})]})]})}const wh=["#FF6B35","#F7931E","#FFD23F","#06FFA5","#118AB2","#073B4C","#7209B7","#F72585"],$S=s=>{if(!s)return wh[0];let t=0;for(let r=0;r<s.length;r++)t=s.charCodeAt(r)+((t<<5)-t);return wh[Math.abs(t)%wh.length]},sf=b.memo(({note:s,isReply:t=!1,userId:r,replyTo:a,setReplyTo:n,replyInput:i,setReplyInput:o,editingNoteId:l,setEditingNoteId:c,editInput:h,setEditInput:f,setNoteIdToDelete:p,handleReply:v,handleEditNote:u})=>{const C=String(s.authorId||"")===String(r||"");return e.jsxs("div",{className:`p-3 flex flex-col gap-1 rounded-lg bg-black/20 backdrop-blur-sm border border-white/10 shadow-lg ${t?"ml-8 mt-2":""}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-semibold text-sm text-primary-foreground bg-primary/70 rounded px-2 py-0.5",style:{backgroundColor:$S(s.authorId)},children:s.authorName}),e.jsx("span",{className:"text-xs text-muted-foreground",children:Jt(s.createdAt,"PPpp")})]}),l===s.id?e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(It,{value:h,onChange:w=>f(w.target.value),className:"flex-1 text-sm text-muted-foreground",onKeyDown:w=>{w.key==="Enter"&&u(s.id)},autoFocus:!0}),e.jsx(de,{size:"sm",onClick:()=>u(s.id),className:"hover-shimmer",children:e.jsx(jn,{className:"h-4 w-4"})}),e.jsx(de,{size:"sm",variant:"outline",onClick:()=>c(null),className:"hover-shimmer",children:"Cancel"})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-base flex-1 break-words",children:s.content}),e.jsxs("div",{className:"flex items-center",children:[C&&e.jsxs(e.Fragment,{children:[e.jsx(de,{size:"icon",variant:"ghost",onClick:()=>{c(s.id),f(s.content)},className:"hover-shimmer",children:e.jsx(sc,{className:"h-4 w-4"})}),e.jsx(de,{size:"icon",variant:"ghost",onClick:()=>p(s.id),className:"hover-shimmer text-destructive",children:e.jsx($r,{className:"h-4 w-4"})})]}),e.jsx(de,{size:"icon",variant:"ghost",onClick:()=>{n(a===s.id?null:s.id),a!==s.id&&o("")},className:"hover-shimmer",children:e.jsx(nx,{className:"h-4 w-4"})})]})]}),a===s.id&&e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx(It,{value:i,onChange:w=>o(w.target.value),placeholder:`Reply to ${s.authorName}`,className:"flex-1 text-sm text-muted-foreground",onKeyDown:w=>{w.key==="Enter"&&i.trim()&&v(s.id)},autoFocus:!0}),e.jsx(de,{onClick:()=>v(s.id),size:"sm",className:"hover-shimmer",disabled:!i.trim(),children:e.jsx(jn,{className:"h-4 w-4"})}),e.jsx(de,{onClick:()=>{n(null),o("")},size:"sm",variant:"outline",className:"hover-shimmer",children:"Cancel"})]}),s.replies&&s.replies.map(w=>e.jsx(sf,{note:w,isReply:!0,userId:r,replyTo:a,setReplyTo:n,replyInput:i,setReplyInput:o,editingNoteId:l,setEditingNoteId:c,editInput:h,setEditInput:f,setNoteIdToDelete:p,handleReply:v,handleEditNote:u},w.id))]})});sf.displayName="NoteCard";function WS({project:s,isLoggedIn:t,onEdit:r,onPin:a,isPinned:n,autoRefresh:i,onToggleAutoRefresh:o,onCreateOrNavigateMoodboard:l,onCreateOrNavigateWhiteboard:c,onBack:h}){var Ae;const[f,p]=b.useState(null),[v,u]=b.useState(null),[C,w]=b.useState(!1),[x,j]=b.useState(!1),[_,T]=b.useState(!1),{notes:U,noteInput:R,setNoteInput:V,handleAddNote:$,handleEditNote:S,handleConfirmDelete:A,handleReply:L,replyTo:N,setReplyTo:k,replyInput:D,setReplyInput:I,editingNoteId:H,setEditingNoteId:se,editInput:ce,setEditInput:le,noteIdToDelete:ne,setNoteIdToDelete:fe}=jc(s.id),Se=typeof window!="undefined"&&localStorage.getItem("userId")||"demo-user",M=b.useCallback(re=>{L(re)},[L]),B=b.useCallback(re=>{S(re)},[S]),J=()=>he(this,null,function*(){try{gn({title:"Creating moodboard...",description:"Please wait while we set up your moodboard."});const re=yield wt.createWorkspaceForProject(s.id,"moodboard");j(!0),gn({title:re.isNew?"Moodboard created":"Existing moodboard found",description:re.message}),gn({title:"Ready to view",description:"Click here to go to the Moodboards tab",action:e.jsx(de,{variant:"default",size:"sm",onClick:()=>{const je=document.querySelector('[data-viewmode="moodboards"]');if(je)je.click();else{const Le=new CustomEvent("navigate",{detail:{viewMode:"moodboards",workspaceId:re.workspace.id}});window.dispatchEvent(Le)}},className:"button-primary-enhanced hover-shimmer cyrus-ui",children:"View Moodboards"}),duration:1e4})}catch(re){gn({title:"Error",description:"Failed to create moodboard. Please try again.",variant:"destructive"})}}),te=()=>he(this,null,function*(){try{gn({title:"Creating whiteboard...",description:"Please wait while we set up your whiteboard."});const re=yield wt.createWorkspaceForProject(s.id,"whiteboard");T(!0),gn({title:re.isNew?"Whiteboard created":"Existing whiteboard found",description:re.message}),gn({title:"Ready to view",description:"Click here to go to the Whiteboards tab",action:e.jsx(de,{variant:"default",size:"sm",onClick:()=>{const je=document.querySelector('[data-viewmode="whiteboards"]');if(je)je.click();else{const Le=new CustomEvent("navigate",{detail:{viewMode:"whiteboards",workspaceId:re.workspace.id}});window.dispatchEvent(Le)}},className:"button-primary-enhanced hover-shimmer cyrus-ui",children:"View Whiteboards"}),duration:1e4})}catch(re){gn({title:"Error",description:"Failed to create whiteboard. Please try again.",variant:"destructive"})}}),G=b.useMemo(()=>{const re=s.media||[],je={All:re},Le=re.reduce((X,Q)=>(X[Q.type]||(X[Q.type]=[]),X[Q.type].push(Q),X),{});return E(E({},je),Le)},[s.media]),ae=Object.keys(G),[ie,ue]=b.useState(ae[0]);return b.useEffect(()=>{ae.length>0&&!ae.includes(ie)&&ue(ae[0])},[ae,ie]),e.jsx("div",{className:"p-4 sm:p-6 lg:p-8",children:e.jsxs("div",{className:"glass-card p-6 rounded-lg shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4 md:w-1/2",children:[e.jsx(de,{variant:"ghost",size:"sm",onClick:h,className:"hover-shimmer cyrus-ui",children:e.jsx(qa,{className:"h-4 w-4"})}),e.jsx("h1",{className:"text-2xl font-bold bg-gradient-primary bg-clip-text text-transparent",children:s.name})]}),e.jsxs("div",{className:"flex items-center gap-3 md:w-1/2 justify-end",children:[t&&e.jsxs(e.Fragment,{children:[e.jsx(de,{onClick:J,variant:"ghost",size:"icon",className:`h-8 w-8 hover-shimmer ${x?"bg-primary text-primary-foreground":""}`,children:e.jsx(yr,{className:"h-4 w-4 text-purple-500"})}),e.jsx(de,{onClick:te,variant:"ghost",size:"icon",className:`h-8 w-8 hover-shimmer ${_?"bg-primary text-primary-foreground":""}`,children:e.jsx(Dr,{className:"h-4 w-4 text-green-500"})}),e.jsx(de,{onClick:a,variant:"outline",className:"hover-shimmer",children:e.jsx(Ua,{className:Ce("h-4 w-4",n&&"fill-foreground")})}),e.jsx(de,{onClick:r,variant:"outline",className:"hover-shimmer cyrus-ui",children:"Edit Project"})]}),e.jsxs(Ss,{value:s.status,onValueChange:re=>{},children:[e.jsx(ys,{className:`w-full max-w-[190px] py-1 px-3 text-xs font-medium hover-shimmer border-l-4 ${zd(s.status)}`,children:e.jsx(ks,{children:((Ae=wa.find(re=>re.value===s.status))==null?void 0:Ae.label)||s.status})}),e.jsx(bs,{children:wa.map(re=>e.jsx(at,{value:re.value,children:re.label},re.value))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Sa,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:["Created by: ",e.jsx("span",{className:"font-medium",children:s.createdBy||localStorage.getItem("userDisplayName")||"Unknown"})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-1 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ly,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("span",{children:["Client: ",e.jsx("span",{className:"font-medium",children:s.client})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Sa,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("span",{children:["PM: ",e.jsx("span",{className:"font-medium",children:s.projectManager||"Not assigned"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(wr,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("span",{children:["Artists: ",e.jsx("span",{className:"font-medium",children:s.artists.map(re=>re.name).join(", ")})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Cs,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:["Start: ",e.jsx("span",{className:"font-medium",children:Jt(s.startDate)})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Cs,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:["End: ",e.jsx("span",{className:"font-medium",children:Jt(s.endDate)})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Im,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:["Priority: ",e.jsx(nt,{variant:"outline",className:Ce("font-medium",s.priority==="high"?"text-red-500":s.priority==="medium"?"text-amber-500":"text-green-500"),children:s.priority})]})]}),s.statusHistory&&Array.isArray(s.statusHistory)&&s.statusHistory.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[e.jsx(nx,{className:"h-5 w-5 text-muted-foreground"}),"Status History"]}),e.jsx("div",{className:"space-y-2",children:s.statusHistory.map((re,je)=>e.jsxs("div",{className:"flex items-center justify-between p-2 rounded-md bg-card/50 backdrop-blur-sm border",children:[e.jsx("div",{children:e.jsx("span",{className:"font-medium",children:re.status})}),e.jsx("span",{className:"text-sm text-muted-foreground",children:Jt(re.date,"PPpp")})]},je))})]})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold mb-2 flex items-center gap-2",children:[e.jsx(Dd,{className:"h-5 w-5 text-muted-foreground"}),"Brief & Notes"]}),e.jsxs("div",{className:"p-4 bg-card/50 backdrop-blur-sm rounded-md border",children:[s.brief?e.jsx("p",{className:"whitespace-pre-wrap",children:s.brief}):e.jsx("p",{className:"text-muted-foreground italic",children:"No brief provided"}),e.jsx(cc,{className:"my-4"}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"font-semibold text-base mb-2 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Tr,{className:"h-5 w-5"})," Project Notes"]}),e.jsx(BS,{autoRefresh:i,onToggle:o})]}),t&&e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx(It,{value:R,onChange:re=>V(re.target.value),placeholder:"Write a note...",className:"flex-1",onKeyDown:re=>{re.key==="Enter"&&$()}}),e.jsx(de,{onClick:$,size:"sm",children:e.jsx(jn,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"space-y-3",children:[U.length===0&&e.jsx("div",{className:"text-muted-foreground text-sm",children:"No notes yet."}),U.map(re=>e.jsx(sf,{note:re,userId:Se,replyTo:N,setReplyTo:k,replyInput:D,setReplyInput:I,editingNoteId:H,setEditingNoteId:se,editInput:ce,setEditInput:le,setNoteIdToDelete:fe,handleReply:M,handleEditNote:B},re.id))]})]})]})]})})]}),s.externalLinks&&s.externalLinks.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"External Links"}),e.jsx("div",{className:"grid gap-2",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))"},children:s.externalLinks.map((re,je)=>e.jsx("a",{href:re.url,target:"_blank",rel:"noopener noreferrer",className:"p-2 bg-card/50 backdrop-blur-sm rounded-md border hover:bg-card/80 transition-colors hover-shimmer",children:re.name||re.url},je))})]}),s.media&&Array.isArray(s.media)&&s.media.length>0&&e.jsxs("div",{className:"mt-8",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Media"}),e.jsxs(il,{value:ie,onValueChange:re=>ue(re),className:"w-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 w-full",children:[e.jsx(Xi,{className:"rounded-full bg-muted/20 px-2 py-1",children:ae.map(re=>e.jsx(_r,{value:re,className:"hover-shimmer",children:re},re))}),s.videoUrl&&e.jsxs(de,{variant:"ghost",size:"sm",onClick:re=>{re.stopPropagation(),w(!0)},className:"flex items-center gap-2 hover-shimmer ml-4",children:[e.jsx(Lh,{className:"h-5 w-5"}),e.jsx("span",{className:"text-xs font-medium",children:"Watch Me"})]})]}),ae.map(re=>e.jsx(Ir,{value:re,children:e.jsx(Z0,{media:G[re],categoryName:re,onImageClick:je=>p({media:G[re],index:je}),onCommentClick:je=>u(je)})},re))]}),s.videoUrl&&e.jsx(Bs,{open:!!C,onOpenChange:re=>{re||w(!1)},children:e.jsxs(Es,{className:"max-w-3xl h-[60vh] p-0 bg-black",onClick:re=>re.stopPropagation(),children:[e.jsx(rr,{className:"sr-only",children:"YouTube Video Player"}),e.jsx("iframe",{width:"100%",height:"100%",src:`https://www.youtube.com/embed/${Ix(s.videoUrl)||""}`,title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})]})})]}),e.jsx(ES,{open:ne!==null,onOpenChange:re=>!re&&fe(null),children:e.jsxs(_2,{children:[e.jsxs(I2,{children:[e.jsx(T2,{children:"Are you absolutely sure?"}),e.jsx(D2,{children:"This action cannot be undone. This will permanently delete this note and any replies to it."})]}),e.jsxs(L2,{children:[e.jsx(E2,{children:"Cancel"}),e.jsx(M2,{onClick:A,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})}),f&&e.jsx(zm,{media:f.media,initialIndex:f.index,onClose:()=>p(null)}),v&&e.jsx(Bs,{open:!!v,onOpenChange:re=>!re&&u(null),children:e.jsxs(Es,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(rr,{children:["Image Comments - ",v.filename]}),e.jsx(US,{imageUrl:v.url,imageAlt:v.filename,projectId:s.id,mediaId:v.id,userId:Se,userName:typeof window!="undefined"&&localStorage.getItem("userName")||"Demo User",comments:[],onAddComment:re=>{},onResolveComment:re=>{}})]})})]})})}function HS({project:s,onBack:t,onEdit:r,isLoggedIn:a=!1,onPin:n,isPinned:i=!1,autoRefresh:o=!1,onToggleAutoRefresh:l}){const[c,h]=b.useState(o),f=l?o:c,p=l||h,{toast:v}=da();jc(s==null?void 0:s.id);const u=b.useCallback(w=>he(this,null,function*(){try{v({title:"Creating moodboard...",description:"Please wait while we set up your moodboard."});const x=yield wt.createWorkspaceForProject(w.id,"moodboard");v({title:x.isNew?"Moodboard created":"Existing moodboard found",description:x.message}),v({title:"Ready to view",description:"Click here to go to the Moodboards tab",action:e.jsx(de,{variant:"default",size:"sm",onClick:()=>{const j=document.querySelector('[data-viewmode="moodboards"]');if(j)j.click();else{const _=new CustomEvent("navigate",{detail:{viewMode:"moodboards",workspaceId:x.workspace.id}});window.dispatchEvent(_)}},className:"bg-gradient-primary",children:"View Moodboards"}),duration:1e4})}catch(x){v({title:"Error",description:"Failed to create moodboard. Please try again.",variant:"destructive"})}}),[v]),C=b.useCallback(w=>he(this,null,function*(){try{v({title:"Creating whiteboard...",description:"Please wait while we set up your whiteboard."});const x=yield wt.createWorkspaceForProject(w.id,"whiteboard");v({title:x.isNew?"Whiteboard created":"Existing whiteboard found",description:x.message}),v({title:"Ready to view",description:"Click here to go to the Whiteboards tab",action:e.jsx(de,{variant:"default",size:"sm",onClick:()=>{const j=document.querySelector('[data-viewmode="whiteboards"]');if(j)j.click();else{const _=new CustomEvent("navigate",{detail:{viewMode:"whiteboards",workspaceId:x.workspace.id}});window.dispatchEvent(_)}},className:"bg-gradient-primary",children:"View Whiteboards"}),duration:1e4})}catch(x){v({title:"Error",description:"Failed to create whiteboard. Please try again.",variant:"destructive"})}}),[v]);return e.jsx(WS,{project:s,isLoggedIn:a,onEdit:r,onPin:n,isPinned:i,autoRefresh:f,onToggleAutoRefresh:p,onCreateOrNavigateMoodboard:u,onCreateOrNavigateWhiteboard:C,onBack:t})}var gu="Checkbox",[VS,Qk]=Sn(gu),[YS,rf]=VS(gu);function GS(s){const{__scopeCheckbox:t,checked:r,children:a,defaultChecked:n,disabled:i,form:o,name:l,onCheckedChange:c,required:h,value:f="on",internal_do_not_use_render:p}=s,[v,u]=Zo({prop:r,defaultProp:n!=null?n:!1,onChange:c,caller:gu}),[C,w]=b.useState(null),[x,j]=b.useState(null),_=b.useRef(!1),T=C?!!o||!!C.closest("form"):!0,U={checked:v,disabled:i,setChecked:u,control:C,setControl:w,name:l,form:o,value:f,hasConsumerStoppedPropagationRef:_,required:h,defaultChecked:oi(n)?!1:n,isFormControl:T,bubbleInput:x,setBubbleInput:j};return e.jsx(YS,Z(E({scope:t},U),{children:JS(p)?p(U):a}))}var R2="CheckboxTrigger",O2=b.forwardRef((i,n)=>{var o=i,{__scopeCheckbox:s,onKeyDown:t,onClick:r}=o,a=Ee(o,["__scopeCheckbox","onKeyDown","onClick"]);const{control:l,value:c,disabled:h,checked:f,required:p,setControl:v,setChecked:u,hasConsumerStoppedPropagationRef:C,isFormControl:w,bubbleInput:x}=rf(R2,s),j=Is(n,v),_=b.useRef(f);return b.useEffect(()=>{const T=l==null?void 0:l.form;if(T){const U=()=>u(_.current);return T.addEventListener("reset",U),()=>T.removeEventListener("reset",U)}},[l,u]),e.jsx(Qt.button,Z(E({type:"button",role:"checkbox","aria-checked":oi(f)?"mixed":f,"aria-required":p,"data-state":z2(f),"data-disabled":h?"":void 0,disabled:h,value:c},a),{ref:j,onKeyDown:qt(t,T=>{T.key==="Enter"&&T.preventDefault()}),onClick:qt(r,T=>{u(U=>oi(U)?!0:!U),x&&w&&(C.current=T.isPropagationStopped(),C.current||T.stopPropagation())})}))});O2.displayName=R2;var af=b.forwardRef((s,t)=>{const v=s,{__scopeCheckbox:r,name:a,checked:n,defaultChecked:i,required:o,disabled:l,value:c,onCheckedChange:h,form:f}=v,p=Ee(v,["__scopeCheckbox","name","checked","defaultChecked","required","disabled","value","onCheckedChange","form"]);return e.jsx(GS,{__scopeCheckbox:r,checked:n,defaultChecked:i,disabled:l,required:o,onCheckedChange:h,name:a,form:f,value:c,internal_do_not_use_render:({isFormControl:u})=>e.jsxs(e.Fragment,{children:[e.jsx(O2,Z(E({},p),{ref:t,__scopeCheckbox:r})),u&&e.jsx(q2,{__scopeCheckbox:r})]})})});af.displayName=gu;var F2="CheckboxIndicator",B2=b.forwardRef((s,t)=>{const o=s,{__scopeCheckbox:r,forceMount:a}=o,n=Ee(o,["__scopeCheckbox","forceMount"]),i=rf(F2,r);return e.jsx(Qi,{present:a||oi(i.checked)||i.checked===!0,children:e.jsx(Qt.span,Z(E({"data-state":z2(i.checked),"data-disabled":i.disabled?"":void 0},n),{ref:t,style:E({pointerEvents:"none"},s.style)}))})});B2.displayName=F2;var U2="CheckboxBubbleInput",q2=b.forwardRef((a,r)=>{var n=a,{__scopeCheckbox:s}=n,t=Ee(n,["__scopeCheckbox"]);const{control:i,hasConsumerStoppedPropagationRef:o,checked:l,defaultChecked:c,required:h,disabled:f,name:p,value:v,form:u,bubbleInput:C,setBubbleInput:w}=rf(U2,s),x=Is(r,w),j=Um(l),_=Dg(i);b.useEffect(()=>{const U=C;if(!U)return;const R=window.HTMLInputElement.prototype,$=Object.getOwnPropertyDescriptor(R,"checked").set,S=!o.current;if(j!==l&&$){const A=new Event("click",{bubbles:S});U.indeterminate=oi(l),$.call(U,oi(l)?!1:l),U.dispatchEvent(A)}},[C,j,l,o]);const T=b.useRef(oi(l)?!1:l);return e.jsx(Qt.input,Z(E({type:"checkbox","aria-hidden":!0,defaultChecked:c!=null?c:T.current,required:h,disabled:f,name:p,value:v,form:u},t),{tabIndex:-1,ref:x,style:Z(E(E({},t.style),_),{position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"})}))});q2.displayName=U2;function JS(s){return typeof s=="function"}function oi(s){return s==="indeterminate"}function z2(s){return oi(s)?"indeterminate":s?"checked":"unchecked"}const $i=b.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Ee(n,["className"]);return e.jsx(af,Z(E({ref:r,className:Ce("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s)},t),{children:e.jsx(B2,{className:Ce("flex items-center justify-center text-current"),children:e.jsx(ja,{className:"h-4 w-4"})})}))});$i.displayName=af.displayName;const Vp=[{id:"user-1",name:"John Smith",email:"john@example.com",avatar:"JS"},{id:"user-2",name:"Sarah Wilson",email:"sarah@example.com",avatar:"SW"},{id:"user-3",name:"Mike Chen",email:"mike@example.com",avatar:"MC"},{id:"user-4",name:"Emily Davis",email:"emily@example.com",avatar:"ED"}];function KS({moodboard:s,onSubmit:t,onCancel:r,availableTags:a}){var B,J,te;const{toast:n}=da(),i=b.useRef(null),[o,l]=b.useState([]),[c,h]=b.useState(!1);b.useEffect(()=>{he(this,null,function*(){h(!0);try{const ae=yield ia.getProjects();l(ae)}catch(ae){n({title:"Error",description:"Failed to load projects. Please try again.",variant:"destructive"})}finally{h(!1)}})},[n]);const[f,p]=b.useState({name:(s==null?void 0:s.name)||"",description:(s==null?void 0:s.description)||"",projectId:(s==null?void 0:s.projectId)||"",isPublic:((B=s==null?void 0:s.settings)==null?void 0:B.isPublic)||!1,allowComments:((J=s==null?void 0:s.settings)==null?void 0:J.allowComments)||!0,allowEditing:((te=s==null?void 0:s.settings)==null?void 0:te.allowEditing)||!0}),[v,u]=b.useState((s==null?void 0:s.tags)||[]),[C,w]=b.useState((s==null?void 0:s.collaborators)||["current-user"]),[x,j]=b.useState(()=>{if(!s)return[];const G=[];return s.images&&s.images.forEach(ae=>{G.push({id:ae.id,type:"image",url:ae.url,title:ae.filename||"Untitled Image",createdAt:new Date().toISOString()})}),s.links&&s.links.forEach(ae=>{G.push({id:ae.id,type:"link",url:ae.url,title:ae.title||ae.url,createdAt:new Date().toISOString()})}),G}),[_,T]=b.useState(""),[U,R]=b.useState(""),[V,$]=b.useState(!1),[S,A]=b.useState(""),[L,N]=b.useState(""),k=(G,ae)=>{p(ie=>Z(E({},ie),{[G]:ae}))},D=G=>{u(ae=>ae.includes(G)?ae.filter(ie=>ie!==G):[...ae,G])},I=()=>{L.trim()&&!v.includes(L.trim())&&(u(G=>[...G,L.trim()]),N(""))},H=G=>{u(ae=>ae.filter(ie=>ie!==G))},se=()=>{const G=Vp.find(ae=>ae.email===S);G&&!C.includes(G.id)?(w(ae=>[...ae,G.id]),A(""),$(!1),n({title:"Collaborator Added",description:`${G.name} has been added to the moodboard.`})):G?n({title:"Already Added",description:"This user is already a collaborator.",variant:"destructive"}):(n({title:"Invitation Sent",description:`An invitation has been sent to ${S}.`}),A(""),$(!1))},ce=G=>{G!=="current-user"&&w(ae=>ae.filter(ie=>ie!==G))},le=G=>{const ae=G.target.files;ae&&(Array.from(ae).forEach(ie=>{const ue=new FileReader;ue.onload=Ae=>{var je;const re={id:`item-${Date.now()}-${Math.random()}`,type:"image",url:(je=Ae.target)==null?void 0:je.result,title:ie.name,createdAt:new Date().toISOString()};j(Le=>[...Le,re])},ue.readAsDataURL(ie)}),i.current&&(i.current.value=""))},ne=()=>{if(_.trim()){const G={id:`item-${Date.now()}`,type:"link",url:_.trim(),title:U.trim()||_.trim(),createdAt:new Date().toISOString()};j(ae=>[...ae,G]),T(""),R("")}},fe=G=>{j(ae=>ae.filter(ie=>ie.id!==G))},Se=G=>{if(G.preventDefault(),!f.name.trim()){n({title:"Error",description:"Please enter a moodboard name.",variant:"destructive"});return}const ae=Z(E({},f),{tags:v,collaborators:C,settings:{isPublic:f.isPublic,allowComments:f.allowComments,allowEditing:f.allowEditing,autoSave:!0},items:x});t(ae),n({title:s?"Moodboard Updated":"Moodboard Created",description:`Your moodboard has been ${s?"updated":"created"} successfully.`})},M=G=>Vp.find(ae=>ae.id===G);return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("div",{className:"sticky top-0 z-10 bg-background/80 backdrop-blur-sm border-b",children:e.jsx("div",{className:"max-w-6xl mx-auto p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(de,{variant:"ghost",onClick:r,className:"hover-shimmer cyrus-ui",children:[e.jsx(qa,{className:"w-4 h-4 mr-2"}),"Back"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold bg-gradient-primary bg-clip-text text-transparent",children:s?"Edit Moodboard":"Create New Moodboard"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s?"Update your moodboard details and content":"Set up your visual inspiration board"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(de,{type:"button",variant:"outline",onClick:r,className:"hover-shimmer cyrus-ui",children:"Cancel"}),e.jsxs(de,{type:"submit",form:"moodboard-form",className:"button-primary-enhanced hover-shimmer cyrus-ui",children:[e.jsx(_m,{className:"w-4 h-4 mr-2"}),s?"Update Moodboard":"Create Moodboard"]})]})]})})}),e.jsx("div",{className:"max-w-6xl mx-auto p-4",children:e.jsx("form",{id:"moodboard-form",onSubmit:Se,className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-12 gap-4",children:[e.jsx("div",{className:"xl:col-span-4 space-y-4",children:e.jsxs(Xe,{className:"glass-card border-0 shadow-lg",children:[e.jsx(Dt,{className:"pb-3",children:e.jsxs(zt,{className:"flex items-center gap-2 text-lg",children:[e.jsx(yr,{className:"h-5 w-5 text-primary"}),"Basic Information"]})}),e.jsxs(Ze,{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(kt,{htmlFor:"name",className:"text-sm font-medium",children:"Moodboard Name *"}),e.jsx(It,{id:"name",placeholder:"e.g., Brand Identity Exploration",value:f.name,onChange:G=>k("name",G.target.value),className:"hover-shimmer cyrus-ui",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(kt,{htmlFor:"description",className:"text-sm font-medium",children:"Description"}),e.jsx(br,{id:"description",placeholder:"Describe the purpose and direction of this moodboard...",value:f.description,onChange:G=>k("description",G.target.value),className:"hover-shimmer cyrus-ui resize-none min-h-20",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(kt,{htmlFor:"project",className:"text-sm font-medium",children:"Project"}),e.jsxs(Ss,{value:f.projectId,onValueChange:G=>k("projectId",G),children:[e.jsx(ys,{className:"hover-shimmer cyrus-ui",children:e.jsx(ks,{placeholder:"Select a project (optional)"})}),e.jsx(bs,{children:c?e.jsx("div",{className:"p-2 text-center text-muted-foreground",children:"Loading projects..."}):o.length>0?o.map(G=>e.jsxs(at,{value:G.id,children:[G.name," - ",G.client||"No Client"]},G.id)):e.jsx("div",{className:"p-2 text-center text-muted-foreground",children:"No projects available"})})]})]}),e.jsxs("div",{className:"space-y-3 pt-2",children:[e.jsx(kt,{className:"text-sm font-medium",children:"Settings"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($i,{id:"isPublic",checked:f.isPublic,onCheckedChange:G=>k("isPublic",G)}),e.jsx(kt,{htmlFor:"isPublic",className:"text-sm",children:"Public moodboard"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($i,{id:"allowComments",checked:f.allowComments,onCheckedChange:G=>k("allowComments",G)}),e.jsx(kt,{htmlFor:"allowComments",className:"text-sm",children:"Allow comments"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($i,{id:"allowEditing",checked:f.allowEditing,onCheckedChange:G=>k("allowEditing",G)}),e.jsx(kt,{htmlFor:"allowEditing",className:"text-sm",children:"Allow collaborative editing"})]})]})]})]})]})}),e.jsxs("div",{className:"xl:col-span-5 space-y-6",children:[e.jsxs(Xe,{className:"glass-card border-0 shadow-lg",children:[e.jsx(Dt,{className:"pb-4",children:e.jsxs(zt,{className:"flex items-center gap-2 text-lg",children:[e.jsx(Im,{className:"w-5 h-5 text-primary"}),"Tags & Categories"]})}),e.jsxs(Ze,{className:"space-y-4",children:[a&&a.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(kt,{className:"text-sm font-medium",children:"Available Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.map(G=>e.jsx(nt,{variant:v.includes(G)?"default":"outline",className:"cursor-pointer hover-shimmer cyrus-ui transition-all",onClick:()=>D(G),children:G},G))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(kt,{className:"text-sm font-medium",children:"Add Custom Tag"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(It,{placeholder:"Enter tag name",value:L,onChange:G=>N(G.target.value),className:"hover-shimmer cyrus-ui",onKeyDown:G=>{G.key==="Enter"&&(G.preventDefault(),I())}}),e.jsx(de,{type:"button",onClick:I,size:"sm",className:"hover-shimmer cyrus-ui",children:e.jsx(ws,{className:"w-4 h-4"})})]})]}),v.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(kt,{className:"text-sm font-medium",children:"Selected Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:v.map(G=>e.jsxs(nt,{variant:"secondary",className:"hover-shimmer cyrus-ui",children:[G,e.jsx("button",{type:"button",onClick:()=>H(G),className:"ml-1 hover:text-destructive",children:e.jsx(Zs,{className:"w-3 h-3"})})]},G))})]})]})]}),e.jsxs(Xe,{className:"glass-card border-0 shadow-lg",children:[e.jsx(Dt,{className:"pb-4",children:e.jsxs(zt,{className:"flex items-center gap-2 text-lg",children:[e.jsx(Li,{className:"w-5 h-5 text-primary"}),"Content (",x.length," items)"]})}),e.jsxs(Ze,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(de,{type:"button",variant:"outline",onClick:()=>{var G;return(G=i.current)==null?void 0:G.click()},className:"hover-shimmer cyrus-ui",children:[e.jsx(mx,{className:"w-4 h-4 mr-2"}),"Upload Images"]}),e.jsxs(de,{type:"button",variant:"outline",onClick:()=>{_.trim()&&ne()},className:"hover-shimmer cyrus-ui",children:[e.jsx(ri,{className:"w-4 h-4 mr-2"}),"Add Link"]})]}),e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[e.jsx(It,{placeholder:"Link URL...",value:_,onChange:G=>T(G.target.value),className:"hover-shimmer cyrus-ui"}),e.jsx(It,{placeholder:"Link title (optional)",value:U,onChange:G=>R(G.target.value),className:"hover-shimmer cyrus-ui"})]})}),x.length>0&&e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:x.map(G=>e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"aspect-square rounded-lg overflow-hidden border glass-card",children:G.type==="image"?e.jsx("img",{src:G.url,alt:G.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-muted flex items-center justify-center",children:e.jsx(ri,{className:"w-8 h-8 text-muted-foreground"})})}),e.jsx(de,{type:"button",variant:"destructive",size:"sm",className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity w-6 h-6 p-0",onClick:()=>fe(G.id),children:e.jsx(Zs,{className:"w-3 h-3"})}),e.jsx("p",{className:"text-xs text-center mt-1 truncate",children:G.title})]},G.id))})]})]})]}),e.jsx("div",{className:"xl:col-span-3 space-y-6",children:e.jsxs(Xe,{className:"glass-card border-0 shadow-lg",children:[e.jsx(Dt,{className:"pb-4",children:e.jsxs(zt,{className:"flex items-center justify-between text-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(wr,{className:"w-5 h-5 text-primary"}),"Collaborators (",C.length,")"]}),e.jsx(de,{type:"button",variant:"outline",size:"sm",onClick:()=>$(!0),className:"hover-shimmer cyrus-ui",children:e.jsx(ws,{className:"w-4 h-4"})})]})}),e.jsx(Ze,{className:"space-y-3",children:C.map(G=>{const ae=M(G),ie=G==="current-user";return e.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-muted/20",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center text-sm font-medium",children:(ae==null?void 0:ae.avatar)||"U"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:(ae==null?void 0:ae.name)||"Current User"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:(ae==null?void 0:ae.email)||"current@example.com"})]})]}),!ie&&e.jsx(de,{type:"button",variant:"ghost",size:"sm",onClick:()=>ce(G),className:"text-destructive hover:text-destructive",children:e.jsx($r,{className:"w-4 h-4"})})]},G)})})]})})]})})}),e.jsx("input",{type:"file",ref:i,onChange:le,accept:"image/*",multiple:!0,className:"hidden"}),e.jsx(Bs,{open:V,onOpenChange:$,children:e.jsxs(Es,{className:"glass-card max-w-md",children:[e.jsx(qr,{children:e.jsxs(rr,{className:"flex items-center gap-2",children:[e.jsx(Lo,{className:"w-5 h-5"}),"Invite Collaborator"]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(kt,{htmlFor:"invite-email",children:"Email Address"}),e.jsx(It,{id:"invite-email",type:"email",placeholder:"colleague@example.com",value:S,onChange:G=>A(G.target.value),className:"hover-shimmer cyrus-ui"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(de,{type:"button",variant:"outline",onClick:()=>$(!1),children:"Cancel"}),e.jsx(de,{type:"button",onClick:se,className:"hover-shimmer cyrus-ui",children:"Send Invite"})]})]})]})})]})}function XS({moodboard:s,onBack:t,onEdit:r,onDelete:a,getUserById:n,onMoodboardUpdate:i}){var W;if(!s)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("p",{className:"text-muted-foreground",children:"Moodboard not found"})});const o=s.projectId||"";let l;try{l=jc(o)}catch(ve){l={notes:[],noteInput:"",setNoteInput:()=>{},handleAddNote:()=>{},handleEditNote:()=>{},handleReply:()=>{},replyTo:null,setReplyTo:()=>{},replyInput:"",setReplyInput:()=>{},editingNoteId:null,setEditingNoteId:()=>{},editInput:"",setEditInput:()=>{}}}const{notes:c,noteInput:h,setNoteInput:f,handleAddNote:p,handleEditNote:v,handleReply:u,replyTo:C,setReplyTo:w,replyInput:x,setReplyInput:j,editingNoteId:_,setEditingNoteId:T,editInput:U,setEditInput:R}=l,[V,$]=b.useState(null),[S,A]=b.useState(0),[L,N]=b.useState(!1),[k,D]=b.useState(!1),[I,H]=b.useState({title:"",url:""}),[se,ce]=b.useState(!1),[le,ne]=b.useState([]),{toast:fe}=da(),Se=b.useRef(null);rt.useEffect(()=>{function ve(){return he(this,null,function*(){if(o)try{const Pe=typeof window!="undefined"&&window.pulse2?window.pulse2:null;if(!Pe)return;const be=localStorage.getItem("jwtToken"),Be=`${Pe.apiUrl}/projects/${o}`,Fe=yield fetch(Be,{headers:{Authorization:`Bearer ${localStorage.getItem("jwtToken")}`,"X-WP-Nonce":Pe.nonce}});if(Fe.ok){const et=((yield Fe.json()).media||[]).filter(Je=>typeof Je.url=="string"&&/\.(png|jpe?g|gif|webp|svg)$/i.test(Je.url)).map(Je=>({id:`project-${Je.id}`,type:"image",url:Je.url,filename:Je.filename||"Project Image"}));ne(et)}else{const $e=yield Fe.text()}}catch(Pe){}})}ve()},[o]);const M=n((s==null?void 0:s.createdBy)||"unknown"),J=[...(s==null?void 0:s.images)||[],...le],te=J.length,G=((W=s==null?void 0:s.links)==null?void 0:W.length)||0,ae=(c==null?void 0:c.length)||0,ie=()=>{if(!I.url){fe({title:"Missing URL",description:"Please enter a URL for the link",variant:"destructive"});return}const ve={id:`link-${Date.now()}`,type:"link",url:I.url,title:I.title||I.url},Pe=Z(E({},s),{links:[...s.links||[],ve]});i(Pe),H({title:"",url:""}),D(!1);try{workspaceService.persistMoodboardState(s.id,{links:(Pe.links||[]).map(be=>({id:be.id,url:be.url,title:be.title}))})}catch(be){}fe({description:"Link added successfully"})},ue=ve=>he(this,null,function*(){var be;const Pe=(be=ve.target.files)==null?void 0:be[0];if(Pe){try{let Be,Fe;const $e=typeof window!="undefined"&&"pulse2"in window?window.pulse2:null;if($e){const et=new FormData;et.append("file",Pe);const Je=yield fetch($e.mediaUrl,{method:"POST",headers:{"X-WP-Nonce":$e.nonce},body:et});if(!Je.ok){const ft=yield Je.text();throw new Error(`Failed to upload media: ${Je.status} ${Je.statusText}`)}const Re=yield Je.json();Be=Re.source_url,Fe=Re.id.toString()}else Be=URL.createObjectURL(Pe),Fe=`image-${Date.now()}`;const Ke={id:Fe,type:"image",url:Be,filename:Pe.name},Qe=Z(E({},s),{images:[...s.images||[],Ke]});try{if($e&&!(yield fetch(`${$e.apiUrl}/workspaces/${s.id}`,{method:"PUT",headers:{"Content-Type":"application/json","X-WP-Nonce":$e.nonce},body:JSON.stringify(Qe)})).ok)throw new Error("Failed to save moodboard")}catch(et){}i(Qe),ce(!1);try{workspaceService.persistMoodboardState(s.id,{images:(Qe.images||[]).map(et=>({id:et.id,url:et.url,filename:et.filename}))})}catch(et){}fe({description:"Image added successfully"})}catch(Be){fe({title:"Upload Failed",description:Be instanceof Error?Be.message:"Failed to upload image. Please try again.",variant:"destructive"})}Se.current&&(Se.current.value="")}}),Ae=(ve,Pe)=>{$(ve),A(Pe),N(!0)},re=()=>{if(!J||J.length===0)return;const ve=S>0?S-1:J.length-1;A(ve),$(J[ve])},je=()=>{if(!J||J.length===0)return;const ve=S<J.length-1?S+1:0;A(ve),$(J[ve])},Le=ve=>{const Pe=Z(E({},s),{images:(s.images||[]).filter(be=>be.id!==ve)});i(Pe);try{workspaceService.persistMoodboardState(s.id,{images:(Pe.images||[]).map(be=>({id:be.id,url:be.url,filename:be.filename}))})}catch(be){}fe({description:"Image removed successfully"})},X=ve=>{const Pe=Z(E({},s),{links:(s.links||[]).filter(be=>be.id!==ve)});i(Pe);try{workspaceService.persistMoodboardState(s.id,{links:(Pe.links||[]).map(be=>({id:be.id,url:be.url,title:be.title}))})}catch(be){}fe({description:"Link removed successfully"})},Q=ve=>{const Pe=document.createElement("a");Pe.href=ve.url,Pe.download=ve.filename||"image.jpg",document.body.appendChild(Pe),Pe.click(),document.body.removeChild(Pe)};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex flex-wrap justify-between items-center mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(de,{variant:"ghost",size:"sm",onClick:t,children:e.jsx(qa,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h1",{className:"text-2xl font-bold",children:s.name}),s.tags&&s.tags.length>0&&e.jsx("div",{className:"flex gap-1",children:s.tags.map(ve=>e.jsx(nt,{variant:"secondary",className:"text-xs",children:ve},ve))})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Sa,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:M.name})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Li,{className:"h-3.5 w-3.5"}),e.jsxs("span",{children:[te," ",te===1?"image":"images"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ri,{className:"h-3.5 w-3.5"}),e.jsxs("span",{children:[G," ",G===1?"link":"links"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Tr,{className:"h-3.5 w-3.5"}),e.jsxs("span",{children:[ae," ",ae===1?"note":"notes"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Cs,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:Jt(s.createdAt,"MMMM d, yyyy")})]})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-2 md:mt-0",children:[e.jsxs(de,{variant:"outline",size:"sm",onClick:r,children:[e.jsx(sc,{className:"h-4 w-4 mr-2"}),"Edit Moodboard"]}),e.jsxs(de,{variant:"outline",size:"sm",onClick:()=>ce(!0),children:[e.jsx(Li,{className:"h-4 w-4 mr-2"}),"Add Image"]}),e.jsxs(de,{variant:"outline",size:"sm",onClick:()=>D(!0),children:[e.jsx(ri,{className:"h-4 w-4 mr-2"}),"Add Link"]}),e.jsxs(de,{variant:"destructive",size:"sm",onClick:a,children:[e.jsx($r,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h2",{className:"text-xl font-bold",children:["Images (",te,")"]}),e.jsx("input",{type:"file",ref:Se,className:"hidden",accept:"image/*",onChange:ue}),e.jsxs(de,{size:"sm",variant:"ghost",onClick:()=>{var ve;return(ve=Se.current)==null?void 0:ve.click()},children:[e.jsx(ws,{className:"h-4 w-4 mr-2"}),"Upload"]})]}),J.length>0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:J.map((ve,Pe)=>e.jsxs(Xe,{className:"overflow-hidden group relative",children:[e.jsx("div",{className:"aspect-video cursor-pointer overflow-hidden",onClick:()=>Ae(ve,Pe),children:e.jsx("img",{src:ve.url,alt:`Image ${Pe+1}`,className:"w-full h-full object-cover transition-transform group-hover:scale-105"})}),e.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx(de,{size:"icon",variant:"secondary",className:"h-8 w-8 rounded-full bg-black/50 hover:bg-black/70",onClick:be=>{be.stopPropagation(),Q(ve)},children:e.jsx(_h,{className:"h-4 w-4 text-white"})}),e.jsx(de,{size:"icon",variant:"destructive",className:"h-8 w-8 rounded-full bg-black/50 hover:bg-destructive/90",onClick:be=>{be.stopPropagation(),Le(ve.id)},children:e.jsx($r,{className:"h-4 w-4 text-white"})})]})})]},ve.id))}):e.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg",children:[e.jsx(Li,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Images Yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Upload images to start building your moodboard"}),e.jsxs(de,{onClick:()=>{var ve;return(ve=Se.current)==null?void 0:ve.click()},children:[e.jsx(ws,{className:"h-4 w-4 mr-2"}),"Add Images"]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h2",{className:"text-xl font-bold",children:["Links (",G,")"]}),e.jsxs(de,{size:"sm",variant:"ghost",onClick:()=>D(!0),children:[e.jsx(ws,{className:"h-4 w-4 mr-2"}),"Add Link"]})]}),s.links&&s.links.length>0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:s.links.map(ve=>e.jsx(Xe,{className:"group relative",children:e.jsxs(Ze,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-muted rounded-md p-2",children:e.jsx(ri,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium mb-1 truncate",children:ve.title}),e.jsx("a",{href:ve.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline truncate block",children:ve.url})]})]}),e.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(de,{size:"icon",variant:"destructive",className:"h-8 w-8 rounded-full",onClick:()=>X(ve.id),children:e.jsx($r,{className:"h-4 w-4"})})})]})},ve.id))}):e.jsxs("div",{className:"text-center py-8 border-2 border-dashed border-muted-foreground/20 rounded-lg",children:[e.jsx(ri,{className:"h-12 w-12 text-muted-foreground/40 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Links Yet"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Add links to resources and inspiration"}),e.jsxs(de,{variant:"outline",onClick:()=>D(!0),children:[e.jsx(ws,{className:"h-4 w-4 mr-2"}),"Add Link"]})]})]})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(Xe,{className:"glass-card",children:[e.jsx(Dt,{children:e.jsxs(zt,{className:"flex items-center gap-2",children:[e.jsx(Tr,{className:"h-5 w-5"}),"Notes (",ae,")"]})}),e.jsxs(Ze,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(br,{placeholder:"Add a note...",value:h,onChange:ve=>f(ve.target.value),className:"min-h-20"}),e.jsxs(de,{onClick:p,disabled:!h.trim(),size:"sm",className:"w-full",children:[e.jsx(jn,{className:"h-4 w-4 mr-2"}),"Add Note"]})]}),e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:c.length>0?c.map(ve=>{var Pe;return e.jsxs("div",{className:"p-3 bg-muted/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-primary/20 flex items-center justify-center text-xs font-medium",children:((Pe=ve.authorName)==null?void 0:Pe.charAt(0).toUpperCase())||"U"}),e.jsx("span",{className:"text-sm font-medium",children:ve.authorName||"User"})]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:r5(ve.createdAt)})]}),_===ve.id?e.jsxs("div",{className:"space-y-2",children:[e.jsx(br,{value:U,onChange:be=>R(be.target.value),className:"text-sm resize-none min-h-[60px]"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(de,{size:"sm",onClick:()=>v(ve.id),disabled:!U.trim(),children:"Save"}),e.jsx(de,{size:"sm",variant:"outline",onClick:()=>{T(null),R("")},children:"Cancel"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm",children:ve.content}),e.jsxs("div",{className:"flex gap-1 mt-2",children:[e.jsx(de,{size:"sm",variant:"outline",onClick:()=>{T(ve.id),R(ve.content)},className:"h-6 text-xs",children:"Edit"}),e.jsx(de,{size:"sm",variant:"outline",onClick:()=>u(ve.id),className:"h-6 text-xs",children:"Reply"})]})]})]},ve.id)}):e.jsx("div",{className:"text-center py-4 text-muted-foreground text-sm",children:"No notes yet. Be the first to add a note!"})})]})]})})]}),L&&V&&J.length>0&&e.jsx(Bs,{open:L,onOpenChange:N,children:e.jsx(Es,{className:"max-w-[95vw] max-h-[95vh] p-0 overflow-hidden",onClick:ve=>ve.stopPropagation(),children:e.jsxs("div",{className:"relative flex items-center justify-center min-h-[70vh] bg-background/95",children:[e.jsx(de,{variant:"ghost",size:"sm",className:"absolute top-4 right-4 z-10 bg-background/80 hover:bg-background",onClick:ve=>{ve.stopPropagation(),N(!1)},children:e.jsx(Zs,{className:"h-4 w-4"})}),J.length>1&&e.jsxs(e.Fragment,{children:[e.jsx(de,{variant:"ghost",size:"sm",className:"absolute left-4 top-1/2 -translate-y-1/2 z-10 bg-background/80 hover:bg-background",onClick:ve=>{ve.stopPropagation(),re()},children:e.jsx(vc,{className:"h-4 w-4"})}),e.jsx(de,{variant:"ghost",size:"sm",className:"absolute right-4 top-1/2 -translate-y-1/2 z-10 bg-background/80 hover:bg-background",onClick:ve=>{ve.stopPropagation(),je()},children:e.jsx(tn,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"flex items-center justify-center w-full h-full p-8",children:e.jsx("img",{src:V.url,alt:V.filename||`Image ${S+1}`,className:"max-w-full max-h-[85vh] object-contain"})}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-background/80 backdrop-blur-sm p-4 flex justify-between items-center",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs(nt,{variant:"outline",className:"bg-background/50",children:[S+1," / ",s.images.length]}),s.tags&&s.tags.length>0&&e.jsx("div",{className:"flex gap-1",children:s.tags.map(ve=>e.jsx(nt,{variant:"secondary",className:"text-xs",children:ve},ve))}),V.filename&&e.jsx(nt,{variant:"outline",className:"text-xs",children:V.filename})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(de,{variant:"outline",size:"sm",onClick:()=>{navigator.clipboard.writeText(V.url),fe({title:"Link copied!",description:"The image URL has been copied to your clipboard."})},children:[e.jsx(tc,{className:"h-4 w-4 mr-2"}),"Copy URL"]}),e.jsxs(de,{variant:"outline",size:"sm",onClick:()=>Q(V),children:[e.jsx(_h,{className:"h-4 w-4 mr-2"}),"Download"]}),e.jsxs(de,{variant:"destructive",size:"sm",onClick:()=>{if(Le(V.id),s.images&&s.images.length===1)N(!1);else if(s.images&&s.images.length>1){const ve=S>=s.images.length-1?0:S;A(ve),$(s.images[ve])}},children:[e.jsx($r,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})})}),e.jsx(Bs,{open:k,onOpenChange:D,children:e.jsxs(Es,{children:[e.jsx(rr,{children:"Add Link"}),e.jsxs("div",{className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"linkTitle",className:"text-sm font-medium",children:"Title"}),e.jsx(It,{id:"linkTitle",placeholder:"Enter link title",value:I.title,onChange:ve=>H(Z(E({},I),{title:ve.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"linkUrl",className:"text-sm font-medium",children:"URL"}),e.jsx(It,{id:"linkUrl",placeholder:"https://",value:I.url,onChange:ve=>H(Z(E({},I),{url:ve.target.value}))})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(de,{variant:"outline",onClick:()=>{D(!1),H({title:"",url:""})},children:"Cancel"}),e.jsx(de,{onClick:ie,children:"Add Link"})]})]})]})}),e.jsx(Bs,{open:se,onOpenChange:ce,children:e.jsxs(Es,{children:[e.jsx(rr,{children:"Add Image"}),e.jsxs("div",{className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Upload Image"}),e.jsxs("div",{className:"border-2 border-dashed rounded-lg p-8 text-center",children:[e.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:ue,id:"image-upload-dialog"}),e.jsxs("label",{htmlFor:"image-upload-dialog",className:"cursor-pointer flex flex-col items-center",children:[e.jsx(Li,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("p",{className:"font-medium mb-1",children:"Click to upload"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"SVG, PNG, JPG or GIF (max 10MB)"})]})]})]}),e.jsx("div",{className:"flex justify-end gap-2 pt-4",children:e.jsx(de,{variant:"outline",onClick:()=>ce(!1),children:"Cancel"})})]})]})})]})}function $2(s){const t=bc(),r=typeof window!="undefined",{data:a,isLoading:n,error:i}=rl({queryKey:["workspaces","all"],queryFn:()=>he(this,null,function*(){return wt.fetchAllWorkspaces()}),enabled:r}),o=Ba({mutationFn:l=>he(this,null,function*(){return wt.createWorkspaceForProject(l.projectId,l.type)}),onSuccess:(l,c)=>{t.invalidateQueries({queryKey:["workspaces",c.projectId]}),t.invalidateQueries({queryKey:["workspaces","all"]})}});return{workspaces:a||[],isLoading:n,error:i,createWorkspaceForProject:o.mutateAsync,invalidate:()=>{t.invalidateQueries({queryKey:["workspaces","all"]})}}}const QS=[{id:"user-1",name:"John Smith",email:"john@example.com",avatar:"JS"},{id:"user-2",name:"Sarah Wilson",email:"sarah@example.com",avatar:"SW"},{id:"user-3",name:"Mike Chen",email:"mike@example.com",avatar:"MC"},{id:"user-4",name:"Emily Davis",email:"emily@example.com",avatar:"ED"}],ZS=["Brand Identity","Color Palette","Typography","Photography","Illustration","UI/UX","Product Design","Marketing","Campaign","Concept","Inspiration"];function ek({className:s,projects:t=[],onEnterFocusMode:r,onExitFocusMode:a}){const[n,i]=b.useState("list"),[o,l]=b.useState([]),[c,h]=b.useState(null),[f,p]=b.useState(""),[v,u]=b.useState("all"),{toast:C}=da(),{workspaces:w,isLoading:x,error:j,createWorkspaceForProject:_,invalidate:T}=$2();b.useEffect(()=>{j&&C({title:"Error",description:"Failed to load moodboards",variant:"destructive"})},[j,C]),b.useEffect(()=>{const I=(w||[]).filter(H=>H.type==="moodboard");l(I)},[w]);const U=b.useMemo(()=>o.filter(I=>{var se,ce;const H=I.name.toLowerCase().includes(f.toLowerCase())||((se=I.description)==null?void 0:se.toLowerCase().includes(f.toLowerCase()))||((ce=I.tags)==null?void 0:ce.some(le=>le.toLowerCase().includes(f.toLowerCase())));return v==="archived"?I.isArchived&&H:v==="active"?!I.isArchived&&H:H}),[o,f,v]),R=I=>{l(H=>H.map(se=>se.id===I.id?I:se)),h(I),i("detail"),r==null||r();try{wt.persistMoodboardState(I.id,{images:(I.images||[]).map(H=>({id:H.id,url:H.url,filename:H.filename})),links:(I.links||[]).map(H=>({id:H.id,url:H.url,title:H.title}))})}catch(H){}},V=I=>{const H=localStorage.getItem("userId"),se=localStorage.getItem("userDisplayName");return I===H||I==="current-user"?{id:H||I,name:se||"Current User",email:"current@example.com",avatar:(se==null?void 0:se.charAt(0))||"CU"}:QS.find(le=>le.id===I)||{id:I,name:"Unknown User",email:"",avatar:"UN"}},$=()=>{h(null),i("create")},S=I=>{h(I),i("edit")},A=I=>{h(I),i("detail"),r==null||r()},L=I=>he(this,null,function*(){try{yield wt.deleteWorkspace(I),yield T(),C({description:"Moodboard deleted successfully"}),i("list"),a==null||a()}catch(H){C({title:"Error",description:"Failed to delete moodboard",variant:"destructive"})}}),N=()=>{h(null),i("list"),a==null||a()},k=I=>he(this,null,function*(){try{setLoading(!0);const H=yield _({projectId:I.id,type:"moodboard"});C({title:H.isNew?"Moodboard created":"Existing moodboard found",description:H.message}),yield T(),A(H.workspace)}catch(H){C({title:"Error",description:"Failed to create moodboard",variant:"destructive"})}finally{setLoading(!1)}}),D=I=>{const H=localStorage.getItem("userId")||"current-user";if(localStorage.getItem("userDisplayName"),n==="edit"&&c){const se=[],ce=[];I.items&&I.items.forEach(ne=>{ne.type==="image"?se.push({id:`img-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,type:"image",url:ne.url,filename:ne.url.split("/").pop()||"image"}):ce.push({id:`link-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,type:"link",url:ne.url,title:ne.title||ne.url})});const le=Z(E({},c),{name:I.name,description:I.description||c.description,projectId:I.projectId||c.projectId,tags:I.tags||c.tags,updatedAt:new Date().toISOString(),settings:Z(E({},c.settings),{isPublic:I.isPublic!==void 0?I.isPublic:c.settings.isPublic}),images:[...c.images||[],...se],links:[...c.links||[],...ce]});R(le),C({description:"Moodboard updated successfully"})}else{const se=[],ce=[];I.items&&I.items.forEach(ne=>{ne.type==="image"?se.push({id:`img-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,type:"image",url:ne.url,filename:ne.url.split("/").pop()||"image"}):ce.push({id:`link-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,type:"link",url:ne.url,title:ne.title||ne.url})});const le={id:`moodboard-${Date.now()}`,projectId:I.projectId||"",name:I.name,type:"moodboard",description:I.description||"",tags:I.tags||[],createdBy:H,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),isArchived:!1,collaborators:[H],settings:{isPublic:I.isPublic||!1,allowComments:!0,allowEditing:!0,autoSave:!0},images:se,links:ce,comments:[]};l(ne=>[...ne,le]),wt.workspaces.push(le),h(le),i("detail"),r==null||r(),C({description:"New moodboard created successfully"})}};return n==="detail"&&c?e.jsx(XS,{moodboard:c,onBack:N,onEdit:()=>S(c),onDelete:()=>L(c.id),getUserById:V,onMoodboardUpdate:R}):n==="create"?e.jsx("div",{className:Ce("p-6",s),children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(de,{variant:"ghost",size:"sm",onClick:()=>i("list"),children:e.jsx(qa,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Create Moodboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Choose how you want to create your moodboard"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-4xl",children:[e.jsxs(Xe,{className:"cursor-pointer transition-all hover:shadow-md hover:scale-[1.02] border-l-4 border-l-purple-500",children:[e.jsxs(Dt,{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"p-4 bg-purple-100 rounded-full",children:e.jsx(yr,{className:"h-8 w-8 text-purple-600"})})}),e.jsx(zt,{className:"text-xl",children:"Standalone Moodboard"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Create a new moodboard from scratch without linking to a specific project"})]}),e.jsx(Ze,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("span",{className:"text-muted-foreground",children:"Features:"})}),e.jsxs("ul",{className:"text-xs text-muted-foreground space-y-1",children:[e.jsx("li",{children:"• Custom name and description"}),e.jsx("li",{children:"• Add images and links manually"}),e.jsx("li",{children:"• Collaborative editing"}),e.jsx("li",{children:"• Share with team members"})]})]}),e.jsx(de,{className:"w-full button-primary-enhanced hover-shimmer cyrus-ui",onClick:()=>{const I=localStorage.getItem("userId")||"current-user";localStorage.getItem("userDisplayName");const H={id:`moodboard-${Date.now()}`,projectId:"",name:"New Moodboard",type:"moodboard",description:"",tags:[],createdBy:I,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),isArchived:!1,collaborators:[I],settings:{isPublic:!1,allowComments:!0,allowEditing:!0,autoSave:!0},images:[],links:[],comments:[]};l(se=>[...se,H]),wt.workspaces.push(H),h(H),i("edit"),C({description:"New moodboard created successfully"})},children:"Create Standalone"})]})})]}),e.jsxs(Xe,{className:"cursor-pointer transition-all hover:shadow-md hover:scale-[1.02] border-l-4 border-l-blue-500",children:[e.jsxs(Dt,{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"p-4 bg-blue-100 rounded-full",children:e.jsx(ws,{className:"h-8 w-8 text-blue-600"})})}),e.jsx(zt,{className:"text-xl",children:"Project-Based Moodboard"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Create a moodboard linked to an existing project with its media and links"})]}),e.jsx(Ze,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("span",{className:"text-muted-foreground",children:"Features:"})}),e.jsxs("ul",{className:"text-xs text-muted-foreground space-y-1",children:[e.jsx("li",{children:"• Auto-populated with project media"}),e.jsx("li",{children:"• Synced with project updates"}),e.jsx("li",{children:"• Project team collaboration"}),e.jsx("li",{children:"• Client presentation ready"})]})]}),e.jsx(de,{className:"w-full button-primary-enhanced hover-shimmer cyrus-ui",onClick:()=>i("create-project-based"),children:"Select Project"})]})})]})]})]})}):n==="create-project-based"?e.jsx("div",{className:Ce("p-6",s),children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(de,{variant:"ghost",size:"sm",onClick:()=>i("create"),children:e.jsx(qa,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Select Project"}),e.jsx("p",{className:"text-muted-foreground",children:"Choose a project to create a moodboard from"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(I=>e.jsxs(Xe,{className:"cursor-pointer transition-all hover:shadow-md hover:scale-[1.02] border-l-4",style:{borderLeftColor:I.status==="delivered"?"#10b981":"#3b82f6"},onClick:()=>k(I),children:[e.jsxs(Dt,{children:[e.jsx(zt,{className:"text-lg",children:I.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:I.client})]}),e.jsx(Ze,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Status"}),e.jsx(nt,{variant:"outline",children:I.status})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Created"}),e.jsx("span",{children:Jt(I.createdAt)})]}),e.jsx("div",{className:"pt-2",children:e.jsx(de,{className:"w-full button-primary-enhanced hover-shimmer cyrus-ui",size:"sm",children:"Create Moodboard"})})]})})]},I.id))}),t.length===0&&!loading&&e.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg",children:[e.jsx("div",{className:"text-gray-400 mb-4",children:e.jsx("svg",{className:"h-12 w-12 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Projects Available"}),e.jsx("p",{className:"text-gray-500",children:"Create a project first to set up a moodboard"})]}),loading&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading projects..."})]})]})}):n==="edit"&&c?e.jsx(KS,{moodboard:c,onSubmit:D,onCancel:N,availableTags:ZS}):e.jsxs("div",{className:Ce("p-6",s),children:[e.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Moodboards"}),e.jsx("p",{className:"text-muted-foreground",children:"Create and organize visual inspiration for your projects"})]}),e.jsxs(de,{onClick:$,className:"button-primary-enhanced hover-shimmer cyrus-ui",children:[e.jsx(ws,{className:"h-4 w-4 mr-2"}),"New Moodboard"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"md:col-span-2 relative",children:[e.jsx(bn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),e.jsx(It,{placeholder:"Search moodboards...",className:"pl-10",value:f,onChange:I=>p(I.target.value)})]}),e.jsx("div",{className:"md:col-span-1",children:e.jsxs(Ss,{value:v,onValueChange:u,children:[e.jsx(ys,{children:e.jsx(ks,{placeholder:"Filter by status"})}),e.jsxs(bs,{children:[e.jsx(at,{value:"all",children:"All Moodboards"}),e.jsx(at,{value:"active",children:"Active"}),e.jsx(at,{value:"archived",children:"Archived"})]})]})})]}),x?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading moodboards..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:U.map(I=>{var ce,le,ne;const H=t.find(fe=>fe.id===I.projectId);H&&H.name,H&&H.client;const se=V(I.createdBy);return(ce=I.images)!=null&&ce.length,(le=I.links)!=null&&le.length,(ne=I.comments)!=null&&ne.length,e.jsxs(Xe,{className:"cursor-pointer transition-all hover:shadow-md hover:scale-[1.01] overflow-hidden",onClick:()=>A(I),children:[e.jsx("div",{className:"h-48 grid grid-cols-2 gap-1 bg-gray-100 overflow-hidden",children:(()=>{var B;const fe=((H==null?void 0:H.media)||[]).filter(J=>/\.(png|jpe?g|gif|webp|svg)$/i.test(J.url)).slice(0,3),Se=((B=I.images)==null?void 0:B.slice(0,3))||[],M=fe.length>0?fe:Se;return M.length===0?e.jsx("div",{className:"col-span-2 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(yr,{className:"h-12 w-12 mx-auto text-gray-400 mb-2"}),e.jsx("p",{className:"text-sm text-gray-500",children:"No images yet"})]})}):M.map((J,te)=>e.jsx("div",{className:`${te===0&&M.length>1?"row-span-2":""} relative overflow-hidden`,children:e.jsx("img",{src:J.url,alt:J.filename||`Image ${te+1}`,className:"w-full h-full object-cover"})},te))})()}),e.jsx(Dt,{className:"pb-2",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:I.name}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mt-1",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Sa,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:se.name})]}),e.jsx("span",{children:"•"}),e.jsx("span",{children:Jt(I.createdAt,"MMM d, yyyy")}),H&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsx("span",{children:H.name})]})]})]}),e.jsx(yr,{className:"h-5 w-5 text-muted-foreground"})]})})]},I.id)})}),U.length===0&&e.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg",children:[e.jsx(yr,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Moodboards Found"}),e.jsx("p",{className:"text-gray-500 mb-4",children:f?"No moodboards match your search. Try different keywords.":"Create your first moodboard to start organizing visual inspiration."}),e.jsxs(de,{onClick:$,children:[e.jsx(ws,{className:"h-4 w-4 mr-2"}),"Create Moodboard"]})]})]})]})}const tk=({whiteboard:s,onBack:t,onPin:r,isPinned:a})=>{da();const{notes:n,noteInput:i,setNoteInput:o,handleAddNote:l,handleEditNote:c,handleReply:h,replyTo:f,setReplyTo:p,replyInput:v,setReplyInput:u,editingNoteId:C,setEditingNoteId:w,editInput:x,setEditInput:j}=jc(s.projectId),[_,T]=b.useState([]),[U,R]=b.useState([]);b.useEffect(()=>{s.categories&&Array.isArray(s.categories)?T(s.categories):T([{id:"cat-default",name:"Images",color:"#3b82f6",isMinimized:!1,images:[]}])},[s.id,s.categories]),b.useEffect(()=>{let Ne=!0;function De(){return he(this,null,function*(){try{let Ye=yield wt.getWorkspaceCategories(s.id);(!Array.isArray(Ye)||Ye.length===0)&&(Ye=[yield wt.createWorkspaceCategory(s.id,{name:"Images",color:"#3b82f6"})]);const Ge=yield wt.getWorkspaceImages(s.id),ot={};for(const Et of Ge){const Zt=Et.categoryId||Ye[0].id;ot[Zt]||(ot[Zt]=[]),ot[Zt].push(Et)}const xt=Ye.map(Et=>({id:String(Et.id),name:Et.name,color:Et.color||"#3b82f6",isMinimized:!1,images:(ot[Et.id]||[]).map(Zt=>({id:String(Zt.id),url:Zt.url,filename:Zt.filename||"image",categoryId:String(Et.id),label:Zt.filename||"image",pins:Zt.pins||[],comments:Zt.comments||[],uploadedBy:String(Zt.uploadedBy||""),uploadedAt:Zt.uploadedAt||new Date().toISOString()}))}));Ne&&T(xt)}catch(Ye){}})}return typeof window!="undefined"&&window.pulse2&&De(),()=>{Ne=!1}},[s.id]),b.useEffect(()=>{function Ne(){return he(this,null,function*(){if(s.projectId)try{const De=typeof window!="undefined"&&window.pulse2?window.pulse2:null;if(!De)return;const Ye=localStorage.getItem("jwtToken"),Ge=`${De.apiUrl}/projects/${s.projectId}`,ot=yield fetch(Ge,{headers:{Authorization:`Bearer ${localStorage.getItem("jwtToken")}`,"X-WP-Nonce":De.nonce}});if(ot.ok){const is=((yield ot.json()).media||[]).filter(Rt=>typeof Rt.url=="string"&&/\.(png|jpe?g|gif|webp|svg)$/i.test(Rt.url)).map(Rt=>({id:`project-${Rt.id}`,url:Rt.url,filename:Rt.filename||"Project Image",categoryId:"project-images",label:Rt.filename||"Project Image",pins:[],comments:[],uploadedBy:"project",uploadedAt:new Date().toISOString()}));R(is),T(Rt=>{if(Rt.length===0)return Rt;const cs=[...Rt],Us=cs[0];return cs[0]=Z(E({},cs[0]),{images:[...is,...cs[0].images]}),cs})}else{const xt=yield ot.text()}}catch(De){}})}Ne()},[s.projectId]),b.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]);const[V,$]=b.useState(null),[S,A]=b.useState(1),[L,N]=b.useState({x:0,y:0}),[k,D]=b.useState(!1),[I,H]=b.useState({x:void 0,y:void 0}),[se]=b.useState(5),[ce,le]=b.useState({x:0,y:0}),[ne,fe]=b.useState(!1),[Se,M]=b.useState(!1),[B,J]=b.useState(""),[te,G]=b.useState(!1),[ae,ie]=b.useState(null),[ue,Ae]=b.useState(""),[re,je]=b.useState("pins"),[Le,X]=b.useState(null),[Q,W]=b.useState(null),[ve,Pe]=b.useState(""),[be,Be]=b.useState(""),[Fe,$e]=b.useState(null),[Ke,Qe]=b.useState(!1),[et,Je]=b.useState(""),[Re,ft]=b.useState(null),[mt,St]=b.useState(null),[Ve,es]=b.useState(!1),[jt,Ls]=b.useState(!0),Ft=b.useRef(null),Lt=()=>{const Ne=localStorage.getItem("userId")||"current-user",De=localStorage.getItem("userDisplayName")||"Current User";return{id:Ne,name:De,avatar:"https://i.pravatar.cc/150?u=current-user"}},lr=Ne=>{const De=localStorage.getItem("userId"),Ye=localStorage.getItem("userDisplayName");return Ne===De||Ne==="current-user"?{id:De||Ne,name:Ye||"Current User",email:"current@example.com"}:[{id:"user-1",name:"John Smith",email:"john@example.com"},{id:"user-2",name:"Sarah Wilson",email:"sarah@example.com"},{id:"user-3",name:"Mike Chen",email:"mike@example.com"},{id:"user-4",name:"Emily Davis",email:"emily@example.com"}].find(xt=>xt.id===Ne)||{id:Ne,name:"Unknown User",email:""}},Yt=b.useRef(null),pr=()=>{if(B.trim()){const Ne={id:`cat-${Date.now()}`,name:B.trim(),color:"#8b5cf6",isMinimized:!1,images:[]};T(De=>[...De,Ne]),J(""),G(!1),Ms.logActivity({type:"whiteboard_updated",title:"Added category",description:`Added new category "${B.trim()}" to whiteboard.`,projectId:s.projectId,userId:Lt().id})}},rs=Ne=>{window.confirm("Are you sure you want to delete this category and all its images?")&&(T(De=>De.filter(Ye=>Ye.id!==Ne)),Ms.logActivity({type:"whiteboard_updated",title:"Deleted category",description:`Deleted category with ID: ${Ne}`,projectId:s.projectId,userId:Lt().id}))},Hs=(Ne,De)=>{De.trim()&&(T(Ye=>Ye.map(Ge=>Ge.id===Ne?Z(E({},Ge),{name:De.trim()}):Ge)),ie(null),Ae(""))},cr=Ne=>{T(De=>De.map(Ye=>Ye.id===Ne?Z(E({},Ye),{isMinimized:!Ye.isMinimized}):Ye))},Kt=(Ne,De)=>{T(Ge=>{const ot=Ge.findIndex(is=>is.id===Ne);if(ot===-1)return Ge;const xt=[...Ge],[Et]=xt.splice(ot,1);let Zt;switch(De){case"up":Zt=Math.max(0,ot-1);break;case"down":Zt=Math.min(xt.length,ot+1);break;case"top":Zt=0;break;case"bottom":Zt=xt.length;break;default:return Ge}return xt.splice(Zt,0,Et),xt});const Ye=_.find(Ge=>Ge.id===Ne);Ms.logActivity({type:"whiteboard_updated",title:"Category moved",description:`Moved category "${Ye==null?void 0:Ye.name}" ${De}`,projectId:s.projectId,userId:Lt().id})},Ct=Ne=>he(void 0,null,function*(){const De=Ne.target.files;if(!De||!Fe)return;const Ye=Lt();for(const Ge of Array.from(De))try{const ot=typeof window!="undefined"&&"pulse2"in window?window.pulse2:null;let xt,Et;if(ot){let is=Fe;try{if(!(yield wt.getWorkspaceCategories(s.id)).find(Os=>String(Os.id)===String(Fe))){const Os=yield wt.createWorkspaceCategory(s.id,{name:"Images",color:"#3b82f6"});is=String(Os.id)}}catch(cs){}const Rt=yield wt.uploadWorkspaceImage(s.id,is,Ge);xt=String(Rt.id||Rt.imageId||Rt.workspace_image_id),Et=Rt.imageUrl||Rt.url||Rt.source_url}else xt=`img-${Date.now()}`,Et=URL.createObjectURL(Ge);const Zt={id:xt,url:Et,filename:Ge.name,categoryId:Fe,label:Ge.name,pins:[],comments:[],uploadedBy:Ye.id,uploadedAt:new Date().toISOString()};if(T(is=>is.map(Rt=>Rt.id===Fe?Z(E({},Rt),{images:[...Rt.images,Zt]}):Rt)),$(Zt),M(!1),ot)try{he(void 0,null,function*(){const is=yield wt.getWorkspaceCategories(s.id),Rt=yield wt.getWorkspaceImages(s.id),cs={};for(const Os of Rt){const ar=Os.categoryId||is[0].id;cs[ar]||(cs[ar]=[]),cs[ar].push(Os)}const Us=is.map(Os=>({id:String(Os.id),name:Os.name,color:Os.color||"#3b82f6",isMinimized:!1,images:(cs[Os.id]||[]).map(ar=>({id:String(ar.id),url:ar.url,filename:ar.filename||"image",categoryId:String(Os.id),label:ar.filename||"image",pins:[],comments:[],uploadedBy:String(ar.uploadedBy||""),uploadedAt:ar.uploadedAt||new Date().toISOString()}))}));T(Us)})}catch(is){}}catch(ot){const{toast:xt}=da();xt({title:"Upload Failed",description:"Could not upload image to workspace",variant:"destructive"})}}),tt=Ne=>he(void 0,null,function*(){var De,Ye;if(window.confirm("Are you sure you want to delete this image? This will also remove it from the associated project.")){const Ge=_.flatMap(ot=>ot.images).find(ot=>ot.id===Ne);if(!Ge)return;T(ot=>ot.map(xt=>Z(E({},xt),{images:xt.images.filter(Et=>Et.id!==Ne)}))),(V==null?void 0:V.id)===Ne&&$(null);try{if(s.projectId){const ot=yield ia.getProject(s.projectId),xt=(De=ot.media)==null?void 0:De.find(Et=>Et.filename===Ge.filename||Et.url===Ge.url);if(xt){const Et=((Ye=ot.media)==null?void 0:Ye.filter(Zt=>Zt.id!==xt.id))||[];yield ia.updateProject(s.projectId,{media:Et})}}}catch(ot){}Ms.logActivity({type:"whiteboard_updated",title:"Deleted image",description:`Deleted image: ${Ge.filename}`,projectId:s.projectId,userId:Lt().id,metadata:{imageId:Ne,filename:Ge.filename}})}}),Tt=Ne=>{$(Ne),A(1),N({x:0,y:0})},Mt=Ne=>{fe(!1)},As=Ne=>{if(!jt||Ve||ne)return;Ne.stopPropagation(),Ne.preventDefault();const Ye=Ne.currentTarget.getBoundingClientRect(),Ge=(Ne.clientX-Ye.left)/Ye.width*100,ot=(Ne.clientY-Ye.top)/Ye.height*100,xt=Math.max(0,Math.min(100,Ge)),Et=Math.max(0,Math.min(100,ot));ft({x:xt,y:Et}),Qe(!0)},xs=()=>he(void 0,null,function*(){if(!V||!Re||!et.trim())return;const Ne=Lt(),De={id:`pin-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,x:Re.x,y:Re.y,note:et.trim(),createdBy:Ne.id,createdAt:new Date().toISOString(),isResolved:!1,replies:[]};try{const Ye=yield wt.createImagePin(V.id,{x:Re.x,y:Re.y,note:et.trim(),workspaceId:s.id}),Ge=Z(E({},De),{id:Ye.id}),ot=_.map(xt=>Z(E({},xt),{images:xt.images.map(Et=>Et.id===V.id?Z(E({},Et),{pins:[...Et.pins,Ge]}):Et)}));T(ot),$(xt=>xt?Z(E({},xt),{pins:[...xt.pins,Ge]}):null),ft(null),Je(""),Qe(!1),yield Ms.logActivity({type:"whiteboard_pin_added",title:"Pin added to whiteboard",description:`Added pin to image "${V.filename}" in whiteboard "${s.name}".`,projectId:s.projectId,userId:Ne.id,metadata:{whiteboardId:s.id,imageId:V.id,pinId:Ge.id,imageName:V.filename,pinNote:Ge.note}})}catch(Ye){alert("Failed to save pin. Please try again.")}}),gt=(Ne,De)=>{if(!(!V||!De.trim()))try{wt.updatePin(Ne,{note:De.trim(),workspaceId:s.id});const Ye=_.map(Ge=>Z(E({},Ge),{images:Ge.images.map(ot=>ot.id===V.id?Z(E({},ot),{pins:ot.pins.map(xt=>xt.id===Ne?Z(E({},xt),{note:De.trim()}):xt)}):ot)}));T(Ye),$(Ge=>Ge?Z(E({},Ge),{pins:Ge.pins.map(ot=>ot.id===Ne?Z(E({},ot),{note:De.trim()}):ot)}):null),X(null),Pe(""),Ms.logActivity({type:"whiteboard_updated",title:"Pin updated in whiteboard",description:`Updated pin on image "${V.filename}" in whiteboard "${s.name}".`,projectId:s.projectId,userId:Lt().id,metadata:{whiteboardId:s.id,imageId:V.id,pinId:Ne,imageName:V.filename,newNote:De.trim()}})}catch(Ye){alert("Failed to update pin. Please try again.")}},Rs=Ne=>{if(!(!V||!window.confirm("Are you sure you want to delete this pin?")))try{wt.deletePin(Ne);const De=_.map(Ye=>Z(E({},Ye),{images:Ye.images.map(Ge=>Ge.id===V.id?Z(E({},Ge),{pins:Ge.pins.filter(ot=>ot.id!==Ne)}):Ge)}));T(De),$(Ye=>Ye?Z(E({},Ye),{pins:Ye.pins.filter(Ge=>Ge.id!==Ne)}):null),Ms.logActivity({type:"whiteboard_updated",title:"Pin deleted from whiteboard",description:`Deleted pin from image "${V.filename}" in whiteboard "${s.name}".`,projectId:s.projectId,userId:Lt().id,metadata:{whiteboardId:s.id,imageId:V.id,pinId:Ne,imageName:V.filename}})}catch(De){alert("Failed to delete pin. Please try again.")}},Te=Ne=>{if(!V)return;const De=V.pins.find(Ye=>Ye.id===Ne);if(De)try{wt.updatePin(Ne,{isResolved:!De.isResolved,workspaceId:s.id});const Ye=_.map(Ge=>Z(E({},Ge),{images:Ge.images.map(ot=>ot.id===V.id?Z(E({},ot),{pins:ot.pins.map(xt=>xt.id===Ne?Z(E({},xt),{isResolved:!xt.isResolved}):xt)}):ot)}));T(Ye),$(Ge=>Ge?Z(E({},Ge),{pins:Ge.pins.map(ot=>ot.id===Ne?Z(E({},ot),{isResolved:!ot.isResolved}):ot)}):null),Ms.logActivity({type:"whiteboard_updated",title:`Pin ${De.isResolved?"unresolved":"resolved"} in whiteboard`,description:`${De.isResolved?"Unresolved":"Resolved"} pin on image "${V.filename}" in whiteboard "${s.name}".`,projectId:s.projectId,userId:Lt().id,metadata:{whiteboardId:s.id,imageId:V.id,pinId:Ne,imageName:V.filename,isResolved:!De.isResolved}})}catch(Ye){alert("Failed to update pin status. Please try again.")}},ct=()=>A(Ne=>Math.min(Ne*1.2,5)),vt=()=>A(Ne=>Math.max(Ne/1.2,.1)),Wt=()=>{A(1);const Ne=Xt(0,0,1,Ft);N(Ne)},Xt=b.useCallback((Ne,De,Ye,Ge)=>{if(!(Ge!=null&&Ge.current))return{x:Ne,y:De};const ot=Ge.current,xt=ot.querySelector("img");if(!xt)return{x:Ne,y:De};const Et=ot.getBoundingClientRect(),Zt=xt.offsetWidth*Ye,is=xt.offsetHeight*Ye,Rt=Et.width,cs=Et.height,Us=50,Os=Math.max(Us,(Zt-Rt)/2+Us),ar=Math.min(-Us,-(Zt-Rt)/2-Us),gi=Math.max(Us,(is-cs)/2+Us),eo=Math.min(-Us,-(is-cs)/2-Us);return Zt<=Rt?Ne=Math.max(ar,Math.min(Os,0)):Ne=Math.max(ar,Math.min(Os,Ne)),is<=cs?De=Math.max(eo,Math.min(gi,0)):De=Math.max(eo,Math.min(gi,De)),{x:Ne,y:De}},[]),Mr=b.useCallback(Ne=>{if(!Ft.current)return;const Ye=Ft.current.getBoundingClientRect(),Ge=Ne.clientX-Ye.left,ot=Ne.clientY-Ye.top,xt=Ye.width/2,Et=Ye.height/2,Zt=Ne.deltaY>0?.9:1.1,is=Math.max(.1,Math.min(5,S*Zt));if(is===S)return;const Rt=(Ge-xt-L.x)/S,cs=(ot-Et-L.y)/S,Us=xt+Rt*is-Ge,Os=Et+cs*is-ot,ar=Xt(-Us,-Os,is,Ft);A(is),N(ar)},[S,L,Xt]),Vs=b.useCallback(Ne=>{var De;if(Ve&&mt&&V&&Ft.current){Ne.preventDefault(),Ne.stopPropagation();const Ge=(De=Ft.current.querySelector("img"))==null?void 0:De.getBoundingClientRect();if(!Ge)return;const ot=(Ne.clientX-Ge.left)/Ge.width*100,xt=(Ne.clientY-Ge.top)/Ge.height*100,Et=Math.max(0,Math.min(100,ot)),Zt=Math.max(0,Math.min(100,xt));T(is=>is.map(Rt=>Z(E({},Rt),{images:Rt.images.map(cs=>cs.id===V.id?Z(E({},cs),{pins:cs.pins.map(Us=>Us.id===mt?Z(E({},Us),{x:Et,y:Zt}):Us)}):cs)}))),$(is=>is?Z(E({},is),{pins:is.pins.map(Rt=>Rt.id===mt?Z(E({},Rt),{x:Et,y:Zt}):Rt)}):null)}},[Ve,mt,V]),dr=b.useCallback(Ne=>{Ne.button===0&&(Ne.preventDefault(),H({x:Ne.clientX-L.x,y:Ne.clientY-L.y}),le({x:Ne.clientX,y:Ne.clientY}),fe(!1))},[L]),gr=b.useCallback(Ne=>{if(Ve){Vs(Ne);return}if(k&&I.x!==void 0&&I.y!==void 0){Ne.preventDefault();const De=Ne.clientX-I.x,Ye=Ne.clientY-I.y,Ge=Xt(De,Ye,S,Ft);N(Ge)}else if(!Ve&&I.x!==void 0&&I.y!==void 0){const De=Ne.clientX-ce.x,Ye=Ne.clientY-ce.y;if(Math.sqrt(De*De+Ye*Ye)>se){D(!0),fe(!0),Ne.preventDefault();const ot=Ne.clientX-I.x,xt=Ne.clientY-I.y,Et=Xt(ot,xt,S,Ft);N(Et)}}},[k,Ve,I,ce,se,Xt,S,Vs]),Wr=b.useCallback(()=>{D(!1),fe(!1),H({x:void 0,y:void 0})},[]),ua=b.useCallback((Ne,De)=>{Ne.stopPropagation(),Ne.preventDefault(),St(De),es(!0),H({x:void 0,y:void 0}),fe(!1)},[]);b.useCallback(()=>{Ve&&mt&&(es(!1),St(null),Ms.logActivity({type:"whiteboard_updated",title:"Pin moved",description:"Moved pin in image",projectId:s.projectId,userId:Lt().id}))},[Ve,mt,s.projectId]),b.useEffect(()=>{const Ne=Ye=>{if(k&&I.x!==void 0&&I.y!==void 0){const Ge=Ye.clientX-I.x,ot=Ye.clientY-I.y,xt=Xt(Ge,ot,S,Ft);N(xt)}},De=()=>{Ve&&mt&&Ms.logActivity({type:"whiteboard_updated",title:`Pin repositioned in ${V==null?void 0:V.filename}`,projectId:s.projectId,userId:Lt().id,metadata:{imageId:V==null?void 0:V.id,pinId:mt}}),D(!1),es(!1),St(null),fe(!1),H({x:void 0,y:void 0})};return(k||Ve)&&(document.addEventListener("mousemove",Ne),document.addEventListener("mouseup",De)),()=>{document.removeEventListener("mousemove",Ne),document.removeEventListener("mouseup",De)}},[k,Ve,I,Xt,S,V,mt,s.projectId]),b.useEffect(()=>{V&&(wt.getImagePins(V.id,s.id).then(Ne=>{if(Ne&&Ne.length>0){const De=_.map(Ye=>Z(E({},Ye),{images:Ye.images.map(Ge=>Ge.id===V.id?Z(E({},Ge),{pins:Ne}):Ge)}));T(De),$(Ye=>Ye?Z(E({},Ye),{pins:Ne}):null)}}).catch(Ne=>{}),wt.getWorkspaceComments(s.id).then(Ne=>{if(Ne&&Ne.length>0){const De=Ne.filter(Ye=>Ye.imageId===V.id);if(De.length>0){const Ye=_.map(Ge=>Z(E({},Ge),{images:Ge.images.map(ot=>ot.id===V.id?Z(E({},ot),{comments:De}):ot)}));T(Ye),$(Ge=>Ge?Z(E({},Ge),{comments:De}):null)}}}).catch(Ne=>{}))},[V==null?void 0:V.id,s.id]);const Hr=()=>{var Ne;return V?e.jsx("div",{className:"w-full",children:e.jsxs(il,{value:re,onValueChange:De=>je(De),children:[e.jsxs(Xi,{className:"grid w-full grid-cols-2 mb-4",children:[e.jsxs(_r,{value:"pins",className:"flex items-center gap-2",children:[e.jsx(Ua,{className:"h-4 w-4"}),"Pins (",((Ne=V.pins)==null?void 0:Ne.length)||0,")"]}),e.jsxs(_r,{value:"notes",className:"flex items-center gap-2",children:[e.jsx(Tr,{className:"h-4 w-4"}),"Notes (",n.length,")"]})]}),e.jsx(Ir,{value:"pins",className:"space-y-4",children:V.pins&&V.pins.length>0?V.pins.map(De=>e.jsx(Xe,{className:"glass-card",children:e.jsx(Ze,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ua,{className:Ce("h-4 w-4 mt-1",De.isResolved?"text-green-500":"text-blue-500")}),e.jsx("div",{className:"flex-1",children:Le===De.id?e.jsxs("div",{className:"space-y-2",children:[e.jsx(br,{value:ve,onChange:Ye=>Pe(Ye.target.value),className:"text-sm resize-none min-h-[60px]"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(de,{size:"sm",onClick:()=>gt(De.id,ve),disabled:!ve.trim(),children:"Save"}),e.jsx(de,{size:"sm",variant:"outline",onClick:()=>{X(null),Pe("")},children:"Cancel"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:Ce("text-sm",De.isResolved&&"line-through text-muted-foreground"),children:De.note}),e.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-muted-foreground",children:[e.jsx("span",{children:lr(De.createdBy).name}),e.jsx("span",{children:"•"}),e.jsx("span",{children:Jt(De.createdAt)}),e.jsx(nt,{variant:De.isResolved?"default":"secondary",className:"text-xs",children:De.isResolved?"Resolved":"Open"})]}),e.jsxs("div",{className:"flex gap-1 mt-3",children:[e.jsx(de,{size:"sm",variant:"outline",onClick:()=>{X(De.id),Pe(De.note)},className:"hover-shimmer cyrus-ui h-7 w-7 p-0",children:e.jsx(sc,{className:"h-3 w-3"})}),e.jsx(de,{size:"sm",variant:De.isResolved?"secondary":"default",onClick:()=>Te(De.id),className:"hover-shimmer cyrus-ui h-7 w-7 p-0",title:De.isResolved?"Unresolve":"Resolve",children:e.jsx(ja,{className:"h-3 w-3"})}),e.jsx(de,{size:"sm",variant:"destructive",onClick:()=>Rs(De.id),className:"hover-shimmer cyrus-ui h-7 w-7 p-0",children:e.jsx($r,{className:"h-3 w-3"})})]})]})})]})})},De.id)):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Ua,{className:"h-8 w-8 mx-auto mb-2"}),e.jsx("p",{children:"No pins yet"}),e.jsx("p",{className:"text-xs",children:jt?"Click on the image to add pins (Pin mode: ON)":"Enable pin mode using the pin button below the image"})]})}),e.jsxs(Ir,{value:"notes",className:"space-y-4",children:[e.jsx(Xe,{className:"glass-card",children:e.jsx(Ze,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(br,{placeholder:"Add a note...",value:i,onChange:De=>o(De.target.value),className:"resize-none min-h-[80px] hover-shimmer cyrus-ui"}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(de,{onClick:l,size:"sm",disabled:!i.trim(),className:"hover-shimmer cyrus-ui",children:[e.jsx(Tr,{className:"h-4 w-4 mr-2"}),"Add Note"]})})]})})}),n.length>0?n.map(De=>{var Ye;return e.jsx(Xe,{className:"glass-card",children:e.jsx(Ze,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white text-xs font-medium",children:((Ye=De.authorName)==null?void 0:Ye.charAt(0).toUpperCase())||"U"}),e.jsx("div",{className:"flex-1",children:C===De.id?e.jsxs("div",{className:"space-y-2",children:[e.jsx(br,{value:x,onChange:Ge=>j(Ge.target.value),className:"text-sm resize-none min-h-[60px]"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(de,{size:"sm",onClick:()=>c(De.id),disabled:!x.trim(),children:"Save"}),e.jsx(de,{size:"sm",variant:"outline",onClick:()=>{w(null),j("")},children:"Cancel"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm",children:De.content}),e.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-muted-foreground",children:[e.jsx("span",{children:De.authorName||"User"}),e.jsx("span",{children:"•"}),e.jsx("span",{children:Jt(De.createdAt)})]}),e.jsxs("div",{className:"flex gap-1 mt-3",children:[e.jsx(de,{size:"sm",variant:"outline",onClick:()=>{w(De.id),j(De.content)},className:"hover-shimmer cyrus-ui h-7 w-7 p-0",children:e.jsx(sc,{className:"h-3 w-3"})}),e.jsx(de,{size:"sm",variant:"outline",onClick:()=>h(De.id),className:"hover-shimmer cyrus-ui h-7 w-7 p-0",children:e.jsx(Tr,{className:"h-3 w-3"})})]})]})})]})})},De.id)}):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Tr,{className:"h-8 w-8 mx-auto mb-2"}),e.jsx("p",{children:"No notes yet"}),e.jsx("p",{className:"text-xs",children:"Add a note about this whiteboard"})]})]})]})}):null};return e.jsxs("div",{className:"h-screen flex flex-col bg-background overflow-hidden",children:[e.jsxs("header",{className:"flex items-center justify-between p-4 border-b bg-background/80 backdrop-blur-sm flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(de,{onClick:t,variant:"ghost",size:"sm",className:"mr-2",children:e.jsx(qa,{className:"h-4 w-4"})}),e.jsx("div",{children:V?e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-xl font-bold",children:V.filename}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(Cs,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:Jt(V.uploadedAt)}),e.jsx("span",{className:"h-1 w-1 rounded-full bg-muted-foreground"}),e.jsx(Sa,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:lr(V.uploadedBy).name})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-xl font-bold",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(Cs,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:Jt(s.updatedAt||s.createdAt)}),e.jsx("span",{className:"h-1 w-1 rounded-full bg-muted-foreground"}),e.jsx(Sa,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:Lt().name})]})]})})]}),e.jsx("div",{className:"flex items-center gap-2",children:!V&&e.jsxs(de,{variant:"ghost",size:"sm",onClick:()=>G(!0),className:"flex items-center gap-1",children:[e.jsx(Ry,{className:"h-4 w-4"}),"Add Category"]})})]}),V?e.jsxs("div",{className:"flex flex-1 min-h-0 overflow-hidden",children:[e.jsxs("div",{className:"flex-1 relative overflow-hidden bg-black/5",style:{cursor:Ve?"default":k?"grabbing":I.x!==void 0?"grab":"default"},onWheel:Mr,onMouseDown:dr,onMouseMove:gr,onMouseUp:Wr,ref:Ft,children:[e.jsxs("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 z-10 flex items-center gap-2 bg-background/80 backdrop-blur-sm border rounded-lg px-3 py-2",children:[e.jsx(de,{variant:"ghost",size:"sm",onClick:vt,disabled:S<=.1,children:e.jsx(Gy,{className:"h-4 w-4"})}),e.jsxs("span",{className:"text-xs font-medium min-w-[3rem] text-center",children:[Math.round(S*100),"%"]}),e.jsx(de,{variant:"ghost",size:"sm",onClick:ct,disabled:S>=5,children:e.jsx(Yy,{className:"h-4 w-4"})}),e.jsx("div",{className:"w-px h-4 bg-border mx-1"}),e.jsx(Hi,{children:e.jsxs(di,{children:[e.jsx(ui,{asChild:!0,children:e.jsx(de,{variant:jt?"default":"ghost",size:"sm",onClick:()=>Ls(!jt),className:Ce("hover-shimmer cyrus-ui",jt&&"bg-primary text-primary-foreground"),children:e.jsx(Ua,{className:"h-4 w-4"})})}),e.jsx(Nn,{children:e.jsx("p",{children:jt?"Disable pin creation":"Enable pin creation"})})]})}),e.jsx("div",{className:"w-px h-4 bg-border mx-1"}),e.jsx(de,{variant:"ghost",size:"sm",onClick:Wt,children:e.jsx(ux,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",style:{transform:`translate(${L.x}px, ${L.y}px) scale(${S})`,transformOrigin:"center center"},children:e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:V.url,alt:V.filename,className:"max-w-full max-h-full object-contain",style:{pointerEvents:k?"none":"auto",cursor:jt?"crosshair":"default",width:"auto",height:"auto",maxWidth:"70vw",maxHeight:"60vh"},onMouseDown:Mt,onClick:As,draggable:!1}),V.pins&&V.pins.map(Ne=>e.jsx("div",{className:`absolute w-6 h-6 -ml-3 -mt-3 rounded-full flex items-center justify-center transition-all duration-200 ${Ne.isResolved?"bg-green-500 hover:bg-green-600":"bg-red-500 hover:bg-red-600"} ${mt===Ne.id?"ring-2 ring-white cursor-grabbing":"hover:scale-110 cursor-grab"} shadow-lg hover:shadow-xl`,style:{left:`${Ne.x}%`,top:`${Ne.y}%`,transform:`scale(${1/S})`},onMouseDown:De=>ua(De,Ne.id),onClick:De=>{Ve||(De.stopPropagation(),X(Ne.id),Pe(Ne.note))},children:e.jsx("span",{className:"text-white text-xs font-bold",children:(V.pins||[]).findIndex(De=>De.id===Ne.id)+1})},Ne.id)),Re&&e.jsx("div",{className:"absolute w-6 h-6 -ml-3 -mt-3 rounded-full bg-blue-500 flex items-center justify-center animate-pulse",style:{left:`${Re.x}%`,top:`${Re.y}%`,transform:`scale(${1/S})`},children:e.jsx(Ua,{className:"h-3 w-3 text-white"})})]})})]}),e.jsx("div",{className:"w-[450px] border-l bg-background flex flex-col overflow-hidden",children:e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:Hr()})})]}):e.jsx("div",{className:"flex-1 p-4 overflow-auto",children:e.jsx("div",{className:"space-y-3",children:_.map(Ne=>e.jsxs(Xe,{children:[e.jsx(Dt,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:ae===Ne.id?e.jsx("div",{className:"flex gap-2 items-center",children:e.jsx(It,{value:ue,onChange:De=>Ae(De.target.value),className:"h-6 text-sm px-2",onBlur:()=>Hs(Ne.id,ue),onKeyDown:De=>{De.key==="Enter"&&Hs(Ne.id,ue),De.key==="Escape"&&ie(null)},autoFocus:!0})}):e.jsxs(e.Fragment,{children:[e.jsx(de,{variant:"ghost",size:"sm",onClick:()=>cr(Ne.id),className:"h-6 w-6 p-0",children:Ne.isMinimized?e.jsx(tn,{className:"h-4 w-4"}):e.jsx(el,{className:"h-4 w-4"})}),e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:Ne.color}}),e.jsx("h3",{className:"text-sm font-medium",children:Ne.name}),e.jsx(nt,{variant:"secondary",className:"text-xs",children:Ne.images.length})]})}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs(de,{variant:"ghost",size:"sm",onClick:()=>{var De;$e(Ne.id),(De=Yt.current)==null||De.click()},className:"h-6 px-2 text-xs",children:[e.jsx(ws,{className:"h-3 w-3 mr-1"}),"Add"]}),e.jsxs(al,{children:[e.jsx(nl,{asChild:!0,children:e.jsx(de,{variant:"ghost",size:"sm",className:"h-6 px-2",children:e.jsx(ac,{className:"h-3 w-3"})})}),e.jsxs(Ki,{children:[e.jsxs(ds,{onClick:()=>{ie(Ne.id),Ae(Ne.name)},children:[e.jsx(sc,{className:"h-4 w-4 mr-2"}),"Rename Category"]}),e.jsx(ds,{onClick:()=>cr(Ne.id),children:Ne.isMinimized?e.jsxs(e.Fragment,{children:[e.jsx(Am,{className:"h-4 w-4 mr-2"}),"Show Images"]}):e.jsxs(e.Fragment,{children:[e.jsx(ix,{className:"h-4 w-4 mr-2"}),"Hide Images"]})}),e.jsx(nm,{}),e.jsxs(e4,{children:[e.jsxs(J0,{children:[e.jsx(Wy,{className:"h-4 w-4 mr-2"}),"Move Category"]}),e.jsxs(K0,{children:[e.jsx(ds,{onClick:()=>Kt(Ne.id,"top"),disabled:_.findIndex(De=>De.id===Ne.id)===0,children:"To Top"}),e.jsx(ds,{onClick:()=>Kt(Ne.id,"up"),disabled:_.findIndex(De=>De.id===Ne.id)===0,children:"Move Up"}),e.jsx(ds,{onClick:()=>Kt(Ne.id,"down"),disabled:_.findIndex(De=>De.id===Ne.id)===_.length-1,children:"Move Down"}),e.jsx(ds,{onClick:()=>Kt(Ne.id,"bottom"),disabled:_.findIndex(De=>De.id===Ne.id)===_.length-1,children:"To Bottom"})]})]}),e.jsx(nm,{}),e.jsxs(ds,{onClick:()=>rs(Ne.id),className:"text-destructive",children:[e.jsx($r,{className:"h-4 w-4 mr-2"}),"Delete Category"]})]})]})]})]})}),!Ne.isMinimized&&e.jsx(Ze,{className:"pt-0",children:Ne.images.length===0?e.jsx("div",{className:"text-center py-4 text-muted-foreground text-sm",children:"No images in this category"}):e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-2",children:Ne.images.map(De=>e.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>Tt(De),children:[e.jsx("img",{src:De.url,alt:De.filename,className:"w-full aspect-square object-cover rounded border hover:shadow-md transition-shadow"}),De.pins.length>0&&e.jsx("div",{className:"absolute top-1 right-1",children:e.jsx(nt,{variant:"secondary",className:"bg-red-500/90 text-white text-xs px-1 py-0",children:De.pins.length})}),e.jsx("div",{className:"absolute top-1 left-1 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(de,{size:"sm",variant:"destructive",className:"h-5 w-5 p-0",onClick:Ye=>{Ye.stopPropagation(),tt(De.id)},children:e.jsx(Zs,{className:"h-3 w-3"})})}),e.jsx("div",{className:"mt-1",children:e.jsx("p",{className:"text-xs text-center text-muted-foreground truncate",children:De.filename||`Image ${Ne.images.findIndex(Ye=>Ye.id===De.id)+1}`})})]},De.id))})})]},Ne.id))})}),e.jsx("input",{type:"file",ref:Yt,className:"hidden",onChange:Ct,multiple:!0,accept:"image/*"}),e.jsx(Bs,{open:te,onOpenChange:G,children:e.jsxs(Es,{children:[e.jsx(qr,{children:e.jsx(rr,{children:"Add New Category"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(It,{placeholder:"Category name",value:B,onChange:Ne=>J(Ne.target.value)}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(de,{onClick:pr,disabled:!B.trim(),children:"Add Category"}),e.jsx(de,{variant:"outline",onClick:()=>G(!1),children:"Cancel"})]})]})]})}),e.jsx(Bs,{open:Ke,onOpenChange:Qe,children:e.jsxs(Es,{children:[e.jsx(qr,{children:e.jsx(rr,{children:"Add Pin"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(br,{placeholder:"Enter your note...",value:et,onChange:Ne=>Je(Ne.target.value),className:"resize-none min-h-[100px]"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(de,{onClick:xs,disabled:!et.trim(),children:"Add Pin"}),e.jsx(de,{variant:"outline",onClick:()=>{Qe(!1),Je(""),ft(null)},children:"Cancel"})]})]})]})})]})};function sk({stage:s,isSelected:t=!1,onClick:r,onCompleted:a,onEdit:n,onDelete:i,onStarted:o,className:l}){const f=(v=>{const u={not_started:{color:"bg-slate-500",textColor:"text-slate-700",icon:ns,text:"Pending"},in_progress:{color:"bg-blue-500",textColor:"text-blue-700",icon:Wi,text:"In Progress"},completed:{color:"bg-green-500",textColor:"text-green-700",icon:zr,text:"Completed"},skipped:{color:"bg-gray-500",textColor:"text-gray-700",icon:qi,text:"Skipped"}};return u[v]||u.not_started})(s.status).icon,p=s.dueDate&&new Date(s.dueDate)<new Date&&s.status!=="completed";return s.status==="in_progress"||s.status,e.jsx(Xe,{className:Ce("glass-card hover:shadow-lg transition-all duration-300 cursor-pointer group border-0",t&&"ring-2 ring-primary shadow-xl",l),onClick:r,children:e.jsxs(Ze,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("div",{className:Ce("w-8 h-8 rounded-full glass-card flex items-center justify-center text-white shadow-sm flex-shrink-0",s.status==="completed"&&"bg-gradient-to-br from-green-500 to-emerald-600",s.status==="in_progress"&&"bg-gradient-to-br from-blue-500 to-indigo-600",s.status==="not_started"&&"bg-gradient-to-br from-slate-500 to-gray-600"),children:e.jsx(f,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-semibold text-lg truncate text-foreground",children:s.name}),s.isRequired&&e.jsx(nt,{variant:"secondary",className:"text-xs glass-card",children:"Required"}),p&&e.jsx(nt,{variant:"destructive",className:"text-xs",children:"Overdue"})]}),s.description&&e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-2",children:s.description}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(wr,{className:"h-3 w-3"}),e.jsxs("span",{children:[s.assignedTo.length," assigned"]})]}),s.estimatedHours>0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ns,{className:"h-3 w-3"}),e.jsxs("span",{children:[s.estimatedHours,"h estimated"]})]}),s.dueDate&&e.jsxs("div",{className:Ce("flex items-center gap-1",p&&"text-destructive"),children:[e.jsx(ns,{className:"h-3 w-3"}),e.jsxs("span",{children:["Due ",Jt(s.dueDate)]})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-2",onClick:v=>v.stopPropagation(),children:[e.jsxs(nt,{variant:"secondary",className:Ce("text-xs border-0 shadow-sm glass-card",s.status==="completed"&&"bg-green-500/20 text-green-700",s.status==="in_progress"&&"bg-blue-500/20 text-blue-700",s.status==="not_started"&&"bg-slate-500/20 text-slate-700"),children:[s.status==="completed"&&"Completed",s.status==="in_progress"&&"In Progress",s.status==="not_started"&&"Pending"]}),s.status==="in_progress"&&e.jsxs(de,{size:"sm",variant:"outline",onClick:v=>{v.stopPropagation(),a()},className:"glass-card hover:shadow-lg transition-all duration-300 bg-gradient-to-r from-blue-500 to-indigo-600 text-white border-0",children:[e.jsx(zr,{className:"h-4 w-4 mr-1"}),"Complete"]}),s.status==="not_started"&&o&&e.jsxs(de,{size:"sm",variant:"outline",onClick:v=>{v.stopPropagation(),o()},className:"glass-card hover:shadow-lg transition-all duration-300",children:[e.jsx(Wi,{className:"h-4 w-4 mr-1"}),"Start"]}),e.jsxs(al,{children:[e.jsx(nl,{asChild:!0,children:e.jsx(de,{variant:"ghost",size:"sm",className:"glass-card hover:shadow-lg transition-all duration-300 opacity-0 group-hover:opacity-100",children:e.jsx(ac,{className:"h-4 w-4"})})}),e.jsxs(Ki,{align:"end",className:"glass-card border-0",children:[n&&e.jsx(ds,{onClick:n,children:"Edit Stage"}),e.jsx(ds,{children:"View Details"}),e.jsx(ds,{children:"Assign Users"}),s.status==="not_started"&&o&&e.jsx(ds,{onClick:o,children:"Start Stage"}),i&&e.jsx(ds,{className:"text-destructive",onClick:i,children:"Delete Stage"})]})]})]})]}),s.status==="in_progress"&&e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground mb-1",children:[e.jsx("span",{children:"Progress"}),e.jsx("span",{children:"75%"})," "]}),e.jsx("div",{className:"w-full bg-muted/20 rounded-full h-1.5",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 h-1.5 rounded-full transition-all duration-300",style:{width:"75%"}})})]}),s.actualHours>0&&e.jsxs("div",{className:"mt-3 flex justify-between text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:"Time Spent:"}),e.jsxs("span",{className:Ce("font-medium",s.actualHours>s.estimatedHours?"text-destructive":"text-foreground"),children:[s.actualHours,"h",s.estimatedHours>0&&` / ${s.estimatedHours}h`]})]})]})})}function rk({stages:s,selectedStage:t,onStageSelect:r,onStageCompleted:a,onStageStarted:n,className:i}){const o=(c,h)=>{const f={"initial review":{pending:{primary:"from-purple-500 to-indigo-600",bg:"bg-purple-50 border-purple-200",text:"text-purple-700"},in_progress:{primary:"from-purple-600 to-indigo-700",bg:"bg-purple-100 border-purple-300",text:"text-purple-800"},completed:{primary:"from-purple-400 to-indigo-500",bg:"bg-purple-50 border-purple-200",text:"text-purple-600"}},"design development":{pending:{primary:"from-orange-500 to-red-600",bg:"bg-orange-50 border-orange-200",text:"text-orange-700"},in_progress:{primary:"from-orange-600 to-red-700",bg:"bg-orange-100 border-orange-300",text:"text-orange-800"},completed:{primary:"from-orange-400 to-red-500",bg:"bg-orange-50 border-orange-200",text:"text-orange-600"}},"client review":{pending:{primary:"from-emerald-500 to-teal-600",bg:"bg-emerald-50 border-emerald-200",text:"text-emerald-700"},in_progress:{primary:"from-emerald-600 to-teal-700",bg:"bg-emerald-100 border-emerald-300",text:"text-emerald-800"},completed:{primary:"from-emerald-400 to-teal-500",bg:"bg-emerald-50 border-emerald-200",text:"text-emerald-600"}},"final delivery":{pending:{primary:"from-blue-500 to-cyan-600",bg:"bg-blue-50 border-blue-200",text:"text-blue-700"},in_progress:{primary:"from-blue-600 to-cyan-700",bg:"bg-blue-100 border-blue-300",text:"text-blue-800"},completed:{primary:"from-blue-400 to-cyan-500",bg:"bg-blue-50 border-blue-200",text:"text-blue-600"}}},p=h.toLowerCase(),v=Object.keys(f).find(w=>p.includes(w))||"design development",u=f[v],C={pending:Z(E({},u.pending),{icon:ns,text:"Pending",opacity:"opacity-70"}),in_progress:Z(E({},u.in_progress),{icon:Wi,text:"In Progress",opacity:"opacity-100"}),completed:Z(E({},u.completed),{icon:zr,text:"Completed",opacity:"opacity-90"}),skipped:{primary:"from-gray-400 to-gray-500",bg:"bg-gray-50 border-gray-200",text:"text-gray-600",icon:qi,label:"Skipped",opacity:"opacity-60"}};return C[c]||C.pending},l=[{id:"1",name:"Alex Chen",avatar:"AC"},{id:"2",name:"Sarah Wilson",avatar:"SW"},{id:"3",name:"Mike Johnson",avatar:"MJ"}];return s.length===0?e.jsxs("div",{className:"glass-card p-12 rounded-lg text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gradient-to-br from-purple-100 to-pink-100 flex items-center justify-center",children:e.jsx(ns,{className:"w-8 h-8 text-purple-600"})}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No Workflow Stages"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Create your first workflow stage to start the approval process"})]}):e.jsx("div",{className:Ce("space-y-6",i),children:e.jsx("div",{className:"glass-card p-6 rounded-lg overflow-x-auto border-0",children:e.jsx("div",{className:"flex items-center space-x-4 min-w-max",children:s.map((c,h)=>{const f=o(c.status,c.name),p=(t==null?void 0:t.id)===c.id,v=h===s.length-1,u=f.icon;return e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:Ce("relative cursor-pointer transition-all duration-300 hover:scale-105",p&&"scale-105 ring-2 ring-primary"),onClick:()=>r(c),children:e.jsxs("div",{className:Ce("glass-card p-4 rounded-xl min-w-[280px] border-0",p&&"shadow-xl"),children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:Ce("w-8 h-8 rounded-full glass-card flex items-center justify-center text-white shadow-sm border-0",c.status==="completed"&&"bg-gradient-to-br from-green-500 to-emerald-600",c.status==="in_progress"&&"bg-gradient-to-br from-blue-500 to-indigo-600",c.status==="not_started"&&"bg-gradient-to-br from-slate-500 to-gray-600"),children:e.jsx(u,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-sm text-foreground",children:c.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Stage ",h+1]})]})]}),e.jsxs(nt,{variant:"secondary",className:Ce("text-xs border-0 shadow-sm glass-card",c.status==="completed"&&"bg-green-500/20 text-green-700",c.status==="in_progress"&&"bg-blue-500/20 text-blue-700",c.status==="not_started"&&"bg-slate-500/20 text-slate-700"),children:[c.status==="completed"&&"Completed",c.status==="in_progress"&&"In Progress",c.status==="not_started"&&"Pending"]})]}),e.jsxs("div",{className:"space-y-2",children:[c.description&&e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:c.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsx(ns,{className:"h-3 w-3"}),c.estimatedHours,"h est."]}),c.actualHours>0&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:[c.actualHours,"h actual"]})]}),c.assignedTo&&c.assignedTo.length>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex -space-x-1",children:[c.assignedTo.slice(0,3).map((C,w)=>{const x=l.find(j=>j.id===C);return e.jsx("div",{className:"w-6 h-6 rounded-full glass-card flex items-center justify-center text-white text-xs font-medium border-2 border-background shadow-sm",title:x==null?void 0:x.name,children:(x==null?void 0:x.avatar)||C.charAt(0).toUpperCase()},C)}),c.assignedTo.length>3&&e.jsxs("div",{className:"w-6 h-6 rounded-full glass-card flex items-center justify-center text-white text-xs font-medium border-2 border-background",children:["+",c.assignedTo.length-3]})]}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[c.assignedTo.length," assigned"]})]}),c.dueDate&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsx(Cs,{className:"h-3 w-3"}),"Due ",Jt(c.dueDate)]})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-border/20",children:[c.status==="in_progress"&&e.jsxs(de,{size:"sm",onClick:C=>{C.stopPropagation(),a(c.id)},className:"w-full text-xs glass-card hover:shadow-lg transition-all duration-300 bg-gradient-to-r from-blue-500 to-indigo-600 text-white border-0",children:[e.jsx(zr,{className:"h-3 w-3 mr-1"}),"Mark Complete"]}),c.status==="not_started"&&e.jsxs(de,{size:"sm",variant:"outline",onClick:C=>{C.stopPropagation(),n(c.id)},className:"w-full text-xs glass-card hover:shadow-lg transition-all duration-300 border-0",children:[e.jsx(Wi,{className:"h-3 w-3 mr-1"}),"Start Stage"]}),c.status==="completed"&&e.jsxs("div",{className:"flex items-center justify-center text-xs text-muted-foreground",children:[e.jsx(zr,{className:"h-3 w-3 mr-1"}),"Completed ",c.completedAt&&Jt(c.completedAt)]})]})]})}),!v&&e.jsxs("div",{className:"flex items-center mx-2",children:[e.jsx("div",{className:Ce("w-8 h-0.5 transition-all duration-300",c.status==="completed"?"bg-gradient-to-r from-green-400 to-blue-500":"bg-gradient-to-r from-border/30 to-border/30")}),e.jsx(tn,{className:Ce("h-5 w-5 transition-colors duration-300",c.status==="completed"?"text-green-500":"text-muted-foreground/50")})]})]},c.id)})})})})}function ak({stageId:s,items:t,onUpdated:r,className:a}){const[n,i]=b.useState(!1),[o,l]=b.useState(null),[c,h]=b.useState(""),[f,p]=b.useState(""),[v,u]=b.useState("medium"),[C,w]=b.useState(""),[x,j]=b.useState(!1),_=A=>{const L={low:{color:"bg-gray-500",text:"Low"},medium:{color:"bg-blue-500",text:"Medium"},high:{color:"bg-orange-500",text:"High"},urgent:{color:"bg-red-500",text:"Urgent"}};return L[A]||L.medium},T=()=>he(this,null,function*(){if(c.trim())try{j(!0);try{yield wt.createChecklistItem(s,{text:c.trim(),description:f.trim(),priority:v,estimatedHours:parseFloat(C)||0,order:t.length,isCompleted:!1,attachments:[]})}catch(A){}h(""),p(""),u("medium"),w(""),i(!1),r()}catch(A){}finally{j(!1)}}),U=A=>he(this,null,function*(){try{try{yield wt.updateChecklistItem(A.id,{isCompleted:!A.isCompleted})}catch(L){}r()}catch(L){}}),R=A=>he(this,null,function*(){try{yield wt.deleteChecklistItem(A),r()}catch(L){}}),V=[...t].sort((A,L)=>A.order-L.order),$=t.filter(A=>A.isCompleted).length,S=t.length>0?Math.round($/t.length*100):0;return e.jsxs("div",{className:Ce("space-y-4",a),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Progress"}),e.jsxs(nt,{variant:"secondary",className:"cyrus-ui",children:[$," / ",t.length]})]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[S,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-primary h-2 rounded-full transition-all duration-300",style:{width:`${S}%`}})}),e.jsx("div",{className:"space-y-2",children:V.length===0?e.jsxs("div",{className:"glass-card p-6 rounded-lg text-center",children:[e.jsx(ns,{className:"h-8 w-8 text-muted-foreground mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No tasks yet"})]}):V.map(A=>{const L=_(A.priority);return e.jsx("div",{className:Ce("glass-card p-3 rounded-lg group hover:glow transition-all",A.isCompleted&&"opacity-60"),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx($i,{checked:A.isCompleted,onCheckedChange:()=>U(A),className:"mt-1"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:Ce("font-medium text-sm",A.isCompleted&&"line-through text-muted-foreground"),children:A.text}),e.jsx(nt,{variant:"secondary",className:Ce("text-white text-xs cyrus-ui",L.color),children:L.text})]}),A.description&&e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:A.description}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[A.estimatedHours>0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ns,{className:"h-3 w-3"}),e.jsxs("span",{children:[A.estimatedHours,"h estimated"]})]}),A.actualHours>0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ja,{className:"h-3 w-3"}),e.jsxs("span",{children:[A.actualHours,"h spent"]})]}),A.completedAt&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ja,{className:"h-3 w-3"}),e.jsxs("span",{children:["Completed ",Jt(A.completedAt)]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(de,{variant:"ghost",size:"sm",onClick:()=>l(A),className:"h-6 w-6 p-0 hover-shimmer cyrus-ui",children:e.jsx(dx,{className:"h-3 w-3"})}),e.jsx(de,{variant:"ghost",size:"sm",onClick:()=>R(A.id),className:"h-6 w-6 p-0 hover-shimmer cyrus-ui text-destructive hover:text-destructive",children:e.jsx($r,{className:"h-3 w-3"})})]})]})},A.id)})}),e.jsxs(Bs,{open:n,onOpenChange:i,children:[e.jsx(ou,{asChild:!0,children:e.jsxs(de,{variant:"outline",className:"w-full hover-shimmer cyrus-ui",children:[e.jsx(ws,{className:"h-4 w-4 mr-2"}),"Add Task"]})}),e.jsxs(Es,{className:"glass-card border-0",children:[e.jsx(qr,{children:e.jsx(rr,{children:"Add New Task"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Task Name"}),e.jsx(It,{value:c,onChange:A=>h(A.target.value),placeholder:"Enter task name...",className:"input-glass cyrus-ui"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Description (Optional)"}),e.jsx(br,{value:f,onChange:A=>p(A.target.value),placeholder:"Add more details...",className:"input-glass cyrus-ui",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Priority"}),e.jsxs(Ss,{value:v,onValueChange:A=>u(A),children:[e.jsx(ys,{className:"input-glass cyrus-ui",children:e.jsx(ks,{})}),e.jsxs(bs,{children:[e.jsx(at,{value:"low",children:"Low"}),e.jsx(at,{value:"medium",children:"Medium"}),e.jsx(at,{value:"high",children:"High"}),e.jsx(at,{value:"urgent",children:"Urgent"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Estimated Hours"}),e.jsx(It,{type:"number",min:"0",step:"0.5",value:C,onChange:A=>w(A.target.value),placeholder:"0",className:"input-glass cyrus-ui"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(de,{variant:"outline",onClick:()=>i(!1),className:"hover-shimmer cyrus-ui",children:"Cancel"}),e.jsx(de,{onClick:T,disabled:!c.trim()||x,className:"hover-shimmer cyrus-ui",children:x?"Adding...":"Add Task"})]})]})]})]})]})}const Yp=[{id:"1",name:"John Smith",email:"john@example.com"},{id:"2",name:"Sarah Johnson",email:"sarah@example.com"},{id:"3",name:"Mike Chen",email:"mike@example.com"},{id:"4",name:"Emily Davis",email:"emily@example.com"}];function nk({stageId:s,workspaceId:t,approvals:r,onUpdated:a,className:n}){const[i,o]=b.useState(!1),[l,c]=b.useState(""),[h,f]=b.useState("sequential"),[p,v]=b.useState(""),[u,C]=b.useState(""),[w,x]=b.useState(!1),j=$=>{const S={pending:{color:"bg-yellow-500",text:"Pending",icon:ns},approved:{color:"bg-green-500",text:"Approved",icon:ja},rejected:{color:"bg-red-500",text:"Rejected",icon:Zs},delegated:{color:"bg-blue-500",text:"Delegated",icon:Sa}};return S[$]||S.pending},_=()=>he(this,null,function*(){if(l)try{x(!0);try{yield wt.createWorkflowApproval({stageId:s,workspaceId:t,approverId:parseInt(l),approvalType:h,comments:p,deadline:u||void 0,approvalOrder:r.length,attachments:[]})}catch($){}c(""),f("sequential"),v(""),C(""),o(!1),a()}catch($){}finally{x(!1)}}),T=($,S,A)=>he(this,null,function*(){try{yield wt.updateWorkflowApproval($,{status:S,comments:A||""}),a()}catch(L){}}),U=[...r].sort(($,S)=>new Date(S.requestedAt).getTime()-new Date($.requestedAt).getTime()),R=r.filter($=>$.status==="pending"),V=r.filter($=>$.status!=="pending");return e.jsxs("div",{className:Ce("space-y-4",n),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Approvals"}),e.jsxs(nt,{variant:"secondary",className:"cyrus-ui",children:[V.length," / ",r.length," completed"]})]}),R.length>0&&e.jsxs(nt,{variant:"secondary",className:"bg-yellow-500 text-white cyrus-ui",children:[R.length," pending"]})]}),e.jsx("div",{className:"space-y-3",children:U.length===0?e.jsxs("div",{className:"glass-card p-6 rounded-lg text-center",children:[e.jsx(tl,{className:"h-8 w-8 text-muted-foreground mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No approvals requested yet"})]}):U.map($=>{const S=j($.status),A=S.icon,L=Yp.find(k=>k.id===$.approverId.toString()),N=$.deadline&&new Date($.deadline)<new Date&&$.status==="pending";return e.jsxs("div",{className:"glass-card p-4 rounded-lg hover:glow transition-all",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:Ce("w-8 h-8 rounded-full flex items-center justify-center",S.color),children:e.jsx(A,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-medium text-sm",children:L?L.name:`User ${$.approverId}`}),e.jsx(nt,{variant:"secondary",className:Ce("text-white text-xs cyrus-ui",S.color),children:S.text}),N&&e.jsx(nt,{variant:"destructive",className:"text-xs",children:"Overdue"})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Requested ",Jt($.requestedAt),$.deadline&&` • Due ${Jt($.deadline)}`]})]})]}),$.status==="pending"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(de,{size:"sm",variant:"outline",onClick:()=>T($.id,"approved"),className:"hover-shimmer cyrus-ui text-green-600 hover:text-green-600",children:[e.jsx(ja,{className:"h-3 w-3 mr-1"}),"Approve"]}),e.jsxs(de,{size:"sm",variant:"outline",onClick:()=>T($.id,"rejected"),className:"hover-shimmer cyrus-ui text-red-600 hover:text-red-600",children:[e.jsx(Zs,{className:"h-3 w-3 mr-1"}),"Reject"]})]})]}),$.comments&&e.jsxs("div",{className:"glass-card p-3 rounded bg-muted/30",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Comments:"}),e.jsx("p",{className:"text-sm",children:$.comments})]}),e.jsxs("div",{className:"mt-3 flex items-center gap-4 text-xs text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(jn,{className:"h-3 w-3"}),e.jsxs("span",{children:["Type: ",$.approvalType]})]}),$.approvedAt&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ja,{className:"h-3 w-3"}),e.jsxs("span",{children:["Decided ",Jt($.approvedAt)]})]})]})]},$.id)})}),e.jsxs(Bs,{open:i,onOpenChange:o,children:[e.jsx(ou,{asChild:!0,children:e.jsxs(de,{variant:"outline",className:"w-full hover-shimmer cyrus-ui",children:[e.jsx(ws,{className:"h-4 w-4 mr-2"}),"Request Approval"]})}),e.jsxs(Es,{className:"glass-card border-0",children:[e.jsx(qr,{children:e.jsx(rr,{children:"Request Approval"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Approver"}),e.jsxs(Ss,{value:l,onValueChange:c,children:[e.jsx(ys,{className:"input-glass cyrus-ui",children:e.jsx(ks,{placeholder:"Select an approver..."})}),e.jsx(bs,{children:Yp.map($=>e.jsxs(at,{value:$.id,children:[$.name," (",$.email,")"]},$.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Approval Type"}),e.jsxs(Ss,{value:h,onValueChange:$=>f($),children:[e.jsx(ys,{className:"input-glass cyrus-ui",children:e.jsx(ks,{})}),e.jsxs(bs,{children:[e.jsx(at,{value:"sequential",children:"Sequential (one at a time)"}),e.jsx(at,{value:"parallel",children:"Parallel (all at once)"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Deadline (Optional)"}),e.jsx(It,{type:"datetime-local",value:u,onChange:$=>C($.target.value),className:"input-glass cyrus-ui"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Comments (Optional)"}),e.jsx(br,{value:p,onChange:$=>v($.target.value),placeholder:"Add any additional context or instructions...",className:"input-glass cyrus-ui",rows:3})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(de,{variant:"outline",onClick:()=>o(!1),className:"hover-shimmer cyrus-ui",children:"Cancel"}),e.jsx(de,{onClick:_,disabled:!l||w,className:"hover-shimmer cyrus-ui",children:w?"Requesting...":"Request Approval"})]})]})]})]})]})}const ik=[{name:"Initial Review",description:"Review project requirements and initial concepts",estimatedHours:4,category:"review"},{name:"Design Development",description:"Create initial design concepts and iterations",estimatedHours:8,category:"design"},{name:"Client Review",description:"Present designs to client for feedback and approval",estimatedHours:2,category:"review"},{name:"Final Delivery",description:"Finalize assets and deliver to client",estimatedHours:3,category:"delivery"}];function ok({workspaceId:s,nextOrder:t,existingStages:r,onStageCreated:a,onClose:n,project:i}){const[o,l]=b.useState({name:"",description:"",isRequired:!0,estimatedHours:"",dueDate:"",priority:"medium"}),[c,h]=b.useState([]),[f,p]=b.useState([]),[v,u]=b.useState([]),[C,w]=b.useState(!1),[x,j]=b.useState(null),[_,T]=b.useState("manual"),U=(i==null?void 0:i.artists)||[],R=i!=null&&i.projectManager?[{id:i.projectManager,name:i.projectManager}]:[],V=[...U,...R],$=I=>({id:I.id,name:I.name,email:`${I.name.toLowerCase().replace(" ",".")}@example.com`,avatar:I.name.split(" ").map(H=>H[0]).join("").toUpperCase()});b.useEffect(()=>{he(this,null,function*(){try{const H=yield wt.getWorkflowTemplates();u(H)}catch(H){}})},[]);const S=(I,H)=>{l(se=>Z(E({},se),{[I]:H}))},A=I=>{h(H=>H.includes(I)?H.filter(se=>se!==I):[...H,I])},L=I=>{const H=I.stages[0];H&&(l(se=>Z(E({},se),{name:H.name,description:H.description,estimatedHours:H.estimatedHours.toString(),isRequired:H.isRequired})),j(I.id))},N=I=>{l(H=>Z(E({},H),{name:I.name,description:I.description,estimatedHours:I.estimatedHours.toString()})),j(I.name)},k=()=>o.name.trim()&&o.description.trim(),D=I=>he(this,null,function*(){if(I.preventDefault(),!!k()){w(!0);try{const H={id:`stage-${Date.now()}`,workspaceId:s,name:o.name.trim(),description:o.description.trim(),status:"not_started",order:t,isRequired:o.isRequired,assignedTo:c,dependencies:f,estimatedHours:parseFloat(o.estimatedHours)||0,actualHours:0,dueDate:o.dueDate||new Date(Date.now()+6048e5).toISOString(),priority:o.priority,templateId:x,checklistItems:[],completedAt:null,completedBy:null,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};yield wt.createWorkflowStage(s,H),a(H),l({name:"",description:"",isRequired:!0,estimatedHours:"",dueDate:"",priority:"medium"}),h([]),p([]),j(null)}catch(H){}finally{w(!1)}}});return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold bg-gradient-primary bg-clip-text text-transparent",children:"Create New Workflow Stage"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Add a new stage to your workflow pipeline with dependencies and templates."})]}),e.jsxs(de,{variant:"outline",onClick:n,size:"sm",className:"glass-card",children:[e.jsx(Zs,{className:"h-4 w-4 mr-2"}),"Cancel"]})]}),e.jsxs("form",{onSubmit:D,className:"space-y-6",children:[e.jsx("div",{className:"glass-card p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(cl,{className:"h-5 w-5 text-primary"}),e.jsx("span",{className:"font-medium",children:"Creation Mode:"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(de,{type:"button",variant:_==="manual"?"default":"outline",size:"sm",onClick:()=>T("manual"),className:"glass-card hover:shadow-lg transition-all duration-300",children:"Manual Setup"}),e.jsxs(de,{type:"button",variant:_==="template"?"default":"outline",size:"sm",onClick:()=>T("template"),className:"glass-card hover:shadow-lg transition-all duration-300",children:[e.jsx(Dd,{className:"h-4 w-4 mr-2"}),"From Template"]})]})]})}),_==="template"&&e.jsxs("div",{className:"glass-card border-dashed border-primary/30 p-6 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Dd,{className:"h-5 w-5 text-primary"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Workflow Templates"})]}),e.jsxs(il,{defaultValue:"quick",className:"space-y-4",children:[e.jsxs(Xi,{className:"grid w-full grid-cols-2 glass-card",children:[e.jsx(_r,{value:"quick",children:"Quick Templates"}),e.jsx(_r,{value:"library",children:"Template Library"})]}),e.jsx(Ir,{value:"quick",className:"space-y-4",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:ik.map(I=>e.jsxs(de,{type:"button",variant:x===I.name?"default":"outline",className:Ce("h-auto p-4 flex flex-col items-start text-left glass-card hover:shadow-lg transition-all duration-300",x===I.name&&"bg-gradient-to-r from-blue-500 to-indigo-600 text-white"),onClick:()=>N(I),children:[e.jsx("div",{className:"font-semibold text-sm mb-1",children:I.name}),e.jsx("div",{className:"text-xs opacity-80 line-clamp-2 mb-2",children:I.description}),e.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[e.jsx(ns,{className:"h-3 w-3"}),I.estimatedHours,"h"]})]},I.name))})}),e.jsx(Ir,{value:"library",className:"space-y-4",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:v.map(I=>e.jsxs("div",{className:Ce("glass-card cursor-pointer transition-all hover:shadow-lg p-4 rounded-lg",x===I.id&&"ring-2 ring-primary"),onClick:()=>L(I),children:[e.jsx("div",{className:"font-semibold text-base mb-2",children:I.name}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:I.description}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx(nt,{variant:"secondary",className:"glass-card",children:I.category}),e.jsxs("span",{className:"text-muted-foreground",children:[I.stages.length," stages"]})]})]},I.id))})})]})]}),e.jsxs(il,{defaultValue:"basic",className:"space-y-6",children:[e.jsxs(Xi,{className:"grid w-full grid-cols-4 glass-card",children:[e.jsx(_r,{value:"basic",children:"Basic Info"}),e.jsx(_r,{value:"scheduling",children:"Scheduling"}),e.jsx(_r,{value:"assignment",children:"Assignment"}),e.jsx(_r,{value:"dependencies",children:"Dependencies"})]}),e.jsx(Ir,{value:"basic",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"glass-card p-6 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(zr,{className:"h-5 w-5 text-primary"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Stage Details"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(kt,{htmlFor:"stage-name",children:"Stage Name *"}),e.jsx(It,{id:"stage-name",type:"text",value:o.name,onChange:I=>S("name",I.target.value),placeholder:"e.g., Design Development",className:"glass-card hover:shadow-lg transition-all duration-300",required:!0})]}),e.jsxs("div",{children:[e.jsx(kt,{htmlFor:"stage-description",children:"Description *"}),e.jsx(br,{id:"stage-description",value:o.description,onChange:I=>S("description",I.target.value),placeholder:"Describe what happens in this stage...",rows:4,className:"glass-card hover:shadow-lg transition-all duration-300 resize-none",required:!0})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($i,{id:"required",checked:o.isRequired,onCheckedChange:I=>S("isRequired",I)}),e.jsx("label",{htmlFor:"required",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"This stage is required"})]})]})]}),e.jsxs("div",{className:"glass-card p-6 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(wr,{className:"h-5 w-5 text-primary"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Planning & Assignment"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",children:[e.jsx(ns,{className:"h-4 w-4 inline mr-1"}),"Estimated Hours"]}),e.jsx(It,{type:"number",value:o.estimatedHours,onChange:I=>S("estimatedHours",I.target.value),placeholder:"0",min:"0",step:"0.5",className:"glass-card hover:shadow-lg transition-all duration-300"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",children:[e.jsx(Cs,{className:"h-4 w-4 inline mr-1"}),"Due Date"]}),e.jsx(It,{type:"date",value:o.dueDate,onChange:I=>S("dueDate",I.target.value),className:"glass-card hover:shadow-lg transition-all duration-300"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-3",children:[e.jsx(wr,{className:"h-4 w-4 inline mr-1"}),"Assign Team Members"]}),e.jsx("div",{className:"grid grid-cols-1 gap-2 max-h-40 overflow-y-auto",children:V.map(I=>{const H=$(I);return e.jsxs("div",{className:Ce("flex items-center gap-3 p-3 rounded-lg glass-card cursor-pointer transition-all hover:shadow-lg",c.includes(H.id)?"bg-primary/10 border-primary/30":"border-border hover:border-primary/30"),onClick:()=>A(H.id),children:[e.jsx($i,{checked:c.includes(H.id),onChange:()=>A(H.id)}),e.jsx("div",{className:"w-8 h-8 rounded-full glass-card flex items-center justify-center text-white text-xs font-medium bg-gradient-to-br from-blue-500 to-purple-600",children:H.avatar}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-sm",children:H.name}),e.jsx("div",{className:"text-xs text-muted-foreground",children:H.email})]})]},H.id)})})]}),c.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Selected Members"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:c.map(I=>{const H=V.find(ce=>ce.id===I);if(!H)return null;const se=$(H);return e.jsx(nt,{variant:"secondary",className:"glass-card",children:se.name},I)})})]})]})]})]})}),e.jsx(Ir,{value:"scheduling",className:"space-y-6",children:e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(ns,{className:"h-12 w-12 mx-auto mb-4 opacity-20"}),e.jsx("p",{children:"Scheduling features coming soon"})]})}),e.jsx(Ir,{value:"assignment",className:"space-y-6",children:e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(wr,{className:"h-12 w-12 mx-auto mb-4 opacity-20"}),e.jsx("p",{children:"Advanced assignment features coming soon"})]})}),e.jsx(Ir,{value:"dependencies",className:"space-y-6",children:e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(ri,{className:"h-12 w-12 mx-auto mb-4 opacity-20"}),e.jsx("p",{children:"Dependency management coming soon"})]})})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t border-border/20",children:[e.jsxs(de,{type:"button",variant:"outline",onClick:()=>{l({name:"",description:"",isRequired:!0,estimatedHours:"",dueDate:"",priority:"medium"}),h([]),j(null)},className:"glass-card hover:shadow-lg transition-all duration-300",children:[e.jsx(Zs,{className:"h-4 w-4 mr-2"}),"Reset Form"]}),e.jsx(de,{type:"submit",disabled:!k()||C,className:"glass-card hover:shadow-lg transition-all duration-300 bg-gradient-to-r from-blue-500 to-indigo-600 text-white border-0",children:C?e.jsxs(e.Fragment,{children:[e.jsx(ns,{className:"h-4 w-4 mr-2 animate-spin"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(_m,{className:"h-4 w-4 mr-2"}),"Create Stage"]})})]})]})]})}function lk({workspace:s,onBack:t,className:r,project:a}){const[n,i]=b.useState([]),[o,l]=b.useState(null),[c,h]=b.useState([]),[f,p]=b.useState([]),[v,u]=b.useState([]),[C,w]=b.useState(null),[x,j]=b.useState(!0),[_,T]=b.useState(!0),[U,R]=b.useState("pipeline"),[V,$]=b.useState("all"),[S,A]=b.useState("all"),[L,N]=b.useState("order"),[k,D]=b.useState(!1),[I,H]=b.useState(!1),[se,ce]=b.useState([]),[le,ne]=b.useState(null);b.useEffect(()=>{fe()},[s.id]),b.useEffect(()=>{if(o){const X=setTimeout(()=>{B(o.id)},100);return()=>clearTimeout(X)}},[o]);const fe=()=>he(this,null,function*(){try{j(!0);const[X,Q,W]=yield Promise.allSettled([wt.getWorkflowStages(s.id),wt.getWorkflowTemplates(),wt.getWorkflowMetrics(s.id)]);if(X.status==="fulfilled")i(X.value),T(!0),X.value.length>0&&!o&&l(X.value[0]);else{T(!1);const ve=M(a);i(ve),ve.length>0&&!o&&l(ve[0])}Q.status==="fulfilled"?u(Q.value):u([]),W.status==="fulfilled"?w(W.value):w(null)}catch(X){const Q=M(a);i(Q),Q.length>0&&!o&&l(Q[0]),u([]),w(null)}finally{j(!1)}}),Se=X=>{switch(X){case"delivered":case"render-approved":return"completed";case"preview":case"preview-feedback":case"preview-approved":case"rendering":case"waiting-preview-reply":case"waiting-render-reply":return"in_progress";default:return"not_started"}},M=X=>{if(!X)return[];const Q=Se(X.status);return[{id:"stage-1",workspaceId:s.id,name:"Project Brief Review",description:`Review project requirements for ${X.name}`,order:0,isRequired:!0,assignedTo:X.artists.map(ve=>ve.id),status:Q,dependencies:[],estimatedHours:4,actualHours:0,dueDate:X.startDate,priority:X.priority,checklistItems:[],completedAt:Q==="completed"?X.updatedAt:null,completedBy:X.projectManager,createdAt:X.createdAt,updatedAt:X.updatedAt},{id:"stage-2",workspaceId:s.id,name:"Design Development",description:`Create initial design concepts for ${X.name}`,order:1,isRequired:!0,assignedTo:X.artists.map(ve=>ve.id),status:Q,dependencies:["stage-1"],estimatedHours:16,actualHours:0,dueDate:new Date(new Date(X.startDate).getTime()+7*24*60*60*1e3).toISOString(),priority:X.priority,checklistItems:[],completedAt:Q==="completed"?X.updatedAt:null,completedBy:X.projectManager,createdAt:X.createdAt,updatedAt:X.updatedAt},{id:"stage-3",workspaceId:s.id,name:"Client Review",description:`Present designs to ${X.client} for feedback`,order:2,isRequired:!0,assignedTo:[X.projectManager],status:Q==="completed"?"completed":"not_started",dependencies:["stage-2"],estimatedHours:4,actualHours:0,dueDate:X.endDate,priority:X.priority,checklistItems:[],completedAt:Q==="completed"?X.updatedAt:null,completedBy:X.projectManager,createdAt:X.createdAt,updatedAt:X.updatedAt}]},B=X=>he(this,null,function*(){if(!_){const Q=J(X,a);h(Q),p([]);return}try{const[Q,W]=yield Promise.allSettled([wt.getStageChecklistItems(X),wt.getWorkflowApprovals({stageId:X})]);if(Q.status==="fulfilled")h(Q.value);else{T(!1);const ve=J(X,a);h(ve)}W.status==="fulfilled"?p(W.value):p([])}catch(Q){T(!1);const W=J(X,a);h(W),p([])}}),J=(X,Q)=>{if(!Q)return[];const W=Se(Q.status);return[{id:"item-1",stageId:X,text:`Review ${Q.name} requirements`,description:`Go through the detailed requirements for ${Q.name} and note any questions`,completed:W!=="not_started",completedBy:W!=="not_started"?Q.projectManager:void 0,completedAt:W!=="not_started"?Q.updatedAt:void 0,estimatedHours:2,actualHours:W!=="not_started"?1.5:void 0,priority:Q.priority,tags:[],dependencies:[],createdAt:Q.createdAt,updatedAt:Q.updatedAt},{id:"item-2",stageId:X,text:`Schedule kickoff meeting with ${Q.client}`,description:`Coordinate with ${Q.client} and team for project kickoff`,completed:W==="completed",completedBy:W==="completed"?Q.projectManager:void 0,completedAt:W==="completed"?Q.updatedAt:void 0,estimatedHours:1,actualHours:W==="completed"?.5:void 0,priority:"medium",tags:[],dependencies:[],createdAt:Q.createdAt,updatedAt:Q.updatedAt},{id:"item-3",stageId:X,text:"Create project timeline",description:`Draft initial timeline with key milestones for ${Q.name}`,completed:!1,completedBy:void 0,completedAt:void 0,estimatedHours:3,actualHours:void 0,priority:"medium",tags:[],dependencies:[],createdAt:Q.createdAt,updatedAt:Q.updatedAt}]},te=()=>{let X=n;return V!=="all"&&(X=X.filter(Q=>Q.status===V)),S!=="all"&&(X=X.filter(Q=>Q.assignedTo.includes(S))),X.sort((Q,W)=>{switch(L){case"dueDate":return new Date(Q.dueDate).getTime()-new Date(W.dueDate).getTime();case"priority":{const ve={urgent:0,high:1,medium:2,low:3};return ve[Q.priority]-ve[W.priority]}case"status":{const ve={not_started:0,in_progress:1,completed:2,skipped:3,blocked:4};return ve[Q.status]-ve[W.status]}case"order":default:return Q.order-W.order}})},G=()=>{if(n.length===0)return 0;const X=n.filter(Q=>Q.status==="completed").length;return Math.round(X/n.length*100)},ae=X=>{const Q={not_started:{color:"bg-slate-500/20 border-slate-500/30",text:"Not Started",icon:ns},in_progress:{color:"bg-blue-500/20 border-blue-500/30",text:"In Progress",icon:ax},completed:{color:"bg-green-500/20 border-green-500/30",text:"Completed",icon:zr},skipped:{color:"bg-gray-500/20 border-gray-500/30",text:"Skipped",icon:tl}},W=Q[X]||Q.not_started,ve=W.icon;return e.jsxs(nt,{variant:"outline",className:Ce("text-xs border backdrop-blur-sm",W.color),children:[e.jsx(ve,{className:"h-3 w-3 mr-1"}),W.text]})},ie=X=>{i(Q=>[...Q,X].sort((W,ve)=>W.order-ve.order)),l(X),D(!1)},ue=X=>he(this,null,function*(){try{yield wt.completeWorkflowStage(X),yield fe()}catch(Q){i(W=>W.map(ve=>ve.id===X?Z(E({},ve),{status:"completed",completedAt:new Date().toISOString(),completedBy:"current-user"}):ve)),(o==null?void 0:o.id)===X&&l(W=>W?Z(E({},W),{status:"completed",completedAt:new Date().toISOString(),completedBy:"current-user"}):null)}}),Ae=X=>he(this,null,function*(){try{yield wt.updateWorkflowStage(X,{status:"in_progress"}),yield fe()}catch(Q){i(W=>W.map(ve=>ve.id===X?Z(E({},ve),{status:"in_progress"}):ve)),(o==null?void 0:o.id)===X&&l(W=>W?Z(E({},W),{status:"in_progress"}):null)}}),re=()=>{o&&B(o.id)},je=()=>{o&&B(o.id)},Le=te();return x?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-8 bg-muted rounded w-1/3"}),e.jsx("div",{className:"h-4 bg-muted rounded w-2/3"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[...Array(3)].map((X,Q)=>e.jsx("div",{className:"h-32 bg-muted rounded"},Q))})]})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex flex-wrap justify-between items-center mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(de,{variant:"ghost",size:"sm",onClick:t,children:e.jsx(qa,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h1",{className:"text-2xl font-bold",children:s.name}),a&&e.jsxs("div",{className:"flex gap-1",children:[e.jsx(nt,{variant:"secondary",className:"text-xs",children:a.status}),e.jsx(nt,{variant:"outline",className:"text-xs",children:a.priority})]})]}),e.jsx("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:a&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Sa,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:a.client})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Na,{className:"h-3.5 w-3.5"}),e.jsxs("span",{children:[n.length," stages"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(zr,{className:"h-3.5 w-3.5"}),e.jsxs("span",{children:[G(),"% complete"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Cs,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:Jt(s.createdAt,"MMMM d, yyyy")})]})]})})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-2 md:mt-0",children:[e.jsxs(Ss,{value:U,onValueChange:X=>R(X),children:[e.jsx(ys,{className:"w-32",children:e.jsx(ks,{})}),e.jsxs(bs,{children:[e.jsx(at,{value:"pipeline",children:"Pipeline"}),e.jsx(at,{value:"list",children:"List"}),e.jsx(at,{value:"kanban",children:"Kanban"})]})]}),e.jsxs(Ss,{value:V,onValueChange:$,children:[e.jsx(ys,{className:"w-32",children:e.jsx(ks,{})}),e.jsxs(bs,{children:[e.jsx(at,{value:"all",children:"All Stages"}),e.jsx(at,{value:"not_started",children:"Not Started"}),e.jsx(at,{value:"in_progress",children:"In Progress"}),e.jsx(at,{value:"completed",children:"Completed"})]})]}),e.jsxs(de,{onClick:()=>D(!k),variant:"outline",size:"sm",children:[e.jsx(ws,{className:"h-4 w-4 mr-2"}),k?"Cancel":"Add Stage"]})]})]}),e.jsx("div",{className:"mb-6",children:e.jsx(Xe,{children:e.jsxs(Ze,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Overall Progress"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[G(),"%"]})]}),e.jsx("div",{className:"w-full bg-muted/20 rounded-full h-2",children:e.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-300",style:{width:`${G()}%`}})}),e.jsxs("div",{className:"flex items-center justify-between mt-2 text-xs text-muted-foreground",children:[e.jsxs("span",{children:[n.filter(X=>X.status==="completed").length," of ",n.length," stages completed"]}),a&&e.jsxs("span",{children:["Due ",Jt(a.endDate)]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 mt-4",children:[e.jsx("div",{className:"glass-card p-3 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-gradient-to-br from-green-500 to-emerald-600 flex items-center justify-center",children:e.jsx(zr,{className:"h-3 w-3 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Completed"}),e.jsx("p",{className:"text-sm font-bold text-green-600",children:n.filter(X=>X.status==="completed").length})]})]})}),e.jsx("div",{className:"glass-card p-3 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center",children:e.jsx(Wi,{className:"h-3 w-3 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"In Progress"}),e.jsx("p",{className:"text-sm font-bold text-blue-600",children:n.filter(X=>X.status==="in_progress").length})]})]})}),e.jsx("div",{className:"glass-card p-3 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-gradient-to-br from-orange-500 to-red-600 flex items-center justify-center",children:e.jsx(ns,{className:"h-3 w-3 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Pending"}),e.jsx("p",{className:"text-sm font-bold text-orange-600",children:n.filter(X=>X.status==="not_started").length})]})]})})]})]})})}),k&&e.jsx("div",{className:"mb-6",children:e.jsx(Xe,{children:e.jsx(Ze,{className:"p-6",children:e.jsx(ok,{workspaceId:s.id,onStageCreated:ie,nextOrder:n.length,existingStages:n,onClose:()=>D(!1),project:a})})})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[U==="pipeline"&&e.jsx(rk,{stages:Le,selectedStage:o,onStageSelect:l,onStageCompleted:ue,onStageStarted:Ae}),U==="list"&&e.jsx("div",{className:"space-y-4",children:Le.map(X=>e.jsx(sk,{stage:X,isSelected:(o==null?void 0:o.id)===X.id,onClick:()=>l(X),onCompleted:()=>ue(X.id),onStarted:()=>Ae(X.id)},X.id))}),U==="kanban"&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:["not_started","in_progress","completed"].map(X=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:Ce("w-3 h-3 rounded-full",X==="not_started"&&"bg-slate-500",X==="in_progress"&&"bg-blue-500",X==="completed"&&"bg-green-500")}),e.jsx("h3",{className:"font-semibold capitalize",children:X.replace("_"," ")}),e.jsx(nt,{variant:"secondary",className:"text-xs",children:n.filter(Q=>Q.status===X).length})]}),e.jsx("div",{className:"space-y-2",children:n.filter(Q=>Q.status===X).map(Q=>e.jsx(Xe,{className:Ce("cursor-pointer transition-all hover:shadow-md",(o==null?void 0:o.id)===Q.id&&"ring-2 ring-primary"),onClick:()=>l(Q),children:e.jsxs(Ze,{className:"p-3",children:[e.jsx("h4",{className:"font-medium text-sm",children:Q.name}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[Q.assignedTo.length," assigned"]})]})},Q.id))})]},X))})]}),o&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(Xe,{children:[e.jsx(Dt,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(zt,{className:"text-lg",children:o.name}),ae(o.status)]})}),e.jsxs(Ze,{className:"space-y-3",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:o.description}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(wr,{className:"h-4 w-4"}),e.jsxs("span",{children:[o.assignedTo.length," assigned"]})]}),o.dueDate&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(ns,{className:"h-4 w-4"}),e.jsxs("span",{children:["Due ",Jt(o.dueDate)]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(zr,{className:"h-4 w-4"}),e.jsxs("span",{children:[c.filter(X=>X.completed).length," / ",c.length," tasks completed"]})]})]})]}),e.jsxs(Xe,{className:"lg:col-span-2",children:[e.jsx(Dt,{children:e.jsx(zt,{className:"text-lg",children:"Checklist"})}),e.jsx(Ze,{children:e.jsx(ak,{stageId:o.id,items:c,onUpdated:re})})]})]}),e.jsxs(Xe,{children:[e.jsx(Dt,{children:e.jsx(zt,{className:"text-lg",children:"Approvals"})}),e.jsx(Ze,{children:e.jsx(nk,{stageId:o.id,workspaceId:s.id,approvals:f,onUpdated:je})})]})]})]})]})}function ck({tasks:s,milestones:t,dependencies:r,viewMode:a,timeRange:n,onTaskUpdated:i}){const[o,l]=b.useState(1200),[c,h]=b.useState(null),f=b.useRef(null),v=(()=>{if(s.length===0){const A=new Date;return{start:new Date(A.getTime()-30*24*60*60*1e3),end:new Date(A.getTime()+60*24*60*60*1e3)}}const R=[...s.map(A=>new Date(A.startDate)),...s.map(A=>new Date(A.endDate)),...t.map(A=>new Date(A.dueDate))],V=new Date(Math.min(...R.map(A=>A.getTime()))),$=new Date(Math.max(...R.map(A=>A.getTime()))),S=n==="week"?7:n==="month"?30:90;return{start:new Date(V.getTime()-S*24*60*60*1e3),end:new Date($.getTime()+S*24*60*60*1e3)}})(),u=Math.ceil((v.end.getTime()-v.start.getTime())/(24*60*60*1e3)),w=(()=>{const R=[],V=new Date(v.start),$=n==="week"?1:n==="month"?7:30;for(;V<=v.end;)R.push(new Date(V)),V.setDate(V.getDate()+$);return R})(),x=o/u,j=R=>{const V=new Date(R.startDate),$=new Date(R.endDate),S=Math.floor((V.getTime()-v.start.getTime())/(24*60*60*1e3)),A=Math.ceil(($.getTime()-V.getTime())/(24*60*60*1e3));return{left:Math.max(0,S*x),width:Math.max(x*.5,A*x)}},_=R=>{const V=new Date(R.dueDate);return Math.floor((V.getTime()-v.start.getTime())/(24*60*60*1e3))*x},T=R=>{switch(R){case"completed":return"bg-green-500";case"in_progress":return"bg-blue-500";case"on_hold":return"bg-yellow-500";case"cancelled":return"bg-red-500";default:return"bg-gray-400"}},U=R=>{switch(R){case"urgent":return"border-red-500";case"high":return"border-orange-500";case"medium":return"border-blue-500";default:return"border-gray-400"}};return a==="table"?e.jsx(Xe,{className:"glass-card border-0",children:e.jsx(Ze,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200/20",children:[e.jsx("th",{className:"text-left p-4 font-medium",children:"Task"}),e.jsx("th",{className:"text-left p-4 font-medium",children:"Status"}),e.jsx("th",{className:"text-left p-4 font-medium",children:"Priority"}),e.jsx("th",{className:"text-left p-4 font-medium",children:"Progress"}),e.jsx("th",{className:"text-left p-4 font-medium",children:"Start Date"}),e.jsx("th",{className:"text-left p-4 font-medium",children:"End Date"}),e.jsx("th",{className:"text-left p-4 font-medium",children:"Hours"})]})}),e.jsx("tbody",{children:s.map(R=>e.jsxs("tr",{className:"border-b border-gray-200/10 hover:bg-gray-50/5 transition-colors",children:[e.jsx("td",{className:"p-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:R.name}),e.jsx("p",{className:"text-sm text-muted-foreground truncate max-w-xs",children:R.description})]})}),e.jsx("td",{className:"p-4",children:e.jsx(nt,{variant:"secondary",className:Ce("text-white",T(R.status)),children:R.status.replace("_"," ")})}),e.jsx("td",{className:"p-4",children:e.jsx(nt,{variant:"outline",className:U(R.priority),children:R.priority})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-20 h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-primary rounded-full transition-all",style:{width:`${R.progressPercentage}%`}})}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[R.progressPercentage,"%"]})]})}),e.jsx("td",{className:"p-4 text-sm",children:Jt(R.startDate)}),e.jsx("td",{className:"p-4 text-sm",children:Jt(R.endDate)}),e.jsxs("td",{className:"p-4 text-sm",children:[R.actualHours,"/",R.estimatedHours,"h"]})]},R.id))})]})})})}):a==="calendar"?e.jsx(Xe,{className:"glass-card border-0",children:e.jsx(Ze,{className:"p-6",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Cs,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Calendar View"}),e.jsx("p",{className:"text-muted-foreground",children:"Calendar view will be implemented in Phase 4"})]})})}):e.jsx(Hi,{children:e.jsx(Xe,{className:"glass-card border-0",children:e.jsx(Ze,{className:"p-0",children:e.jsxs("div",{ref:f,className:"overflow-x-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white/5 backdrop-blur-sm border-b border-gray-200/20 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Gantt Chart"}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(Cs,{className:"h-4 w-4"}),Jt(v.start)," - ",Jt(v.end)]})]}),e.jsx("div",{className:"relative",style:{width:o},children:e.jsx("div",{className:"flex",children:w.map((R,V)=>e.jsx("div",{className:"flex-shrink-0 text-xs text-muted-foreground border-r border-gray-200/20 pr-2",style:{width:n==="week"?x:n==="month"?x*7:x*30},children:n==="week"?R.toLocaleDateString("en-US",{month:"short",day:"numeric"}):n==="month"?R.toLocaleDateString("en-US",{month:"short",day:"numeric"}):R.toLocaleDateString("en-US",{month:"short",year:"numeric"})},V))})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"space-y-2",children:s.map((R,V)=>{const $=j(R);return e.jsxs("div",{className:"relative h-12 flex items-center",children:[e.jsx("div",{className:"w-80 pr-4 flex-shrink-0",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:Ce("w-3 h-3 rounded-full",T(R.status))}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm truncate",children:R.name}),e.jsxs("p",{className:"text-xs text-muted-foreground truncate",children:[R.estimatedHours,"h • ",R.priority]})]})]})}),e.jsxs("div",{className:"relative flex-1",style:{minWidth:o},children:[e.jsx("div",{className:"absolute inset-0 flex",children:w.map((S,A)=>e.jsx("div",{className:"border-r border-gray-200/10",style:{width:n==="week"?x:n==="month"?x*7:x*30}},A))}),e.jsxs(di,{children:[e.jsx(ui,{asChild:!0,children:e.jsxs("div",{className:Ce("absolute top-1/2 -translate-y-1/2 h-6 rounded-md cursor-pointer transition-all hover:scale-105","glass-card border-l-4 hover:shadow-lg",U(R.priority),c===R.id&&"ring-2 ring-blue-500"),style:{left:$.left,width:$.width},onClick:()=>h(R.id),children:[e.jsx("div",{className:"h-full bg-gradient-primary rounded-r-md opacity-60",style:{width:`${R.progressPercentage}%`}}),e.jsx("div",{className:"absolute inset-0 flex items-center px-2",children:e.jsx("span",{className:"text-xs font-medium text-white drop-shadow-sm truncate",children:$.width>100?R.name:""})})]})}),e.jsx(Nn,{className:"glass-card border-0",children:e.jsxs("div",{className:"p-2",children:[e.jsx("p",{className:"font-medium",children:R.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:R.description}),e.jsxs("div",{className:"mt-2 space-y-1 text-xs",children:[e.jsxs("p",{children:["Status: ",e.jsx(nt,{variant:"secondary",className:"text-xs",children:R.status})]}),e.jsxs("p",{children:["Progress: ",R.progressPercentage,"%"]}),e.jsxs("p",{children:["Duration: ",Jt(R.startDate)," - ",Jt(R.endDate)]}),e.jsxs("p",{children:["Hours: ",R.actualHours,"/",R.estimatedHours]})]})]})})]})]})]},R.id)})}),t.length>0&&e.jsxs("div",{className:"mt-8",children:[e.jsxs("h4",{className:"text-sm font-medium mb-4 flex items-center gap-2",children:[e.jsx(za,{className:"h-4 w-4"}),"Milestones"]}),e.jsxs("div",{className:"relative h-8",style:{minWidth:o},children:[e.jsx("div",{className:"absolute inset-0 flex",children:w.map((R,V)=>e.jsx("div",{className:"border-r border-gray-200/10",style:{width:n==="week"?x:n==="month"?x*7:x*30}},V))}),t.map(R=>e.jsxs(di,{children:[e.jsx(ui,{asChild:!0,children:e.jsx("div",{className:"absolute top-1/2 -translate-y-1/2 -translate-x-1/2 cursor-pointer",style:{left:_(R)},children:e.jsx("div",{className:Ce("w-4 h-4 rotate-45 border-2 border-white shadow-md hover:scale-125 transition-transform",R.isCritical?"bg-red-500":"bg-blue-500"),style:{backgroundColor:R.color}})})}),e.jsx(Nn,{className:"glass-card border-0",children:e.jsxs("div",{className:"p-2",children:[e.jsx("p",{className:"font-medium",children:R.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:R.description}),e.jsxs("div",{className:"mt-2 space-y-1 text-xs",children:[e.jsxs("p",{children:["Due: ",Jt(R.dueDate)]}),e.jsxs("p",{children:["Status: ",e.jsx(nt,{variant:"secondary",className:"text-xs",children:R.status})]}),R.isCritical&&e.jsx("p",{className:"text-red-500 font-medium",children:"Critical Milestone"})]})]})})]},R.id))]})]}),e.jsx("div",{className:"relative",style:{minWidth:o},children:(()=>{const V=Math.floor((new Date().getTime()-v.start.getTime())/(24*60*60*1e3))*x;return V>=0&&V<=o?e.jsx("div",{className:"absolute top-0 bottom-0 w-0.5 bg-red-500 z-10",style:{left:V},children:e.jsx("div",{className:"absolute -top-2 -left-1 w-2 h-2 bg-red-500 rounded-full"})}):null})()})]})]})})})})}var nf="Progress",dk=100,[uk,Zk]=Sn(nf),[hk,mk]=uk(nf),W2=b.forwardRef((s,t)=>{const f=s,{__scopeProgress:r,value:a=null,max:n,getValueLabel:i=fk}=f,o=Ee(f,["__scopeProgress","value","max","getValueLabel"]);(n||n===0)&&Gp(n);const l=Gp(n)?n:dk;a!==null&&Jp(a,l);const c=Jp(a,l)?a:null,h=Yd(c)?i(c,l):void 0;return e.jsx(hk,{scope:r,value:c,max:l,children:e.jsx(Qt.div,Z(E({"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":Yd(c)?c:void 0,"aria-valuetext":h,role:"progressbar","data-state":Y2(c,l),"data-value":c!=null?c:void 0,"data-max":l},o),{ref:t}))})});W2.displayName=nf;var H2="ProgressIndicator",V2=b.forwardRef((s,t)=>{var o;const i=s,{__scopeProgress:r}=i,a=Ee(i,["__scopeProgress"]),n=mk(H2,r);return e.jsx(Qt.div,Z(E({"data-state":Y2(n.value,n.max),"data-value":(o=n.value)!=null?o:void 0,"data-max":n.max},a),{ref:t}))});V2.displayName=H2;function fk(s,t){return`${Math.round(s/t*100)}%`}function Y2(s,t){return s==null?"indeterminate":s===t?"complete":"loading"}function Yd(s){return typeof s=="number"}function Gp(s){return Yd(s)&&!isNaN(s)&&s>0}function Jp(s,t){return Yd(s)&&!isNaN(s)&&s<=t&&s>=0}var G2=W2,pk=V2;const uc=b.forwardRef((n,a)=>{var i=n,{className:s,value:t}=i,r=Ee(i,["className","value"]);return e.jsx(G2,Z(E({ref:a,className:Ce("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s)},r),{children:e.jsx(pk,{className:"h-full w-full flex-1 bg-indicator transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}))});uc.displayName=G2.displayName;function gk({tasks:s,onTaskUpdated:t}){const[r,a]=b.useState("all"),[n,i]=b.useState("all"),o=s.filter(u=>{const C=r==="all"||u.status===r,w=n==="all"||u.priority===n;return C&&w}),l=u=>{switch(u){case"completed":return"bg-green-500";case"in_progress":return"bg-blue-500";case"on_hold":return"bg-yellow-500";case"cancelled":return"bg-red-500";default:return"bg-gray-400"}},c=u=>{switch(u){case"urgent":return"border-red-500 text-red-600";case"high":return"border-orange-500 text-orange-600";case"medium":return"border-blue-500 text-blue-600";default:return"border-gray-400 text-gray-600"}},h=u=>{switch(u){case"completed":return e.jsx(zr,{className:"h-4 w-4"});case"in_progress":return e.jsx(Wi,{className:"h-4 w-4"});case"on_hold":return e.jsx(Ih,{className:"h-4 w-4"});default:return e.jsx(ns,{className:"h-4 w-4"})}},f=(u,C)=>he(this,null,function*(){t()}),p=u=>{},v=u=>{};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Status:"}),e.jsxs("select",{value:r,onChange:u=>a(u.target.value),className:"glass-card border border-gray-200/20 rounded-md px-3 py-1 text-sm hover-shimmer cyrus-ui",children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"not_started",children:"Not Started"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"on_hold",children:"On Hold"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Priority:"}),e.jsxs("select",{value:n,onChange:u=>i(u.target.value),className:"glass-card border border-gray-200/20 rounded-md px-3 py-1 text-sm hover-shimmer cyrus-ui",children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"urgent",children:"Urgent"})]})]}),e.jsxs("div",{className:"ml-auto text-sm text-muted-foreground",children:[o.length," of ",s.length," tasks"]})]}),e.jsx("div",{className:"grid gap-4",children:o.map(u=>e.jsx(Xe,{className:"glass-card border-0 hover:shadow-lg transition-shadow",children:e.jsx(Ze,{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:Ce("w-3 h-3 rounded-full",l(u.status))}),e.jsx("h3",{className:"font-semibold truncate",children:u.name}),e.jsxs(nt,{variant:"outline",className:Ce("text-xs",c(u.priority)),children:[e.jsx(za,{className:"h-3 w-3 mr-1"}),u.priority]})]}),u.description&&e.jsx("p",{className:"text-sm text-muted-foreground mb-4 line-clamp-2",children:u.description}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Progress"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[u.progressPercentage,"%"]})]}),e.jsx(uc,{value:u.progressPercentage,className:"h-2"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Start Date"}),e.jsx("p",{className:"font-medium",children:Jt(u.startDate)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"End Date"}),e.jsx("p",{className:"font-medium",children:Jt(u.endDate)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Hours"}),e.jsxs("p",{className:"font-medium",children:[u.actualHours,"/",u.estimatedHours,"h"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Status"}),e.jsxs("div",{className:"flex items-center gap-1",children:[h(u.status),e.jsx("span",{className:"font-medium capitalize",children:u.status.replace("_"," ")})]})]})]})]}),e.jsxs(al,{children:[e.jsx(nl,{asChild:!0,children:e.jsx(de,{variant:"ghost",size:"sm",className:"hover-shimmer cyrus-ui",children:e.jsx(Ey,{className:"h-4 w-4"})})}),e.jsxs(Ki,{className:"glass-card border-0",children:[e.jsxs(ds,{onClick:()=>p(u.id),children:[e.jsx(dx,{className:"h-4 w-4 mr-2"}),"Edit Task"]}),u.status!=="in_progress"&&e.jsxs(ds,{onClick:()=>f(u.id),children:[e.jsx(Wi,{className:"h-4 w-4 mr-2"}),"Start Task"]}),u.status==="in_progress"&&e.jsxs(ds,{onClick:()=>f(u.id),children:[e.jsx(Ih,{className:"h-4 w-4 mr-2"}),"Pause Task"]}),u.status!=="completed"&&e.jsxs(ds,{onClick:()=>f(u.id),children:[e.jsx(zr,{className:"h-4 w-4 mr-2"}),"Mark Complete"]}),e.jsxs(ds,{onClick:()=>v(u.id),className:"text-red-600 focus:text-red-600",children:[e.jsx($r,{className:"h-4 w-4 mr-2"}),"Delete Task"]})]})]})]})})},u.id))}),o.length===0&&e.jsx(Xe,{className:"glass-card border-0",children:e.jsxs(Ze,{className:"p-12 text-center",children:[e.jsx(ns,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No tasks found"}),e.jsx("p",{className:"text-muted-foreground",children:s.length===0?"No tasks have been created yet":"No tasks match the current filters"})]})})]})}const xk=[{id:"1",name:"Alex Chen",email:"alex@example.com",role:"Project Manager",hourlyRate:75,maxHoursPerWeek:40},{id:"2",name:"Sarah Wilson",email:"sarah@example.com",role:"Senior Designer",hourlyRate:65,maxHoursPerWeek:40},{id:"3",name:"Mike Johnson",email:"mike@example.com",role:"Developer",hourlyRate:70,maxHoursPerWeek:40},{id:"4",name:"Emily Davis",email:"emily@example.com",role:"UX Designer",hourlyRate:60,maxHoursPerWeek:35}];function vk({tasks:s,assignments:t}){const[r,a]=b.useState("week"),i=xk.map(c=>{const h=s.filter(x=>x.createdBy===c.id||Math.random()>.5),f=h.reduce((x,j)=>x+j.estimatedHours,0),p=h.reduce((x,j)=>x+j.actualHours,0),v=h.filter(x=>x.status==="completed").length,u=h.filter(x=>x.status==="in_progress").length,C=c.maxHoursPerWeek>0?Math.min(100,f/c.maxHoursPerWeek*100):0,w=f>0?(f-p)/f*100:0;return Z(E({},c),{tasks:h,totalEstimatedHours:f,totalActualHours:p,completedTasks:v,inProgressTasks:u,utilizationPercentage:C,efficiency:Math.max(0,w),isOverallocated:C>100})}),o=l=>l>80?"text-green-600":l>60?"text-blue-600":l>40?"text-yellow-600":"text-red-600";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Resource Planning"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Team workload and capacity management"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Period:"}),e.jsxs("select",{value:r,onChange:l=>a(l.target.value),className:"glass-card border border-gray-200/20 rounded-md px-3 py-1 text-sm hover-shimmer cyrus-ui",children:[e.jsx("option",{value:"week",children:"This Week"}),e.jsx("option",{value:"month",children:"This Month"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(Xe,{className:"glass-card border-0",children:e.jsx(Ze,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(wr,{className:"h-4 w-4 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Team Members"}),e.jsx("p",{className:"text-lg font-semibold",children:i.length})]})]})})}),e.jsx(Xe,{className:"glass-card border-0",children:e.jsx(Ze,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ns,{className:"h-4 w-4 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Hours"}),e.jsxs("p",{className:"text-lg font-semibold",children:[i.reduce((l,c)=>l+c.totalEstimatedHours,0),"h"]})]})]})})}),e.jsx(Xe,{className:"glass-card border-0",children:e.jsx(Ze,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Cd,{className:"h-4 w-4 text-orange-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Avg Utilization"}),e.jsxs("p",{className:"text-lg font-semibold",children:[Math.round(i.reduce((l,c)=>l+c.utilizationPercentage,0)/i.length),"%"]})]})]})})}),e.jsx(Xe,{className:"glass-card border-0",children:e.jsx(Ze,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qi,{className:"h-4 w-4 text-red-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Overallocated"}),e.jsx("p",{className:"text-lg font-semibold",children:i.filter(l=>l.isOverallocated).length})]})]})})})]}),e.jsx("div",{className:"grid gap-4",children:i.map(l=>e.jsxs(Xe,{className:"glass-card border-0",children:[e.jsx(Dt,{className:"pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-primary flex items-center justify-center text-white font-medium",children:l.name.split(" ").map(c=>c[0]).join("")}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:l.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:l.role})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[l.isOverallocated&&e.jsxs(nt,{variant:"destructive",className:"text-xs",children:[e.jsx(qi,{className:"h-3 w-3 mr-1"}),"Overallocated"]}),e.jsxs(nt,{variant:"outline",className:"text-xs",children:["$",l.hourlyRate,"/hr"]})]})]})}),e.jsxs(Ze,{className:"pt-0",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Utilization"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[l.totalEstimatedHours,"h / ",l.maxHoursPerWeek,"h"]})]}),e.jsx(uc,{value:Math.min(100,l.utilizationPercentage),className:"h-2"}),e.jsxs("div",{className:"flex items-center justify-between mt-1",children:[e.jsxs("span",{className:Ce("text-xs font-medium",l.utilizationPercentage>100?"text-red-600":"text-muted-foreground"),children:[Math.round(l.utilizationPercentage),"%"]}),l.utilizationPercentage>100&&e.jsxs("span",{className:"text-xs text-red-600",children:["+",Math.round(l.utilizationPercentage-100),"% over capacity"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Tasks"}),e.jsx("p",{className:"font-medium",children:l.tasks.length})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Completed"}),e.jsx("p",{className:"font-medium text-green-600",children:l.completedTasks})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"In Progress"}),e.jsx("p",{className:"font-medium text-blue-600",children:l.inProgressTasks})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Efficiency"}),e.jsxs("p",{className:Ce("font-medium",o(l.efficiency)),children:[Math.round(l.efficiency),"%"]})]})]}),l.tasks.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h5",{className:"text-sm font-medium mb-2",children:"Current Tasks"}),e.jsxs("div",{className:"space-y-2",children:[l.tasks.slice(0,3).map(c=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50/50 rounded",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[e.jsx("div",{className:Ce("w-2 h-2 rounded-full",c.status==="completed"?"bg-green-500":c.status==="in_progress"?"bg-blue-500":"bg-gray-400")}),e.jsx("span",{className:"text-sm truncate",children:c.name})]}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[c.estimatedHours,"h"]})]},c.id)),l.tasks.length>3&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",l.tasks.length-3," more tasks"]})]})]})]})]},l.id))}),e.jsxs(Xe,{className:"glass-card border-0",children:[e.jsx(Dt,{children:e.jsxs(zt,{className:"flex items-center gap-2",children:[e.jsx(Cd,{className:"h-4 w-4"}),"Resource Recommendations"]})}),e.jsx(Ze,{children:e.jsxs("div",{className:"space-y-3",children:[i.filter(l=>l.isOverallocated).length>0&&e.jsxs("div",{className:"p-3 bg-red-50/50 border border-red-200/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(qi,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{className:"text-sm font-medium text-red-700",children:"Overallocation Alert"})]}),e.jsxs("p",{className:"text-sm text-red-600",children:[i.filter(l=>l.isOverallocated).map(l=>l.name).join(", "),i.filter(l=>l.isOverallocated).length===1?" is":" are"," overallocated. Consider redistributing tasks or adjusting timelines."]})]}),i.some(l=>l.utilizationPercentage<60)&&e.jsxs("div",{className:"p-3 bg-blue-50/50 border border-blue-200/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Cd,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-blue-700",children:"Capacity Available"})]}),e.jsxs("p",{className:"text-sm text-blue-600",children:[i.filter(l=>l.utilizationPercentage<60).map(l=>l.name).join(", "),i.filter(l=>l.utilizationPercentage<60).length===1?" has":" have"," available capacity for additional tasks."]})]}),i.every(l=>l.utilizationPercentage>=60&&l.utilizationPercentage<=100)&&e.jsxs("div",{className:"p-3 bg-green-50/50 border border-green-200/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(wr,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-green-700",children:"Optimal Allocation"})]}),e.jsx("p",{className:"text-sm text-green-600",children:"Team resources are optimally allocated with good utilization rates."})]})]})})]})]})}function yk({workspaceId:s,onTaskCreated:t,project:r}){const[a,n]=b.useState({name:"",description:"",startDate:"",endDate:"",priority:"medium",estimatedHours:""}),[i,o]=b.useState([]),[l,c]=b.useState(!1),h=(r==null?void 0:r.artists)||[],f=r!=null&&r.projectManager?[{id:r.projectManager,name:r.projectManager}]:[],p=[...h,...f],v=w=>({id:w.id,name:w.name,email:`${w.name.toLowerCase().replace(" ",".")}@example.com`,avatar:w.name.split(" ").map(x=>x[0]).join("").toUpperCase()}),u=w=>he(this,null,function*(){if(w.preventDefault(),!(!a.name.trim()||!a.startDate||!a.endDate))try{c(!0);const x={name:a.name.trim(),description:a.description.trim(),startDate:a.startDate,endDate:a.endDate,priority:a.priority,estimatedHours:parseFloat(a.estimatedHours)||0,status:"not_started"};try{const j=yield wt.createTimelineTask(s,x);t(j)}catch(j){const _=Z(E({id:`task-${Date.now()}`,workspaceId:s},x),{progressPercentage:0,actualHours:0,parentTaskId:null,createdBy:"1",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()});t(_)}}catch(x){}finally{c(!1)}}),C=w=>{o(x=>x.includes(w)?x.filter(j=>j!==w):[...x,w])};return e.jsxs("div",{className:"w-full space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold bg-gradient-primary bg-clip-text text-transparent",children:"Add a new task to the timeline"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Create a new task with timeline, priority, and team assignment"})]}),e.jsxs("form",{onSubmit:u,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"glass-card p-6 rounded-lg space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(tl,{className:"h-5 w-5 text-primary"}),e.jsx("h3",{className:"font-semibold",children:"Task Information"})]}),e.jsxs("div",{children:[e.jsx(kt,{htmlFor:"taskName",className:"text-sm font-medium",children:"Task Name"}),e.jsx(It,{id:"taskName",value:a.name,onChange:w=>n(x=>Z(E({},x),{name:w.target.value})),placeholder:"Enter task name...",className:"glass-card hover:shadow-lg transition-all duration-300",required:!0})]}),e.jsxs("div",{children:[e.jsx(kt,{htmlFor:"taskDescription",className:"text-sm font-medium",children:"Description"}),e.jsx(br,{id:"taskDescription",value:a.description,onChange:w=>n(x=>Z(E({},x),{description:w.target.value})),placeholder:"Describe the task...",rows:3,className:"glass-card hover:shadow-lg transition-all duration-300"})]})]}),e.jsxs("div",{className:"glass-card p-6 rounded-lg space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(wr,{className:"h-5 w-5 text-primary"}),e.jsx("label",{className:"text-sm font-medium",children:"Assign Team Members"}),e.jsxs(nt,{variant:"secondary",className:"glass-card",children:[i.length," selected"]})]}),e.jsx("div",{className:"space-y-2",children:p.map(w=>{const x=v(w);return e.jsxs("div",{className:Ce("flex items-center justify-between p-3 rounded-lg glass-card cursor-pointer transition-all hover:shadow-lg",i.includes(x.id)&&"bg-primary/10 ring-1 ring-primary/20"),onClick:()=>C(x.id),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full glass-card flex items-center justify-center text-white text-sm font-medium bg-gradient-to-br from-blue-500 to-purple-600",children:x.avatar}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:x.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:x.email})]})]}),e.jsx("div",{className:Ce("w-5 h-5 rounded border-2 transition-all",i.includes(x.id)?"bg-primary border-primary":"border-gray-300"),children:i.includes(x.id)&&e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})})]},x.id)})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"glass-card p-6 rounded-lg space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Ty,{className:"h-5 w-5 text-primary"}),e.jsx("h3",{className:"font-semibold",children:"Timeline"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(kt,{htmlFor:"startDate",className:"text-sm font-medium",children:"Start Date"}),e.jsx(It,{id:"startDate",type:"datetime-local",value:a.startDate,onChange:w=>n(x=>Z(E({},x),{startDate:w.target.value})),className:"glass-card hover:shadow-lg transition-all duration-300",required:!0})]}),e.jsxs("div",{children:[e.jsx(kt,{htmlFor:"endDate",className:"text-sm font-medium",children:"End Date"}),e.jsx(It,{id:"endDate",type:"datetime-local",value:a.endDate,onChange:w=>n(x=>Z(E({},x),{endDate:w.target.value})),className:"glass-card hover:shadow-lg transition-all duration-300",required:!0})]})]})]}),e.jsxs("div",{className:"glass-card p-6 rounded-lg space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(za,{className:"h-5 w-5 text-primary"}),e.jsx("h3",{className:"font-semibold",children:"Priority & Estimation"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(kt,{htmlFor:"priority",className:"text-sm font-medium",children:"Priority"}),e.jsxs(Ss,{value:a.priority,onValueChange:w=>n(x=>Z(E({},x),{priority:w})),children:[e.jsx(ys,{className:"glass-card hover:shadow-lg transition-all duration-300",children:e.jsx(ks,{})}),e.jsxs(bs,{children:[e.jsx(at,{value:"low",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-500"}),"Low"]})}),e.jsx(at,{value:"medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),"Medium"]})}),e.jsx(at,{value:"high",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-orange-500"}),"High"]})}),e.jsx(at,{value:"urgent",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500"}),"Urgent"]})})]})]})]}),e.jsxs("div",{children:[e.jsx(kt,{htmlFor:"estimatedHours",className:"text-sm font-medium",children:"Estimated Hours"}),e.jsxs("div",{className:"relative",children:[e.jsx(ns,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(It,{id:"estimatedHours",type:"number",min:"0",step:"0.5",value:a.estimatedHours,onChange:w=>n(x=>Z(E({},x),{estimatedHours:w.target.value})),placeholder:"0",className:"glass-card hover:shadow-lg transition-all duration-300 pl-10"})]})]})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-border/20",children:[e.jsx(de,{type:"button",variant:"outline",className:"glass-card hover:shadow-lg transition-all duration-300",disabled:l,children:"Cancel"}),e.jsx(de,{type:"submit",className:"glass-card hover:shadow-lg transition-all duration-300 bg-gradient-to-r from-blue-500 to-indigo-600 text-white border-0",disabled:l||!a.name.trim()||!a.startDate||!a.endDate,children:l?"Creating...":"Create Task"})]})]})]})}const bk=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#f97316","#06b6d4","#84cc16"];function wk({workspaceId:s,milestones:t,onUpdated:r,onMilestoneCreated:a}){const[n,i]=b.useState(!1),[o,l]=b.useState({name:"",description:"",dueDate:"",color:"#3b82f6",isCritical:!1}),[c,h]=b.useState(!1),f=C=>he(this,null,function*(){if(C.preventDefault(),!(!o.name.trim()||!o.dueDate))try{h(!0);const w={name:o.name.trim(),description:o.description.trim(),dueDate:o.dueDate,color:o.color,isCritical:o.isCritical};try{yield wt.createTimelineMilestone(s,w)}catch(x){const j=Z(E({id:`milestone-${Date.now()}`,workspaceId:s},w),{status:"pending",completionPercentage:0,achievedAt:null,achievedBy:null,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()});a&&a(j)}l({name:"",description:"",dueDate:"",color:"#3b82f6",isCritical:!1}),i(!1),r()}catch(w){}finally{h(!1)}}),p=C=>{switch(C){case"achieved":return"bg-green-500";case"missed":return"bg-red-500";case"cancelled":return"bg-gray-500";default:return"bg-blue-500"}},v=C=>{switch(C){case"achieved":return e.jsx(zr,{className:"h-4 w-4"});case"missed":return e.jsx(tl,{className:"h-4 w-4"});case"cancelled":return e.jsx(tl,{className:"h-4 w-4"});default:return e.jsx(cl,{className:"h-4 w-4"})}},u=[...t].sort((C,w)=>new Date(C.dueDate).getTime()-new Date(w.dueDate).getTime());return e.jsxs(Xe,{className:"glass-card border-0",children:[e.jsx(Dt,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(zt,{className:"flex items-center gap-2",children:[e.jsx(za,{className:"h-4 w-4"}),"Milestones"]}),e.jsxs(Bs,{open:n,onOpenChange:i,children:[e.jsx(ou,{asChild:!0,children:e.jsxs(de,{size:"sm",className:"hover-shimmer cyrus-ui",children:[e.jsx(ws,{className:"h-4 w-4 mr-2"}),"Add Milestone"]})}),e.jsxs(Es,{className:"glass-card border-0","aria-describedby":"milestone-dialog-description",children:[e.jsx(qr,{children:e.jsx(rr,{className:"bg-gradient-primary bg-clip-text text-transparent",children:"Create New Milestone"})}),e.jsx("div",{id:"milestone-dialog-description",className:"sr-only",children:"Dialog for creating a new milestone with name, description, due date, color, and critical status"}),e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(kt,{htmlFor:"milestoneName",className:"text-sm font-medium",children:"Milestone Name"}),e.jsx(It,{id:"milestoneName",value:o.name,onChange:C=>l(w=>Z(E({},w),{name:C.target.value})),placeholder:"Enter milestone name...",className:"glass-card border-gray-200/20 focus:border-blue-500/50",required:!0})]}),e.jsxs("div",{children:[e.jsx(kt,{htmlFor:"milestoneDescription",className:"text-sm font-medium",children:"Description"}),e.jsx(br,{id:"milestoneDescription",value:o.description,onChange:C=>l(w=>Z(E({},w),{description:C.target.value})),placeholder:"Describe the milestone...",rows:3,className:"glass-card border-gray-200/20 focus:border-blue-500/50"})]}),e.jsxs("div",{children:[e.jsx(kt,{htmlFor:"milestoneDueDate",className:"text-sm font-medium",children:"Due Date"}),e.jsx(It,{id:"milestoneDueDate",type:"datetime-local",value:o.dueDate,onChange:C=>l(w=>Z(E({},w),{dueDate:C.target.value})),className:"glass-card border-gray-200/20 focus:border-blue-500/50",required:!0})]}),e.jsxs("div",{children:[e.jsx(kt,{className:"text-sm font-medium",children:"Color"}),e.jsx("div",{className:"flex gap-2 mt-2",children:bk.map(C=>e.jsx("button",{type:"button",className:Ce("w-8 h-8 rounded-full border-2 transition-all hover:scale-110",o.color===C?"border-gray-800 scale-110":"border-gray-300"),style:{backgroundColor:C},onClick:()=>l(w=>Z(E({},w),{color:C}))},C))})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{id:"isCritical",type:"checkbox",checked:o.isCritical,onChange:C=>l(w=>Z(E({},w),{isCritical:C.target.checked})),className:"w-4 h-4 text-red-600 rounded focus:ring-red-500"}),e.jsx(kt,{htmlFor:"isCritical",className:"text-sm font-medium",children:"Critical Milestone"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200/20",children:[e.jsx(de,{type:"button",variant:"outline",onClick:()=>i(!1),className:"hover-shimmer cyrus-ui",disabled:c,children:"Cancel"}),e.jsx(de,{type:"submit",className:"button-primary-enhanced hover-shimmer cyrus-ui",disabled:c||!o.name.trim()||!o.dueDate,children:c?"Creating...":"Create Milestone"})]})]})]})]})]})}),e.jsx(Ze,{children:u.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(za,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No milestones yet"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Create your first milestone to track important project deadlines"}),e.jsxs(de,{onClick:()=>i(!0),className:"hover-shimmer cyrus-ui",children:[e.jsx(ws,{className:"h-4 w-4 mr-2"}),"Add Milestone"]})]}):e.jsx("div",{className:"space-y-3",children:u.map(C=>{const w=new Date(C.dueDate)<new Date&&C.status==="pending",x=Math.ceil((new Date(C.dueDate).getTime()-new Date().getTime())/(1e3*60*60*24));return e.jsx("div",{className:Ce("p-4 rounded-lg border transition-all hover:shadow-md","glass-card border-gray-200/20",w&&"border-red-200/50 bg-red-50/20"),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("div",{className:"w-4 h-4 rotate-45 border-2 border-white shadow-sm mt-1 flex-shrink-0",style:{backgroundColor:C.color}}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-semibold truncate",children:C.name}),C.isCritical&&e.jsx(nt,{variant:"destructive",className:"text-xs",children:"Critical"})]}),C.description&&e.jsx("p",{className:"text-sm text-muted-foreground mb-2 line-clamp-2",children:C.description}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Cs,{className:"h-3 w-3"}),e.jsx("span",{className:Ce(w?"text-red-600 font-medium":"text-muted-foreground"),children:Jt(C.dueDate)})]}),C.status==="pending"&&e.jsx("span",{className:Ce("text-xs",w?"text-red-600":x<=7?"text-orange-600":"text-muted-foreground"),children:w?`${Math.abs(x)} days overdue`:x===0?"Due today":`${x} days remaining`})]})]})]}),e.jsx("div",{className:"flex items-center gap-2 ml-4",children:e.jsxs(nt,{variant:"secondary",className:Ce("text-white text-xs",p(C.status)),children:[v(C.status),e.jsx("span",{className:"ml-1 capitalize",children:C.status})]})})]})},C.id)})})})]})}function jk({tasks:s,milestones:t,onTaskClick:r,onMilestoneClick:a,onDateClick:n}){const[i,o]=b.useState(new Date),[l,c]=b.useState(null),h=b.useMemo(()=>{const x=i.getFullYear(),j=i.getMonth(),_=new Date(x,j,1),T=new Date(x,j+1,0),U=new Date(_);U.setDate(U.getDate()-_.getDay());const R=new Date(T);R.setDate(R.getDate()+(6-T.getDay()));const V=[],$=new Date(U);for(;$<=R;)V.push(new Date($)),$.setDate($.getDate()+1);return V},[i]),f=x=>{const j=x.toISOString().split("T")[0],_=s.filter(U=>{const R=new Date(U.startDate).toISOString().split("T")[0],V=new Date(U.endDate).toISOString().split("T")[0];return j>=R&&j<=V}),T=t.filter(U=>{const R=new Date(U.dueDate).toISOString().split("T")[0];return j===R});return{tasks:_,milestones:T}},p=x=>{o(j=>{const _=new Date(j);return _.setMonth(_.getMonth()+(x==="next"?1:-1)),_})},v=x=>{const j=new Date;return x.toDateString()===j.toDateString()},u=x=>x.getMonth()===i.getMonth(),C=x=>{switch(x){case"completed":return"bg-green-500";case"in_progress":return"bg-blue-500";case"not_started":return"bg-gray-500";case"on_hold":return"bg-yellow-500";case"cancelled":return"bg-red-500";case"achieved":return"bg-green-500";case"pending":return"bg-blue-500";case"missed":return"bg-red-500";default:return"bg-gray-500"}},w=x=>{switch(x){case"urgent":return"border-red-500";case"high":return"border-orange-500";case"medium":return"border-yellow-500";case"low":return"border-gray-500";default:return"border-gray-500"}};return e.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between flex-shrink-0 p-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:i.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(de,{variant:"outline",size:"sm",onClick:()=>p("prev"),className:"hover-shimmer cyrus-ui",children:e.jsx(vc,{className:"h-4 w-4"})}),e.jsx(de,{variant:"outline",size:"sm",onClick:()=>o(new Date),className:"hover-shimmer cyrus-ui",children:"Today"}),e.jsx(de,{variant:"outline",size:"sm",onClick:()=>p("next"),className:"hover-shimmer cyrus-ui",children:e.jsx(tn,{className:"h-4 w-4"})})]})]}),e.jsx("div",{className:"flex-1 overflow-hidden",children:e.jsx(Xe,{className:"glass-card border-0 h-full",children:e.jsxs(Ze,{className:"p-0 h-full flex flex-col",children:[e.jsx("div",{className:"grid grid-cols-7 border-b border-border/20 flex-shrink-0",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(x=>e.jsx("div",{className:"p-3 text-center text-sm font-medium text-muted-foreground",children:x},x))}),e.jsx("div",{className:"grid grid-cols-7 flex-1 overflow-auto",children:h.map((x,j)=>{const _=f(x),T=_.tasks.length>0||_.milestones.length>0;return e.jsxs("div",{className:Ce("min-h-[120px] p-2 border-r border-b border-border/10 cursor-pointer transition-colors hover:bg-muted/30",!u(x)&&"text-muted-foreground bg-muted/20",v(x)&&"bg-primary/10 ring-1 ring-primary/30",(l==null?void 0:l.toDateString())===x.toDateString()&&"bg-accent"),onClick:()=>{c(x),n==null||n(x)},children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:Ce("text-sm font-medium",v(x)&&"text-primary font-bold"),children:x.getDate()}),T&&e.jsx("div",{className:"w-2 h-2 rounded-full bg-indicator"})]}),e.jsxs("div",{className:"space-y-1",children:[_.milestones.slice(0,2).map(U=>e.jsx("div",{className:Ce("text-xs p-1 rounded cursor-pointer hover:opacity-80 transition-opacity",C(U.status),"text-white"),onClick:R=>{R.stopPropagation(),a==null||a(U)},children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(za,{className:"h-3 w-3"}),e.jsx("span",{className:"truncate",children:U.name})]})},U.id)),_.tasks.slice(0,2).map(U=>e.jsx("div",{className:Ce("text-xs p-1 rounded border-l-2 bg-muted/50 cursor-pointer hover:bg-muted/70 transition-colors",w(U.priority)),onClick:R=>{R.stopPropagation(),r==null||r(U)},children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:Ce("w-2 h-2 rounded-full",C(U.status))}),e.jsx("span",{className:"truncate",children:U.name})]})},U.id)),_.tasks.length+_.milestones.length>4&&e.jsxs("div",{className:"text-xs text-muted-foreground p-1",children:["+",_.tasks.length+_.milestones.length-4," more"]})]})]},j)})})]})})}),l&&e.jsx("div",{className:"flex-shrink-0 p-4",children:e.jsxs(Xe,{className:"glass-card border-0",children:[e.jsx(Dt,{children:e.jsxs(zt,{className:"flex items-center gap-2",children:[e.jsx(Cs,{className:"h-5 w-5"}),l.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})}),e.jsx(Ze,{className:"space-y-4 max-h-64 overflow-y-auto",children:(()=>{const x=f(l);return x.tasks.length===0&&x.milestones.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Cs,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No tasks or milestones on this date"}),e.jsxs(de,{variant:"outline",size:"sm",className:"mt-2 hover-shimmer cyrus-ui",onClick:()=>n==null?void 0:n(l),children:[e.jsx(ws,{className:"h-4 w-4 mr-2"}),"Add Task"]})]}):e.jsxs("div",{className:"space-y-4",children:[x.milestones.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium mb-2 flex items-center gap-2",children:[e.jsx(za,{className:"h-4 w-4"}),"Milestones (",x.milestones.length,")"]}),e.jsx("div",{className:"space-y-2",children:x.milestones.map(j=>e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg border border-border/50 cursor-pointer hover:bg-muted/30 transition-colors",onClick:()=>a==null?void 0:a(j),children:[e.jsx("div",{className:Ce("w-3 h-3 rounded-full",C(j.status))}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:j.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:j.description})]}),e.jsx(nt,{variant:"secondary",className:Ce("text-white text-xs",C(j.status)),children:j.status})]},j.id))})]}),x.tasks.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium mb-2 flex items-center gap-2",children:[e.jsx(ns,{className:"h-4 w-4"}),"Tasks (",x.tasks.length,")"]}),e.jsx("div",{className:"space-y-2",children:x.tasks.map(j=>e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg border border-border/50 cursor-pointer hover:bg-muted/30 transition-colors",onClick:()=>r==null?void 0:r(j),children:[e.jsx("div",{className:Ce("w-3 h-3 rounded-full",C(j.status))}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:j.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[j.estimatedHours,"h estimated • ",j.priority," priority"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(nt,{variant:"outline",className:Ce("text-xs border-2",w(j.priority)),children:j.priority}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[j.progressPercentage,"% complete"]})]})]},j.id))})]})]})})()})]})})]})}function Nk({stats:s}){const t=r=>r<=80?"destructive":r<=100?"default":"secondary";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Xe,{className:"glass-card border-0",children:[e.jsx(Dt,{children:e.jsxs(zt,{className:"flex items-center gap-2",children:[e.jsx(Cd,{className:"h-5 w-5"}),"Project Health Overview"]})}),e.jsxs(Ze,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Overall Progress"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[s.completionPercentage,"%"]})]}),e.jsx(uc,{value:s.completionPercentage,className:"h-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Milestone Progress"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[s.milestoneProgress,"%"]})]}),e.jsx(uc,{value:s.milestoneProgress,className:"h-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Time Efficiency"}),e.jsx(nt,{variant:t(s.timeEfficiency),children:s.timeEfficiency>0?`${s.timeEfficiency}%`:"N/A"})]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[s.totalActualHours,"h actual vs ",s.totalEstimatedHours,"h estimated"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[e.jsx(Xe,{className:"glass-card border-0",children:e.jsxs(Ze,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Cs,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Tasks"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-2xl font-bold",children:s.totalTasks}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[s.completedTasks," completed, ",s.inProgressTasks," active"]})]})]})}),e.jsx(Xe,{className:"glass-card border-0",children:e.jsxs(Ze,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(za,{className:"h-4 w-4 text-purple-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Milestones"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-2xl font-bold",children:s.totalMilestones}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[s.completedMilestones," achieved",s.criticalMilestones>0&&`, ${s.criticalMilestones} critical`]})]})]})}),e.jsx(Xe,{className:"glass-card border-0",children:e.jsxs(Ze,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ns,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Time Spent"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"text-2xl font-bold",children:[s.totalActualHours,"h"]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["of ",s.totalEstimatedHours,"h estimated"]})]})]})}),e.jsx(Xe,{className:"glass-card border-0",children:e.jsxs(Ze,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(qi,{className:"h-4 w-4 text-red-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Urgent"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:s.overdueTasks+s.upcomingDeadlines}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[s.overdueTasks," overdue, ",s.upcomingDeadlines," due soon"]})]})]})})]}),e.jsxs(Xe,{className:"glass-card border-0",children:[e.jsx(Dt,{children:e.jsxs(zt,{className:"flex items-center gap-2",children:[e.jsx(cl,{className:"h-5 w-5"}),"Task Status Breakdown"]})}),e.jsx(Ze,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"text-center p-3 rounded-lg bg-green-50 dark:bg-green-950",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:s.completedTasks}),e.jsx("div",{className:"text-sm text-green-700 dark:text-green-300",children:"Completed"})]}),e.jsxs("div",{className:"text-center p-3 rounded-lg bg-blue-50 dark:bg-blue-950",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:s.inProgressTasks}),e.jsx("div",{className:"text-sm text-blue-700 dark:text-blue-300",children:"In Progress"})]}),e.jsxs("div",{className:"text-center p-3 rounded-lg bg-gray-50 dark:bg-gray-950",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-600",children:s.notStartedTasks}),e.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Not Started"})]}),e.jsxs("div",{className:"text-center p-3 rounded-lg bg-yellow-50 dark:bg-yellow-950",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:s.onHoldTasks}),e.jsx("div",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:"On Hold"})]}),e.jsxs("div",{className:"text-center p-3 rounded-lg bg-red-50 dark:bg-red-950",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:s.overdueTasks}),e.jsx("div",{className:"text-sm text-red-700 dark:text-red-300",children:"Overdue"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(Xe,{className:"glass-card border-0",children:[e.jsx(Dt,{children:e.jsxs(zt,{className:"flex items-center gap-2",children:[e.jsx(Iy,{className:"h-5 w-5"}),"Priority Analysis"]})}),e.jsxs(Ze,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"High Priority Tasks"}),e.jsx(nt,{variant:"secondary",className:"bg-red-100 text-red-700 dark:bg-red-950 dark:text-red-300",children:s.highPriorityTasks})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Average Progress"}),e.jsxs(nt,{variant:"outline",children:[s.averageProgress,"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Critical Milestones"}),e.jsx(nt,{variant:s.criticalMilestones>0?"destructive":"secondary",children:s.criticalMilestones})]})]})]}),e.jsxs(Xe,{className:"glass-card border-0",children:[e.jsx(Dt,{children:e.jsxs(zt,{className:"flex items-center gap-2",children:[e.jsx(qi,{className:"h-5 w-5"}),"Risk Indicators"]})}),e.jsxs(Ze,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Overdue Tasks"}),e.jsx(nt,{variant:s.overdueTasks>0?"destructive":"secondary",children:s.overdueTasks})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Due Next 7 Days"}),e.jsx(nt,{variant:s.upcomingDeadlines>0?"default":"secondary",children:s.upcomingDeadlines})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Missed Milestones"}),e.jsx(nt,{variant:s.missedMilestones>0?"destructive":"secondary",children:s.missedMilestones})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Time Efficiency"}),e.jsx(nt,{variant:t(s.timeEfficiency),children:s.timeEfficiency>0?`${s.timeEfficiency}%`:"N/A"})]})]})]})]})]})}function Sk({workspace:s,onBack:t,className:r,project:a}){const[n,i]=b.useState([]),[o,l]=b.useState([]),[c,h]=b.useState([]),[f,p]=b.useState([]),[v,u]=b.useState(!0),[C,w]=b.useState("gantt"),[x,j]=b.useState("month"),[_,T]=b.useState(!1),[U,R]=b.useState(!1),[V,$]=b.useState("timeline");b.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]),b.useEffect(()=>{S()},[s.id]);const S=()=>he(this,null,function*(){try{u(!0);try{const[I,H,se,ce]=yield Promise.all([wt.getTimelineTasks(s.id),wt.getTimelineMilestones(s.id),wt.getTimelineAssignments(),wt.getTimelineDependencies(s.id)]);i(I),l(H),h(se),p(ce)}catch(I){const H=[{id:"task-1",workspaceId:s.id,name:"Project Planning & Research",description:"Initial project scope definition and market research",startDate:new Date(Date.now()-6048e5).toISOString(),endDate:new Date(Date.now()-2592e5).toISOString(),status:"completed",priority:"high",progressPercentage:100,estimatedHours:32,actualHours:28,parentTaskId:null,createdBy:"1",createdAt:new Date(Date.now()-864e6).toISOString(),updatedAt:new Date(Date.now()-2592e5).toISOString()},{id:"task-2",workspaceId:s.id,name:"Design Concept Development",description:"Create initial design concepts and mood boards",startDate:new Date(Date.now()-1728e5).toISOString(),endDate:new Date(Date.now()+432e6).toISOString(),status:"in_progress",priority:"high",progressPercentage:65,estimatedHours:48,actualHours:32,parentTaskId:null,createdBy:"2",createdAt:new Date(Date.now()-432e6).toISOString(),updatedAt:new Date(Date.now()-864e5).toISOString()},{id:"task-3",workspaceId:s.id,name:"Client Review & Feedback",description:"Present concepts to client and incorporate feedback",startDate:new Date(Date.now()+5184e5).toISOString(),endDate:new Date(Date.now()+864e6).toISOString(),status:"not_started",priority:"medium",progressPercentage:0,estimatedHours:16,actualHours:0,parentTaskId:null,createdBy:"1",createdAt:new Date(Date.now()-432e6).toISOString(),updatedAt:new Date(Date.now()-432e6).toISOString()},{id:"task-4",workspaceId:s.id,name:"Final Design Production",description:"Complete final designs and prepare deliverables",startDate:new Date(Date.now()+9504e5).toISOString(),endDate:new Date(Date.now()+15552e5).toISOString(),status:"not_started",priority:"urgent",progressPercentage:0,estimatedHours:40,actualHours:0,parentTaskId:null,createdBy:"2",createdAt:new Date(Date.now()-432e6).toISOString(),updatedAt:new Date(Date.now()-432e6).toISOString()}],se=[{id:"milestone-1",workspaceId:s.id,name:"Concept Approval",description:"Client approves initial design concepts",dueDate:new Date(Date.now()+864e5*8).toISOString(),status:"pending",color:"#3b82f6",isCritical:!0,completionPercentage:0,achievedAt:null,achievedBy:null,createdAt:new Date(Date.now()-864e5*5).toISOString(),updatedAt:new Date(Date.now()-864e5*5).toISOString()},{id:"milestone-2",workspaceId:s.id,name:"Project Completion",description:"Final deliverables completed and delivered",dueDate:new Date(Date.now()+864e5*20).toISOString(),status:"pending",color:"#10b981",isCritical:!0,completionPercentage:0,achievedAt:null,achievedBy:null,createdAt:new Date(Date.now()-864e5*5).toISOString(),updatedAt:new Date(Date.now()-864e5*5).toISOString()}];i(H),l(se),h([]),p([])}}catch(I){}finally{u(!1)}}),A=I=>{i(H=>[...H,I]),T(!1)},L=I=>{l(H=>[...H,I])},N=()=>he(this,null,function*(){yield S()}),D=(()=>{const I=n.length,H=n.filter(re=>re.status==="completed").length,se=n.filter(re=>re.status==="in_progress").length,ce=n.filter(re=>re.status==="not_started").length,le=n.filter(re=>re.status==="on_hold").length,ne=n.filter(re=>re.status==="cancelled").length,fe=n.filter(re=>new Date(re.endDate)<new Date&&re.status!=="completed").length,Se=o.length,M=o.filter(re=>re.status==="achieved").length,B=o.filter(re=>re.status==="pending").length,J=o.filter(re=>re.status==="missed").length,te=o.filter(re=>re.isCritical).length,G=n.reduce((re,je)=>re+je.estimatedHours,0),ae=n.reduce((re,je)=>re+je.actualHours,0),ie=n.filter(re=>re.priority==="high"||re.priority==="urgent").length,ue=I>0?Math.round(n.reduce((re,je)=>re+je.progressPercentage,0)/I):0,Ae=n.filter(re=>{const je=new Date(re.endDate),Le=new Date,X=Math.ceil((je.getTime()-Le.getTime())/(1e3*60*60*24));return X>=0&&X<=7&&re.status!=="completed"}).length;return{totalTasks:I,completedTasks:H,inProgressTasks:se,notStartedTasks:ce,onHoldTasks:le,cancelledTasks:ne,overdueTasks:fe,totalMilestones:Se,completedMilestones:M,pendingMilestones:B,missedMilestones:J,criticalMilestones:te,totalEstimatedHours:G,totalActualHours:ae,highPriorityTasks:ie,averageProgress:ue,upcomingDeadlines:Ae,completionPercentage:I>0?Math.round(H/I*100):0,milestoneProgress:Se>0?Math.round(M/Se*100):0,timeEfficiency:G>0?Math.round(G/ae*100):0}})();return v?e.jsx("div",{className:"glass-card p-6 rounded-lg shadow-lg",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3"}),e.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})}):e.jsxs("div",{className:Ce("h-screen flex flex-col bg-background overflow-hidden",r),children:[e.jsx("div",{className:"glass-navbar p-4 border-b flex-shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(de,{variant:"ghost",size:"sm",onClick:t,className:"glass-card hover:shadow-lg transition-all duration-300",children:e.jsx(qa,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold text-responsive-xl",children:s.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[D.totalTasks," tasks • ",D.completionPercentage,"% complete"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Ss,{value:x,onValueChange:I=>j(I),children:[e.jsx(ys,{className:"glass-input w-32",children:e.jsx(ks,{})}),e.jsxs(bs,{className:"glass-card",children:[e.jsx(at,{value:"week",children:"Week"}),e.jsx(at,{value:"month",children:"Month"}),e.jsx(at,{value:"quarter",children:"Quarter"})]})]}),e.jsxs(Ss,{value:C,onValueChange:I=>w(I),children:[e.jsx(ys,{className:"glass-input w-32",children:e.jsx(ks,{})}),e.jsxs(bs,{className:"glass-card",children:[e.jsx(at,{value:"gantt",children:"Gantt"}),e.jsx(at,{value:"table",children:"Table"}),e.jsx(at,{value:"calendar",children:"Calendar"})]})]}),e.jsxs(Bs,{open:_,onOpenChange:T,children:[e.jsx(ou,{asChild:!0,children:e.jsxs(de,{className:"btn-glass-primary touch-target",children:[e.jsx(ws,{className:"h-4 w-4 mr-2"}),"Add Task"]})}),e.jsxs(Es,{className:"glass-modal","aria-describedby":"task-dialog-description",children:[e.jsx("div",{id:"task-dialog-description",className:"sr-only",children:"Dialog for creating a new task with name, description, timeline, priority, estimation, and team assignment"}),e.jsx(yk,{workspaceId:s.id,onTaskCreated:A,project:a})]})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 xl:grid-cols-10 gap-3 p-4 flex-shrink-0",children:[e.jsx(Xe,{className:"glass-card border-0",children:e.jsx(Ze,{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Cs,{className:"h-4 w-4 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Tasks"}),e.jsx("p",{className:"text-sm font-semibold",children:D.totalTasks})]})]})})}),e.jsx(Xe,{className:"glass-card border-0",children:e.jsx(Ze,{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(cl,{className:"h-4 w-4 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Completed"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("p",{className:"text-sm font-semibold text-green-600",children:D.completedTasks}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["(",D.completionPercentage,"%)"]})]})]})]})})}),e.jsx(Xe,{className:"glass-card border-0",children:e.jsx(Ze,{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(wr,{className:"h-4 w-4 text-orange-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"In Progress"}),e.jsx("p",{className:"text-sm font-semibold text-orange-600",children:D.inProgressTasks})]})]})})}),e.jsx(Xe,{className:"glass-card border-0",children:e.jsx(Ze,{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-red-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Overdue"}),e.jsx("p",{className:"text-sm font-semibold text-red-600",children:D.overdueTasks})]})]})})}),e.jsx(Xe,{className:"glass-card border-0",children:e.jsx(Ze,{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(za,{className:"h-4 w-4 text-purple-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Milestones"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("p",{className:"text-sm font-semibold",children:D.totalMilestones}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["(",D.milestoneProgress,"% complete)"]})]})]})]})})}),e.jsx(Xe,{className:"glass-card border-0",children:e.jsx(Ze,{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ns,{className:"h-4 w-4 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Hours Spent"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("p",{className:"text-sm font-semibold",children:D.totalActualHours}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["of ",D.totalEstimatedHours,"h est."]})]})]})]})})}),e.jsx(Xe,{className:"glass-card border-0",children:e.jsx(Ze,{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-yellow-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"High Priority"}),e.jsx("p",{className:"text-sm font-semibold text-yellow-600",children:D.highPriorityTasks})]})]})})}),e.jsx(Xe,{className:"glass-card border-0",children:e.jsx(Ze,{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-purple-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Critical"}),e.jsx("p",{className:"text-sm font-semibold text-purple-600",children:D.criticalMilestones})]})]})})}),e.jsx(Xe,{className:"glass-card border-0",children:e.jsx(Ze,{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Upcoming"}),e.jsx("p",{className:"text-sm font-semibold text-blue-600",children:D.upcomingDeadlines})]})]})})}),e.jsx(Xe,{className:"glass-card border-0",children:e.jsx(Ze,{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Efficiency"}),e.jsxs("p",{className:"text-sm font-semibold text-green-600",children:[D.timeEfficiency,"%"]})]})]})})})]}),e.jsxs("div",{className:"flex items-center gap-2 p-4 flex-shrink-0",children:[e.jsx(de,{variant:V==="timeline"?"default":"outline",size:"sm",onClick:()=>$("timeline"),className:"glass-card hover:shadow-lg transition-all duration-300",children:"Timeline"}),e.jsx(de,{variant:V==="tasks"?"default":"outline",size:"sm",onClick:()=>$("tasks"),className:"glass-card hover:shadow-lg transition-all duration-300",children:"Task Manager"}),e.jsx(de,{variant:V==="resources"?"default":"outline",size:"sm",onClick:()=>$("resources"),className:"glass-card hover:shadow-lg transition-all duration-300",children:"Resources"}),e.jsx(de,{variant:V==="analytics"?"default":"outline",size:"sm",onClick:()=>$("analytics"),className:"glass-card hover:shadow-lg transition-all duration-300",children:"Analytics"})]}),e.jsxs("div",{className:"flex flex-1 min-h-0 overflow-hidden",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[V==="timeline"&&C==="calendar"&&e.jsx(jk,{tasks:n,milestones:o,onTaskClick:I=>{},onMilestoneClick:I=>{},onDateClick:I=>{}}),V==="timeline"&&C!=="calendar"&&e.jsx(ck,{tasks:n,milestones:o,dependencies:f,viewMode:C,timeRange:x,onTaskUpdated:N}),V==="tasks"&&e.jsx(gk,{tasks:n,onTaskUpdated:N}),V==="resources"&&e.jsx(vk,{tasks:n,assignments:c}),V==="analytics"&&e.jsx(Nk,{stats:D})]}),e.jsx("div",{className:"w-[450px] border-l bg-background flex flex-col overflow-hidden",children:e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:e.jsx(wk,{workspaceId:s.id,milestones:o,onUpdated:S,onMilestoneCreated:L})})})]})]})}function kk({className:s,projects:t=[],onEnterFocusMode:r,onExitFocusMode:a}){const[n,i]=b.useState("list"),[o,l]=b.useState(null),[c,h]=b.useState([]),{toast:f}=da(),{workspaces:p,isLoading:v,error:u,createWorkspaceForProject:C,invalidate:w}=$2();b.useEffect(()=>{u&&f({title:"Error",description:"Failed to load whiteboards",variant:"destructive"})},[u,f]),b.useEffect(()=>{const U=(p||[]).filter(R=>R.type==="whiteboard");h(U)},[p]);const x=U=>{l(U),i("detail"),r==null||r()},j=U=>he(this,null,function*(){try{const R=yield C({projectId:U.id,type:"whiteboard"});f({title:R.isNew?"Whiteboard created":"Existing whiteboard found",description:R.message}),yield w(),x(R.workspace)}catch(R){f({title:"Error",description:"Failed to create whiteboard",variant:"destructive"})}}),_=()=>{i("create")},T=()=>{l(null),i("list"),a==null||a()};return n==="detail"&&o?e.jsx(tk,{whiteboard:o,onBack:T}):n==="create"?e.jsx("div",{className:Ce("p-6",s),children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(de,{variant:"ghost",size:"sm",onClick:()=>i("list"),children:e.jsx(qa,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Create Whiteboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Select a project to create image review workspace"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(U=>e.jsxs(Xe,{className:"cursor-pointer transition-all hover:shadow-md hover:scale-[1.02] border-l-4",style:{borderLeftColor:"#3b82f6"},onClick:()=>j(U),children:[e.jsxs(Dt,{children:[e.jsx(zt,{className:"text-lg",children:U.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:U.client})]}),e.jsx(Ze,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Status"}),e.jsx(nt,{variant:"outline",children:U.status})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Created"}),e.jsx("span",{children:Jt(U.createdAt)})]}),e.jsx("div",{className:"pt-2",children:e.jsx(de,{className:"w-full",size:"sm",children:"Create Whiteboard"})})]})})]},U.id))}),t.length===0&&!v&&e.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg",children:[e.jsx("div",{className:"text-gray-400 mb-4",children:e.jsx("svg",{className:"h-12 w-12 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Projects Available"}),e.jsx("p",{className:"text-gray-500",children:"Create a project first to set up whiteboard image review"})]}),v&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading projects..."})]})]})}):e.jsxs("div",{className:Ce("p-6",s),children:[e.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Whiteboards"}),e.jsx("p",{className:"text-muted-foreground",children:"Create and manage image review workspaces for design feedback"})]}),e.jsxs(de,{onClick:_,className:"button-primary-enhanced hover-shimmer cyrus-ui",children:[e.jsx(ws,{className:"h-4 w-4 mr-2"}),"New Whiteboard"]})]}),v?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading whiteboards..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(U=>{var S,A;const R=t.find(L=>L.id===U.projectId),V=R?R.name:"Unknown Project",$=R?R.client:"";return e.jsxs(Xe,{className:"cursor-pointer transition-all hover:shadow-md hover:scale-[1.01] overflow-hidden",onClick:()=>x(U),children:[e.jsx("div",{className:"h-48 grid grid-cols-2 gap-1 bg-gray-100 overflow-hidden",children:(()=>{const L=((R==null?void 0:R.media)||[]).filter(N=>/\.(png|jpe?g|gif|webp|svg)$/i.test(N.url)).slice(0,3);return L.length===0?e.jsx("div",{className:"col-span-2 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Dr,{className:"h-12 w-12 mx-auto text-gray-400 mb-2"}),e.jsx("p",{className:"text-sm text-gray-500",children:"No images yet"})]})}):L.map((N,k)=>e.jsx("div",{className:`${k===0&&L.length>1?"row-span-2":""} relative overflow-hidden`,children:e.jsx("img",{src:N.url,alt:N.filename||`Image ${k+1}`,className:"w-full h-full object-cover"})},k))})()}),e.jsx(Dt,{className:"pb-2",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsx(zt,{className:"text-lg",children:U.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[V," ",$&&`• ${$}`]})]}),e.jsx(Dr,{className:"h-5 w-5 text-muted-foreground"})]})}),e.jsx(Ze,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Li,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[((S=U.images)==null?void 0:S.length)||0," images"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Tr,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[((A=U.comments)==null?void 0:A.length)||0," comments"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Cs,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:Jt(U.updatedAt)})]})]}),e.jsxs("div",{className:"aspect-video bg-muted rounded-md overflow-hidden relative",children:[U.images&&U.images.length>0?e.jsx("img",{src:U.images[0].url,alt:"Whiteboard preview",className:"w-full h-full object-cover"}):e.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:e.jsx(Dr,{className:"h-12 w-12 opacity-20"})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/30 to-transparent"})]}),e.jsxs(de,{className:"w-full",variant:"outline",onClick:L=>{L.stopPropagation(),x(U)},children:[e.jsx(Am,{className:"h-4 w-4 mr-2"}),"View Whiteboard"]})]})})]},U.id)})}),c.length===0&&!v&&e.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg mt-8",children:[e.jsx("div",{className:"text-gray-400 mb-4",children:e.jsx(Dr,{className:"h-12 w-12 mx-auto"})}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Whiteboards Yet"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Create a whiteboard to start collaborating on image reviews"}),e.jsxs(de,{onClick:_,className:"button-primary-enhanced hover-shimmer cyrus-ui",children:[e.jsx(ws,{className:"h-4 w-4 mr-2"}),"New Whiteboard"]})]})]})]})}function Ck({className:s,projects:t=[],onEnterFocusMode:r,onExitFocusMode:a}){const[n,i]=b.useState("list"),[o,l]=b.useState(null),c=p=>he(this,null,function*(){try{const u=(yield wt.getWorkflows()).find(C=>C.projectId===p.id);if(u)l(u),i("detail"),r==null||r();else{const C=yield wt.createWorkflow({projectId:p.id,name:`${p.name} - Workflow`,createdBy:"Current User",isArchived:!1,collaborators:["current-user"],settings:{isPublic:!1,allowComments:!0,allowEditing:!0,autoSave:!0}});l(C),i("detail"),r==null||r()}}catch(v){const u={id:`workflow-${p.id}`,projectId:p.id,name:`${p.name} - Workflow`,type:"workflow",createdBy:"Current User",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),isArchived:!1,collaborators:["current-user"],settings:{isPublic:!1,allowComments:!0,allowEditing:!0,autoSave:!0}};l(u),i("detail"),r==null||r()}}),h=()=>{i("create")},f=()=>{i("list"),l(null),a==null||a()};if(n==="detail"&&o){const p=t.find(v=>v.id===o.projectId);return e.jsx(lk,{workspace:o,onBack:f,className:s,project:p})}return n==="create"?e.jsx("div",{className:Ce("p-6",s),children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(de,{variant:"ghost",size:"sm",onClick:()=>i("list"),children:e.jsx(qa,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Create Workflow"}),e.jsx("p",{className:"text-muted-foreground",children:"Select a project to create project workflow"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(p=>e.jsxs(Xe,{className:"cursor-pointer transition-all hover:shadow-md hover:scale-[1.02] border-l-4",style:{borderLeftColor:"#3b82f6"},onClick:()=>c(p),children:[e.jsxs(Dt,{children:[e.jsx(zt,{className:"text-lg",children:p.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:p.client})]}),e.jsx(Ze,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Status"}),e.jsx(nt,{variant:"outline",children:p.status})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Created"}),e.jsx("span",{children:Jt(p.createdAt)})]}),e.jsx("div",{className:"pt-2",children:e.jsx(de,{className:"w-full",size:"sm",children:"Create Workflow"})})]})})]},p.id))})]})}):e.jsxs("div",{className:Ce("p-6",s),children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Workflows"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Creative pipeline management and approval processes"})]}),e.jsxs(de,{onClick:h,className:"button-primary-enhanced hover-shimmer cyrus-ui",children:[e.jsx(ws,{className:"h-4 w-4 mr-2"}),"New Workflow"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(p=>e.jsx(Xe,{className:"cursor-pointer transition-all hover:shadow-md hover:scale-[1.01] overflow-hidden",onClick:()=>c(p),children:e.jsxs(Ze,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-100 flex items-center justify-center",children:e.jsx(Na,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"font-semibold text-lg",children:[p.name," - Workflow"]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Client: ",p.client]})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground mb-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ja,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:"Pipeline"})]}),e.jsx("span",{children:Jt(p.updatedAt)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(nt,{variant:"secondary",className:"text-xs",children:p.status}),e.jsx(Na,{className:"h-5 w-5 text-muted-foreground"})]})]})},p.id))}),t.length===0&&e.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg",children:[e.jsx(Na,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Workflow Projects"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Create your first project workflow to start managing creative pipelines"}),e.jsxs(de,{onClick:h,className:"button-primary-enhanced hover-shimmer cyrus-ui",children:[e.jsx(ws,{className:"h-4 w-4 mr-2"}),"Create Workflow"]})]})]})}function Ak({className:s,projects:t=[],onEnterFocusMode:r,onExitFocusMode:a}){const[n,i]=b.useState("list"),[o,l]=b.useState(null),c=p=>he(this,null,function*(){try{const u=(yield wt.getTimelines(p.id)).find(C=>C.projectId===p.id);if(u)l(u),i("detail"),r==null||r();else{const C=yield wt.createTimeline({projectId:p.id,name:`${p.name} - Timeline`,createdBy:"Current User",isArchived:!1,collaborators:["current-user"],settings:{isPublic:!1,allowComments:!0,allowEditing:!0,autoSave:!0}});l(C),i("detail"),r==null||r()}}catch(v){const u={id:`timeline-${p.id}`,projectId:p.id,name:`${p.name} - Timeline`,type:"timeline",createdBy:"Current User",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),isArchived:!1,collaborators:["current-user"],settings:{isPublic:!1,allowComments:!0,allowEditing:!0,autoSave:!0}};l(u),i("detail"),r==null||r()}}),h=()=>{i("create")},f=()=>{i("list"),l(null),a==null||a()};return n==="detail"&&o?e.jsx(Sk,{workspace:o,onBack:f,className:s}):n==="create"?e.jsx("div",{className:Ce("p-6",s),children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(de,{variant:"ghost",size:"sm",onClick:()=>i("list"),children:e.jsx(qa,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Create Timeline"}),e.jsx("p",{className:"text-muted-foreground",children:"Select a project to create project timeline"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(p=>e.jsxs(Xe,{className:"cursor-pointer transition-all hover:shadow-md hover:scale-[1.02] border-l-4",style:{borderLeftColor:"#3b82f6"},onClick:()=>c(p),children:[e.jsxs(Dt,{children:[e.jsx(zt,{className:"text-lg",children:p.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:p.client})]}),e.jsx(Ze,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Status"}),e.jsx(nt,{variant:"outline",children:p.status})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Created"}),e.jsx("span",{children:Jt(p.createdAt)})]}),e.jsx("div",{className:"pt-2",children:e.jsx(de,{className:"w-full",size:"sm",children:"Create Timeline"})})]})})]},p.id))})]})}):e.jsxs("div",{className:Ce("p-6",s),children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Timelines"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Project timeline management with Gantt charts and milestone tracking"})]}),e.jsxs(de,{onClick:h,className:"button-primary-enhanced hover-shimmer cyrus-ui",children:[e.jsx(ws,{className:"h-4 w-4 mr-2"}),"New Timeline"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(p=>{const v=Math.floor(Math.random()*15)+5,u=Math.floor(Math.random()*v),C=Math.round(u/v*100),w=Math.floor(Math.random()*5)+2,x=Math.floor(Math.random()*6)+2,j=C>=60,_=["Design Review","Beta Release","Client Approval","Launch Prep"][Math.floor(Math.random()*4)];return e.jsx(Xe,{className:"cursor-pointer transition-all hover:shadow-md hover:scale-[1.01] overflow-hidden",onClick:()=>c(p),children:e.jsxs(Ze,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-orange-100 flex items-center justify-center",children:e.jsx(ns,{className:"h-4 w-4 text-orange-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"font-semibold text-lg",children:[p.name," Timeline"]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Client: ",p.client]})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs font-medium",children:"Progress"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[C,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:e.jsx("div",{className:"bg-orange-500 h-1.5 rounded-full transition-all duration-500",style:{width:`${C}%`}})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3 text-xs",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold",children:v}),e.jsx("div",{className:"text-muted-foreground",children:"Tasks"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold",children:w}),e.jsx("div",{className:"text-muted-foreground",children:"Milestones"})]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(nt,{variant:j?"default":"destructive",className:"text-xs",children:j?"On Track":"Behind Schedule"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[x," members"]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground mb-2",children:["Next: ",_]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:Jt(p.updatedAt)}),e.jsx(ns,{className:"h-4 w-4"})]})]})},p.id)})}),t.length===0&&e.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg",children:[e.jsx(ns,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Timeline Projects"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Create your first project timeline to start tracking tasks and milestones"}),e.jsxs(de,{onClick:h,children:[e.jsx(ws,{className:"h-4 w-4 mr-2"}),"Create Timeline"]})]})]})}function Pk({searchTerm:s,searchScope:t,currentTab:r,onResultClick:a,isVisible:n,onClose:i}){const[o,l]=b.useState([]),[c,h]=b.useState(!1),f=b.useMemo(()=>[{id:"project-1",type:"project",title:"Nike Campaign 2024",description:"Revolutionary sneaker campaign targeting Gen Z",metadata:{createdBy:"Sarah Chen",createdAt:"2024-01-15",status:"Active",tags:["marketing","campaign","nike"]}},{id:"moodboard-1",type:"moodboard",title:"Nike Brand Exploration",description:"Visual inspiration and color palettes for Nike campaign",metadata:{projectName:"Nike Campaign 2024",createdBy:"Mike Johnson",createdAt:"2024-01-20",tags:["branding","colors","inspiration"]}},{id:"whiteboard-1",type:"whiteboard",title:"Nike Homepage Review",description:"Feedback and annotations on homepage designs",metadata:{projectName:"Nike Campaign 2024",createdBy:"Emma Wilson",createdAt:"2024-01-25",tags:["feedback","review","homepage"]}},{id:"workflow-1",type:"workflow",title:"Campaign Launch Process",description:"Step-by-step workflow for campaign execution",metadata:{projectName:"Nike Campaign 2024",createdBy:"Alex Turner",createdAt:"2024-01-18",tags:["process","workflow","launch"]}}],[]);b.useEffect(()=>{if(!s.trim()){l([]);return}h(!0);const u=setTimeout(()=>{let C=f;if(t==="current")switch(r){case"list":C=f.filter(x=>x.type==="project");break;case"moodboards":C=f.filter(x=>x.type==="moodboard");break;case"whiteboards":C=f.filter(x=>x.type==="whiteboard");break;case"workflows":C=f.filter(x=>x.type==="workflow");break}const w=C.filter(x=>{var _,T,U,R,V;const j=s.toLowerCase();return x.title.toLowerCase().includes(j)||((_=x.description)==null?void 0:_.toLowerCase().includes(j))||((U=(T=x.metadata)==null?void 0:T.tags)==null?void 0:U.some($=>$.toLowerCase().includes(j)))||((V=(R=x.metadata)==null?void 0:R.createdBy)==null?void 0:V.toLowerCase().includes(j))});l(w),h(!1)},300);return()=>clearTimeout(u)},[s,t,r,f]);const p=u=>{switch(u){case"project":return e.jsx(Cs,{className:"h-4 w-4"});case"moodboard":return e.jsx(yr,{className:"h-4 w-4"});case"whiteboard":return e.jsx(Dr,{className:"h-4 w-4"});case"workflow":return e.jsx(Na,{className:"h-4 w-4"});case"timeline":return e.jsx(ns,{className:"h-4 w-4"});case"activity":return e.jsx(wr,{className:"h-4 w-4"});default:return e.jsx(bn,{className:"h-4 w-4"})}},v=u=>{switch(u){case"project":return"bg-blue-100 text-blue-700";case"moodboard":return"bg-purple-100 text-purple-700";case"whiteboard":return"bg-green-100 text-green-700";case"workflow":return"bg-orange-100 text-orange-700";case"timeline":return"bg-red-100 text-red-700";case"activity":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return!n||!s.trim()?null:e.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 z-50",children:e.jsx(Xe,{className:"glass-card border shadow-lg",children:e.jsxs(Ze,{className:"p-0",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(bn,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:t==="global"?"Global Search":`Search in ${r}`}),e.jsxs(nt,{variant:"secondary",className:"text-xs",children:[o.length," results"]})]}),e.jsx(de,{variant:"ghost",size:"sm",onClick:i,children:e.jsx(Zs,{className:"h-4 w-4"})})]}),e.jsx(Gm,{className:"max-h-80",children:c?e.jsxs("div",{className:"p-8 text-center text-muted-foreground",children:[e.jsx(bn,{className:"h-8 w-8 mx-auto mb-2 animate-pulse"}),"Searching..."]}):o.length>0?e.jsx("div",{className:"p-2",children:o.map(u=>{var C,w,x,j;return e.jsx("div",{className:"p-3 rounded-lg hover:bg-muted/50 cursor-pointer transition-colors",onClick:()=>a(u),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:Ce("p-2 rounded-lg",v(u.type)),children:p(u.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-medium text-sm truncate",children:u.title}),e.jsx(nt,{variant:"outline",className:"text-xs capitalize",children:u.type})]}),u.description&&e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2 mb-2",children:u.description}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[((C=u.metadata)==null?void 0:C.projectName)&&e.jsxs("span",{children:["Project: ",u.metadata.projectName]}),((w=u.metadata)==null?void 0:w.createdBy)&&e.jsxs("span",{children:["by ",u.metadata.createdBy]}),((x=u.metadata)==null?void 0:x.createdAt)&&e.jsx("span",{children:new Date(u.metadata.createdAt).toLocaleDateString()})]}),((j=u.metadata)==null?void 0:j.tags)&&e.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[u.metadata.tags.slice(0,3).map(_=>e.jsx(nt,{variant:"secondary",className:"text-xs",children:_},_)),u.metadata.tags.length>3&&e.jsxs(nt,{variant:"outline",className:"text-xs",children:["+",u.metadata.tags.length-3]})]})]})]})},u.id)})}):e.jsxs("div",{className:"p-8 text-center text-muted-foreground",children:[e.jsx(bn,{className:"h-8 w-8 mx-auto mb-2"}),e.jsxs("p",{children:['No results found for "',s,'"']}),e.jsx("p",{className:"text-xs mt-1",children:"Try different keywords or check your search scope"})]})})]})})})}const _k=({isOpen:s,onClose:t,onNavigate:r,currentView:a,isLoggedIn:n,userDisplayName:i,notificationCount:o,onLogout:l,onLogin:c})=>{var w;const[h,f]=b.useState(!1);b.useEffect(()=>{f(!0)},[]),b.useEffect(()=>(s?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[s]);const p=[{id:"list",label:"Projects",icon:Oy,description:"Manage your projects"},{id:"calendar",label:"Calendar",icon:Cs,description:"View project timeline"},{id:"monday",label:"Monday",icon:ox,description:"Board view"}],v=[{id:"moodboards",label:"Moodboards",icon:yr,description:"Visual inspiration"},{id:"whiteboards",label:"Whiteboards",icon:Dr,description:"Collaborative workspace"},{id:"workflows",label:"Workflows",icon:Na,description:"Process management"},{id:"timeline",label:"Timeline",icon:ns,description:"Project timelines"}],u=[{id:"activity",label:"Activity",icon:Cm,description:"Recent updates"},{id:"profile",label:"Profile",icon:Sa,description:"Your account"}],C=x=>{r(x),t()};return h?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:Ce("fixed inset-0 bg-black/50 backdrop-blur-sm z-40 transition-opacity duration-300",s?"opacity-100":"opacity-0 pointer-events-none"),onClick:t}),e.jsx("div",{className:Ce("fixed top-0 left-0 h-full w-80 bg-background border-r shadow-2xl z-50 transform transition-transform duration-300 ease-out",s?"translate-x-0":"-translate-x-full"),children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-2xl font-bold bg-gradient-to-r from-pink-500 to-purple-400 bg-clip-text text-transparent",children:"CT"}),e.jsx("div",{className:"text-lg font-semibold",children:"Menu"})]}),e.jsx(de,{variant:"ghost",size:"sm",onClick:t,children:e.jsx(Zs,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"p-6 border-b",children:n?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-medium",children:((w=i==null?void 0:i.charAt(0))==null?void 0:w.toUpperCase())||"U"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:i||"User"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Online"})]}),e.jsx(de,{variant:"ghost",size:"sm",children:e.jsx(tn,{className:"h-4 w-4"})})]}):e.jsx(de,{onClick:c,className:"w-full button-primary-enhanced",children:"Sign In"})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wider mb-4",children:"Main"}),e.jsx("div",{className:"space-y-2",children:p.map(x=>{const j=x.icon,_=a===x.id;return e.jsxs("button",{onClick:()=>C(x.id),className:Ce("w-full flex items-center gap-4 p-4 rounded-lg text-left transition-colors duration-200",_?"bg-primary text-primary-foreground shadow-md":"hover:bg-muted/50"),children:[e.jsx(j,{className:"h-5 w-5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium",children:x.label}),e.jsx("div",{className:Ce("text-sm",_?"text-primary-foreground/80":"text-muted-foreground"),children:x.description})]}),_&&e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary-foreground flex-shrink-0"})]},x.id)})})]}),e.jsx(cc,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wider mb-4",children:"Workspaces"}),e.jsx("div",{className:"space-y-2",children:v.map(x=>{const j=x.icon,_=a===x.id;return e.jsxs("button",{onClick:()=>C(x.id),className:Ce("w-full flex items-center gap-4 p-4 rounded-lg text-left transition-colors duration-200",_?"bg-primary text-primary-foreground shadow-md":"hover:bg-muted/50"),children:[e.jsx(j,{className:"h-5 w-5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium",children:x.label}),e.jsx("div",{className:Ce("text-sm",_?"text-primary-foreground/80":"text-muted-foreground"),children:x.description})]}),_&&e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary-foreground flex-shrink-0"})]},x.id)})})]}),e.jsx(cc,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wider mb-4",children:"Tools"}),e.jsx("div",{className:"space-y-2",children:u.map(x=>{const j=x.icon,_=a===x.id;return e.jsxs("button",{onClick:()=>C(x.id),className:Ce("w-full flex items-center gap-4 p-4 rounded-lg text-left transition-colors duration-200",_?"bg-primary text-primary-foreground shadow-md":"hover:bg-muted/50"),children:[e.jsx(j,{className:"h-5 w-5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium",children:x.label}),e.jsx("div",{className:Ce("text-sm",_?"text-primary-foreground/80":"text-muted-foreground"),children:x.description})]}),x.id==="activity"&&o>0&&e.jsx(nt,{variant:"destructive",className:"text-xs",children:o}),_&&e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary-foreground flex-shrink-0"})]},x.id)})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wider mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(de,{variant:"outline",size:"sm",className:"h-auto py-3 flex-col gap-2",children:[e.jsx(bn,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs",children:"Search"})]}),e.jsxs(de,{variant:"outline",size:"sm",className:"h-auto py-3 flex-col gap-2 relative",children:[e.jsx(Ph,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs",children:"Alerts"}),o>0&&e.jsx(nt,{variant:"destructive",className:"absolute -top-1 -right-1 text-xs w-5 h-5 p-0 flex items-center justify-center",children:o})]})]})]})]}),n&&e.jsx("div",{className:"p-6 border-t",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(de,{variant:"outline",size:"sm",className:"flex-1",children:[e.jsx(hx,{className:"h-4 w-4 mr-2"}),"Settings"]}),e.jsx(de,{variant:"outline",size:"sm",onClick:l,children:e.jsx(qy,{className:"h-4 w-4"})})]})})]})})]}):null},Ik=s=>{switch(s){case"project_created":case"project_updated":return e.jsx(Cs,{className:"h-4 w-4"});case"moodboard_created":case"moodboard_updated":case"moodboard_deleted":case"moodboard_element_added":return e.jsx(yr,{className:"h-4 w-4"});case"whiteboard_created":case"whiteboard_updated":case"whiteboard_deleted":return e.jsx(Dr,{className:"h-4 w-4"});case"workflow_created":case"workflow_updated":case"workflow_deleted":case"workflow_stage_completed":return e.jsx(Na,{className:"h-4 w-4"});case"timeline_created":case"timeline_updated":case"timeline_deleted":case"timeline_milestone_reached":return e.jsx(ns,{className:"h-4 w-4"});case"comment_added":return e.jsx(Tr,{className:"h-4 w-4"});case"whiteboard_pin_added":case"whiteboard_pin_resolved":return e.jsx(Ua,{className:"h-4 w-4"});case"timeline_milestone_created":case"timeline_milestone_achieved":return e.jsx(za,{className:"h-4 w-4"});default:return e.jsx(ec,{className:"h-4 w-4"})}},Lk=s=>s.includes("project")?"bg-blue-500":s.includes("moodboard")?"bg-purple-500":s.includes("whiteboard")?"bg-green-500":s.includes("workflow")?"bg-orange-500":s.includes("timeline")?"bg-indigo-500":s.includes("comment")?"bg-yellow-500":s.includes("pin")?"bg-red-500":"bg-gray-500",Tk=s=>{const t=s.split("_"),r=t.pop()||"",a=t.join(" ");return`${a.charAt(0).toUpperCase()+a.slice(1)} ${r}`};function Dk({activity:s,open:t,onOpenChange:r,onNavigateToItem:a}){var w,x,j,_,T,U,R,V,$,S;if(!s)return null;const n=s.timestamp?ci(new Date(s.timestamp),{addSuffix:!0}):"Unknown time",i=(w=s.details)==null?void 0:w.projectName,o=(x=s.details)==null?void 0:x.workspaceName,l=(j=s.details)==null?void 0:j.reason,c=(_=s.details)==null?void 0:_.noteContent,h=(T=s.details)==null?void 0:T.commentText,f=(U=s.details)==null?void 0:U.notePreview,p=(R=s.details)==null?void 0:R.stageName,v=(V=s.details)==null?void 0:V.taskName,u=($=s.details)==null?void 0:$.oldValue,C=(S=s.details)==null?void 0:S.newValue;return e.jsx(Bs,{open:t,onOpenChange:r,children:e.jsxs(Es,{className:"max-w-md",children:[e.jsxs(qr,{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-full text-white ${Lk(s.type)}`,children:Ik(s.type)}),e.jsx(rr,{children:o||i||"Activity Details"})]}),e.jsx(_i,{asChild:!0,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(nt,{variant:"outline",children:Tk(s.type)}),e.jsx("span",{className:"text-xs text-muted-foreground",children:n})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-sm",children:l||c||h||f||"No additional details available."}),e.jsxs("div",{className:"space-y-2 text-sm",children:[i&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Cs,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:["Project: ",i]})]}),o&&e.jsxs("div",{className:"flex items-center gap-2",children:[s.type.includes("moodboard")&&e.jsx(yr,{className:"h-4 w-4 text-muted-foreground"}),s.type.includes("whiteboard")&&e.jsx(Dr,{className:"h-4 w-4 text-muted-foreground"}),s.type.includes("workflow")&&e.jsx(Na,{className:"h-4 w-4 text-muted-foreground"}),s.type.includes("timeline")&&e.jsx(ns,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:[s.type.includes("moodboard")&&"Moodboard: ",s.type.includes("whiteboard")&&"Whiteboard: ",s.type.includes("workflow")&&"Workflow: ",s.type.includes("timeline")&&"Timeline: ",o]})]}),p&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(zr,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:["Stage: ",p]})]}),v&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(za,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:["Milestone: ",v]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Sa,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:["By: ",s.userName]})]})]}),u&&C&&e.jsxs("div",{className:"space-y-2 border-t pt-2",children:[e.jsx("p",{className:"text-xs font-medium",children:"Changes:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{className:"p-2 bg-red-100 dark:bg-red-900/20 rounded",children:[e.jsx("p",{className:"font-medium mb-1",children:"Previous"}),e.jsx("p",{children:String(u)})]}),e.jsxs("div",{className:"p-2 bg-green-100 dark:bg-green-900/20 rounded",children:[e.jsx("p",{className:"font-medium mb-1",children:"New"}),e.jsx("p",{children:String(C)})]})]})]})]}),e.jsxs(Vn,{className:"sm:justify-between",children:[e.jsxs(de,{variant:"ghost",onClick:()=>r(!1),children:[e.jsx(Zs,{className:"h-4 w-4 mr-2"}),"Close"]}),a&&e.jsx(de,{onClick:a,className:"button-primary-enhanced hover-shimmer cyrus-ui",children:"View Details"})]})]})})}class Nd extends Error{constructor(r,a,n,i){super(r);ir(this,"statusCode");ir(this,"response");ir(this,"data");this.name="ApiError",this.statusCode=a,this.response=n,this.data=i}}class J2{constructor(t){ir(this,"baseUrl");ir(this,"timeout");ir(this,"retryAttempts");ir(this,"retryDelay");ir(this,"defaultHeaders");ir(this,"token",null);if(this.baseUrl=t.baseUrl.replace(/\/$/,""),this.timeout=t.timeout||1e4,this.retryAttempts=t.retryAttempts||3,this.retryDelay=t.retryDelay||1e3,this.defaultHeaders=E({"Content-Type":"application/json"},t.defaultHeaders),typeof window!="undefined"){const r=localStorage.getItem("jwtToken");r&&(this.token=r)}}setAuthToken(t){this.token=t}getAuthToken(){return this.token}getHeaders(t){var a;const r=E(E({},this.defaultHeaders),t);return this.token&&(r.Authorization=`Bearer ${this.token}`),typeof window!="undefined"&&((a=window.pulse2)!=null&&a.nonce)&&(r["X-WP-Nonce"]=window.pulse2.nonce),r}delay(t){return he(this,null,function*(){return new Promise(r=>setTimeout(r,t))})}shouldRetry(t,r,a){return r>=a?!1:!t.statusCode||t.statusCode>=500||t.statusCode===408||t.statusCode===429}makeRequest(a){return he(this,arguments,function*(t,r={}){var C;const n=t.startsWith("http")?t:`${this.baseUrl}${t}`,i=r.timeout||this.timeout,o=(C=r.retryAttempts)!=null?C:this.retryAttempts,l=r.skipRetry||!1,w=r,{timeout:c,retryAttempts:h,skipRetry:f}=w,p=Ee(w,["timeout","retryAttempts","skipRetry"]),v=this.getHeaders(r.headers);let u;for(let x=0;x<=o;x++)try{const j=new AbortController,_=setTimeout(()=>j.abort(),i),T=yield fetch(n,Z(E({},p),{headers:v,signal:j.signal}));clearTimeout(_);let U;const R=T.headers.get("content-type");if(R!=null&&R.includes("application/json")?U=yield T.json():U=yield T.text(),!T.ok){const V=new Nd((U==null?void 0:U.message)||U||`HTTP ${T.status}: ${T.statusText}`,T.status,T,U);if(l||!this.shouldRetry(V,x,o))throw V;u=V,yield this.delay(this.retryDelay*Math.pow(2,x));continue}return U}catch(j){if(j instanceof Nd?u=j:j instanceof DOMException&&j.name==="AbortError"?u=new Nd("Request timeout",408):u=new Nd(j instanceof Error?j.message:"Network error",0),l||!this.shouldRetry(u,x,o))throw u;yield this.delay(this.retryDelay*Math.pow(2,x))}throw u})}get(t,r){return he(this,null,function*(){return this.makeRequest(t,Z(E({},r),{method:"GET"}))})}post(t,r,a){return he(this,null,function*(){return this.makeRequest(t,Z(E({},a),{method:"POST",body:r?JSON.stringify(r):void 0}))})}put(t,r,a){return he(this,null,function*(){return this.makeRequest(t,Z(E({},a),{method:"PUT",body:r?JSON.stringify(r):void 0}))})}patch(t,r,a){return he(this,null,function*(){return this.makeRequest(t,Z(E({},a),{method:"PATCH",body:r?JSON.stringify(r):void 0}))})}delete(t,r){return he(this,null,function*(){return this.makeRequest(t,Z(E({},r),{method:"DELETE"}))})}upload(t,r,a,n){return he(this,null,function*(){const i=new FormData;i.append("file",r),a&&Object.entries(a).forEach(([l,c])=>{i.append(l,c)});const o=this.getHeaders(n==null?void 0:n.headers);return delete o["Content-Type"],this.makeRequest(t,Z(E({},n),{method:"POST",body:i,headers:o}))})}batch(t){return he(this,null,function*(){return Promise.all(t.map(r=>r()))})}healthCheck(){return he(this,null,function*(){try{return yield this.get("/health",{skipRetry:!0,timeout:5e3}),!0}catch(t){return!1}})}}class K2 extends J2{constructor(t){var r;super({baseUrl:(t==null?void 0:t.baseUrl)||typeof window!="undefined"&&((r=window.pulse2)==null?void 0:r.apiUrl)||"/wp-json/pulse2/v1",timeout:(t==null?void 0:t.timeout)||15e3,retryAttempts:(t==null?void 0:t.retryAttempts)||3,retryDelay:(t==null?void 0:t.retryDelay)||1e3,defaultHeaders:E({"Content-Type":"application/json"},t==null?void 0:t.defaultHeaders)})}getProjects(){return he(this,null,function*(){return this.get("/projects")})}getProject(t){return he(this,null,function*(){return this.get(`/projects/${t}`)})}createProject(t){return he(this,null,function*(){return this.post("/projects",t)})}updateProject(t,r){return he(this,null,function*(){return this.put(`/projects/${t}`,r)})}deleteProject(t){return he(this,null,function*(){return this.delete(`/projects/${t}`)})}getWorkspaces(){return he(this,null,function*(){return this.get("/workspaces")})}getWorkspacesByProject(t){return he(this,null,function*(){return this.get(`/workspaces/project/${t}`)})}createWorkspace(t){return he(this,null,function*(){return this.post("/workspaces",t)})}updateWorkspace(t,r){return he(this,null,function*(){return this.put(`/workspaces/${t}`,r)})}deleteWorkspace(t){return he(this,null,function*(){return this.delete(`/workspaces/${t}`)})}getMedia(t){return he(this,null,function*(){return this.get(`/media/${t}`)})}uploadMedia(t,r){return he(this,null,function*(){var o;const a=typeof window!="undefined"&&((o=window.pulse2)!=null&&o.mediaUrl)?window.pulse2.mediaUrl:"/wp-json/wp/v2/media",n=new FormData;n.append("file",t),r&&Object.entries(r).forEach(([l,c])=>{n.append(l,c)});const i=this.getHeaders();return delete i["Content-Type"],this.makeRequest(a,{method:"POST",body:n,headers:i,timeout:3e4})})}uploadWorkspaceImage(t,r,a){return he(this,null,function*(){try{const n=yield this.uploadMedia(r,a),i=E({imageId:n.id,imageUrl:n.source_url,filename:r.name},a);return this.post(`/workspaces/${t}/images`,i)}catch(n){throw n}})}}new J2({baseUrl:"/api",timeout:1e4,retryAttempts:3,retryDelay:1e3});new K2;const Jl=()=>{const s=new K2,t=typeof window!="undefined"?localStorage.getItem("jwtToken"):null;return t&&s.setAuthToken(t),s},Mk=()=>!(typeof window!="undefined"&&window.pulse2);class Ek{constructor(){ir(this,"shouldUseMock");this.shouldUseMock=Mk()}getProjects(){return he(this,null,function*(){return this.shouldUseMock?ia.getProjects():Jl().getProjects()})}getProject(t){return he(this,null,function*(){return this.shouldUseMock?ia.getProject(t):Jl().getProject(t)})}createProject(t){return he(this,null,function*(){return this.shouldUseMock?ia.createProject(t):Jl().createProject(t)})}updateProject(t,r){return he(this,null,function*(){return this.shouldUseMock?ia.updateProject(t,r):Jl().updateProject(t,r)})}deleteProject(t){return he(this,null,function*(){return this.shouldUseMock?ia.deleteProject(t):Jl().deleteProject(t)})}addProjectMedia(t,r){return he(this,null,function*(){if(this.shouldUseMock)return ia.addProjectMedia(t,r);{const n=[...(yield this.getProject(t)).media||[],r];return this.updateProject(t,{media:n})}})}updateProjectMedia(t,r,a){return he(this,null,function*(){var n;if(this.shouldUseMock)return ia.updateProjectMedia(t,r,a);{const o=((n=(yield this.getProject(t)).media)==null?void 0:n.map(l=>l.id===r?E(E({},l),a):l))||[];return this.updateProject(t,{media:o})}})}deleteProjectMedia(t,r){return he(this,null,function*(){var a;if(this.shouldUseMock)return ia.deleteProjectMedia(t,r);{const i=((a=(yield this.getProject(t)).media)==null?void 0:a.filter(o=>o.id!==r))||[];return this.updateProject(t,{media:i})}})}}const Kl=new Ek,Rk=()=>{const[s,t]=b.useState("list"),[r,a]=b.useState(null),[n,i]=b.useState(null),[o,l]=b.useState(!1),[c,h]=b.useState("list"),[f,p]=b.useState(!1),[v,u]=b.useState([{id:"1",name:"Priority",projectIds:[],expanded:!0}]),[C,w]=b.useState(null),[x,j]=b.useState(""),[_,T]=b.useState(null),[U,R]=b.useState(null),[V,$]=b.useState(null),[S,A]=b.useState(!1),[L,N]=b.useState(!1),[k,D]=b.useState(0),[I,H]=b.useState(""),[se,ce]=b.useState(!1),[le,ne]=b.useState("current"),[fe,Se]=b.useState(!1),[M,B]=b.useState(!1),[J,te]=b.useState(!1),[G,ae]=b.useState(!1),{theme:ie,toggleTheme:ue}=jS(),{toast:Ae,toasts:re}=da(),je=bc(),Le=l2(),X=!!U;b.useEffect(()=>{const Te=re.filter(ct=>ct.open).length;D(Te)},[re]),b.useEffect(()=>{const Te=localStorage.getItem("jwtToken"),ct=localStorage.getItem("userDisplayName");Te&&R(Te),ct&&$(ct);try{const vt=localStorage.getItem("jwtToken");vt&&typeof window!="undefined"&&(window.__pulse2Jwt=vt)}catch(vt){}},[]);const{data:Q=[],isLoading:W,error:ve}=rl({queryKey:["projects"],queryFn:()=>he(void 0,null,function*(){return(yield Kl.getProjects()).map(ct=>Qh(ct))})}),Pe=Ba({mutationFn:Te=>he(void 0,null,function*(){return Kl.createProject(Te)}),onSuccess:Te=>{je.invalidateQueries({queryKey:["projects"]}),Ae({title:"Project Created",description:"Your project has been created successfully."}),Le.logProjectCreated(Te.id,Te.name,Te.client)},onError:()=>{Ae({title:"Error",description:"Failed to create project.",variant:"destructive"})}}),be=Ba({mutationFn:vt=>he(void 0,[vt],function*({id:Te,data:ct}){return Kl.updateProject(Te,ct)}),onSuccess:()=>{je.invalidateQueries({queryKey:["projects"]}),Ae({title:"Project Updated",description:"Your project has been updated successfully."})},onError:()=>{Ae({title:"Error",description:"Failed to update project.",variant:"destructive"})}}),Be=Ba({mutationFn:Te=>he(void 0,null,function*(){return Kl.deleteProject(Te)}),onSuccess:()=>{je.invalidateQueries({queryKey:["projects"]}),Ae({title:"Project Deleted",description:"Your project has been deleted successfully."})},onError:()=>{Ae({title:"Error",description:"Failed to delete project.",variant:"destructive"})}}),{filteredAndSortedProjects:Fe,filterMode:$e,setFilterMode:Ke,sortMode:Qe,setSortMode:et,statusFilter:Je,setStatusFilter:Re,searchTerm:ft,setSearchTerm:mt}=bS(Q||[]),St=Te=>he(void 0,null,function*(){try{const ct=Z(E({},Te),{createdBy:V||"Unknown User"}),vt=yield Kl.createProject(ct);je.invalidateQueries({queryKey:["projects"]}),Ae({title:"Project Created",description:`${vt.name} has been created.`}),Le.logProjectCreated(vt.id,vt.name,vt.client),Hs()}catch(ct){Ae({title:"Error",description:ct.message,variant:"destructive"})}}),Ve=Te=>{n&&(be.mutate({id:n.id,data:Te}),Ms.logActivity({type:"project_updated",title:Te.name||n.name,projectId:n.id,userId:"current-user",metadata:{changes:Object.keys(Te)}}))},es=Te=>{et(Te)},jt=()=>{const Te=document.createElement("input");Te.type="file",Te.accept=".json",Te.onchange=ct=>he(void 0,null,function*(){var Wt;const vt=(Wt=ct.target.files)==null?void 0:Wt[0];if(vt)try{const Xt=yield vt.text(),Mr=JSON.parse(Xt);if(Array.isArray(Mr.projects)){for(const Vs of Mr.projects){const dr=Z(E({},Vs),{notes:[],media:[],externalLinks:[],artists:[],statusHistory:Vs.statusHistory||[]});if(delete dr.id,yield Pe.mutateAsync(dr),Vs.notes&&Array.isArray(Vs.notes))for(const gr of Vs.notes)yield Ft(gr,Vs.id)}Ae({title:"Import Successful",description:"Projects imported successfully."})}else Ae({title:"Import Error",description:"Invalid file format.",variant:"destructive"})}catch(Xt){Ae({title:"Import Error",description:"Failed to import projects.",variant:"destructive"})}}),Te.click()},Ls=()=>{const Te={version:"2.0",exportDate:new Date().toISOString(),projects:Fe,activities:Ms.getActivities(),metadata:{totalProjects:Fe.length,activeProjects:Fe.filter(Xt=>!Xt.isArchived).length,archivedProjects:Fe.filter(Xt=>Xt.isArchived).length,exportedBy:V||"Unknown User"}},ct=new Blob([JSON.stringify(Te,null,2)],{type:"application/json"}),vt=URL.createObjectURL(ct),Wt=document.createElement("a");Wt.href=vt,Wt.download=`pulse2-projects-export-${new Date().toISOString().split("T")[0]}.json`,Wt.click(),URL.revokeObjectURL(vt),Ms.logActivity({type:"project_updated",title:`Exported ${Fe.length} projects`,projectId:"",userId:"current-user",metadata:{exportType:"projects",count:Fe.length}})},Ft=(Te,ct,vt)=>he(void 0,null,function*(){const Wt={content:Te.content,projectId:ct,parentId:vt,createdAt:Te.createdAt,updatedAt:Te.updatedAt};try{const Xt=yield Io.createNote(Wt);if(Xt&&Xt.id&&Te.replies&&Array.isArray(Te.replies))for(const Mr of Te.replies)yield Ft(Mr,ct,Xt.id)}catch(Xt){}}),Lt=Te=>{window.confirm(`Are you sure you want to delete "${Te.name}"?`)&&(Le.logActivity({type:"project_deleted",projectId:Te.id,details:{projectName:Te.name}}),Be.mutate(Te.id))},lr=(Te,ct)=>{const vt=new Date().toISOString().split("T")[0],Xt=(Te.statusHistory||[]).filter(gr=>gr.date.split("T")[0]!==vt),Mr={id:typeof crypto!="undefined"&&crypto.randomUUID?crypto.randomUUID():`${Date.now()}-${Math.random()}`,status:ct,date:new Date().toISOString(),note:`Status updated to ${ct}`},Vs=[...Xt,Mr],dr={status:ct,statusHistory:Vs};be.mutate({id:Te.id,data:dr}),Le.logStatusChanged(Te.id,Te.status,ct)},Yt=(Te,ct)=>{be.mutate({id:Te.id,data:Z(E({},Te),{isArchived:ct})}),Ae({title:ct?"Project Archived":"Project Restored"}),ct&&Le.logActivity({type:"project_archived",projectId:Te.id,details:{projectName:Te.name}})},pr=(Te=null)=>{if(!X&&!Te){l(!0);return}i(Te),t("form"),B(!0)},rs=Te=>{a(Te),t("detail"),B(!0)},Hs=()=>{t("list"),a(null),i(null),B(!1)},cr=Te=>{h(Te),t("list"),a(null),i(null),B(!1),te(!1)},Kt=(Te,ct)=>{if(!Te)return;const vt=[...v],Wt=vt.find(Xt=>Xt.id===ct);Wt&&!Wt.projectIds.includes(Te)&&(Wt.projectIds.push(Te),u(vt)),T(null)},Ct=Te=>{const ct=[...v];ct.forEach(vt=>{vt.projectIds=vt.projectIds.filter(Wt=>Wt!==Te)}),u(ct)},tt=Te=>v.some(ct=>ct.projectIds.includes(Te)),[Tt,Mt]=b.useState(null),[As,xs]=b.useState(!1),gt=Te=>{Mt(Te),xs(!0)},Rs=()=>{Tt&&(xs(!1),Tt.projectId&&(rs(Tt.projectId),Tt.type.includes("moodboard")||Tt.type.includes("whiteboard")||Tt.type.includes("workflow")||Tt.type.includes("timeline")))};return e.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[e.jsxs("header",{className:Ce("border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 sticky top-0 z-50 transition-all duration-500 ease-in-out",M&&"transform -translate-y-full"),children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(de,{variant:"ghost",size:"sm",onClick:()=>te(!0),className:"md:hidden",children:e.jsx(zy,{className:"h-5 w-5"})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"text-3xl font-extrabold bg-gradient-to-r from-pink-500 to-purple-400 bg-clip-text text-transparent tracking-tight",children:"CT"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("h1",{className:"text-xl font-bold",children:[s==="list"&&c==="activity"&&"Activity Feed",s==="list"&&c==="profile"&&(X&&V?`${V} & Team`:"Profile & Team"),s==="list"&&c==="moodboards"&&"Moodboards",s==="list"&&c==="whiteboards"&&"Whiteboards",s==="list"&&c==="workflows"&&"Workflows",s==="list"&&c==="timeline"&&"Timeline",s==="list"&&!["activity","profile","moodboards","whiteboards","workflows","timeline"].includes(c)&&"Projects",s==="detail"&&"Project Details",s==="form"&&(n?"Edit Project":"New Project")]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"A unified view of all our creative projects."})]})]}),X&&V&&e.jsx("div",{className:"px-3 py-1.5 rounded-md text-sm font-medium bg-muted text-muted-foreground border border-border",children:V})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex items-center gap-2 relative",children:[e.jsxs("div",{className:"relative",children:[e.jsx(bn,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(It,{placeholder:le==="global"?"Search entire app...":"Search current tab...",className:"pl-10 w-64 hover-shimmer cyrus-ui",value:I,onChange:Te=>{H(Te.target.value),Se(Te.target.value.trim().length>0)},onFocus:()=>I.trim().length>0&&Se(!0)}),e.jsx(Pk,{searchTerm:I,searchScope:le,currentTab:c,onResultClick:Te=>{Se(!1),H("")},isVisible:fe,onClose:()=>Se(!1)})]}),e.jsx(de,{variant:le==="global"?"default":"outline",size:"sm",onClick:()=>ne(le==="global"?"current":"global"),className:"hover-shimmer cyrus-ui",title:le==="global"?"Search entire app":"Search current tab only",children:e.jsx(cl,{className:"h-4 w-4"})})]})})]}),e.jsx("div",{className:"px-4 border-b hidden md:block",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs(de,{onClick:()=>{h("list"),B(!1)},className:Ce("rounded-none border-b-2 border-transparent hover-shimmer cyrus-ui",c==="list"?"button-primary-enhanced":""),children:[e.jsx(By,{className:"h-4 w-4 mr-2"}),"Projects"]}),e.jsxs(de,{onClick:()=>{h("calendar"),B(!1)},className:Ce("rounded-none border-b-2 border-transparent hover-shimmer cyrus-ui",c==="calendar"?"button-primary-enhanced":""),children:[e.jsx(Cs,{className:"h-4 w-4 mr-2"}),"Calendar"]}),e.jsxs(de,{onClick:()=>{h("monday"),B(!1)},className:Ce("rounded-none border-b-2 border-transparent hover-shimmer cyrus-ui",c==="monday"?"button-primary-enhanced":""),children:[e.jsx(ox,{className:"h-4 w-4 mr-2"}),"Monday"]}),e.jsxs(de,{onClick:()=>{h("moodboards"),B(!1)},className:Ce("rounded-none border-b-2 border-transparent hover-shimmer cyrus-ui",c==="moodboards"?"button-primary-enhanced":""),"data-viewmode":"moodboards",children:[e.jsx(yr,{className:"h-4 w-4 mr-2"}),"Moodboards"]}),e.jsxs(de,{onClick:()=>{h("whiteboards"),B(!1)},className:Ce("rounded-none border-b-2 border-transparent hover-shimmer cyrus-ui",c==="whiteboards"?"button-primary-enhanced":""),"data-viewmode":"whiteboards",children:[e.jsx(Dr,{className:"h-4 w-4 mr-2"}),"Whiteboards"]}),e.jsxs(de,{onClick:()=>{h("workflows"),B(!1)},className:Ce("rounded-none border-b-2 border-transparent hover-shimmer cyrus-ui",c==="workflows"?"button-primary-enhanced":""),children:[e.jsx(Na,{className:"h-4 w-4 mr-2"}),"Workflows"]}),e.jsxs(de,{onClick:()=>{h("timeline"),B(!1)},className:Ce("rounded-none border-b-2 border-transparent hover-shimmer cyrus-ui",c==="timeline"?"button-primary-enhanced":""),children:[e.jsx(ns,{className:"h-4 w-4 mr-2"}),"Timeline"]}),e.jsxs(de,{onClick:()=>{h("activity"),B(!1)},className:Ce("rounded-none border-b-2 border-transparent hover-shimmer cyrus-ui",c==="activity"?"button-primary-enhanced":""),children:[e.jsx(Cm,{className:"h-4 w-4 mr-2"}),"Activity"]}),e.jsx(de,{onClick:()=>{h("profile"),B(!1)},className:Ce("rounded-none border-b-2 border-transparent hover-shimmer cyrus-ui",c==="profile"?"button-primary-enhanced":""),children:X&&V?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 mr-2 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center text-white text-xs font-medium",children:V.charAt(0).toUpperCase()}),V]}):e.jsxs(e.Fragment,{children:[e.jsx(wr,{className:"h-4 w-4 mr-2"}),"Profile"]})}),e.jsx(de,{variant:"ghost",onClick:()=>B(!0),className:"rounded-none border-b-2 border-transparent ml-2",title:"Hide Header",children:e.jsx(el,{className:"h-4 w-4"})}),e.jsx("div",{className:"ml-auto flex items-center gap-3",children:!X&&e.jsxs(de,{onClick:()=>l(!0),className:"button-primary-enhanced hover-shimmer cyrus-ui",children:[e.jsx(Uy,{className:"h-4 w-4 mr-2"}),"Login"]})})]})})]}),e.jsxs("div",{className:Ce("flex-1 transition-all duration-500 ease-in-out",S&&"ml-80",M&&"transform -translate-y-[120px]"),children:[e.jsx(yS,{isOpen:o,onClose:()=>l(!1),onLoginSuccess:(Te,ct)=>{R(Te),$(ct),localStorage.setItem("userDisplayName",ct)}}),e.jsxs("div",{className:Ce("p-0",M&&"pt-4"),children:[W&&e.jsx("p",{className:"p-4",children:"Loading projects..."}),!W&&!ve&&s==="list"&&e.jsxs(e.Fragment,{children:[(c==="list"||c==="monday")&&e.jsx("div",{className:"p-4 glass-card m-4 mb-2",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("div",{className:"flex-1 relative min-w-[200px]",children:[e.jsx(bn,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(It,{placeholder:"Search projects...",className:"pl-10",value:ft,onChange:Te=>mt(Te.target.value)})]}),e.jsxs(Ss,{value:Je,onValueChange:Te=>Re(Te),children:[e.jsx(ys,{className:"w-[180px] hover-shimmer cyrus-ui",children:e.jsx(ks,{placeholder:"All Statuses"})}),e.jsxs(bs,{children:[e.jsx(at,{value:"all",children:"All Statuses"}),wa.map(Te=>e.jsx(at,{value:Te.value,children:Te.label},Te.value))]})]}),e.jsxs(Ss,{value:Qe,onValueChange:es,children:[e.jsx(ys,{className:"w-[180px] hover-shimmer cyrus-ui",children:e.jsx(ks,{placeholder:"Sort by..."})}),e.jsxs(bs,{children:[e.jsx(at,{value:"newest",children:"Newest"}),e.jsx(at,{value:"oldest",children:"Oldest"}),e.jsx(at,{value:"priority",children:"Priority"}),e.jsx(at,{value:"name",children:"Name"}),e.jsx(at,{value:"status",children:"Status"})]})]}),e.jsxs("div",{className:"flex items-center gap-1 p-1 bg-muted rounded-lg",children:[e.jsx(de,{size:"sm",onClick:()=>Ke("active"),className:Ce("hover-shimmer",$e==="active"?"button-primary-enhanced":""),children:"Active"}),e.jsx(de,{size:"sm",onClick:()=>Ke("archived"),className:Ce("hover-shimmer",$e==="archived"?"button-primary-enhanced":""),children:"Archived"})]}),c==="list"&&e.jsx("div",{className:"flex items-center gap-1 p-1 bg-muted rounded-lg",children:e.jsx(de,{size:"sm",onClick:()=>p(!f),className:Ce("hover-shimmer",f?"button-primary-enhanced":""),children:f?e.jsxs(e.Fragment,{children:[e.jsx(lx,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:"Expand"})]}):e.jsxs(e.Fragment,{children:[e.jsx(cx,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:"Compact"})]})})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(de,{onClick:()=>pr(null),className:"button-primary-enhanced hover-shimmer cyrus-ui",children:[e.jsx(ws,{className:"h-4 w-4 mr-2"}),"New Project"]}),e.jsxs(de,{onClick:jt,className:"button-primary-enhanced hover-shimmer cyrus-ui",children:[e.jsx(mx,{className:"h-4 w-4 mr-2"}),"Import"]}),e.jsxs(de,{onClick:Ls,className:"button-primary-enhanced hover-shimmer cyrus-ui",children:[e.jsx(_h,{className:"h-4 w-4 mr-2"}),"Export"]})]})]})}),c==="list"&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4",children:Fe.map(Te=>e.jsx(g4,{project:Te,onEdit:()=>pr(Te),onStatusChange:ct=>lr(Te,ct),onArchive:()=>Yt(Te,!0),onRestore:()=>Yt(Te,!1),onDelete:()=>Lt(Te),isCompact:f,isLoggedIn:X,onClick:()=>rs(Te.id)},Te.id))}),c==="calendar"&&e.jsx(F4,{projects:Fe,onProjectClick:rs,onActivityClick:gt}),c==="activity"&&e.jsx(_1,{limit:50,showFilters:!0,showRefreshButton:!0,isMainActivityTab:!0,onActivityClick:Te=>{Te.projectId&&rs(Te.projectId)}}),c==="profile"&&e.jsx(xS,{}),c==="moodboards"&&e.jsx(ek,{projects:Fe,onEnterFocusMode:()=>B(!0),onExitFocusMode:()=>B(!1)}),c==="whiteboards"&&e.jsx(kk,{projects:Fe,onEnterFocusMode:()=>B(!0),onExitFocusMode:()=>B(!1)}),c==="workflows"&&e.jsx(Ck,{projects:Fe,onEnterFocusMode:()=>B(!0),onExitFocusMode:()=>B(!1)}),c==="timeline"&&e.jsx(Ak,{projects:Fe,onEnterFocusMode:()=>B(!0),onExitFocusMode:()=>B(!1)}),c==="monday"&&e.jsx(e3,{projects:Fe,onEditProject:Te=>pr(Te),onStatusChange:(Te,ct)=>lr(Te,ct),onArchiveProject:Te=>Yt(Te,!0),onRestoreProject:Te=>Yt(Te,!1),onDeleteProject:Te=>Lt(Te),isLoggedIn:X,onProjectClick:Te=>rs(Te)})]}),s==="detail"&&r&&e.jsx(HS,{project:Q.find(Te=>Te.id===r),onBack:Hs,onEdit:()=>pr(Q.find(Te=>Te.id===r)),isLoggedIn:X,onPin:()=>{tt(r)?Ct(r):v.length===1?Kt(r,v[0].id):T(r)},isPinned:tt(r),autoRefresh:G,onToggleAutoRefresh:ae}),s==="form"&&e.jsx(E4,{onClose:Hs,onSubmit:Te=>{n?Ve(Te):St(Te),Hs()},project:n||void 0,isLoggedIn:X}),!W&&Fe.length===0&&s==="list"&&e.jsxs("div",{className:"text-center py-16 glass-card m-4",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"No projects found"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:$e==="active"?"Create a new project to get started.":"No archived projects match your filters."})]})]})]}),e.jsxs("div",{className:"fixed right-4 bottom-4 flex flex-col gap-3 z-50",children:[e.jsx(de,{onClick:ue,className:"w-12 h-12 rounded-full glass-card border-0 shadow-lg hover-shimmer cyrus-ui transition-all duration-300 hover:scale-110 hover:glow",size:"icon",variant:"ghost",children:ie==="dark"?e.jsx(Vy,{className:"h-4 w-4"}):e.jsx($y,{className:"h-4 w-4"})}),e.jsxs("div",{className:"relative",children:[e.jsx(de,{onClick:()=>{N(!L),S&&A(!1),L||D(0)},className:Ce("w-12 h-12 rounded-full glass-card border-0 shadow-lg hover-shimmer cyrus-ui transition-all duration-300 hover:scale-110 hover:glow",L&&"ring-2 ring-primary ring-offset-2 ring-offset-background"),size:"icon",variant:"ghost",children:e.jsx(Ph,{className:"h-4 w-4"})}),k>0&&e.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-gradient-to-r from-red-500 to-pink-500 text-white text-xs rounded-full flex items-center justify-center font-bold shadow-lg z-[60] border-2 border-background pointer-events-none animate-pulse",children:k>9?"9+":k})]}),e.jsx(de,{onClick:()=>{A(!S),L&&N(!1)},className:Ce("w-12 h-12 rounded-full glass-card border-0 shadow-lg hover-shimmer cyrus-ui transition-all duration-300 hover:scale-110 hover:glow",S&&"ring-2 ring-primary ring-offset-2 ring-offset-background"),size:"icon",variant:"ghost",children:e.jsx(Ua,{className:"h-4 w-4"})})]}),(S||L)&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-40",onClick:()=>{A(!1),N(!1)}}),e.jsxs("div",{className:"fixed top-0 left-0 h-full w-full sm:w-80 md:w-96 bg-background/95 backdrop-blur-sm border-r shadow-2xl z-50 overflow-y-auto",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold bg-gradient-primary bg-clip-text text-transparent",children:L?"Recent Activity":"Pinned Projects"}),e.jsx(de,{variant:"ghost",size:"sm",onClick:()=>{A(!1),N(!1)},className:"hover-shimmer cyrus-ui",children:"×"})]})}),e.jsx("div",{className:"p-4",children:L?e.jsx("div",{className:"space-y-3",children:(()=>{const ct=JSON.parse(localStorage.getItem("activities")||"[]").slice(0,10);return ct.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Ph,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No recent activity"}),e.jsx("p",{className:"text-xs",children:"Activity will appear here when you interact with projects"})]}):ct.map((vt,Wt)=>e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-muted/20 hover:bg-muted/30 transition-colors",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-indicator mt-2 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:vt.title}),e.jsx("span",{className:"text-xs text-muted-foreground whitespace-nowrap",children:new Date(vt.date).toLocaleDateString()})]}),e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:vt.description||vt.title}),vt.projectName&&e.jsx("div",{className:"flex items-center gap-1",children:e.jsx("span",{className:"text-xs bg-primary/10 text-primary px-2 py-0.5 rounded",children:vt.projectName})})]})]},vt.id||Wt))})()}):e.jsx("div",{className:"space-y-3",children:v.map(Te=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:Te.name}),e.jsx(nt,{variant:"secondary",className:"text-xs",children:Te.projectIds.length})]}),Te.projectIds.length===0?e.jsx("p",{className:"text-xs text-muted-foreground italic",children:"No pinned projects"}):e.jsx("div",{className:"space-y-2",children:Te.projectIds.map(ct=>{const vt=Q.find(Wt=>Wt.id===ct);return vt?e.jsxs("div",{className:"flex items-center gap-2 p-2 rounded bg-muted/10 hover:bg-muted/20 cursor-pointer transition-colors",onClick:()=>{rs(ct),A(!1)},children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-indicator"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:vt.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:vt.client})]})]},ct):null})})]},Te.id))})})]})]}),e.jsx(Bs,{open:!!_,onOpenChange:()=>T(null),children:e.jsxs(Es,{className:"glass-card",children:[e.jsx(qr,{children:e.jsx(rr,{children:"Select a group to pin this project"})}),e.jsx("div",{className:"flex flex-col gap-2",children:v.map(Te=>e.jsx(de,{onClick:()=>Kt(_,Te.id),variant:"outline",className:"hover-shimmer cyrus-ui",children:Te.name},Te.id))})]})}),M&&e.jsx(de,{onClick:()=>B(!1),className:Ce("fixed bottom-4 left-1/2 -translate-x-1/2 z-[60] shadow-xl transition-all duration-300 ease-in-out","bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/80","border border-border/50 hover:bg-accent hover:text-accent-foreground","h-10 w-10 rounded-full p-0","hover:scale-110 active:scale-95"),title:"Show Header",children:e.jsx(el,{className:"h-5 w-5"})}),e.jsx(_k,{isOpen:J,onClose:()=>te(!1),onNavigate:cr,currentView:c,isLoggedIn:X,userDisplayName:V,notificationCount:k,onLogout:()=>{R(null),$(null),localStorage.removeItem("jwtToken"),localStorage.removeItem("userDisplayName"),localStorage.removeItem("userId"),te(!1)},onLogin:()=>{l(!0),te(!1)}}),e.jsx(Dk,{activity:Tt,open:As,onOpenChange:xs,onNavigateToItem:Rs})]})},Ok=()=>{const s=d0();return b.useEffect(()=>{},[s.pathname]),e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),e.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),e.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},Fk=new bj,Kp=()=>e.jsx(wS,{defaultTheme:"dark",children:e.jsx(kj,{client:Fk,children:e.jsxs(Hi,{children:[e.jsx(o5,{}),e.jsx(B5,{}),e.jsx(NN,{children:e.jsxs(bN,{children:[e.jsx(Kh,{path:"/",element:e.jsx(Rk,{})}),e.jsx(Kh,{path:"*",element:e.jsx(Ok,{})})]})})]})})});class Xp extends rt.Component{constructor(t){super(t),this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){}render(){return this.state.hasError?e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Something went wrong."}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"An unexpected error occurred. You can try to reload the page."}),e.jsx("button",{className:"px-3 py-2 rounded bg-primary text-white",onClick:()=>window.location.reload(),children:"Reload"})]}):this.props.children}}function Qp(){const s=document.getElementById("pulse2-root");if(s){const t=s.querySelector("#root");if(t)try{jh(t).render(e.jsx(Xp,{children:e.jsx(Kp,{})}))}catch(r){}}else{const t=document.getElementById("root");if(t)try{jh(t).render(e.jsx(Xp,{children:e.jsx(Kp,{})}))}catch(r){}}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",Qp):Qp();export{gs as _};
