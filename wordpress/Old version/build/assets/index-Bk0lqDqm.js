const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index.es-d9VE6QLZ.js","assets/vendor-CayYuqk8.js","assets/ui-BDws76LY.js"])))=>i.map(i=>d[i]);
var Lv=Object.defineProperty,Iv=Object.defineProperties;var Dv=Object.getOwnPropertyDescriptors;var rd=Object.getOwnPropertySymbols;var If=Object.prototype.hasOwnProperty,Df=Object.prototype.propertyIsEnumerable;var Tf=s=>{throw TypeError(s)},Mf=Math.pow,eh=(s,t,r)=>t in s?Lv(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r,E=(s,t)=>{for(var r in t||(t={}))If.call(t,r)&&eh(s,r,t[r]);if(rd)for(var r of rd(t))Df.call(t,r)&&eh(s,r,t[r]);return s},Q=(s,t)=>Iv(s,Dv(t));var Me=(s,t)=>{var r={};for(var a in s)If.call(s,a)&&t.indexOf(a)<0&&(r[a]=s[a]);if(s!=null&&rd)for(var a of rd(s))t.indexOf(a)<0&&Df.call(s,a)&&(r[a]=s[a]);return r};var Qs=(s,t,r)=>eh(s,typeof t!="symbol"?t+"":t,r),th=(s,t,r)=>t.has(s)||Tf("Cannot "+r);var pe=(s,t,r)=>(th(s,t,"read from private field"),r?r.call(s):t.get(s)),yt=(s,t,r)=>t.has(s)?Tf("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(s):t.set(s,r),dt=(s,t,r,a)=>(th(s,t,"write to private field"),a?a.call(s,r):t.set(s,r),r),Ht=(s,t,r)=>(th(s,t,"access private method"),r);var ad=(s,t,r,a)=>({set _(n){dt(s,t,n,r)},get _(){return pe(s,t,a)}});var xe=(s,t,r)=>new Promise((a,n)=>{var i=d=>{try{l(r.next(d))}catch(h){n(h)}},o=d=>{try{l(r.throw(d))}catch(h){n(h)}},l=d=>d.done?a(d.value):Promise.resolve(d.value).then(i,o);l((r=r.apply(s,t)).next())});import{j as e,P as Vt,c as fn,a as ag,u as As,B as Tv,b as $o,d as Ui,e as Rt,f as Jr,R as Mv,g as ng,h as Xr,i as Ev,k as zd,D as ig,C as og,l as lg,m as $d,n as cg,A as dg,o as ug,S as Rv,p as Ov,q as Fv,r as Bv,s as Uv,F as qv,t as hg,v as mg,w as fg,x as zv,y as pg,I as gg,z as xg,E as vg,G as yg,L as bg,H as wg,J as $v,T as Wv,K as Hv,M as jg,N as Ng,O as Sg,Q as Vv,U as vm,V as kg,W as ym,X as bm,Y as wm,Z as jm,_ as Cg,$ as Ag,a0 as Pg,a1 as _g,a2 as Yv}from"./ui-BDws76LY.js";import{a as Wd,r as N,o as it,v as Gv,R as Jv,c as Kv,g as Xv}from"./vendor-CayYuqk8.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();var jh,Ef=Wd;jh=Ef.createRoot,Ef.hydrateRoot;const Qv=1,Zv=5e3;let sh=0;function ey(){return sh=(sh+1)%Number.MAX_SAFE_INTEGER,sh.toString()}const rh=new Map,Rf=s=>{if(rh.has(s))return;const t=setTimeout(()=>{rh.delete(s),$l({type:"REMOVE_TOAST",toastId:s})},Zv);rh.set(s,t)},ty=(s,t)=>{switch(t.type){case"ADD_TOAST":return Q(E({},s),{toasts:[t.toast,...s.toasts].slice(0,Qv)});case"UPDATE_TOAST":return Q(E({},s),{toasts:s.toasts.map(r=>r.id===t.toast.id?E(E({},r),t.toast):r)});case"DISMISS_TOAST":{const{toastId:r}=t;return r?Rf(r):s.toasts.forEach(a=>{Rf(a.id)}),Q(E({},s),{toasts:s.toasts.map(a=>a.id===r||r===void 0?Q(E({},a),{open:!1}):a)})}case"REMOVE_TOAST":return t.toastId===void 0?Q(E({},s),{toasts:[]}):Q(E({},s),{toasts:s.toasts.filter(r=>r.id!==t.toastId)})}},xd=[];let vd={toasts:[]};function $l(s){vd=ty(vd,s),xd.forEach(t=>{t(vd)})}function nn(t){var s=Me(t,[]);const r=ey(),a=i=>$l({type:"UPDATE_TOAST",toast:Q(E({},i),{id:r})}),n=()=>$l({type:"DISMISS_TOAST",toastId:r});return $l({type:"ADD_TOAST",toast:Q(E({},s),{id:r,open:!0,duration:s.duration||5e3,onOpenChange:i=>{i||n()}})}),{id:r,dismiss:n,update:a}}function Pa(){const[s,t]=N.useState(vd);return N.useEffect(()=>(xd.push(t),()=>{const r=xd.indexOf(t);r>-1&&xd.splice(r,1)}),[s]),Q(E({},s),{toast:nn,dismiss:r=>$l({type:"DISMISS_TOAST",toastId:r})})}var Lg=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),sy="VisuallyHidden",ic=N.forwardRef((s,t)=>e.jsx(Vt.span,Q(E({},s),{ref:t,style:E(E({},Lg),s.style)})));ic.displayName=sy;var ry=ic,Ig="ToastProvider",[Nm,ay,ny]=ag("Toast"),[Dg,Dk]=fn("Toast",[ny]),[iy,Hd]=Dg(Ig),Tg=s=>{const{__scopeToast:t,label:r="Notification",duration:a=5e3,swipeDirection:n="right",swipeThreshold:i=50,children:o}=s,[l,d]=N.useState(null),[h,f]=N.useState(0),p=N.useRef(!1),x=N.useRef(!1);return r.trim(),e.jsx(Nm.Provider,{scope:t,children:e.jsx(iy,{scope:t,label:r,duration:a,swipeDirection:n,swipeThreshold:i,toastCount:h,viewport:l,onViewportChange:d,onToastAdd:N.useCallback(()=>f(u=>u+1),[]),onToastRemove:N.useCallback(()=>f(u=>u-1),[]),isFocusedToastEscapeKeyDownRef:p,isClosePausedRef:x,children:o})})};Tg.displayName=Ig;var Mg="ToastViewport",oy=["F8"],Nh="toast.viewportPause",Sh="toast.viewportResume",Eg=N.forwardRef((s,t)=>{const v=s,{__scopeToast:r,hotkey:a=oy,label:n="Notifications ({hotkey})"}=v,i=Me(v,["__scopeToast","hotkey","label"]),o=Hd(Mg,r),l=ay(r),d=N.useRef(null),h=N.useRef(null),f=N.useRef(null),p=N.useRef(null),x=As(t,p,o.onViewportChange),u=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),k=o.toastCount>0;N.useEffect(()=>{const w=P=>{var B;a.length!==0&&a.every(F=>P[F]||P.code===F)&&((B=p.current)==null||B.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[a]),N.useEffect(()=>{const w=d.current,P=p.current;if(k&&w&&P){const D=()=>{if(!o.isClosePausedRef.current){const z=new CustomEvent(Nh);P.dispatchEvent(z),o.isClosePausedRef.current=!0}},B=()=>{if(o.isClosePausedRef.current){const z=new CustomEvent(Sh);P.dispatchEvent(z),o.isClosePausedRef.current=!1}},F=z=>{!w.contains(z.relatedTarget)&&B()},se=()=>{w.contains(document.activeElement)||B()};return w.addEventListener("focusin",D),w.addEventListener("focusout",F),w.addEventListener("pointermove",D),w.addEventListener("pointerleave",se),window.addEventListener("blur",D),window.addEventListener("focus",B),()=>{w.removeEventListener("focusin",D),w.removeEventListener("focusout",F),w.removeEventListener("pointermove",D),w.removeEventListener("pointerleave",se),window.removeEventListener("blur",D),window.removeEventListener("focus",B)}}},[k,o.isClosePausedRef]);const j=N.useCallback(({tabbingDirection:w})=>{const D=l().map(B=>{const F=B.ref.current,se=[F,...wy(F)];return w==="forwards"?se:se.reverse()});return(w==="forwards"?D.reverse():D).flat()},[l]);return N.useEffect(()=>{const w=p.current;if(w){const P=D=>{var se,z,C;const B=D.altKey||D.ctrlKey||D.metaKey;if(D.key==="Tab"&&!B){const A=document.activeElement,L=D.shiftKey;if(D.target===w&&L){(se=h.current)==null||se.focus();return}const I=j({tabbingDirection:L?"backwards":"forwards"}),M=I.findIndex(J=>J===A);ah(I.slice(M+1))?D.preventDefault():L?(z=h.current)==null||z.focus():(C=f.current)==null||C.focus()}};return w.addEventListener("keydown",P),()=>w.removeEventListener("keydown",P)}},[l,j]),e.jsxs(Tv,{ref:d,role:"region","aria-label":n.replace("{hotkey}",u),tabIndex:-1,style:{pointerEvents:k?void 0:"none"},children:[k&&e.jsx(kh,{ref:h,onFocusFromOutsideViewport:()=>{const w=j({tabbingDirection:"forwards"});ah(w)}}),e.jsx(Nm.Slot,{scope:r,children:e.jsx(Vt.ol,Q(E({tabIndex:-1},i),{ref:x}))}),k&&e.jsx(kh,{ref:f,onFocusFromOutsideViewport:()=>{const w=j({tabbingDirection:"backwards"});ah(w)}})]})});Eg.displayName=Mg;var Rg="ToastFocusProxy",kh=N.forwardRef((s,t)=>{const o=s,{__scopeToast:r,onFocusFromOutsideViewport:a}=o,n=Me(o,["__scopeToast","onFocusFromOutsideViewport"]),i=Hd(Rg,r);return e.jsx(ic,Q(E({"aria-hidden":!0,tabIndex:0},n),{ref:t,style:{position:"fixed"},onFocus:l=>{var f;const d=l.relatedTarget;!((f=i.viewport)!=null&&f.contains(d))&&a()}}))});kh.displayName=Rg;var oc="Toast",ly="toast.swipeStart",cy="toast.swipeMove",dy="toast.swipeCancel",uy="toast.swipeEnd",Og=N.forwardRef((s,t)=>{const h=s,{forceMount:r,open:a,defaultOpen:n,onOpenChange:i}=h,o=Me(h,["forceMount","open","defaultOpen","onOpenChange"]),[l,d]=$o({prop:a,defaultProp:n!=null?n:!0,onChange:i,caller:oc});return e.jsx(Ui,{present:r||l,children:e.jsx(fy,Q(E({open:l},o),{ref:t,onClose:()=>d(!1),onPause:Jr(s.onPause),onResume:Jr(s.onResume),onSwipeStart:Rt(s.onSwipeStart,f=>{f.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Rt(s.onSwipeMove,f=>{const{x:p,y:x}=f.detail.delta;f.currentTarget.setAttribute("data-swipe","move"),f.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${p}px`),f.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${x}px`)}),onSwipeCancel:Rt(s.onSwipeCancel,f=>{f.currentTarget.setAttribute("data-swipe","cancel"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),f.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Rt(s.onSwipeEnd,f=>{const{x:p,y:x}=f.detail.delta;f.currentTarget.setAttribute("data-swipe","end"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),f.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${p}px`),f.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${x}px`),d(!1)})}))})});Og.displayName=oc;var[hy,my]=Dg(oc,{onClose(){}}),fy=N.forwardRef((s,t)=>{const M=s,{__scopeToast:r,type:a="foreground",duration:n,open:i,onClose:o,onEscapeKeyDown:l,onPause:d,onResume:h,onSwipeStart:f,onSwipeMove:p,onSwipeCancel:x,onSwipeEnd:u}=M,k=Me(M,["__scopeToast","type","duration","open","onClose","onEscapeKeyDown","onPause","onResume","onSwipeStart","onSwipeMove","onSwipeCancel","onSwipeEnd"]),j=Hd(oc,r),[v,w]=N.useState(null),P=As(t,J=>w(J)),D=N.useRef(null),B=N.useRef(null),F=n||j.duration,se=N.useRef(0),z=N.useRef(F),C=N.useRef(0),{onToastAdd:A,onToastRemove:L}=j,y=Jr(()=>{var ae;(v==null?void 0:v.contains(document.activeElement))&&((ae=j.viewport)==null||ae.focus()),o()}),S=N.useCallback(J=>{!J||J===1/0||(window.clearTimeout(C.current),se.current=new Date().getTime(),C.current=window.setTimeout(y,J))},[y]);N.useEffect(()=>{const J=j.viewport;if(J){const ae=()=>{S(z.current),h==null||h()},he=()=>{const ce=new Date().getTime()-se.current;z.current=z.current-ce,window.clearTimeout(C.current),d==null||d()};return J.addEventListener(Nh,he),J.addEventListener(Sh,ae),()=>{J.removeEventListener(Nh,he),J.removeEventListener(Sh,ae)}}},[j.viewport,F,d,h,S]),N.useEffect(()=>{i&&!j.isClosePausedRef.current&&S(F)},[i,F,j.isClosePausedRef,S]),N.useEffect(()=>(A(),()=>L()),[A,L]);const I=N.useMemo(()=>v?$g(v):null,[v]);return j.viewport?e.jsxs(e.Fragment,{children:[I&&e.jsx(py,{__scopeToast:r,role:"status","aria-live":a==="foreground"?"assertive":"polite","aria-atomic":!0,children:I}),e.jsx(hy,{scope:r,onClose:y,children:Wd.createPortal(e.jsx(Nm.ItemSlot,{scope:r,children:e.jsx(Mv,{asChild:!0,onEscapeKeyDown:Rt(l,()=>{j.isFocusedToastEscapeKeyDownRef.current||y(),j.isFocusedToastEscapeKeyDownRef.current=!1}),children:e.jsx(Vt.li,Q(E({role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":j.swipeDirection},k),{ref:P,style:E({userSelect:"none",touchAction:"none"},s.style),onKeyDown:Rt(s.onKeyDown,J=>{J.key==="Escape"&&(l==null||l(J.nativeEvent),J.nativeEvent.defaultPrevented||(j.isFocusedToastEscapeKeyDownRef.current=!0,y()))}),onPointerDown:Rt(s.onPointerDown,J=>{J.button===0&&(D.current={x:J.clientX,y:J.clientY})}),onPointerMove:Rt(s.onPointerMove,J=>{if(!D.current)return;const ae=J.clientX-D.current.x,he=J.clientY-D.current.y,ce=!!B.current,ie=["left","right"].includes(j.swipeDirection),ve=["left","up"].includes(j.swipeDirection)?Math.min:Math.max,Ae=ie?ve(0,ae):0,T=ie?0:ve(0,he),U=J.pointerType==="touch"?10:2,V={x:Ae,y:T},re={originalEvent:J,delta:V};ce?(B.current=V,nd(cy,p,re,{discrete:!1})):Of(V,j.swipeDirection,U)?(B.current=V,nd(ly,f,re,{discrete:!1}),J.target.setPointerCapture(J.pointerId)):(Math.abs(ae)>U||Math.abs(he)>U)&&(D.current=null)}),onPointerUp:Rt(s.onPointerUp,J=>{const ae=B.current,he=J.target;if(he.hasPointerCapture(J.pointerId)&&he.releasePointerCapture(J.pointerId),B.current=null,D.current=null,ae){const ce=J.currentTarget,ie={originalEvent:J,delta:ae};Of(ae,j.swipeDirection,j.swipeThreshold)?nd(uy,u,ie,{discrete:!0}):nd(dy,x,ie,{discrete:!0}),ce.addEventListener("click",ve=>ve.preventDefault(),{once:!0})}})}))})}),j.viewport)})]}):null}),py=s=>{const h=s,{__scopeToast:t,children:r}=h,a=Me(h,["__scopeToast","children"]),n=Hd(oc,t),[i,o]=N.useState(!1),[l,d]=N.useState(!1);return yy(()=>o(!0)),N.useEffect(()=>{const f=window.setTimeout(()=>d(!0),1e3);return()=>window.clearTimeout(f)},[]),l?null:e.jsx(ng,{asChild:!0,children:e.jsx(ic,Q(E({},a),{children:i&&e.jsxs(e.Fragment,{children:[n.label," ",r]})}))})},gy="ToastTitle",Fg=N.forwardRef((s,t)=>{const n=s,{__scopeToast:r}=n,a=Me(n,["__scopeToast"]);return e.jsx(Vt.div,Q(E({},a),{ref:t}))});Fg.displayName=gy;var xy="ToastDescription",Bg=N.forwardRef((s,t)=>{const n=s,{__scopeToast:r}=n,a=Me(n,["__scopeToast"]);return e.jsx(Vt.div,Q(E({},a),{ref:t}))});Bg.displayName=xy;var vy="ToastAction",Ug=N.forwardRef((s,t)=>{const n=s,{altText:r}=n,a=Me(n,["altText"]);return r.trim()?e.jsx(zg,{altText:r,asChild:!0,children:e.jsx(Sm,Q(E({},a),{ref:t}))}):null});Ug.displayName=vy;var qg="ToastClose",Sm=N.forwardRef((s,t)=>{const i=s,{__scopeToast:r}=i,a=Me(i,["__scopeToast"]),n=my(qg,r);return e.jsx(zg,{asChild:!0,children:e.jsx(Vt.button,Q(E({type:"button"},a),{ref:t,onClick:Rt(s.onClick,n.onClose)}))})});Sm.displayName=qg;var zg=N.forwardRef((s,t)=>{const i=s,{__scopeToast:r,altText:a}=i,n=Me(i,["__scopeToast","altText"]);return e.jsx(Vt.div,Q(E({"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":a||void 0},n),{ref:t}))});function $g(s){const t=[];return Array.from(s.childNodes).forEach(a=>{if(a.nodeType===a.TEXT_NODE&&a.textContent&&t.push(a.textContent),by(a)){const n=a.ariaHidden||a.hidden||a.style.display==="none",i=a.dataset.radixToastAnnounceExclude==="";if(!n)if(i){const o=a.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...$g(a))}}),t}function nd(s,t,r,{discrete:a}){const n=r.originalEvent.currentTarget,i=new CustomEvent(s,{bubbles:!0,cancelable:!0,detail:r});t&&n.addEventListener(s,t,{once:!0}),a?Ev(n,i):n.dispatchEvent(i)}var Of=(s,t,r=0)=>{const a=Math.abs(s.x),n=Math.abs(s.y),i=a>n;return t==="left"||t==="right"?i&&a>r:!i&&n>r};function yy(s=()=>{}){const t=Jr(s);Xr(()=>{let r=0,a=0;return r=window.requestAnimationFrame(()=>a=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(a)}},[t])}function by(s){return s.nodeType===s.ELEMENT_NODE}function wy(s){const t=[],r=document.createTreeWalker(s,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{const n=a.tagName==="INPUT"&&a.type==="hidden";return a.disabled||a.hidden||n?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function ah(s){const t=document.activeElement;return s.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var jy=Tg,Wg=Eg,Hg=Og,Vg=Fg,Yg=Bg,Gg=Ug,Jg=Sm;function Kg(s){var t,r,a="";if(typeof s=="string"||typeof s=="number")a+=s;else if(typeof s=="object")if(Array.isArray(s)){var n=s.length;for(t=0;t<n;t++)s[t]&&(r=Kg(s[t]))&&(a&&(a+=" "),a+=r)}else for(r in s)s[r]&&(a&&(a+=" "),a+=r);return a}function Xg(){for(var s,t,r=0,a="",n=arguments.length;r<n;r++)(s=arguments[r])&&(t=Kg(s))&&(a&&(a+=" "),a+=t);return a}const Ff=s=>typeof s=="boolean"?`${s}`:s===0?"0":s,Bf=Xg,Vd=(s,t)=>r=>{var a;if((t==null?void 0:t.variants)==null)return Bf(s,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:n,defaultVariants:i}=t,o=Object.keys(n).map(h=>{const f=r==null?void 0:r[h],p=i==null?void 0:i[h];if(f===null)return null;const x=Ff(f)||Ff(p);return n[h][x]}),l=r&&Object.entries(r).reduce((h,f)=>{let[p,x]=f;return x===void 0||(h[p]=x),h},{}),d=t==null||(a=t.compoundVariants)===null||a===void 0?void 0:a.reduce((h,f)=>{let k=f,{class:p,className:x}=k,u=Me(k,["class","className"]);return Object.entries(u).every(j=>{let[v,w]=j;return Array.isArray(w)?w.includes(E(E({},i),l)[v]):E(E({},i),l)[v]===w})?[...h,p,x]:h},[]);return Bf(s,o,d,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ny=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Qg=(...s)=>s.filter((t,r,a)=>!!t&&t.trim()!==""&&a.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Sy={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ky=N.forwardRef((h,d)=>{var f=h,{color:s="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:n="",children:i,iconNode:o}=f,l=Me(f,["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"]);return N.createElement("svg",E(Q(E({ref:d},Sy),{width:t,height:t,stroke:s,strokeWidth:a?Number(r)*24/Number(t):r,className:Qg("lucide",n)}),l),[...o.map(([p,x])=>N.createElement(p,x)),...Array.isArray(i)?i:[i]])});/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=(s,t)=>{const r=N.forwardRef((o,i)=>{var l=o,{className:a}=l,n=Me(l,["className"]);return N.createElement(ky,E({ref:i,iconNode:t,className:Qg(`lucide-${Ny(s)}`,a)},n))});return r.displayName=`${s}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const km=at("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ch=at("ArchiveRestore",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h2",key:"tvwodi"}],["path",{d:"M20 8v11a2 2 0 0 1-2 2h-2",key:"1gkqxj"}],["path",{d:"m9 15 3-3 3 3",key:"1pd0qc"}],["path",{d:"M12 12v9",key:"192myk"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ah=at("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ca=at("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cy=at("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ph=at("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ay=at("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Py=at("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=at("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zg=at("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=at("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wo=at("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lc=at("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=at("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _y=at("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=at("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=at("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wl=at("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=at("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ly=at("CloudUpload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hl=at("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ex=at("CornerDownRight",[["polyline",{points:"15 10 20 15 15 20",key:"1q7qjw"}],["path",{d:"M4 4v7a4 4 0 0 0 4 4h12",key:"z08zvw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _h=at("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gl=at("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iy=at("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tx=at("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yd=at("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cd=at("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aa=at("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dy=at("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ca=at("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ty=at("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yn=at("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sx=at("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const My=at("Library",[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qa=at("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ey=at("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cm=at("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ry=at("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oy=at("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wo=at("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rx=at("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fy=at("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=at("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ax=at("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const By=at("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uy=at("Move",[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=at("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qy=at("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lh=at("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nx=at("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=at("PenTool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vl=at("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ka=at("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Di=at("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=at("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jo=at("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ix=at("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Am=at("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dn=at("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=at("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ox=at("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jl=at("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zy=at("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pm=at("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qo=at("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=at("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yd=at("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _i=at("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lx=at("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uf=at("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=at("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dr=at("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ih=at("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=at("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $y=at("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wy=at("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),_m="-",Hy=s=>{const t=Yy(s),{conflictingClassGroups:r,conflictingClassGroupModifiers:a}=s;return{getClassGroupId:o=>{const l=o.split(_m);return l[0]===""&&l.length!==1&&l.shift(),cx(l,t)||Vy(o)},getConflictingClassGroupIds:(o,l)=>{const d=r[o]||[];return l&&a[o]?[...d,...a[o]]:d}}},cx=(s,t)=>{var o;if(s.length===0)return t.classGroupId;const r=s[0],a=t.nextPart.get(r),n=a?cx(s.slice(1),a):void 0;if(n)return n;if(t.validators.length===0)return;const i=s.join(_m);return(o=t.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},qf=/^\[(.+)\]$/,Vy=s=>{if(qf.test(s)){const t=qf.exec(s)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},Yy=s=>{const{theme:t,prefix:r}=s,a={nextPart:new Map,validators:[]};return Jy(Object.entries(s.classGroups),r).forEach(([i,o])=>{Dh(o,a,i,t)}),a},Dh=(s,t,r,a)=>{s.forEach(n=>{if(typeof n=="string"){const i=n===""?t:zf(t,n);i.classGroupId=r;return}if(typeof n=="function"){if(Gy(n)){Dh(n(a),t,r,a);return}t.validators.push({validator:n,classGroupId:r});return}Object.entries(n).forEach(([i,o])=>{Dh(o,zf(t,i),r,a)})})},zf=(s,t)=>{let r=s;return t.split(_m).forEach(a=>{r.nextPart.has(a)||r.nextPart.set(a,{nextPart:new Map,validators:[]}),r=r.nextPart.get(a)}),r},Gy=s=>s.isThemeGetter,Jy=(s,t)=>t?s.map(([r,a])=>{const n=a.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[t+o,l])):i);return[r,n]}):s,Ky=s=>{if(s<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,a=new Map;const n=(i,o)=>{r.set(i,o),t++,t>s&&(t=0,a=r,r=new Map)};return{get(i){let o=r.get(i);if(o!==void 0)return o;if((o=a.get(i))!==void 0)return n(i,o),o},set(i,o){r.has(i)?r.set(i,o):n(i,o)}}},dx="!",Xy=s=>{const{separator:t,experimentalParseClassName:r}=s,a=t.length===1,n=t[0],i=t.length,o=l=>{const d=[];let h=0,f=0,p;for(let v=0;v<l.length;v++){let w=l[v];if(h===0){if(w===n&&(a||l.slice(v,v+i)===t)){d.push(l.slice(f,v)),f=v+i;continue}if(w==="/"){p=v;continue}}w==="["?h++:w==="]"&&h--}const x=d.length===0?l:l.substring(f),u=x.startsWith(dx),k=u?x.substring(1):x,j=p&&p>f?p-f:void 0;return{modifiers:d,hasImportantModifier:u,baseClassName:k,maybePostfixModifierPosition:j}};return r?l=>r({className:l,parseClassName:o}):o},Qy=s=>{if(s.length<=1)return s;const t=[];let r=[];return s.forEach(a=>{a[0]==="["?(t.push(...r.sort(),a),r=[]):r.push(a)}),t.push(...r.sort()),t},Zy=s=>E({cache:Ky(s.cacheSize),parseClassName:Xy(s)},Hy(s)),eb=/\s+/,tb=(s,t)=>{const{parseClassName:r,getClassGroupId:a,getConflictingClassGroupIds:n}=t,i=[],o=s.trim().split(eb);let l="";for(let d=o.length-1;d>=0;d-=1){const h=o[d],{modifiers:f,hasImportantModifier:p,baseClassName:x,maybePostfixModifierPosition:u}=r(h);let k=!!u,j=a(k?x.substring(0,u):x);if(!j){if(!k){l=h+(l.length>0?" "+l:l);continue}if(j=a(x),!j){l=h+(l.length>0?" "+l:l);continue}k=!1}const v=Qy(f).join(":"),w=p?v+dx:v,P=w+j;if(i.includes(P))continue;i.push(P);const D=n(j,k);for(let B=0;B<D.length;++B){const F=D[B];i.push(w+F)}l=h+(l.length>0?" "+l:l)}return l};function sb(){let s=0,t,r,a="";for(;s<arguments.length;)(t=arguments[s++])&&(r=ux(t))&&(a&&(a+=" "),a+=r);return a}const ux=s=>{if(typeof s=="string")return s;let t,r="";for(let a=0;a<s.length;a++)s[a]&&(t=ux(s[a]))&&(r&&(r+=" "),r+=t);return r};function rb(s,...t){let r,a,n,i=o;function o(d){const h=t.reduce((f,p)=>p(f),s());return r=Zy(h),a=r.cache.get,n=r.cache.set,i=l,l(d)}function l(d){const h=a(d);if(h)return h;const f=tb(d,r);return n(d,f),f}return function(){return i(sb.apply(null,arguments))}}const _s=s=>{const t=r=>r[s]||[];return t.isThemeGetter=!0,t},hx=/^\[(?:([a-z-]+):)?(.+)\]$/i,ab=/^\d+\/\d+$/,nb=new Set(["px","full","screen"]),ib=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,ob=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,lb=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,cb=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,db=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,rn=s=>So(s)||nb.has(s)||ab.test(s),Ln=s=>Zo(s,"length",vb),So=s=>!!s&&!Number.isNaN(Number(s)),nh=s=>Zo(s,"number",So),Dl=s=>!!s&&Number.isInteger(Number(s)),ub=s=>s.endsWith("%")&&So(s.slice(0,-1)),$t=s=>hx.test(s),In=s=>ib.test(s),hb=new Set(["length","size","percentage"]),mb=s=>Zo(s,hb,mx),fb=s=>Zo(s,"position",mx),pb=new Set(["image","url"]),gb=s=>Zo(s,pb,bb),xb=s=>Zo(s,"",yb),Tl=()=>!0,Zo=(s,t,r)=>{const a=hx.exec(s);return a?a[1]?typeof t=="string"?a[1]===t:t.has(a[1]):r(a[2]):!1},vb=s=>ob.test(s)&&!lb.test(s),mx=()=>!1,yb=s=>cb.test(s),bb=s=>db.test(s),wb=()=>{const s=_s("colors"),t=_s("spacing"),r=_s("blur"),a=_s("brightness"),n=_s("borderColor"),i=_s("borderRadius"),o=_s("borderSpacing"),l=_s("borderWidth"),d=_s("contrast"),h=_s("grayscale"),f=_s("hueRotate"),p=_s("invert"),x=_s("gap"),u=_s("gradientColorStops"),k=_s("gradientColorStopPositions"),j=_s("inset"),v=_s("margin"),w=_s("opacity"),P=_s("padding"),D=_s("saturate"),B=_s("scale"),F=_s("sepia"),se=_s("skew"),z=_s("space"),C=_s("translate"),A=()=>["auto","contain","none"],L=()=>["auto","hidden","clip","visible","scroll"],y=()=>["auto",$t,t],S=()=>[$t,t],I=()=>["",rn,Ln],M=()=>["auto",So,$t],J=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ae=()=>["solid","dashed","dotted","double","none"],he=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ce=()=>["start","end","center","between","around","evenly","stretch"],ie=()=>["","0",$t],ve=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Ae=()=>[So,$t];return{cacheSize:500,separator:":",theme:{colors:[Tl],spacing:[rn,Ln],blur:["none","",In,$t],brightness:Ae(),borderColor:[s],borderRadius:["none","","full",In,$t],borderSpacing:S(),borderWidth:I(),contrast:Ae(),grayscale:ie(),hueRotate:Ae(),invert:ie(),gap:S(),gradientColorStops:[s],gradientColorStopPositions:[ub,Ln],inset:y(),margin:y(),opacity:Ae(),padding:S(),saturate:Ae(),scale:Ae(),sepia:ie(),skew:Ae(),space:S(),translate:S()},classGroups:{aspect:[{aspect:["auto","square","video",$t]}],container:["container"],columns:[{columns:[In]}],"break-after":[{"break-after":ve()}],"break-before":[{"break-before":ve()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...J(),$t]}],overflow:[{overflow:L()}],"overflow-x":[{"overflow-x":L()}],"overflow-y":[{"overflow-y":L()}],overscroll:[{overscroll:A()}],"overscroll-x":[{"overscroll-x":A()}],"overscroll-y":[{"overscroll-y":A()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[j]}],"inset-x":[{"inset-x":[j]}],"inset-y":[{"inset-y":[j]}],start:[{start:[j]}],end:[{end:[j]}],top:[{top:[j]}],right:[{right:[j]}],bottom:[{bottom:[j]}],left:[{left:[j]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Dl,$t]}],basis:[{basis:y()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",$t]}],grow:[{grow:ie()}],shrink:[{shrink:ie()}],order:[{order:["first","last","none",Dl,$t]}],"grid-cols":[{"grid-cols":[Tl]}],"col-start-end":[{col:["auto",{span:["full",Dl,$t]},$t]}],"col-start":[{"col-start":M()}],"col-end":[{"col-end":M()}],"grid-rows":[{"grid-rows":[Tl]}],"row-start-end":[{row:["auto",{span:[Dl,$t]},$t]}],"row-start":[{"row-start":M()}],"row-end":[{"row-end":M()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",$t]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",$t]}],gap:[{gap:[x]}],"gap-x":[{"gap-x":[x]}],"gap-y":[{"gap-y":[x]}],"justify-content":[{justify:["normal",...ce()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...ce(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...ce(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[P]}],px:[{px:[P]}],py:[{py:[P]}],ps:[{ps:[P]}],pe:[{pe:[P]}],pt:[{pt:[P]}],pr:[{pr:[P]}],pb:[{pb:[P]}],pl:[{pl:[P]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[z]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[z]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",$t,t]}],"min-w":[{"min-w":[$t,t,"min","max","fit"]}],"max-w":[{"max-w":[$t,t,"none","full","min","max","fit","prose",{screen:[In]},In]}],h:[{h:[$t,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[$t,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[$t,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[$t,t,"auto","min","max","fit"]}],"font-size":[{text:["base",In,Ln]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",nh]}],"font-family":[{font:[Tl]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",$t]}],"line-clamp":[{"line-clamp":["none",So,nh]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",rn,$t]}],"list-image":[{"list-image":["none",$t]}],"list-style-type":[{list:["none","disc","decimal",$t]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[s]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[s]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ae(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",rn,Ln]}],"underline-offset":[{"underline-offset":["auto",rn,$t]}],"text-decoration-color":[{decoration:[s]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:S()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",$t]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",$t]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...J(),fb]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",mb]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},gb]}],"bg-color":[{bg:[s]}],"gradient-from-pos":[{from:[k]}],"gradient-via-pos":[{via:[k]}],"gradient-to-pos":[{to:[k]}],"gradient-from":[{from:[u]}],"gradient-via":[{via:[u]}],"gradient-to":[{to:[u]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[...ae(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:ae()}],"border-color":[{border:[n]}],"border-color-x":[{"border-x":[n]}],"border-color-y":[{"border-y":[n]}],"border-color-s":[{"border-s":[n]}],"border-color-e":[{"border-e":[n]}],"border-color-t":[{"border-t":[n]}],"border-color-r":[{"border-r":[n]}],"border-color-b":[{"border-b":[n]}],"border-color-l":[{"border-l":[n]}],"divide-color":[{divide:[n]}],"outline-style":[{outline:["",...ae()]}],"outline-offset":[{"outline-offset":[rn,$t]}],"outline-w":[{outline:[rn,Ln]}],"outline-color":[{outline:[s]}],"ring-w":[{ring:I()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[s]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[rn,Ln]}],"ring-offset-color":[{"ring-offset":[s]}],shadow:[{shadow:["","inner","none",In,xb]}],"shadow-color":[{shadow:[Tl]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":[...he(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":he()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[a]}],contrast:[{contrast:[d]}],"drop-shadow":[{"drop-shadow":["","none",In,$t]}],grayscale:[{grayscale:[h]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[p]}],saturate:[{saturate:[D]}],sepia:[{sepia:[F]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[a]}],"backdrop-contrast":[{"backdrop-contrast":[d]}],"backdrop-grayscale":[{"backdrop-grayscale":[h]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[p]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[D]}],"backdrop-sepia":[{"backdrop-sepia":[F]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",$t]}],duration:[{duration:Ae()}],ease:[{ease:["linear","in","out","in-out",$t]}],delay:[{delay:Ae()}],animate:[{animate:["none","spin","ping","pulse","bounce",$t]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[B]}],"scale-x":[{"scale-x":[B]}],"scale-y":[{"scale-y":[B]}],rotate:[{rotate:[Dl,$t]}],"translate-x":[{"translate-x":[C]}],"translate-y":[{"translate-y":[C]}],"skew-x":[{"skew-x":[se]}],"skew-y":[{"skew-y":[se]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",$t]}],accent:[{accent:["auto",s]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",$t]}],"caret-color":[{caret:[s]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":S()}],"scroll-mx":[{"scroll-mx":S()}],"scroll-my":[{"scroll-my":S()}],"scroll-ms":[{"scroll-ms":S()}],"scroll-me":[{"scroll-me":S()}],"scroll-mt":[{"scroll-mt":S()}],"scroll-mr":[{"scroll-mr":S()}],"scroll-mb":[{"scroll-mb":S()}],"scroll-ml":[{"scroll-ml":S()}],"scroll-p":[{"scroll-p":S()}],"scroll-px":[{"scroll-px":S()}],"scroll-py":[{"scroll-py":S()}],"scroll-ps":[{"scroll-ps":S()}],"scroll-pe":[{"scroll-pe":S()}],"scroll-pt":[{"scroll-pt":S()}],"scroll-pr":[{"scroll-pr":S()}],"scroll-pb":[{"scroll-pb":S()}],"scroll-pl":[{"scroll-pl":S()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",$t]}],fill:[{fill:[s,"none"]}],"stroke-w":[{stroke:[rn,Ln,nh]}],stroke:[{stroke:[s,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},jb=rb(wb);function us(s){const t=Object.prototype.toString.call(s);return s instanceof Date||typeof s=="object"&&t==="[object Date]"?new s.constructor(+s):typeof s=="number"||t==="[object Number]"||typeof s=="string"||t==="[object String]"?new Date(s):new Date(NaN)}function Qn(s,t){return s instanceof Date?new s.constructor(t):new Date(t)}const fx=6048e5,Nb=864e5,px=6e4,gx=36e5,id=43200,$f=1440;let Sb={};function cc(){return Sb}function Kl(s,t){var l,d,h,f,p,x,u,k;const r=cc(),a=(k=(u=(f=(h=t==null?void 0:t.weekStartsOn)!=null?h:(d=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:d.weekStartsOn)!=null?f:r.weekStartsOn)!=null?u:(x=(p=r.locale)==null?void 0:p.options)==null?void 0:x.weekStartsOn)!=null?k:0,n=us(s),i=n.getDay(),o=(i<a?7:0)+i-a;return n.setDate(n.getDate()-o),n.setHours(0,0,0,0),n}function Ad(s){return Kl(s,{weekStartsOn:1})}function xx(s){const t=us(s),r=t.getFullYear(),a=Qn(s,0);a.setFullYear(r+1,0,4),a.setHours(0,0,0,0);const n=Ad(a),i=Qn(s,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const o=Ad(i);return t.getTime()>=n.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function Pd(s){const t=us(s);return t.setHours(0,0,0,0),t}function _d(s){const t=us(s),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+s-+r}function vx(s,t){const r=Pd(s),a=Pd(t),n=+r-_d(r),i=+a-_d(a);return Math.round((n-i)/Nb)}function kb(s){const t=xx(s),r=Qn(s,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),Ad(r)}function bd(s,t){const r=us(s),a=us(t),n=r.getTime()-a.getTime();return n<0?-1:n>0?1:n}function yx(s){return Qn(s,Date.now())}function Cb(s,t){const r=Pd(s),a=Pd(t);return+r==+a}function Ab(s){return s instanceof Date||typeof s=="object"&&Object.prototype.toString.call(s)==="[object Date]"}function Pb(s){if(!Ab(s)&&typeof s!="number")return!1;const t=us(s);return!isNaN(Number(t))}function _b(s,t){const r=us(s),a=us(t),n=r.getFullYear()-a.getFullYear(),i=r.getMonth()-a.getMonth();return n*12+i}function ih(s,t){const r=us(s),a=us(t),n=Wf(r,a),i=Math.abs(vx(r,a));r.setDate(r.getDate()-n*i);const o=+(Wf(r,a)===-n),l=n*(i-o);return l===0?0:l}function Wf(s,t){const r=s.getFullYear()-t.getFullYear()||s.getMonth()-t.getMonth()||s.getDate()-t.getDate()||s.getHours()-t.getHours()||s.getMinutes()-t.getMinutes()||s.getSeconds()-t.getSeconds()||s.getMilliseconds()-t.getMilliseconds();return r<0?-1:r>0?1:r}function Lb(s){return t=>{const a=(s?Math[s]:Math.trunc)(t);return a===0?0:a}}function Ib(s,t){return+us(s)-+us(t)}function Db(s){const t=us(s);return t.setHours(23,59,59,999),t}function Tb(s){const t=us(s),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function Mb(s){const t=us(s);return+Db(t)==+Tb(t)}function Eb(s,t){const r=us(s),a=us(t),n=bd(r,a),i=Math.abs(_b(r,a));let o;if(i<1)o=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-n*i);let l=bd(r,a)===-n;Mb(us(s))&&i===1&&bd(s,a)===1&&(l=!1),o=n*(i-Number(l))}return o===0?0:o}function Rb(s,t,r){const a=Ib(s,t)/1e3;return Lb(r==null?void 0:r.roundingMethod)(a)}function Ob(s){const t=us(s),r=Qn(s,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}const Fb={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Bb=(s,t,r)=>{let a;const n=Fb[s];return typeof n=="string"?a=n:t===1?a=n.one:a=n.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+a:a+" ago":a};function oh(s){return(t={})=>{const r=t.width?String(t.width):s.defaultWidth;return s.formats[r]||s.formats[s.defaultWidth]}}const Ub={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},qb={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},zb={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},$b={date:oh({formats:Ub,defaultWidth:"full"}),time:oh({formats:qb,defaultWidth:"full"}),dateTime:oh({formats:zb,defaultWidth:"full"})},Wb={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Hb=(s,t,r,a)=>Wb[s];function Ml(s){return(t,r)=>{const a=r!=null&&r.context?String(r.context):"standalone";let n;if(a==="formatting"&&s.formattingValues){const o=s.defaultFormattingWidth||s.defaultWidth,l=r!=null&&r.width?String(r.width):o;n=s.formattingValues[l]||s.formattingValues[o]}else{const o=s.defaultWidth,l=r!=null&&r.width?String(r.width):s.defaultWidth;n=s.values[l]||s.values[o]}const i=s.argumentCallback?s.argumentCallback(t):t;return n[i]}}const Vb={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Yb={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Gb={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Jb={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Kb={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Xb={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Qb=(s,t)=>{const r=Number(s),a=r%100;if(a>20||a<10)switch(a%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Zb={ordinalNumber:Qb,era:Ml({values:Vb,defaultWidth:"wide"}),quarter:Ml({values:Yb,defaultWidth:"wide",argumentCallback:s=>s-1}),month:Ml({values:Gb,defaultWidth:"wide"}),day:Ml({values:Jb,defaultWidth:"wide"}),dayPeriod:Ml({values:Kb,defaultWidth:"wide",formattingValues:Xb,defaultFormattingWidth:"wide"})};function El(s){return(t,r={})=>{const a=r.width,n=a&&s.matchPatterns[a]||s.matchPatterns[s.defaultMatchWidth],i=t.match(n);if(!i)return null;const o=i[0],l=a&&s.parsePatterns[a]||s.parsePatterns[s.defaultParseWidth],d=Array.isArray(l)?t5(l,p=>p.test(o)):e5(l,p=>p.test(o));let h;h=s.valueCallback?s.valueCallback(d):d,h=r.valueCallback?r.valueCallback(h):h;const f=t.slice(o.length);return{value:h,rest:f}}}function e5(s,t){for(const r in s)if(Object.prototype.hasOwnProperty.call(s,r)&&t(s[r]))return r}function t5(s,t){for(let r=0;r<s.length;r++)if(t(s[r]))return r}function s5(s){return(t,r={})=>{const a=t.match(s.matchPattern);if(!a)return null;const n=a[0],i=t.match(s.parsePattern);if(!i)return null;let o=s.valueCallback?s.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;const l=t.slice(n.length);return{value:o,rest:l}}}const r5=/^(\d+)(th|st|nd|rd)?/i,a5=/\d+/i,n5={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},i5={any:[/^b/i,/^(a|c)/i]},o5={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},l5={any:[/1/i,/2/i,/3/i,/4/i]},c5={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},d5={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},u5={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},h5={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},m5={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},f5={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},p5={ordinalNumber:s5({matchPattern:r5,parsePattern:a5,valueCallback:s=>parseInt(s,10)}),era:El({matchPatterns:n5,defaultMatchWidth:"wide",parsePatterns:i5,defaultParseWidth:"any"}),quarter:El({matchPatterns:o5,defaultMatchWidth:"wide",parsePatterns:l5,defaultParseWidth:"any",valueCallback:s=>s+1}),month:El({matchPatterns:c5,defaultMatchWidth:"wide",parsePatterns:d5,defaultParseWidth:"any"}),day:El({matchPatterns:u5,defaultMatchWidth:"wide",parsePatterns:h5,defaultParseWidth:"any"}),dayPeriod:El({matchPatterns:m5,defaultMatchWidth:"any",parsePatterns:f5,defaultParseWidth:"any"})},bx={code:"en-US",formatDistance:Bb,formatLong:$b,formatRelative:Hb,localize:Zb,match:p5,options:{weekStartsOn:0,firstWeekContainsDate:1}};function g5(s){const t=us(s);return vx(t,Ob(t))+1}function x5(s){const t=us(s),r=+Ad(t)-+kb(t);return Math.round(r/fx)+1}function wx(s,t){var f,p,x,u,k,j,v,w;const r=us(s),a=r.getFullYear(),n=cc(),i=(w=(v=(u=(x=t==null?void 0:t.firstWeekContainsDate)!=null?x:(p=(f=t==null?void 0:t.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)!=null?u:n.firstWeekContainsDate)!=null?v:(j=(k=n.locale)==null?void 0:k.options)==null?void 0:j.firstWeekContainsDate)!=null?w:1,o=Qn(s,0);o.setFullYear(a+1,0,i),o.setHours(0,0,0,0);const l=Kl(o,t),d=Qn(s,0);d.setFullYear(a,0,i),d.setHours(0,0,0,0);const h=Kl(d,t);return r.getTime()>=l.getTime()?a+1:r.getTime()>=h.getTime()?a:a-1}function v5(s,t){var l,d,h,f,p,x,u,k;const r=cc(),a=(k=(u=(f=(h=t==null?void 0:t.firstWeekContainsDate)!=null?h:(d=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:d.firstWeekContainsDate)!=null?f:r.firstWeekContainsDate)!=null?u:(x=(p=r.locale)==null?void 0:p.options)==null?void 0:x.firstWeekContainsDate)!=null?k:1,n=wx(s,t),i=Qn(s,0);return i.setFullYear(n,0,a),i.setHours(0,0,0,0),Kl(i,t)}function y5(s,t){const r=us(s),a=+Kl(r,t)-+v5(r,t);return Math.round(a/fx)+1}function cs(s,t){const r=s<0?"-":"",a=Math.abs(s).toString().padStart(t,"0");return r+a}const Dn={y(s,t){const r=s.getFullYear(),a=r>0?r:1-r;return cs(t==="yy"?a%100:a,t.length)},M(s,t){const r=s.getMonth();return t==="M"?String(r+1):cs(r+1,2)},d(s,t){return cs(s.getDate(),t.length)},a(s,t){const r=s.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(s,t){return cs(s.getHours()%12||12,t.length)},H(s,t){return cs(s.getHours(),t.length)},m(s,t){return cs(s.getMinutes(),t.length)},s(s,t){return cs(s.getSeconds(),t.length)},S(s,t){const r=t.length,a=s.getMilliseconds(),n=Math.trunc(a*Math.pow(10,r-3));return cs(n,t.length)}},go={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Hf={G:function(s,t,r){const a=s.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(a,{width:"abbreviated"});case"GGGGG":return r.era(a,{width:"narrow"});case"GGGG":default:return r.era(a,{width:"wide"})}},y:function(s,t,r){if(t==="yo"){const a=s.getFullYear(),n=a>0?a:1-a;return r.ordinalNumber(n,{unit:"year"})}return Dn.y(s,t)},Y:function(s,t,r,a){const n=wx(s,a),i=n>0?n:1-n;if(t==="YY"){const o=i%100;return cs(o,2)}return t==="Yo"?r.ordinalNumber(i,{unit:"year"}):cs(i,t.length)},R:function(s,t){const r=xx(s);return cs(r,t.length)},u:function(s,t){const r=s.getFullYear();return cs(r,t.length)},Q:function(s,t,r){const a=Math.ceil((s.getMonth()+1)/3);switch(t){case"Q":return String(a);case"QQ":return cs(a,2);case"Qo":return r.ordinalNumber(a,{unit:"quarter"});case"QQQ":return r.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(a,{width:"wide",context:"formatting"})}},q:function(s,t,r){const a=Math.ceil((s.getMonth()+1)/3);switch(t){case"q":return String(a);case"qq":return cs(a,2);case"qo":return r.ordinalNumber(a,{unit:"quarter"});case"qqq":return r.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(a,{width:"wide",context:"standalone"})}},M:function(s,t,r){const a=s.getMonth();switch(t){case"M":case"MM":return Dn.M(s,t);case"Mo":return r.ordinalNumber(a+1,{unit:"month"});case"MMM":return r.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(a,{width:"wide",context:"formatting"})}},L:function(s,t,r){const a=s.getMonth();switch(t){case"L":return String(a+1);case"LL":return cs(a+1,2);case"Lo":return r.ordinalNumber(a+1,{unit:"month"});case"LLL":return r.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(a,{width:"wide",context:"standalone"})}},w:function(s,t,r,a){const n=y5(s,a);return t==="wo"?r.ordinalNumber(n,{unit:"week"}):cs(n,t.length)},I:function(s,t,r){const a=x5(s);return t==="Io"?r.ordinalNumber(a,{unit:"week"}):cs(a,t.length)},d:function(s,t,r){return t==="do"?r.ordinalNumber(s.getDate(),{unit:"date"}):Dn.d(s,t)},D:function(s,t,r){const a=g5(s);return t==="Do"?r.ordinalNumber(a,{unit:"dayOfYear"}):cs(a,t.length)},E:function(s,t,r){const a=s.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(a,{width:"short",context:"formatting"});case"EEEE":default:return r.day(a,{width:"wide",context:"formatting"})}},e:function(s,t,r,a){const n=s.getDay(),i=(n-a.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return cs(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(n,{width:"short",context:"formatting"});case"eeee":default:return r.day(n,{width:"wide",context:"formatting"})}},c:function(s,t,r,a){const n=s.getDay(),i=(n-a.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return cs(i,t.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(n,{width:"narrow",context:"standalone"});case"cccccc":return r.day(n,{width:"short",context:"standalone"});case"cccc":default:return r.day(n,{width:"wide",context:"standalone"})}},i:function(s,t,r){const a=s.getDay(),n=a===0?7:a;switch(t){case"i":return String(n);case"ii":return cs(n,t.length);case"io":return r.ordinalNumber(n,{unit:"day"});case"iii":return r.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(a,{width:"short",context:"formatting"});case"iiii":default:return r.day(a,{width:"wide",context:"formatting"})}},a:function(s,t,r){const n=s.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(s,t,r){const a=s.getHours();let n;switch(a===12?n=go.noon:a===0?n=go.midnight:n=a/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(s,t,r){const a=s.getHours();let n;switch(a>=17?n=go.evening:a>=12?n=go.afternoon:a>=4?n=go.morning:n=go.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(s,t,r){if(t==="ho"){let a=s.getHours()%12;return a===0&&(a=12),r.ordinalNumber(a,{unit:"hour"})}return Dn.h(s,t)},H:function(s,t,r){return t==="Ho"?r.ordinalNumber(s.getHours(),{unit:"hour"}):Dn.H(s,t)},K:function(s,t,r){const a=s.getHours()%12;return t==="Ko"?r.ordinalNumber(a,{unit:"hour"}):cs(a,t.length)},k:function(s,t,r){let a=s.getHours();return a===0&&(a=24),t==="ko"?r.ordinalNumber(a,{unit:"hour"}):cs(a,t.length)},m:function(s,t,r){return t==="mo"?r.ordinalNumber(s.getMinutes(),{unit:"minute"}):Dn.m(s,t)},s:function(s,t,r){return t==="so"?r.ordinalNumber(s.getSeconds(),{unit:"second"}):Dn.s(s,t)},S:function(s,t){return Dn.S(s,t)},X:function(s,t,r){const a=s.getTimezoneOffset();if(a===0)return"Z";switch(t){case"X":return Yf(a);case"XXXX":case"XX":return gi(a);case"XXXXX":case"XXX":default:return gi(a,":")}},x:function(s,t,r){const a=s.getTimezoneOffset();switch(t){case"x":return Yf(a);case"xxxx":case"xx":return gi(a);case"xxxxx":case"xxx":default:return gi(a,":")}},O:function(s,t,r){const a=s.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Vf(a,":");case"OOOO":default:return"GMT"+gi(a,":")}},z:function(s,t,r){const a=s.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Vf(a,":");case"zzzz":default:return"GMT"+gi(a,":")}},t:function(s,t,r){const a=Math.trunc(s.getTime()/1e3);return cs(a,t.length)},T:function(s,t,r){const a=s.getTime();return cs(a,t.length)}};function Vf(s,t=""){const r=s>0?"-":"+",a=Math.abs(s),n=Math.trunc(a/60),i=a%60;return i===0?r+String(n):r+String(n)+t+cs(i,2)}function Yf(s,t){return s%60===0?(s>0?"-":"+")+cs(Math.abs(s)/60,2):gi(s,t)}function gi(s,t=""){const r=s>0?"-":"+",a=Math.abs(s),n=cs(Math.trunc(a/60),2),i=cs(a%60,2);return r+n+t+i}const Gf=(s,t)=>{switch(s){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},jx=(s,t)=>{switch(s){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},b5=(s,t)=>{const r=s.match(/(P+)(p+)?/)||[],a=r[1],n=r[2];if(!n)return Gf(s,t);let i;switch(a){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",Gf(a,t)).replace("{{time}}",jx(n,t))},w5={p:jx,P:b5},j5=/^D+$/,N5=/^Y+$/,S5=["D","DD","YY","YYYY"];function k5(s){return j5.test(s)}function C5(s){return N5.test(s)}function A5(s,t,r){const a=P5(s,t,r);if(S5.includes(s))throw new RangeError(a)}function P5(s,t,r){const a=s[0]==="Y"?"years":"days of the month";return`Use \`${s.toLowerCase()}\` instead of \`${s}\` (in \`${t}\`) for formatting ${a} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const _5=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,L5=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,I5=/^'([^]*?)'?$/,D5=/''/g,T5=/[a-zA-Z]/;function Nx(s,t,r){var f,p,x,u,k,j,v,w,P;const a=cc(),n=(f=a.locale)!=null?f:bx,i=(k=(u=a.firstWeekContainsDate)!=null?u:(x=(p=a.locale)==null?void 0:p.options)==null?void 0:x.firstWeekContainsDate)!=null?k:1,o=(P=(w=a.weekStartsOn)!=null?w:(v=(j=a.locale)==null?void 0:j.options)==null?void 0:v.weekStartsOn)!=null?P:0,l=us(s);if(!Pb(l))throw new RangeError("Invalid time value");let d=t.match(L5).map(D=>{const B=D[0];if(B==="p"||B==="P"){const F=w5[B];return F(D,n.formatLong)}return D}).join("").match(_5).map(D=>{if(D==="''")return{isToken:!1,value:"'"};const B=D[0];if(B==="'")return{isToken:!1,value:M5(D)};if(Hf[B])return{isToken:!0,value:D};if(B.match(T5))throw new RangeError("Format string contains an unescaped latin alphabet character `"+B+"`");return{isToken:!1,value:D}});n.localize.preprocessor&&(d=n.localize.preprocessor(l,d));const h={firstWeekContainsDate:i,weekStartsOn:o,locale:n};return d.map(D=>{if(!D.isToken)return D.value;const B=D.value;(C5(B)||k5(B))&&A5(B,t,String(s));const F=Hf[B[0]];return F(l,B,n.localize,h)}).join("")}function M5(s){const t=s.match(I5);return t?t[1].replace(D5,"'"):s}function E5(s,t,r){var k,j;const a=cc(),n=(j=(k=r==null?void 0:r.locale)!=null?k:a.locale)!=null?j:bx,i=2520,o=bd(s,t);if(isNaN(o))throw new RangeError("Invalid time value");const l=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:o});let d,h;o>0?(d=us(t),h=us(s)):(d=us(s),h=us(t));const f=Rb(h,d),p=(_d(h)-_d(d))/1e3,x=Math.round((f-p)/60);let u;if(x<2)return r!=null&&r.includeSeconds?f<5?n.formatDistance("lessThanXSeconds",5,l):f<10?n.formatDistance("lessThanXSeconds",10,l):f<20?n.formatDistance("lessThanXSeconds",20,l):f<40?n.formatDistance("halfAMinute",0,l):f<60?n.formatDistance("lessThanXMinutes",1,l):n.formatDistance("xMinutes",1,l):x===0?n.formatDistance("lessThanXMinutes",1,l):n.formatDistance("xMinutes",x,l);if(x<45)return n.formatDistance("xMinutes",x,l);if(x<90)return n.formatDistance("aboutXHours",1,l);if(x<$f){const v=Math.round(x/60);return n.formatDistance("aboutXHours",v,l)}else{if(x<i)return n.formatDistance("xDays",1,l);if(x<id){const v=Math.round(x/$f);return n.formatDistance("xDays",v,l)}else if(x<id*2)return u=Math.round(x/id),n.formatDistance("aboutXMonths",u,l)}if(u=Eb(h,d),u<12){const v=Math.round(x/id);return n.formatDistance("xMonths",v,l)}else{const v=u%12,w=Math.trunc(u/12);return v<3?n.formatDistance("aboutXYears",w,l):v<9?n.formatDistance("overXYears",w,l):n.formatDistance("almostXYears",w+1,l)}}function Zn(s,t){return E5(s,yx(s),t)}function R5(s){return Cb(s,yx(s))}function O5(s,t){const a=q5(s);let n;if(a.date){const d=z5(a.date,2);n=$5(d.restDateString,d.year)}if(!n||isNaN(n.getTime()))return new Date(NaN);const i=n.getTime();let o=0,l;if(a.time&&(o=W5(a.time),isNaN(o)))return new Date(NaN);if(a.timezone){if(l=H5(a.timezone),isNaN(l))return new Date(NaN)}else{const d=new Date(i+o),h=new Date(0);return h.setFullYear(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),h.setHours(d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()),h}return new Date(i+o+l)}const od={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},F5=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,B5=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,U5=/^([+-])(\d{2})(?::?(\d{2}))?$/;function q5(s){const t={},r=s.split(od.dateTimeDelimiter);let a;if(r.length>2)return t;if(/:/.test(r[0])?a=r[0]:(t.date=r[0],a=r[1],od.timeZoneDelimiter.test(t.date)&&(t.date=s.split(od.timeZoneDelimiter)[0],a=s.substr(t.date.length,s.length))),a){const n=od.timezone.exec(a);n?(t.time=a.replace(n[1],""),t.timezone=n[1]):t.time=a}return t}function z5(s,t){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),a=s.match(r);if(!a)return{year:NaN,restDateString:""};const n=a[1]?parseInt(a[1]):null,i=a[2]?parseInt(a[2]):null;return{year:i===null?n:i*100,restDateString:s.slice((a[1]||a[2]).length)}}function $5(s,t){if(t===null)return new Date(NaN);const r=s.match(F5);if(!r)return new Date(NaN);const a=!!r[4],n=Rl(r[1]),i=Rl(r[2])-1,o=Rl(r[3]),l=Rl(r[4]),d=Rl(r[5])-1;if(a)return K5(t,l,d)?V5(t,l,d):new Date(NaN);{const h=new Date(0);return!G5(t,i,o)||!J5(t,n)?new Date(NaN):(h.setUTCFullYear(t,i,Math.max(n,o)),h)}}function Rl(s){return s?parseInt(s):1}function W5(s){const t=s.match(B5);if(!t)return NaN;const r=lh(t[1]),a=lh(t[2]),n=lh(t[3]);return X5(r,a,n)?r*gx+a*px+n*1e3:NaN}function lh(s){return s&&parseFloat(s.replace(",","."))||0}function H5(s){if(s==="Z")return 0;const t=s.match(U5);if(!t)return 0;const r=t[1]==="+"?-1:1,a=parseInt(t[2]),n=t[3]&&parseInt(t[3])||0;return Q5(a,n)?r*(a*gx+n*px):NaN}function V5(s,t,r){const a=new Date(0);a.setUTCFullYear(s,0,4);const n=a.getUTCDay()||7,i=(t-1)*7+r+1-n;return a.setUTCDate(a.getUTCDate()+i),a}const Y5=[31,null,31,30,31,30,31,31,30,31,30,31];function Sx(s){return s%400===0||s%4===0&&s%100!==0}function G5(s,t,r){return t>=0&&t<=11&&r>=1&&r<=(Y5[t]||(Sx(s)?29:28))}function J5(s,t){return t>=1&&t<=(Sx(s)?366:365)}function K5(s,t,r){return t>=1&&t<=53&&r>=0&&r<=6}function X5(s,t,r){return s===24?t===0&&r===0:r>=0&&r<60&&t>=0&&t<60&&s>=0&&s<25}function Q5(s,t){return t>=0&&t<=59}function Ce(...s){return jb(Xg(s))}function Wt(s,t="PPP"){if(!s)return"N/A";try{const r=typeof s=="string"?O5(s):s;return isNaN(r.getTime())?"Invalid Date":Nx(r,t)}catch(r){return"Invalid Date"}}function kx(s){if(!s)return null;let t=null;try{const r=new URL(s);r.hostname==="youtu.be"?t=r.pathname.slice(1):r.hostname.includes("youtube.com")&&(t=r.searchParams.get("v"))}catch(r){return null}return t}function ch(s){try{return new URL(s),!0}catch(t){return!1}}function Z5(s){const t=new Date(s),a=Math.floor((new Date().getTime()-t.getTime())/1e3);if(a<60)return"Just now";const n=Math.floor(a/60);if(n<60)return`${n} ${n===1?"minute":"minutes"} ago`;const i=Math.floor(n/60);if(i<24)return`${i} ${i===1?"hour":"hours"} ago`;const o=Math.floor(i/24);return o<30?`${o} ${o===1?"day":"days"} ago`:Wt(s)}const ew=jy,Cx=N.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Me(n,["className"]);return e.jsx(Wg,E({ref:r,className:Ce("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",s)},t))});Cx.displayName=Wg.displayName;const tw=Vd("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Ax=N.forwardRef((n,a)=>{var i=n,{className:s,variant:t}=i,r=Me(i,["className","variant"]);return e.jsx(Hg,E({ref:a,className:Ce(tw({variant:t}),s)},r))});Ax.displayName=Hg.displayName;const sw=N.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Me(n,["className"]);return e.jsx(Gg,E({ref:r,className:Ce("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",s)},t))});sw.displayName=Gg.displayName;const Px=N.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Me(n,["className"]);return e.jsx(Jg,Q(E({ref:r,className:Ce("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",s),"toast-close":""},t),{children:e.jsx(Hs,{className:"h-4 w-4"})}))});Px.displayName=Jg.displayName;const _x=N.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Me(n,["className"]);return e.jsx(Vg,E({ref:r,className:Ce("text-sm font-semibold",s)},t))});_x.displayName=Vg.displayName;const Lx=N.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Me(n,["className"]);return e.jsx(Yg,E({ref:r,className:Ce("text-sm opacity-90",s)},t))});Lx.displayName=Yg.displayName;function rw(){const{toasts:s}=Pa();return e.jsxs(ew,{children:[s.map(function(o){var l=o,{id:t,title:r,description:a,action:n}=l,i=Me(l,["id","title","description","action"]);return e.jsxs(Ax,Q(E({},i),{children:[e.jsxs("div",{className:"grid gap-1",children:[r&&e.jsx(_x,{children:r}),a&&e.jsx(Lx,{children:a})]}),n,e.jsx(Px,{})]}),t)}),e.jsx(Cx,{})]})}var Jf=["light","dark"],aw="(prefers-color-scheme: dark)",nw=N.createContext(void 0),iw={setTheme:s=>{},themes:[]},ow=()=>{var s;return(s=N.useContext(nw))!=null?s:iw};N.memo(({forcedTheme:s,storageKey:t,attribute:r,enableSystem:a,enableColorScheme:n,defaultTheme:i,value:o,attrs:l,nonce:d})=>{let h=i==="system",f=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(k=>`'${k}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,p=n?Jf.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",x=(k,j=!1,v=!0)=>{let w=o?o[k]:k,P=j?k+"|| ''":`'${w}'`,D="";return n&&v&&!j&&Jf.includes(k)&&(D+=`d.style.colorScheme = '${k}';`),r==="class"?j||w?D+=`c.add(${P})`:D+="null":w&&(D+=`d[s](n,${P})`),D},u=s?`!function(){${f}${x(s)}}()`:a?`!function(){try{${f}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${h})){var t='${aw}',m=window.matchMedia(t);if(m.media!==t||m.matches){${x("dark")}}else{${x("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${x(o?"x[e]":"e",!0)}}${h?"":"else{"+x(i,!1,!1)+"}"}${p}}catch(e){}}()`:`!function(){try{${f}var e=localStorage.getItem('${t}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${x(o?"x[e]":"e",!0)}}else{${x(i,!1,!1)};}${p}}catch(t){}}();`;return N.createElement("script",{nonce:d,dangerouslySetInnerHTML:{__html:u}})});var lw=s=>{switch(s){case"success":return uw;case"info":return mw;case"warning":return hw;case"error":return fw;default:return null}},cw=Array(12).fill(0),dw=({visible:s,className:t})=>it.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":s},it.createElement("div",{className:"sonner-spinner"},cw.map((r,a)=>it.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${a}`})))),uw=it.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},it.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),hw=it.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},it.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),mw=it.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},it.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),fw=it.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},it.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),pw=it.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},it.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),it.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),gw=()=>{let[s,t]=it.useState(document.hidden);return it.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),s},Th=1,xw=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let r=this.subscribers.indexOf(t);this.subscribers.splice(r,1)}),this.publish=t=>{this.subscribers.forEach(r=>r(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var r;let d=t,{message:a}=d,n=Me(d,["message"]),i=typeof(t==null?void 0:t.id)=="number"||((r=t.id)==null?void 0:r.length)>0?t.id:Th++,o=this.toasts.find(h=>h.id===i),l=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(h=>h.id===i?(this.publish(Q(E(E({},h),t),{id:i,title:a})),Q(E(E({},h),t),{id:i,dismissible:l,title:a})):h):this.addToast(Q(E({title:a},n),{dismissible:l,id:i})),i},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(r=>{this.subscribers.forEach(a=>a({id:r.id,dismiss:!0}))}),this.subscribers.forEach(r=>r({id:t,dismiss:!0})),t),this.message=(t,r)=>this.create(Q(E({},r),{message:t})),this.error=(t,r)=>this.create(Q(E({},r),{message:t,type:"error"})),this.success=(t,r)=>this.create(Q(E({},r),{type:"success",message:t})),this.info=(t,r)=>this.create(Q(E({},r),{type:"info",message:t})),this.warning=(t,r)=>this.create(Q(E({},r),{type:"warning",message:t})),this.loading=(t,r)=>this.create(Q(E({},r),{type:"loading",message:t})),this.promise=(t,r)=>{if(!r)return;let a;r.loading!==void 0&&(a=this.create(Q(E({},r),{promise:t,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0})));let n=t instanceof Promise?t:t(),i=a!==void 0,o,l=n.then(h=>xe(this,null,function*(){if(o=["resolve",h],it.isValidElement(h))i=!1,this.create({id:a,type:"default",message:h});else if(yw(h)&&!h.ok){i=!1;let f=typeof r.error=="function"?yield r.error(`HTTP error! status: ${h.status}`):r.error,p=typeof r.description=="function"?yield r.description(`HTTP error! status: ${h.status}`):r.description;this.create({id:a,type:"error",message:f,description:p})}else if(r.success!==void 0){i=!1;let f=typeof r.success=="function"?yield r.success(h):r.success,p=typeof r.description=="function"?yield r.description(h):r.description;this.create({id:a,type:"success",message:f,description:p})}})).catch(h=>xe(this,null,function*(){if(o=["reject",h],r.error!==void 0){i=!1;let f=typeof r.error=="function"?yield r.error(h):r.error,p=typeof r.description=="function"?yield r.description(h):r.description;this.create({id:a,type:"error",message:f,description:p})}})).finally(()=>{var h;i&&(this.dismiss(a),a=void 0),(h=r.finally)==null||h.call(r)}),d=()=>new Promise((h,f)=>l.then(()=>o[0]==="reject"?f(o[1]):h(o[1])).catch(f));return typeof a!="string"&&typeof a!="number"?{unwrap:d}:Object.assign(a,{unwrap:d})},this.custom=(t,r)=>{let a=(r==null?void 0:r.id)||Th++;return this.create(E({jsx:t(a),id:a},r)),a},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},zr=new xw,vw=(s,t)=>{let r=(t==null?void 0:t.id)||Th++;return zr.addToast(Q(E({title:s},t),{id:r})),r},yw=s=>s&&typeof s=="object"&&"ok"in s&&typeof s.ok=="boolean"&&"status"in s&&typeof s.status=="number",bw=vw,ww=()=>zr.toasts,jw=()=>zr.getActiveToasts();Object.assign(bw,{success:zr.success,info:zr.info,warning:zr.warning,error:zr.error,custom:zr.custom,message:zr.message,promise:zr.promise,dismiss:zr.dismiss,loading:zr.loading},{getHistory:ww,getToasts:jw});function Nw(s,{insertAt:t}={}){if(typeof document=="undefined")return;let r=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",t==="top"&&r.firstChild?r.insertBefore(a,r.firstChild):r.appendChild(a),a.styleSheet?a.styleSheet.cssText=s:a.appendChild(document.createTextNode(s))}Nw(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function ld(s){return s.label!==void 0}var Sw=3,kw="32px",Cw="16px",Kf=4e3,Aw=356,Pw=14,_w=20,Lw=200;function xa(...s){return s.filter(Boolean).join(" ")}function Iw(s){let[t,r]=s.split("-"),a=[];return t&&a.push(t),r&&a.push(r),a}var Dw=s=>{var t,r,a,n,i,o,l,d,h,f,p;let{invert:x,toast:u,unstyled:k,interacting:j,setHeights:v,visibleToasts:w,heights:P,index:D,toasts:B,expanded:F,removeToast:se,defaultRichColors:z,closeButton:C,style:A,cancelButtonStyle:L,actionButtonStyle:y,className:S="",descriptionClassName:I="",duration:M,position:J,gap:ae,loadingIcon:he,expandByDefault:ce,classNames:ie,icons:ve,closeButtonAriaLabel:Ae="Close toast",pauseWhenPageIsHidden:T}=s,[U,V]=it.useState(null),[re,G]=it.useState(null),[Y,Z]=it.useState(!1),[de,Le]=it.useState(!1),[X,me]=it.useState(!1),[we,oe]=it.useState(!1),[ee,H]=it.useState(!1),[Ee,Fe]=it.useState(0),[Ie,Ue]=it.useState(0),Ye=it.useRef(u.duration||M||Kf),We=it.useRef(null),st=it.useRef(null),ot=D===0,mt=D+1<=w,rt=u.type,Be=u.dismissible!==!1,ft=u.className||"",pt=u.descriptionClassName||"",Ct=it.useMemo(()=>P.findIndex(Ze=>Ze.toastId===u.id)||0,[P,u.id]),Je=it.useMemo(()=>{var Ze;return(Ze=u.closeButton)!=null?Ze:C},[u.closeButton,C]),Xt=it.useMemo(()=>u.duration||M||Kf,[u.duration,M]),Lt=it.useRef(0),Ps=it.useRef(0),Qt=it.useRef(0),Gt=it.useRef(null),[nr,Yt]=J.split("-"),ir=it.useMemo(()=>P.reduce((Ze,zt,vt)=>vt>=Ct?Ze:Ze+zt.height,0),[P,Ct]),ss=gw(),Fs=u.invert||x,Vs=rt==="loading";Ps.current=it.useMemo(()=>Ct*ae+ir,[Ct,ir]),it.useEffect(()=>{Ye.current=Xt},[Xt]),it.useEffect(()=>{Z(!0)},[]),it.useEffect(()=>{let Ze=st.current;if(Ze){let zt=Ze.getBoundingClientRect().height;return Ue(zt),v(vt=>[{toastId:u.id,height:zt,position:u.position},...vt]),()=>v(vt=>vt.filter(js=>js.toastId!==u.id))}},[v,u.id]),it.useLayoutEffect(()=>{if(!Y)return;let Ze=st.current,zt=Ze.style.height;Ze.style.height="auto";let vt=Ze.getBoundingClientRect().height;Ze.style.height=zt,Ue(vt),v(js=>js.find(Ns=>Ns.toastId===u.id)?js.map(Ns=>Ns.toastId===u.id?Q(E({},Ns),{height:vt}):Ns):[{toastId:u.id,height:vt,position:u.position},...js])},[Y,u.title,u.description,v,u.id]);let Ut=it.useCallback(()=>{Le(!0),Fe(Ps.current),v(Ze=>Ze.filter(zt=>zt.toastId!==u.id)),setTimeout(()=>{se(u)},Lw)},[u,se,v,Ps]);it.useEffect(()=>{if(u.promise&&rt==="loading"||u.duration===1/0||u.type==="loading")return;let Ze;return F||j||T&&ss?(()=>{if(Qt.current<Lt.current){let zt=new Date().getTime()-Lt.current;Ye.current=Ye.current-zt}Qt.current=new Date().getTime()})():Ye.current!==1/0&&(Lt.current=new Date().getTime(),Ze=setTimeout(()=>{var zt;(zt=u.onAutoClose)==null||zt.call(u,u),Ut()},Ye.current)),()=>clearTimeout(Ze)},[F,j,u,rt,T,ss,Ut]),it.useEffect(()=>{u.delete&&Ut()},[Ut,u.delete]);function wt(){var Ze,zt,vt;return ve!=null&&ve.loading?it.createElement("div",{className:xa(ie==null?void 0:ie.loader,(Ze=u==null?void 0:u.classNames)==null?void 0:Ze.loader,"sonner-loader"),"data-visible":rt==="loading"},ve.loading):he?it.createElement("div",{className:xa(ie==null?void 0:ie.loader,(zt=u==null?void 0:u.classNames)==null?void 0:zt.loader,"sonner-loader"),"data-visible":rt==="loading"},he):it.createElement(dw,{className:xa(ie==null?void 0:ie.loader,(vt=u==null?void 0:u.classNames)==null?void 0:vt.loader),visible:rt==="loading"})}return it.createElement("li",{tabIndex:0,ref:st,className:xa(S,ft,ie==null?void 0:ie.toast,(t=u==null?void 0:u.classNames)==null?void 0:t.toast,ie==null?void 0:ie.default,ie==null?void 0:ie[rt],(r=u==null?void 0:u.classNames)==null?void 0:r[rt]),"data-sonner-toast":"","data-rich-colors":(a=u.richColors)!=null?a:z,"data-styled":!(u.jsx||u.unstyled||k),"data-mounted":Y,"data-promise":!!u.promise,"data-swiped":ee,"data-removed":de,"data-visible":mt,"data-y-position":nr,"data-x-position":Yt,"data-index":D,"data-front":ot,"data-swiping":X,"data-dismissible":Be,"data-type":rt,"data-invert":Fs,"data-swipe-out":we,"data-swipe-direction":re,"data-expanded":!!(F||ce&&Y),style:E(E({"--index":D,"--toasts-before":D,"--z-index":B.length-D,"--offset":`${de?Ee:Ps.current}px`,"--initial-height":ce?"auto":`${Ie}px`},A),u.style),onDragEnd:()=>{me(!1),V(null),Gt.current=null},onPointerDown:Ze=>{Vs||!Be||(We.current=new Date,Fe(Ps.current),Ze.target.setPointerCapture(Ze.pointerId),Ze.target.tagName!=="BUTTON"&&(me(!0),Gt.current={x:Ze.clientX,y:Ze.clientY}))},onPointerUp:()=>{var Ze,zt,vt,js;if(we||!Be)return;Gt.current=null;let Ns=Number(((Ze=st.current)==null?void 0:Ze.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),ut=Number(((zt=st.current)==null?void 0:zt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),fe=new Date().getTime()-((vt=We.current)==null?void 0:vt.getTime()),De=U==="x"?Ns:ut,ue=Math.abs(De)/fe;if(Math.abs(De)>=_w||ue>.11){Fe(Ps.current),(js=u.onDismiss)==null||js.call(u,u),G(U==="x"?Ns>0?"right":"left":ut>0?"down":"up"),Ut(),oe(!0),H(!1);return}me(!1),V(null)},onPointerMove:Ze=>{var zt,vt,js,Ns;if(!Gt.current||!Be||((zt=window.getSelection())==null?void 0:zt.toString().length)>0)return;let ut=Ze.clientY-Gt.current.y,fe=Ze.clientX-Gt.current.x,De=(vt=s.swipeDirections)!=null?vt:Iw(J);!U&&(Math.abs(fe)>1||Math.abs(ut)>1)&&V(Math.abs(fe)>Math.abs(ut)?"x":"y");let ue={x:0,y:0};U==="y"?(De.includes("top")||De.includes("bottom"))&&(De.includes("top")&&ut<0||De.includes("bottom")&&ut>0)&&(ue.y=ut):U==="x"&&(De.includes("left")||De.includes("right"))&&(De.includes("left")&&fe<0||De.includes("right")&&fe>0)&&(ue.x=fe),(Math.abs(ue.x)>0||Math.abs(ue.y)>0)&&H(!0),(js=st.current)==null||js.style.setProperty("--swipe-amount-x",`${ue.x}px`),(Ns=st.current)==null||Ns.style.setProperty("--swipe-amount-y",`${ue.y}px`)}},Je&&!u.jsx?it.createElement("button",{"aria-label":Ae,"data-disabled":Vs,"data-close-button":!0,onClick:Vs||!Be?()=>{}:()=>{var Ze;Ut(),(Ze=u.onDismiss)==null||Ze.call(u,u)},className:xa(ie==null?void 0:ie.closeButton,(n=u==null?void 0:u.classNames)==null?void 0:n.closeButton)},(i=ve==null?void 0:ve.close)!=null?i:pw):null,u.jsx||N.isValidElement(u.title)?u.jsx?u.jsx:typeof u.title=="function"?u.title():u.title:it.createElement(it.Fragment,null,rt||u.icon||u.promise?it.createElement("div",{"data-icon":"",className:xa(ie==null?void 0:ie.icon,(o=u==null?void 0:u.classNames)==null?void 0:o.icon)},u.promise||u.type==="loading"&&!u.icon?u.icon||wt():null,u.type!=="loading"?u.icon||(ve==null?void 0:ve[rt])||lw(rt):null):null,it.createElement("div",{"data-content":"",className:xa(ie==null?void 0:ie.content,(l=u==null?void 0:u.classNames)==null?void 0:l.content)},it.createElement("div",{"data-title":"",className:xa(ie==null?void 0:ie.title,(d=u==null?void 0:u.classNames)==null?void 0:d.title)},typeof u.title=="function"?u.title():u.title),u.description?it.createElement("div",{"data-description":"",className:xa(I,pt,ie==null?void 0:ie.description,(h=u==null?void 0:u.classNames)==null?void 0:h.description)},typeof u.description=="function"?u.description():u.description):null),N.isValidElement(u.cancel)?u.cancel:u.cancel&&ld(u.cancel)?it.createElement("button",{"data-button":!0,"data-cancel":!0,style:u.cancelButtonStyle||L,onClick:Ze=>{var zt,vt;ld(u.cancel)&&Be&&((vt=(zt=u.cancel).onClick)==null||vt.call(zt,Ze),Ut())},className:xa(ie==null?void 0:ie.cancelButton,(f=u==null?void 0:u.classNames)==null?void 0:f.cancelButton)},u.cancel.label):null,N.isValidElement(u.action)?u.action:u.action&&ld(u.action)?it.createElement("button",{"data-button":!0,"data-action":!0,style:u.actionButtonStyle||y,onClick:Ze=>{var zt,vt;ld(u.action)&&((vt=(zt=u.action).onClick)==null||vt.call(zt,Ze),!Ze.defaultPrevented&&Ut())},className:xa(ie==null?void 0:ie.actionButton,(p=u==null?void 0:u.classNames)==null?void 0:p.actionButton)},u.action.label):null))};function Xf(){if(typeof window=="undefined"||typeof document=="undefined")return"ltr";let s=document.documentElement.getAttribute("dir");return s==="auto"||!s?window.getComputedStyle(document.documentElement).direction:s}function Tw(s,t){let r={};return[s,t].forEach((a,n)=>{let i=n===1,o=i?"--mobile-offset":"--offset",l=i?Cw:kw;function d(h){["top","right","bottom","left"].forEach(f=>{r[`${o}-${f}`]=typeof h=="number"?`${h}px`:h})}typeof a=="number"||typeof a=="string"?d(a):typeof a=="object"?["top","right","bottom","left"].forEach(h=>{a[h]===void 0?r[`${o}-${h}`]=l:r[`${o}-${h}`]=typeof a[h]=="number"?`${a[h]}px`:a[h]}):d(l)}),r}var Mw=N.forwardRef(function(s,t){let{invert:r,position:a="bottom-right",hotkey:n=["altKey","KeyT"],expand:i,closeButton:o,className:l,offset:d,mobileOffset:h,theme:f="light",richColors:p,duration:x,style:u,visibleToasts:k=Sw,toastOptions:j,dir:v=Xf(),gap:w=Pw,loadingIcon:P,icons:D,containerAriaLabel:B="Notifications",pauseWhenPageIsHidden:F}=s,[se,z]=it.useState([]),C=it.useMemo(()=>Array.from(new Set([a].concat(se.filter(T=>T.position).map(T=>T.position)))),[se,a]),[A,L]=it.useState([]),[y,S]=it.useState(!1),[I,M]=it.useState(!1),[J,ae]=it.useState(f!=="system"?f:typeof window!="undefined"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),he=it.useRef(null),ce=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),ie=it.useRef(null),ve=it.useRef(!1),Ae=it.useCallback(T=>{z(U=>{var V;return(V=U.find(re=>re.id===T.id))!=null&&V.delete||zr.dismiss(T.id),U.filter(({id:re})=>re!==T.id)})},[]);return it.useEffect(()=>zr.subscribe(T=>{if(T.dismiss){z(U=>U.map(V=>V.id===T.id?Q(E({},V),{delete:!0}):V));return}setTimeout(()=>{Gv.flushSync(()=>{z(U=>{let V=U.findIndex(re=>re.id===T.id);return V!==-1?[...U.slice(0,V),E(E({},U[V]),T),...U.slice(V+1)]:[T,...U]})})})}),[]),it.useEffect(()=>{if(f!=="system"){ae(f);return}if(f==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ae("dark"):ae("light")),typeof window=="undefined")return;let T=window.matchMedia("(prefers-color-scheme: dark)");try{T.addEventListener("change",({matches:U})=>{ae(U?"dark":"light")})}catch(U){T.addListener(({matches:V})=>{try{ae(V?"dark":"light")}catch(re){}})}},[f]),it.useEffect(()=>{se.length<=1&&S(!1)},[se]),it.useEffect(()=>{let T=U=>{var V,re;n.every(G=>U[G]||U.code===G)&&(S(!0),(V=he.current)==null||V.focus()),U.code==="Escape"&&(document.activeElement===he.current||(re=he.current)!=null&&re.contains(document.activeElement))&&S(!1)};return document.addEventListener("keydown",T),()=>document.removeEventListener("keydown",T)},[n]),it.useEffect(()=>{if(he.current)return()=>{ie.current&&(ie.current.focus({preventScroll:!0}),ie.current=null,ve.current=!1)}},[he.current]),it.createElement("section",{ref:t,"aria-label":`${B} ${ce}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},C.map((T,U)=>{var V;let[re,G]=T.split("-");return se.length?it.createElement("ol",{key:T,dir:v==="auto"?Xf():v,tabIndex:-1,ref:he,className:l,"data-sonner-toaster":!0,"data-theme":J,"data-y-position":re,"data-lifted":y&&se.length>1&&!i,"data-x-position":G,style:E(E({"--front-toast-height":`${((V=A[0])==null?void 0:V.height)||0}px`,"--width":`${Aw}px`,"--gap":`${w}px`},u),Tw(d,h)),onBlur:Y=>{ve.current&&!Y.currentTarget.contains(Y.relatedTarget)&&(ve.current=!1,ie.current&&(ie.current.focus({preventScroll:!0}),ie.current=null))},onFocus:Y=>{Y.target instanceof HTMLElement&&Y.target.dataset.dismissible==="false"||ve.current||(ve.current=!0,ie.current=Y.relatedTarget)},onMouseEnter:()=>S(!0),onMouseMove:()=>S(!0),onMouseLeave:()=>{I||S(!1)},onDragEnd:()=>S(!1),onPointerDown:Y=>{Y.target instanceof HTMLElement&&Y.target.dataset.dismissible==="false"||M(!0)},onPointerUp:()=>M(!1)},se.filter(Y=>!Y.position&&U===0||Y.position===T).map((Y,Z)=>{var de,Le;return it.createElement(Dw,{key:Y.id,icons:D,index:Z,toast:Y,defaultRichColors:p,duration:(de=j==null?void 0:j.duration)!=null?de:x,className:j==null?void 0:j.className,descriptionClassName:j==null?void 0:j.descriptionClassName,invert:r,visibleToasts:k,closeButton:(Le=j==null?void 0:j.closeButton)!=null?Le:o,interacting:I,position:T,style:j==null?void 0:j.style,unstyled:j==null?void 0:j.unstyled,classNames:j==null?void 0:j.classNames,cancelButtonStyle:j==null?void 0:j.cancelButtonStyle,actionButtonStyle:j==null?void 0:j.actionButtonStyle,removeToast:Ae,toasts:se.filter(X=>X.position==Y.position),heights:A.filter(X=>X.position==Y.position),setHeights:L,expandByDefault:i,gap:w,loadingIcon:P,expanded:y,pauseWhenPageIsHidden:F,swipeDirections:s.swipeDirections})})):null}))});const Ew=t=>{var s=Me(t,[]);const{theme:r="system"}=ow();return e.jsx(Mw,E({theme:r,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}}},s))};var[Gd,Mk]=fn("Tooltip",[zd]),Jd=zd(),Ix="TooltipProvider",Rw=700,Mh="tooltip.open",[Ow,Lm]=Gd(Ix),Dx=s=>{const{__scopeTooltip:t,delayDuration:r=Rw,skipDelayDuration:a=300,disableHoverableContent:n=!1,children:i}=s,o=N.useRef(!0),l=N.useRef(!1),d=N.useRef(0);return N.useEffect(()=>{const h=d.current;return()=>window.clearTimeout(h)},[]),e.jsx(Ow,{scope:t,isOpenDelayedRef:o,delayDuration:r,onOpen:N.useCallback(()=>{window.clearTimeout(d.current),o.current=!1},[]),onClose:N.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>o.current=!0,a)},[a]),isPointerInTransitRef:l,onPointerInTransitChange:N.useCallback(h=>{l.current=h},[]),disableHoverableContent:n,children:i})};Dx.displayName=Ix;var Xl="Tooltip",[Fw,Kd]=Gd(Xl),Tx=s=>{const{__scopeTooltip:t,children:r,open:a,defaultOpen:n,onOpenChange:i,disableHoverableContent:o,delayDuration:l}=s,d=Lm(Xl,s.__scopeTooltip),h=Jd(t),[f,p]=N.useState(null),x=$d(),u=N.useRef(0),k=o!=null?o:d.disableHoverableContent,j=l!=null?l:d.delayDuration,v=N.useRef(!1),[w,P]=$o({prop:a,defaultProp:n!=null?n:!1,onChange:z=>{z?(d.onOpen(),document.dispatchEvent(new CustomEvent(Mh))):d.onClose(),i==null||i(z)},caller:Xl}),D=N.useMemo(()=>w?v.current?"delayed-open":"instant-open":"closed",[w]),B=N.useCallback(()=>{window.clearTimeout(u.current),u.current=0,v.current=!1,P(!0)},[P]),F=N.useCallback(()=>{window.clearTimeout(u.current),u.current=0,P(!1)},[P]),se=N.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>{v.current=!0,P(!0),u.current=0},j)},[j,P]);return N.useEffect(()=>()=>{u.current&&(window.clearTimeout(u.current),u.current=0)},[]),e.jsx(cg,Q(E({},h),{children:e.jsx(Fw,{scope:t,contentId:x,open:w,stateAttribute:D,trigger:f,onTriggerChange:p,onTriggerEnter:N.useCallback(()=>{d.isOpenDelayedRef.current?se():B()},[d.isOpenDelayedRef,se,B]),onTriggerLeave:N.useCallback(()=>{k?F():(window.clearTimeout(u.current),u.current=0)},[F,k]),onOpen:B,onClose:F,disableHoverableContent:k,children:r})}))};Tx.displayName=Xl;var Eh="TooltipTrigger",Mx=N.forwardRef((s,t)=>{const x=s,{__scopeTooltip:r}=x,a=Me(x,["__scopeTooltip"]),n=Kd(Eh,r),i=Lm(Eh,r),o=Jd(r),l=N.useRef(null),d=As(t,l,n.onTriggerChange),h=N.useRef(!1),f=N.useRef(!1),p=N.useCallback(()=>h.current=!1,[]);return N.useEffect(()=>()=>document.removeEventListener("pointerup",p),[p]),e.jsx(dg,Q(E({asChild:!0},o),{children:e.jsx(Vt.button,Q(E({"aria-describedby":n.open?n.contentId:void 0,"data-state":n.stateAttribute},a),{ref:d,onPointerMove:Rt(s.onPointerMove,u=>{u.pointerType!=="touch"&&!f.current&&!i.isPointerInTransitRef.current&&(n.onTriggerEnter(),f.current=!0)}),onPointerLeave:Rt(s.onPointerLeave,()=>{n.onTriggerLeave(),f.current=!1}),onPointerDown:Rt(s.onPointerDown,()=>{n.open&&n.onClose(),h.current=!0,document.addEventListener("pointerup",p,{once:!0})}),onFocus:Rt(s.onFocus,()=>{h.current||n.onOpen()}),onBlur:Rt(s.onBlur,n.onClose),onClick:Rt(s.onClick,n.onClose)}))}))});Mx.displayName=Eh;var Bw="TooltipPortal",[Ek,Uw]=Gd(Bw,{forceMount:void 0}),Vo="TooltipContent",Ex=N.forwardRef((s,t)=>{const r=Uw(Vo,s.__scopeTooltip),l=s,{forceMount:a=r.forceMount,side:n="top"}=l,i=Me(l,["forceMount","side"]),o=Kd(Vo,s.__scopeTooltip);return e.jsx(Ui,{present:a||o.open,children:o.disableHoverableContent?e.jsx(Rx,Q(E({side:n},i),{ref:t})):e.jsx(qw,Q(E({side:n},i),{ref:t}))})}),qw=N.forwardRef((s,t)=>{const r=Kd(Vo,s.__scopeTooltip),a=Lm(Vo,s.__scopeTooltip),n=N.useRef(null),i=As(t,n),[o,l]=N.useState(null),{trigger:d,onClose:h}=r,f=n.current,{onPointerInTransitChange:p}=a,x=N.useCallback(()=>{l(null),p(!1)},[p]),u=N.useCallback((k,j)=>{const v=k.currentTarget,w={x:k.clientX,y:k.clientY},P=Vw(w,v.getBoundingClientRect()),D=Yw(w,P),B=Gw(j.getBoundingClientRect()),F=Kw([...D,...B]);l(F),p(!0)},[p]);return N.useEffect(()=>()=>x(),[x]),N.useEffect(()=>{if(d&&f){const k=v=>u(v,f),j=v=>u(v,d);return d.addEventListener("pointerleave",k),f.addEventListener("pointerleave",j),()=>{d.removeEventListener("pointerleave",k),f.removeEventListener("pointerleave",j)}}},[d,f,u,x]),N.useEffect(()=>{if(o){const k=j=>{const v=j.target,w={x:j.clientX,y:j.clientY},P=(d==null?void 0:d.contains(v))||(f==null?void 0:f.contains(v)),D=!Jw(w,o);P?x():D&&(x(),h())};return document.addEventListener("pointermove",k),()=>document.removeEventListener("pointermove",k)}},[d,f,o,h,x]),e.jsx(Rx,Q(E({},s),{ref:i}))}),[zw,$w]=Gd(Xl,{isInside:!1}),Ww=lg("TooltipContent"),Rx=N.forwardRef((s,t)=>{const p=s,{__scopeTooltip:r,children:a,"aria-label":n,onEscapeKeyDown:i,onPointerDownOutside:o}=p,l=Me(p,["__scopeTooltip","children","aria-label","onEscapeKeyDown","onPointerDownOutside"]),d=Kd(Vo,r),h=Jd(r),{onClose:f}=d;return N.useEffect(()=>(document.addEventListener(Mh,f),()=>document.removeEventListener(Mh,f)),[f]),N.useEffect(()=>{if(d.trigger){const x=u=>{const k=u.target;k!=null&&k.contains(d.trigger)&&f()};return window.addEventListener("scroll",x,{capture:!0}),()=>window.removeEventListener("scroll",x,{capture:!0})}},[d.trigger,f]),e.jsx(ig,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:x=>x.preventDefault(),onDismiss:f,children:e.jsxs(og,Q(E(E({"data-state":d.stateAttribute},h),l),{ref:t,style:Q(E({},l.style),{"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}),children:[e.jsx(Ww,{children:a}),e.jsx(zw,{scope:r,isInside:!0,children:e.jsx(ry,{id:d.contentId,role:"tooltip",children:n||a})})]}))})});Ex.displayName=Vo;var Ox="TooltipArrow",Hw=N.forwardRef((s,t)=>{const o=s,{__scopeTooltip:r}=o,a=Me(o,["__scopeTooltip"]),n=Jd(r);return $w(Ox,r).isInside?null:e.jsx(ug,Q(E(E({},n),a),{ref:t}))});Hw.displayName=Ox;function Vw(s,t){const r=Math.abs(t.top-s.y),a=Math.abs(t.bottom-s.y),n=Math.abs(t.right-s.x),i=Math.abs(t.left-s.x);switch(Math.min(r,a,n,i)){case i:return"left";case n:return"right";case r:return"top";case a:return"bottom";default:throw new Error("unreachable")}}function Yw(s,t,r=5){const a=[];switch(t){case"top":a.push({x:s.x-r,y:s.y+r},{x:s.x+r,y:s.y+r});break;case"bottom":a.push({x:s.x-r,y:s.y-r},{x:s.x+r,y:s.y-r});break;case"left":a.push({x:s.x+r,y:s.y-r},{x:s.x+r,y:s.y+r});break;case"right":a.push({x:s.x-r,y:s.y-r},{x:s.x-r,y:s.y+r});break}return a}function Gw(s){const{top:t,right:r,bottom:a,left:n}=s;return[{x:n,y:t},{x:r,y:t},{x:r,y:a},{x:n,y:a}]}function Jw(s,t){const{x:r,y:a}=s;let n=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],d=t[o],h=l.x,f=l.y,p=d.x,x=d.y;f>a!=x>a&&r<(p-h)*(a-f)/(x-f)+h&&(n=!n)}return n}function Kw(s){const t=s.slice();return t.sort((r,a)=>r.x<a.x?-1:r.x>a.x?1:r.y<a.y?-1:r.y>a.y?1:0),Xw(t)}function Xw(s){if(s.length<=1)return s.slice();const t=[];for(let a=0;a<s.length;a++){const n=s[a];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(n.y-o.y)>=(i.y-o.y)*(n.x-o.x))t.pop();else break}t.push(n)}t.pop();const r=[];for(let a=s.length-1;a>=0;a--){const n=s[a];for(;r.length>=2;){const i=r[r.length-1],o=r[r.length-2];if((i.x-o.x)*(n.y-o.y)>=(i.y-o.y)*(n.x-o.x))r.pop();else break}r.push(n)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var Qw=Dx,Zw=Tx,ej=Mx,Fx=Ex;const Ti=Qw,ei=Zw,ti=ej,mn=N.forwardRef((n,a)=>{var i=n,{className:s,sideOffset:t=4}=i,r=Me(i,["className","sideOffset"]);return e.jsx(Fx,E({ref:a,sideOffset:t,className:Ce("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s)},r))});mn.displayName=Fx.displayName;var el=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(s){return this.listeners.add(s),this.onSubscribe(),()=>{this.listeners.delete(s),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Mi=typeof window=="undefined"||"Deno"in globalThis;function Ir(){}function tj(s,t){return typeof s=="function"?s(t):s}function Rh(s){return typeof s=="number"&&s>=0&&s!==1/0}function Bx(s,t){return Math.max(s+(t||0)-Date.now(),0)}function Kn(s,t){return typeof s=="function"?s(t):s}function ia(s,t){return typeof s=="function"?s(t):s}function Qf(s,t){const{type:r="all",exact:a,fetchStatus:n,predicate:i,queryKey:o,stale:l}=s;if(o){if(a){if(t.queryHash!==Im(o,t.options))return!1}else if(!Ql(t.queryKey,o))return!1}if(r!=="all"){const d=t.isActive();if(r==="active"&&!d||r==="inactive"&&d)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||n&&n!==t.state.fetchStatus||i&&!i(t))}function Zf(s,t){const{exact:r,status:a,predicate:n,mutationKey:i}=s;if(i){if(!t.options.mutationKey)return!1;if(r){if(Ei(t.options.mutationKey)!==Ei(i))return!1}else if(!Ql(t.options.mutationKey,i))return!1}return!(a&&t.state.status!==a||n&&!n(t))}function Im(s,t){return((t==null?void 0:t.queryKeyHashFn)||Ei)(s)}function Ei(s){return JSON.stringify(s,(t,r)=>Oh(r)?Object.keys(r).sort().reduce((a,n)=>(a[n]=r[n],a),{}):r)}function Ql(s,t){return s===t?!0:typeof s!=typeof t?!1:s&&t&&typeof s=="object"&&typeof t=="object"?Object.keys(t).every(r=>Ql(s[r],t[r])):!1}function Ux(s,t){if(s===t)return s;const r=ep(s)&&ep(t);if(r||Oh(s)&&Oh(t)){const a=r?s:Object.keys(s),n=a.length,i=r?t:Object.keys(t),o=i.length,l=r?[]:{},d=new Set(a);let h=0;for(let f=0;f<o;f++){const p=r?f:i[f];(!r&&d.has(p)||r)&&s[p]===void 0&&t[p]===void 0?(l[p]=void 0,h++):(l[p]=Ux(s[p],t[p]),l[p]===s[p]&&s[p]!==void 0&&h++)}return n===o&&h===n?s:l}return t}function Ld(s,t){if(!t||Object.keys(s).length!==Object.keys(t).length)return!1;for(const r in s)if(s[r]!==t[r])return!1;return!0}function ep(s){return Array.isArray(s)&&s.length===Object.keys(s).length}function Oh(s){if(!tp(s))return!1;const t=s.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!tp(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(s)!==Object.prototype)}function tp(s){return Object.prototype.toString.call(s)==="[object Object]"}function sj(s){return new Promise(t=>{setTimeout(t,s)})}function Fh(s,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(s,t):r.structuralSharing!==!1?Ux(s,t):t}function rj(s,t,r=0){const a=[...s,t];return r&&a.length>r?a.slice(1):a}function aj(s,t,r=0){const a=[t,...s];return r&&a.length>r?a.slice(0,-1):a}var Dm=Symbol();function qx(s,t){return!s.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!s.queryFn||s.queryFn===Dm?()=>Promise.reject(new Error(`Missing queryFn: '${s.queryHash}'`)):s.queryFn}function zx(s,t){return typeof s=="function"?s(...t):!!s}var bi,On,Io,Gp,nj=(Gp=class extends el{constructor(){super();yt(this,bi);yt(this,On);yt(this,Io);dt(this,Io,t=>{if(!Mi&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){pe(this,On)||this.setEventListener(pe(this,Io))}onUnsubscribe(){var t;this.hasListeners()||((t=pe(this,On))==null||t.call(this),dt(this,On,void 0))}setEventListener(t){var r;dt(this,Io,t),(r=pe(this,On))==null||r.call(this),dt(this,On,t(a=>{typeof a=="boolean"?this.setFocused(a):this.onFocus()}))}setFocused(t){pe(this,bi)!==t&&(dt(this,bi,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof pe(this,bi)=="boolean"?pe(this,bi):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},bi=new WeakMap,On=new WeakMap,Io=new WeakMap,Gp),Tm=new nj,Do,Fn,To,Jp,ij=(Jp=class extends el{constructor(){super();yt(this,Do,!0);yt(this,Fn);yt(this,To);dt(this,To,t=>{if(!Mi&&window.addEventListener){const r=()=>t(!0),a=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",a,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",a)}}})}onSubscribe(){pe(this,Fn)||this.setEventListener(pe(this,To))}onUnsubscribe(){var t;this.hasListeners()||((t=pe(this,Fn))==null||t.call(this),dt(this,Fn,void 0))}setEventListener(t){var r;dt(this,To,t),(r=pe(this,Fn))==null||r.call(this),dt(this,Fn,t(this.setOnline.bind(this)))}setOnline(t){pe(this,Do)!==t&&(dt(this,Do,t),this.listeners.forEach(a=>{a(t)}))}isOnline(){return pe(this,Do)}},Do=new WeakMap,Fn=new WeakMap,To=new WeakMap,Jp),Id=new ij;function Bh(){let s,t;const r=new Promise((n,i)=>{s=n,t=i});r.status="pending",r.catch(()=>{});function a(n){Object.assign(r,n),delete r.resolve,delete r.reject}return r.resolve=n=>{a({status:"fulfilled",value:n}),s(n)},r.reject=n=>{a({status:"rejected",reason:n}),t(n)},r}function oj(s){return Math.min(1e3*Mf(2,s),3e4)}function $x(s){return(s!=null?s:"online")==="online"?Id.isOnline():!0}var Wx=class extends Error{constructor(s){super("CancelledError"),this.revert=s==null?void 0:s.revert,this.silent=s==null?void 0:s.silent}};function dh(s){return s instanceof Wx}function Hx(s){let t=!1,r=0,a=!1,n;const i=Bh(),o=j=>{var v;a||(x(new Wx(j)),(v=s.abort)==null||v.call(s))},l=()=>{t=!0},d=()=>{t=!1},h=()=>Tm.isFocused()&&(s.networkMode==="always"||Id.isOnline())&&s.canRun(),f=()=>$x(s.networkMode)&&s.canRun(),p=j=>{var v;a||(a=!0,(v=s.onSuccess)==null||v.call(s,j),n==null||n(),i.resolve(j))},x=j=>{var v;a||(a=!0,(v=s.onError)==null||v.call(s,j),n==null||n(),i.reject(j))},u=()=>new Promise(j=>{var v;n=w=>{(a||h())&&j(w)},(v=s.onPause)==null||v.call(s)}).then(()=>{var j;n=void 0,a||(j=s.onContinue)==null||j.call(s)}),k=()=>{if(a)return;let j;const v=r===0?s.initialPromise:void 0;try{j=v!=null?v:s.fn()}catch(w){j=Promise.reject(w)}Promise.resolve(j).then(p).catch(w=>{var se,z,C;if(a)return;const P=(se=s.retry)!=null?se:Mi?0:3,D=(z=s.retryDelay)!=null?z:oj,B=typeof D=="function"?D(r,w):D,F=P===!0||typeof P=="number"&&r<P||typeof P=="function"&&P(r,w);if(t||!F){x(w);return}r++,(C=s.onFail)==null||C.call(s,r,w),sj(B).then(()=>h()?void 0:u()).then(()=>{t?x(w):k()})})};return{promise:i,cancel:o,continue:()=>(n==null||n(),i),cancelRetry:l,continueRetry:d,canStart:f,start:()=>(f()?k():u().then(k),i)}}var lj=s=>setTimeout(s,0);function cj(){let s=[],t=0,r=l=>{l()},a=l=>{l()},n=lj;const i=l=>{t?s.push(l):n(()=>{r(l)})},o=()=>{const l=s;s=[],l.length&&n(()=>{a(()=>{l.forEach(d=>{r(d)})})})};return{batch:l=>{let d;t++;try{d=l()}finally{t--,t||o()}return d},batchCalls:l=>(...d)=>{i(()=>{l(...d)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{a=l},setScheduler:l=>{n=l}}}var Zs=cj(),wi,Kp,Vx=(Kp=class{constructor(){yt(this,wi)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Rh(this.gcTime)&&dt(this,wi,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(s){this.gcTime=Math.max(this.gcTime||0,s!=null?s:Mi?1/0:5*60*1e3)}clearGcTimeout(){pe(this,wi)&&(clearTimeout(pe(this,wi)),dt(this,wi,void 0))}},wi=new WeakMap,Kp),Mo,ji,na,Ni,xr,sc,Si,Na,on,Xp,dj=(Xp=class extends Vx{constructor(t){var r;super();yt(this,Na);yt(this,Mo);yt(this,ji);yt(this,na);yt(this,Ni);yt(this,xr);yt(this,sc);yt(this,Si);dt(this,Si,!1),dt(this,sc,t.defaultOptions),this.setOptions(t.options),this.observers=[],dt(this,Ni,t.client),dt(this,na,pe(this,Ni).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,dt(this,Mo,uj(this.options)),this.state=(r=t.state)!=null?r:pe(this,Mo),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=pe(this,xr))==null?void 0:t.promise}setOptions(t){this.options=E(E({},pe(this,sc)),t),this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&pe(this,na).remove(this)}setData(t,r){const a=Fh(this.state.data,t,this.options);return Ht(this,Na,on).call(this,{data:a,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),a}setState(t,r){Ht(this,Na,on).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var a,n;const r=(a=pe(this,xr))==null?void 0:a.promise;return(n=pe(this,xr))==null||n.cancel(t),r?r.then(Ir).catch(Ir):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(pe(this,Mo))}isActive(){return this.observers.some(t=>ia(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Dm||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Kn(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!Bx(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(a=>a.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=pe(this,xr))==null||r.continue()}onOnline(){var r;const t=this.observers.find(a=>a.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=pe(this,xr))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),pe(this,na).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(pe(this,xr)&&(pe(this,Si)?pe(this,xr).cancel({revert:!0}):pe(this,xr).cancelRetry()),this.scheduleGc()),pe(this,na).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ht(this,Na,on).call(this,{type:"invalidate"})}fetch(t,r){var h,f,p;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(pe(this,xr))return pe(this,xr).continueRetry(),pe(this,xr).promise}if(t&&this.setOptions(t),!this.options.queryFn){const x=this.observers.find(u=>u.options.queryFn);x&&this.setOptions(x.options)}const a=new AbortController,n=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(dt(this,Si,!0),a.signal)})},i=()=>{const x=qx(this.options,r),k=(()=>{const j={client:pe(this,Ni),queryKey:this.queryKey,meta:this.meta};return n(j),j})();return dt(this,Si,!1),this.options.persister?this.options.persister(x,k,this):x(k)},l=(()=>{const x={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:pe(this,Ni),state:this.state,fetchFn:i};return n(x),x})();(h=this.options.behavior)==null||h.onFetch(l,this),dt(this,ji,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=l.fetchOptions)==null?void 0:f.meta))&&Ht(this,Na,on).call(this,{type:"fetch",meta:(p=l.fetchOptions)==null?void 0:p.meta});const d=x=>{var u,k,j,v;dh(x)&&x.silent||Ht(this,Na,on).call(this,{type:"error",error:x}),dh(x)||((k=(u=pe(this,na).config).onError)==null||k.call(u,x,this),(v=(j=pe(this,na).config).onSettled)==null||v.call(j,this.state.data,x,this)),this.scheduleGc()};return dt(this,xr,Hx({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:a.abort.bind(a),onSuccess:x=>{var u,k,j,v;if(x===void 0){d(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(x)}catch(w){d(w);return}(k=(u=pe(this,na).config).onSuccess)==null||k.call(u,x,this),(v=(j=pe(this,na).config).onSettled)==null||v.call(j,x,this.state.error,this),this.scheduleGc()},onError:d,onFail:(x,u)=>{Ht(this,Na,on).call(this,{type:"failed",failureCount:x,error:u})},onPause:()=>{Ht(this,Na,on).call(this,{type:"pause"})},onContinue:()=>{Ht(this,Na,on).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),pe(this,xr).start()}},Mo=new WeakMap,ji=new WeakMap,na=new WeakMap,Ni=new WeakMap,xr=new WeakMap,sc=new WeakMap,Si=new WeakMap,Na=new WeakSet,on=function(t){const r=a=>{var n,i;switch(t.type){case"failed":return Q(E({},a),{fetchFailureCount:t.failureCount,fetchFailureReason:t.error});case"pause":return Q(E({},a),{fetchStatus:"paused"});case"continue":return Q(E({},a),{fetchStatus:"fetching"});case"fetch":return Q(E(E({},a),Yx(a.data,this.options)),{fetchMeta:(n=t.meta)!=null?n:null});case"success":return dt(this,ji,void 0),E(Q(E({},a),{data:t.data,dataUpdateCount:a.dataUpdateCount+1,dataUpdatedAt:(i=t.dataUpdatedAt)!=null?i:Date.now(),error:null,isInvalidated:!1,status:"success"}),!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null});case"error":const o=t.error;return dh(o)&&o.revert&&pe(this,ji)?Q(E({},pe(this,ji)),{fetchStatus:"idle"}):Q(E({},a),{error:o,errorUpdateCount:a.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:a.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"});case"invalidate":return Q(E({},a),{isInvalidated:!0});case"setState":return E(E({},a),t.state)}};this.state=r(this.state),Zs.batch(()=>{this.observers.forEach(a=>{a.onQueryUpdate()}),pe(this,na).notify({query:this,type:"updated",action:t})})},Xp);function Yx(s,t){return E({fetchFailureCount:0,fetchFailureReason:null,fetchStatus:$x(t.networkMode)?"fetching":"paused"},s===void 0&&{error:null,status:"pending"})}function uj(s){const t=typeof s.initialData=="function"?s.initialData():s.initialData,r=t!==void 0,a=r?typeof s.initialDataUpdatedAt=="function"?s.initialDataUpdatedAt():s.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?a!=null?a:Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Fa,Qp,hj=(Qp=class extends el{constructor(t={}){super();yt(this,Fa);this.config=t,dt(this,Fa,new Map)}build(t,r,a){var l;const n=r.queryKey,i=(l=r.queryHash)!=null?l:Im(n,r);let o=this.get(i);return o||(o=new dj({client:t,queryKey:n,queryHash:i,options:t.defaultQueryOptions(r),state:a,defaultOptions:t.getQueryDefaults(n)}),this.add(o)),o}add(t){pe(this,Fa).has(t.queryHash)||(pe(this,Fa).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=pe(this,Fa).get(t.queryHash);r&&(t.destroy(),r===t&&pe(this,Fa).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Zs.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return pe(this,Fa).get(t)}getAll(){return[...pe(this,Fa).values()]}find(t){const r=E({exact:!0},t);return this.getAll().find(a=>Qf(r,a))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(a=>Qf(t,a)):r}notify(t){Zs.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){Zs.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Zs.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Fa=new WeakMap,Qp),Ba,_r,ki,Ua,En,Zp,mj=(Zp=class extends Vx{constructor(t){super();yt(this,Ua);yt(this,Ba);yt(this,_r);yt(this,ki);this.mutationId=t.mutationId,dt(this,_r,t.mutationCache),dt(this,Ba,[]),this.state=t.state||Gx(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){pe(this,Ba).includes(t)||(pe(this,Ba).push(t),this.clearGcTimeout(),pe(this,_r).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){dt(this,Ba,pe(this,Ba).filter(r=>r!==t)),this.scheduleGc(),pe(this,_r).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){pe(this,Ba).length||(this.state.status==="pending"?this.scheduleGc():pe(this,_r).remove(this))}continue(){var t,r;return(r=(t=pe(this,ki))==null?void 0:t.continue())!=null?r:this.execute(this.state.variables)}execute(t){return xe(this,null,function*(){var i,o,l,d,h,f,p,x,u,k,j,v,w,P,D,B,F,se,z,C,A;const r=()=>{Ht(this,Ua,En).call(this,{type:"continue"})};dt(this,ki,Hx({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(L,y)=>{Ht(this,Ua,En).call(this,{type:"failed",failureCount:L,error:y})},onPause:()=>{Ht(this,Ua,En).call(this,{type:"pause"})},onContinue:r,retry:(i=this.options.retry)!=null?i:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>pe(this,_r).canRun(this)}));const a=this.state.status==="pending",n=!pe(this,ki).canStart();try{if(a)r();else{Ht(this,Ua,En).call(this,{type:"pending",variables:t,isPaused:n}),yield(l=(o=pe(this,_r).config).onMutate)==null?void 0:l.call(o,t,this);const y=yield(h=(d=this.options).onMutate)==null?void 0:h.call(d,t);y!==this.state.context&&Ht(this,Ua,En).call(this,{type:"pending",context:y,variables:t,isPaused:n})}const L=yield pe(this,ki).start();return yield(p=(f=pe(this,_r).config).onSuccess)==null?void 0:p.call(f,L,t,this.state.context,this),yield(u=(x=this.options).onSuccess)==null?void 0:u.call(x,L,t,this.state.context),yield(j=(k=pe(this,_r).config).onSettled)==null?void 0:j.call(k,L,null,this.state.variables,this.state.context,this),yield(w=(v=this.options).onSettled)==null?void 0:w.call(v,L,null,t,this.state.context),Ht(this,Ua,En).call(this,{type:"success",data:L}),L}catch(L){try{throw yield(D=(P=pe(this,_r).config).onError)==null?void 0:D.call(P,L,t,this.state.context,this),yield(F=(B=this.options).onError)==null?void 0:F.call(B,L,t,this.state.context),yield(z=(se=pe(this,_r).config).onSettled)==null?void 0:z.call(se,void 0,L,this.state.variables,this.state.context,this),yield(A=(C=this.options).onSettled)==null?void 0:A.call(C,void 0,L,t,this.state.context),L}finally{Ht(this,Ua,En).call(this,{type:"error",error:L})}}finally{pe(this,_r).runNext(this)}})}},Ba=new WeakMap,_r=new WeakMap,ki=new WeakMap,Ua=new WeakSet,En=function(t){const r=a=>{switch(t.type){case"failed":return Q(E({},a),{failureCount:t.failureCount,failureReason:t.error});case"pause":return Q(E({},a),{isPaused:!0});case"continue":return Q(E({},a),{isPaused:!1});case"pending":return Q(E({},a),{context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()});case"success":return Q(E({},a),{data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1});case"error":return Q(E({},a),{data:void 0,error:t.error,failureCount:a.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"})}};this.state=r(this.state),Zs.batch(()=>{pe(this,Ba).forEach(a=>{a.onMutationUpdate(t)}),pe(this,_r).notify({mutation:this,type:"updated",action:t})})},Zp);function Gx(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ln,Sa,rc,eg,fj=(eg=class extends el{constructor(t={}){super();yt(this,ln);yt(this,Sa);yt(this,rc);this.config=t,dt(this,ln,new Set),dt(this,Sa,new Map),dt(this,rc,0)}build(t,r,a){const n=new mj({mutationCache:this,mutationId:++ad(this,rc)._,options:t.defaultMutationOptions(r),state:a});return this.add(n),n}add(t){pe(this,ln).add(t);const r=cd(t);if(typeof r=="string"){const a=pe(this,Sa).get(r);a?a.push(t):pe(this,Sa).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(pe(this,ln).delete(t)){const r=cd(t);if(typeof r=="string"){const a=pe(this,Sa).get(r);if(a)if(a.length>1){const n=a.indexOf(t);n!==-1&&a.splice(n,1)}else a[0]===t&&pe(this,Sa).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=cd(t);if(typeof r=="string"){const a=pe(this,Sa).get(r),n=a==null?void 0:a.find(i=>i.state.status==="pending");return!n||n===t}else return!0}runNext(t){var a,n;const r=cd(t);if(typeof r=="string"){const i=(a=pe(this,Sa).get(r))==null?void 0:a.find(o=>o!==t&&o.state.isPaused);return(n=i==null?void 0:i.continue())!=null?n:Promise.resolve()}else return Promise.resolve()}clear(){Zs.batch(()=>{pe(this,ln).forEach(t=>{this.notify({type:"removed",mutation:t})}),pe(this,ln).clear(),pe(this,Sa).clear()})}getAll(){return Array.from(pe(this,ln))}find(t){const r=E({exact:!0},t);return this.getAll().find(a=>Zf(r,a))}findAll(t={}){return this.getAll().filter(r=>Zf(t,r))}notify(t){Zs.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return Zs.batch(()=>Promise.all(t.map(r=>r.continue().catch(Ir))))}},ln=new WeakMap,Sa=new WeakMap,rc=new WeakMap,eg);function cd(s){var t;return(t=s.options.scope)==null?void 0:t.id}function sp(s){return{onFetch:(t,r)=>{var f,p,x,u,k;const a=t.options,n=(x=(p=(f=t.fetchOptions)==null?void 0:f.meta)==null?void 0:p.fetchMore)==null?void 0:x.direction,i=((u=t.state.data)==null?void 0:u.pages)||[],o=((k=t.state.data)==null?void 0:k.pageParams)||[];let l={pages:[],pageParams:[]},d=0;const h=()=>xe(this,null,function*(){var D;let j=!1;const v=B=>{Object.defineProperty(B,"signal",{enumerable:!0,get:()=>(t.signal.aborted?j=!0:t.signal.addEventListener("abort",()=>{j=!0}),t.signal)})},w=qx(t.options,t.fetchOptions),P=(B,F,se)=>xe(this,null,function*(){if(j)return Promise.reject();if(F==null&&B.pages.length)return Promise.resolve(B);const C=(()=>{const S={client:t.client,queryKey:t.queryKey,pageParam:F,direction:se?"backward":"forward",meta:t.options.meta};return v(S),S})(),A=yield w(C),{maxPages:L}=t.options,y=se?aj:rj;return{pages:y(B.pages,A,L),pageParams:y(B.pageParams,F,L)}});if(n&&i.length){const B=n==="backward",F=B?pj:rp,se={pages:i,pageParams:o},z=F(a,se);l=yield P(se,z,B)}else{const B=s!=null?s:i.length;do{const F=d===0?(D=o[0])!=null?D:a.initialPageParam:rp(a,l);if(d>0&&F==null)break;l=yield P(l,F),d++}while(d<B)}return l});t.options.persister?t.fetchFn=()=>{var j,v;return(v=(j=t.options).persister)==null?void 0:v.call(j,h,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=h}}}function rp(s,{pages:t,pageParams:r}){const a=t.length-1;return t.length>0?s.getNextPageParam(t[a],t,r[a],r):void 0}function pj(s,{pages:t,pageParams:r}){var a;return t.length>0?(a=s.getPreviousPageParam)==null?void 0:a.call(s,t[0],t,r[0],r):void 0}var Rs,Bn,Un,Eo,Ro,qn,Oo,Fo,tg,gj=(tg=class{constructor(s={}){yt(this,Rs);yt(this,Bn);yt(this,Un);yt(this,Eo);yt(this,Ro);yt(this,qn);yt(this,Oo);yt(this,Fo);dt(this,Rs,s.queryCache||new hj),dt(this,Bn,s.mutationCache||new fj),dt(this,Un,s.defaultOptions||{}),dt(this,Eo,new Map),dt(this,Ro,new Map),dt(this,qn,0)}mount(){ad(this,qn)._++,pe(this,qn)===1&&(dt(this,Oo,Tm.subscribe(s=>xe(this,null,function*(){s&&(yield this.resumePausedMutations(),pe(this,Rs).onFocus())}))),dt(this,Fo,Id.subscribe(s=>xe(this,null,function*(){s&&(yield this.resumePausedMutations(),pe(this,Rs).onOnline())}))))}unmount(){var s,t;ad(this,qn)._--,pe(this,qn)===0&&((s=pe(this,Oo))==null||s.call(this),dt(this,Oo,void 0),(t=pe(this,Fo))==null||t.call(this),dt(this,Fo,void 0))}isFetching(s){return pe(this,Rs).findAll(Q(E({},s),{fetchStatus:"fetching"})).length}isMutating(s){return pe(this,Bn).findAll(Q(E({},s),{status:"pending"})).length}getQueryData(s){var r;const t=this.defaultQueryOptions({queryKey:s});return(r=pe(this,Rs).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(s){const t=this.defaultQueryOptions(s),r=pe(this,Rs).build(this,t),a=r.state.data;return a===void 0?this.fetchQuery(s):(s.revalidateIfStale&&r.isStaleByTime(Kn(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(a))}getQueriesData(s){return pe(this,Rs).findAll(s).map(({queryKey:t,state:r})=>{const a=r.data;return[t,a]})}setQueryData(s,t,r){const a=this.defaultQueryOptions({queryKey:s}),n=pe(this,Rs).get(a.queryHash),i=n==null?void 0:n.state.data,o=tj(t,i);if(o!==void 0)return pe(this,Rs).build(this,a).setData(o,Q(E({},r),{manual:!0}))}setQueriesData(s,t,r){return Zs.batch(()=>pe(this,Rs).findAll(s).map(({queryKey:a})=>[a,this.setQueryData(a,t,r)]))}getQueryState(s){var r;const t=this.defaultQueryOptions({queryKey:s});return(r=pe(this,Rs).get(t.queryHash))==null?void 0:r.state}removeQueries(s){const t=pe(this,Rs);Zs.batch(()=>{t.findAll(s).forEach(r=>{t.remove(r)})})}resetQueries(s,t){const r=pe(this,Rs);return Zs.batch(()=>(r.findAll(s).forEach(a=>{a.reset()}),this.refetchQueries(E({type:"active"},s),t)))}cancelQueries(s,t={}){const r=E({revert:!0},t),a=Zs.batch(()=>pe(this,Rs).findAll(s).map(n=>n.cancel(r)));return Promise.all(a).then(Ir).catch(Ir)}invalidateQueries(s,t={}){return Zs.batch(()=>{var r,a;return pe(this,Rs).findAll(s).forEach(n=>{n.invalidate()}),(s==null?void 0:s.refetchType)==="none"?Promise.resolve():this.refetchQueries(Q(E({},s),{type:(a=(r=s==null?void 0:s.refetchType)!=null?r:s==null?void 0:s.type)!=null?a:"active"}),t)})}refetchQueries(s,t={}){var n;const r=Q(E({},t),{cancelRefetch:(n=t.cancelRefetch)!=null?n:!0}),a=Zs.batch(()=>pe(this,Rs).findAll(s).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let o=i.fetch(void 0,r);return r.throwOnError||(o=o.catch(Ir)),i.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(a).then(Ir)}fetchQuery(s){const t=this.defaultQueryOptions(s);t.retry===void 0&&(t.retry=!1);const r=pe(this,Rs).build(this,t);return r.isStaleByTime(Kn(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(s){return this.fetchQuery(s).then(Ir).catch(Ir)}fetchInfiniteQuery(s){return s.behavior=sp(s.pages),this.fetchQuery(s)}prefetchInfiniteQuery(s){return this.fetchInfiniteQuery(s).then(Ir).catch(Ir)}ensureInfiniteQueryData(s){return s.behavior=sp(s.pages),this.ensureQueryData(s)}resumePausedMutations(){return Id.isOnline()?pe(this,Bn).resumePausedMutations():Promise.resolve()}getQueryCache(){return pe(this,Rs)}getMutationCache(){return pe(this,Bn)}getDefaultOptions(){return pe(this,Un)}setDefaultOptions(s){dt(this,Un,s)}setQueryDefaults(s,t){pe(this,Eo).set(Ei(s),{queryKey:s,defaultOptions:t})}getQueryDefaults(s){const t=[...pe(this,Eo).values()],r={};return t.forEach(a=>{Ql(s,a.queryKey)&&Object.assign(r,a.defaultOptions)}),r}setMutationDefaults(s,t){pe(this,Ro).set(Ei(s),{mutationKey:s,defaultOptions:t})}getMutationDefaults(s){const t=[...pe(this,Ro).values()],r={};return t.forEach(a=>{Ql(s,a.mutationKey)&&Object.assign(r,a.defaultOptions)}),r}defaultQueryOptions(s){if(s._defaulted)return s;const t=Q(E(E(E({},pe(this,Un).queries),this.getQueryDefaults(s.queryKey)),s),{_defaulted:!0});return t.queryHash||(t.queryHash=Im(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Dm&&(t.enabled=!1),t}defaultMutationOptions(s){return s!=null&&s._defaulted?s:Q(E(E(E({},pe(this,Un).mutations),(s==null?void 0:s.mutationKey)&&this.getMutationDefaults(s.mutationKey)),s),{_defaulted:!0})}clear(){pe(this,Rs).clear(),pe(this,Bn).clear()}},Rs=new WeakMap,Bn=new WeakMap,Un=new WeakMap,Eo=new WeakMap,Ro=new WeakMap,qn=new WeakMap,Oo=new WeakMap,Fo=new WeakMap,tg),Ur,Kt,ac,Lr,Ci,Bo,zn,$n,nc,Uo,qo,Ai,Pi,Wn,zo,ns,ql,Uh,qh,zh,$h,Wh,Hh,Vh,Jx,sg,xj=(sg=class extends el{constructor(t,r){super();yt(this,ns);yt(this,Ur);yt(this,Kt);yt(this,ac);yt(this,Lr);yt(this,Ci);yt(this,Bo);yt(this,zn);yt(this,$n);yt(this,nc);yt(this,Uo);yt(this,qo);yt(this,Ai);yt(this,Pi);yt(this,Wn);yt(this,zo,new Set);this.options=r,dt(this,Ur,t),dt(this,$n,null),dt(this,zn,Bh()),this.options.experimental_prefetchInRender||pe(this,zn).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(pe(this,Kt).addObserver(this),ap(pe(this,Kt),this.options)?Ht(this,ns,ql).call(this):this.updateResult(),Ht(this,ns,$h).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Yh(pe(this,Kt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Yh(pe(this,Kt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Ht(this,ns,Wh).call(this),Ht(this,ns,Hh).call(this),pe(this,Kt).removeObserver(this)}setOptions(t){const r=this.options,a=pe(this,Kt);if(this.options=pe(this,Ur).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ia(this.options.enabled,pe(this,Kt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Ht(this,ns,Vh).call(this),pe(this,Kt).setOptions(this.options),r._defaulted&&!Ld(this.options,r)&&pe(this,Ur).getQueryCache().notify({type:"observerOptionsUpdated",query:pe(this,Kt),observer:this});const n=this.hasListeners();n&&np(pe(this,Kt),a,this.options,r)&&Ht(this,ns,ql).call(this),this.updateResult(),n&&(pe(this,Kt)!==a||ia(this.options.enabled,pe(this,Kt))!==ia(r.enabled,pe(this,Kt))||Kn(this.options.staleTime,pe(this,Kt))!==Kn(r.staleTime,pe(this,Kt)))&&Ht(this,ns,Uh).call(this);const i=Ht(this,ns,qh).call(this);n&&(pe(this,Kt)!==a||ia(this.options.enabled,pe(this,Kt))!==ia(r.enabled,pe(this,Kt))||i!==pe(this,Wn))&&Ht(this,ns,zh).call(this,i)}getOptimisticResult(t){const r=pe(this,Ur).getQueryCache().build(pe(this,Ur),t),a=this.createResult(r,t);return yj(this,a)&&(dt(this,Lr,a),dt(this,Bo,this.options),dt(this,Ci,pe(this,Kt).state)),a}getCurrentResult(){return pe(this,Lr)}trackResult(t,r){return new Proxy(t,{get:(a,n)=>(this.trackProp(n),r==null||r(n),Reflect.get(a,n))})}trackProp(t){pe(this,zo).add(t)}getCurrentQuery(){return pe(this,Kt)}refetch(r={}){var t=Me(r,[]);return this.fetch(E({},t))}fetchOptimistic(t){const r=pe(this,Ur).defaultQueryOptions(t),a=pe(this,Ur).getQueryCache().build(pe(this,Ur),r);return a.fetch().then(()=>this.createResult(a,r))}fetch(t){var r;return Ht(this,ns,ql).call(this,Q(E({},t),{cancelRefetch:(r=t.cancelRefetch)!=null?r:!0})).then(()=>(this.updateResult(),pe(this,Lr)))}createResult(t,r){var A;const a=pe(this,Kt),n=this.options,i=pe(this,Lr),o=pe(this,Ci),l=pe(this,Bo),h=t!==a?t.state:pe(this,ac),{state:f}=t;let p=E({},f),x=!1,u;if(r._optimisticResults){const L=this.hasListeners(),y=!L&&ap(t,r),S=L&&np(t,a,r,n);(y||S)&&(p=E(E({},p),Yx(f.data,t.options))),r._optimisticResults==="isRestoring"&&(p.fetchStatus="idle")}let{error:k,errorUpdatedAt:j,status:v}=p;u=p.data;let w=!1;if(r.placeholderData!==void 0&&u===void 0&&v==="pending"){let L;i!=null&&i.isPlaceholderData&&r.placeholderData===(l==null?void 0:l.placeholderData)?(L=i.data,w=!0):L=typeof r.placeholderData=="function"?r.placeholderData((A=pe(this,qo))==null?void 0:A.state.data,pe(this,qo)):r.placeholderData,L!==void 0&&(v="success",u=Fh(i==null?void 0:i.data,L,r),x=!0)}if(r.select&&u!==void 0&&!w)if(i&&u===(o==null?void 0:o.data)&&r.select===pe(this,nc))u=pe(this,Uo);else try{dt(this,nc,r.select),u=r.select(u),u=Fh(i==null?void 0:i.data,u,r),dt(this,Uo,u),dt(this,$n,null)}catch(L){dt(this,$n,L)}pe(this,$n)&&(k=pe(this,$n),u=pe(this,Uo),j=Date.now(),v="error");const P=p.fetchStatus==="fetching",D=v==="pending",B=v==="error",F=D&&P,se=u!==void 0,C={status:v,fetchStatus:p.fetchStatus,isPending:D,isSuccess:v==="success",isError:B,isInitialLoading:F,isLoading:F,data:u,dataUpdatedAt:p.dataUpdatedAt,error:k,errorUpdatedAt:j,failureCount:p.fetchFailureCount,failureReason:p.fetchFailureReason,errorUpdateCount:p.errorUpdateCount,isFetched:p.dataUpdateCount>0||p.errorUpdateCount>0,isFetchedAfterMount:p.dataUpdateCount>h.dataUpdateCount||p.errorUpdateCount>h.errorUpdateCount,isFetching:P,isRefetching:P&&!D,isLoadingError:B&&!se,isPaused:p.fetchStatus==="paused",isPlaceholderData:x,isRefetchError:B&&se,isStale:Mm(t,r),refetch:this.refetch,promise:pe(this,zn),isEnabled:ia(r.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const L=I=>{C.status==="error"?I.reject(C.error):C.data!==void 0&&I.resolve(C.data)},y=()=>{const I=dt(this,zn,C.promise=Bh());L(I)},S=pe(this,zn);switch(S.status){case"pending":t.queryHash===a.queryHash&&L(S);break;case"fulfilled":(C.status==="error"||C.data!==S.value)&&y();break;case"rejected":(C.status!=="error"||C.error!==S.reason)&&y();break}}return C}updateResult(){const t=pe(this,Lr),r=this.createResult(pe(this,Kt),this.options);if(dt(this,Ci,pe(this,Kt).state),dt(this,Bo,this.options),pe(this,Ci).data!==void 0&&dt(this,qo,pe(this,Kt)),Ld(r,t))return;dt(this,Lr,r);const a=()=>{if(!t)return!0;const{notifyOnChangeProps:n}=this.options,i=typeof n=="function"?n():n;if(i==="all"||!i&&!pe(this,zo).size)return!0;const o=new Set(i!=null?i:pe(this,zo));return this.options.throwOnError&&o.add("error"),Object.keys(pe(this,Lr)).some(l=>{const d=l;return pe(this,Lr)[d]!==t[d]&&o.has(d)})};Ht(this,ns,Jx).call(this,{listeners:a()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Ht(this,ns,$h).call(this)}},Ur=new WeakMap,Kt=new WeakMap,ac=new WeakMap,Lr=new WeakMap,Ci=new WeakMap,Bo=new WeakMap,zn=new WeakMap,$n=new WeakMap,nc=new WeakMap,Uo=new WeakMap,qo=new WeakMap,Ai=new WeakMap,Pi=new WeakMap,Wn=new WeakMap,zo=new WeakMap,ns=new WeakSet,ql=function(t){Ht(this,ns,Vh).call(this);let r=pe(this,Kt).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(Ir)),r},Uh=function(){Ht(this,ns,Wh).call(this);const t=Kn(this.options.staleTime,pe(this,Kt));if(Mi||pe(this,Lr).isStale||!Rh(t))return;const a=Bx(pe(this,Lr).dataUpdatedAt,t)+1;dt(this,Ai,setTimeout(()=>{pe(this,Lr).isStale||this.updateResult()},a))},qh=function(){var t;return(t=typeof this.options.refetchInterval=="function"?this.options.refetchInterval(pe(this,Kt)):this.options.refetchInterval)!=null?t:!1},zh=function(t){Ht(this,ns,Hh).call(this),dt(this,Wn,t),!(Mi||ia(this.options.enabled,pe(this,Kt))===!1||!Rh(pe(this,Wn))||pe(this,Wn)===0)&&dt(this,Pi,setInterval(()=>{(this.options.refetchIntervalInBackground||Tm.isFocused())&&Ht(this,ns,ql).call(this)},pe(this,Wn)))},$h=function(){Ht(this,ns,Uh).call(this),Ht(this,ns,zh).call(this,Ht(this,ns,qh).call(this))},Wh=function(){pe(this,Ai)&&(clearTimeout(pe(this,Ai)),dt(this,Ai,void 0))},Hh=function(){pe(this,Pi)&&(clearInterval(pe(this,Pi)),dt(this,Pi,void 0))},Vh=function(){const t=pe(this,Ur).getQueryCache().build(pe(this,Ur),this.options);if(t===pe(this,Kt))return;const r=pe(this,Kt);dt(this,Kt,t),dt(this,ac,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},Jx=function(t){Zs.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(pe(this,Lr))}),pe(this,Ur).getQueryCache().notify({query:pe(this,Kt),type:"observerResultsUpdated"})})},sg);function vj(s,t){return ia(t.enabled,s)!==!1&&s.state.data===void 0&&!(s.state.status==="error"&&t.retryOnMount===!1)}function ap(s,t){return vj(s,t)||s.state.data!==void 0&&Yh(s,t,t.refetchOnMount)}function Yh(s,t,r){if(ia(t.enabled,s)!==!1&&Kn(t.staleTime,s)!=="static"){const a=typeof r=="function"?r(s):r;return a==="always"||a!==!1&&Mm(s,t)}return!1}function np(s,t,r,a){return(s!==t||ia(a.enabled,s)===!1)&&(!r.suspense||s.state.status!=="error")&&Mm(s,r)}function Mm(s,t){return ia(t.enabled,s)!==!1&&s.isStaleByTime(Kn(t.staleTime,s))}function yj(s,t){return!Ld(s.getCurrentResult(),t)}var Hn,Vn,qr,cn,un,wd,Gh,rg,bj=(rg=class extends el{constructor(r,a){super();yt(this,un);yt(this,Hn);yt(this,Vn);yt(this,qr);yt(this,cn);dt(this,Hn,r),this.setOptions(a),this.bindMethods(),Ht(this,un,wd).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var n;const a=this.options;this.options=pe(this,Hn).defaultMutationOptions(r),Ld(this.options,a)||pe(this,Hn).getMutationCache().notify({type:"observerOptionsUpdated",mutation:pe(this,qr),observer:this}),a!=null&&a.mutationKey&&this.options.mutationKey&&Ei(a.mutationKey)!==Ei(this.options.mutationKey)?this.reset():((n=pe(this,qr))==null?void 0:n.state.status)==="pending"&&pe(this,qr).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=pe(this,qr))==null||r.removeObserver(this)}onMutationUpdate(r){Ht(this,un,wd).call(this),Ht(this,un,Gh).call(this,r)}getCurrentResult(){return pe(this,Vn)}reset(){var r;(r=pe(this,qr))==null||r.removeObserver(this),dt(this,qr,void 0),Ht(this,un,wd).call(this),Ht(this,un,Gh).call(this)}mutate(r,a){var n;return dt(this,cn,a),(n=pe(this,qr))==null||n.removeObserver(this),dt(this,qr,pe(this,Hn).getMutationCache().build(pe(this,Hn),this.options)),pe(this,qr).addObserver(this),pe(this,qr).execute(r)}},Hn=new WeakMap,Vn=new WeakMap,qr=new WeakMap,cn=new WeakMap,un=new WeakSet,wd=function(){var a,n;const r=(n=(a=pe(this,qr))==null?void 0:a.state)!=null?n:Gx();dt(this,Vn,Q(E({},r),{isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset}))},Gh=function(r){Zs.batch(()=>{var a,n,i,o,l,d,h,f;if(pe(this,cn)&&this.hasListeners()){const p=pe(this,Vn).variables,x=pe(this,Vn).context;(r==null?void 0:r.type)==="success"?((n=(a=pe(this,cn)).onSuccess)==null||n.call(a,r.data,p,x),(o=(i=pe(this,cn)).onSettled)==null||o.call(i,r.data,null,p,x)):(r==null?void 0:r.type)==="error"&&((d=(l=pe(this,cn)).onError)==null||d.call(l,r.error,p,x),(f=(h=pe(this,cn)).onSettled)==null||f.call(h,void 0,r.error,p,x))}this.listeners.forEach(p=>{p(pe(this,Vn))})})},rg),Kx=N.createContext(void 0),Xd=s=>{const t=N.useContext(Kx);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},wj=({client:s,children:t})=>(N.useEffect(()=>(s.mount(),()=>{s.unmount()}),[s]),e.jsx(Kx.Provider,{value:s,children:t})),Xx=N.createContext(!1),jj=()=>N.useContext(Xx);Xx.Provider;function Nj(){let s=!1;return{clearReset:()=>{s=!1},reset:()=>{s=!0},isReset:()=>s}}var Sj=N.createContext(Nj()),kj=()=>N.useContext(Sj),Cj=(s,t)=>{(s.suspense||s.throwOnError||s.experimental_prefetchInRender)&&(t.isReset()||(s.retryOnMount=!1))},Aj=s=>{N.useEffect(()=>{s.clearReset()},[s])},Pj=({result:s,errorResetBoundary:t,throwOnError:r,query:a,suspense:n})=>s.isError&&!t.isReset()&&!s.isFetching&&a&&(n&&s.data===void 0||zx(r,[s.error,a])),_j=s=>{if(s.suspense){const t=a=>a==="static"?a:Math.max(a!=null?a:1e3,1e3),r=s.staleTime;s.staleTime=typeof r=="function"?(...a)=>t(r(...a)):t(r),typeof s.gcTime=="number"&&(s.gcTime=Math.max(s.gcTime,1e3))}},Lj=(s,t)=>s.isLoading&&s.isFetching&&!t,Ij=(s,t)=>(s==null?void 0:s.suspense)&&t.isPending,ip=(s,t,r)=>t.fetchOptimistic(s).catch(()=>{r.clearReset()});function Dj(s,t,r){var p,x,u,k,j;const a=jj(),n=kj(),i=Xd(),o=i.defaultQueryOptions(s);(x=(p=i.getDefaultOptions().queries)==null?void 0:p._experimental_beforeQuery)==null||x.call(p,o),o._optimisticResults=a?"isRestoring":"optimistic",_j(o),Cj(o,n),Aj(n);const l=!i.getQueryCache().get(o.queryHash),[d]=N.useState(()=>new t(i,o)),h=d.getOptimisticResult(o),f=!a&&s.subscribed!==!1;if(N.useSyncExternalStore(N.useCallback(v=>{const w=f?d.subscribe(Zs.batchCalls(v)):Ir;return d.updateResult(),w},[d,f]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),N.useEffect(()=>{d.setOptions(o)},[o,d]),Ij(o,h))throw ip(o,d,n);if(Pj({result:h,errorResetBoundary:n,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw h.error;if((k=(u=i.getDefaultOptions().queries)==null?void 0:u._experimental_afterQuery)==null||k.call(u,o,h),o.experimental_prefetchInRender&&!Mi&&Lj(h,a)){const v=l?ip(o,d,n):(j=i.getQueryCache().get(o.queryHash))==null?void 0:j.promise;v==null||v.catch(Ir).finally(()=>{d.updateResult()})}return o.notifyOnChangeProps?h:d.trackResult(h)}function Dd(s,t){return Dj(s,xj)}function Oa(s,t){const r=Xd(),[a]=N.useState(()=>new bj(r,s));N.useEffect(()=>{a.setOptions(s)},[a,s]);const n=N.useSyncExternalStore(N.useCallback(o=>a.subscribe(Zs.batchCalls(o)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),i=N.useCallback((o,l)=>{a.mutate(o,l).catch(Ir)},[a]);if(n.error&&zx(a.options.throwOnError,[n.error]))throw n.error;return Q(E({},n),{mutate:i,mutateAsync:n.mutate})}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Td(){return Td=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Td.apply(this,arguments)}var Gn;(function(s){s.Pop="POP",s.Push="PUSH",s.Replace="REPLACE"})(Gn||(Gn={}));const op="popstate";function Tj(s){s===void 0&&(s={});function t(n,i){let{pathname:o="/",search:l="",hash:d=""}=dc(n.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Jh("",{pathname:o,search:l,hash:d},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){let o=n.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let d=n.location.href,h=d.indexOf("#");l=h===-1?d:d.slice(0,h)}return l+"#"+(typeof i=="string"?i:Qx(i))}function a(n,i){Em(n.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return Ej(t,r,a,s)}function $r(s,t){if(s===!1||s===null||typeof s=="undefined")throw new Error(t)}function Em(s,t){if(!s)try{throw new Error(t)}catch(r){}}function Mj(){return Math.random().toString(36).substr(2,8)}function lp(s,t){return{usr:s.state,key:s.key,idx:t}}function Jh(s,t,r,a){return r===void 0&&(r=null),Td({pathname:typeof s=="string"?s:s.pathname,search:"",hash:""},typeof t=="string"?dc(t):t,{state:r,key:t&&t.key||a||Mj()})}function Qx(s){let{pathname:t="/",search:r="",hash:a=""}=s;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),a&&a!=="#"&&(t+=a.charAt(0)==="#"?a:"#"+a),t}function dc(s){let t={};if(s){let r=s.indexOf("#");r>=0&&(t.hash=s.substr(r),s=s.substr(0,r));let a=s.indexOf("?");a>=0&&(t.search=s.substr(a),s=s.substr(0,a)),s&&(t.pathname=s)}return t}function Ej(s,t,r,a){a===void 0&&(a={});let{window:n=document.defaultView,v5Compat:i=!1}=a,o=n.history,l=Gn.Pop,d=null,h=f();h==null&&(h=0,o.replaceState(Td({},o.state,{idx:h}),""));function f(){return(o.state||{idx:null}).idx}function p(){l=Gn.Pop;let v=f(),w=v==null?null:v-h;h=v,d&&d({action:l,location:j.location,delta:w})}function x(v,w){l=Gn.Push;let P=Jh(j.location,v,w);r&&r(P,v),h=f()+1;let D=lp(P,h),B=j.createHref(P);try{o.pushState(D,"",B)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;n.location.assign(B)}i&&d&&d({action:l,location:j.location,delta:1})}function u(v,w){l=Gn.Replace;let P=Jh(j.location,v,w);r&&r(P,v),h=f();let D=lp(P,h),B=j.createHref(P);o.replaceState(D,"",B),i&&d&&d({action:l,location:j.location,delta:0})}function k(v){let w=n.location.origin!=="null"?n.location.origin:n.location.href,P=typeof v=="string"?v:Qx(v);return P=P.replace(/ $/,"%20"),$r(w,"No window.location.(origin|href) available to create URL for href: "+P),new URL(P,w)}let j={get action(){return l},get location(){return s(n,o)},listen(v){if(d)throw new Error("A history only accepts one active listener");return n.addEventListener(op,p),d=v,()=>{n.removeEventListener(op,p),d=null}},createHref(v){return t(n,v)},createURL:k,encodeLocation(v){let w=k(v);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:x,replace:u,go(v){return o.go(v)}};return j}var cp;(function(s){s.data="data",s.deferred="deferred",s.redirect="redirect",s.error="error"})(cp||(cp={}));function Rj(s,t,r){return r===void 0&&(r="/"),Oj(s,t,r)}function Oj(s,t,r,a){let n=typeof t=="string"?dc(t):t,i=t0(n.pathname||"/",r);if(i==null)return null;let o=Zx(s);Fj(o);let l=null;for(let d=0;l==null&&d<o.length;++d){let h=Kj(i);l=Yj(o[d],h)}return l}function Zx(s,t,r,a){t===void 0&&(t=[]),r===void 0&&(r=[]),a===void 0&&(a="");let n=(i,o,l)=>{let d={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};d.relativePath.startsWith("/")&&($r(d.relativePath.startsWith(a),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(a.length));let h=ko([a,d.relativePath]),f=r.concat(d);i.children&&i.children.length>0&&($r(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),Zx(i.children,t,f,h)),!(i.path==null&&!i.index)&&t.push({path:h,score:Hj(h,i.index),routesMeta:f})};return s.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))n(i,o);else for(let d of e0(i.path))n(i,o,d)}),t}function e0(s){let t=s.split("/");if(t.length===0)return[];let[r,...a]=t,n=r.endsWith("?"),i=r.replace(/\?$/,"");if(a.length===0)return n?[i,""]:[i];let o=e0(a.join("/")),l=[];return l.push(...o.map(d=>d===""?i:[i,d].join("/"))),n&&l.push(...o),l.map(d=>s.startsWith("/")&&d===""?"/":d)}function Fj(s){s.sort((t,r)=>t.score!==r.score?r.score-t.score:Vj(t.routesMeta.map(a=>a.childrenIndex),r.routesMeta.map(a=>a.childrenIndex)))}const Bj=/^:[\w-]+$/,Uj=3,qj=2,zj=1,$j=10,Wj=-2,dp=s=>s==="*";function Hj(s,t){let r=s.split("/"),a=r.length;return r.some(dp)&&(a+=Wj),t&&(a+=qj),r.filter(n=>!dp(n)).reduce((n,i)=>n+(Bj.test(i)?Uj:i===""?zj:$j),a)}function Vj(s,t){return s.length===t.length&&s.slice(0,-1).every((a,n)=>a===t[n])?s[s.length-1]-t[t.length-1]:0}function Yj(s,t,r){let{routesMeta:a}=s,n={},i="/",o=[];for(let l=0;l<a.length;++l){let d=a[l],h=l===a.length-1,f=i==="/"?t:t.slice(i.length)||"/",p=Gj({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},f),x=d.route;if(!p)return null;Object.assign(n,p.params),o.push({params:n,pathname:ko([i,p.pathname]),pathnameBase:Xj(ko([i,p.pathnameBase])),route:x}),p.pathnameBase!=="/"&&(i=ko([i,p.pathnameBase]))}return o}function Gj(s,t){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[r,a]=Jj(s.path,s.caseSensitive,s.end),n=t.match(r);if(!n)return null;let i=n[0],o=i.replace(/(.)\/+$/,"$1"),l=n.slice(1);return{params:a.reduce((h,f,p)=>{let{paramName:x,isOptional:u}=f;if(x==="*"){let j=l[p]||"";o=i.slice(0,i.length-j.length).replace(/(.)\/+$/,"$1")}const k=l[p];return u&&!k?h[x]=void 0:h[x]=(k||"").replace(/%2F/g,"/"),h},{}),pathname:i,pathnameBase:o,pattern:s}}function Jj(s,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Em(s==="*"||!s.endsWith("*")||s.endsWith("/*"),'Route path "'+s+'" will be treated as if it were '+('"'+s.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+s.replace(/\*$/,"/*")+'".'));let a=[],n="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,d)=>(a.push({paramName:l,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(a.push({paramName:"*"}),n+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?n+="\\/*$":s!==""&&s!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,t?void 0:"i"),a]}function Kj(s){try{return s.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Em(!1,'The URL path "'+s+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),s}}function t0(s,t){if(t==="/")return s;if(!s.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,a=s.charAt(r);return a&&a!=="/"?null:s.slice(r)||"/"}const ko=s=>s.join("/").replace(/\/\/+/g,"/"),Xj=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/");function Qj(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}const s0=["post","put","patch","delete"];new Set(s0);const Zj=["get",...s0];new Set(Zj);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Md(){return Md=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Md.apply(this,arguments)}const eN=N.createContext(null),tN=N.createContext(null),r0=N.createContext(null),Qd=N.createContext(null),Zd=N.createContext({outlet:null,matches:[],isDataRoute:!1}),a0=N.createContext(null);function Rm(){return N.useContext(Qd)!=null}function n0(){return Rm()||$r(!1),N.useContext(Qd).location}function sN(s,t){return rN(s,t)}function rN(s,t,r,a){Rm()||$r(!1);let{navigator:n}=N.useContext(r0),{matches:i}=N.useContext(Zd),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let d=o?o.pathnameBase:"/";o&&o.route;let h=n0(),f;if(t){var p;let v=typeof t=="string"?dc(t):t;d==="/"||(p=v.pathname)!=null&&p.startsWith(d)||$r(!1),f=v}else f=h;let x=f.pathname||"/",u=x;if(d!=="/"){let v=d.replace(/^\//,"").split("/");u="/"+x.replace(/^\//,"").split("/").slice(v.length).join("/")}let k=Rj(s,{pathname:u}),j=lN(k&&k.map(v=>Object.assign({},v,{params:Object.assign({},l,v.params),pathname:ko([d,n.encodeLocation?n.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?d:ko([d,n.encodeLocation?n.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),i,r,a);return t&&j?N.createElement(Qd.Provider,{value:{location:Md({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Gn.Pop}},j):j}function aN(){let s=hN(),t=Qj(s)?s.status+" "+s.statusText:s instanceof Error?s.message:JSON.stringify(s),r=s instanceof Error?s.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},t),r?N.createElement("pre",{style:n},r):null,null)}const nN=N.createElement(aN,null);class iN extends N.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){}render(){return this.state.error!==void 0?N.createElement(Zd.Provider,{value:this.props.routeContext},N.createElement(a0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function oN(s){let{routeContext:t,match:r,children:a}=s,n=N.useContext(eN);return n&&n.static&&n.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=r.route.id),N.createElement(Zd.Provider,{value:t},a)}function lN(s,t,r,a){var n;if(t===void 0&&(t=[]),r===void 0&&(r=null),a===void 0&&(a=null),s==null){var i;if(!r)return null;if(r.errors)s=r.matches;else if((i=a)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)s=r.matches;else return null}let o=s,l=(n=r)==null?void 0:n.errors;if(l!=null){let f=o.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);f>=0||$r(!1),o=o.slice(0,Math.min(o.length,f+1))}let d=!1,h=-1;if(r&&a&&a.v7_partialHydration)for(let f=0;f<o.length;f++){let p=o[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(h=f),p.route.id){let{loaderData:x,errors:u}=r,k=p.route.loader&&x[p.route.id]===void 0&&(!u||u[p.route.id]===void 0);if(p.route.lazy||k){d=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}return o.reduceRight((f,p,x)=>{let u,k=!1,j=null,v=null;r&&(u=l&&p.route.id?l[p.route.id]:void 0,j=p.route.errorElement||nN,d&&(h<0&&x===0?(mN("route-fallback"),k=!0,v=null):h===x&&(k=!0,v=p.route.hydrateFallbackElement||null)));let w=t.concat(o.slice(0,x+1)),P=()=>{let D;return u?D=j:k?D=v:p.route.Component?D=N.createElement(p.route.Component,null):p.route.element?D=p.route.element:D=f,N.createElement(oN,{match:p,routeContext:{outlet:f,matches:w,isDataRoute:r!=null},children:D})};return r&&(p.route.ErrorBoundary||p.route.errorElement||x===0)?N.createElement(iN,{location:r.location,revalidation:r.revalidation,component:j,error:u,children:P(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):P()},null)}var i0=function(s){return s.UseBlocker="useBlocker",s.UseLoaderData="useLoaderData",s.UseActionData="useActionData",s.UseRouteError="useRouteError",s.UseNavigation="useNavigation",s.UseRouteLoaderData="useRouteLoaderData",s.UseMatches="useMatches",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s.UseRouteId="useRouteId",s}(i0||{});function cN(s){let t=N.useContext(tN);return t||$r(!1),t}function dN(s){let t=N.useContext(Zd);return t||$r(!1),t}function uN(s){let t=dN(),r=t.matches[t.matches.length-1];return r.route.id||$r(!1),r.route.id}function hN(){var s;let t=N.useContext(a0),r=cN(i0.UseRouteError),a=uN();return t!==void 0?t:(s=r.errors)==null?void 0:s[a]}const up={};function mN(s,t,r){up[s]||(up[s]=!0)}function fN(s,t){s==null||s.v7_startTransition,s==null||s.v7_relativeSplatPath}function Kh(s){$r(!1)}function pN(s){let{basename:t="/",children:r=null,location:a,navigationType:n=Gn.Pop,navigator:i,static:o=!1,future:l}=s;Rm()&&$r(!1);let d=t.replace(/^\/*/,"/"),h=N.useMemo(()=>({basename:d,navigator:i,static:o,future:Md({v7_relativeSplatPath:!1},l)}),[d,l,i,o]);typeof a=="string"&&(a=dc(a));let{pathname:f="/",search:p="",hash:x="",state:u=null,key:k="default"}=a,j=N.useMemo(()=>{let v=t0(f,d);return v==null?null:{location:{pathname:v,search:p,hash:x,state:u,key:k},navigationType:n}},[d,f,p,x,u,k,n]);return j==null?null:N.createElement(r0.Provider,{value:h},N.createElement(Qd.Provider,{children:r,value:j}))}function gN(s){let{children:t,location:r}=s;return sN(Xh(t),r)}new Promise(()=>{});function Xh(s,t){t===void 0&&(t=[]);let r=[];return N.Children.forEach(s,(a,n)=>{if(!N.isValidElement(a))return;let i=[...t,n];if(a.type===N.Fragment){r.push.apply(r,Xh(a.props.children,i));return}a.type!==Kh&&$r(!1),!a.props.index||!a.props.children||$r(!1);let o={id:a.props.id||i.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(o.children=Xh(a.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const xN="6";try{window.__reactRouterVersion=xN}catch(s){}const vN="startTransition",hp=Jv[vN];function yN(s){let{basename:t,children:r,future:a,window:n}=s,i=N.useRef();i.current==null&&(i.current=Tj({window:n,v5Compat:!0}));let o=i.current,[l,d]=N.useState({action:o.action,location:o.location}),{v7_startTransition:h}=a||{},f=N.useCallback(p=>{h&&hp?hp(()=>d(p)):d(p)},[d,h]);return N.useLayoutEffect(()=>o.listen(f),[o,f]),N.useEffect(()=>fN(a),[a]),N.createElement(pN,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:a})}var mp;(function(s){s.UseScrollRestoration="useScrollRestoration",s.UseSubmit="useSubmit",s.UseSubmitFetcher="useSubmitFetcher",s.UseFetcher="useFetcher",s.useViewTransitionState="useViewTransitionState"})(mp||(mp={}));var fp;(function(s){s.UseFetcher="useFetcher",s.UseFetchers="useFetchers",s.UseScrollRestoration="useScrollRestoration"})(fp||(fp={}));const Om=Vd("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),le=N.forwardRef((o,i)=>{var l=o,{className:s,variant:t,size:r,asChild:a=!1}=l,n=Me(l,["className","variant","size","asChild"]);const d=a?Rv:"button";return e.jsx(d,E({className:Ce(Om({variant:t,size:r,className:s}),"cyrus-ui"),ref:i},n))});le.displayName="Button";function Qh(s,[t,r]){return Math.min(r,Math.max(t,s))}function Fm(s){const t=N.useRef({value:s,previous:s});return N.useMemo(()=>(t.current.value!==s&&(t.current.previous=t.current.value,t.current.value=s),t.current.previous),[s])}var bN=[" ","Enter","ArrowUp","ArrowDown"],wN=[" ","Enter"],Ri="Select",[eu,tu,jN]=ag(Ri),[tl,Ok]=fn(Ri,[jN,zd]),su=zd(),[NN,ai]=tl(Ri),[SN,kN]=tl(Ri),o0=s=>{const{__scopeSelect:t,children:r,open:a,defaultOpen:n,onOpenChange:i,value:o,defaultValue:l,onValueChange:d,dir:h,name:f,autoComplete:p,disabled:x,required:u,form:k}=s,j=su(t),[v,w]=N.useState(null),[P,D]=N.useState(null),[B,F]=N.useState(!1),se=hg(h),[z,C]=$o({prop:a,defaultProp:n!=null?n:!1,onChange:i,caller:Ri}),[A,L]=$o({prop:o,defaultProp:l,onChange:d,caller:Ri}),y=N.useRef(null),S=v?k||!!v.closest("form"):!0,[I,M]=N.useState(new Set),J=Array.from(I).map(ae=>ae.props.value).join(";");return e.jsx(cg,Q(E({},j),{children:e.jsxs(NN,{required:u,scope:t,trigger:v,onTriggerChange:w,valueNode:P,onValueNodeChange:D,valueNodeHasChildren:B,onValueNodeHasChildrenChange:F,contentId:$d(),value:A,onValueChange:L,open:z,onOpenChange:C,dir:se,triggerPointerDownPosRef:y,disabled:x,children:[e.jsx(eu.Provider,{scope:t,children:e.jsx(SN,{scope:s.__scopeSelect,onNativeOptionAdd:N.useCallback(ae=>{M(he=>new Set(he).add(ae))},[]),onNativeOptionRemove:N.useCallback(ae=>{M(he=>{const ce=new Set(he);return ce.delete(ae),ce})},[]),children:r})}),S?e.jsxs(I0,{"aria-hidden":!0,required:u,tabIndex:-1,name:f,autoComplete:p,value:A,onChange:ae=>L(ae.target.value),disabled:x,form:k,children:[A===void 0?e.jsx("option",{value:""}):null,Array.from(I)]},J):null]})}))};o0.displayName=Ri;var l0="SelectTrigger",c0=N.forwardRef((s,t)=>{const j=s,{__scopeSelect:r,disabled:a=!1}=j,n=Me(j,["__scopeSelect","disabled"]),i=su(r),o=ai(l0,r),l=o.disabled||a,d=As(t,o.onTriggerChange),h=tu(r),f=N.useRef("touch"),[p,x,u]=T0(v=>{const w=h().filter(B=>!B.disabled),P=w.find(B=>B.value===o.value),D=M0(w,v,P);D!==void 0&&o.onValueChange(D.value)}),k=v=>{l||(o.onOpenChange(!0),u()),v&&(o.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return e.jsx(dg,Q(E({asChild:!0},i),{children:e.jsx(Vt.button,Q(E({type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":D0(o.value)?"":void 0},n),{ref:d,onClick:Rt(n.onClick,v=>{v.currentTarget.focus(),f.current!=="mouse"&&k(v)}),onPointerDown:Rt(n.onPointerDown,v=>{f.current=v.pointerType;const w=v.target;w.hasPointerCapture(v.pointerId)&&w.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(k(v),v.preventDefault())}),onKeyDown:Rt(n.onKeyDown,v=>{const w=p.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&x(v.key),!(w&&v.key===" ")&&bN.includes(v.key)&&(k(),v.preventDefault())})}))}))});c0.displayName=l0;var d0="SelectValue",u0=N.forwardRef((s,t)=>{const x=s,{__scopeSelect:r,className:a,style:n,children:i,placeholder:o=""}=x,l=Me(x,["__scopeSelect","className","style","children","placeholder"]),d=ai(d0,r),{onValueNodeHasChildrenChange:h}=d,f=i!==void 0,p=As(t,d.onValueNodeChange);return Xr(()=>{h(f)},[h,f]),e.jsx(Vt.span,Q(E({},l),{ref:p,style:{pointerEvents:"none"},children:D0(d.value)?e.jsx(e.Fragment,{children:o}):i}))});u0.displayName=d0;var CN="SelectIcon",h0=N.forwardRef((s,t)=>{const i=s,{__scopeSelect:r,children:a}=i,n=Me(i,["__scopeSelect","children"]);return e.jsx(Vt.span,Q(E({"aria-hidden":!0},n),{ref:t,children:a||"▼"}))});h0.displayName=CN;var AN="SelectPortal",m0=s=>e.jsx(ng,E({asChild:!0},s));m0.displayName=AN;var Oi="SelectContent",f0=N.forwardRef((s,t)=>{const r=ai(Oi,s.__scopeSelect),[a,n]=N.useState();if(Xr(()=>{n(new DocumentFragment)},[]),!r.open){const i=a;return i?Wd.createPortal(e.jsx(p0,{scope:s.__scopeSelect,children:e.jsx(eu.Slot,{scope:s.__scopeSelect,children:e.jsx("div",{children:s.children})})}),i):null}return e.jsx(g0,Q(E({},s),{ref:t}))});f0.displayName=Oi;var wa=10,[p0,ni]=tl(Oi),PN="SelectContentImpl",_N=Uv("SelectContent.RemoveScroll"),g0=N.forwardRef((s,t)=>{const Y=s,{__scopeSelect:r,position:a="item-aligned",onCloseAutoFocus:n,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:d,align:h,alignOffset:f,arrowPadding:p,collisionBoundary:x,collisionPadding:u,sticky:k,hideWhenDetached:j,avoidCollisions:v}=Y,w=Me(Y,["__scopeSelect","position","onCloseAutoFocus","onEscapeKeyDown","onPointerDownOutside","side","sideOffset","align","alignOffset","arrowPadding","collisionBoundary","collisionPadding","sticky","hideWhenDetached","avoidCollisions"]),P=ai(Oi,r),[D,B]=N.useState(null),[F,se]=N.useState(null),z=As(t,Z=>B(Z)),[C,A]=N.useState(null),[L,y]=N.useState(null),S=tu(r),[I,M]=N.useState(!1),J=N.useRef(!1);N.useEffect(()=>{if(D)return Ov(D)},[D]),Fv();const ae=N.useCallback(Z=>{const[de,...Le]=S().map(we=>we.ref.current),[X]=Le.slice(-1),me=document.activeElement;for(const we of Z)if(we===me||(we==null||we.scrollIntoView({block:"nearest"}),we===de&&F&&(F.scrollTop=0),we===X&&F&&(F.scrollTop=F.scrollHeight),we==null||we.focus(),document.activeElement!==me))return},[S,F]),he=N.useCallback(()=>ae([C,D]),[ae,C,D]);N.useEffect(()=>{I&&he()},[I,he]);const{onOpenChange:ce,triggerPointerDownPosRef:ie}=P;N.useEffect(()=>{if(D){let Z={x:0,y:0};const de=X=>{var me,we,oe,ee;Z={x:Math.abs(Math.round(X.pageX)-((we=(me=ie.current)==null?void 0:me.x)!=null?we:0)),y:Math.abs(Math.round(X.pageY)-((ee=(oe=ie.current)==null?void 0:oe.y)!=null?ee:0))}},Le=X=>{Z.x<=10&&Z.y<=10?X.preventDefault():D.contains(X.target)||ce(!1),document.removeEventListener("pointermove",de),ie.current=null};return ie.current!==null&&(document.addEventListener("pointermove",de),document.addEventListener("pointerup",Le,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",de),document.removeEventListener("pointerup",Le,{capture:!0})}}},[D,ce,ie]),N.useEffect(()=>{const Z=()=>ce(!1);return window.addEventListener("blur",Z),window.addEventListener("resize",Z),()=>{window.removeEventListener("blur",Z),window.removeEventListener("resize",Z)}},[ce]);const[ve,Ae]=T0(Z=>{const de=S().filter(me=>!me.disabled),Le=de.find(me=>me.ref.current===document.activeElement),X=M0(de,Z,Le);X&&setTimeout(()=>X.ref.current.focus())}),T=N.useCallback((Z,de,Le)=>{const X=!J.current&&!Le;(P.value!==void 0&&P.value===de||X)&&(A(Z),X&&(J.current=!0))},[P.value]),U=N.useCallback(()=>D==null?void 0:D.focus(),[D]),V=N.useCallback((Z,de,Le)=>{const X=!J.current&&!Le;(P.value!==void 0&&P.value===de||X)&&y(Z)},[P.value]),re=a==="popper"?Zh:x0,G=re===Zh?{side:l,sideOffset:d,align:h,alignOffset:f,arrowPadding:p,collisionBoundary:x,collisionPadding:u,sticky:k,hideWhenDetached:j,avoidCollisions:v}:{};return e.jsx(p0,{scope:r,content:D,viewport:F,onViewportChange:se,itemRefCallback:T,selectedItem:C,onItemLeave:U,itemTextRefCallback:V,focusSelectedItem:he,selectedItemText:L,position:a,isPositioned:I,searchRef:ve,children:e.jsx(Bv,{as:_N,allowPinchZoom:!0,children:e.jsx(qv,{asChild:!0,trapped:P.open,onMountAutoFocus:Z=>{Z.preventDefault()},onUnmountAutoFocus:Rt(n,Z=>{var de;(de=P.trigger)==null||de.focus({preventScroll:!0}),Z.preventDefault()}),children:e.jsx(ig,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:Z=>Z.preventDefault(),onDismiss:()=>P.onOpenChange(!1),children:e.jsx(re,Q(E(E({role:"listbox",id:P.contentId,"data-state":P.open?"open":"closed",dir:P.dir,onContextMenu:Z=>Z.preventDefault()},w),G),{onPlaced:()=>M(!0),ref:z,style:E({display:"flex",flexDirection:"column",outline:"none"},w.style),onKeyDown:Rt(w.onKeyDown,Z=>{const de=Z.ctrlKey||Z.altKey||Z.metaKey;if(Z.key==="Tab"&&Z.preventDefault(),!de&&Z.key.length===1&&Ae(Z.key),["ArrowUp","ArrowDown","Home","End"].includes(Z.key)){let X=S().filter(me=>!me.disabled).map(me=>me.ref.current);if(["ArrowUp","End"].includes(Z.key)&&(X=X.slice().reverse()),["ArrowUp","ArrowDown"].includes(Z.key)){const me=Z.target,we=X.indexOf(me);X=X.slice(we+1)}setTimeout(()=>ae(X)),Z.preventDefault()}})}))})})})})});g0.displayName=PN;var LN="SelectItemAlignedPosition",x0=N.forwardRef((s,t)=>{const z=s,{__scopeSelect:r,onPlaced:a}=z,n=Me(z,["__scopeSelect","onPlaced"]),i=ai(Oi,r),o=ni(Oi,r),[l,d]=N.useState(null),[h,f]=N.useState(null),p=As(t,C=>f(C)),x=tu(r),u=N.useRef(!1),k=N.useRef(!0),{viewport:j,selectedItem:v,selectedItemText:w,focusSelectedItem:P}=o,D=N.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&h&&j&&v&&w){const C=i.trigger.getBoundingClientRect(),A=h.getBoundingClientRect(),L=i.valueNode.getBoundingClientRect(),y=w.getBoundingClientRect();if(i.dir!=="rtl"){const me=y.left-A.left,we=L.left-me,oe=C.left-we,ee=C.width+oe,H=Math.max(ee,A.width),Ee=window.innerWidth-wa,Fe=Qh(we,[wa,Math.max(wa,Ee-H)]);l.style.minWidth=ee+"px",l.style.left=Fe+"px"}else{const me=A.right-y.right,we=window.innerWidth-L.right-me,oe=window.innerWidth-C.right-we,ee=C.width+oe,H=Math.max(ee,A.width),Ee=window.innerWidth-wa,Fe=Qh(we,[wa,Math.max(wa,Ee-H)]);l.style.minWidth=ee+"px",l.style.right=Fe+"px"}const S=x(),I=window.innerHeight-wa*2,M=j.scrollHeight,J=window.getComputedStyle(h),ae=parseInt(J.borderTopWidth,10),he=parseInt(J.paddingTop,10),ce=parseInt(J.borderBottomWidth,10),ie=parseInt(J.paddingBottom,10),ve=ae+he+M+ie+ce,Ae=Math.min(v.offsetHeight*5,ve),T=window.getComputedStyle(j),U=parseInt(T.paddingTop,10),V=parseInt(T.paddingBottom,10),re=C.top+C.height/2-wa,G=I-re,Y=v.offsetHeight/2,Z=v.offsetTop+Y,de=ae+he+Z,Le=ve-de;if(de<=re){const me=S.length>0&&v===S[S.length-1].ref.current;l.style.bottom="0px";const we=h.clientHeight-j.offsetTop-j.offsetHeight,oe=Math.max(G,Y+(me?V:0)+we+ce),ee=de+oe;l.style.height=ee+"px"}else{const me=S.length>0&&v===S[0].ref.current;l.style.top="0px";const oe=Math.max(re,ae+j.offsetTop+(me?U:0)+Y)+Le;l.style.height=oe+"px",j.scrollTop=de-re+j.offsetTop}l.style.margin=`${wa}px 0`,l.style.minHeight=Ae+"px",l.style.maxHeight=I+"px",a==null||a(),requestAnimationFrame(()=>u.current=!0)}},[x,i.trigger,i.valueNode,l,h,j,v,w,i.dir,a]);Xr(()=>D(),[D]);const[B,F]=N.useState();Xr(()=>{h&&F(window.getComputedStyle(h).zIndex)},[h]);const se=N.useCallback(C=>{C&&k.current===!0&&(D(),P==null||P(),k.current=!1)},[D,P]);return e.jsx(DN,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:u,onScrollButtonChange:se,children:e.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:B},children:e.jsx(Vt.div,Q(E({},n),{ref:p,style:E({boxSizing:"border-box",maxHeight:"100%"},n.style)}))})})});x0.displayName=LN;var IN="SelectPopperPosition",Zh=N.forwardRef((s,t)=>{const l=s,{__scopeSelect:r,align:a="start",collisionPadding:n=wa}=l,i=Me(l,["__scopeSelect","align","collisionPadding"]),o=su(r);return e.jsx(og,Q(E(E({},o),i),{ref:t,align:a,collisionPadding:n,style:Q(E({boxSizing:"border-box"},i.style),{"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"})}))});Zh.displayName=IN;var[DN,Bm]=tl(Oi,{}),em="SelectViewport",v0=N.forwardRef((s,t)=>{const h=s,{__scopeSelect:r,nonce:a}=h,n=Me(h,["__scopeSelect","nonce"]),i=ni(em,r),o=Bm(em,r),l=As(t,i.onViewportChange),d=N.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),e.jsx(eu.Slot,{scope:r,children:e.jsx(Vt.div,Q(E({"data-radix-select-viewport":"",role:"presentation"},n),{ref:l,style:E({position:"relative",flex:1,overflow:"hidden auto"},n.style),onScroll:Rt(n.onScroll,f=>{const p=f.currentTarget,{contentWrapper:x,shouldExpandOnScrollRef:u}=o;if(u!=null&&u.current&&x){const k=Math.abs(d.current-p.scrollTop);if(k>0){const j=window.innerHeight-wa*2,v=parseFloat(x.style.minHeight),w=parseFloat(x.style.height),P=Math.max(v,w);if(P<j){const D=P+k,B=Math.min(j,D),F=D-B;x.style.height=B+"px",x.style.bottom==="0px"&&(p.scrollTop=F>0?F:0,x.style.justifyContent="flex-end")}}}d.current=p.scrollTop})}))})]})});v0.displayName=em;var y0="SelectGroup",[TN,MN]=tl(y0),EN=N.forwardRef((s,t)=>{const i=s,{__scopeSelect:r}=i,a=Me(i,["__scopeSelect"]),n=$d();return e.jsx(TN,{scope:r,id:n,children:e.jsx(Vt.div,Q(E({role:"group","aria-labelledby":n},a),{ref:t}))})});EN.displayName=y0;var b0="SelectLabel",w0=N.forwardRef((s,t)=>{const i=s,{__scopeSelect:r}=i,a=Me(i,["__scopeSelect"]),n=MN(b0,r);return e.jsx(Vt.div,Q(E({id:n.id},a),{ref:t}))});w0.displayName=b0;var Ed="SelectItem",[RN,j0]=tl(Ed),N0=N.forwardRef((s,t)=>{const P=s,{__scopeSelect:r,value:a,disabled:n=!1,textValue:i}=P,o=Me(P,["__scopeSelect","value","disabled","textValue"]),l=ai(Ed,r),d=ni(Ed,r),h=l.value===a,[f,p]=N.useState(i!=null?i:""),[x,u]=N.useState(!1),k=As(t,D=>{var B;return(B=d.itemRefCallback)==null?void 0:B.call(d,D,a,n)}),j=$d(),v=N.useRef("touch"),w=()=>{n||(l.onValueChange(a),l.onOpenChange(!1))};if(a==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(RN,{scope:r,value:a,disabled:n,textId:j,isSelected:h,onItemTextChange:N.useCallback(D=>{p(B=>{var F;return B||((F=D==null?void 0:D.textContent)!=null?F:"").trim()})},[]),children:e.jsx(eu.ItemSlot,{scope:r,value:a,disabled:n,textValue:f,children:e.jsx(Vt.div,Q(E({role:"option","aria-labelledby":j,"data-highlighted":x?"":void 0,"aria-selected":h&&x,"data-state":h?"checked":"unchecked","aria-disabled":n||void 0,"data-disabled":n?"":void 0,tabIndex:n?void 0:-1},o),{ref:k,onFocus:Rt(o.onFocus,()=>u(!0)),onBlur:Rt(o.onBlur,()=>u(!1)),onClick:Rt(o.onClick,()=>{v.current!=="mouse"&&w()}),onPointerUp:Rt(o.onPointerUp,()=>{v.current==="mouse"&&w()}),onPointerDown:Rt(o.onPointerDown,D=>{v.current=D.pointerType}),onPointerMove:Rt(o.onPointerMove,D=>{var B;v.current=D.pointerType,n?(B=d.onItemLeave)==null||B.call(d):v.current==="mouse"&&D.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Rt(o.onPointerLeave,D=>{var B;D.currentTarget===document.activeElement&&((B=d.onItemLeave)==null||B.call(d))}),onKeyDown:Rt(o.onKeyDown,D=>{var F;((F=d.searchRef)==null?void 0:F.current)!==""&&D.key===" "||(wN.includes(D.key)&&w(),D.key===" "&&D.preventDefault())})}))})})});N0.displayName=Ed;var zl="SelectItemText",S0=N.forwardRef((s,t)=>{const w=s,{__scopeSelect:r,className:a,style:n}=w,i=Me(w,["__scopeSelect","className","style"]),o=ai(zl,r),l=ni(zl,r),d=j0(zl,r),h=kN(zl,r),[f,p]=N.useState(null),x=As(t,P=>p(P),d.onItemTextChange,P=>{var D;return(D=l.itemTextRefCallback)==null?void 0:D.call(l,P,d.value,d.disabled)}),u=f==null?void 0:f.textContent,k=N.useMemo(()=>e.jsx("option",{value:d.value,disabled:d.disabled,children:u},d.value),[d.disabled,d.value,u]),{onNativeOptionAdd:j,onNativeOptionRemove:v}=h;return Xr(()=>(j(k),()=>v(k)),[j,v,k]),e.jsxs(e.Fragment,{children:[e.jsx(Vt.span,Q(E({id:d.textId},i),{ref:x})),d.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Wd.createPortal(i.children,o.valueNode):null]})});S0.displayName=zl;var k0="SelectItemIndicator",C0=N.forwardRef((s,t)=>{const i=s,{__scopeSelect:r}=i,a=Me(i,["__scopeSelect"]);return j0(k0,r).isSelected?e.jsx(Vt.span,Q(E({"aria-hidden":!0},a),{ref:t})):null});C0.displayName=k0;var tm="SelectScrollUpButton",A0=N.forwardRef((s,t)=>{const r=ni(tm,s.__scopeSelect),a=Bm(tm,s.__scopeSelect),[n,i]=N.useState(!1),o=As(t,a.onScrollButtonChange);return Xr(()=>{if(r.viewport&&r.isPositioned){let l=function(){const h=d.scrollTop>0;i(h)};const d=r.viewport;return l(),d.addEventListener("scroll",l),()=>d.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),n?e.jsx(_0,Q(E({},s),{ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:d}=r;l&&d&&(l.scrollTop=l.scrollTop-d.offsetHeight)}})):null});A0.displayName=tm;var sm="SelectScrollDownButton",P0=N.forwardRef((s,t)=>{const r=ni(sm,s.__scopeSelect),a=Bm(sm,s.__scopeSelect),[n,i]=N.useState(!1),o=As(t,a.onScrollButtonChange);return Xr(()=>{if(r.viewport&&r.isPositioned){let l=function(){const h=d.scrollHeight-d.clientHeight,f=Math.ceil(d.scrollTop)<h;i(f)};const d=r.viewport;return l(),d.addEventListener("scroll",l),()=>d.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),n?e.jsx(_0,Q(E({},s),{ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:d}=r;l&&d&&(l.scrollTop=l.scrollTop+d.offsetHeight)}})):null});P0.displayName=sm;var _0=N.forwardRef((s,t)=>{const h=s,{__scopeSelect:r,onAutoScroll:a}=h,n=Me(h,["__scopeSelect","onAutoScroll"]),i=ni("SelectScrollButton",r),o=N.useRef(null),l=tu(r),d=N.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return N.useEffect(()=>()=>d(),[d]),Xr(()=>{var p;const f=l().find(x=>x.ref.current===document.activeElement);(p=f==null?void 0:f.ref.current)==null||p.scrollIntoView({block:"nearest"})},[l]),e.jsx(Vt.div,Q(E({"aria-hidden":!0},n),{ref:t,style:E({flexShrink:0},n.style),onPointerDown:Rt(n.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(a,50))}),onPointerMove:Rt(n.onPointerMove,()=>{var f;(f=i.onItemLeave)==null||f.call(i),o.current===null&&(o.current=window.setInterval(a,50))}),onPointerLeave:Rt(n.onPointerLeave,()=>{d()})}))}),ON="SelectSeparator",L0=N.forwardRef((s,t)=>{const n=s,{__scopeSelect:r}=n,a=Me(n,["__scopeSelect"]);return e.jsx(Vt.div,Q(E({"aria-hidden":!0},a),{ref:t}))});L0.displayName=ON;var rm="SelectArrow",FN=N.forwardRef((s,t)=>{const l=s,{__scopeSelect:r}=l,a=Me(l,["__scopeSelect"]),n=su(r),i=ai(rm,r),o=ni(rm,r);return i.open&&o.position==="popper"?e.jsx(ug,Q(E(E({},n),a),{ref:t})):null});FN.displayName=rm;var BN="SelectBubbleInput",I0=N.forwardRef((n,a)=>{var i=n,{__scopeSelect:s,value:t}=i,r=Me(i,["__scopeSelect","value"]);const o=N.useRef(null),l=As(a,o),d=Fm(t);return N.useEffect(()=>{const h=o.current;if(!h)return;const f=window.HTMLSelectElement.prototype,x=Object.getOwnPropertyDescriptor(f,"value").set;if(d!==t&&x){const u=new Event("change",{bubbles:!0});x.call(h,t),h.dispatchEvent(u)}},[d,t]),e.jsx(Vt.select,Q(E({},r),{style:E(E({},Lg),r.style),ref:l,defaultValue:t}))});I0.displayName=BN;function D0(s){return s===""||s===void 0}function T0(s){const t=Jr(s),r=N.useRef(""),a=N.useRef(0),n=N.useCallback(o=>{const l=r.current+o;t(l),function d(h){r.current=h,window.clearTimeout(a.current),h!==""&&(a.current=window.setTimeout(()=>d(""),1e3))}(l)},[t]),i=N.useCallback(()=>{r.current="",window.clearTimeout(a.current)},[]);return N.useEffect(()=>()=>window.clearTimeout(a.current),[]),[r,n,i]}function M0(s,t,r){const n=t.length>1&&Array.from(t).every(h=>h===t[0])?t[0]:t,i=r?s.indexOf(r):-1;let o=UN(s,Math.max(i,0));n.length===1&&(o=o.filter(h=>h!==r));const d=o.find(h=>h.textValue.toLowerCase().startsWith(n.toLowerCase()));return d!==r?d:void 0}function UN(s,t){return s.map((r,a)=>s[(t+a)%s.length])}var qN=o0,E0=c0,zN=u0,$N=h0,WN=m0,R0=f0,HN=v0,O0=w0,F0=N0,VN=S0,YN=C0,B0=A0,U0=P0,q0=L0;const bs=qN,ws=zN,fs=N.forwardRef((n,a)=>{var i=n,{className:s,children:t}=i,r=Me(i,["className","children"]);return e.jsxs(E0,Q(E({ref:a,className:Ce("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 cyrus-ui",s)},r),{children:[t,e.jsx($N,{asChild:!0,children:e.jsx(Wo,{className:"h-4 w-4 opacity-50"})})]}))});fs.displayName=E0.displayName;const z0=N.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Me(n,["className"]);return e.jsx(B0,Q(E({ref:r,className:Ce("flex cursor-default items-center justify-center py-1",s)},t),{children:e.jsx(_y,{className:"h-4 w-4"})}))});z0.displayName=B0.displayName;const $0=N.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Me(n,["className"]);return e.jsx(U0,Q(E({ref:r,className:Ce("flex cursor-default items-center justify-center py-1",s)},t),{children:e.jsx(Wo,{className:"h-4 w-4"})}))});$0.displayName=U0.displayName;const ps=N.forwardRef((i,n)=>{var o=i,{className:s,children:t,position:r="popper"}=o,a=Me(o,["className","children","position"]);return e.jsx(WN,{children:e.jsxs(R0,Q(E({ref:n,className:Ce("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:r},a),{children:[e.jsx(z0,{}),e.jsx(HN,{className:Ce("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),e.jsx($0,{})]}))})});ps.displayName=R0.displayName;const GN=N.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Me(n,["className"]);return e.jsx(O0,E({ref:r,className:Ce("py-1.5 pl-8 pr-2 text-sm font-semibold",s)},t))});GN.displayName=O0.displayName;const tt=N.forwardRef((n,a)=>{var i=n,{className:s,children:t}=i,r=Me(i,["className","children"]);return e.jsxs(F0,Q(E({ref:a,className:Ce("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s)},r),{children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(YN,{children:e.jsx(la,{className:"h-4 w-4"})})}),e.jsx(VN,{children:t})]}))});tt.displayName=F0.displayName;const JN=N.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Me(n,["className"]);return e.jsx(q0,E({ref:r,className:Ce("-mx-1 my-1 h-px bg-muted",s)},t))});JN.displayName=q0.displayName;const Yo=$v,Go=Wv,KN=Hv,W0=N.forwardRef((i,n)=>{var o=i,{className:s,inset:t,children:r}=o,a=Me(o,["className","inset","children"]);return e.jsxs(mg,Q(E({ref:n,className:Ce("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",s)},a),{children:[r,e.jsx(Wa,{className:"ml-auto h-4 w-4"})]}))});W0.displayName=mg.displayName;const H0=N.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Me(n,["className"]);return e.jsx(fg,E({ref:r,className:Ce("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s)},t))});H0.displayName=fg.displayName;const Fi=N.forwardRef((n,a)=>{var i=n,{className:s,sideOffset:t=4}=i,r=Me(i,["className","sideOffset"]);return e.jsx(zv,{children:e.jsx(pg,E({ref:a,sideOffset:t,className:Ce("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s)},r))})});Fi.displayName=pg.displayName;const as=N.forwardRef((n,a)=>{var i=n,{className:s,inset:t}=i,r=Me(i,["className","inset"]);return e.jsx(gg,E({ref:a,className:Ce("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",s)},r))});as.displayName=gg.displayName;const XN=N.forwardRef((i,n)=>{var o=i,{className:s,children:t,checked:r}=o,a=Me(o,["className","children","checked"]);return e.jsxs(xg,Q(E({ref:n,className:Ce("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:r},a),{children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(vg,{children:e.jsx(la,{className:"h-4 w-4"})})}),t]}))});XN.displayName=xg.displayName;const QN=N.forwardRef((n,a)=>{var i=n,{className:s,children:t}=i,r=Me(i,["className","children"]);return e.jsxs(yg,Q(E({ref:a,className:Ce("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s)},r),{children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(vg,{children:e.jsx(Wl,{className:"h-2 w-2 fill-current"})})}),t]}))});QN.displayName=yg.displayName;const ZN=N.forwardRef((n,a)=>{var i=n,{className:s,inset:t}=i,r=Me(i,["className","inset"]);return e.jsx(bg,E({ref:a,className:Ce("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",s)},r))});ZN.displayName=bg.displayName;const am=N.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Me(n,["className"]);return e.jsx(wg,E({ref:r,className:Ce("-mx-1 my-1 h-px bg-muted",s)},t))});am.displayName=wg.displayName;const Jo=Vv,Bi=N.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Me(n,["className"]);return e.jsx(jg,E({ref:r,className:Ce("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s)},t))});Bi.displayName=jg.displayName;const yr=N.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Me(n,["className"]);return e.jsx(Ng,E({ref:r,className:Ce("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s)},t))});yr.displayName=Ng.displayName;const br=N.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Me(n,["className"]);return e.jsx(Sg,E({ref:r,className:Ce("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s)},t))});br.displayName=Sg.displayName;const Ts=Cg,ru=Ag,e4=kg,V0=N.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Me(n,["className"]);return e.jsx(vm,E({ref:r,className:Ce("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s)},t))});V0.displayName=vm.displayName;const Is=N.forwardRef((n,a)=>{var i=n,{className:s,children:t}=i,r=Me(i,["className","children"]);return e.jsxs(e4,{children:[e.jsx(V0,{}),e.jsxs(ym,Q(E({ref:a,className:Ce("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s)},r),{children:[t,e.jsxs(bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(Hs,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]}))]})});Is.displayName=ym.displayName;const Dr=r=>{var a=r,{className:s}=a,t=Me(a,["className"]);return e.jsx("div",E({className:Ce("flex flex-col space-y-1.5 text-center sm:text-left",s)},t))};Dr.displayName="DialogHeader";const Rn=r=>{var a=r,{className:s}=a,t=Me(a,["className"]);return e.jsx("div",E({className:Ce("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s)},t))};Rn.displayName="DialogFooter";const Ks=N.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Me(n,["className"]);return e.jsx(wm,E({ref:r,className:Ce("text-lg font-semibold leading-none tracking-tight",s)},t))});Ks.displayName=wm.displayName;const vi=N.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Me(n,["className"]);return e.jsx(jm,E({ref:r,className:Ce("text-sm text-muted-foreground",s)},t))});vi.displayName=jm.displayName;const t4=s=>{switch(s){case"delivered":return"bg-green-600";case"preview-approved":return"bg-teal-500";case"render-approved":return"bg-green-500";case"waiting-preview-reply":return"bg-yellow-500";case"waiting-render-reply":return"bg-yellow-500";case"preview":return"bg-blue-500";case"rendering":return"bg-pink-600";case"preview-feedback":return"bg-orange-500";default:return"bg-gray-500"}};function Y0({project:s,isCompact:t}){const r=j=>{try{return new Date(j)}catch(v){return null}},a=r(s.startDate)||new Date,n=r(s.endDate)||new Date,i=new Date,o=Math.max(1,ih(n,a)),l=Math.max(0,ih(i,a)),d=Math.min(100,l/o*100),h=i>n&&s.status!=="delivered";R5(i);const f=(s.statusHistory||[]).map(j=>{const v=r(j.date)||a,w=ih(v,a),P=Math.max(0,Math.min(100,w/o*100));return Q(E({},j),{position:P})}),p=Math.max(0,Math.min(100,l/o*100)),x=[],u=Math.ceil(o/7);for(let j=1;j<=Math.min(u,8);j++){const v=j*7/o*100;v<=100&&x.push({week:j,position:v})}const k=j=>{const v=r(j);return v?Nx(v,"MMM d, yyyy (EEEE)"):"Invalid Date"};return e.jsxs("div",{className:"space-y-3 mt-8",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:`progress-fill ${h?"bg-destructive":""}`,style:{width:`${d}%`}})}),!t&&x.map(j=>e.jsx("div",{className:"absolute top-0 h-2 w-px bg-muted-foreground/30 mb-2.5",style:{left:`${j.position}%`},children:e.jsxs("span",{className:"absolute -top-5 left-1/2 -translate-x-1/2 text-xs text-muted-foreground",children:["W",j.week]})},j.week)),l>=0&&l<=o&&e.jsxs("div",{className:"absolute -top-1 -bottom-1 w-0.5 bg-primary-glow",style:{left:`${p}%`},children:[e.jsx("div",{className:"absolute -top-2 left-1/2 -translate-x-1/2 w-2 h-2 bg-primary-glow rounded-full"}),!t&&e.jsx("span",{className:"absolute -top-7 left-1/2 -translate-x-1/2 text-xs font-medium text-primary whitespace-nowrap",children:"Today"})]}),e.jsx(Ti,{children:f.map(j=>e.jsxs(ei,{children:[e.jsx(ti,{asChild:!0,children:e.jsx("div",{className:"absolute -top-2 -bottom-2 w-1 cursor-pointer",style:{left:`${j.position}%`},children:e.jsx("div",{className:`w-3 h-3 rounded-full border-2 border-background absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 hover:scale-110 transition-transform ${t4(j.status)}`})})}),e.jsx(mn,{children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-medium capitalize",children:j.status.replace("-"," ")}),e.jsx("p",{className:"text-xs text-muted-foreground",children:k(j.date)}),j.note&&e.jsx("p",{className:"text-xs mt-1",children:j.note})]})})]},j.id))})]}),e.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground mt-2",children:[e.jsx("span",{children:Wt(s.startDate)}),e.jsxs("span",{className:h&&s.status!=="delivered"?"text-destructive font-medium":"",children:[Wt(s.endDate),h&&s.status!=="delivered"&&" (Overdue)"]})]}),!t&&e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsxs("span",{children:[Math.round(d),"% Passed"]}),e.jsxs("span",{children:[Math.max(0,o-l)," days remaining"]})]})]})}const s4=Vd("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Qe(a){var n=a,{className:s,variant:t}=n,r=Me(n,["className","variant"]);return e.jsx("div",E({className:Ce(s4({variant:t}),s)},r))}function G0({media:s,categoryName:t,onImageClick:r,onCommentClick:a}){const[n,i]=N.useState(0);if(s.length===0)return e.jsx("div",{className:"h-48 bg-muted/50 rounded-lg flex items-center justify-center border-2 border-dashed",children:e.jsxs("div",{className:"text-center text-muted-foreground",children:[e.jsx(Yn,{className:"h-8 w-8 mx-auto mb-2"}),e.jsx("p",{className:"text-sm font-semibold",children:"No media in this category"})]})});const o=f=>{f.stopPropagation(),i(p=>p>0?p-1:s.length-1)},l=f=>{f.stopPropagation(),i(p=>p<s.length-1?p+1:0)},d=f=>{f.stopPropagation(),r==null||r(n)},h=f=>{f.stopPropagation(),a==null||a(s[n])};return e.jsxs("div",{className:"relative group w-full h-48 cyrus-image-slider",onClick:f=>f.stopPropagation(),children:[e.jsxs("div",{className:"w-full h-full bg-background rounded-lg overflow-hidden cursor-pointer cyrus-image-container",onClick:d,children:[e.jsx("img",{src:s[n].url,alt:s[n].filename,className:"w-full h-full object-cover transition-transform duration-300 ease-in-out group-hover:scale-105"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 via-black/0 to-black/0 opacity-0 group-hover:opacity-100 transition-opacity"})]}),s.length>1&&e.jsxs(e.Fragment,{children:[e.jsx(le,{variant:"ghost",size:"icon",className:"absolute left-2 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-all duration-300 bg-black/50 hover:bg-black/70 text-white rounded-full h-8 w-8",onClick:o,children:e.jsx(lc,{className:"h-5 w-5"})}),e.jsx(le,{variant:"ghost",size:"icon",className:"absolute right-2 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-all duration-300 bg-black/50 hover:bg-black/70 text-white rounded-full h-8 w-8",onClick:l,children:e.jsx(Wa,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"absolute top-2 left-2 flex items-center gap-2",children:e.jsx(Qe,{className:"text-xs bg-black/60 text-white border-transparent",children:t==="All"?s[n].type:t})}),a&&e.jsxs(le,{variant:"ghost",size:"sm",className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-all duration-300 bg-blue-500/80 hover:bg-blue-600/90 text-white rounded-full h-8 px-3",onClick:h,children:[e.jsx(Nr,{className:"h-3 w-3 mr-1"}),e.jsx("span",{className:"text-xs",children:"Comments"})]}),s.length>1&&e.jsxs("div",{className:"absolute bottom-2 right-2 bg-black/60 text-white rounded-full px-2 py-0.5 text-xs font-mono",children:[n+1," / ",s.length]})]})}function Um(s){const{onClose:t}=s,{toast:r}=Pa(),[a,n]=N.useState(s.initialIndex||0);N.useEffect(()=>{"initialIndex"in s&&s.initialIndex!==void 0&&n(s.initialIndex)},[s]);const i="src"in s&&s.src!==void 0,o=f=>{navigator.clipboard.writeText(f),r({title:"Link copied!",description:"The image link has been copied to your clipboard."})},l=f=>{!i&&s.onDelete&&(s.onDelete(f),r({title:"Media deleted",description:"The media file has been removed from the project."})),t()},d=f=>{i||!s.media||n(f==="prev"?a>0?a-1:s.media.length-1:a<s.media.length-1?a+1:0)};if(i)return e.jsx(Ts,{open:!0,onOpenChange:t,children:e.jsx(Is,{className:"max-w-[95vw] max-h-[95vh] p-0 overflow-hidden",onClick:f=>f.stopPropagation(),children:e.jsxs("div",{className:"relative flex items-center justify-center min-h-[70vh] bg-background/95",children:[e.jsx(le,{variant:"ghost",size:"sm",className:"absolute top-4 right-4 z-10 bg-background/80 hover:bg-background",onClick:f=>{f.stopPropagation(),t()},children:e.jsx(Hs,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex items-center justify-center w-full h-full p-8",children:e.jsx("img",{src:s.src,alt:s.alt,className:"max-w-full max-h-[85vh] object-contain"})})]})})});if(!s.media||s.media.length===0)return null;const h=s.media[a];return e.jsx(Ts,{open:!0,onOpenChange:t,children:e.jsx(Is,{className:"max-w-[95vw] max-h-[95vh] p-0 overflow-hidden",onClick:f=>f.stopPropagation(),children:e.jsxs("div",{className:"relative flex items-center justify-center min-h-[70vh] bg-background/95",children:[e.jsx(le,{variant:"ghost",size:"sm",className:"absolute top-4 right-4 z-10 bg-background/80 hover:bg-background",onClick:f=>{f.stopPropagation(),t()},children:e.jsx(Hs,{className:"h-4 w-4"})}),s.media.length>1&&e.jsxs(e.Fragment,{children:[e.jsx(le,{variant:"ghost",size:"sm",className:"absolute left-4 top-1/2 -translate-y-1/2 z-10 bg-background/80 hover:bg-background",onClick:f=>{f.stopPropagation(),d("prev")},children:e.jsx(lc,{className:"h-4 w-4"})}),e.jsx(le,{variant:"ghost",size:"sm",className:"absolute right-4 top-1/2 -translate-y-1/2 z-10 bg-background/80 hover:bg-background",onClick:f=>{f.stopPropagation(),d("next")},children:e.jsx(Wa,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"flex items-center justify-center w-full h-full p-8",children:e.jsx("img",{src:h.url,alt:h.filename,className:"max-w-full max-h-[85vh] object-contain"})}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-background/80 backdrop-blur-sm p-4 flex justify-between items-center",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs(Qe,{variant:"outline",className:"bg-background/50",children:[a+1," / ",s.media.length]}),e.jsx(Qe,{variant:"secondary",children:h.type})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(le,{variant:"outline",size:"sm",onClick:()=>o(h.url),children:[e.jsx(Hl,{className:"h-4 w-4 mr-2"}),"Copy Link"]}),s.onDelete&&e.jsxs(le,{variant:"destructive",size:"sm",onClick:()=>l(h.id),children:[e.jsx(jr,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})})})}const oa=[{value:"preview",label:"Preview",color:"bg-blue-500",borderColor:"border-blue-500"},{value:"waiting-preview-reply",label:"Waiting for Preview Reply",color:"bg-yellow-500",borderColor:"border-yellow-500"},{value:"preview-feedback",label:"Preview Feedback",color:"bg-orange-500",borderColor:"border-orange-500"},{value:"preview-approved",label:"Preview Approved",color:"bg-teal-500",borderColor:"border-teal-500"},{value:"rendering",label:"Rendering",color:"bg-pink-600",borderColor:"border-pink-600"},{value:"waiting-render-reply",label:"Waiting for Render Reply",color:"bg-yellow-500",borderColor:"border-yellow-500"},{value:"render-approved",label:"Render Approved",color:"bg-green-500",borderColor:"border-green-500"},{value:"delivered",label:"Delivered",color:"bg-green-600",borderColor:"border-green-600"}];oa.map(s=>s.value);const pp=s=>{var t,r;return(r=(t=oa.find(a=>a.value===s))==null?void 0:t.color)!=null?r:"bg-gray-500"},Rd=s=>{var t,r;return(r=(t=oa.find(a=>a.value===s))==null?void 0:t.borderColor)!=null?r:"border-gray-500"},nm=s=>{switch(s){case"high":return"bg-red-500";case"medium":return"bg-yellow-500";case"low":return"bg-green-500";default:return"bg-gray-500"}};class r4{constructor(){Qs(this,"activities",[]);Qs(this,"listeners",[]);Qs(this,"users",new Map([["current-user",{id:"current-user",name:"Current User",avatar:"CU"}],["user-1",{id:"user-1",name:"John Doe",avatar:"JD"}],["user-2",{id:"user-2",name:"Sarah Chen",avatar:"SC"}],["user-3",{id:"user-3",name:"Mike Johnson",avatar:"MJ"}],["user-4",{id:"user-4",name:"Emma Wilson",avatar:"EW"}],["user-5",{id:"user-5",name:"Alex Turner",avatar:"AT"}]]));Qs(this,"projects",new Map([["project-1",{id:"project-1",name:"Nike Campaign 2024"}],["project-2",{id:"project-2",name:"Apple Store Redesign"}],["project-3",{id:"project-3",name:"Tesla Model S Campaign"}]]));this.seedMockActivities()}seedMockActivities(){const t=[{id:"1",type:"project_created",projectId:"project-1",userId:"user-1",userName:"Sarah Chen",timestamp:"2024-01-15T10:30:00Z",details:{projectName:"Nike Campaign 2024"}},{id:"2",type:"moodboard_created",projectId:"project-1",userId:"user-2",userName:"Mike Johnson",timestamp:"2024-01-16T14:20:00Z",details:{projectName:"Nike Campaign 2024",workspaceName:"Brand Exploration"}},{id:"3",type:"whiteboard_created",projectId:"project-1",userId:"user-3",userName:"Emma Wilson",timestamp:"2024-01-17T09:15:00Z",details:{projectName:"Nike Campaign 2024",workspaceName:"Homepage Review"}},{id:"4",type:"comment_added",projectId:"project-1",userId:"user-4",userName:"Alex Turner",timestamp:"2024-01-17T16:45:00Z",details:{projectName:"Nike Campaign 2024",commentText:"Feedback on color palette"}},{id:"5",type:"whiteboard_pin_added",projectId:"project-1",userId:"user-1",userName:"Sarah Chen",timestamp:"2024-01-18T11:30:00Z",details:{projectName:"Nike Campaign 2024",notePreview:"Navigation issue noted"}},{id:"6",type:"workflow_created",projectId:"project-1",userId:"user-2",userName:"Mike Johnson",timestamp:"2024-01-19T13:20:00Z",details:{projectName:"Nike Campaign 2024",workspaceName:"Campaign Launch Process"}},{id:"7",type:"timeline_updated",projectId:"project-1",userId:"user-3",userName:"Emma Wilson",timestamp:"2024-01-20T15:10:00Z",details:{projectName:"Nike Campaign 2024",reason:"Updated delivery milestones"}}];this.activities=t}logActivity(t){let r="Unknown User";if(t.userId==="current-user"||t.userId===localStorage.getItem("userId")){const i=localStorage.getItem("userDisplayName");if(i)r=i;else if(this.users.has(t.userId)){const o=this.users.get(t.userId);r=(o==null?void 0:o.name)||"Unknown User"}}else if(this.users.has(t.userId)){const i=this.users.get(t.userId);r=(i==null?void 0:i.name)||"Unknown User"}let a="";if(t.projectId&&this.projects.has(t.projectId)){const i=this.projects.get(t.projectId);a=(i==null?void 0:i.name)||""}const n={id:Math.random().toString(36).substring(2,15),type:t.type,projectId:t.projectId||"",userId:t.userId,userName:r,timestamp:new Date().toISOString(),details:E({projectName:a},t.metadata)};return t.title&&(t.type.includes("moodboard")||t.type.includes("whiteboard")||t.type.includes("workflow")||t.type.includes("timeline")?n.details.workspaceName=t.title:n.details.reason=t.title),t.description&&(n.details.noteContent=t.description),this.activities.unshift(n),this.activities=this.activities.slice(0,100),this.notifyListeners(),n}getActivities(){return[...this.activities]}getActivitiesForDate(t){const r=t.split("T")[0];return this.activities.filter(a=>a.timestamp?a.timestamp.split("T")[0]===r:!1)}getActivitiesForProject(t){return this.activities.filter(r=>r.projectId===t)}getActivitiesByType(t){return this.activities.filter(r=>r.type===t)}getActivitiesInDateRange(t,r){const a=new Date(t),n=new Date(r);return this.activities.filter(i=>{if(!i.timestamp)return!1;const o=new Date(i.timestamp);return o>=a&&o<=n})}getActivityStats(){const t=this.activities.length,r=new Date().toISOString().split("T")[0],a=this.getActivitiesForDate(r).length,n=this.activities.reduce((i,o)=>(i[o.type]=(i[o.type]||0)+1,i),{});return{total:t,today:a,byType:n,mostActiveProject:this.getMostActiveProject(),mostActiveUser:this.getMostActiveUser()}}getMostActiveProject(){const t=this.activities.reduce((n,i)=>(i.projectId&&(n[i.projectId]=(n[i.projectId]||0)+1),n),{}),r=Object.keys(t).reduce((n,i)=>t[n]>t[i]?n:i);if(!r)return null;const a=this.projects.get(r);return a?{id:r,name:a.name,count:t[r]}:null}getMostActiveUser(){const t=this.activities.reduce((n,i)=>(n[i.userId]=(n[i.userId]||0)+1,n),{}),r=Object.keys(t).reduce((n,i)=>t[n]>t[i]?n:i);if(!r)return null;const a=this.users.get(r);return a?{id:r,name:a.name,count:t[r]}:null}subscribe(t){return this.listeners.push(t),()=>{const r=this.listeners.indexOf(t);r>-1&&this.listeners.splice(r,1)}}notifyListeners(){this.listeners.forEach(t=>t([...this.activities]))}logProjectCreated(t,r,a){return this.logActivity({type:"project_created",title:r,projectId:t,userId:a,metadata:{projectId:t}})}logMoodboardCreated(t,r,a,n){return this.logActivity({type:"moodboard_created",title:r,projectId:a,userId:n,metadata:{moodboardId:t}})}logWhiteboardCreated(t,r,a,n){return this.logActivity({type:"whiteboard_created",title:r,projectId:a,userId:n,metadata:{whiteboardId:t}})}logCommentAdded(t,r,a,n,i){return this.logActivity({type:"comment_added",title:`Comment on ${r}`,description:t.substring(0,100)+(t.length>100?"...":""),projectId:n,userId:i,metadata:{targetType:r,targetId:a,content:t}})}logPinAdded(t,r,a,n){return this.logActivity({type:"pin_added",title:"Pin added to image",description:t.substring(0,100)+(t.length>100?"...":""),projectId:a,userId:n,metadata:{imageId:r,pinNote:t}})}logStatusChanged(t,r,a,n,i,o){return this.logActivity({type:"status_changed",title:`${t} status changed`,description:`Changed from ${a} to ${n}`,projectId:i,userId:o,metadata:{itemType:t,itemId:r,oldStatus:a,newStatus:n}})}logWhiteboardUpdated(t,r,a,n,i){return this.logActivity({type:"whiteboard_updated",title:`Whiteboard "${r}" updated`,description:i?`Changes: ${i}`:void 0,projectId:a,userId:n,metadata:{whiteboardId:t,whiteboardName:r}})}logWhiteboardDeleted(t,r,a,n){return this.logActivity({type:"whiteboard_deleted",title:`Whiteboard "${r}" deleted`,projectId:a,userId:n,metadata:{whiteboardId:t,whiteboardName:r}})}logWhiteboardPinAdded(t,r,a,n,i){return this.logActivity({type:"whiteboard_pin_added",title:`Pin added to whiteboard "${r}"`,description:a.length>50?`${a.substring(0,50)}...`:a,projectId:n,userId:i,metadata:{whiteboardId:t,whiteboardName:r,pinContent:a}})}logWhiteboardPinResolved(t,r,a,n,i){return this.logActivity({type:"whiteboard_pin_resolved",title:`Pin resolved on whiteboard "${r}"`,projectId:n,userId:i,metadata:{whiteboardId:t,whiteboardName:r,pinId:a}})}logMoodboardUpdated(t,r,a,n,i){return this.logActivity({type:"moodboard_updated",title:`Moodboard "${r}" updated`,description:i?`Changes: ${i}`:void 0,projectId:a,userId:n,metadata:{moodboardId:t,moodboardName:r}})}logMoodboardDeleted(t,r,a,n){return this.logActivity({type:"moodboard_deleted",title:`Moodboard "${r}" deleted`,projectId:a,userId:n,metadata:{moodboardId:t,moodboardName:r}})}logMoodboardElementAdded(t,r,a,n,i){return this.logActivity({type:"moodboard_element_added",title:`${a} added to moodboard "${r}"`,projectId:n,userId:i,metadata:{moodboardId:t,moodboardName:r,elementType:a}})}logWorkflowUpdated(t,r,a,n,i){return this.logActivity({type:"workflow_updated",title:`Workflow "${r}" updated`,description:i?`Changes: ${i}`:void 0,projectId:a,userId:n,metadata:{workflowId:t,workflowName:r}})}logWorkflowDeleted(t,r,a,n){return this.logActivity({type:"workflow_deleted",title:`Workflow "${r}" deleted`,projectId:a,userId:n,metadata:{workflowId:t,workflowName:r}})}logWorkflowStageCompleted(t,r,a,n,i,o){return this.logActivity({type:"workflow_stage_completed",title:`Stage "${n}" completed in workflow "${r}"`,projectId:i,userId:o,metadata:{workflowId:t,workflowName:r,stageId:a,stageName:n}})}logTimelineUpdated(t,r,a,n,i){return this.logActivity({type:"timeline_updated",title:`Timeline "${r}" updated`,description:i?`Changes: ${i}`:void 0,projectId:a,userId:n,metadata:{timelineId:t,timelineName:r}})}logTimelineDeleted(t,r,a,n){return this.logActivity({type:"timeline_deleted",title:`Timeline "${r}" deleted`,projectId:a,userId:n,metadata:{timelineId:t,timelineName:r}})}logTimelineMilestoneReached(t,r,a,n,i,o){return this.logActivity({type:"timeline_milestone_reached",title:`Milestone "${n}" reached in timeline "${r}"`,projectId:i,userId:o,metadata:{timelineId:t,timelineName:r,milestoneId:a,milestoneName:n}})}clearActivities(){this.activities=[],this.notifyListeners()}exportActivities(){return JSON.stringify(this.activities,null,2)}importActivities(t){try{const r=JSON.parse(t);this.activities=r,this.notifyListeners()}catch(r){}}getActivitiesByUser(t){return this.activities.filter(r=>r.userId===t)}}const ds=new r4,J0=[],a4=s=>{var t,r;return Q(E({},s),{name:((t=s.name)==null?void 0:t.trim())||"Untitled Project",client:((r=s.client)==null?void 0:r.trim())||"Unknown Client",status:s.status||"planning",startDate:s.startDate?new Date(s.startDate).toISOString():new Date().toISOString(),endDate:s.endDate?new Date(s.endDate).toISOString():null})};J0.map(a4);class n4{constructor(){Qs(this,"projects",[]);this.projects=[...J0]}getProjects(){return xe(this,null,function*(){return yield new Promise(t=>setTimeout(t,200)),[...this.projects]})}getProject(t){return xe(this,null,function*(){yield new Promise(a=>setTimeout(a,100));const r=this.projects.find(a=>a.id===t);if(!r)throw new Error(`Project with ID ${t} not found`);return E({},r)})}createProject(t){return xe(this,null,function*(){if(!t||typeof t!="object"||!t.name||!t.client)throw new Error("Invalid project data");const r={id:`project-${Date.now()}`,name:t.name,client:t.client,projectManager:t.projectManager||"Unassigned",artists:t.artists||[],brief:t.brief||"",externalLinks:t.externalLinks||[],startDate:t.startDate||new Date().toISOString(),endDate:t.endDate||new Date(Date.now()+30*24*60*60*1e3).toISOString(),priority:t.priority||"medium",status:t.status||"Planning",statusHistory:[...t.statusHistory||[],{id:`status-${Date.now()}`,status:t.status||"Planning",date:new Date().toISOString(),note:"Project created"}],media:t.media||[],videoUrl:t.videoUrl,isArchived:t.isArchived||!1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),notes:t.notes||[]};this.projects.push(r);const a=JSON.parse(localStorage.getItem("activities")||"[]"),n=localStorage.getItem("userId")||"current-user",i=localStorage.getItem("userDisplayName")||"Current User",o={id:`activity-${Date.now()}-${Math.random()}`,type:"project_created",title:r.name,description:`Project "${r.name}" was created for ${r.client}`,projectId:r.id,projectName:r.name,userId:n,userName:i,date:new Date().toISOString(),metadata:{projectId:r.id,projectName:r.name,client:r.client}};return a.unshift(o),localStorage.setItem("activities",JSON.stringify(a.slice(0,1e3))),yield new Promise(l=>setTimeout(l,300)),E({},r)})}updateProject(t,r){return xe(this,null,function*(){const a=this.projects.findIndex(l=>l.id===t);if(a===-1)throw new Error(`Project with ID ${t} not found`);const n=this.projects[a],i=[...n.statusHistory];r.status&&r.status!==n.status&&i.push({id:`status-${Date.now()}`,status:r.status,date:new Date().toISOString(),note:r.status==="Completed"?"Project completed":`Status changed to ${r.status}`});const o=Q(E(E({},n),r),{statusHistory:i,updatedAt:new Date().toISOString()});return this.projects[a]=o,yield new Promise(l=>setTimeout(l,200)),yield this.syncProjectWithWorkspaces(t),E({},o)})}deleteProject(t){return xe(this,null,function*(){const r=this.projects.findIndex(a=>a.id===t);if(r===-1)throw new Error(`Project with ID ${t} not found`);this.projects.splice(r,1),yield new Promise(a=>setTimeout(a,300))})}addProjectMedia(t,r){return xe(this,null,function*(){const a=yield this.getProject(t);return a.media=[...a.media,r],a.updatedAt=new Date().toISOString(),yield this.updateProject(t,a),yield this.syncProjectWithWorkspaces(t),a})}updateProjectMedia(t,r,a){return xe(this,null,function*(){const i=(yield this.getProject(t)).media.map(l=>l.id===r?E(E({},l),a):l);return yield this.updateProject(t,{media:i,updatedAt:new Date().toISOString()})})}deleteProjectMedia(t,r){return xe(this,null,function*(){const n=(yield this.getProject(t)).media.filter(o=>o.id!==r);return yield this.updateProject(t,{media:n,updatedAt:new Date().toISOString()})})}syncProjectWithWorkspaces(t){return xe(this,null,function*(){try{yield Nt.syncProjectChanges(t)}catch(r){}})}}const vr=new n4,K0=()=>!(typeof window!="undefined"&&window.pulse2),X0=()=>typeof window!="undefined"&&window.pulse2?window.pulse2:{apiUrl:"/wp-json/pulse2/v1",mediaUrl:"/wp-json/wp/v2/media",nonce:""},It=(r,...a)=>xe(void 0,[r,...a],function*(s,t={}){const n=X0(),i=`${n.apiUrl}${s}`,o={"Content-Type":"application/json"};n.nonce&&(o["X-WP-Nonce"]=n.nonce);const l=yield fetch(i,Q(E({},t),{headers:E(E({},o),t.headers)}));if(!l.ok)throw new Error(`API request failed: ${l.status} ${l.statusText}`);return l.json()}),i4=(s,t,r)=>xe(void 0,null,function*(){const a=X0(),n=new FormData;n.append("file",r);const i=yield fetch(`${a.apiUrl}/workspaces/${s}/images?category_id=${t}`,{method:"POST",headers:{"X-WP-Nonce":a.nonce||""},body:n});if(!i.ok)throw new Error(`Upload failed: ${i.status} ${i.statusText}`);return i.json()});class o4{constructor(){Qs(this,"workspaces",[]);Qs(this,"workspacesByProject",new Map);Qs(this,"_projectSyncMap")}getWorkspacesByProject(t){return xe(this,null,function*(){try{return yield It(`/workspaces/project/${t}`)}catch(r){throw r}})}getExistingWorkspace(t,r){return xe(this,null,function*(){if(this.workspacesByProject.has(t)){const a=this.workspacesByProject.get(t);if(a&&a.has(r)){const n=a.get(r);if(n)try{const i=yield vr.getProject(n);if(i)return i}catch(i){}}}try{const a=this.workspaces.filter(n=>n.projectId===t&&n.type===r);if(a.length>0)return this.cacheWorkspace(t,r,a[0].id),a[0]}catch(a){}return null})}cacheWorkspace(t,r,a){var n;this.workspacesByProject.has(t)||this.workspacesByProject.set(t,new Map),(n=this.workspacesByProject.get(t))==null||n.set(r,a)}createWorkspace(t){return xe(this,null,function*(){try{const r=yield It("/workspaces",{method:"POST",body:JSON.stringify(t)});return yield ds.logActivity({type:`${t.type}_created`,projectId:t.projectId,userId:"current-user",userName:"Current User",details:{workspaceId:r.id,workspaceName:r.name,workspaceType:r.type}}),r}catch(r){throw r}})}updateWorkspace(t,r){return xe(this,null,function*(){try{return yield It(`/workspaces/${t}`,{method:"PUT",body:JSON.stringify(r)})}catch(a){throw a}})}deleteWorkspace(t){return xe(this,null,function*(){try{const r=this.workspaces.findIndex(n=>n.id===t);if(r===-1)throw new Error(`Workspace with ID ${t} not found`);const a=this.workspaces[r];if(this.workspaces.splice(r,1),a.projectId&&this.workspacesByProject.has(a.projectId)){const n=this.workspacesByProject.get(a.projectId);n&&n.has(a.type)&&(n.delete(a.type),n.size===0&&this.workspacesByProject.delete(a.projectId))}ds.logActivity({type:"project_updated",title:`${a.type} deleted`,description:`Deleted ${a.type}: ${a.name}`,projectId:a.projectId,userId:"current-user",metadata:{workspaceId:t,workspaceName:a.name}})}catch(r){throw r}})}getWorkspace(t){return xe(this,null,function*(){try{return yield It(`/workspaces/${t}`)}catch(r){throw r}})}getWorkspaceCategories(t){return xe(this,null,function*(){try{return yield It(`/workspaces/${t}/categories`)}catch(r){throw r}})}createWorkspaceCategory(t,r){return xe(this,null,function*(){try{const a=yield It(`/workspaces/${t}/categories`,{method:"POST",body:JSON.stringify(r)});return yield ds.logActivity({type:"whiteboard_category_created",projectId:"",userId:"current-user",userName:"Current User",details:{workspaceId:t,categoryName:r.name}}),a}catch(a){throw a}})}getWorkspaceImages(t){return xe(this,null,function*(){try{return yield It(`/workspaces/${t}/images`)}catch(r){throw r}})}uploadWorkspaceImage(t,r,a){return xe(this,null,function*(){try{return yield i4(t,r,a)}catch(n){throw n}})}getImagePins(t){return xe(this,null,function*(){try{return yield It(`/workspace-images/${t}/pins`)}catch(r){throw r}})}createImagePin(t,r){return xe(this,null,function*(){try{return yield It(`/workspace-images/${t}/pins`,{method:"POST",body:JSON.stringify(r)})}catch(a){throw a}})}updatePin(t,r){return xe(this,null,function*(){try{yield It(`/workspace-pins/${t}`,{method:"PUT",body:JSON.stringify(r)})}catch(a){throw a}})}deletePin(t){return xe(this,null,function*(){try{yield It(`/workspace-pins/${t}`,{method:"DELETE"})}catch(r){throw r}})}getWorkspaceComments(t){return xe(this,null,function*(){try{return yield It(`/workspaces/${t}/comments`)}catch(r){throw r}})}createWorkspaceComment(t,r){return xe(this,null,function*(){try{return yield It(`/workspaces/${t}/comments`,{method:"POST",body:JSON.stringify(r)})}catch(a){throw a}})}getWorkspaceActivities(t){return xe(this,null,function*(){try{return yield It(`/workspace-activities/project/${t}`)}catch(r){throw r}})}getMoodboards(t){return xe(this,null,function*(){return(yield this.getWorkspacesByProject(t)).filter(a=>a.type==="moodboard")})}createMoodboard(t){return xe(this,null,function*(){return this.createWorkspace(Q(E({},t),{type:"moodboard"}))})}updateMoodboard(t,r){return xe(this,null,function*(){return this.updateWorkspace(t,r)})}deleteMoodboard(t){return xe(this,null,function*(){return this.deleteWorkspace(t)})}addMoodboardElement(t,r){return xe(this,null,function*(){try{if(r.type==="image"&&r.content.file){const a=yield this.uploadWorkspaceImage(t,"",r.content.file);return Q(E({id:`element-${Date.now()}`},r),{content:Q(E({},r.content),{filename:r.content.file.name,alt:r.content.file.name})})}throw new Error("Element type not yet implemented")}catch(a){throw a}})}getWhiteboards(t){return xe(this,null,function*(){return(yield this.getWorkspacesByProject(t)).filter(a=>a.type==="whiteboard")})}createWhiteboard(t){return xe(this,null,function*(){return this.createWorkspace(Q(E({},t),{type:"whiteboard"}))})}updateWhiteboard(t,r){return xe(this,null,function*(){return this.updateWorkspace(t,r)})}deleteWhiteboard(t){return xe(this,null,function*(){return this.deleteWorkspace(t)})}getWorkflows(t){return xe(this,null,function*(){return(yield this.getWorkspacesByProject(t)).filter(a=>a.type==="workflow")})}createWorkflow(t){return xe(this,null,function*(){return this.createWorkspace(Q(E({},t),{type:"workflow"}))})}getWorkflowStages(t){return xe(this,null,function*(){try{return yield It(`/workspaces/${t}/stages`)}catch(r){throw r}})}createWorkflowStage(t,r){return xe(this,null,function*(){try{return yield It(`/workspaces/${t}/stages`,{method:"POST",body:JSON.stringify(r)})}catch(a){const n=Q(E({id:`stage-${Date.now()}`,workspaceId:t},r),{checklistItems:r.checklistItems||[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()});try{const i=this.workspaces.find(o=>o.id===t);ds.logActivity({type:"workflow_updated",title:`New workflow stage created: ${n.name}`,description:`Added stage "${n.name}" to workflow`,projectId:i==null?void 0:i.projectId,userId:"current-user",metadata:{workspaceId:t,stageId:n.id,stageName:n.name,action:"stage_created"}})}catch(i){}return n}})}updateWorkflowStage(t,r){return xe(this,null,function*(){try{yield It(`/workflow-stages/${t}`,{method:"PUT",body:JSON.stringify(r)})}catch(a){throw a}})}completeWorkflowStage(t){return xe(this,null,function*(){var r;try{yield It(`/workflow-stages/${t}/complete`,{method:"POST"})}catch(a){try{let n="Unknown Stage",i="",o="";for(const l of this.workspaces)if(l.type==="workflow"){const h=(r=l.stages)==null?void 0:r.find(f=>f.id===t);if(h){n=h.name,i=l.id,o=l.projectId;break}}ds.logActivity({type:"workflow_updated",title:`Workflow stage completed: ${n}`,description:`Marked stage "${n}" as completed`,projectId:o,userId:"current-user",metadata:{workspaceId:i,stageId:t,stageName:n,action:"stage_completed"}})}catch(n){}}})}deleteWorkflowStage(t){return xe(this,null,function*(){try{yield It(`/workflow-stages/${t}`,{method:"DELETE"})}catch(r){throw r}})}getStageChecklistItems(t){return xe(this,null,function*(){try{return yield It(`/workflow-stages/${t}/checklist`)}catch(r){throw r}})}createChecklistItem(t,r){return xe(this,null,function*(){try{return yield It(`/workflow-stages/${t}/checklist`,{method:"POST",body:JSON.stringify(r)})}catch(a){throw a}})}updateChecklistItem(t,r){return xe(this,null,function*(){try{yield It(`/workflow-checklist/${t}`,{method:"PUT",body:JSON.stringify(r)})}catch(a){throw a}})}deleteChecklistItem(t){return xe(this,null,function*(){try{yield It(`/workflow-checklist/${t}`,{method:"DELETE"})}catch(r){throw r}})}getWorkflowApprovals(){return xe(this,arguments,function*(t={}){try{const r=new URLSearchParams;t.workspaceId&&r.append("workspace_id",t.workspaceId),t.stageId&&r.append("stage_id",t.stageId),t.status&&r.append("status",t.status);const a=`/workflow-approvals${r.toString()?"?"+r.toString():""}`;return yield It(a)}catch(r){throw r}})}createWorkflowApproval(t){return xe(this,null,function*(){try{return yield It("/workflow-approvals",{method:"POST",body:JSON.stringify(t)})}catch(r){throw r}})}updateWorkflowApproval(t,r){return xe(this,null,function*(){try{yield It(`/workflow-approvals/${t}`,{method:"PUT",body:JSON.stringify(r)})}catch(a){throw a}})}createStageDependency(t,r,a){return xe(this,null,function*(){try{yield It(`/workspaces/${t}/stage-dependencies`,{method:"POST",body:JSON.stringify({fromStageId:r,toStageId:a})})}catch(n){throw n}})}deleteStageDependency(t,r,a){return xe(this,null,function*(){try{yield It(`/workspaces/${t}/stage-dependencies`,{method:"DELETE",body:JSON.stringify({fromStageId:r,toStageId:a})})}catch(n){throw n}})}bulkUpdateStages(t){return xe(this,null,function*(){try{yield It("/workflow-stages/bulk-update",{method:"PUT",body:JSON.stringify({stages:t})})}catch(r){throw r}})}bulkAssignStages(t,r){return xe(this,null,function*(){try{yield It("/workflow-stages/bulk-assign",{method:"POST",body:JSON.stringify({stageIds:t,assigneeIds:r})})}catch(a){throw a}})}getWorkflowTemplates(t){return xe(this,null,function*(){try{const r=t?`?category=${t}`:"";return yield It(`/workflow-templates${r}`)}catch(r){return this.getMockWorkflowTemplates()}})}createWorkflowTemplate(t){return xe(this,null,function*(){try{return yield It("/workflow-templates",{method:"POST",body:JSON.stringify(t)})}catch(r){throw r}})}createWorkflowFromTemplate(t,r){return xe(this,null,function*(){try{return yield It(`/workflow-templates/${t}/create-workflow`,{method:"POST",body:JSON.stringify(r)})}catch(a){throw a}})}getWorkflowMetrics(t){return xe(this,null,function*(){try{return yield It(`/workspaces/${t}/metrics`)}catch(r){return this.getMockWorkflowMetrics(t)}})}validateWorkflowTransition(t,r){return xe(this,null,function*(){try{return yield It(`/workflow-stages/${t}/validate-transition`,{method:"POST",body:JSON.stringify({targetStatus:r})})}catch(a){return{valid:!0,errors:[]}}})}detectDependencyCycles(t){return xe(this,null,function*(){try{return yield It(`/workspaces/${t}/dependency-cycles`)}catch(r){return{hasCycles:!1,cycles:[]}}})}getMockWorkflowTemplates(){return[{id:"template-1",name:"Design Review Workflow",description:"Standard design review process with client feedback",category:"design",stages:[{id:"stage-1",name:"Initial Design",description:"Create initial design concepts",order:0,isRequired:!0,estimatedHours:8,checklistTemplate:[],requiresApproval:!1},{id:"stage-2",name:"Internal Review",description:"Team review and feedback",order:1,isRequired:!0,estimatedHours:4,checklistTemplate:[],requiresApproval:!0},{id:"stage-3",name:"Client Presentation",description:"Present to client for approval",order:2,isRequired:!0,estimatedHours:2,checklistTemplate:[],requiresApproval:!0}],isPublic:!0,createdBy:"1",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),usageCount:15}]}getMockWorkflowMetrics(t){return{id:`metrics-${t}`,workspaceId:t,totalStages:5,completedStages:2,averageStageCompletionTime:16.5,bottleneckStages:["stage-2","stage-4"],teamEfficiency:85.5,onTimeDelivery:78.2,totalEstimatedHours:40,totalActualHours:42.5,lastUpdated:new Date().toISOString()}}getTimelines(t){return xe(this,null,function*(){return(yield this.getWorkspacesByProject(t)).filter(a=>a.type==="timeline")})}createTimeline(t){return xe(this,null,function*(){return this.createWorkspace(Q(E({},t),{type:"timeline"}))})}getTimelineTasks(t){return xe(this,null,function*(){try{return yield It(`/workspaces/${t}/timeline-tasks`)}catch(r){throw r}})}createTimelineTask(t,r){return xe(this,null,function*(){try{return yield It(`/workspaces/${t}/timeline-tasks`,{method:"POST",body:JSON.stringify(r)})}catch(a){throw a}})}updateTimelineTask(t,r){return xe(this,null,function*(){try{yield It(`/timeline-tasks/${t}`,{method:"PUT",body:JSON.stringify(r)})}catch(a){throw a}})}deleteTimelineTask(t){return xe(this,null,function*(){try{yield It(`/timeline-tasks/${t}`,{method:"DELETE"})}catch(r){throw r}})}getTimelineAssignments(){return xe(this,arguments,function*(t={}){try{const r=new URLSearchParams;t.taskId&&r.append("task_id",t.taskId),t.userId&&r.append("user_id",t.userId);const a=`/timeline-assignments${r.toString()?"?"+r.toString():""}`;return yield It(a)}catch(r){throw r}})}createTimelineAssignment(t){return xe(this,null,function*(){try{return yield It("/timeline-assignments",{method:"POST",body:JSON.stringify(t)})}catch(r){throw r}})}getTimelineMilestones(t){return xe(this,null,function*(){try{return yield It(`/workspaces/${t}/milestones`)}catch(r){throw r}})}createTimelineMilestone(t,r){return xe(this,null,function*(){try{return yield It(`/workspaces/${t}/milestones`,{method:"POST",body:JSON.stringify(r)})}catch(a){throw a}})}getTimelineDependencies(t){return xe(this,null,function*(){try{const r=new URLSearchParams;t&&r.append("workspace_id",t);const a=`/timeline-dependencies${r.toString()?"?"+r.toString():""}`;return yield It(a)}catch(r){throw r}})}createTimelineDependency(t){return xe(this,null,function*(){try{return yield It("/timeline-dependencies",{method:"POST",body:JSON.stringify(t)})}catch(r){throw r}})}createWorkspaceForProject(t,r){return xe(this,null,function*(){var p;const a=yield this.getExistingWorkspace(t,r);if(a)return{workspace:a,isNew:!1,message:`Existing ${r} found for this project`};let n="Project",i=[],o=[],l={};try{const x=yield vr.getProject(t);n=x.name||"Project",x.media&&Array.isArray(x.media)&&(l=x.media.reduce((u,k)=>(u[k.type]||(u[k.type]=[]),u[k.type].push(k),u),{}),i=x.media.map(u=>({id:u.id,type:"image",url:u.url,filename:u.filename,category:u.type}))),x.externalLinks&&Array.isArray(x.externalLinks)&&(o=x.externalLinks.map(u=>({id:u.id,type:"link",url:u.url,title:u.name})))}catch(x){}const d=localStorage.getItem("userId")||"current-user";localStorage.getItem("userDisplayName");const h={id:`${r}-${Date.now()}`,projectId:t,type:r,name:`${n} ${r.charAt(0).toUpperCase()+r.slice(1)}`,createdBy:d,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),isArchived:!1,collaborators:[d],settings:{isPublic:!1,allowComments:!0,allowEditing:!0,autoSave:!0}};if(r==="moodboard")h.images=i,h.links=o,h.description=`Moodboard for ${n}`,h.tags=["project-moodboard"],i.length>0&&(h.canvas={width:1920,height:1080,background:"#f5f5f5",elements:i.slice(0,5).map((x,u)=>({id:`element-${Date.now()}-${u}`,type:"image",position:{x:100+u*50,y:100+u*50,z:u},size:{width:300,height:200},content:{url:x.url,filename:x.filename,name:x.filename},annotations:[],createdBy:d,createdAt:new Date().toISOString()}))});else if(r==="whiteboard"){h.description=`Whiteboard for ${n}`,h.tags=["project-whiteboard"],h.images=i;const x=[],u={"Final Render":"#3b82f6","Clay Render":"#10b981","Client Reference":"#8b5cf6",Concept:"#f59e0b",Other:"#6b7280"},k=Date.now();Object.entries(l).forEach(([j,v],w)=>{const P=`cat-${k}-${w}`,D=u[j]||"#6b7280",B=v.map((F,se)=>({id:`img-${k}-${w}-${se}`,originalId:F.id,url:F.url,filename:F.filename,categoryId:P,label:F.filename,uploadedBy:d,uploadedAt:new Date().toISOString(),pins:[],comments:[]}));x.push({id:P,name:j,color:D,isMinimized:!1,images:B})}),x.length===0&&x.push({id:`cat-${k}-0`,name:"Images",color:"#3b82f6",isMinimized:!1,images:[]}),h.categories=x}this.workspaces.push(h),this.cacheWorkspace(t,r,h.id);const f=r==="moodboard"?"moodboard_created":"whiteboard_created";return ds.logActivity({type:f,title:`New ${r} workspace created`,description:`${h.name} was created.`,projectId:t,userId:d,metadata:{workspaceId:h.id,workspaceType:r,workspaceName:h.name,categories:r==="whiteboard"?h.categories.length:void 0,images:r==="whiteboard"?h.categories.reduce((x,u)=>x+u.images.length,0):((p=h.images)==null?void 0:p.length)||0}}),this.setupProjectSyncListener(t,h.id,r),{workspace:h,isNew:!0,message:`New ${r} successfully created with project media organized by category`}})}setupProjectSyncListener(t,r,a){var i;const n={projectId:t,workspaceId:r,workspaceType:a,lastSync:new Date().toISOString()};this._projectSyncMap||(this._projectSyncMap=new Map),this._projectSyncMap.has(t)||this._projectSyncMap.set(t,[]),(i=this._projectSyncMap.get(t))==null||i.push(n)}syncProjectChanges(t){return xe(this,null,function*(){var a;const r=(a=this._projectSyncMap)==null?void 0:a.get(t);if(!(!r||r.length===0))try{const n=yield vr.getProject(t);for(const i of r){const{workspaceId:o,workspaceType:l}=i,d=this.workspaces.find(h=>h.id===o);d&&(l==="moodboard"?this.updateMoodboardFromProject(d,n):l==="whiteboard"&&this.updateWhiteboardFromProject(d,n),i.lastSync=new Date().toISOString())}}catch(n){}})}updateMoodboardFromProject(t,r){if(t.type==="moodboard"){if(r.name&&!t.name.includes(r.name)&&(t.name=`${r.name} Moodboard`),r.media&&Array.isArray(r.media)){const a=new Set((t.images||[]).map(i=>i.id)),n=r.media.filter(i=>!a.has(i.id)).map(i=>({id:i.id,type:"image",url:i.url,filename:i.filename,category:i.type}));n.length>0&&(t.images=[...t.images||[],...n],t.updatedAt=new Date().toISOString())}if(r.externalLinks&&Array.isArray(r.externalLinks)){const a=new Set((t.links||[]).map(i=>i.id)),n=r.externalLinks.filter(i=>!a.has(i.id)).map(i=>({id:i.id,type:"link",url:i.url,title:i.name}));n.length>0&&(t.links=[...t.links||[],...n],t.updatedAt=new Date().toISOString())}}}updateWhiteboardFromProject(t,r){var n;if(t.type!=="whiteboard")return;r.name&&!t.name.includes(r.name)&&(t.name=`${r.name} Whiteboard`);const a=new Set;if((n=t.categories)==null||n.forEach(i=>{var o;(o=i.images)==null||o.forEach(l=>{const d=l.originalId||l.id;a.add(d)})}),r.media&&Array.isArray(r.media)){const i={};r.media.forEach(o=>{if(a.has(o.id))return;const l=o.type||"Other";i[l]||(i[l]=[]),i[l].push(o)}),Object.entries(i).forEach(([o,l])=>{var f;if(l.length===0)return;let d=(f=t.categories)==null?void 0:f.find(p=>p.name===o);d||(d={id:`cat-${Date.now()}-${o.replace(/\s+/g,"-").toLowerCase()}`,name:o,color:this.getCategoryColor(o),isMinimized:!1,images:[]},t.categories=[...t.categories||[],d]);const h=l.map(p=>({id:`img-${Date.now()}-${Math.random().toString(36).substr(2,5)}`,originalId:p.id,url:p.url,filename:p.filename,categoryId:d.id,label:p.filename,uploadedBy:localStorage.getItem("userId")||"current-user",uploadedAt:new Date().toISOString(),pins:[],comments:[]}));d.images=[...d.images,...h]}),t.updatedAt=new Date().toISOString()}}getCategoryColor(t){return{"Final Render":"#3b82f6","Clay Render":"#10b981","Client Reference":"#8b5cf6",Concept:"#f59e0b",Other:"#6b7280"}[t]||"#6b7280"}}const Nt=new o4,l4=()=>e.jsx(qa,{className:"h-4 w-4"}),c4=({url:s})=>{const t=kx(s)||"";return t?e.jsx("iframe",{width:"100%",height:"100%",src:`https://www.youtube.com/embed/${t}`,title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}):e.jsx("p",{className:"text-white p-4",children:"Invalid or unsupported YouTube URL"})};function d4({project:s,isCompact:t,onStatusChange:r,onEdit:a,onArchive:n,onRestore:i,onDelete:o,isLoggedIn:l,onClick:d}){var y,S;const[h,f]=N.useState(null),[p,x]=N.useState(!1),[u,k]=N.useState(!1),[j,v]=N.useState(!1),[w,P]=N.useState(!1),{toast:D}=Pa(),B=N.useMemo(()=>{const I=s.media||[],M={All:I},J=I.reduce((ae,he)=>(ae[he.type]||(ae[he.type]=[]),ae[he.type].push(he),ae),{});return E(E({},M),J)},[s.media]),F=Object.keys(B),[se,z]=N.useState(F[0]);N.useEffect(()=>{F.length>0&&!F.includes(se)&&z(F[0])},[F,se]);const C=(I,M)=>{f({media:I,index:M})},A=I=>xe(this,null,function*(){I.stopPropagation();try{D({title:"Creating moodboard...",description:"Please wait while we set up your moodboard."});const M=yield Nt.createWorkspaceForProject(s.id,"moodboard");v(!0),D({title:M.isNew?"Moodboard created":"Existing moodboard found",description:M.message}),D({title:"Ready to view",description:"Click here to go to the Moodboards tab",action:e.jsx(le,{variant:"default",size:"sm",onClick:()=>{const J=document.querySelector('[data-viewmode="moodboards"]');if(J)J.click();else{const ae=new CustomEvent("navigate",{detail:{viewMode:"moodboards",workspaceId:M.workspace.id}});window.dispatchEvent(ae)}},className:"button-primary-enhanced hover-shimmer cyrus-ui",children:"View Moodboards"}),duration:1e4})}catch(M){D({title:"Error",description:"Failed to create moodboard. Please try again.",variant:"destructive"})}}),L=I=>xe(this,null,function*(){I.stopPropagation();try{D({title:"Creating whiteboard...",description:"Please wait while we set up your whiteboard."});const M=yield Nt.createWorkspaceForProject(s.id,"whiteboard");P(!0),D({title:M.isNew?"Whiteboard created":"Existing whiteboard found",description:M.message}),D({title:"Ready to view",description:"Click here to go to the Whiteboards tab",action:e.jsx(le,{variant:"default",size:"sm",onClick:()=>{const J=document.querySelector('[data-viewmode="whiteboards"]');if(J)J.click();else{const ae=new CustomEvent("navigate",{detail:{viewMode:"whiteboards",workspaceId:M.workspace.id}});window.dispatchEvent(ae)}},className:"button-primary-enhanced hover-shimmer cyrus-ui",children:"View Whiteboards"}),duration:1e4})}catch(M){D({title:"Error",description:"Failed to create whiteboard. Please try again.",variant:"destructive"})}});return e.jsxs("div",{className:Ce("glass-card p-4 sm:p-6 relative group",s.isArchived&&"opacity-75",d&&"cursor-pointer hover:shadow-lg transition-shadow"),onClick:d,role:d?"button":void 0,tabIndex:d?0:void 0,onKeyDown:I=>{d&&(I.key==="Enter"||I.key===" ")&&(I.preventDefault(),d())},children:[t?e.jsxs("div",{className:"flex items-center justify-between gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${nm(s.priority)} flex-shrink-0`}),e.jsx("h3",{className:"text-base font-semibold text-foreground truncate",title:s.name,children:s.name})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0 w-1/2 justify-end",children:[e.jsx(Ti,{children:e.jsxs(ei,{children:[e.jsx(ti,{asChild:!0,children:e.jsx(le,{variant:u?"secondary":"ghost",size:"icon",onClick:I=>{I.stopPropagation(),k(!u)},className:"h-8 w-8 hover-shimmer","aria-label":u?"Shrink card":"Expand card",children:u?e.jsx(ax,{className:"h-4 w-4"}):e.jsx(rx,{className:"h-4 w-4"})})}),e.jsx(mn,{children:e.jsx("p",{children:u?"Shrink":"Expand"})})]})}),e.jsxs(le,{variant:"ghost",size:"icon",onClick:A,className:`h-8 w-8 hover-shimmer ${j?"bg-primary text-primary-foreground":""}`,children:[e.jsx(ar,{className:"h-4 w-4 text-purple-500"}),e.jsx("span",{className:"sr-only",children:"Moodboard"})]}),e.jsxs(le,{variant:"ghost",size:"icon",onClick:L,className:`h-8 w-8 hover-shimmer ${w?"bg-primary text-primary-foreground":""}`,children:[e.jsx(Mr,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"sr-only",children:"Whiteboard"})]}),e.jsxs(bs,{value:s.status,onValueChange:I=>r(I),children:[e.jsx(fs,{className:`w-full max-w-[190px] py-1 px-3 text-xs font-medium hover-shimmer border-l-4 ${Rd(s.status)}`,children:e.jsx(ws,{children:((y=oa.find(I=>I.value===s.status))==null?void 0:y.label)||s.status})}),e.jsx(ps,{children:oa.map(I=>e.jsx(tt,{value:I.value,children:I.label},I.value))})]}),l&&e.jsxs(Yo,{children:[e.jsx(Go,{asChild:!0,children:e.jsx(le,{variant:"ghost",size:"icon",className:"hover-shimmer cyrus-ui h-8 w-8",children:e.jsx(Gl,{className:"h-4 w-4"})})}),e.jsxs(Fi,{children:[e.jsxs(as,{onClick:()=>a(s),children:[e.jsx(Jl,{className:"h-4 w-4 mr-2"}),"Edit"]},"edit"),s.isArchived?e.jsxs(as,{onClick:i,children:[e.jsx(Ch,{className:"h-4 w-4 mr-2"}),"Restore"]},"restore"):e.jsxs(as,{onClick:n,children:[e.jsx(Ah,{className:"h-4 w-4 mr-2"}),"Archive"]},"archive"),e.jsxs(as,{onClick:o,className:"text-destructive",children:[e.jsx(jr,{className:"h-4 w-4 mr-2"}),"Delete"]},"delete")]})]})]})]}):e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start justify-between mb-4 gap-4",children:[e.jsxs("div",{className:"flex-1 md:w-1/2",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-2 mb-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${nm(s.priority)}`}),e.jsx("h3",{className:"text-lg md:text-xl font-semibold text-foreground",children:s.name})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-1 text-sm text-muted-foreground md:pl-7",children:[e.jsxs("span",{children:[e.jsx("span",{className:"font-semibold",children:"Client:"})," ",s.client]}),e.jsxs("span",{children:[e.jsx("span",{className:"font-semibold",children:"PM:"})," ",s.projectManager]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(dr,{className:"h-4 w-4"}),e.jsx("span",{children:(s.artists||[]).map(I=>I.name).join(", ")})]})]})]}),e.jsxs("div",{className:"flex items-start gap-2 md:w-1/2 justify-end",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{variant:"ghost",size:"icon",onClick:A,className:`h-8 w-8 hover-shimmer ${j?"bg-primary text-primary-foreground":""}`,children:e.jsx(ar,{className:"h-4 w-4 text-purple-500"})}),e.jsx(le,{variant:"ghost",size:"icon",onClick:L,className:`h-8 w-8 hover-shimmer ${w?"bg-primary text-primary-foreground":""}`,children:e.jsx(Mr,{className:"h-4 w-4 text-green-500"})}),e.jsxs(bs,{value:s.status,onValueChange:I=>r(I),children:[e.jsx(fs,{className:`w-full max-w-[190px] py-1 px-3 text-xs font-medium hover-shimmer border-l-4 ${Rd(s.status)}`,children:e.jsx(ws,{children:((S=oa.find(I=>I.value===s.status))==null?void 0:S.label)||s.status})}),e.jsx(ps,{children:oa.map(I=>e.jsx(tt,{value:I.value,children:I.label},I.value))})]})]}),l&&e.jsxs(Yo,{children:[e.jsx(Go,{asChild:!0,children:e.jsx(le,{variant:"ghost",size:"sm",className:"hover-shimmer cyrus-ui",children:e.jsx(Gl,{className:"h-4 w-4"})})}),e.jsxs(Fi,{children:[e.jsxs(as,{onClick:()=>a(s),children:[e.jsx(Jl,{className:"h-4 w-4 mr-2"}),"Edit"]},"edit"),s.isArchived?e.jsxs(as,{onClick:i,children:[e.jsx(Ch,{className:"h-4 w-4 mr-2"}),"Restore"]},"restore"):e.jsxs(as,{onClick:n,children:[e.jsx(Ah,{className:"h-4 w-4 mr-2"}),"Archive"]},"archive"),e.jsxs(as,{onClick:o,className:"text-destructive",children:[e.jsx(jr,{className:"h-4 w-4 mr-2"}),"Delete"]},"delete")]})]})]})]}),!t||u?e.jsxs(e.Fragment,{children:[s.brief&&e.jsxs("p",{className:"text-muted-foreground mb-4 leading-relaxed",children:[e.jsx("span",{className:"font-semibold",children:"Brief:"})," ",s.brief]}),e.jsx("div",{className:"flex flex-wrap items-center gap-x-6 gap-y-2 mb-4 text-sm text-muted-foreground",children:l&&s.externalLinks&&s.externalLinks.length>0&&e.jsx("div",{className:"flex items-center flex-wrap gap-x-4 gap-y-2",children:s.externalLinks.map(I=>e.jsxs("a",{href:I.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 p-1 rounded-md text-muted-foreground hover:text-foreground hover-shimmer",onClick:M=>M.stopPropagation(),children:[l4(),e.jsx("span",{className:"text-xs font-medium",children:I.name})]},I.id))})}),(s.media&&s.media.length>0||s.videoUrl)&&e.jsx("div",{className:"mb-4 group/slider",children:e.jsxs(Jo,{value:se,onValueChange:I=>z(I),className:"w-full",children:[e.jsxs("div",{className:"flex items-center border-b",children:[e.jsx(Bi,{className:"bg-transparent border-none p-0",children:F.map(I=>e.jsx(yr,{value:I,className:"text-muted-foreground data-[state=active]:text-primary data-[state=active]:shadow-none hover-shimmer",onClick:M=>M.stopPropagation(),children:I},I))}),s.videoUrl&&e.jsxs(ei,{children:[e.jsx(ti,{asChild:!0,children:e.jsxs(le,{variant:"ghost",size:"sm",onClick:I=>{I.stopPropagation(),x(!0)},className:"ml-auto flex items-center gap-2 hover-shimmer",children:[e.jsx(Ih,{className:"h-5 w-5"}),e.jsx("span",{className:"text-xs font-medium",children:"Watch Me"})]})}),e.jsx(mn,{children:"Watch Video"})]})]}),F.map(I=>e.jsx(br,{value:I,className:"mt-4",children:e.jsx("div",{onClick:M=>{M.stopPropagation()},children:e.jsx(G0,{media:B[I],categoryName:I,onImageClick:M=>{C(B[I],M)}})})},I)),F.length===0&&s.videoUrl&&e.jsx("div",{className:"mt-4 flex justify-center items-center h-48 bg-muted/50 rounded-lg border-2 border-dashed",children:e.jsxs(le,{variant:"outline",onClick:()=>x(!0),className:"hover-shimmer",children:[e.jsx(Ih,{className:"h-5 w-5 mr-2"}),"Watch Project Video"]})})]})})]}):null,e.jsx(Y0,{project:s,isCompact:t&&!u}),h&&e.jsx(Um,{media:h.media,initialIndex:h.index,onClose:()=>f(null)}),s.videoUrl&&e.jsx(Ts,{open:p,onOpenChange:I=>{I||x(!1)},children:e.jsxs(Is,{className:"max-w-3xl h-[60vh] p-0 bg-black",onClick:I=>I.stopPropagation(),children:[e.jsx(ic,{asChild:!0,children:e.jsx(Ks,{children:"YouTube Video Player"})}),e.jsx(c4,{url:s.videoUrl})]})})]})}const Pt=N.forwardRef((n,a)=>{var i=n,{className:s,type:t}=i,r=Me(i,["className","type"]);return e.jsx("input",E({type:t,className:Ce("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm cyrus-ui",s),ref:a},r))});Pt.displayName="Input";const Sr=N.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Me(n,["className"]);return e.jsx("textarea",E({className:Ce("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 cyrus-ui",s),ref:r},t))});Sr.displayName="Textarea";var u4="Label",Q0=N.forwardRef((s,t)=>e.jsx(Vt.label,Q(E({},s),{ref:t,onMouseDown:r=>{var n;r.target.closest("button, input, select, textarea")||((n=s.onMouseDown)==null||n.call(s,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}})));Q0.displayName=u4;var Z0=Q0;const h4=Vd("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),jt=N.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Me(n,["className"]);return e.jsx(Z0,E({ref:r,className:Ce(h4(),s)},t))});jt.displayName=Z0.displayName;const m4=[{value:"Final Render",label:"Final Render"},{value:"Clay Render",label:"Clay Render"},{value:"Client Reference",label:"Client Reference"},{value:"Concept",label:"Concept"},{value:"Other",label:"Other"}];function f4({media:s,onMediaAdd:t,onMediaRemove:r,onShowMediaLibrary:a,showLibraryButton:n,onMediaCategoryChange:i}){const o=l=>{l.target.files&&t(l.target.files)};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-24 border-2 border-dashed rounded-lg cursor-pointer hover:bg-muted/50 transition-colors hover-shimmer",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[e.jsx(Ly,{className:"w-8 h-8 mb-2 text-muted-foreground"}),e.jsx("p",{className:"mb-1 text-sm text-muted-foreground",children:"Upload from Computer"})]}),e.jsx("input",{type:"file",className:"hidden",multiple:!0,onChange:o})]}),n&&e.jsx("button",{type:"button",onClick:a,className:"flex flex-col items-center justify-center w-full h-24 border-2 border-dashed rounded-lg cursor-pointer hover:bg-muted/50 transition-colors hover-shimmer",children:e.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[e.jsx(My,{className:"w-8 h-8 mb-2 text-muted-foreground"}),e.jsx("p",{className:"mb-1 text-sm text-muted-foreground",children:"Choose from Library"})]})})]}),s.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Uploaded Media"}),e.jsx("div",{className:"grid grid-cols-3 gap-4",children:s.map(l=>e.jsxs("div",{className:"relative group flex flex-col items-center",style:{borderRadius:15,overflow:"visible"},children:[e.jsx("div",{className:"relative w-full",style:{borderRadius:15,overflow:"hidden"},children:e.jsx("img",{src:l.url,alt:l.filename,className:"w-full h-32 object-cover",style:{borderRadius:15}})}),e.jsx(le,{variant:"destructive",size:"sm",className:"absolute -top-3 -right-3 z-20 h-8 w-8 p-0 flex items-center justify-center shadow-lg hover-shimmer",onClick:()=>r(l.id),children:e.jsx(Hs,{className:"h-5 w-5"})}),e.jsx("div",{className:"w-full text-xs text-center text-muted-foreground bg-transparent pt-2 pb-1 truncate",children:l.filename}),e.jsx("div",{className:"w-full mt-1 flex justify-center",children:e.jsxs(bs,{value:l.type,onValueChange:d=>i(l.id,d),children:[e.jsx(fs,{className:"w-60 h-10 text-xs hover-shimmer",children:e.jsx(ws,{})}),e.jsx(ps,{children:m4.map(d=>e.jsx(tt,{value:d.value,children:d.label},d.value))})]})})]},l.id))})]})]})}function p4(s,t){return N.useReducer((r,a)=>{const n=t[r][a];return n!=null?n:r},s)}var qm="ScrollArea",[e1,Fk]=fn(qm),[g4,ua]=e1(qm),t1=N.forwardRef((s,t)=>{const y=s,{__scopeScrollArea:r,type:a="hover",dir:n,scrollHideDelay:i=600}=y,o=Me(y,["__scopeScrollArea","type","dir","scrollHideDelay"]),[l,d]=N.useState(null),[h,f]=N.useState(null),[p,x]=N.useState(null),[u,k]=N.useState(null),[j,v]=N.useState(null),[w,P]=N.useState(0),[D,B]=N.useState(0),[F,se]=N.useState(!1),[z,C]=N.useState(!1),A=As(t,S=>d(S)),L=hg(n);return e.jsx(g4,{scope:r,type:a,dir:L,scrollHideDelay:i,scrollArea:l,viewport:h,onViewportChange:f,content:p,onContentChange:x,scrollbarX:u,onScrollbarXChange:k,scrollbarXEnabled:F,onScrollbarXEnabledChange:se,scrollbarY:j,onScrollbarYChange:v,scrollbarYEnabled:z,onScrollbarYEnabledChange:C,onCornerWidthChange:P,onCornerHeightChange:B,children:e.jsx(Vt.div,Q(E({dir:L},o),{ref:A,style:E({position:"relative","--radix-scroll-area-corner-width":w+"px","--radix-scroll-area-corner-height":D+"px"},s.style)}))})});t1.displayName=qm;var s1="ScrollAreaViewport",r1=N.forwardRef((s,t)=>{const h=s,{__scopeScrollArea:r,children:a,nonce:n}=h,i=Me(h,["__scopeScrollArea","children","nonce"]),o=ua(s1,r),l=N.useRef(null),d=As(t,l,o.onViewportChange);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),e.jsx(Vt.div,Q(E({"data-radix-scroll-area-viewport":""},i),{ref:d,style:E({overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden"},s.style),children:e.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:a})}))]})});r1.displayName=s1;var Ha="ScrollAreaScrollbar",zm=N.forwardRef((s,t)=>{const d=s,{forceMount:r}=d,a=Me(d,["forceMount"]),n=ua(Ha,s.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=n,l=s.orientation==="horizontal";return N.useEffect(()=>(l?i(!0):o(!0),()=>{l?i(!1):o(!1)}),[l,i,o]),n.type==="hover"?e.jsx(x4,Q(E({},a),{ref:t,forceMount:r})):n.type==="scroll"?e.jsx(v4,Q(E({},a),{ref:t,forceMount:r})):n.type==="auto"?e.jsx(a1,Q(E({},a),{ref:t,forceMount:r})):n.type==="always"?e.jsx($m,Q(E({},a),{ref:t})):null});zm.displayName=Ha;var x4=N.forwardRef((s,t)=>{const l=s,{forceMount:r}=l,a=Me(l,["forceMount"]),n=ua(Ha,s.__scopeScrollArea),[i,o]=N.useState(!1);return N.useEffect(()=>{const d=n.scrollArea;let h=0;if(d){const f=()=>{window.clearTimeout(h),o(!0)},p=()=>{h=window.setTimeout(()=>o(!1),n.scrollHideDelay)};return d.addEventListener("pointerenter",f),d.addEventListener("pointerleave",p),()=>{window.clearTimeout(h),d.removeEventListener("pointerenter",f),d.removeEventListener("pointerleave",p)}}},[n.scrollArea,n.scrollHideDelay]),e.jsx(Ui,{present:r||i,children:e.jsx(a1,Q(E({"data-state":i?"visible":"hidden"},a),{ref:t}))})}),v4=N.forwardRef((s,t)=>{const h=s,{forceMount:r}=h,a=Me(h,["forceMount"]),n=ua(Ha,s.__scopeScrollArea),i=s.orientation==="horizontal",o=nu(()=>d("SCROLL_END"),100),[l,d]=p4("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return N.useEffect(()=>{if(l==="idle"){const f=window.setTimeout(()=>d("HIDE"),n.scrollHideDelay);return()=>window.clearTimeout(f)}},[l,n.scrollHideDelay,d]),N.useEffect(()=>{const f=n.viewport,p=i?"scrollLeft":"scrollTop";if(f){let x=f[p];const u=()=>{const k=f[p];x!==k&&(d("SCROLL"),o()),x=k};return f.addEventListener("scroll",u),()=>f.removeEventListener("scroll",u)}},[n.viewport,i,d,o]),e.jsx(Ui,{present:r||l!=="hidden",children:e.jsx($m,Q(E({"data-state":l==="hidden"?"hidden":"visible"},a),{ref:t,onPointerEnter:Rt(s.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:Rt(s.onPointerLeave,()=>d("POINTER_LEAVE"))}))})}),a1=N.forwardRef((s,t)=>{const r=ua(Ha,s.__scopeScrollArea),h=s,{forceMount:a}=h,n=Me(h,["forceMount"]),[i,o]=N.useState(!1),l=s.orientation==="horizontal",d=nu(()=>{if(r.viewport){const f=r.viewport.offsetWidth<r.viewport.scrollWidth,p=r.viewport.offsetHeight<r.viewport.scrollHeight;o(l?f:p)}},10);return Ko(r.viewport,d),Ko(r.content,d),e.jsx(Ui,{present:a||i,children:e.jsx($m,Q(E({"data-state":i?"visible":"hidden"},n),{ref:t}))})}),$m=N.forwardRef((s,t)=>{const x=s,{orientation:r="vertical"}=x,a=Me(x,["orientation"]),n=ua(Ha,s.__scopeScrollArea),i=N.useRef(null),o=N.useRef(0),[l,d]=N.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),h=c1(l.viewport,l.content),f=Q(E({},a),{sizes:l,onSizesChange:d,hasThumb:h>0&&h<1,onThumbChange:u=>i.current=u,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:u=>o.current=u});function p(u,k){return S4(u,o.current,l,k)}return r==="horizontal"?e.jsx(y4,Q(E({},f),{ref:t,onThumbPositionChange:()=>{if(n.viewport&&i.current){const u=n.viewport.scrollLeft,k=gp(u,l,n.dir);i.current.style.transform=`translate3d(${k}px, 0, 0)`}},onWheelScroll:u=>{n.viewport&&(n.viewport.scrollLeft=u)},onDragScroll:u=>{n.viewport&&(n.viewport.scrollLeft=p(u,n.dir))}})):r==="vertical"?e.jsx(b4,Q(E({},f),{ref:t,onThumbPositionChange:()=>{if(n.viewport&&i.current){const u=n.viewport.scrollTop,k=gp(u,l);i.current.style.transform=`translate3d(0, ${k}px, 0)`}},onWheelScroll:u=>{n.viewport&&(n.viewport.scrollTop=u)},onDragScroll:u=>{n.viewport&&(n.viewport.scrollTop=p(u))}})):null}),y4=N.forwardRef((s,t)=>{const f=s,{sizes:r,onSizesChange:a}=f,n=Me(f,["sizes","onSizesChange"]),i=ua(Ha,s.__scopeScrollArea),[o,l]=N.useState(),d=N.useRef(null),h=As(t,d,i.onScrollbarXChange);return N.useEffect(()=>{d.current&&l(getComputedStyle(d.current))},[d]),e.jsx(i1,Q(E({"data-orientation":"horizontal"},n),{ref:h,sizes:r,style:E({bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":au(r)+"px"},s.style),onThumbPointerDown:p=>s.onThumbPointerDown(p.x),onDragScroll:p=>s.onDragScroll(p.x),onWheelScroll:(p,x)=>{if(i.viewport){const u=i.viewport.scrollLeft+p.deltaX;s.onWheelScroll(u),u1(u,x)&&p.preventDefault()}},onResize:()=>{d.current&&i.viewport&&o&&a({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:Fd(o.paddingLeft),paddingEnd:Fd(o.paddingRight)}})}}))}),b4=N.forwardRef((s,t)=>{const f=s,{sizes:r,onSizesChange:a}=f,n=Me(f,["sizes","onSizesChange"]),i=ua(Ha,s.__scopeScrollArea),[o,l]=N.useState(),d=N.useRef(null),h=As(t,d,i.onScrollbarYChange);return N.useEffect(()=>{d.current&&l(getComputedStyle(d.current))},[d]),e.jsx(i1,Q(E({"data-orientation":"vertical"},n),{ref:h,sizes:r,style:E({top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":au(r)+"px"},s.style),onThumbPointerDown:p=>s.onThumbPointerDown(p.y),onDragScroll:p=>s.onDragScroll(p.y),onWheelScroll:(p,x)=>{if(i.viewport){const u=i.viewport.scrollTop+p.deltaY;s.onWheelScroll(u),u1(u,x)&&p.preventDefault()}},onResize:()=>{d.current&&i.viewport&&o&&a({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:Fd(o.paddingTop),paddingEnd:Fd(o.paddingBottom)}})}}))}),[w4,n1]=e1(Ha),i1=N.forwardRef((s,t)=>{const A=s,{__scopeScrollArea:r,sizes:a,hasThumb:n,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:d,onDragScroll:h,onWheelScroll:f,onResize:p}=A,x=Me(A,["__scopeScrollArea","sizes","hasThumb","onThumbChange","onThumbPointerUp","onThumbPointerDown","onThumbPositionChange","onDragScroll","onWheelScroll","onResize"]),u=ua(Ha,r),[k,j]=N.useState(null),v=As(t,L=>j(L)),w=N.useRef(null),P=N.useRef(""),D=u.viewport,B=a.content-a.viewport,F=Jr(f),se=Jr(d),z=nu(p,10);function C(L){if(w.current){const y=L.clientX-w.current.left,S=L.clientY-w.current.top;h({x:y,y:S})}}return N.useEffect(()=>{const L=y=>{const S=y.target;(k==null?void 0:k.contains(S))&&F(y,B)};return document.addEventListener("wheel",L,{passive:!1}),()=>document.removeEventListener("wheel",L,{passive:!1})},[D,k,B,F]),N.useEffect(se,[a,se]),Ko(k,z),Ko(u.content,z),e.jsx(w4,{scope:r,scrollbar:k,hasThumb:n,onThumbChange:Jr(i),onThumbPointerUp:Jr(o),onThumbPositionChange:se,onThumbPointerDown:Jr(l),children:e.jsx(Vt.div,Q(E({},x),{ref:v,style:E({position:"absolute"},x.style),onPointerDown:Rt(s.onPointerDown,L=>{L.button===0&&(L.target.setPointerCapture(L.pointerId),w.current=k.getBoundingClientRect(),P.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",u.viewport&&(u.viewport.style.scrollBehavior="auto"),C(L))}),onPointerMove:Rt(s.onPointerMove,C),onPointerUp:Rt(s.onPointerUp,L=>{const y=L.target;y.hasPointerCapture(L.pointerId)&&y.releasePointerCapture(L.pointerId),document.body.style.webkitUserSelect=P.current,u.viewport&&(u.viewport.style.scrollBehavior=""),w.current=null})}))})}),Od="ScrollAreaThumb",o1=N.forwardRef((s,t)=>{const i=s,{forceMount:r}=i,a=Me(i,["forceMount"]),n=n1(Od,s.__scopeScrollArea);return e.jsx(Ui,{present:r||n.hasThumb,children:e.jsx(j4,E({ref:t},a))})}),j4=N.forwardRef((s,t)=>{const p=s,{__scopeScrollArea:r,style:a}=p,n=Me(p,["__scopeScrollArea","style"]),i=ua(Od,r),o=n1(Od,r),{onThumbPositionChange:l}=o,d=As(t,x=>o.onThumbChange(x)),h=N.useRef(void 0),f=nu(()=>{h.current&&(h.current(),h.current=void 0)},100);return N.useEffect(()=>{const x=i.viewport;if(x){const u=()=>{if(f(),!h.current){const k=k4(x,l);h.current=k,l()}};return l(),x.addEventListener("scroll",u),()=>x.removeEventListener("scroll",u)}},[i.viewport,f,l]),e.jsx(Vt.div,Q(E({"data-state":o.hasThumb?"visible":"hidden"},n),{ref:d,style:E({width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)"},a),onPointerDownCapture:Rt(s.onPointerDownCapture,x=>{const k=x.target.getBoundingClientRect(),j=x.clientX-k.left,v=x.clientY-k.top;o.onThumbPointerDown({x:j,y:v})}),onPointerUp:Rt(s.onPointerUp,o.onThumbPointerUp)}))});o1.displayName=Od;var Wm="ScrollAreaCorner",l1=N.forwardRef((s,t)=>{const r=ua(Wm,s.__scopeScrollArea),a=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&a?e.jsx(N4,Q(E({},s),{ref:t})):null});l1.displayName=Wm;var N4=N.forwardRef((s,t)=>{const f=s,{__scopeScrollArea:r}=f,a=Me(f,["__scopeScrollArea"]),n=ua(Wm,r),[i,o]=N.useState(0),[l,d]=N.useState(0),h=!!(i&&l);return Ko(n.scrollbarX,()=>{var x;const p=((x=n.scrollbarX)==null?void 0:x.offsetHeight)||0;n.onCornerHeightChange(p),d(p)}),Ko(n.scrollbarY,()=>{var x;const p=((x=n.scrollbarY)==null?void 0:x.offsetWidth)||0;n.onCornerWidthChange(p),o(p)}),h?e.jsx(Vt.div,Q(E({},a),{ref:t,style:E({width:i,height:l,position:"absolute",right:n.dir==="ltr"?0:void 0,left:n.dir==="rtl"?0:void 0,bottom:0},s.style)})):null});function Fd(s){return s?parseInt(s,10):0}function c1(s,t){const r=s/t;return isNaN(r)?0:r}function au(s){const t=c1(s.viewport,s.content),r=s.scrollbar.paddingStart+s.scrollbar.paddingEnd,a=(s.scrollbar.size-r)*t;return Math.max(a,18)}function S4(s,t,r,a="ltr"){const n=au(r),i=n/2,o=t||i,l=n-o,d=r.scrollbar.paddingStart+o,h=r.scrollbar.size-r.scrollbar.paddingEnd-l,f=r.content-r.viewport,p=a==="ltr"?[0,f]:[f*-1,0];return d1([d,h],p)(s)}function gp(s,t,r="ltr"){const a=au(t),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-n,o=t.content-t.viewport,l=i-a,d=r==="ltr"?[0,o]:[o*-1,0],h=Qh(s,d);return d1([0,o],[0,l])(h)}function d1(s,t){return r=>{if(s[0]===s[1]||t[0]===t[1])return t[0];const a=(t[1]-t[0])/(s[1]-s[0]);return t[0]+a*(r-s[0])}}function u1(s,t){return s>0&&s<t}var k4=(s,t=()=>{})=>{let r={left:s.scrollLeft,top:s.scrollTop},a=0;return function n(){const i={left:s.scrollLeft,top:s.scrollTop},o=r.left!==i.left,l=r.top!==i.top;(o||l)&&t(),r=i,a=window.requestAnimationFrame(n)}(),()=>window.cancelAnimationFrame(a)};function nu(s,t){const r=Jr(s),a=N.useRef(0);return N.useEffect(()=>()=>window.clearTimeout(a.current),[]),N.useCallback(()=>{window.clearTimeout(a.current),a.current=window.setTimeout(r,t)},[r,t])}function Ko(s,t){const r=Jr(t);Xr(()=>{let a=0;if(s){const n=new ResizeObserver(()=>{cancelAnimationFrame(a),a=window.requestAnimationFrame(r)});return n.observe(s),()=>{window.cancelAnimationFrame(a),n.unobserve(s)}}},[s,r])}var h1=t1,C4=r1,A4=l1;const Hm=N.forwardRef((n,a)=>{var i=n,{className:s,children:t}=i,r=Me(i,["className","children"]);return e.jsxs(h1,Q(E({ref:a,className:Ce("relative overflow-hidden",s)},r),{children:[e.jsx(C4,{className:"h-full w-full rounded-[inherit]",children:t}),e.jsx(m1,{}),e.jsx(A4,{})]}))});Hm.displayName=h1.displayName;const m1=N.forwardRef((n,a)=>{var i=n,{className:s,orientation:t="vertical"}=i,r=Me(i,["className","orientation"]);return e.jsx(zm,Q(E({ref:a,orientation:t,className:Ce("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s)},r),{children:e.jsx(o1,{className:"relative flex-1 rounded-full bg-border"})}))});m1.displayName=zm.displayName;function P4({isOpen:s,onClose:t,onSelect:r,mediaUrl:a,nonce:n}){const[i,o]=N.useState([]),{data:l=[],isLoading:d}=Dd({queryKey:["wp-media"],queryFn:()=>xe(this,null,function*(){const p=yield fetch(`${a}?per_page=100`,{headers:{"X-WP-Nonce":n}});if(!p.ok)throw new Error("Failed to fetch media library");return p.json()}),enabled:s}),h=p=>{o(x=>x.some(u=>u.id===p.id)?x.filter(u=>u.id!==p.id):[...x,p])},f=()=>{r(i),t()};return N.useEffect(()=>{s||o([])},[s]),e.jsx(Ts,{open:s,onOpenChange:t,children:e.jsxs(Is,{className:"max-w-4xl h-[80vh]",children:[e.jsx(Dr,{children:e.jsx(Ks,{children:"WordPress Media Library"})}),e.jsx(Hm,{className:"h-full",children:d?e.jsx("p",{children:"Loading media..."}):e.jsx("div",{className:"grid grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-4 p-4",children:l.map(p=>{var u,k,j;const x=i.some(v=>v.id===p.id);return e.jsxs("div",{className:"relative aspect-square cursor-pointer group",onClick:()=>h(p),children:[e.jsx("img",{src:((j=(k=(u=p.media_details)==null?void 0:u.sizes)==null?void 0:k.thumbnail)==null?void 0:j.source_url)||p.source_url,alt:p.alt_text,className:"w-full h-full object-cover rounded-md transition-transform group-hover:scale-105"}),x&&e.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:e.jsx(la,{className:"h-8 w-8 text-white"})})]},p.id)})})}),e.jsxs(Rn,{children:[e.jsx(le,{variant:"ghost",onClick:t,className:"hover-shimmer",children:"Cancel"}),e.jsxs(le,{onClick:f,disabled:i.length===0,className:"hover-shimmer",children:["Select ",i.length>0?`(${i.length})`:""]})]})]})})}const xp={name:"",client:"",projectManager:"",artists:[],brief:"",externalLinks:[],startDate:"",endDate:"",priority:"medium",status:"preview",media:[],videoUrl:"",isArchived:!1},vp=[{value:"google-drive",label:"Google Drive"},{value:"google-sheets",label:"Google Sheets"},{value:"google-maps",label:"Google Maps"},{value:"dropbox",label:"Dropbox"},{value:"filestage",label:"Filestage"},{value:"other",label:"Other"}];function _4({onClose:s,onSubmit:t,project:r,isLoggedIn:a}){const{toast:n}=Pa(),i=K0(),[o,l]=N.useState(xp),[d,h]=N.useState(!1),f=!i||typeof window!="undefined"&&"pulse2"in window,p=typeof window!="undefined"&&"pulse2"in window?window.pulse2:{mediaUrl:"",nonce:""};N.useEffect(()=>{l(r?Q(E({},r),{videoUrl:r.videoUrl||""}):xp)},[r]);const x=A=>{const{name:L,value:y}=A.target;l(S=>Q(E({},S),{[L]:y}))},u=(A,L)=>{l(y=>Q(E({},y),{[A]:L}))},k=A=>xe(this,null,function*(){const L=Array.from(A).map(y=>xe(this,null,function*(){if(i)return{id:`${y.name}-${Date.now()}`,filename:y.name,url:URL.createObjectURL(y),type:"Final Render",uploadedAt:new Date().toISOString()};{const S=new FormData;S.append("file",y);const I=yield fetch(p.mediaUrl,{method:"POST",headers:{"X-WP-Nonce":p.nonce},body:S});if(!I.ok)throw new Error("Failed to upload media");const M=yield I.json();return{id:M.id.toString(),filename:M.title.rendered,url:M.source_url,type:"Final Render",uploadedAt:M.date}}}));try{const y=yield Promise.all(L),S=new Set(o.media.map(J=>J.filename)),I=new Set(o.media.map(J=>J.url)),M=y.filter(J=>!S.has(J.filename)&&!I.has(J.url));if(M.length<y.length){const J=y.length-M.length;n({title:"Some files were skipped",description:`${J} duplicate file(s) were not added.`,variant:"default"})}l(J=>Q(E({},J),{media:[...J.media,...M]})),M.length>0&&n({title:"Media uploaded successfully"})}catch(y){n({title:"Error uploading media",description:y.message,variant:"destructive"})}}),j=A=>{l(L=>Q(E({},L),{media:L.media.filter(y=>y.id!==A)}))},v=(A,L)=>{l(y=>Q(E({},y),{media:y.media.map(S=>S.id===A?Q(E({},S),{type:L}):S)}))},w=A=>{const L=A.map(M=>{const J=M.source_url.split("/").pop()||M.alt_text||`media_${M.id}`;return{id:M.id.toString(),filename:J,url:M.source_url,type:"Final Render",uploadedAt:new Date().toISOString()}}),y=new Set(o.media.map(M=>M.filename)),S=new Set(o.media.map(M=>M.url)),I=L.filter(M=>!y.has(M.filename)&&!S.has(M.url));if(I.length<L.length){const M=L.length-I.length;n({title:"Some files were skipped",description:`${M} duplicate file(s) were not added.`,variant:"default"})}l(M=>Q(E({},M),{media:[...M.media,...I]})),I.length>0&&n({title:"Media added successfully"})},P=A=>{A.preventDefault();const L=o.externalLinks.filter(S=>S.url.trim()!==""&&!ch(S.url));if(L.length>0){n({title:"Invalid URLs",description:`Please fix ${L.length} invalid URL${L.length>1?"s":""} before submitting.`,variant:"destructive"});return}if(o.videoUrl&&!ch(o.videoUrl)){n({title:"Invalid Video URL",description:"Please enter a valid video URL or leave it empty.",variant:"destructive"});return}const y=Q(E({},o),{artists:o.artists.filter(S=>S.name.trim()!=="")});t(y),s()},D=()=>{l(A=>Q(E({},A),{artists:[...A.artists,{id:`new-${Date.now()}`,name:""}]}))},B=A=>{l(L=>Q(E({},L),{artists:L.artists.filter(y=>y.id!==A)}))},F=(A,L)=>{l(y=>Q(E({},y),{artists:y.artists.map(S=>S.id===A?Q(E({},S),{name:L}):S)}))},se=()=>{l(A=>Q(E({},A),{externalLinks:[...A.externalLinks,{id:`new-${Date.now()}`,type:"other",name:"",url:""}]}))},z=A=>{l(L=>Q(E({},L),{externalLinks:L.externalLinks.filter(y=>y.id!==A)}))},C=(A,L,y)=>{l(S=>Q(E({},S),{externalLinks:S.externalLinks.map(I=>{if(I.id===A){const M=Q(E({},I),{[L]:y});if(L==="type"&&y!=="other"){const J=vp.find(ae=>ae.value===y);M.name=J?J.label:""}return L==="url"&&typeof y=="string"&&y.trim()!==""&&(ch(y)||n({title:"Invalid URL",description:"Please enter a valid URL (e.g., https://example.com)",variant:"destructive"})),M}return I})}))};return a?e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[e.jsxs("form",{onSubmit:P,className:"space-y-6 glass-card p-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:r?"Edit Project":"Create New Project"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-7 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(jt,{htmlFor:"name",children:"Project Name"}),e.jsx(Pt,{id:"name",name:"name",className:"input-glass cyrus-ui",value:o.name,onChange:x})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(jt,{htmlFor:"client",children:"Client"}),e.jsx(Pt,{id:"client",name:"client",className:"input-glass cyrus-ui",value:o.client,onChange:x})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(jt,{htmlFor:"projectManager",children:"Project Manager"}),e.jsx(Pt,{id:"projectManager",name:"projectManager",className:"input-glass cyrus-ui",value:o.projectManager,onChange:x})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(jt,{htmlFor:"priority",children:"Priority"}),e.jsxs(bs,{name:"priority",value:o.priority,onValueChange:A=>u("priority",A),children:[e.jsx(fs,{className:"input-glass cyrus-ui",children:e.jsx(ws,{})}),e.jsxs(ps,{children:[e.jsx(tt,{value:"high",children:"High"}),e.jsx(tt,{value:"medium",children:"Medium"}),e.jsx(tt,{value:"low",children:"Low"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(jt,{htmlFor:"startDate",children:"Start Date"}),e.jsx(Pt,{id:"startDate",name:"startDate",type:"date",className:"input-glass cyrus-ui",value:o.startDate,onChange:x})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(jt,{htmlFor:"endDate",children:"End Date"}),e.jsx(Pt,{id:"endDate",name:"endDate",type:"date",className:"input-glass cyrus-ui",value:o.endDate,onChange:x})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(jt,{htmlFor:"videoUrl",children:"Video URL"}),e.jsx(Pt,{id:"videoUrl",name:"videoUrl",className:"input-glass cyrus-ui",value:o.videoUrl,onChange:x})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(jt,{children:"Artists"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:o.artists.map((A,L)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pt,{value:A.name,onChange:y=>F(A.id,y.target.value),placeholder:`Artist ${L+1}`,className:"input-glass cyrus-ui px-2 py-1 w-auto min-w-[60px] max-w-[180px]",style:{width:`${Math.max(A.name.length*10+40,80)}px`}}),e.jsx(le,{variant:"ghost",size:"icon",onClick:()=>B(A.id),className:"text-destructive hover-shimmer",children:e.jsx(Hs,{className:"h-4 w-4"})})]},A.id))}),e.jsxs(le,{type:"button",variant:"outline",onClick:D,className:"hover-shimmer",children:[e.jsx(gs,{className:"mr-2 h-4 w-4"})," Add Artist"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(jt,{htmlFor:"brief",children:"Brief"}),e.jsx(Sr,{id:"brief",name:"brief",className:"input-glass cyrus-ui h-32",value:o.brief,onChange:x})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(jt,{children:"External Links"}),e.jsx("div",{className:"space-y-3",children:o.externalLinks.map(A=>e.jsxs("div",{className:"grid grid-cols-[160px_150px_1fr_auto] gap-3 items-center p-2",children:[e.jsxs(bs,{value:A.type,onValueChange:L=>C(A.id,"type",L),children:[e.jsx(fs,{className:"input-glass cyrus-ui hover-shimmer",children:e.jsx(ws,{})}),e.jsx(ps,{children:vp.map(L=>e.jsx(tt,{value:L.value,children:L.label},L.value))})]}),e.jsx(Pt,{value:A.name,onChange:L=>C(A.id,"name",L.target.value),placeholder:"Name",className:"input-glass cyrus-ui w-[150px]",disabled:A.type!=="other"}),e.jsx(Pt,{value:A.url,onChange:L=>C(A.id,"url",L.target.value),placeholder:"URL",className:"input-glass cyrus-ui"}),e.jsx(le,{variant:"ghost",size:"icon",onClick:()=>z(A.id),className:"text-destructive hover-shimmer",children:e.jsx(Hs,{className:"h-4 w-4"})})]},A.id))}),e.jsxs(le,{type:"button",variant:"outline",onClick:se,className:"hover-shimmer",children:[e.jsx(gs,{className:"mr-2 h-4 w-4"})," Add Link"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(jt,{children:"Project Media"}),e.jsx(f4,{onMediaAdd:k,onMediaRemove:j,media:o.media,onShowMediaLibrary:()=>h(!0),showLibraryButton:f,onMediaCategoryChange:v})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-6",children:[e.jsx(le,{type:"button",variant:"ghost",onClick:s,className:"hover-shimmer",children:"Cancel"}),e.jsx(le,{type:"submit",className:"button-primary-enhanced hover-shimmer cyrus-ui",children:r?"Update Project":"Create Project"})]})]}),d&&e.jsx(P4,{isOpen:d,onClose:()=>h(!1),onSelect:w,mediaUrl:p.mediaUrl,nonce:p.nonce})]}):e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("p",{children:"You must be logged in to create or edit a project."}),e.jsx(le,{onClick:s,className:"mt-4 hover-shimmer",children:"Go Back"})]})}const Ke=N.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Me(n,["className"]);return e.jsx("div",E({ref:r,className:Ce("rounded-lg border text-card-foreground shadow-sm",s)},t))});Ke.displayName="Card";const _t=N.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Me(n,["className"]);return e.jsx("div",E({ref:r,className:Ce("flex flex-col space-y-1.5 p-6",s)},t))});_t.displayName="CardHeader";const Ot=N.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Me(n,["className"]);return e.jsx("h3",E({ref:r,className:Ce("text-2xl font-semibold leading-none tracking-tight",s)},t))});Ot.displayName="CardTitle";const L4=N.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Me(n,["className"]);return e.jsx("p",E({ref:r,className:Ce("text-sm text-muted-foreground",s)},t))});L4.displayName="CardDescription";const Xe=N.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Me(n,["className"]);return e.jsx("div",E({ref:r,className:Ce("p-6 pt-0",s)},t))});Xe.displayName="CardContent";const f1=N.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Me(n,["className"]);return e.jsx("div",E({ref:r,className:Ce("flex items-center p-6 pt-0",s)},t))});f1.displayName="CardFooter";const dd={project_created:{icon:xs,color:"bg-blue-500",label:"Project"},project_updated:{icon:xs,color:"bg-blue-400",label:"Project Update"},moodboard_created:{icon:ar,color:"bg-purple-500",label:"Moodboard"},moodboard_updated:{icon:ar,color:"bg-purple-400",label:"Moodboard Update"},whiteboard_created:{icon:Mr,color:"bg-green-500",label:"Whiteboard"},whiteboard_updated:{icon:Mr,color:"bg-green-400",label:"Whiteboard Update"},workflow_created:{icon:ca,color:"bg-orange-500",label:"Workflow"},workflow_updated:{icon:ca,color:"bg-orange-400",label:"Workflow Update"},comment_added:{icon:Nr,color:"bg-yellow-500",label:"Comment"},pin_added:{icon:ka,color:"bg-red-500",label:"Pin"},timeline_updated:{icon:es,color:"bg-indigo-500",label:"Timeline"},whiteboard_pin_added:{icon:ka,color:"bg-red-500",label:"Pin Added"},whiteboard_pin_resolved:{icon:ka,color:"bg-green-500",label:"Pin Resolved"},workflow_stage_completed:{icon:ca,color:"bg-orange-300",label:"Stage Completed"},timeline_milestone_reached:{icon:es,color:"bg-indigo-300",label:"Milestone Reached"}};function I4({projects:s=[],selectedDate:t,onDateSelect:r,onProjectEdit:a,isLoggedIn:n=!0,onProjectClick:i,onActivityClick:o}){const[l,d]=N.useState(new Date),[h,f]=N.useState(null),[p,x]=N.useState([]),[u,k]=N.useState([]),j=N.useMemo(()=>{const y={};return s.forEach(S=>{if(S.startDate){const I=S.startDate.split("T")[0];y[I]||(y[I]=[]),y[I].push(Q(E({},S),{_displayType:"start"}))}if(S.endDate&&S.endDate!==S.startDate){const I=S.endDate.split("T")[0];y[I]||(y[I]=[]),y[I].push(Q(E({},S),{_displayType:"end"}))}}),y},[s]);N.useEffect(()=>{const y=ds.subscribe(S=>{if(h){const I=S.filter(M=>M.timestamp?new Date(M.timestamp).toISOString().split("T")[0]===h:!1);x(I)}});if(h){const I=ds.getActivities().filter(J=>J.timestamp?new Date(J.timestamp).toISOString().split("T")[0]===h:!1);x(I);const M=j[h]||[];k(M)}return y},[h,j]);const v=()=>{d(new Date(l.getFullYear(),l.getMonth()-1,1))},w=()=>{d(new Date(l.getFullYear(),l.getMonth()+1,1))},P=(y,S)=>new Date(y,S+1,0).getDate(),D=(y,S)=>new Date(y,S,1).getDay(),B=y=>y.toISOString().split("T")[0],F=N.useMemo(()=>{const y={};return ds.getActivities().forEach(S=>{if(!S.timestamp)return;const I=S.timestamp.split("T")[0];y[I]||(y[I]=[]),y[I].push(S)}),y},[]),se=N.useMemo(()=>{const y=l.getFullYear(),S=l.getMonth(),I=P(y,S),M=D(y,S),J=[];for(let ae=0;ae<M;ae++)J.push(null);for(let ae=1;ae<=I;ae++){const he=new Date(y,S,ae),ce=B(he),ie=F[ce]||[],ve=j[ce]||[],Ae=B(new Date)===ce,T=h===ce;J.push({day:ae,date:he,dateKey:ce,activities:ie,projects:ve,isToday:Ae,isSelected:T,activityCount:ie.length,projectCount:ve.length})}return J},[l,F,h]),z=["January","February","March","April","May","June","July","August","September","October","November","December"],C=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],A=y=>{const S=dd[y];if(!S)return e.jsx(Wl,{className:"h-4 w-4"});const I=S.icon;return e.jsx(I,{className:"h-4 w-4"})},L=y=>{const S=dd[y];return(S==null?void 0:S.color)||"bg-gray-500"};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(Ke,{className:"glass-card",children:[e.jsx(_t,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Ot,{className:"flex items-center gap-2",children:[e.jsx(xs,{className:"h-5 w-5"}),"Activity Calendar"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{variant:"outline",size:"sm",onClick:v,className:"hover-shimmer cyrus-ui",children:e.jsx(lc,{className:"h-4 w-4"})}),e.jsxs("span",{className:"text-lg font-semibold min-w-[160px] text-center",children:[z[l.getMonth()]," ",l.getFullYear()]}),e.jsx(le,{variant:"outline",size:"sm",onClick:w,className:"hover-shimmer cyrus-ui",children:e.jsx(Wa,{className:"h-4 w-4"})})]})]})}),e.jsx(Xe,{children:e.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[C.map(y=>e.jsx("div",{className:"h-10 flex items-center justify-center text-sm font-medium text-muted-foreground",children:y},y)),se.map((y,S)=>e.jsx("div",{className:Ce("h-20 border border-border/20 p-1 cursor-pointer transition-all hover:bg-muted/50 relative",(y==null?void 0:y.isToday)&&"bg-primary/10 border-primary/30",(y==null?void 0:y.isSelected)&&"bg-primary/20 border-primary",!y&&"cursor-default"),onClick:()=>y&&f(y.dateKey),children:y&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-sm font-medium",children:y.day}),y.projectCount>0&&e.jsxs("div",{className:"absolute top-6 left-1 right-1",children:[y.projects.slice(0,2).map((I,M)=>e.jsxs("div",{className:Ce("text-xs px-1 py-0.5 rounded mb-1 truncate",pp(I.status)),title:`${I.name} (${I._displayType==="start"?"Start":"End"})`,children:[I._displayType==="start"?"▶":"◀"," ",I.name.slice(0,8)]},M)),y.projectCount>2&&e.jsxs("div",{className:"text-xs text-primary font-medium",children:["+",y.projectCount-2," more"]})]}),y.activityCount>0&&e.jsx("div",{className:"absolute bottom-1 left-1 right-1",children:y.activityCount<=3?e.jsx("div",{className:"flex gap-1",children:y.activities.slice(0,3).map((I,M)=>e.jsx("div",{className:Ce("w-2 h-2 rounded-full flex-shrink-0",L(I.type))},M))}):e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"flex gap-1",children:y.activities.slice(0,2).map((I,M)=>e.jsx("div",{className:Ce("w-2 h-2 rounded-full flex-shrink-0",L(I.type))},M))}),e.jsxs("span",{className:"text-xs font-medium text-primary",children:["+",y.activityCount-2]})]})})]})},S))]})})]})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(Ke,{className:"glass-card h-full",children:[e.jsx(_t,{children:e.jsxs(Ot,{className:"flex items-center gap-2",children:[e.jsx(Wl,{className:"h-5 w-5"}),h?`Activities for ${new Date(h).toLocaleDateString()}`:"Select a Date"]})}),e.jsx(Xe,{children:u.length>0||p.length>0?e.jsxs("div",{className:"space-y-4 max-h-[calc(100vh-350px)] overflow-y-auto pr-1",children:[u.length>0&&e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium mb-2 text-primary",children:"Projects"}),e.jsx("div",{className:"space-y-2",children:u.map((y,S)=>e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg border hover:bg-muted/50 transition-colors cursor-pointer",onClick:()=>i==null?void 0:i(y.id),children:[e.jsx("div",{className:Ce("p-2 rounded-full text-white",pp(y.status)),children:y._displayType==="start"?"▶":"◀"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-medium text-sm truncate",children:y.name}),e.jsx(Qe,{variant:"secondary",className:"text-xs",children:y._displayType==="start"?"Start":"End"})]}),e.jsxs("p",{className:"text-xs text-muted-foreground mb-1",children:["Client: ",y.client]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(xs,{className:"h-3 w-3"}),e.jsxs("span",{children:[y._displayType==="start"?"Starts":"Ends"," today"]}),e.jsx("span",{children:"•"}),e.jsx(Qe,{variant:"outline",className:"text-xs",children:y.status})]})]})]},`${y.id}-${S}`))})]}),p.length>0&&e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium mb-2 text-primary",children:"Activities"}),e.jsx("div",{className:"space-y-2",children:p.map(y=>{var S;return e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg border hover:bg-muted/50 transition-colors cursor-pointer",onClick:()=>o==null?void 0:o(y),children:[e.jsx("div",{className:Ce("p-2 rounded-full text-white",L(y.type)),children:A(y.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-medium text-sm truncate",children:y.details.projectName||y.details.workspaceName||"Activity"}),e.jsx(Qe,{variant:"secondary",className:"text-xs",children:((S=dd[y.type])==null?void 0:S.label)||y.type})]}),y.projectId&&e.jsxs("p",{className:"text-xs text-muted-foreground mb-1",children:["Project: ",y.details.projectName||y.projectId]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(da,{className:"h-3 w-3"}),e.jsx("span",{children:y.userName}),e.jsx("span",{children:"•"}),e.jsx("span",{children:y.timestamp?new Date(y.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"Unknown time"})]})]})]},y.id)})})]})]}):h?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Wl,{className:"h-8 w-8 mx-auto mb-2"}),e.jsx("p",{children:"No projects or activities on this date"}),e.jsx("p",{className:"text-xs mt-1",children:"Projects and activities will appear here"})]}):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(xs,{className:"h-8 w-8 mx-auto mb-2"}),e.jsx("p",{children:"Select a date to view projects and activities"}),e.jsx("p",{className:"text-xs mt-1",children:"Click on any day in the calendar"})]})})]})})]}),e.jsxs(Ke,{className:"glass-card mt-6",children:[e.jsx(_t,{children:e.jsx(Ot,{className:"text-sm",children:"Activity Types"})}),e.jsx(Xe,{children:e.jsx("div",{className:"flex flex-wrap gap-4",children:Object.entries(dd).map(([y,S])=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:Ce("p-1 rounded-full text-white",S.color),children:e.jsx(S.icon,{className:"h-3 w-3"})}),e.jsx("span",{className:"text-sm",children:S.label})]},y))})})]})]})}var p1={exports:{}},g1={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xo=N;function D4(s,t){return s===t&&(s!==0||1/s===1/t)||s!==s&&t!==t}var T4=typeof Object.is=="function"?Object.is:D4,M4=Xo.useState,E4=Xo.useEffect,R4=Xo.useLayoutEffect,O4=Xo.useDebugValue;function F4(s,t){var r=t(),a=M4({inst:{value:r,getSnapshot:t}}),n=a[0].inst,i=a[1];return R4(function(){n.value=r,n.getSnapshot=t,uh(n)&&i({inst:n})},[s,r,t]),E4(function(){return uh(n)&&i({inst:n}),s(function(){uh(n)&&i({inst:n})})},[s]),O4(r),r}function uh(s){var t=s.getSnapshot;s=s.value;try{var r=t();return!T4(s,r)}catch(a){return!0}}function B4(s,t){return t()}var U4=typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"?B4:F4;g1.useSyncExternalStore=Xo.useSyncExternalStore!==void 0?Xo.useSyncExternalStore:U4;p1.exports=g1;var q4=p1.exports;function z4(){return q4.useSyncExternalStore($4,()=>!0,()=>!1)}function $4(){return()=>{}}var Vm="Avatar",[W4,Bk]=fn(Vm),[H4,x1]=W4(Vm),v1=N.forwardRef((s,t)=>{const o=s,{__scopeAvatar:r}=o,a=Me(o,["__scopeAvatar"]),[n,i]=N.useState("idle");return e.jsx(H4,{scope:r,imageLoadingStatus:n,onImageLoadingStatusChange:i,children:e.jsx(Vt.span,Q(E({},a),{ref:t}))})});v1.displayName=Vm;var y1="AvatarImage",b1=N.forwardRef((s,t)=>{const h=s,{__scopeAvatar:r,src:a,onLoadingStatusChange:n=()=>{}}=h,i=Me(h,["__scopeAvatar","src","onLoadingStatusChange"]),o=x1(y1,r),l=V4(a,i),d=Jr(f=>{n(f),o.onImageLoadingStatusChange(f)});return Xr(()=>{l!=="idle"&&d(l)},[l,d]),l==="loaded"?e.jsx(Vt.img,Q(E({},i),{ref:t,src:a})):null});b1.displayName=y1;var w1="AvatarFallback",j1=N.forwardRef((s,t)=>{const d=s,{__scopeAvatar:r,delayMs:a}=d,n=Me(d,["__scopeAvatar","delayMs"]),i=x1(w1,r),[o,l]=N.useState(a===void 0);return N.useEffect(()=>{if(a!==void 0){const h=window.setTimeout(()=>l(!0),a);return()=>window.clearTimeout(h)}},[a]),o&&i.imageLoadingStatus!=="loaded"?e.jsx(Vt.span,Q(E({},n),{ref:t})):null});j1.displayName=w1;function yp(s,t){return s?t?(s.src!==t&&(s.src=t),s.complete&&s.naturalWidth>0?"loaded":"loading"):"error":"idle"}function V4(s,{referrerPolicy:t,crossOrigin:r}){const a=z4(),n=N.useRef(null),i=a?(n.current||(n.current=new window.Image),n.current):null,[o,l]=N.useState(()=>yp(i,s));return Xr(()=>{l(yp(i,s))},[i,s]),Xr(()=>{const d=p=>()=>{l(p)};if(!i)return;const h=d("loaded"),f=d("error");return i.addEventListener("load",h),i.addEventListener("error",f),t&&(i.referrerPolicy=t),typeof r=="string"&&(i.crossOrigin=r),()=>{i.removeEventListener("load",h),i.removeEventListener("error",f)}},[i,r,t]),o}var N1=v1,S1=b1,k1=j1;const uc=N.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Me(n,["className"]);return e.jsx(N1,E({ref:r,className:Ce("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s)},t))});uc.displayName=N1.displayName;const Ym=N.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Me(n,["className"]);return e.jsx(S1,E({ref:r,className:Ce("aspect-square h-full w-full",s)},t))});Ym.displayName=S1.displayName;const hc=N.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Me(n,["className"]);return e.jsx(k1,E({ref:r,className:Ce("flex h-full w-full items-center justify-center rounded-full bg-muted",s)},t))});hc.displayName=k1.displayName;const Y4=({projects:s,onEditProject:t,onStatusChange:r,onArchiveProject:a,onRestoreProject:n,onDeleteProject:i,isLoggedIn:o,onProjectClick:l})=>{const[d,h]=N.useState(new Set(["Active","This month","Next month"])),[f,p]=N.useState(null),x=N.useMemo(()=>{const w=new Date,P=w.getMonth(),D=w.getFullYear(),B={Active:[],"This month":[],"Next month":[],Future:[],Past:[]};return s.forEach(F=>{F.status!=="delivered"&&!F.isArchived&&B.Active.push(F);const se=F.endDate?new Date(F.endDate):null;if(!se){B.Future.find(A=>A.id===F.id)||B.Future.push(F);return}const z=se.getMonth(),C=se.getFullYear();C<D||C===D&&z<P?B.Past.find(A=>A.id===F.id)||B.Past.push(F):C===D&&z===P?B["This month"].find(A=>A.id===F.id)||B["This month"].push(F):C===D&&z===P+1?B["Next month"].find(A=>A.id===F.id)||B["Next month"].push(F):B.Future.find(A=>A.id===F.id)||B.Future.push(F)}),B},[s]),u=w=>{const P=new Set(d);P.has(w)?P.delete(w):P.add(w),h(P)},k=w=>{w.media.length>0&&p({media:w.media,index:0})},j=w=>xe(void 0,null,function*(){try{const P=yield Nt.createWorkspaceForProject(w.id,"moodboard")}catch(P){}}),v=w=>xe(void 0,null,function*(){try{const P=yield Nt.createWorkspaceForProject(w.id,"whiteboard")}catch(P){}});return e.jsxs("div",{className:"p-4 space-y-4",children:[Object.entries(x).map(([w,P])=>e.jsxs(Ke,{className:"glass-card shadow-md monday-group-card",children:[e.jsx("div",{className:"flex justify-between items-center px-6 py-3 bg-muted/50 cursor-pointer hover:bg-muted transition-colors monday-group-header",onClick:()=>u(w),children:e.jsxs("div",{className:"flex items-center gap-2",children:[d.has(w)?e.jsx(Wo,{className:"h-5 w-5 text-muted-foreground"}):e.jsx(Wa,{className:"h-5 w-5 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold",children:w}),e.jsx(Qe,{variant:"outline",className:"ml-2 bg-primary/10",children:P.length})]})}),d.has(w)&&P.length>0&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-muted bg-muted/30",children:[e.jsx("th",{className:"text-left py-1 px-4 pl-6 w-[16%] font-medium text-sm text-muted-foreground",children:"Project"}),e.jsx("th",{className:"text-left py-1 px-4 w-20 font-medium text-sm text-muted-foreground",children:"PM"}),e.jsx("th",{className:"text-center py-1 px-4 w-[12rem] font-medium text-sm text-muted-foreground",children:"Status"}),e.jsx("th",{className:"text-center py-1 px-4 font-medium text-sm text-muted-foreground",children:"Timeline"}),e.jsx("th",{className:"text-center py-1 px-4 w-20 font-medium text-sm text-muted-foreground",children:"Images"}),e.jsx("th",{className:"text-center py-1 px-4 w-24 font-medium text-sm text-muted-foreground",children:"Brief"}),e.jsx("th",{className:"text-center py-1 px-4 w-24 font-medium text-sm text-muted-foreground",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(ar,{className:"h-3 w-3"}),e.jsx("span",{children:"Moodboard"})]})}),e.jsx("th",{className:"text-center py-1 px-4 w-24 font-medium text-sm text-muted-foreground",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(Mr,{className:"h-3 w-3"}),e.jsx("span",{children:"Whiteboard"})]})}),e.jsx("th",{className:"py-1 px-4 w-12"})]})}),e.jsx("tbody",{children:P.map(D=>{var B;return e.jsxs("tr",{className:"border-b border-muted hover:bg-muted/20 transition-colors cursor-pointer",onClick:()=>l(D.id),children:[e.jsx("td",{className:"py-1 px-4 pl-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full flex-shrink-0 ${nm(D.priority)}`}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-sm",children:D.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:D.client})]})]})}),e.jsx("td",{className:"py-1 px-4",children:e.jsx(Ti,{children:e.jsxs(ei,{children:[e.jsx(ti,{asChild:!0,children:e.jsx(uc,{className:"h-8 w-8",children:e.jsx(hc,{className:"bg-primary/10 text-primary",children:D.projectManager?D.projectManager.substring(0,2).toUpperCase():"NA"})})}),e.jsx(mn,{children:e.jsx("p",{children:D.projectManager||"Not assigned"})})]})})}),e.jsx("td",{className:"py-1 px-4 text-center",onClick:F=>F.stopPropagation(),children:e.jsxs(bs,{value:D.status,onValueChange:F=>r(D,F),children:[e.jsx(fs,{className:`w-full max-w-[190px] mx-auto py-1 px-3 text-xs font-medium hover-shimmer border-l-4 ${Rd(D.status)}`,children:e.jsx(ws,{children:((B=oa.find(F=>F.value===D.status))==null?void 0:B.label)||D.status})}),e.jsx(ps,{children:oa.map(F=>e.jsx(tt,{value:F.value,children:F.label},F.value))})]})}),e.jsx("td",{className:"py-1 px-4 pr-6",children:e.jsx("div",{className:"min-w-[300px]",children:e.jsx(Y0,{project:D,isCompact:!0})})}),e.jsx("td",{className:"py-1 px-4 text-center",children:D.media.length>0?e.jsx("div",{className:"w-12 h-12 mx-auto cursor-pointer",onClick:F=>{F.stopPropagation(),k(D)},children:e.jsx("img",{src:D.media[0].url,alt:D.media[0].filename,className:"w-full h-full object-cover rounded-md hover:scale-105 transition-transform"})}):e.jsx("span",{className:"text-xs text-muted-foreground",children:"None"})}),e.jsx("td",{className:"py-1 px-4 text-center",children:D.brief?e.jsx(Ti,{children:e.jsxs(ei,{children:[e.jsx(ti,{asChild:!0,children:e.jsx(le,{variant:"ghost",size:"icon",className:"h-8 w-8 hover-shimmer",onClick:F=>F.stopPropagation(),children:e.jsx(Cd,{className:"h-4 w-4"})})}),e.jsx(mn,{className:"max-w-sm",children:e.jsx("p",{children:D.brief})})]})}):e.jsx("span",{className:"text-xs text-muted-foreground",children:"None"})}),e.jsx("td",{className:"py-1 px-4 text-center",children:e.jsx(le,{variant:"ghost",size:"icon",className:"h-8 w-8 hover-shimmer",onClick:F=>{F.stopPropagation(),j(D)},children:e.jsx(ar,{className:"h-4 w-4 text-purple-500"})})}),e.jsx("td",{className:"py-1 px-4 text-center",children:e.jsx(le,{variant:"ghost",size:"icon",className:"h-8 w-8 hover-shimmer",onClick:F=>{F.stopPropagation(),v(D)},children:e.jsx(Mr,{className:"h-4 w-4 text-green-500"})})}),e.jsx("td",{className:"py-1 px-4 text-center",children:o&&e.jsxs(Yo,{children:[e.jsx(Go,{asChild:!0,children:e.jsx(le,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:F=>F.stopPropagation(),children:e.jsx(Gl,{className:"h-4 w-4"})})}),e.jsxs(Fi,{align:"end",onClick:F=>F.stopPropagation(),children:[e.jsxs(as,{onClick:()=>t(D),children:[e.jsx(Jl,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Edit"})]}),D.isArchived?e.jsxs(as,{onClick:()=>n(D),children:[e.jsx(Ch,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Restore"})]}):e.jsxs(as,{onClick:()=>a(D),children:[e.jsx(Ah,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Archive"})]}),e.jsxs(as,{onClick:()=>i(D),className:"text-red-500",children:[e.jsx(jr,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Delete"})]})]})]})})]},D.id)})})]})}),d.has(w)&&P.length===0&&e.jsx("div",{className:"text-center p-8 text-muted-foreground",children:"No projects in this group."})]},w)),f&&e.jsx(Um,{media:f.media,initialIndex:f.index,onClose:()=>p(null)})]})};function C1({projectId:s,limit:t=20,onActivityClick:r,showFilters:a=!1,userId:n,isMainActivityTab:i=!1,showRefreshButton:o=!1,hideAllUsersFilter:l=!1}){const[d,h]=N.useState(""),[f,p]=N.useState("all"),[x,u]=N.useState("all"),[k,j]=N.useState("");N.useEffect(()=>{const me=setTimeout(()=>{j(d)},300);return()=>clearTimeout(me)},[d]);const[v,w]=N.useState(null),[P,D]=N.useState(""),[B,F]=N.useState(!1),[se,z]=N.useState(!1),[C,A]=N.useState([]),L=typeof window!="undefined"&&window.pulse2?window.pulse2:null,y=typeof window!="undefined"&&localStorage.getItem("jwtToken")||"",S=N.useCallback((me,we={})=>{const oe=E({},we.headers||{});return y&&(oe.Authorization=`Bearer ${y}`),L!=null&&L.nonce&&(oe["X-WP-Nonce"]=L.nonce),fetch(me,Q(E({},we),{headers:oe}))},[y,L]);N.useEffect(()=>{L&&S(`${L.apiUrl}/settings`).then(me=>me.json()).then(me=>w(me)).catch(()=>w({}))},[L,S]),N.useMemo(()=>["activities",s,n,t,k,f],[s,n,t,k,f]);const[I,M]=N.useState([]),[J,ae]=N.useState(!1),[he,ce]=N.useState(null);N.useEffect(()=>{const me=ds.subscribe(oe=>{let ee=oe;n&&(ee=ee.filter(Ee=>Ee.userId===n));const H=ee.map(Ee=>{var Fe,Ie,Ue,Ye;return{id:Ee.id,type:Ee.type,title:Ee.title,description:Ee.title,userId:Ee.userId,userName:Ee.userName,projectId:Ee.projectId||"",projectName:((Fe=Ee.metadata)==null?void 0:Fe.projectName)||"",relatedId:((Ie=Ee.metadata)==null?void 0:Ie.imageId)||((Ue=Ee.metadata)==null?void 0:Ue.commentId)||((Ye=Ee.metadata)==null?void 0:Ye.pinId)||"",createdAt:Ee.date}});M(H)}),we=ds.getActivities().map(oe=>{var ee,H,Ee,Fe;return{id:oe.id,type:oe.type,title:oe.title,description:oe.title,userId:oe.userId,userName:oe.userName,projectId:oe.projectId||"",projectName:((ee=oe.metadata)==null?void 0:ee.projectName)||"",relatedId:((H=oe.metadata)==null?void 0:H.imageId)||((Ee=oe.metadata)==null?void 0:Ee.commentId)||((Fe=oe.metadata)==null?void 0:Fe.pinId)||"",createdAt:oe.date}});return M(we),me},[n]);const ie=N.useCallback(()=>{const me=ds.getActivities().map(we=>{var oe,ee,H,Ee;return{id:we.id,type:we.type,title:we.title,description:we.title,userId:we.userId,userName:we.userName,projectId:we.projectId||"",projectName:((oe=we.metadata)==null?void 0:oe.projectName)||"",relatedId:((ee=we.metadata)==null?void 0:ee.imageId)||((H=we.metadata)==null?void 0:H.commentId)||((Ee=we.metadata)==null?void 0:Ee.pinId)||"",createdAt:we.date}});M(me)},[]),[ve,Ae]=N.useState(1),[T,U]=N.useState(!0),[V,re]=N.useState(!1);N.useEffect(()=>{U(I.length===t)},[I,t]);const G=()=>xe(this,null,function*(){if(!(!L||!T||V)){re(!0);try{const me=ve+1;let we=`${L.apiUrl}/activities?limit=${t}&page=${me}`;s&&(we+=`&project_id=${s}`),n&&(we+=`&user_id=${n}`),k.trim()&&(we+=`&search=${encodeURIComponent(k.trim())}`),f!=="all"&&(we+=`&type=${encodeURIComponent(f)}`);const oe=yield S(we);if(!oe.ok)throw new Error("Failed to fetch more activities");const ee=yield oe.json();U(ee.length===t),Ae(me)}catch(me){}finally{re(!1)}}}),Y=I.filter(me=>{if(x!=="all"){const we=typeof window!="undefined"?localStorage.getItem("userId"):null;if(x==="me"&&me.userId!==we||x==="others"&&me.userId===we)return!1}return!0}),Z=me=>{switch(me){case"note_added":case"note_edited":case"note_deleted":return e.jsx(Nr,{className:"h-4 w-4"});case"project_created":return e.jsx(gs,{className:"h-4 w-4"});case"status_changed":return e.jsx(Pm,{className:"h-4 w-4"});case"member_added":case"member_removed":return e.jsx(da,{className:"h-4 w-4"});case"deadline_extended":case"deadline_shortened":return e.jsx(xs,{className:"h-4 w-4"});default:return e.jsx(Jl,{className:"h-4 w-4"})}},de=me=>{switch(me){case"project_created":return"bg-green-100 text-green-800";case"note_added":return"bg-blue-100 text-blue-800";case"note_edited":return"bg-yellow-100 text-yellow-800";case"note_deleted":return"bg-red-100 text-red-800";case"status_changed":return"bg-purple-100 text-purple-800";case"member_added":return"bg-indigo-100 text-indigo-800";case"member_removed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},Le=(me,we)=>{try{const oe=JSON.parse(me);let ee="";return oe.noteContentPreview?ee=oe.noteContentPreview:oe.projectName?ee=`Project: ${oe.projectName}`:oe.statusFrom&&oe.statusTo?ee=`Status changed from ${oe.statusFrom} to ${oe.statusTo}`:ee=me,we.projectName&&!ee.includes("Project:")&&(ee+=` • Project: ${we.projectName}`),ee}catch(oe){let ee=me;return we.projectName&&!ee.includes("Project:")&&(ee+=` • Project: ${we.projectName}`),ee}},X=()=>xe(this,null,function*(){if(!(!P.trim()||!L)){F(!0);try{const me=[];if(C.length>0){const oe=localStorage.getItem("userName")||"unknown",ee=localStorage.getItem("userId")||"unknown";for(const H of C){const Ee=new FormData,Fe=Date.now(),Ie=H.name.split(".").pop(),Ue=`${oe}_${ee}_${Fe}.${Ie}`;Ee.append("file",new File([H],Ue,{type:H.type})),Ee.append("title",`Idea by ${oe}`),Ee.append("alt_text",`Image shared by ${oe}`);const Ye=yield S(`${L.mediaUrl||"/wp-json/wp/v2/media"}`,{method:"POST",body:Ee});if(Ye.ok){const We=yield Ye.json();me.push(We.id.toString())}}}(yield S(`${L.apiUrl}/notes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:P,project_id:s||"general",is_team_note:!0,type:s?"project_note":"general_idea",media_ids:me})})).ok&&(D(""),A([]),z(!1),ie())}catch(me){}finally{F(!1)}}});return J?e.jsxs(Ke,{children:[e.jsx(_t,{children:e.jsxs(Ot,{className:"flex items-center gap-2",children:[e.jsx(jo,{className:"h-5 w-5 animate-spin"}),"Activity Feed"]})}),e.jsx(Xe,{children:e.jsx("div",{className:"space-y-4",children:[1,2,3].map(me=>e.jsxs("div",{className:"flex items-center gap-3 p-4 border rounded-lg animate-pulse",children:[e.jsx("div",{className:"h-8 w-8 bg-muted rounded-full"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-1/3"}),e.jsx("div",{className:"h-3 bg-muted rounded w-1/2"})]})]},me))})})]}):he?e.jsxs(Ke,{children:[e.jsx(_t,{children:e.jsx(Ot,{children:"Activity Feed"})}),e.jsx(Xe,{children:e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx("p",{children:"Failed to load activities"}),e.jsxs(le,{onClick:()=>ie(),variant:"outline",className:"mt-2",children:[e.jsx(jo,{className:"h-4 w-4 mr-2"}),"Retry"]})]})})]}):e.jsxs(Ke,{children:[e.jsxs(_t,{children:[e.jsxs(Ot,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Activity Feed"}),e.jsxs("div",{className:"flex items-center gap-2",children:[o&&e.jsxs(le,{onClick:()=>ie(),variant:"outline",size:"sm",children:[e.jsx(jo,{className:"h-4 w-4 mr-2"}),"Refresh"]}),e.jsxs(le,{onClick:()=>z(!se),variant:"outline",size:"sm",className:"rounded-full px-3",children:[e.jsx(gs,{className:"h-4 w-4 mr-2"})," ",s?"Add Note":"Share Idea"]}),e.jsx(le,{onClick:()=>ie(),variant:"outline",size:"sm",children:e.jsx(jo,{className:"h-4 w-4"})})]})]}),se&&e.jsx("div",{className:"mt-4 p-4 border rounded-lg bg-muted/50",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 p-2 rounded-full bg-primary/10",children:e.jsx(Nr,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(Sr,{placeholder:s?"Add a project note... Use @ to mention people, add links, or attach images":"Share a general idea with the team... Use @ to mention people, add links, or attach images",value:P,onChange:me=>D(me.target.value),className:"min-h-[80px] resize-none",onKeyDown:me=>{me.key==="Enter"&&(me.metaKey||me.ctrlKey)&&X()}}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:me=>{me.target.files&&A(Array.from(me.target.files))},className:"hidden",id:"image-upload"}),e.jsxs(le,{type:"button",variant:"outline",size:"sm",onClick:()=>{var me;return(me=document.getElementById("image-upload"))==null?void 0:me.click()},children:[e.jsx(qy,{className:"h-4 w-4 mr-2"}),"Attach Images"]}),C.length>0&&e.jsxs("span",{className:"text-sm text-muted-foreground",children:[C.length," image(s) selected"]})]}),C.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:C.map((me,we)=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:URL.createObjectURL(me),alt:`Selected ${we+1}`,className:"w-16 h-16 object-cover rounded border"}),e.jsx(le,{size:"sm",variant:"destructive",className:"absolute -top-2 -right-2 h-6 w-6 rounded-full p-0",onClick:()=>{A(oe=>oe.filter((ee,H)=>H!==we))},children:e.jsx(Hs,{className:"h-3 w-3"})})]},we))}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx("span",{children:"Press Cmd/Ctrl + Enter to send"}),e.jsx("span",{children:"•"}),e.jsx("span",{children:"Use @ to mention people"}),e.jsx("span",{children:"•"}),e.jsx("span",{children:"Paste links to attach"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(le,{onClick:()=>z(!1),variant:"outline",size:"sm",children:"Cancel"}),e.jsxs(le,{onClick:X,disabled:!P.trim()||B,size:"sm",children:[e.jsx(hn,{className:"h-4 w-4 mr-2"}),B?"Sending...":s?"Send Note":"Share Idea"]})]})]})]})]})}),a&&e.jsxs("div",{className:"flex items-center gap-4 mt-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(dn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(Pt,{placeholder:"Search activities...",value:d,onChange:me=>h(me.target.value),className:"pl-10"})]})}),e.jsxs(bs,{value:f,onValueChange:p,children:[e.jsx(fs,{className:"w-48",children:e.jsx(ws,{placeholder:"Filter by type"})}),e.jsxs(ps,{children:[e.jsx(tt,{value:"all",children:"All Activities"}),e.jsx(tt,{value:"project_created",children:"Project Created"}),e.jsx(tt,{value:"note_added",children:"Note Added"}),e.jsx(tt,{value:"note_edited",children:"Note Edited"}),e.jsx(tt,{value:"note_deleted",children:"Note Deleted"}),e.jsx(tt,{value:"status_changed",children:"Status Changed"}),e.jsx(tt,{value:"member_added",children:"Member Added"}),e.jsx(tt,{value:"member_removed",children:"Member Removed"})]})]}),!l&&e.jsxs(bs,{value:x,onValueChange:u,children:[e.jsx(fs,{className:"w-48",children:e.jsx(ws,{placeholder:"Filter by user"})}),e.jsxs(ps,{children:[e.jsx(tt,{value:"all",children:"All Users"}),e.jsx(tt,{value:"me",children:"My Activities"}),e.jsx(tt,{value:"others",children:"Others' Activities"})]})]})]})]}),e.jsx(Xe,{children:e.jsxs("div",{className:"space-y-4",children:[Y.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Nr,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No activities found"})]}):Y.map(me=>e.jsxs("div",{className:`flex items-start gap-3 p-4 border rounded-lg transition-colors ${r?"hover:bg-muted/50 cursor-pointer":"hover:bg-muted/50"}`,onClick:()=>{r?r(me):v!=null&&v.app_url&&me.projectId&&(window.location.href=`${v.app_url}#project-${me.projectId}`)},children:[e.jsx("div",{className:"flex-shrink-0 p-2 rounded-full bg-muted",children:Z(me.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-medium text-sm",children:me.userName}),e.jsx(Qe,{className:de(me.type),children:me.title}),e.jsx("span",{className:"text-xs text-muted-foreground",children:Zn(new Date(me.createdAt),{addSuffix:!0})})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:Le(me.description,me)}),me.projectName&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Project: ",me.projectName]})]})]},me.id)),T&&e.jsx(le,{onClick:G,disabled:V,className:"w-full mt-4",children:V?"Loading...":"Load More"})]})})]})}var iu="Switch",[G4,Uk]=fn(iu),[J4,K4]=G4(iu),A1=N.forwardRef((s,t)=>{const D=s,{__scopeSwitch:r,name:a,checked:n,defaultChecked:i,required:o,disabled:l,value:d="on",onCheckedChange:h,form:f}=D,p=Me(D,["__scopeSwitch","name","checked","defaultChecked","required","disabled","value","onCheckedChange","form"]),[x,u]=N.useState(null),k=As(t,B=>u(B)),j=N.useRef(!1),v=x?f||!!x.closest("form"):!0,[w,P]=$o({prop:n,defaultProp:i!=null?i:!1,onChange:h,caller:iu});return e.jsxs(J4,{scope:r,checked:w,disabled:l,children:[e.jsx(Vt.button,Q(E({type:"button",role:"switch","aria-checked":w,"aria-required":o,"data-state":I1(w),"data-disabled":l?"":void 0,disabled:l,value:d},p),{ref:k,onClick:Rt(s.onClick,B=>{P(F=>!F),v&&(j.current=B.isPropagationStopped(),j.current||B.stopPropagation())})})),v&&e.jsx(L1,{control:x,bubbles:!j.current,name:a,value:d,checked:w,required:o,disabled:l,form:f,style:{transform:"translateX(-100%)"}})]})});A1.displayName=iu;var P1="SwitchThumb",_1=N.forwardRef((s,t)=>{const i=s,{__scopeSwitch:r}=i,a=Me(i,["__scopeSwitch"]),n=K4(P1,r);return e.jsx(Vt.span,Q(E({"data-state":I1(n.checked),"data-disabled":n.disabled?"":void 0},a),{ref:t}))});_1.displayName=P1;var X4="SwitchBubbleInput",L1=N.forwardRef((o,i)=>{var l=o,{__scopeSwitch:s,control:t,checked:r,bubbles:a=!0}=l,n=Me(l,["__scopeSwitch","control","checked","bubbles"]);const d=N.useRef(null),h=As(d,i),f=Fm(r),p=Pg(t);return N.useEffect(()=>{const x=d.current;if(!x)return;const u=window.HTMLInputElement.prototype,j=Object.getOwnPropertyDescriptor(u,"checked").set;if(f!==r&&j){const v=new Event("click",{bubbles:a});j.call(x,r),x.dispatchEvent(v)}},[f,r,a]),e.jsx("input",Q(E({type:"checkbox","aria-hidden":!0,defaultChecked:r},n),{tabIndex:-1,ref:h,style:Q(E(E({},n.style),p),{position:"absolute",pointerEvents:"none",opacity:0,margin:0})}))});L1.displayName=X4;function I1(s){return s?"checked":"unchecked"}var D1=A1,Q4=_1;const T1=N.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Me(n,["className"]);return e.jsx(D1,Q(E({className:Ce("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s)},t),{ref:r,children:e.jsx(Q4,{className:Ce("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}))});T1.displayName=D1.displayName;const Gm=()=>typeof window!="undefined"&&window.pulse2?window.pulse2:null,Jm=()=>typeof window!="undefined"&&localStorage.getItem("jwtToken")||"",M1=()=>xe(void 0,null,function*(){const s=Gm();if(!s)throw new Error("API not available");const t=yield fetch(`${s.apiUrl}/token/refresh`,{method:"POST",headers:{Authorization:`Bearer ${Jm()}`}});if(!t.ok)throw new Error("Token refresh failed");const r=yield t.json();return localStorage.setItem("jwtToken",r.token),r.token}),Z4=()=>xe(void 0,null,function*(){const s=Jm();if(s)try{const t=s.split(".")[1];if(!t)return;const r=JSON.parse(atob(t));if(!r.exp)return;const a=r.exp*1e3,n=Date.now();a-n<5*60*1e3&&(yield M1())}catch(t){}}),va=(r,...a)=>xe(void 0,[r,...a],function*(s,t={}){yield Z4();const n=Gm();let i=Jm();const o=Q(E({},t.headers),{Authorization:`Bearer ${i}`});n!=null&&n.nonce&&(o["X-WP-Nonce"]=n.nonce);let l=yield fetch(s,Q(E({},t),{headers:o}));if(l.status===401)try{i=yield M1(),o.Authorization=`Bearer ${i}`,l=yield fetch(s,Q(E({},t),{headers:o}))}catch(d){typeof window!="undefined"&&(localStorage.removeItem("jwtToken"),localStorage.removeItem("userId"),localStorage.removeItem("userDisplayName"))}return l});function e3(){const{toast:s}=Pa(),t=Xd(),r=Gm(),[a,n]=N.useState(()=>{if(typeof window!="undefined"){const C=localStorage.getItem("userId"),A=localStorage.getItem("userDisplayName"),L=localStorage.getItem("jwtToken");if(C&&A&&L)return{id:C,username:A,email:"",display_name:A,role:"subscriber",timezone:"UTC",notifications_enabled:"true",status:"active",created_at:new Date().toISOString(),last_active:new Date().toISOString()}}return null}),{data:i=[],isLoading:o}=Dd({queryKey:["users"],queryFn:()=>xe(this,null,function*(){if(!r)return[];const[C,A]=yield Promise.all([va(`${r.apiUrl}/users`),va(`${r.apiUrl}/presence`)]);if(!C.ok)throw new Error("Failed to fetch users");const L=yield C.json(),y=A.ok?yield A.json():[];return L.map(S=>{const I=y.find(M=>M.userId===S.id);return Q(E({},S),{isOnline:(I==null?void 0:I.isOnline)||!1,lastActivity:(I==null?void 0:I.lastActivity)||null})})}),enabled:!!r&&!!a}),{data:l=[],isLoading:d}=Dd({queryKey:["invitations"],queryFn:()=>xe(this,null,function*(){if(!r)return[];const C=yield va(`${r.apiUrl}/invitations`);if(!C.ok)throw new Error("Failed to fetch invitations");return C.json()}),enabled:!!r&&!!a}),h=Oa({mutationFn:C=>xe(this,null,function*(){if(!r)throw new Error("API not available");const A=yield va(`${r.apiUrl}/users`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(C)});if(!A.ok){const L=yield A.json();throw new Error(L.message||"Failed to create user")}return A.json()}),onSuccess:C=>{t.invalidateQueries({queryKey:["users"]}),t.invalidateQueries({queryKey:["invitations"]}),s({title:"User created successfully",description:`User ${C.user.display_name} has been created.`}),C.credentials&&s({title:"User Credentials",description:`Username: ${C.credentials.username}
Password: ${C.credentials.password}

Please share these credentials securely with the user.`,duration:1e4})},onError:C=>{s({title:"Failed to create user",description:C instanceof Error?C.message:"An error occurred",variant:"destructive"})}}),f=Oa({mutationFn:L=>xe(this,[L],function*({userId:C,updates:A}){if(!r)throw new Error("API not available");const y=yield va(`${r.apiUrl}/users/${C}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(A)});if(!y.ok){const S=yield y.json();throw new Error(S.message||"Failed to update user")}return y.json()}),onSuccess:C=>{t.invalidateQueries({queryKey:["users"]}),s({title:"User updated successfully",description:`User ${C.display_name} has been updated.`})},onError:C=>{s({title:"Failed to update user",description:C instanceof Error?C.message:"An error occurred",variant:"destructive"})}}),p=Oa({mutationFn:C=>xe(this,null,function*(){if(!r)throw new Error("API not available");const A=yield va(`${r.apiUrl}/users/${C}`,{method:"DELETE"});if(!A.ok){const L=yield A.json();throw new Error(L.message||"Failed to delete user")}}),onSuccess:()=>{t.invalidateQueries({queryKey:["users"]}),s({title:"User deleted successfully",description:"The user has been removed from the system."})},onError:C=>{s({title:"Failed to delete user",description:C instanceof Error?C.message:"An error occurred",variant:"destructive"})}}),x=Oa({mutationFn:C=>xe(this,null,function*(){if(!r)throw new Error("API not available");const A=v(),L=yield va(`${r.apiUrl}/invitations`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Q(E({},C),{invited_by:(A==null?void 0:A.id)||"",invited_by_name:(A==null?void 0:A.display_name)||"",status:"pending",expires_at:new Date(Date.now()+7*24*60*60*1e3).toISOString()}))});if(!L.ok){const y=yield L.json();throw new Error(y.message||"Failed to create invitation")}return L.json()}),onSuccess:C=>{t.invalidateQueries({queryKey:["invitations"]});const A=C.invitation||C;s({title:"Invitation sent",description:`Invitation has been sent to ${A.email}`})},onError:C=>{s({title:"Failed to send invitation",description:C instanceof Error?C.message:"An error occurred",variant:"destructive"})}}),u=Oa({mutationFn:L=>xe(this,[L],function*({invitationId:C,updates:A}){if(!r)throw new Error("API not available");const y=yield va(`${r.apiUrl}/invitations/${C}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(A)});if(!y.ok){const S=yield y.json();throw new Error(S.message||"Failed to update invitation")}return y.json()}),onSuccess:()=>{t.invalidateQueries({queryKey:["invitations"]}),s({title:"Invitation updated",description:"The invitation has been updated successfully."})},onError:C=>{s({title:"Failed to update invitation",description:C instanceof Error?C.message:"An error occurred",variant:"destructive"})}}),k=Oa({mutationFn:C=>xe(this,null,function*(){if(!r)throw new Error("API not available");const A=yield va(`${r.apiUrl}/invitations/${C}`,{method:"DELETE"});if(!A.ok){const L=yield A.json();throw new Error(L.message||"Failed to delete invitation")}}),onSuccess:()=>{t.invalidateQueries({queryKey:["invitations"]}),s({title:"Invitation cancelled",description:"The invitation has been cancelled."})},onError:C=>{s({title:"Failed to cancel invitation",description:C instanceof Error?C.message:"An error occurred",variant:"destructive"})}}),j=Oa({mutationFn:C=>xe(this,null,function*(){if(!r)throw new Error("API not available");const A=yield va(`${r.apiUrl}/password-reset`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:C})});if(!A.ok){const L=yield A.json();throw new Error(L.message||"Failed to request password reset")}return A.json()}),onSuccess:()=>{s({title:"Password reset requested",description:"If an account exists with this email, a password reset link has been sent."})},onError:C=>{s({title:"Failed to request password reset",description:C instanceof Error?C.message:"An error occurred",variant:"destructive"})}}),v=N.useCallback(()=>a,[a]),w=N.useCallback(()=>xe(this,null,function*(){if(!(!r||!a))try{yield va(`${r.apiUrl}/presence`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({timestamp:new Date().toISOString()})})}catch(C){}}),[r,a]);N.useEffect(()=>{a&&w()},[a,w]);const P=N.useCallback(C=>{if(!a)return!1;const A={administrator:["all"],editor:["edit_posts","create_users","invite_members"],author:["edit_posts","add_notes"],contributor:["add_notes"],subscriber:["view_projects"]},L=a.role,y=A[L]||[];return y.includes("all")||y.includes(C)},[a]),D=N.useCallback(()=>P("create_users"),[P]),B=N.useCallback(()=>P("invite_members"),[P]),F=N.useCallback(()=>P("edit_posts"),[P]),se=N.useCallback(()=>P("add_notes"),[P]),z=N.useCallback(C=>i.filter(A=>A.role===C),[i]);return{currentUser:a,users:i,invitations:l,loadingUsers:o,loadingInvitations:d,createUser:h.mutate,updateUser:f.mutate,deleteUser:p.mutate,createInvitation:x.mutate,updateInvitation:u.mutate,deleteInvitation:k.mutate,requestPasswordReset:j.mutate,isCreatingUser:h.isPending,isUpdatingUser:f.isPending,isDeletingUser:p.isPending,isCreatingInvitation:x.isPending,isUpdatingInvitation:u.isPending,isDeletingInvitation:k.isPending,isRequestingPasswordReset:j.isPending,hasPermission:P,canManageUsers:D,canInviteMembers:B,canEditProjects:F,canAddNotes:se,getUsersByRole:z,getCurrentUser:v}}var t3="Separator",bp="horizontal",s3=["horizontal","vertical"],E1=N.forwardRef((s,t)=>{const d=s,{decorative:r,orientation:a=bp}=d,n=Me(d,["decorative","orientation"]),i=r3(a)?a:bp,l=r?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return e.jsx(Vt.div,Q(E(E({"data-orientation":i},l),n),{ref:t}))});E1.displayName=t3;function r3(s){return s3.includes(s)}var R1=E1;const Zl=N.forwardRef((i,n)=>{var o=i,{className:s,orientation:t="horizontal",decorative:r=!0}=o,a=Me(o,["className","orientation","decorative"]);return e.jsx(R1,E({ref:n,decorative:r,orientation:t,className:Ce("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",s)},a))});Zl.displayName=R1.displayName;function a3({currentUser:s,hasPermission:t,setIsEditProfileDialogOpen:r,setIsPasswordResetDialogOpen:a,getRoleColor:n}){var i,o;return e.jsxs(Ke,{className:"glass-card",children:[e.jsx(_t,{children:e.jsxs(Ot,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"My Profile"}),e.jsxs(le,{variant:"outline",size:"sm",onClick:()=>r(!0),disabled:!t("canEditUsers"),className:"glass-card hover:shadow-lg transition-all duration-300",children:[e.jsx(Jl,{className:"h-4 w-4 mr-2"}),"Edit Profile"]})]})}),e.jsx(Xe,{children:e.jsxs("div",{className:"flex items-start gap-6",children:[e.jsxs(uc,{className:"h-20 w-20",children:[e.jsx(Ym,{src:s.avatar||void 0}),e.jsx(hc,{className:"text-lg",children:((i=s.displayName)==null?void 0:i.split(" ").map(l=>l[0]).join(""))||((o=s.username)==null?void 0:o.charAt(0).toUpperCase())||"U"})]}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold",children:s.displayName}),e.jsx("p",{className:"text-muted-foreground",children:s.email}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(Qe,{className:n(s.role),children:s.role.replace("_"," ")}),e.jsx(Qe,{variant:"outline",children:s.status})]})]}),s.bio&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-1",children:"Bio"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.bio})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Username:"}),e.jsx("p",{className:"text-muted-foreground",children:s.username})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Timezone:"}),e.jsx("p",{className:"text-muted-foreground",children:s.timezone})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Member since:"}),e.jsx("p",{className:"text-muted-foreground",children:s.createdAt&&!isNaN(new Date(s.createdAt).getTime())?Zn(new Date(s.createdAt),{addSuffix:!0}):"Unknown"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Last active:"}),e.jsx("p",{className:"text-muted-foreground",children:s.lastActive&&!isNaN(new Date(s.lastActive).getTime())?Zn(new Date(s.lastActive),{addSuffix:!0}):"Unknown"})]})]}),e.jsx(Zl,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Password Management"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Request a password reset or change your password"})]}),e.jsxs(le,{variant:"outline",onClick:()=>a(!0),className:"glass-card hover:shadow-lg transition-all duration-300",children:[e.jsx(Cm,{className:"h-4 w-4 mr-2"}),"Reset Password"]})]})]})]})})]})}function n3({teamStats:s,users:t,loadingUsers:r,currentUser:a,hasPermission:n,handleDeleteUser:i,isDeletingUser:o,getRoleColor:l}){return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(Ke,{className:"glass-card",children:[e.jsx(_t,{className:"pb-2",children:e.jsx(Ot,{className:"text-sm font-medium",children:"Total Members"})}),e.jsx(Xe,{children:e.jsx("div",{className:"text-2xl font-bold",children:s.totalMembers})})]}),e.jsxs(Ke,{className:"glass-card",children:[e.jsx(_t,{className:"pb-2",children:e.jsx(Ot,{className:"text-sm font-medium",children:"Active Members"})}),e.jsx(Xe,{children:e.jsx("div",{className:"text-2xl font-bold",children:s.activeMembers})})]}),e.jsxs(Ke,{className:"glass-card",children:[e.jsx(_t,{className:"pb-2",children:e.jsx(Ot,{className:"text-sm font-medium",children:"Projects"})}),e.jsx(Xe,{children:e.jsx("div",{className:"text-2xl font-bold",children:s.projectsCount})})]}),e.jsxs(Ke,{className:"glass-card",children:[e.jsx(_t,{className:"pb-2",children:e.jsx(Ot,{className:"text-sm font-medium",children:"Avg Response Time"})}),e.jsx(Xe,{children:e.jsxs("div",{className:"text-2xl font-bold",children:[s.averageResponseTime,"h"]})})]})]}),e.jsxs(Ke,{className:"glass-card",children:[e.jsx(_t,{children:e.jsxs(Ot,{className:"flex items-center gap-2",children:[e.jsx(dr,{className:"h-5 w-5"}),"Team Members"]})}),e.jsx(Xe,{children:r?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(d=>e.jsxs("div",{className:"flex items-center gap-3 p-4 border rounded-lg animate-pulse",children:[e.jsx("div",{className:"h-10 w-10 bg-muted rounded-full"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-1/3"}),e.jsx("div",{className:"h-3 bg-muted rounded w-1/2"})]})]},d))}):e.jsxs("div",{className:"space-y-4",children:[t.map(d=>{var h,f;return e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(uc,{children:[e.jsx(Ym,{src:d.avatar||void 0}),e.jsx(hc,{children:((h=d.display_name)==null?void 0:h.split(" ").map(p=>p[0]).join(""))||((f=d.username)==null?void 0:f.charAt(0).toUpperCase())||"U"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:d.display_name}),e.jsx(Qe,{className:l(d.role),children:d.role.replace("_"," ")}),e.jsx(Qe,{variant:"outline",children:d.status})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:d.email}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Last active ",Zn(new Date(d.last_active),{addSuffix:!0})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[n("canEditUsers")&&e.jsx(le,{variant:"outline",size:"sm",className:"hover-shimmer",children:e.jsx(ox,{className:"h-4 w-4"})}),n("canDeleteUsers")&&d.id!==a.id&&e.jsx(le,{variant:"outline",size:"sm",className:"hover-shimmer text-destructive",onClick:()=>i(d.id),disabled:o,children:e.jsx(jr,{className:"h-4 w-4"})})]})]},d.id)}),t.length===0&&e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(dr,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No team members found"})]})]})})]})]})}var O1={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/(function(s,t){((r,a)=>{s.exports=a()})(Kv,function r(){var a=typeof self!="undefined"?self:typeof window!="undefined"?window:a!==void 0?a:{},n,i=!a.document&&!!a.postMessage,o=a.IS_PAPA_WORKER||!1,l={},d=0,h={};function f(C){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(A){var L=F(A);L.chunkSize=parseInt(L.chunkSize),A.step||A.chunk||(L.chunkSize=null),this._handle=new j(L),(this._handle.streamer=this)._config=L}.call(this,C),this.parseChunk=function(A,L){var y=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<y){let I=this._config.newline;I||(S=this._config.quoteChar||'"',I=this._handle.guessLineEndings(A,S)),A=[...A.split(I).slice(y)].join(I)}this.isFirstChunk&&z(this._config.beforeFirstChunk)&&(S=this._config.beforeFirstChunk(A))!==void 0&&(A=S),this.isFirstChunk=!1,this._halted=!1;var y=this._partialLine+A,S=(this._partialLine="",this._handle.parse(y,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(A=S.meta.cursor,y=(this._finished||(this._partialLine=y.substring(A-this._baseIndex),this._baseIndex=A),S&&S.data&&(this._rowCount+=S.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),o)a.postMessage({results:S,workerId:h.WORKER_ID,finished:y});else if(z(this._config.chunk)&&!L){if(this._config.chunk(S,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=S=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(S.data),this._completeResults.errors=this._completeResults.errors.concat(S.errors),this._completeResults.meta=S.meta),this._completed||!y||!z(this._config.complete)||S&&S.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),y||S&&S.meta.paused||this._nextChunk(),S}this._halted=!0},this._sendError=function(A){z(this._config.error)?this._config.error(A):o&&this._config.error&&a.postMessage({workerId:h.WORKER_ID,error:A,finished:!1})}}function p(C){var A;(C=C||{}).chunkSize||(C.chunkSize=h.RemoteChunkSize),f.call(this,C),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(L){this._input=L,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(A=new XMLHttpRequest,this._config.withCredentials&&(A.withCredentials=this._config.withCredentials),i||(A.onload=se(this._chunkLoaded,this),A.onerror=se(this._chunkError,this)),A.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var L,y=this._config.downloadRequestHeaders;for(L in y)A.setRequestHeader(L,y[L])}var S;this._config.chunkSize&&(S=this._start+this._config.chunkSize-1,A.setRequestHeader("Range","bytes="+this._start+"-"+S));try{A.send(this._config.downloadRequestBody)}catch(I){this._chunkError(I.message)}i&&A.status===0&&this._chunkError()}},this._chunkLoaded=function(){A.readyState===4&&(A.status<200||400<=A.status?this._chunkError():(this._start+=this._config.chunkSize||A.responseText.length,this._finished=!this._config.chunkSize||this._start>=(L=>(L=L.getResponseHeader("Content-Range"))!==null?parseInt(L.substring(L.lastIndexOf("/")+1)):-1)(A),this.parseChunk(A.responseText)))},this._chunkError=function(L){L=A.statusText||L,this._sendError(new Error(L))}}function x(C){(C=C||{}).chunkSize||(C.chunkSize=h.LocalChunkSize),f.call(this,C);var A,L,y=typeof FileReader!="undefined";this.stream=function(S){this._input=S,L=S.slice||S.webkitSlice||S.mozSlice,y?((A=new FileReader).onload=se(this._chunkLoaded,this),A.onerror=se(this._chunkError,this)):A=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var S=this._input,I=(this._config.chunkSize&&(I=Math.min(this._start+this._config.chunkSize,this._input.size),S=L.call(S,this._start,I)),A.readAsText(S,this._config.encoding));y||this._chunkLoaded({target:{result:I}})},this._chunkLoaded=function(S){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(S.target.result)},this._chunkError=function(){this._sendError(A.error)}}function u(C){var A;f.call(this,C=C||{}),this.stream=function(L){return A=L,this._nextChunk()},this._nextChunk=function(){var L,y;if(!this._finished)return L=this._config.chunkSize,A=L?(y=A.substring(0,L),A.substring(L)):(y=A,""),this._finished=!A,this.parseChunk(y)}}function k(C){f.call(this,C=C||{});var A=[],L=!0,y=!1;this.pause=function(){f.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){f.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(S){this._input=S,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){y&&A.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),A.length?this.parseChunk(A.shift()):L=!0},this._streamData=se(function(S){try{A.push(typeof S=="string"?S:S.toString(this._config.encoding)),L&&(L=!1,this._checkIsFinished(),this.parseChunk(A.shift()))}catch(I){this._streamError(I)}},this),this._streamError=se(function(S){this._streamCleanUp(),this._sendError(S)},this),this._streamEnd=se(function(){this._streamCleanUp(),y=!0,this._streamData("")},this),this._streamCleanUp=se(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function j(C){var A,L,y,S,I=Math.pow(2,53),M=-I,J=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,ae=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,he=this,ce=0,ie=0,ve=!1,Ae=!1,T=[],U={data:[],errors:[],meta:{}};function V(Z){return C.skipEmptyLines==="greedy"?Z.join("").trim()==="":Z.length===1&&Z[0].length===0}function re(){if(U&&y&&(Y("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+h.DefaultDelimiter+"'"),y=!1),C.skipEmptyLines&&(U.data=U.data.filter(function(X){return!V(X)})),G()){let X=function(me,we){z(C.transformHeader)&&(me=C.transformHeader(me,we)),T.push(me)};if(U)if(Array.isArray(U.data[0])){for(var Z=0;G()&&Z<U.data.length;Z++)U.data[Z].forEach(X);U.data.splice(0,1)}else U.data.forEach(X)}function de(X,me){for(var we=C.header?{}:[],oe=0;oe<X.length;oe++){var ee=oe,H=X[oe],H=((Ee,Fe)=>(Ie=>(C.dynamicTypingFunction&&C.dynamicTyping[Ie]===void 0&&(C.dynamicTyping[Ie]=C.dynamicTypingFunction(Ie)),(C.dynamicTyping[Ie]||C.dynamicTyping)===!0))(Ee)?Fe==="true"||Fe==="TRUE"||Fe!=="false"&&Fe!=="FALSE"&&((Ie=>{if(J.test(Ie)&&(Ie=parseFloat(Ie),M<Ie&&Ie<I))return 1})(Fe)?parseFloat(Fe):ae.test(Fe)?new Date(Fe):Fe===""?null:Fe):Fe)(ee=C.header?oe>=T.length?"__parsed_extra":T[oe]:ee,H=C.transform?C.transform(H,ee):H);ee==="__parsed_extra"?(we[ee]=we[ee]||[],we[ee].push(H)):we[ee]=H}return C.header&&(oe>T.length?Y("FieldMismatch","TooManyFields","Too many fields: expected "+T.length+" fields but parsed "+oe,ie+me):oe<T.length&&Y("FieldMismatch","TooFewFields","Too few fields: expected "+T.length+" fields but parsed "+oe,ie+me)),we}var Le;U&&(C.header||C.dynamicTyping||C.transform)&&(Le=1,!U.data.length||Array.isArray(U.data[0])?(U.data=U.data.map(de),Le=U.data.length):U.data=de(U.data,0),C.header&&U.meta&&(U.meta.fields=T),ie+=Le)}function G(){return C.header&&T.length===0}function Y(Z,de,Le,X){Z={type:Z,code:de,message:Le},X!==void 0&&(Z.row=X),U.errors.push(Z)}z(C.step)&&(S=C.step,C.step=function(Z){U=Z,G()?re():(re(),U.data.length!==0&&(ce+=Z.data.length,C.preview&&ce>C.preview?L.abort():(U.data=U.data[0],S(U,he))))}),this.parse=function(Z,de,Le){var X=C.quoteChar||'"',X=(C.newline||(C.newline=this.guessLineEndings(Z,X)),y=!1,C.delimiter?z(C.delimiter)&&(C.delimiter=C.delimiter(Z),U.meta.delimiter=C.delimiter):((X=((me,we,oe,ee,H)=>{var Ee,Fe,Ie,Ue;H=H||[",","	","|",";",h.RECORD_SEP,h.UNIT_SEP];for(var Ye=0;Ye<H.length;Ye++){for(var We,st=H[Ye],ot=0,mt=0,rt=0,Be=(Ie=void 0,new w({comments:ee,delimiter:st,newline:we,preview:10}).parse(me)),ft=0;ft<Be.data.length;ft++)oe&&V(Be.data[ft])?rt++:(We=Be.data[ft].length,mt+=We,Ie===void 0?Ie=We:0<We&&(ot+=Math.abs(We-Ie),Ie=We));0<Be.data.length&&(mt/=Be.data.length-rt),(Fe===void 0||ot<=Fe)&&(Ue===void 0||Ue<mt)&&1.99<mt&&(Fe=ot,Ee=st,Ue=mt)}return{successful:!!(C.delimiter=Ee),bestDelimiter:Ee}})(Z,C.newline,C.skipEmptyLines,C.comments,C.delimitersToGuess)).successful?C.delimiter=X.bestDelimiter:(y=!0,C.delimiter=h.DefaultDelimiter),U.meta.delimiter=C.delimiter),F(C));return C.preview&&C.header&&X.preview++,A=Z,L=new w(X),U=L.parse(A,de,Le),re(),ve?{meta:{paused:!0}}:U||{meta:{paused:!1}}},this.paused=function(){return ve},this.pause=function(){ve=!0,L.abort(),A=z(C.chunk)?"":A.substring(L.getCharIndex())},this.resume=function(){he.streamer._halted?(ve=!1,he.streamer.parseChunk(A,!0)):setTimeout(he.resume,3)},this.aborted=function(){return Ae},this.abort=function(){Ae=!0,L.abort(),U.meta.aborted=!0,z(C.complete)&&C.complete(U),A=""},this.guessLineEndings=function(me,X){me=me.substring(0,1048576);var X=new RegExp(v(X)+"([^]*?)"+v(X),"gm"),Le=(me=me.replace(X,"")).split("\r"),X=me.split(`
`),me=1<X.length&&X[0].length<Le[0].length;if(Le.length===1||me)return`
`;for(var we=0,oe=0;oe<Le.length;oe++)Le[oe][0]===`
`&&we++;return we>=Le.length/2?`\r
`:"\r"}}function v(C){return C.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function w(C){var A=(C=C||{}).delimiter,L=C.newline,y=C.comments,S=C.step,I=C.preview,M=C.fastMode,J=null,ae=!1,he=C.quoteChar==null?'"':C.quoteChar,ce=he;if(C.escapeChar!==void 0&&(ce=C.escapeChar),(typeof A!="string"||-1<h.BAD_DELIMITERS.indexOf(A))&&(A=","),y===A)throw new Error("Comment character same as delimiter");y===!0?y="#":(typeof y!="string"||-1<h.BAD_DELIMITERS.indexOf(y))&&(y=!1),L!==`
`&&L!=="\r"&&L!==`\r
`&&(L=`
`);var ie=0,ve=!1;this.parse=function(Ae,T,U){if(typeof Ae!="string")throw new Error("Input must be a string");var V=Ae.length,re=A.length,G=L.length,Y=y.length,Z=z(S),de=[],Le=[],X=[],me=ie=0;if(!Ae)return ot();if(M||M!==!1&&Ae.indexOf(he)===-1){for(var we=Ae.split(L),oe=0;oe<we.length;oe++){if(X=we[oe],ie+=X.length,oe!==we.length-1)ie+=L.length;else if(U)return ot();if(!y||X.substring(0,Y)!==y){if(Z){if(de=[],Ue(X.split(A)),mt(),ve)return ot()}else Ue(X.split(A));if(I&&I<=oe)return de=de.slice(0,I),ot(!0)}}return ot()}for(var ee=Ae.indexOf(A,ie),H=Ae.indexOf(L,ie),Ee=new RegExp(v(ce)+v(he),"g"),Fe=Ae.indexOf(he,ie);;)if(Ae[ie]===he)for(Fe=ie,ie++;;){if((Fe=Ae.indexOf(he,Fe+1))===-1)return U||Le.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:de.length,index:ie}),We();if(Fe===V-1)return We(Ae.substring(ie,Fe).replace(Ee,he));if(he===ce&&Ae[Fe+1]===ce)Fe++;else if(he===ce||Fe===0||Ae[Fe-1]!==ce){ee!==-1&&ee<Fe+1&&(ee=Ae.indexOf(A,Fe+1));var Ie=Ye((H=H!==-1&&H<Fe+1?Ae.indexOf(L,Fe+1):H)===-1?ee:Math.min(ee,H));if(Ae.substr(Fe+1+Ie,re)===A){X.push(Ae.substring(ie,Fe).replace(Ee,he)),Ae[ie=Fe+1+Ie+re]!==he&&(Fe=Ae.indexOf(he,ie)),ee=Ae.indexOf(A,ie),H=Ae.indexOf(L,ie);break}if(Ie=Ye(H),Ae.substring(Fe+1+Ie,Fe+1+Ie+G)===L){if(X.push(Ae.substring(ie,Fe).replace(Ee,he)),st(Fe+1+Ie+G),ee=Ae.indexOf(A,ie),Fe=Ae.indexOf(he,ie),Z&&(mt(),ve))return ot();if(I&&de.length>=I)return ot(!0);break}Le.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:de.length,index:ie}),Fe++}}else if(y&&X.length===0&&Ae.substring(ie,ie+Y)===y){if(H===-1)return ot();ie=H+G,H=Ae.indexOf(L,ie),ee=Ae.indexOf(A,ie)}else if(ee!==-1&&(ee<H||H===-1))X.push(Ae.substring(ie,ee)),ie=ee+re,ee=Ae.indexOf(A,ie);else{if(H===-1)break;if(X.push(Ae.substring(ie,H)),st(H+G),Z&&(mt(),ve))return ot();if(I&&de.length>=I)return ot(!0)}return We();function Ue(rt){de.push(rt),me=ie}function Ye(rt){var Be=0;return Be=rt!==-1&&(rt=Ae.substring(Fe+1,rt))&&rt.trim()===""?rt.length:Be}function We(rt){return U||(rt===void 0&&(rt=Ae.substring(ie)),X.push(rt),ie=V,Ue(X),Z&&mt()),ot()}function st(rt){ie=rt,Ue(X),X=[],H=Ae.indexOf(L,ie)}function ot(rt){if(C.header&&!T&&de.length&&!ae){var Be=de[0],ft=Object.create(null),pt=new Set(Be);let Ct=!1;for(let Je=0;Je<Be.length;Je++){let Xt=Be[Je];if(ft[Xt=z(C.transformHeader)?C.transformHeader(Xt,Je):Xt]){let Lt,Ps=ft[Xt];for(;Lt=Xt+"_"+Ps,Ps++,pt.has(Lt););pt.add(Lt),Be[Je]=Lt,ft[Xt]++,Ct=!0,(J=J===null?{}:J)[Lt]=Xt}else ft[Xt]=1,Be[Je]=Xt;pt.add(Xt)}ae=!0}return{data:de,errors:Le,meta:{delimiter:A,linebreak:L,aborted:ve,truncated:!!rt,cursor:me+(T||0),renamedHeaders:J}}}function mt(){S(ot()),de=[],Le=[]}},this.abort=function(){ve=!0},this.getCharIndex=function(){return ie}}function P(C){var A=C.data,L=l[A.workerId],y=!1;if(A.error)L.userError(A.error,A.file);else if(A.results&&A.results.data){var S={abort:function(){y=!0,D(A.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:B,resume:B};if(z(L.userStep)){for(var I=0;I<A.results.data.length&&(L.userStep({data:A.results.data[I],errors:A.results.errors,meta:A.results.meta},S),!y);I++);delete A.results}else z(L.userChunk)&&(L.userChunk(A.results,S,A.file),delete A.results)}A.finished&&!y&&D(A.workerId,A.results)}function D(C,A){var L=l[C];z(L.userComplete)&&L.userComplete(A),L.terminate(),delete l[C]}function B(){throw new Error("Not implemented.")}function F(C){if(typeof C!="object"||C===null)return C;var A,L=Array.isArray(C)?[]:{};for(A in C)L[A]=F(C[A]);return L}function se(C,A){return function(){C.apply(A,arguments)}}function z(C){return typeof C=="function"}return h.parse=function(C,A){var L=(A=A||{}).dynamicTyping||!1;if(z(L)&&(A.dynamicTypingFunction=L,L={}),A.dynamicTyping=L,A.transform=!!z(A.transform)&&A.transform,!A.worker||!h.WORKERS_SUPPORTED)return L=null,h.NODE_STREAM_INPUT,typeof C=="string"?(C=(y=>y.charCodeAt(0)!==65279?y:y.slice(1))(C),L=new(A.download?p:u)(A)):C.readable===!0&&z(C.read)&&z(C.on)?L=new k(A):(a.File&&C instanceof File||C instanceof Object)&&(L=new x(A)),L.stream(C);(L=(()=>{var y;return!!h.WORKERS_SUPPORTED&&(y=(()=>{var S=a.URL||a.webkitURL||null,I=r.toString();return h.BLOB_URL||(h.BLOB_URL=S.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",I,")();"],{type:"text/javascript"})))})(),(y=new a.Worker(y)).onmessage=P,y.id=d++,l[y.id]=y)})()).userStep=A.step,L.userChunk=A.chunk,L.userComplete=A.complete,L.userError=A.error,A.step=z(A.step),A.chunk=z(A.chunk),A.complete=z(A.complete),A.error=z(A.error),delete A.worker,L.postMessage({input:C,config:A,workerId:L.id})},h.unparse=function(C,A){var L=!1,y=!0,S=",",I=`\r
`,M='"',J=M+M,ae=!1,he=null,ce=!1,ie=((()=>{if(typeof A=="object"){if(typeof A.delimiter!="string"||h.BAD_DELIMITERS.filter(function(T){return A.delimiter.indexOf(T)!==-1}).length||(S=A.delimiter),typeof A.quotes!="boolean"&&typeof A.quotes!="function"&&!Array.isArray(A.quotes)||(L=A.quotes),typeof A.skipEmptyLines!="boolean"&&typeof A.skipEmptyLines!="string"||(ae=A.skipEmptyLines),typeof A.newline=="string"&&(I=A.newline),typeof A.quoteChar=="string"&&(M=A.quoteChar),typeof A.header=="boolean"&&(y=A.header),Array.isArray(A.columns)){if(A.columns.length===0)throw new Error("Option columns is empty");he=A.columns}A.escapeChar!==void 0&&(J=A.escapeChar+M),A.escapeFormulae instanceof RegExp?ce=A.escapeFormulae:typeof A.escapeFormulae=="boolean"&&A.escapeFormulae&&(ce=/^[=+\-@\t\r].*$/)}})(),new RegExp(v(M),"g"));if(typeof C=="string"&&(C=JSON.parse(C)),Array.isArray(C)){if(!C.length||Array.isArray(C[0]))return ve(null,C,ae);if(typeof C[0]=="object")return ve(he||Object.keys(C[0]),C,ae)}else if(typeof C=="object")return typeof C.data=="string"&&(C.data=JSON.parse(C.data)),Array.isArray(C.data)&&(C.fields||(C.fields=C.meta&&C.meta.fields||he),C.fields||(C.fields=Array.isArray(C.data[0])?C.fields:typeof C.data[0]=="object"?Object.keys(C.data[0]):[]),Array.isArray(C.data[0])||typeof C.data[0]=="object"||(C.data=[C.data])),ve(C.fields||[],C.data||[],ae);throw new Error("Unable to serialize unrecognized input");function ve(T,U,V){var re="",G=(typeof T=="string"&&(T=JSON.parse(T)),typeof U=="string"&&(U=JSON.parse(U)),Array.isArray(T)&&0<T.length),Y=!Array.isArray(U[0]);if(G&&y){for(var Z=0;Z<T.length;Z++)0<Z&&(re+=S),re+=Ae(T[Z],Z);0<U.length&&(re+=I)}for(var de=0;de<U.length;de++){var Le=(G?T:U[de]).length,X=!1,me=G?Object.keys(U[de]).length===0:U[de].length===0;if(V&&!G&&(X=V==="greedy"?U[de].join("").trim()==="":U[de].length===1&&U[de][0].length===0),V==="greedy"&&G){for(var we=[],oe=0;oe<Le;oe++){var ee=Y?T[oe]:oe;we.push(U[de][ee])}X=we.join("").trim()===""}if(!X){for(var H=0;H<Le;H++){0<H&&!me&&(re+=S);var Ee=G&&Y?T[H]:H;re+=Ae(U[de][Ee],H)}de<U.length-1&&(!V||0<Le&&!me)&&(re+=I)}}return re}function Ae(T,U){var V,re;return T==null?"":T.constructor===Date?JSON.stringify(T).slice(1,25):(re=!1,ce&&typeof T=="string"&&ce.test(T)&&(T="'"+T,re=!0),V=T.toString().replace(ie,J),(re=re||L===!0||typeof L=="function"&&L(T,U)||Array.isArray(L)&&L[U]||((G,Y)=>{for(var Z=0;Z<Y.length;Z++)if(-1<G.indexOf(Y[Z]))return!0;return!1})(V,h.BAD_DELIMITERS)||-1<V.indexOf(S)||V.charAt(0)===" "||V.charAt(V.length-1)===" ")?M+V+M:V)}},h.RECORD_SEP="",h.UNIT_SEP="",h.BYTE_ORDER_MARK="\uFEFF",h.BAD_DELIMITERS=["\r",`
`,'"',h.BYTE_ORDER_MARK],h.WORKERS_SUPPORTED=!i&&!!a.Worker,h.NODE_STREAM_INPUT=1,h.LocalChunkSize=10485760,h.RemoteChunkSize=5242880,h.DefaultDelimiter=",",h.Parser=w,h.ParserHandle=j,h.NetworkStreamer=p,h.FileStreamer=x,h.StringStreamer=u,h.ReadableStreamStreamer=k,a.jQuery&&((n=a.jQuery).fn.parse=function(C){var A=C.config||{},L=[];return this.each(function(I){if(!(n(this).prop("tagName").toUpperCase()==="INPUT"&&n(this).attr("type").toLowerCase()==="file"&&a.FileReader)||!this.files||this.files.length===0)return!0;for(var M=0;M<this.files.length;M++)L.push({file:this.files[M],inputElem:this,instanceConfig:n.extend({},A)})}),y(),this;function y(){if(L.length===0)z(C.complete)&&C.complete();else{var I,M,J,ae,he=L[0];if(z(C.before)){var ce=C.before(he.file,he.inputElem);if(typeof ce=="object"){if(ce.action==="abort")return I="AbortError",M=he.file,J=he.inputElem,ae=ce.reason,void(z(C.error)&&C.error({name:I},M,J,ae));if(ce.action==="skip")return void S();typeof ce.config=="object"&&(he.instanceConfig=n.extend(he.instanceConfig,ce.config))}else if(ce==="skip")return void S()}var ie=he.instanceConfig.complete;he.instanceConfig.complete=function(ve){z(ie)&&ie(ve,he.file,he.inputElem),S()},h.parse(he.file,he.instanceConfig)}}function S(){L.splice(0,1),y()}}),o&&(a.onmessage=function(C){C=C.data,h.WORKER_ID===void 0&&C&&(h.WORKER_ID=C.workerId),typeof C.input=="string"?a.postMessage({workerId:h.WORKER_ID,results:h.parse(C.input,C.config),finished:!0}):(a.File&&C.input instanceof File||C.input instanceof Object)&&(C=h.parse(C.input,C.config))&&a.postMessage({workerId:h.WORKER_ID,results:C,finished:!0})}),(p.prototype=Object.create(f.prototype)).constructor=p,(x.prototype=Object.create(f.prototype)).constructor=x,(u.prototype=Object.create(u.prototype)).constructor=u,(k.prototype=Object.create(f.prototype)).constructor=k,h})})(O1);var i3=O1.exports;const o3=Xv(i3),l3="modulepreload",c3=function(s){return"/"+s},wp={},im=function(t,r,a){let n=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));n=Promise.allSettled(r.map(d=>{if(d=c3(d),d in wp)return;wp[d]=!0;const h=d.endsWith(".css"),f=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${f}`))return;const p=document.createElement("link");if(p.rel=h?"stylesheet":l3,h||(p.as="script"),p.crossOrigin="",p.href=d,l&&p.setAttribute("nonce",l),document.head.appendChild(p),h)return new Promise((x,u)=>{p.addEventListener("load",x),p.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return n.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})};function hs(s){"@babel/helpers - typeof";return hs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hs(s)}var wr=Uint8Array,Kr=Uint16Array,Km=Int32Array,ou=new wr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),lu=new wr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),om=new wr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),F1=function(s,t){for(var r=new Kr(31),a=0;a<31;++a)r[a]=t+=1<<s[a-1];for(var n=new Km(r[30]),a=1;a<30;++a)for(var i=r[a];i<r[a+1];++i)n[i]=i-r[a]<<5|a;return{b:r,r:n}},B1=F1(ou,2),U1=B1.b,lm=B1.r;U1[28]=258,lm[258]=28;var q1=F1(lu,0),d3=q1.b,jp=q1.r,cm=new Kr(32768);for(var Ls=0;Ls<32768;++Ls){var Tn=(Ls&43690)>>1|(Ls&21845)<<1;Tn=(Tn&52428)>>2|(Tn&13107)<<2,Tn=(Tn&61680)>>4|(Tn&3855)<<4,cm[Ls]=((Tn&65280)>>8|(Tn&255)<<8)>>1}var $a=function(s,t,r){for(var a=s.length,n=0,i=new Kr(t);n<a;++n)s[n]&&++i[s[n]-1];var o=new Kr(t);for(n=1;n<t;++n)o[n]=o[n-1]+i[n-1]<<1;var l;if(r){l=new Kr(1<<t);var d=15-t;for(n=0;n<a;++n)if(s[n])for(var h=n<<4|s[n],f=t-s[n],p=o[s[n]-1]++<<f,x=p|(1<<f)-1;p<=x;++p)l[cm[p]>>d]=h}else for(l=new Kr(a),n=0;n<a;++n)s[n]&&(l[n]=cm[o[s[n]-1]++]>>15-s[n]);return l},si=new wr(288);for(var Ls=0;Ls<144;++Ls)si[Ls]=8;for(var Ls=144;Ls<256;++Ls)si[Ls]=9;for(var Ls=256;Ls<280;++Ls)si[Ls]=7;for(var Ls=280;Ls<288;++Ls)si[Ls]=8;var ec=new wr(32);for(var Ls=0;Ls<32;++Ls)ec[Ls]=5;var u3=$a(si,9,0),h3=$a(si,9,1),m3=$a(ec,5,0),f3=$a(ec,5,1),hh=function(s){for(var t=s[0],r=1;r<s.length;++r)s[r]>t&&(t=s[r]);return t},ya=function(s,t,r){var a=t/8|0;return(s[a]|s[a+1]<<8)>>(t&7)&r},mh=function(s,t){var r=t/8|0;return(s[r]|s[r+1]<<8|s[r+2]<<16)>>(t&7)},Xm=function(s){return(s+7)/8|0},z1=function(s,t,r){return(r==null||r>s.length)&&(r=s.length),new wr(s.subarray(t,r))},p3=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ja=function(s,t,r){var a=new Error(t||p3[s]);if(a.code=s,Error.captureStackTrace&&Error.captureStackTrace(a,ja),!r)throw a;return a},g3=function(s,t,r,a){var n=s.length,i=0;if(!n||t.f&&!t.l)return r||new wr(0);var o=!r,l=o||t.i!=2,d=t.i;o&&(r=new wr(n*3));var h=function(X){var me=r.length;if(X>me){var we=new wr(Math.max(me*2,X));we.set(r),r=we}},f=t.f||0,p=t.p||0,x=t.b||0,u=t.l,k=t.d,j=t.m,v=t.n,w=n*8;do{if(!u){f=ya(s,p,1);var P=ya(s,p+1,3);if(p+=3,P)if(P==1)u=h3,k=f3,j=9,v=5;else if(P==2){var se=ya(s,p,31)+257,z=ya(s,p+10,15)+4,C=se+ya(s,p+5,31)+1;p+=14;for(var A=new wr(C),L=new wr(19),y=0;y<z;++y)L[om[y]]=ya(s,p+y*3,7);p+=z*3;for(var S=hh(L),I=(1<<S)-1,M=$a(L,S,1),y=0;y<C;){var J=M[ya(s,p,I)];p+=J&15;var D=J>>4;if(D<16)A[y++]=D;else{var ae=0,he=0;for(D==16?(he=3+ya(s,p,3),p+=2,ae=A[y-1]):D==17?(he=3+ya(s,p,7),p+=3):D==18&&(he=11+ya(s,p,127),p+=7);he--;)A[y++]=ae}}var ce=A.subarray(0,se),ie=A.subarray(se);j=hh(ce),v=hh(ie),u=$a(ce,j,1),k=$a(ie,v,1)}else ja(1);else{var D=Xm(p)+4,B=s[D-4]|s[D-3]<<8,F=D+B;if(F>n){d&&ja(0);break}l&&h(x+B),r.set(s.subarray(D,F),x),t.b=x+=B,t.p=p=F*8,t.f=f;continue}if(p>w){d&&ja(0);break}}l&&h(x+131072);for(var ve=(1<<j)-1,Ae=(1<<v)-1,T=p;;T=p){var ae=u[mh(s,p)&ve],U=ae>>4;if(p+=ae&15,p>w){d&&ja(0);break}if(ae||ja(2),U<256)r[x++]=U;else if(U==256){T=p,u=null;break}else{var V=U-254;if(U>264){var y=U-257,re=ou[y];V=ya(s,p,(1<<re)-1)+U1[y],p+=re}var G=k[mh(s,p)&Ae],Y=G>>4;G||ja(3),p+=G&15;var ie=d3[Y];if(Y>3){var re=lu[Y];ie+=mh(s,p)&(1<<re)-1,p+=re}if(p>w){d&&ja(0);break}l&&h(x+131072);var Z=x+V;if(x<ie){var de=i-ie,Le=Math.min(ie,Z);for(de+x<0&&ja(3);x<Le;++x)r[x]=a[de+x]}for(;x<Z;++x)r[x]=r[x-ie]}}t.l=u,t.p=T,t.b=x,t.f=f,u&&(f=1,t.m=j,t.d=k,t.n=v)}while(!f);return x!=r.length&&o?z1(r,0,x):r.subarray(0,x)},an=function(s,t,r){r<<=t&7;var a=t/8|0;s[a]|=r,s[a+1]|=r>>8},Ol=function(s,t,r){r<<=t&7;var a=t/8|0;s[a]|=r,s[a+1]|=r>>8,s[a+2]|=r>>16},fh=function(s,t){for(var r=[],a=0;a<s.length;++a)s[a]&&r.push({s:a,f:s[a]});var n=r.length,i=r.slice();if(!n)return{t:W1,l:0};if(n==1){var o=new wr(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(F,se){return F.f-se.f}),r.push({s:-1,f:25001});var l=r[0],d=r[1],h=0,f=1,p=2;for(r[0]={s:-1,f:l.f+d.f,l,r:d};f!=n-1;)l=r[r[h].f<r[p].f?h++:p++],d=r[h!=f&&r[h].f<r[p].f?h++:p++],r[f++]={s:-1,f:l.f+d.f,l,r:d};for(var x=i[0].s,a=1;a<n;++a)i[a].s>x&&(x=i[a].s);var u=new Kr(x+1),k=dm(r[f-1],u,0);if(k>t){var a=0,j=0,v=k-t,w=1<<v;for(i.sort(function(se,z){return u[z.s]-u[se.s]||se.f-z.f});a<n;++a){var P=i[a].s;if(u[P]>t)j+=w-(1<<k-u[P]),u[P]=t;else break}for(j>>=v;j>0;){var D=i[a].s;u[D]<t?j-=1<<t-u[D]++-1:++a}for(;a>=0&&j;--a){var B=i[a].s;u[B]==t&&(--u[B],++j)}k=t}return{t:new wr(u),l:k}},dm=function(s,t,r){return s.s==-1?Math.max(dm(s.l,t,r+1),dm(s.r,t,r+1)):t[s.s]=r},Np=function(s){for(var t=s.length;t&&!s[--t];);for(var r=new Kr(++t),a=0,n=s[0],i=1,o=function(d){r[a++]=d},l=1;l<=t;++l)if(s[l]==n&&l!=t)++i;else{if(!n&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(n),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(n);i=1,n=s[l]}return{c:r.subarray(0,a),n:t}},Fl=function(s,t){for(var r=0,a=0;a<t.length;++a)r+=s[a]*t[a];return r},$1=function(s,t,r){var a=r.length,n=Xm(t+2);s[n]=a&255,s[n+1]=a>>8,s[n+2]=s[n]^255,s[n+3]=s[n+1]^255;for(var i=0;i<a;++i)s[n+i+4]=r[i];return(n+4+a)*8},Sp=function(s,t,r,a,n,i,o,l,d,h,f){an(t,f++,r),++n[256];for(var p=fh(n,15),x=p.t,u=p.l,k=fh(i,15),j=k.t,v=k.l,w=Np(x),P=w.c,D=w.n,B=Np(j),F=B.c,se=B.n,z=new Kr(19),C=0;C<P.length;++C)++z[P[C]&31];for(var C=0;C<F.length;++C)++z[F[C]&31];for(var A=fh(z,7),L=A.t,y=A.l,S=19;S>4&&!L[om[S-1]];--S);var I=h+5<<3,M=Fl(n,si)+Fl(i,ec)+o,J=Fl(n,x)+Fl(i,j)+o+14+3*S+Fl(z,L)+2*z[16]+3*z[17]+7*z[18];if(d>=0&&I<=M&&I<=J)return $1(t,f,s.subarray(d,d+h));var ae,he,ce,ie;if(an(t,f,1+(J<M)),f+=2,J<M){ae=$a(x,u,0),he=x,ce=$a(j,v,0),ie=j;var ve=$a(L,y,0);an(t,f,D-257),an(t,f+5,se-1),an(t,f+10,S-4),f+=14;for(var C=0;C<S;++C)an(t,f+3*C,L[om[C]]);f+=3*S;for(var Ae=[P,F],T=0;T<2;++T)for(var U=Ae[T],C=0;C<U.length;++C){var V=U[C]&31;an(t,f,ve[V]),f+=L[V],V>15&&(an(t,f,U[C]>>5&127),f+=U[C]>>12)}}else ae=u3,he=si,ce=m3,ie=ec;for(var C=0;C<l;++C){var re=a[C];if(re>255){var V=re>>18&31;Ol(t,f,ae[V+257]),f+=he[V+257],V>7&&(an(t,f,re>>23&31),f+=ou[V]);var G=re&31;Ol(t,f,ce[G]),f+=ie[G],G>3&&(Ol(t,f,re>>5&8191),f+=lu[G])}else Ol(t,f,ae[re]),f+=he[re]}return Ol(t,f,ae[256]),f+he[256]},x3=new Km([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),W1=new wr(0),v3=function(s,t,r,a,n,i){var o=i.z||s.length,l=new wr(a+o+5*(1+Math.ceil(o/7e3))+n),d=l.subarray(a,l.length-n),h=i.l,f=(i.r||0)&7;if(t){f&&(d[0]=i.r>>3);for(var p=x3[t-1],x=p>>13,u=p&8191,k=(1<<r)-1,j=i.p||new Kr(32768),v=i.h||new Kr(k+1),w=Math.ceil(r/3),P=2*w,D=function(oe){return(s[oe]^s[oe+1]<<w^s[oe+2]<<P)&k},B=new Km(25e3),F=new Kr(288),se=new Kr(32),z=0,C=0,A=i.i||0,L=0,y=i.w||0,S=0;A+2<o;++A){var I=D(A),M=A&32767,J=v[I];if(j[M]=J,v[I]=M,y<=A){var ae=o-A;if((z>7e3||L>24576)&&(ae>423||!h)){f=Sp(s,d,0,B,F,se,C,L,S,A-S,f),L=z=C=0,S=A;for(var he=0;he<286;++he)F[he]=0;for(var he=0;he<30;++he)se[he]=0}var ce=2,ie=0,ve=u,Ae=M-J&32767;if(ae>2&&I==D(A-Ae))for(var T=Math.min(x,ae)-1,U=Math.min(32767,A),V=Math.min(258,ae);Ae<=U&&--ve&&M!=J;){if(s[A+ce]==s[A+ce-Ae]){for(var re=0;re<V&&s[A+re]==s[A+re-Ae];++re);if(re>ce){if(ce=re,ie=Ae,re>T)break;for(var G=Math.min(Ae,re-2),Y=0,he=0;he<G;++he){var Z=A-Ae+he&32767,de=j[Z],Le=Z-de&32767;Le>Y&&(Y=Le,J=Z)}}}M=J,J=j[M],Ae+=M-J&32767}if(ie){B[L++]=268435456|lm[ce]<<18|jp[ie];var X=lm[ce]&31,me=jp[ie]&31;C+=ou[X]+lu[me],++F[257+X],++se[me],y=A+ce,++z}else B[L++]=s[A],++F[s[A]]}}for(A=Math.max(A,y);A<o;++A)B[L++]=s[A],++F[s[A]];f=Sp(s,d,h,B,F,se,C,L,S,A-S,f),h||(i.r=f&7|d[f/8|0]<<3,f-=7,i.h=v,i.p=j,i.i=A,i.w=y)}else{for(var A=i.w||0;A<o+h;A+=65535){var we=A+65535;we>=o&&(d[f/8|0]=h,we=o),f=$1(d,f+1,s.subarray(A,we))}i.i=o}return z1(l,0,a+Xm(f)+n)},H1=function(){var s=1,t=0;return{p:function(r){for(var a=s,n=t,i=r.length|0,o=0;o!=i;){for(var l=Math.min(o+2655,i);o<l;++o)n+=a+=r[o];a=(a&65535)+15*(a>>16),n=(n&65535)+15*(n>>16)}s=a,t=n},d:function(){return s%=65521,t%=65521,(s&255)<<24|(s&65280)<<8|(t&255)<<8|t>>8}}},y3=function(s,t,r,a,n){if(!n&&(n={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),o=new wr(i.length+s.length);o.set(i),o.set(s,i.length),s=o,n.w=i.length}return v3(s,t.level==null?6:t.level,t.mem==null?n.l?Math.ceil(Math.max(8,Math.min(13,Math.log(s.length)))*1.5):20:12+t.mem,r,a,n)},V1=function(s,t,r){for(;r;++t)s[t]=r,r>>>=8},b3=function(s,t){var r=t.level,a=r==0?0:r<6?1:r==9?3:2;if(s[0]=120,s[1]=a<<6|(t.dictionary&&32),s[1]|=31-(s[0]<<8|s[1])%31,t.dictionary){var n=H1();n.p(t.dictionary),V1(s,2,n.d())}},w3=function(s,t){return((s[0]&15)!=8||s[0]>>4>7||(s[0]<<8|s[1])%31)&&ja(6,"invalid zlib data"),(s[1]>>5&1)==1&&ja(6,"invalid zlib data: "+(s[1]&32?"need":"unexpected")+" dictionary"),(s[1]>>3&4)+2};function um(s,t){t||(t={});var r=H1();r.p(s);var a=y3(s,t,t.dictionary?6:2,4);return b3(a,t),V1(a,a.length-4,r.d()),a}function j3(s,t){return g3(s.subarray(w3(s),-4),{i:2},t,t)}var N3=typeof TextDecoder!="undefined"&&new TextDecoder,S3=0;try{N3.decode(W1,{stream:!0}),S3=1}catch(s){}var At=function(){return typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:this}();function ph(){At.console&&typeof At.console.log=="function"&&At.console.log.apply(At.console,arguments)}var ys={log:ph,warn:function(s){At.console&&(typeof At.console.warn=="function"?At.console.warn.apply(At.console,arguments):ph.call(null,arguments))},error:function(s){At.console&&(typeof At.console.error=="function"?At.console.error.apply(At.console,arguments):ph(s))}};function gh(s,t,r){var a=new XMLHttpRequest;a.open("GET",s),a.responseType="blob",a.onload=function(){xi(a.response,t,r)},a.onerror=function(){ys.error("could not download file")},a.send()}function kp(s){var t=new XMLHttpRequest;t.open("HEAD",s,!1);try{t.send()}catch(r){}return t.status>=200&&t.status<=299}function ud(s){try{s.dispatchEvent(new MouseEvent("click"))}catch(r){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),s.dispatchEvent(t)}}var Yl,hm,xi=At.saveAs||((typeof window=="undefined"?"undefined":hs(window))!=="object"||window!==At?function(){}:typeof HTMLAnchorElement!="undefined"&&"download"in HTMLAnchorElement.prototype?function(s,t,r){var a=At.URL||At.webkitURL,n=document.createElement("a");t=t||s.name||"download",n.download=t,n.rel="noopener",typeof s=="string"?(n.href=s,n.origin!==location.origin?kp(n.href)?gh(s,t,r):ud(n,n.target="_blank"):ud(n)):(n.href=a.createObjectURL(s),setTimeout(function(){a.revokeObjectURL(n.href)},4e4),setTimeout(function(){ud(n)},0))}:"msSaveOrOpenBlob"in navigator?function(s,t,r){if(t=t||s.name||"download",typeof s=="string")if(kp(s))gh(s,t,r);else{var a=document.createElement("a");a.href=s,a.target="_blank",setTimeout(function(){ud(a)})}else navigator.msSaveOrOpenBlob(function(n,i){return i===void 0?i={autoBom:!1}:hs(i)!=="object"&&(ys.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(n.type)?new Blob(["\uFEFF",n],{type:n.type}):n}(s,r),t)}:function(s,t,r,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),typeof s=="string")return gh(s,t,r);var n=s.type==="application/octet-stream",i=/constructor/i.test(At.HTMLElement)||At.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||n&&i)&&(typeof FileReader=="undefined"?"undefined":hs(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var f=l.result;f=o?f:f.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=f:location=f,a=null},l.readAsDataURL(s)}else{var d=At.URL||At.webkitURL,h=d.createObjectURL(s);a?a.location=h:location.href=h,a=null,setTimeout(function(){d.revokeObjectURL(h)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Y1(s){var t;s=s||"",this.ok=!1,s.charAt(0)=="#"&&(s=s.substr(1,6)),s={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[s=(s=s.replace(/ /g,"")).toLowerCase()]||s;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],a=0;a<r.length;a++){var n=r[a].re,i=r[a].process,o=n.exec(s);o&&(t=i(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),d=this.g.toString(16),h=this.b.toString(16);return l.length==1&&(l="0"+l),d.length==1&&(d="0"+d),h.length==1&&(h="0"+h),"#"+l+d+h}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function xh(s,t){var r=s[0],a=s[1],n=s[2],i=s[3];r=mr(r,a,n,i,t[0],7,-680876936),i=mr(i,r,a,n,t[1],12,-389564586),n=mr(n,i,r,a,t[2],17,606105819),a=mr(a,n,i,r,t[3],22,-1044525330),r=mr(r,a,n,i,t[4],7,-176418897),i=mr(i,r,a,n,t[5],12,1200080426),n=mr(n,i,r,a,t[6],17,-1473231341),a=mr(a,n,i,r,t[7],22,-45705983),r=mr(r,a,n,i,t[8],7,1770035416),i=mr(i,r,a,n,t[9],12,-1958414417),n=mr(n,i,r,a,t[10],17,-42063),a=mr(a,n,i,r,t[11],22,-1990404162),r=mr(r,a,n,i,t[12],7,1804603682),i=mr(i,r,a,n,t[13],12,-40341101),n=mr(n,i,r,a,t[14],17,-1502002290),r=fr(r,a=mr(a,n,i,r,t[15],22,1236535329),n,i,t[1],5,-165796510),i=fr(i,r,a,n,t[6],9,-1069501632),n=fr(n,i,r,a,t[11],14,643717713),a=fr(a,n,i,r,t[0],20,-373897302),r=fr(r,a,n,i,t[5],5,-701558691),i=fr(i,r,a,n,t[10],9,38016083),n=fr(n,i,r,a,t[15],14,-660478335),a=fr(a,n,i,r,t[4],20,-405537848),r=fr(r,a,n,i,t[9],5,568446438),i=fr(i,r,a,n,t[14],9,-1019803690),n=fr(n,i,r,a,t[3],14,-187363961),a=fr(a,n,i,r,t[8],20,1163531501),r=fr(r,a,n,i,t[13],5,-1444681467),i=fr(i,r,a,n,t[2],9,-51403784),n=fr(n,i,r,a,t[7],14,1735328473),r=pr(r,a=fr(a,n,i,r,t[12],20,-1926607734),n,i,t[5],4,-378558),i=pr(i,r,a,n,t[8],11,-2022574463),n=pr(n,i,r,a,t[11],16,1839030562),a=pr(a,n,i,r,t[14],23,-35309556),r=pr(r,a,n,i,t[1],4,-1530992060),i=pr(i,r,a,n,t[4],11,1272893353),n=pr(n,i,r,a,t[7],16,-155497632),a=pr(a,n,i,r,t[10],23,-1094730640),r=pr(r,a,n,i,t[13],4,681279174),i=pr(i,r,a,n,t[0],11,-358537222),n=pr(n,i,r,a,t[3],16,-722521979),a=pr(a,n,i,r,t[6],23,76029189),r=pr(r,a,n,i,t[9],4,-640364487),i=pr(i,r,a,n,t[12],11,-421815835),n=pr(n,i,r,a,t[15],16,530742520),r=gr(r,a=pr(a,n,i,r,t[2],23,-995338651),n,i,t[0],6,-198630844),i=gr(i,r,a,n,t[7],10,1126891415),n=gr(n,i,r,a,t[14],15,-1416354905),a=gr(a,n,i,r,t[5],21,-57434055),r=gr(r,a,n,i,t[12],6,1700485571),i=gr(i,r,a,n,t[3],10,-1894986606),n=gr(n,i,r,a,t[10],15,-1051523),a=gr(a,n,i,r,t[1],21,-2054922799),r=gr(r,a,n,i,t[8],6,1873313359),i=gr(i,r,a,n,t[15],10,-30611744),n=gr(n,i,r,a,t[6],15,-1560198380),a=gr(a,n,i,r,t[13],21,1309151649),r=gr(r,a,n,i,t[4],6,-145523070),i=gr(i,r,a,n,t[11],10,-1120210379),n=gr(n,i,r,a,t[2],15,718787259),a=gr(a,n,i,r,t[9],21,-343485551),s[0]=Jn(r,s[0]),s[1]=Jn(a,s[1]),s[2]=Jn(n,s[2]),s[3]=Jn(i,s[3])}function cu(s,t,r,a,n,i){return t=Jn(Jn(t,s),Jn(a,i)),Jn(t<<n|t>>>32-n,r)}function mr(s,t,r,a,n,i,o){return cu(t&r|~t&a,s,t,n,i,o)}function fr(s,t,r,a,n,i,o){return cu(t&a|r&~a,s,t,n,i,o)}function pr(s,t,r,a,n,i,o){return cu(t^r^a,s,t,n,i,o)}function gr(s,t,r,a,n,i,o){return cu(r^(t|~a),s,t,n,i,o)}function G1(s){var t,r=s.length,a=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=s.length;t+=64)xh(a,k3(s.substring(t-64,t)));s=s.substring(t-64);var n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<s.length;t++)n[t>>2]|=s.charCodeAt(t)<<(t%4<<3);if(n[t>>2]|=128<<(t%4<<3),t>55)for(xh(a,n),t=0;t<16;t++)n[t]=0;return n[14]=8*r,xh(a,n),a}function k3(s){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=s.charCodeAt(t)+(s.charCodeAt(t+1)<<8)+(s.charCodeAt(t+2)<<16)+(s.charCodeAt(t+3)<<24);return r}Yl=At.atob.bind(At),hm=At.btoa.bind(At);var Cp="0123456789abcdef".split("");function C3(s){for(var t="",r=0;r<4;r++)t+=Cp[s>>8*r+4&15]+Cp[s>>8*r&15];return t}function A3(s){return String.fromCharCode((255&s)>>0,(65280&s)>>8,(16711680&s)>>16,(4278190080&s)>>24)}function mm(s){return G1(s).map(A3).join("")}var P3=function(s){for(var t=0;t<s.length;t++)s[t]=C3(s[t]);return s.join("")}(G1("hello"))!="5d41402abc4b2a76b9719d911017c592";function Jn(s,t){if(P3){var r=(65535&s)+(65535&t);return(s>>16)+(t>>16)+(r>>16)<<16|65535&r}return s+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function fm(s,t){var r,a,n,i;if(s!==r){for(var o=(n=s,i=1+(256/s.length>>0),new Array(i+1).join(n)),l=[],d=0;d<256;d++)l[d]=d;var h=0;for(d=0;d<256;d++){var f=l[d];h=(h+f+o.charCodeAt(d))%256,l[d]=l[h],l[h]=f}r=s,a=l}else l=a;var p=t.length,x=0,u=0,k="";for(d=0;d<p;d++)u=(u+(f=l[x=(x+1)%256]))%256,l[x]=l[u],l[u]=f,o=l[(l[x]+l[u])%256],k+=String.fromCharCode(t.charCodeAt(d)^o);return k}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Ap={print:4,modify:8,copy:16,"annot-forms":32};function yo(s,t,r,a){this.v=1,this.r=2;var n=192;s.forEach(function(l){if(Ap.perm!==void 0)throw new Error("Invalid permission: "+l);n+=Ap[l]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var i=(t+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,o),this.P=-(1+(255^n)),this.encryptionKey=mm(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(a)).substr(0,5),this.U=fm(this.encryptionKey,this.padding)}function bo(s){if(/[^\u0000-\u00ff]/.test(s))throw new Error("Invalid PDF Name Object: "+s+", Only accept ASCII characters.");for(var t="",r=s.length,a=0;a<r;a++){var n=s.charCodeAt(a);n<33||n===35||n===37||n===40||n===41||n===47||n===60||n===62||n===91||n===93||n===123||n===125||n>126?t+="#"+("0"+n.toString(16)).slice(-2):t+=s[a]}return t}function Pp(s){if(hs(s)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,a,n){if(n=n||!1,typeof r!="string"||typeof a!="function"||typeof n!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var i=Math.random().toString(35);return t[r][i]=[a,!!n],i},this.unsubscribe=function(r){for(var a in t)if(t[a][r])return delete t[a][r],Object.keys(t[a]).length===0&&delete t[a],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var a=Array.prototype.slice.call(arguments,1),n=[];for(var i in t[r]){var o=t[r][i];try{o[0].apply(s,a)}catch(l){At.console&&ys.error("jsPDF PubSub Error",l.message,l)}o[1]&&n.push(i)}n.length&&n.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Bd(s){if(!(this instanceof Bd))return new Bd(s);var t="opacity,stroke-opacity".split(",");for(var r in s)s.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=s[r]);this.id="",this.objectNumber=-1}function J1(s,t){this.gState=s,this.matrix=t,this.id="",this.objectNumber=-1}function yi(s,t,r,a,n){if(!(this instanceof yi))return new yi(s,t,r,a,n);this.type=s==="axial"?2:3,this.coords=t,this.colors=r,J1.call(this,a,n)}function No(s,t,r,a,n){if(!(this instanceof No))return new No(s,t,r,a,n);this.boundingBox=s,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,J1.call(this,a,n)}function kt(s){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",a=arguments[1],n=arguments[2],i=arguments[3],o=[],l=1,d=16,h="S",f=null;hs(s=s||{})==="object"&&(r=s.orientation,a=s.unit||a,n=s.format||n,i=s.compress||s.compressPdf||i,(f=s.encryption||null)!==null&&(f.userPassword=f.userPassword||"",f.ownerPassword=f.ownerPassword||"",f.userPermissions=f.userPermissions||[]),l=typeof s.userUnit=="number"?Math.abs(s.userUnit):1,s.precision!==void 0&&(t=s.precision),s.floatPrecision!==void 0&&(d=s.floatPrecision),h=s.defaultPathOperation||"S"),o=s.filters||(i===!0?["FlateEncode"]:o),a=a||"mm",r=(""+(r||"P")).toLowerCase();var p=s.putOnlyUsedFonts||!1,x={},u={internal:{},__private__:{}};u.__private__.PubSub=Pp;var k="1.3",j=u.__private__.getPdfVersion=function(){return k};u.__private__.setPdfVersion=function(g){k=g};var v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};u.__private__.getPageFormats=function(){return v};var w=u.__private__.getPageFormat=function(g){return v[g]};n=n||"a4";var P={COMPAT:"compat",ADVANCED:"advanced"},D=P.COMPAT;function B(){this.saveGraphicsState(),H(new ut(Je,0,0,-Je,0,vn()*Je).toString()+" cm"),this.setFontSize(this.getFontSize()/Je),h="n",D=P.ADVANCED}function F(){this.restoreGraphicsState(),h="S",D=P.COMPAT}var se=u.__private__.combineFontStyleAndFontWeight=function(g,O){if(g=="bold"&&O=="normal"||g=="bold"&&O==400||g=="normal"&&O=="italic"||g=="bold"&&O=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return O&&(g=O==400||O==="normal"?g==="italic"?"italic":"normal":O!=700&&O!=="bold"||g!=="normal"?(O==700?"bold":O)+""+g:"bold"),g};u.advancedAPI=function(g){var O=D===P.COMPAT;return O&&B.call(this),typeof g!="function"||(g(this),O&&F.call(this)),this},u.compatAPI=function(g){var O=D===P.ADVANCED;return O&&F.call(this),typeof g!="function"||(g(this),O&&B.call(this)),this},u.isAdvancedAPI=function(){return D===P.ADVANCED};var z,C=function(g){if(D!==P.ADVANCED)throw new Error(g+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},A=u.roundToPrecision=u.__private__.roundToPrecision=function(g,O){var ne=t||O;if(isNaN(g)||isNaN(ne))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return g.toFixed(ne).replace(/0+$/,"")};z=u.hpf=u.__private__.hpf=typeof d=="number"?function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.hpf");return A(g,d)}:d==="smart"?function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.hpf");return A(g,g>-1&&g<1?16:5)}:function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.hpf");return A(g,16)};var L=u.f2=u.__private__.f2=function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.f2");return A(g,2)},y=u.__private__.f3=function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.f3");return A(g,3)},S=u.scale=u.__private__.scale=function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.scale");return D===P.COMPAT?g*Je:D===P.ADVANCED?g:void 0},I=function(g){return D===P.COMPAT?vn()-g:D===P.ADVANCED?g:void 0},M=function(g){return S(I(g))};u.__private__.setPrecision=u.setPrecision=function(g){typeof parseInt(g,10)=="number"&&(t=parseInt(g,10))};var J,ae="00000000000000000000000000000000",he=u.__private__.getFileId=function(){return ae},ce=u.__private__.setFileId=function(g){return ae=g!==void 0&&/^[a-fA-F0-9]{32}$/.test(g)?g.toUpperCase():ae.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),f!==null&&(ur=new yo(f.userPermissions,f.userPassword,f.ownerPassword,ae)),ae};u.setFileId=function(g){return ce(g),this},u.getFileId=function(){return he()};var ie=u.__private__.convertDateToPDFDate=function(g){var O=g.getTimezoneOffset(),ne=O<0?"+":"-",ge=Math.floor(Math.abs(O/60)),ke=Math.abs(O%60),Re=[ne,V(ge),"'",V(ke),"'"].join("");return["D:",g.getFullYear(),V(g.getMonth()+1),V(g.getDate()),V(g.getHours()),V(g.getMinutes()),V(g.getSeconds()),Re].join("")},ve=u.__private__.convertPDFDateToDate=function(g){var O=parseInt(g.substr(2,4),10),ne=parseInt(g.substr(6,2),10)-1,ge=parseInt(g.substr(8,2),10),ke=parseInt(g.substr(10,2),10),Re=parseInt(g.substr(12,2),10),Ve=parseInt(g.substr(14,2),10);return new Date(O,ne,ge,ke,Re,Ve,0)},Ae=u.__private__.setCreationDate=function(g){var O;if(g===void 0&&(g=new Date),g instanceof Date)O=ie(g);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(g))throw new Error("Invalid argument passed to jsPDF.setCreationDate");O=g}return J=O},T=u.__private__.getCreationDate=function(g){var O=J;return g==="jsDate"&&(O=ve(J)),O};u.setCreationDate=function(g){return Ae(g),this},u.getCreationDate=function(g){return T(g)};var U,V=u.__private__.padd2=function(g){return("0"+parseInt(g)).slice(-2)},re=u.__private__.padd2Hex=function(g){return("00"+(g=g.toString())).substr(g.length)},G=0,Y=[],Z=[],de=0,Le=[],X=[],me=!1,we=Z,oe=function(){G=0,de=0,Z=[],Y=[],Le=[],Ft=Oe(),St=Oe()};u.__private__.setCustomOutputDestination=function(g){me=!0,we=g};var ee=function(g){me||(we=g)};u.__private__.resetCustomOutputDestination=function(){me=!1,we=Z};var H=u.__private__.out=function(g){return g=g.toString(),de+=g.length+1,we.push(g),we},Ee=u.__private__.write=function(g){return H(arguments.length===1?g.toString():Array.prototype.join.call(arguments," "))},Fe=u.__private__.getArrayBuffer=function(g){for(var O=g.length,ne=new ArrayBuffer(O),ge=new Uint8Array(ne);O--;)ge[O]=g.charCodeAt(O);return ne},Ie=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];u.__private__.getStandardFonts=function(){return Ie};var Ue=s.fontSize||16;u.__private__.setFontSize=u.setFontSize=function(g){return Ue=D===P.ADVANCED?g/Je:g,this};var Ye,We=u.__private__.getFontSize=u.getFontSize=function(){return D===P.COMPAT?Ue:Ue*Je},st=s.R2L||!1;u.__private__.setR2L=u.setR2L=function(g){return st=g,this},u.__private__.getR2L=u.getR2L=function(){return st};var ot,mt=u.__private__.setZoomMode=function(g){var O=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(g))Ye=g;else if(isNaN(g)){if(O.indexOf(g)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+g+'" is not recognized.');Ye=g}else Ye=parseInt(g,10)};u.__private__.getZoomMode=function(){return Ye};var rt,Be=u.__private__.setPageMode=function(g){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(g)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+g+'" is not recognized.');ot=g};u.__private__.getPageMode=function(){return ot};var ft=u.__private__.setLayoutMode=function(g){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(g)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+g+'" is not recognized.');rt=g};u.__private__.getLayoutMode=function(){return rt},u.__private__.setDisplayMode=u.setDisplayMode=function(g,O,ne){return mt(g),ft(O),Be(ne),this};var pt={title:"",subject:"",author:"",keywords:"",creator:""};u.__private__.getDocumentProperty=function(g){if(Object.keys(pt).indexOf(g)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return pt[g]},u.__private__.getDocumentProperties=function(){return pt},u.__private__.setDocumentProperties=u.setProperties=u.setDocumentProperties=function(g){for(var O in pt)pt.hasOwnProperty(O)&&g[O]&&(pt[O]=g[O]);return this},u.__private__.setDocumentProperty=function(g,O){if(Object.keys(pt).indexOf(g)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return pt[g]=O};var Ct,Je,Xt,Lt,Ps,Qt={},Gt={},nr=[],Yt={},ir={},ss={},Fs={},Vs=null,Ut=0,wt=[],Ze=new Pp(u),zt=s.hotfixes||[],vt={},js={},Ns=[],ut=function g(O,ne,ge,ke,Re,Ve){if(!(this instanceof g))return new g(O,ne,ge,ke,Re,Ve);isNaN(O)&&(O=1),isNaN(ne)&&(ne=0),isNaN(ge)&&(ge=0),isNaN(ke)&&(ke=1),isNaN(Re)&&(Re=0),isNaN(Ve)&&(Ve=0),this._matrix=[O,ne,ge,ke,Re,Ve]};Object.defineProperty(ut.prototype,"sx",{get:function(){return this._matrix[0]},set:function(g){this._matrix[0]=g}}),Object.defineProperty(ut.prototype,"shy",{get:function(){return this._matrix[1]},set:function(g){this._matrix[1]=g}}),Object.defineProperty(ut.prototype,"shx",{get:function(){return this._matrix[2]},set:function(g){this._matrix[2]=g}}),Object.defineProperty(ut.prototype,"sy",{get:function(){return this._matrix[3]},set:function(g){this._matrix[3]=g}}),Object.defineProperty(ut.prototype,"tx",{get:function(){return this._matrix[4]},set:function(g){this._matrix[4]=g}}),Object.defineProperty(ut.prototype,"ty",{get:function(){return this._matrix[5]},set:function(g){this._matrix[5]=g}}),Object.defineProperty(ut.prototype,"a",{get:function(){return this._matrix[0]},set:function(g){this._matrix[0]=g}}),Object.defineProperty(ut.prototype,"b",{get:function(){return this._matrix[1]},set:function(g){this._matrix[1]=g}}),Object.defineProperty(ut.prototype,"c",{get:function(){return this._matrix[2]},set:function(g){this._matrix[2]=g}}),Object.defineProperty(ut.prototype,"d",{get:function(){return this._matrix[3]},set:function(g){this._matrix[3]=g}}),Object.defineProperty(ut.prototype,"e",{get:function(){return this._matrix[4]},set:function(g){this._matrix[4]=g}}),Object.defineProperty(ut.prototype,"f",{get:function(){return this._matrix[5]},set:function(g){this._matrix[5]=g}}),Object.defineProperty(ut.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(ut.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(ut.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(ut.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),ut.prototype.join=function(g){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(z).join(g)},ut.prototype.multiply=function(g){var O=g.sx*this.sx+g.shy*this.shx,ne=g.sx*this.shy+g.shy*this.sy,ge=g.shx*this.sx+g.sy*this.shx,ke=g.shx*this.shy+g.sy*this.sy,Re=g.tx*this.sx+g.ty*this.shx+this.tx,Ve=g.tx*this.shy+g.ty*this.sy+this.ty;return new ut(O,ne,ge,ke,Re,Ve)},ut.prototype.decompose=function(){var g=this.sx,O=this.shy,ne=this.shx,ge=this.sy,ke=this.tx,Re=this.ty,Ve=Math.sqrt(g*g+O*O),lt=(g/=Ve)*ne+(O/=Ve)*ge;ne-=g*lt,ge-=O*lt;var xt=Math.sqrt(ne*ne+ge*ge);return lt/=xt,g*(ge/=xt)<O*(ne/=xt)&&(g=-g,O=-O,lt=-lt,Ve=-Ve),{scale:new ut(Ve,0,0,xt,0,0),translate:new ut(1,0,0,1,ke,Re),rotate:new ut(g,O,-O,g,0,0),skew:new ut(1,0,lt,1,0,0)}},ut.prototype.toString=function(g){return this.join(" ")},ut.prototype.inversed=function(){var g=this.sx,O=this.shy,ne=this.shx,ge=this.sy,ke=this.tx,Re=this.ty,Ve=1/(g*ge-O*ne),lt=ge*Ve,xt=-O*Ve,Bt=-ne*Ve,Mt=g*Ve;return new ut(lt,xt,Bt,Mt,-lt*ke-Bt*Re,-xt*ke-Mt*Re)},ut.prototype.applyToPoint=function(g){var O=g.x*this.sx+g.y*this.shx+this.tx,ne=g.x*this.shy+g.y*this.sy+this.ty;return new Zi(O,ne)},ut.prototype.applyToRectangle=function(g){var O=this.applyToPoint(g),ne=this.applyToPoint(new Zi(g.x+g.w,g.y+g.h));return new hl(O.x,O.y,ne.x-O.x,ne.y-O.y)},ut.prototype.clone=function(){var g=this.sx,O=this.shy,ne=this.shx,ge=this.sy,ke=this.tx,Re=this.ty;return new ut(g,O,ne,ge,ke,Re)},u.Matrix=ut;var fe=u.matrixMult=function(g,O){return O.multiply(g)},De=new ut(1,0,0,1,0,0);u.unitMatrix=u.identityMatrix=De;var ue=function(g,O){if(!ir[g]){var ne=(O instanceof yi?"Sh":"P")+(Object.keys(Yt).length+1).toString(10);O.id=ne,ir[g]=ne,Yt[ne]=O,Ze.publish("addPattern",O)}};u.ShadingPattern=yi,u.TilingPattern=No,u.addShadingPattern=function(g,O){return C("addShadingPattern()"),ue(g,O),this},u.beginTilingPattern=function(g){C("beginTilingPattern()"),Ic(g.boundingBox[0],g.boundingBox[1],g.boundingBox[2]-g.boundingBox[0],g.boundingBox[3]-g.boundingBox[1],g.matrix)},u.endTilingPattern=function(g,O){C("endTilingPattern()"),O.stream=X[U].join(`
`),ue(g,O),Ze.publish("endTilingPattern",O),Ns.pop().restore()};var Se=u.__private__.newObject=function(){var g=Oe();return Ge(g,!0),g},Oe=u.__private__.newObjectDeferred=function(){return G++,Y[G]=function(){return de},G},Ge=function(g,O){return O=typeof O=="boolean"&&O,Y[g]=de,O&&H(g+" 0 obj"),g},gt=u.__private__.newAdditionalObject=function(){var g={objId:Oe(),content:""};return Le.push(g),g},Ft=Oe(),St=Oe(),Tt=u.__private__.decodeColorString=function(g){var O=g.split(" ");if(O.length!==2||O[1]!=="g"&&O[1]!=="G")O.length===5&&(O[4]==="k"||O[4]==="K")&&(O=[(1-O[0])*(1-O[3]),(1-O[1])*(1-O[3]),(1-O[2])*(1-O[3]),"r"]);else{var ne=parseFloat(O[0]);O=[ne,ne,ne,"r"]}for(var ge="#",ke=0;ke<3;ke++)ge+=("0"+Math.floor(255*parseFloat(O[ke])).toString(16)).slice(-2);return ge},is=u.__private__.encodeColorString=function(g){var O;typeof g=="string"&&(g={ch1:g});var ne=g.ch1,ge=g.ch2,ke=g.ch3,Re=g.ch4,Ve=g.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ne=="string"&&ne.charAt(0)!=="#"){var lt=new Y1(ne);if(lt.ok)ne=lt.toHex();else if(!/^\d*\.?\d*$/.test(ne))throw new Error('Invalid color "'+ne+'" passed to jsPDF.encodeColorString.')}if(typeof ne=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ne)&&(ne="#"+ne[1]+ne[1]+ne[2]+ne[2]+ne[3]+ne[3]),typeof ne=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ne)){var xt=parseInt(ne.substr(1),16);ne=xt>>16&255,ge=xt>>8&255,ke=255&xt}if(ge===void 0||Re===void 0&&ne===ge&&ge===ke)if(typeof ne=="string")O=ne+" "+Ve[0];else switch(g.precision){case 2:O=L(ne/255)+" "+Ve[0];break;case 3:default:O=y(ne/255)+" "+Ve[0]}else if(Re===void 0||hs(Re)==="object"){if(Re&&!isNaN(Re.a)&&Re.a===0)return O=["1.","1.","1.",Ve[1]].join(" ");if(typeof ne=="string")O=[ne,ge,ke,Ve[1]].join(" ");else switch(g.precision){case 2:O=[L(ne/255),L(ge/255),L(ke/255),Ve[1]].join(" ");break;default:case 3:O=[y(ne/255),y(ge/255),y(ke/255),Ve[1]].join(" ")}}else if(typeof ne=="string")O=[ne,ge,ke,Re,Ve[2]].join(" ");else switch(g.precision){case 2:O=[L(ne),L(ge),L(ke),L(Re),Ve[2]].join(" ");break;case 3:default:O=[y(ne),y(ge),y(ke),y(Re),Ve[2]].join(" ")}return O},Ss=u.__private__.getFilters=function(){return o},or=u.__private__.putStream=function(g){var O=(g=g||{}).data||"",ne=g.filters||Ss(),ge=g.alreadyAppliedFilters||[],ke=g.addLength1||!1,Re=O.length,Ve=g.objectId,lt=function(hr){return hr};if(f!==null&&Ve===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");f!==null&&(lt=ur.encryptor(Ve,0));var xt={};ne===!0&&(ne=["FlateEncode"]);var Bt=g.additionalKeyValues||[],Mt=(xt=kt.API.processDataByFilters!==void 0?kt.API.processDataByFilters(O,ne):{data:O,reverseChain:[]}).reverseChain+(Array.isArray(ge)?ge.join(" "):ge.toString());if(xt.data.length!==0&&(Bt.push({key:"Length",value:xt.data.length}),ke===!0&&Bt.push({key:"Length1",value:Re})),Mt.length!=0)if(Mt.split("/").length-1==1)Bt.push({key:"Filter",value:Mt});else{Bt.push({key:"Filter",value:"["+Mt+"]"});for(var Zt=0;Zt<Bt.length;Zt+=1)if(Bt[Zt].key==="DecodeParms"){for(var Ds=[],Ms=0;Ms<xt.reverseChain.split("/").length-1;Ms+=1)Ds.push("null");Ds.push(Bt[Zt].value),Bt[Zt].value="["+Ds.join(" ")+"]"}}H("<<");for(var Ys=0;Ys<Bt.length;Ys++)H("/"+Bt[Ys].key+" "+Bt[Ys].value);H(">>"),xt.data.length!==0&&(H("stream"),H(lt(xt.data)),H("endstream"))},kr=u.__private__.putPage=function(g){var O=g.number,ne=g.data,ge=g.objId,ke=g.contentsObjId;Ge(ge,!0),H("<</Type /Page"),H("/Parent "+g.rootDictionaryObjId+" 0 R"),H("/Resources "+g.resourceDictionaryObjId+" 0 R"),H("/MediaBox ["+parseFloat(z(g.mediaBox.bottomLeftX))+" "+parseFloat(z(g.mediaBox.bottomLeftY))+" "+z(g.mediaBox.topRightX)+" "+z(g.mediaBox.topRightY)+"]"),g.cropBox!==null&&H("/CropBox ["+z(g.cropBox.bottomLeftX)+" "+z(g.cropBox.bottomLeftY)+" "+z(g.cropBox.topRightX)+" "+z(g.cropBox.topRightY)+"]"),g.bleedBox!==null&&H("/BleedBox ["+z(g.bleedBox.bottomLeftX)+" "+z(g.bleedBox.bottomLeftY)+" "+z(g.bleedBox.topRightX)+" "+z(g.bleedBox.topRightY)+"]"),g.trimBox!==null&&H("/TrimBox ["+z(g.trimBox.bottomLeftX)+" "+z(g.trimBox.bottomLeftY)+" "+z(g.trimBox.topRightX)+" "+z(g.trimBox.topRightY)+"]"),g.artBox!==null&&H("/ArtBox ["+z(g.artBox.bottomLeftX)+" "+z(g.artBox.bottomLeftY)+" "+z(g.artBox.topRightX)+" "+z(g.artBox.topRightY)+"]"),typeof g.userUnit=="number"&&g.userUnit!==1&&H("/UserUnit "+g.userUnit),Ze.publish("putPage",{objId:ge,pageContext:wt[O],pageNumber:O,page:ne}),H("/Contents "+ke+" 0 R"),H(">>"),H("endobj");var Re=ne.join(`
`);return D===P.ADVANCED&&(Re+=`
Q`),Ge(ke,!0),or({data:Re,filters:Ss(),objectId:ke}),H("endobj"),ge},Ia=u.__private__.putPages=function(){var g,O,ne=[];for(g=1;g<=Ut;g++)wt[g].objId=Oe(),wt[g].contentsObjId=Oe();for(g=1;g<=Ut;g++)ne.push(kr({number:g,data:X[g],objId:wt[g].objId,contentsObjId:wt[g].contentsObjId,mediaBox:wt[g].mediaBox,cropBox:wt[g].cropBox,bleedBox:wt[g].bleedBox,trimBox:wt[g].trimBox,artBox:wt[g].artBox,userUnit:wt[g].userUnit,rootDictionaryObjId:Ft,resourceDictionaryObjId:St}));Ge(Ft,!0),H("<</Type /Pages");var ge="/Kids [";for(O=0;O<Ut;O++)ge+=ne[O]+" 0 R ";H(ge+"]"),H("/Count "+Ut),H(">>"),H("endobj"),Ze.publish("postPutPages")},Ya=function(g){Ze.publish("putFont",{font:g,out:H,newObject:Se,putStream:or}),g.isAlreadyPutted!==!0&&(g.objectNumber=Se(),H("<<"),H("/Type /Font"),H("/BaseFont /"+bo(g.postScriptName)),H("/Subtype /Type1"),typeof g.encoding=="string"&&H("/Encoding /"+g.encoding),H("/FirstChar 32"),H("/LastChar 255"),H(">>"),H("endobj"))},zi=function(){for(var g in Qt)Qt.hasOwnProperty(g)&&(p===!1||p===!0&&x.hasOwnProperty(g))&&Ya(Qt[g])},$i=function(g){g.objectNumber=Se();var O=[];O.push({key:"Type",value:"/XObject"}),O.push({key:"Subtype",value:"/Form"}),O.push({key:"BBox",value:"["+[z(g.x),z(g.y),z(g.x+g.width),z(g.y+g.height)].join(" ")+"]"}),O.push({key:"Matrix",value:"["+g.matrix.toString()+"]"});var ne=g.pages[1].join(`
`);or({data:ne,additionalKeyValues:O,objectId:g.objectNumber}),H("endobj")},Wi=function(){for(var g in vt)vt.hasOwnProperty(g)&&$i(vt[g])},mc=function(g,O){var ne,ge=[],ke=1/(O-1);for(ne=0;ne<1;ne+=ke)ge.push(ne);if(ge.push(1),g[0].offset!=0){var Re={offset:0,color:g[0].color};g.unshift(Re)}if(g[g.length-1].offset!=1){var Ve={offset:1,color:g[g.length-1].color};g.push(Ve)}for(var lt="",xt=0,Bt=0;Bt<ge.length;Bt++){for(ne=ge[Bt];ne>g[xt+1].offset;)xt++;var Mt=g[xt].offset,Zt=(ne-Mt)/(g[xt+1].offset-Mt),Ds=g[xt].color,Ms=g[xt+1].color;lt+=re(Math.round((1-Zt)*Ds[0]+Zt*Ms[0]).toString(16))+re(Math.round((1-Zt)*Ds[1]+Zt*Ms[1]).toString(16))+re(Math.round((1-Zt)*Ds[2]+Zt*Ms[2]).toString(16))}return lt.trim()},hu=function(g,O){O||(O=21);var ne=Se(),ge=mc(g.colors,O),ke=[];ke.push({key:"FunctionType",value:"0"}),ke.push({key:"Domain",value:"[0.0 1.0]"}),ke.push({key:"Size",value:"["+O+"]"}),ke.push({key:"BitsPerSample",value:"8"}),ke.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ke.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),or({data:ge,additionalKeyValues:ke,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ne}),H("endobj"),g.objectNumber=Se(),H("<< /ShadingType "+g.type),H("/ColorSpace /DeviceRGB");var Re="/Coords ["+z(parseFloat(g.coords[0]))+" "+z(parseFloat(g.coords[1]))+" ";g.type===2?Re+=z(parseFloat(g.coords[2]))+" "+z(parseFloat(g.coords[3])):Re+=z(parseFloat(g.coords[2]))+" "+z(parseFloat(g.coords[3]))+" "+z(parseFloat(g.coords[4]))+" "+z(parseFloat(g.coords[5])),H(Re+="]"),g.matrix&&H("/Matrix ["+g.matrix.toString()+"]"),H("/Function "+ne+" 0 R"),H("/Extend [true true]"),H(">>"),H("endobj")},mu=function(g,O){var ne=Oe(),ge=Se();O.push({resourcesOid:ne,objectOid:ge}),g.objectNumber=ge;var ke=[];ke.push({key:"Type",value:"/Pattern"}),ke.push({key:"PatternType",value:"1"}),ke.push({key:"PaintType",value:"1"}),ke.push({key:"TilingType",value:"1"}),ke.push({key:"BBox",value:"["+g.boundingBox.map(z).join(" ")+"]"}),ke.push({key:"XStep",value:z(g.xStep)}),ke.push({key:"YStep",value:z(g.yStep)}),ke.push({key:"Resources",value:ne+" 0 R"}),g.matrix&&ke.push({key:"Matrix",value:"["+g.matrix.toString()+"]"}),or({data:g.stream,additionalKeyValues:ke,objectId:g.objectNumber}),H("endobj")},Hi=function(g){var O;for(O in Yt)Yt.hasOwnProperty(O)&&(Yt[O]instanceof yi?hu(Yt[O]):Yt[O]instanceof No&&mu(Yt[O],g))},fc=function(g){for(var O in g.objectNumber=Se(),H("<<"),g)switch(O){case"opacity":H("/ca "+L(g[O]));break;case"stroke-opacity":H("/CA "+L(g[O]))}H(">>"),H("endobj")},fu=function(){var g;for(g in ss)ss.hasOwnProperty(g)&&fc(ss[g])},sl=function(){for(var g in H("/XObject <<"),vt)vt.hasOwnProperty(g)&&vt[g].objectNumber>=0&&H("/"+g+" "+vt[g].objectNumber+" 0 R");Ze.publish("putXobjectDict"),H(">>")},pu=function(){ur.oid=Se(),H("<<"),H("/Filter /Standard"),H("/V "+ur.v),H("/R "+ur.r),H("/U <"+ur.toHexString(ur.U)+">"),H("/O <"+ur.toHexString(ur.O)+">"),H("/P "+ur.P),H(">>"),H("endobj")},pc=function(){for(var g in H("/Font <<"),Qt)Qt.hasOwnProperty(g)&&(p===!1||p===!0&&x.hasOwnProperty(g))&&H("/"+g+" "+Qt[g].objectNumber+" 0 R");H(">>")},gu=function(){if(Object.keys(Yt).length>0){for(var g in H("/Shading <<"),Yt)Yt.hasOwnProperty(g)&&Yt[g]instanceof yi&&Yt[g].objectNumber>=0&&H("/"+g+" "+Yt[g].objectNumber+" 0 R");Ze.publish("putShadingPatternDict"),H(">>")}},Vi=function(g){if(Object.keys(Yt).length>0){for(var O in H("/Pattern <<"),Yt)Yt.hasOwnProperty(O)&&Yt[O]instanceof u.TilingPattern&&Yt[O].objectNumber>=0&&Yt[O].objectNumber<g&&H("/"+O+" "+Yt[O].objectNumber+" 0 R");Ze.publish("putTilingPatternDict"),H(">>")}},xu=function(){if(Object.keys(ss).length>0){var g;for(g in H("/ExtGState <<"),ss)ss.hasOwnProperty(g)&&ss[g].objectNumber>=0&&H("/"+g+" "+ss[g].objectNumber+" 0 R");Ze.publish("putGStateDict"),H(">>")}},Bs=function(g){Ge(g.resourcesOid,!0),H("<<"),H("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),pc(),gu(),Vi(g.objectOid),xu(),sl(),H(">>"),H("endobj")},gc=function(){var g=[];zi(),fu(),Wi(),Hi(g),Ze.publish("putResources"),g.forEach(Bs),Bs({resourcesOid:St,objectOid:Number.MAX_SAFE_INTEGER}),Ze.publish("postPutResources")},xc=function(){Ze.publish("putAdditionalObjects");for(var g=0;g<Le.length;g++){var O=Le[g];Ge(O.objId,!0),H(O.content),H("endobj")}Ze.publish("postPutAdditionalObjects")},vc=function(g){Gt[g.fontName]=Gt[g.fontName]||{},Gt[g.fontName][g.fontStyle]=g.id},rl=function(g,O,ne,ge,ke){var Re={id:"F"+(Object.keys(Qt).length+1).toString(10),postScriptName:g,fontName:O,fontStyle:ne,encoding:ge,isStandardFont:ke||!1,metadata:{}};return Ze.publish("addFont",{font:Re,instance:this}),Qt[Re.id]=Re,vc(Re),Re.id},vu=function(g){for(var O=0,ne=Ie.length;O<ne;O++){var ge=rl.call(this,g[O][0],g[O][1],g[O][2],Ie[O][3],!0);p===!1&&(x[ge]=!0);var ke=g[O][0].split("-");vc({id:ge,fontName:ke[0],fontStyle:ke[1]||""})}Ze.publish("addFonts",{fonts:Qt,dictionary:Gt})},ha=function(g){return g.foo=function(){try{return g.apply(this,arguments)}catch(ge){var O=ge.stack||"";~O.indexOf(" at ")&&(O=O.split(" at ")[1]);var ne="Error in function "+O.split(`
`)[0].split("<")[0]+": "+ge.message;if(!At.console)throw new Error(ne);At.console.error(ne,ge),At.alert&&alert(ne)}},g.foo.bar=g,g.foo},Yi=function(g,O){var ne,ge,ke,Re,Ve,lt,xt,Bt,Mt;if(ke=(O=O||{}).sourceEncoding||"Unicode",Ve=O.outputEncoding,(O.autoencode||Ve)&&Qt[Ct].metadata&&Qt[Ct].metadata[ke]&&Qt[Ct].metadata[ke].encoding&&(Re=Qt[Ct].metadata[ke].encoding,!Ve&&Qt[Ct].encoding&&(Ve=Qt[Ct].encoding),!Ve&&Re.codePages&&(Ve=Re.codePages[0]),typeof Ve=="string"&&(Ve=Re[Ve]),Ve)){for(xt=!1,lt=[],ne=0,ge=g.length;ne<ge;ne++)(Bt=Ve[g.charCodeAt(ne)])?lt.push(String.fromCharCode(Bt)):lt.push(g[ne]),lt[ne].charCodeAt(0)>>8&&(xt=!0);g=lt.join("")}for(ne=g.length;xt===void 0&&ne!==0;)g.charCodeAt(ne-1)>>8&&(xt=!0),ne--;if(!xt)return g;for(lt=O.noBOM?[]:[254,255],ne=0,ge=g.length;ne<ge;ne++){if((Mt=(Bt=g.charCodeAt(ne))>>8)>>8)throw new Error("Character at position "+ne+" of string '"+g+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");lt.push(Mt),lt.push(Bt-(Mt<<8))}return String.fromCharCode.apply(void 0,lt)},Er=u.__private__.pdfEscape=u.pdfEscape=function(g,O){return Yi(g,O).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},al=u.__private__.beginPage=function(g){X[++Ut]=[],wt[Ut]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(g[0]),topRightY:Number(g[1])}},bc(Ut),ee(X[U])},yc=function(g,O){var ne,ge,ke;switch(r=O||r,typeof g=="string"&&(ne=w(g.toLowerCase()),Array.isArray(ne)&&(ge=ne[0],ke=ne[1])),Array.isArray(g)&&(ge=g[0]*Je,ke=g[1]*Je),isNaN(ge)&&(ge=n[0],ke=n[1]),(ge>14400||ke>14400)&&(ys.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ge=Math.min(14400,ge),ke=Math.min(14400,ke)),n=[ge,ke],r.substr(0,1)){case"l":ke>ge&&(n=[ke,ge]);break;case"p":ge>ke&&(n=[ke,ge])}al(n),Cc(ll),H(ma),dl!==0&&H(dl+" J"),ul!==0&&H(ul+" j"),Ze.publish("addPage",{pageNumber:Ut})},yu=function(g){g>0&&g<=Ut&&(X.splice(g,1),wt.splice(g,1),Ut--,U>Ut&&(U=Ut),this.setPage(U))},bc=function(g){g>0&&g<=Ut&&(U=g)},bu=u.__private__.getNumberOfPages=u.getNumberOfPages=function(){return X.length-1},wc=function(g,O,ne){var ge,ke=void 0;return ne=ne||{},g=g!==void 0?g:Qt[Ct].fontName,O=O!==void 0?O:Qt[Ct].fontStyle,ge=g.toLowerCase(),Gt[ge]!==void 0&&Gt[ge][O]!==void 0?ke=Gt[ge][O]:Gt[g]!==void 0&&Gt[g][O]!==void 0?ke=Gt[g][O]:ne.disableWarning===!1&&ys.warn("Unable to look up font label for font '"+g+"', '"+O+"'. Refer to getFontList() for available fonts."),ke||ne.noFallback||(ke=Gt.times[O])==null&&(ke=Gt.times.normal),ke},wu=u.__private__.putInfo=function(){var g=Se(),O=function(ge){return ge};for(var ne in f!==null&&(O=ur.encryptor(g,0)),H("<<"),H("/Producer ("+Er(O("jsPDF "+kt.version))+")"),pt)pt.hasOwnProperty(ne)&&pt[ne]&&H("/"+ne.substr(0,1).toUpperCase()+ne.substr(1)+" ("+Er(O(pt[ne]))+")");H("/CreationDate ("+Er(O(J))+")"),H(">>"),H("endobj")},nl=u.__private__.putCatalog=function(g){var O=(g=g||{}).rootDictionaryObjId||Ft;switch(Se(),H("<<"),H("/Type /Catalog"),H("/Pages "+O+" 0 R"),Ye||(Ye="fullwidth"),Ye){case"fullwidth":H("/OpenAction [3 0 R /FitH null]");break;case"fullheight":H("/OpenAction [3 0 R /FitV null]");break;case"fullpage":H("/OpenAction [3 0 R /Fit]");break;case"original":H("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ne=""+Ye;ne.substr(ne.length-1)==="%"&&(Ye=parseInt(Ye)/100),typeof Ye=="number"&&H("/OpenAction [3 0 R /XYZ null null "+L(Ye)+"]")}switch(rt||(rt="continuous"),rt){case"continuous":H("/PageLayout /OneColumn");break;case"single":H("/PageLayout /SinglePage");break;case"two":case"twoleft":H("/PageLayout /TwoColumnLeft");break;case"tworight":H("/PageLayout /TwoColumnRight")}ot&&H("/PageMode /"+ot),Ze.publish("putCatalog"),H(">>"),H("endobj")},ju=u.__private__.putTrailer=function(){H("trailer"),H("<<"),H("/Size "+(G+1)),H("/Root "+G+" 0 R"),H("/Info "+(G-1)+" 0 R"),f!==null&&H("/Encrypt "+ur.oid+" 0 R"),H("/ID [ <"+ae+"> <"+ae+"> ]"),H(">>")},Nu=u.__private__.putHeader=function(){H("%PDF-"+k),H("%ºß¬à")},Su=u.__private__.putXRef=function(){var g="0000000000";H("xref"),H("0 "+(G+1)),H("0000000000 65535 f ");for(var O=1;O<=G;O++)typeof Y[O]=="function"?H((g+Y[O]()).slice(-10)+" 00000 n "):Y[O]!==void 0?H((g+Y[O]).slice(-10)+" 00000 n "):H("0000000000 00000 n ")},Ga=u.__private__.buildDocument=function(){oe(),ee(Z),Ze.publish("buildDocument"),Nu(),Ia(),xc(),gc(),f!==null&&pu(),wu(),nl();var g=de;return Su(),ju(),H("startxref"),H(""+g),H("%%EOF"),ee(X[U]),Z.join(`
`)},Gi=u.__private__.getBlob=function(g){return new Blob([Fe(g)],{type:"application/pdf"})},Ji=u.output=u.__private__.output=ha(function(g,O){switch(typeof(O=O||{})=="string"?O={filename:O}:O.filename=O.filename||"generated.pdf",g){case void 0:return Ga();case"save":u.save(O.filename);break;case"arraybuffer":return Fe(Ga());case"blob":return Gi(Ga());case"bloburi":case"bloburl":if(At.URL!==void 0&&typeof At.URL.createObjectURL=="function")return At.URL&&At.URL.createObjectURL(Gi(Ga()))||void 0;ys.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ne="",ge=Ga();try{ne=hm(ge)}catch(Ms){ne=hm(unescape(encodeURIComponent(ge)))}return"data:application/pdf;filename="+O.filename+";base64,"+ne;case"pdfobjectnewwindow":if(Object.prototype.toString.call(At)==="[object Window]"){var ke="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Re=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';O.pdfObjectUrl&&(ke=O.pdfObjectUrl,Re="");var Ve='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ke+'"'+Re+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(O)+");<\/script></body></html>",lt=At.open();return lt!==null&&lt.document.write(Ve),lt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(At)==="[object Window]"){var xt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(O.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+O.filename+'" width="500px" height="400px" /></body></html>',Bt=At.open();if(Bt!==null){Bt.document.write(xt);var Mt=this;Bt.document.documentElement.querySelector("#pdfViewer").onload=function(){Bt.document.title=O.filename,Bt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Mt.output("bloburl"))}}return Bt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(At)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Zt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",O)+'"></iframe></body></html>',Ds=At.open();if(Ds!==null&&(Ds.document.write(Zt),Ds.document.title=O.filename),Ds||typeof safari=="undefined")return Ds;break;case"datauri":case"dataurl":return At.document.location.href=this.output("datauristring",O);default:return null}}),jc=function(g){return Array.isArray(zt)===!0&&zt.indexOf(g)>-1};switch(a){case"pt":Je=1;break;case"mm":Je=72/25.4;break;case"cm":Je=72/2.54;break;case"in":Je=72;break;case"px":Je=jc("px_scaling")==1?.75:96/72;break;case"pc":case"em":Je=12;break;case"ex":Je=6;break;default:if(typeof a!="number")throw new Error("Invalid unit: "+a);Je=a}var ur=null;Ae(),ce();var ku=function(g){return f!==null?ur.encryptor(g,0):function(O){return O}},Nc=u.__private__.getPageInfo=u.getPageInfo=function(g){if(isNaN(g)||g%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:wt[g].objId,pageNumber:g,pageContext:wt[g]}},Dt=u.__private__.getPageInfoByObjId=function(g){if(isNaN(g)||g%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var O in wt)if(wt[O].objId===g)break;return Nc(O)},Cu=u.__private__.getCurrentPageInfo=u.getCurrentPageInfo=function(){return{objId:wt[U].objId,pageNumber:U,pageContext:wt[U]}};u.addPage=function(){return yc.apply(this,arguments),this},u.setPage=function(){return bc.apply(this,arguments),ee.call(this,X[U]),this},u.insertPage=function(g){return this.addPage(),this.movePage(U,g),this},u.movePage=function(g,O){var ne,ge;if(g>O){ne=X[g],ge=wt[g];for(var ke=g;ke>O;ke--)X[ke]=X[ke-1],wt[ke]=wt[ke-1];X[O]=ne,wt[O]=ge,this.setPage(O)}else if(g<O){ne=X[g],ge=wt[g];for(var Re=g;Re<O;Re++)X[Re]=X[Re+1],wt[Re]=wt[Re+1];X[O]=ne,wt[O]=ge,this.setPage(O)}return this},u.deletePage=function(){return yu.apply(this,arguments),this},u.__private__.text=u.text=function(g,O,ne,ge,ke){var Re,Ve,lt,xt,Bt,Mt,Zt,Ds,Ms,Ys=(ge=ge||{}).scope||this;if(typeof g=="number"&&typeof O=="number"&&(typeof ne=="string"||Array.isArray(ne))){var hr=ne;ne=O,O=g,g=hr}if(arguments[3]instanceof ut?(C("The transform parameter of text() with a Matrix value"),Ms=ke):(lt=arguments[4],xt=arguments[5],hs(Zt=arguments[3])==="object"&&Zt!==null||(typeof lt=="string"&&(xt=lt,lt=null),typeof Zt=="string"&&(xt=Zt,Zt=null),typeof Zt=="number"&&(lt=Zt,Zt=null),ge={flags:Zt,angle:lt,align:xt})),isNaN(O)||isNaN(ne)||g==null)throw new Error("Invalid arguments passed to jsPDF.text");if(g.length===0)return Ys;var er="",fa=!1,Hr=typeof ge.lineHeightFactor=="number"?ge.lineHeightFactor:oi,Ma=Ys.internal.scaleFactor;function Dc(ks){return ks=ks.split("	").join(Array(ge.TabLen||9).join(" ")),Er(ks,Zt)}function gl(ks){for(var Cs,qs=ks.concat(),Xs=[],Za=qs.length;Za--;)typeof(Cs=qs.shift())=="string"?Xs.push(Cs):Array.isArray(ks)&&(Cs.length===1||Cs[1]===void 0&&Cs[2]===void 0)?Xs.push(Cs[0]):Xs.push([Cs[0],Cs[1],Cs[2]]);return Xs}function xl(ks,Cs){var qs;if(typeof ks=="string")qs=Cs(ks)[0];else if(Array.isArray(ks)){for(var Xs,Za,kl=ks.concat(),uo=[],Oc=kl.length;Oc--;)typeof(Xs=kl.shift())=="string"?uo.push(Cs(Xs)[0]):Array.isArray(Xs)&&typeof Xs[0]=="string"&&(Za=Cs(Xs[0],Xs[1],Xs[2]),uo.push([Za[0],Za[1],Za[2]]));qs=uo}return qs}var to=!1,vl=!0;if(typeof g=="string")to=!0;else if(Array.isArray(g)){var yl=g.concat();Ve=[];for(var so,lr=yl.length;lr--;)(typeof(so=yl.shift())!="string"||Array.isArray(so)&&typeof so[0]!="string")&&(vl=!1);to=vl}if(to===!1)throw new Error('Type of text must be string or Array. "'+g+'" is not recognized.');typeof g=="string"&&(g=g.match(/[\r?\n]/)?g.split(/\r\n|\r|\n/g):[g]);var ro=Ue/Ys.internal.scaleFactor,ao=ro*(Hr-1);switch(ge.baseline){case"bottom":ne-=ao;break;case"top":ne+=ro-ao;break;case"hanging":ne+=ro-2*ao;break;case"middle":ne+=ro/2-ao}if((Mt=ge.maxWidth||0)>0&&(typeof g=="string"?g=Ys.splitTextToSize(g,Mt):Object.prototype.toString.call(g)==="[object Array]"&&(g=g.reduce(function(ks,Cs){return ks.concat(Ys.splitTextToSize(Cs,Mt))},[]))),Re={text:g,x:O,y:ne,options:ge,mutex:{pdfEscape:Er,activeFontKey:Ct,fonts:Qt,activeFontSize:Ue}},Ze.publish("preProcessText",Re),g=Re.text,lt=(ge=Re.options).angle,!(Ms instanceof ut)&&lt&&typeof lt=="number"){lt*=Math.PI/180,ge.rotationDirection===0&&(lt=-lt),D===P.ADVANCED&&(lt=-lt);var no=Math.cos(lt),bl=Math.sin(lt);Ms=new ut(no,bl,-bl,no,0,0)}else lt&&lt instanceof ut&&(Ms=lt);D!==P.ADVANCED||Ms||(Ms=De),(Bt=ge.charSpace||Qi)!==void 0&&(er+=z(S(Bt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ds=ge.horizontalScale)!==void 0&&(er+=z(100*Ds)+` Tz
`),ge.lang;var Rr=-1,Ru=ge.renderingMode!==void 0?ge.renderingMode:ge.stroke,wl=Ys.internal.getCurrentPageInfo().pageContext;switch(Ru){case 0:case!1:case"fill":Rr=0;break;case 1:case!0:case"stroke":Rr=1;break;case 2:case"fillThenStroke":Rr=2;break;case 3:case"invisible":Rr=3;break;case 4:case"fillAndAddForClipping":Rr=4;break;case 5:case"strokeAndAddPathForClipping":Rr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Rr=6;break;case 7:case"addToPathForClipping":Rr=7}var Tc=wl.usedRenderingMode!==void 0?wl.usedRenderingMode:-1;Rr!==-1?er+=Rr+` Tr
`:Tc!==-1&&(er+=`0 Tr
`),Rr!==-1&&(wl.usedRenderingMode=Rr),xt=ge.align||"left";var Qr,io=Ue*Hr,Mc=Ys.internal.pageSize.getWidth(),Ec=Qt[Ct];Bt=ge.charSpace||Qi,Mt=ge.maxWidth||0,Zt=Object.assign({autoencode:!0,noBOM:!0},ge.flags);var yn=[],di=function(ks){return Ys.getStringUnitWidth(ks,{font:Ec,charSpace:Bt,fontSize:Ue,doKerning:!1})*Ue/Ma};if(Object.prototype.toString.call(g)==="[object Array]"){var Or;Ve=gl(g),xt!=="left"&&(Qr=Ve.map(di));var Cr,bn=0;if(xt==="right"){O-=Qr[0],g=[],lr=Ve.length;for(var Ka=0;Ka<lr;Ka++)Ka===0?(Cr=Ta(O),Or=Ja(ne)):(Cr=S(bn-Qr[Ka]),Or=-io),g.push([Ve[Ka],Cr,Or]),bn=Qr[Ka]}else if(xt==="center"){O-=Qr[0]/2,g=[],lr=Ve.length;for(var Xa=0;Xa<lr;Xa++)Xa===0?(Cr=Ta(O),Or=Ja(ne)):(Cr=S((bn-Qr[Xa])/2),Or=-io),g.push([Ve[Xa],Cr,Or]),bn=Qr[Xa]}else if(xt==="left"){g=[],lr=Ve.length;for(var oo=0;oo<lr;oo++)g.push(Ve[oo])}else if(xt==="justify"&&Ec.encoding==="Identity-H"){g=[],lr=Ve.length,Mt=Mt!==0?Mt:Mc;for(var Qa=0,Us=0;Us<lr;Us++)if(Or=Us===0?Ja(ne):-io,Cr=Us===0?Ta(O):Qa,Us<lr-1){var jl=S((Mt-Qr[Us])/(Ve[Us].split(" ").length-1)),Ar=Ve[Us].split(" ");g.push([Ar[0]+" ",Cr,Or]),Qa=0;for(var Zr=1;Zr<Ar.length;Zr++){var lo=(di(Ar[Zr-1]+" "+Ar[Zr])-di(Ar[Zr]))*Ma+jl;Zr==Ar.length-1?g.push([Ar[Zr],lo,0]):g.push([Ar[Zr]+" ",lo,0]),Qa-=lo}}else g.push([Ve[Us],Cr,Or]);g.push(["",Qa,0])}else{if(xt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(g=[],lr=Ve.length,Mt=Mt!==0?Mt:Mc,Us=0;Us<lr;Us++)Or=Us===0?Ja(ne):-io,Cr=Us===0?Ta(O):0,Us<lr-1?yn.push(z(S((Mt-Qr[Us])/(Ve[Us].split(" ").length-1)))):yn.push(0),g.push([Ve[Us],Cr,Or])}}var Rc=typeof ge.R2L=="boolean"?ge.R2L:st;Rc===!0&&(g=xl(g,function(ks,Cs,qs){return[ks.split("").reverse().join(""),Cs,qs]})),Re={text:g,x:O,y:ne,options:ge,mutex:{pdfEscape:Er,activeFontKey:Ct,fonts:Qt,activeFontSize:Ue}},Ze.publish("postProcessText",Re),g=Re.text,fa=Re.mutex.isHex||!1;var Nl=Qt[Ct].encoding;Nl!=="WinAnsiEncoding"&&Nl!=="StandardEncoding"||(g=xl(g,function(ks,Cs,qs){return[Dc(ks),Cs,qs]})),Ve=gl(g),g=[];for(var ui,hi,wn,mi=0,co=1,fi=Array.isArray(Ve[0])?co:mi,jn="",Sl=function(ks,Cs,qs){var Xs="";return qs instanceof ut?(qs=typeof ge.angle=="number"?fe(qs,new ut(1,0,0,1,ks,Cs)):fe(new ut(1,0,0,1,ks,Cs),qs),D===P.ADVANCED&&(qs=fe(new ut(1,0,0,-1,0,0),qs)),Xs=qs.join(" ")+` Tm
`):Xs=z(ks)+" "+z(Cs)+` Td
`,Xs},ea=0;ea<Ve.length;ea++){switch(jn="",fi){case co:wn=(fa?"<":"(")+Ve[ea][0]+(fa?">":")"),ui=parseFloat(Ve[ea][1]),hi=parseFloat(Ve[ea][2]);break;case mi:wn=(fa?"<":"(")+Ve[ea]+(fa?">":")"),ui=Ta(O),hi=Ja(ne)}yn!==void 0&&yn[ea]!==void 0&&(jn=yn[ea]+` Tw
`),ea===0?g.push(jn+Sl(ui,hi,Ms)+wn):fi===mi?g.push(jn+wn):fi===co&&g.push(jn+Sl(ui,hi,Ms)+wn)}g=fi===mi?g.join(` Tj
T* `):g.join(` Tj
`),g+=` Tj
`;var ta=`BT
/`;return ta+=Ct+" "+Ue+` Tf
`,ta+=z(Ue*Hr)+` TL
`,ta+=li+`
`,ta+=er,ta+=g,H(ta+="ET"),x[Ct]=!0,Ys};var Au=u.__private__.clip=u.clip=function(g){return H(g==="evenodd"?"W*":"W"),this};u.clipEvenOdd=function(){return Au("evenodd")},u.__private__.discardPath=u.discardPath=function(){return H("n"),this};var Da=u.__private__.isValidStyle=function(g){var O=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(g)!==-1&&(O=!0),O};u.__private__.setDefaultPathOperation=u.setDefaultPathOperation=function(g){return Da(g)&&(h=g),this};var Sc=u.__private__.getStyle=u.getStyle=function(g){var O=h;switch(g){case"D":case"S":O="S";break;case"F":O="f";break;case"FD":case"DF":O="B";break;case"f":case"f*":case"B":case"B*":O=g}return O},kc=u.close=function(){return H("h"),this};u.stroke=function(){return H("S"),this},u.fill=function(g){return Ki("f",g),this},u.fillEvenOdd=function(g){return Ki("f*",g),this},u.fillStroke=function(g){return Ki("B",g),this},u.fillStrokeEvenOdd=function(g){return Ki("B*",g),this};var Ki=function(g,O){hs(O)==="object"?_u(O,g):H(g)},il=function(g){g===null||D===P.ADVANCED&&g===void 0||(g=Sc(g),H(g))};function Pu(g,O,ne,ge,ke){var Re=new No(O||this.boundingBox,ne||this.xStep,ge||this.yStep,this.gState,ke||this.matrix);Re.stream=this.stream;var Ve=g+"$$"+this.cloneIndex+++"$$";return ue(Ve,Re),Re}var _u=function(g,O){var ne=ir[g.key],ge=Yt[ne];if(ge instanceof yi)H("q"),H(Lu(O)),ge.gState&&u.setGState(ge.gState),H(g.matrix.toString()+" cm"),H("/"+ne+" sh"),H("Q");else if(ge instanceof No){var ke=new ut(1,0,0,-1,0,vn());g.matrix&&(ke=ke.multiply(g.matrix||De),ne=Pu.call(ge,g.key,g.boundingBox,g.xStep,g.yStep,ke).id),H("q"),H("/Pattern cs"),H("/"+ne+" scn"),ge.gState&&u.setGState(ge.gState),H(O),H("Q")}},Lu=function(g){switch(g){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},ol=u.moveTo=function(g,O){return H(z(S(g))+" "+z(M(O))+" m"),this},ii=u.lineTo=function(g,O){return H(z(S(g))+" "+z(M(O))+" l"),this},gn=u.curveTo=function(g,O,ne,ge,ke,Re){return H([z(S(g)),z(M(O)),z(S(ne)),z(M(ge)),z(S(ke)),z(M(Re)),"c"].join(" ")),this};u.__private__.line=u.line=function(g,O,ne,ge,ke){if(isNaN(g)||isNaN(O)||isNaN(ne)||isNaN(ge)||!Da(ke))throw new Error("Invalid arguments passed to jsPDF.line");return D===P.COMPAT?this.lines([[ne-g,ge-O]],g,O,[1,1],ke||"S"):this.lines([[ne-g,ge-O]],g,O,[1,1]).stroke()},u.__private__.lines=u.lines=function(g,O,ne,ge,ke,Re){var Ve,lt,xt,Bt,Mt,Zt,Ds,Ms,Ys,hr,er,fa;if(typeof g=="number"&&(fa=ne,ne=O,O=g,g=fa),ge=ge||[1,1],Re=Re||!1,isNaN(O)||isNaN(ne)||!Array.isArray(g)||!Array.isArray(ge)||!Da(ke)||typeof Re!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(ol(O,ne),Ve=ge[0],lt=ge[1],Bt=g.length,hr=O,er=ne,xt=0;xt<Bt;xt++)(Mt=g[xt]).length===2?(hr=Mt[0]*Ve+hr,er=Mt[1]*lt+er,ii(hr,er)):(Zt=Mt[0]*Ve+hr,Ds=Mt[1]*lt+er,Ms=Mt[2]*Ve+hr,Ys=Mt[3]*lt+er,hr=Mt[4]*Ve+hr,er=Mt[5]*lt+er,gn(Zt,Ds,Ms,Ys,hr,er));return Re&&kc(),il(ke),this},u.path=function(g){for(var O=0;O<g.length;O++){var ne=g[O],ge=ne.c;switch(ne.op){case"m":ol(ge[0],ge[1]);break;case"l":ii(ge[0],ge[1]);break;case"c":gn.apply(this,ge);break;case"h":kc()}}return this},u.__private__.rect=u.rect=function(g,O,ne,ge,ke){if(isNaN(g)||isNaN(O)||isNaN(ne)||isNaN(ge)||!Da(ke))throw new Error("Invalid arguments passed to jsPDF.rect");return D===P.COMPAT&&(ge=-ge),H([z(S(g)),z(M(O)),z(S(ne)),z(S(ge)),"re"].join(" ")),il(ke),this},u.__private__.triangle=u.triangle=function(g,O,ne,ge,ke,Re,Ve){if(isNaN(g)||isNaN(O)||isNaN(ne)||isNaN(ge)||isNaN(ke)||isNaN(Re)||!Da(Ve))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ne-g,ge-O],[ke-ne,Re-ge],[g-ke,O-Re]],g,O,[1,1],Ve,!0),this},u.__private__.roundedRect=u.roundedRect=function(g,O,ne,ge,ke,Re,Ve){if(isNaN(g)||isNaN(O)||isNaN(ne)||isNaN(ge)||isNaN(ke)||isNaN(Re)||!Da(Ve))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var lt=4/3*(Math.SQRT2-1);return ke=Math.min(ke,.5*ne),Re=Math.min(Re,.5*ge),this.lines([[ne-2*ke,0],[ke*lt,0,ke,Re-Re*lt,ke,Re],[0,ge-2*Re],[0,Re*lt,-ke*lt,Re,-ke,Re],[2*ke-ne,0],[-ke*lt,0,-ke,-Re*lt,-ke,-Re],[0,2*Re-ge],[0,-Re*lt,ke*lt,-Re,ke,-Re]],g+ke,O,[1,1],Ve,!0),this},u.__private__.ellipse=u.ellipse=function(g,O,ne,ge,ke){if(isNaN(g)||isNaN(O)||isNaN(ne)||isNaN(ge)||!Da(ke))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Re=4/3*(Math.SQRT2-1)*ne,Ve=4/3*(Math.SQRT2-1)*ge;return ol(g+ne,O),gn(g+ne,O-Ve,g+Re,O-ge,g,O-ge),gn(g-Re,O-ge,g-ne,O-Ve,g-ne,O),gn(g-ne,O+Ve,g-Re,O+ge,g,O+ge),gn(g+Re,O+ge,g+ne,O+Ve,g+ne,O),il(ke),this},u.__private__.circle=u.circle=function(g,O,ne,ge){if(isNaN(g)||isNaN(O)||isNaN(ne)||!Da(ge))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(g,O,ne,ne,ge)},u.setFont=function(g,O,ne){return ne&&(O=se(O,ne)),Ct=wc(g,O,{disableWarning:!1}),this};var Iu=u.__private__.getFont=u.getFont=function(){return Qt[wc.apply(u,arguments)]};u.__private__.getFontList=u.getFontList=function(){var g,O,ne={};for(g in Gt)if(Gt.hasOwnProperty(g))for(O in ne[g]=[],Gt[g])Gt[g].hasOwnProperty(O)&&ne[g].push(O);return ne},u.addFont=function(g,O,ne,ge,ke){var Re=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Re.indexOf(arguments[3])!==-1?ke=arguments[3]:arguments[3]&&Re.indexOf(arguments[3])==-1&&(ne=se(ne,ge)),ke=ke||"Identity-H",rl.call(this,g,O,ne,ke)};var oi,ll=s.lineWidth||.200025,Xi=u.__private__.getLineWidth=u.getLineWidth=function(){return ll},Cc=u.__private__.setLineWidth=u.setLineWidth=function(g){return ll=g,H(z(S(g))+" w"),this};u.__private__.setLineDash=kt.API.setLineDash=kt.API.setLineDashPattern=function(g,O){if(g=g||[],O=O||0,isNaN(O)||!Array.isArray(g))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return g=g.map(function(ne){return z(S(ne))}).join(" "),O=z(S(O)),H("["+g+"] "+O+" d"),this};var Ac=u.__private__.getLineHeight=u.getLineHeight=function(){return Ue*oi};u.__private__.getLineHeight=u.getLineHeight=function(){return Ue*oi};var Pc=u.__private__.setLineHeightFactor=u.setLineHeightFactor=function(g){return typeof(g=g||1.15)=="number"&&(oi=g),this},_c=u.__private__.getLineHeightFactor=u.getLineHeightFactor=function(){return oi};Pc(s.lineHeight);var Ta=u.__private__.getHorizontalCoordinate=function(g){return S(g)},Ja=u.__private__.getVerticalCoordinate=function(g){return D===P.ADVANCED?g:wt[U].mediaBox.topRightY-wt[U].mediaBox.bottomLeftY-S(g)},Du=u.__private__.getHorizontalCoordinateString=u.getHorizontalCoordinateString=function(g){return z(Ta(g))},xn=u.__private__.getVerticalCoordinateString=u.getVerticalCoordinateString=function(g){return z(Ja(g))},ma=s.strokeColor||"0 G";u.__private__.getStrokeColor=u.getDrawColor=function(){return Tt(ma)},u.__private__.setStrokeColor=u.setDrawColor=function(g,O,ne,ge){return ma=is({ch1:g,ch2:O,ch3:ne,ch4:ge,pdfColorType:"draw",precision:2}),H(ma),this};var cl=s.fillColor||"0 g";u.__private__.getFillColor=u.getFillColor=function(){return Tt(cl)},u.__private__.setFillColor=u.setFillColor=function(g,O,ne,ge){return cl=is({ch1:g,ch2:O,ch3:ne,ch4:ge,pdfColorType:"fill",precision:2}),H(cl),this};var li=s.textColor||"0 g",Tu=u.__private__.getTextColor=u.getTextColor=function(){return Tt(li)};u.__private__.setTextColor=u.setTextColor=function(g,O,ne,ge){return li=is({ch1:g,ch2:O,ch3:ne,ch4:ge,pdfColorType:"text",precision:3}),this};var Qi=s.charSpace,Mu=u.__private__.getCharSpace=u.getCharSpace=function(){return parseFloat(Qi||0)};u.__private__.setCharSpace=u.setCharSpace=function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Qi=g,this};var dl=0;u.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},u.__private__.setLineCap=u.setLineCap=function(g){var O=u.CapJoinStyles[g];if(O===void 0)throw new Error("Line cap style of '"+g+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return dl=O,H(O+" J"),this};var ul=0;u.__private__.setLineJoin=u.setLineJoin=function(g){var O=u.CapJoinStyles[g];if(O===void 0)throw new Error("Line join style of '"+g+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ul=O,H(O+" j"),this},u.__private__.setLineMiterLimit=u.__private__.setMiterLimit=u.setLineMiterLimit=u.setMiterLimit=function(g){if(g=g||0,isNaN(g))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return H(z(S(g))+" M"),this},u.GState=Bd,u.setGState=function(g){(g=typeof g=="string"?ss[Fs[g]]:Lc(null,g)).equals(Vs)||(H("/"+g.id+" gs"),Vs=g)};var Lc=function(g,O){if(!g||!Fs[g]){var ne=!1;for(var ge in ss)if(ss.hasOwnProperty(ge)&&ss[ge].equals(O)){ne=!0;break}if(ne)O=ss[ge];else{var ke="GS"+(Object.keys(ss).length+1).toString(10);ss[ke]=O,O.id=ke}return g&&(Fs[g]=O.id),Ze.publish("addGState",O),O}};u.addGState=function(g,O){return Lc(g,O),this},u.saveGraphicsState=function(){return H("q"),nr.push({key:Ct,size:Ue,color:li}),this},u.restoreGraphicsState=function(){H("Q");var g=nr.pop();return Ct=g.key,Ue=g.size,li=g.color,Vs=null,this},u.setCurrentTransformationMatrix=function(g){return H(g.toString()+" cm"),this},u.comment=function(g){return H("#"+g),this};var Zi=function(g,O){var ne=g||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ne},set:function(Re){isNaN(Re)||(ne=parseFloat(Re))}});var ge=O||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ge},set:function(Re){isNaN(Re)||(ge=parseFloat(Re))}});var ke="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ke},set:function(Re){ke=Re.toString()}}),this},hl=function(g,O,ne,ge){Zi.call(this,g,O),this.type="rect";var ke=ne||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ke},set:function(Ve){isNaN(Ve)||(ke=parseFloat(Ve))}});var Re=ge||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Re},set:function(Ve){isNaN(Ve)||(Re=parseFloat(Ve))}}),this},ml=function(){this.page=Ut,this.currentPage=U,this.pages=X.slice(0),this.pagesContext=wt.slice(0),this.x=Xt,this.y=Lt,this.matrix=Ps,this.width=ci(U),this.height=vn(U),this.outputDestination=we,this.id="",this.objectNumber=-1};ml.prototype.restore=function(){Ut=this.page,U=this.currentPage,wt=this.pagesContext,X=this.pages,Xt=this.x,Lt=this.y,Ps=this.matrix,fl(U,this.width),pl(U,this.height),we=this.outputDestination};var Ic=function(g,O,ne,ge,ke){Ns.push(new ml),Ut=U=0,X=[],Xt=g,Lt=O,Ps=ke,al([ne,ge])},Eu=function(g){if(js[g])Ns.pop().restore();else{var O=new ml,ne="Xo"+(Object.keys(vt).length+1).toString(10);O.id=ne,js[g]=ne,vt[ne]=O,Ze.publish("addFormObject",O),Ns.pop().restore()}};for(var eo in u.beginFormObject=function(g,O,ne,ge,ke){return Ic(g,O,ne,ge,ke),this},u.endFormObject=function(g){return Eu(g),this},u.doFormObject=function(g,O){var ne=vt[js[g]];return H("q"),H(O.toString()+" cm"),H("/"+ne.id+" Do"),H("Q"),this},u.getFormObject=function(g){var O=vt[js[g]];return{x:O.x,y:O.y,width:O.width,height:O.height,matrix:O.matrix}},u.save=function(g,O){return g=g||"generated.pdf",(O=O||{}).returnPromise=O.returnPromise||!1,O.returnPromise===!1?(xi(Gi(Ga()),g),typeof xi.unload=="function"&&At.setTimeout&&setTimeout(xi.unload,911),this):new Promise(function(ne,ge){try{var ke=xi(Gi(Ga()),g);typeof xi.unload=="function"&&At.setTimeout&&setTimeout(xi.unload,911),ne(ke)}catch(Re){ge(Re.message)}})},kt.API)kt.API.hasOwnProperty(eo)&&(eo==="events"&&kt.API.events.length?function(g,O){var ne,ge,ke;for(ke=O.length-1;ke!==-1;ke--)ne=O[ke][0],ge=O[ke][1],g.subscribe.apply(g,[ne].concat(typeof ge=="function"?[ge]:ge))}(Ze,kt.API.events):u[eo]=kt.API[eo]);var ci=u.getPageWidth=function(g){return(wt[g=g||U].mediaBox.topRightX-wt[g].mediaBox.bottomLeftX)/Je},fl=u.setPageWidth=function(g,O){wt[g].mediaBox.topRightX=O*Je+wt[g].mediaBox.bottomLeftX},vn=u.getPageHeight=function(g){return(wt[g=g||U].mediaBox.topRightY-wt[g].mediaBox.bottomLeftY)/Je},pl=u.setPageHeight=function(g,O){wt[g].mediaBox.topRightY=O*Je+wt[g].mediaBox.bottomLeftY};return u.internal={pdfEscape:Er,getStyle:Sc,getFont:Iu,getFontSize:We,getCharSpace:Mu,getTextColor:Tu,getLineHeight:Ac,getLineHeightFactor:_c,getLineWidth:Xi,write:Ee,getHorizontalCoordinate:Ta,getVerticalCoordinate:Ja,getCoordinateString:Du,getVerticalCoordinateString:xn,collections:{},newObject:Se,newAdditionalObject:gt,newObjectDeferred:Oe,newObjectDeferredBegin:Ge,getFilters:Ss,putStream:or,events:Ze,scaleFactor:Je,pageSize:{getWidth:function(){return ci(U)},setWidth:function(g){fl(U,g)},getHeight:function(){return vn(U)},setHeight:function(g){pl(U,g)}},encryptionOptions:f,encryption:ur,getEncryptor:ku,output:Ji,getNumberOfPages:bu,pages:X,out:H,f2:L,f3:y,getPageInfo:Nc,getPageInfoByObjId:Dt,getCurrentPageInfo:Cu,getPDFVersion:j,Point:Zi,Rectangle:hl,Matrix:ut,hasHotfix:jc},Object.defineProperty(u.internal.pageSize,"width",{get:function(){return ci(U)},set:function(g){fl(U,g)},enumerable:!0,configurable:!0}),Object.defineProperty(u.internal.pageSize,"height",{get:function(){return vn(U)},set:function(g){pl(U,g)},enumerable:!0,configurable:!0}),vu.call(u,Ie),Ct="F1",yc(n,r),Ze.publish("initialized"),u}yo.prototype.lsbFirstWord=function(s){return String.fromCharCode(s>>0&255,s>>8&255,s>>16&255,s>>24&255)},yo.prototype.toHexString=function(s){return s.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},yo.prototype.hexToBytes=function(s){for(var t=[],r=0;r<s.length;r+=2)t.push(String.fromCharCode(parseInt(s.substr(r,2),16)));return t.join("")},yo.prototype.processOwnerPassword=function(s,t){return fm(mm(t).substr(0,5),s)},yo.prototype.encryptor=function(s,t){var r=mm(this.encryptionKey+String.fromCharCode(255&s,s>>8&255,s>>16&255,255&t,t>>8&255)).substr(0,10);return function(a){return fm(r,a)}},Bd.prototype.equals=function(s){var t,r="id,objectNumber,equals";if(!s||hs(s)!==hs(this))return!1;var a=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!s.hasOwnProperty(t)||this[t]!==s[t])return!1;a++}for(t in s)s.hasOwnProperty(t)&&r.indexOf(t)<0&&a--;return a===0},kt.API={events:[]},kt.version="3.0.1";var Os=kt.API,Qm=1,qi=function(s){return s.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},xo=function(s){return s.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Et=function(s){return s.toFixed(2)},Mn=function(s){return s.toFixed(5)};Os.__acroform__={};var Wr=function(s,t){s.prototype=Object.create(t.prototype),s.prototype.constructor=s},_p=function(s){return s*Qm},Ra=function(s){var t=new X1,r=ht.internal.getHeight(s)||0,a=ht.internal.getWidth(s)||0;return t.BBox=[0,0,Number(Et(a)),Number(Et(r))],t},_3=Os.__acroform__.setBit=function(s,t){if(s=s||0,t=t||0,isNaN(s)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return s|=1<<t},L3=Os.__acroform__.clearBit=function(s,t){if(s=s||0,t=t||0,isNaN(s)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return s&=~(1<<t)},I3=Os.__acroform__.getBit=function(s,t){if(isNaN(s)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return s&1<<t?1:0},zs=Os.__acroform__.getBitForPdf=function(s,t){if(isNaN(s)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return I3(s,t-1)},$s=Os.__acroform__.setBitForPdf=function(s,t){if(isNaN(s)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return _3(s,t-1)},Ws=Os.__acroform__.clearBitForPdf=function(s,t){if(isNaN(s)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return L3(s,t-1)},D3=Os.__acroform__.calculateCoordinates=function(s,t){var r=t.internal.getHorizontalCoordinate,a=t.internal.getVerticalCoordinate,n=s[0],i=s[1],o=s[2],l=s[3],d={};return d.lowerLeft_X=r(n)||0,d.lowerLeft_Y=a(i+l)||0,d.upperRight_X=r(n+o)||0,d.upperRight_Y=a(i)||0,[Number(Et(d.lowerLeft_X)),Number(Et(d.lowerLeft_Y)),Number(Et(d.upperRight_X)),Number(Et(d.upperRight_Y))]},T3=function(s){if(s.appearanceStreamContent)return s.appearanceStreamContent;if(s.V||s.DV){var t=[],r=s._V||s.DV,a=pm(s,r),n=s.scope.internal.getFont(s.fontName,s.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(s.scope.__private__.encodeColorString(s.color)),t.push("/"+n+" "+Et(a.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(a.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=Ra(s);return i.scope=s.scope,i.stream=t.join(`
`),i}},pm=function(s,t){var r=s.fontSize===0?s.maxFontSize:s.fontSize,a={text:"",fontSize:""},n=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");n=s.multiline?n.map(function(y){return y.split(`
`)}):n.map(function(y){return[y]});var i=r,o=ht.internal.getHeight(s)||0;o=o<0?-o:o;var l=ht.internal.getWidth(s)||0;l=l<0?-l:l;var d=function(y,S,I){if(y+1<n.length){var M=S+" "+n[y+1][0];return hd(M,s,I).width<=l-4}return!1};i++;e:for(;i>0;){t="",i--;var h,f,p=hd("3",s,i).height,x=s.multiline?o-i:(o-p)/2,u=x+=2,k=0,j=0,v=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+hd(t,s,i=12).width+", FieldWidth:"+l+`
`;break}for(var w="",P=0,D=0;D<n.length;D++)if(n.hasOwnProperty(D)){var B=!1;if(n[D].length!==1&&v!==n[D].length-1){if((p+2)*(P+2)+2>o)continue e;w+=n[D][v],B=!0,j=D,D--}else{w=(w+=n[D][v]+" ").substr(w.length-1)==" "?w.substr(0,w.length-1):w;var F=parseInt(D),se=d(F,w,i),z=D>=n.length-1;if(se&&!z){w+=" ",v=0;continue}if(se||z){if(z)j=F;else if(s.multiline&&(p+2)*(P+2)+2>o)continue e}else{if(!s.multiline||(p+2)*(P+2)+2>o)continue e;j=F}}for(var C="",A=k;A<=j;A++){var L=n[A];if(s.multiline){if(A===j){C+=L[v]+" ",v=(v+1)%L.length;continue}if(A===k){C+=L[L.length-1]+" ";continue}}C+=L[0]+" "}switch(C=C.substr(C.length-1)==" "?C.substr(0,C.length-1):C,f=hd(C,s,i).width,s.textAlign){case"right":h=l-f-2;break;case"center":h=(l-f)/2;break;case"left":default:h=2}t+=Et(h)+" "+Et(u)+` Td
`,t+="("+qi(C)+`) Tj
`,t+=-Et(h)+` 0 Td
`,u=-(i+2),f=0,k=B?j:j+1,P++,w=""}break}return a.text=t,a.fontSize=i,a},hd=function(s,t,r){var a=t.scope.internal.getFont(t.fontName,t.fontStyle),n=t.scope.getStringUnitWidth(s,{font:a,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:a,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:n}},M3={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},E3=function(s,t){var r={type:"reference",object:s};t.internal.getPageInfo(s.page).pageContext.annotations.find(function(a){return a.type===r.type&&a.object===r.object})===void 0&&t.internal.getPageInfo(s.page).pageContext.annotations.push(r)},R3=function(s,t){for(var r in s)if(s.hasOwnProperty(r)){var a=r,n=s[r];t.internal.newObjectDeferredBegin(n.objId,!0),hs(n)==="object"&&typeof n.putStream=="function"&&n.putStream(),delete s[a]}},O3=function(s,t){if(t.scope=s,s.internal!==void 0&&(s.internal.acroformPlugin===void 0||s.internal.acroformPlugin.isInitialized===!1)){if(_a.FieldNum=0,s.internal.acroformPlugin=JSON.parse(JSON.stringify(M3)),s.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Qm=s.internal.scaleFactor,s.internal.acroformPlugin.acroFormDictionaryRoot=new Q1,s.internal.acroformPlugin.acroFormDictionaryRoot.scope=s,s.internal.acroformPlugin.acroFormDictionaryRoot._eventID=s.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(s)}),s.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var a=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var n in a)if(a.hasOwnProperty(n)){var i=a[n];i.objId=void 0,i.hasAnnotation&&E3(i,r)}})(s)}),s.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(s)}),s.internal.events.subscribe("postPutPages",function(r){(function(a,n){var i=!a;for(var o in a||(n.internal.newObjectDeferredBegin(n.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),n.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),a=a||n.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(a.hasOwnProperty(o)){var l=a[o],d=[],h=l.Rect;if(l.Rect&&(l.Rect=D3(l.Rect,n)),n.internal.newObjectDeferredBegin(l.objId,!0),l.DA=ht.createDefaultAppearanceStream(l),hs(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(d=l.getKeyValueListForStream()),l.Rect=h,l.hasAppearanceStream&&!l.appearanceStreamContent){var f=T3(l);d.push({key:"AP",value:"<</N "+f+">>"}),n.internal.acroformPlugin.xForms.push(f)}if(l.appearanceStreamContent){var p="";for(var x in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(x)){var u=l.appearanceStreamContent[x];if(p+="/"+x+" ",p+="<<",Object.keys(u).length>=1||Array.isArray(u)){for(var o in u)if(u.hasOwnProperty(o)){var k=u[o];typeof k=="function"&&(k=k.call(n,l)),p+="/"+o+" "+k+" ",n.internal.acroformPlugin.xForms.indexOf(k)>=0||n.internal.acroformPlugin.xForms.push(k)}}else typeof(k=u)=="function"&&(k=k.call(n,l)),p+="/"+o+" "+k,n.internal.acroformPlugin.xForms.indexOf(k)>=0||n.internal.acroformPlugin.xForms.push(k);p+=">>"}d.push({key:"AP",value:`<<
`+p+">>"})}n.internal.putStream({additionalKeyValues:d,objectId:l.objId}),n.internal.out("endobj")}i&&R3(n.internal.acroformPlugin.xForms,n)})(r,s)}),s.internal.acroformPlugin.isInitialized=!0}},K1=Os.__acroform__.arrayToPdfArray=function(s,t,r){var a=function(o){return o};if(Array.isArray(s)){for(var n="[",i=0;i<s.length;i++)switch(i!==0&&(n+=" "),hs(s[i])){case"boolean":case"number":case"object":n+=s[i].toString();break;case"string":s[i].substr(0,1)!=="/"?(t!==void 0&&r&&(a=r.internal.getEncryptor(t)),n+="("+qi(a(s[i].toString()))+")"):n+=s[i].toString()}return n+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},vh=function(s,t,r){var a=function(n){return n};return t!==void 0&&r&&(a=r.internal.getEncryptor(t)),(s=s||"").toString(),s="("+qi(a(s))+")"},za=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(s){this._objId=s}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};za.prototype.toString=function(){return this.objId+" 0 R"},za.prototype.putStream=function(){var s=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:s,objectId:this.objId}),this.scope.internal.out("endobj")},za.prototype.getKeyValueListForStream=function(){var s=[],t=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var a=t[r],n=this[a];n&&(Array.isArray(n)?s.push({key:a,value:K1(n,this.objId,this.scope)}):n instanceof za?(n.scope=this.scope,s.push({key:a,value:n.objId+" 0 R"})):typeof n!="function"&&s.push({key:a,value:n}))}return s};var X1=function(){za.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var s,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){s=r.trim()},get:function(){return s||null}})};Wr(X1,za);var Q1=function(){za.call(this);var s,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(s){var r=function(a){return a};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+qi(r(s))+")"}},set:function(r){s=r}})};Wr(Q1,za);var _a=function s(){za.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute F supplied.');t=w}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!zs(t,3)},set:function(w){w?this.F=$s(t,3):this.F=Ws(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute Ff supplied.');r=w}});var a=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(a.length!==0)return a},set:function(w){a=w!==void 0?w:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[0])?0:a[0]},set:function(w){a[0]=w}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[1])?0:a[1]},set:function(w){a[1]=w}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[2])?0:a[2]},set:function(w){a[2]=w}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[3])?0:a[3]},set:function(w){a[3]=w}});var n="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return n},set:function(w){switch(w){case"/Btn":case"/Tx":case"/Ch":case"/Sig":n=w;break;default:throw new Error('Invalid value "'+w+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof Ud)return;i="FieldObject"+s.FieldNum++}var w=function(P){return P};return this.scope&&(w=this.scope.internal.getEncryptor(this.objId)),"("+qi(w(i))+")"},set:function(w){i=w.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(w){i=w}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(w){o=w}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(w){l=w}});var d=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return d},set:function(w){d=w}});var h=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return h===void 0?50/Qm:h},set:function(w){h=w}});var f="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return f},set:function(w){f=w}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof Ud||this instanceof Li))return vh(p,this.objId,this.scope)},set:function(w){w=w.toString(),p=w}});var x=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(x)return this instanceof rr?x:vh(x,this.objId,this.scope)},set:function(w){w=w.toString(),x=this instanceof rr?w:w.substr(0,1)==="("?xo(w.substr(1,w.length-2)):xo(w)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof rr?xo(x.substr(1,x.length-1)):x},set:function(w){w=w.toString(),x=this instanceof rr?"/"+w:w}});var u=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(u)return u},set:function(w){this.V=w}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(u)return this instanceof rr?u:vh(u,this.objId,this.scope)},set:function(w){w=w.toString(),u=this instanceof rr?w:w.substr(0,1)==="("?xo(w.substr(1,w.length-2)):xo(w)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof rr?xo(u.substr(1,u.length-1)):u},set:function(w){w=w.toString(),u=this instanceof rr?"/"+w:w}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var k,j=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return j},set:function(w){w=!!w,j=w}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(k)return k},set:function(w){k=w}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,1)},set:function(w){w?this.Ff=$s(this.Ff,1):this.Ff=Ws(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,2)},set:function(w){w?this.Ff=$s(this.Ff,2):this.Ff=Ws(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,3)},set:function(w){w?this.Ff=$s(this.Ff,3):this.Ff=Ws(this.Ff,3)}});var v=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(v!==null)return v},set:function(w){if([0,1,2].indexOf(w)===-1)throw new Error('Invalid value "'+w+'" for attribute Q supplied.');v=w}}),Object.defineProperty(this,"textAlign",{get:function(){var w;switch(v){case 0:default:w="left";break;case 1:w="center";break;case 2:w="right"}return w},configurable:!0,enumerable:!0,set:function(w){switch(w){case"right":case 2:v=2;break;case"center":case 1:v=1;break;case"left":case 0:default:v=0}}})};Wr(_a,za);var Co=function(){_a.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var s=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return s},set:function(r){s=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return s},set:function(r){s=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return K1(t,this.objId,this.scope)},set:function(r){var a,n;n=[],typeof(a=r)=="string"&&(n=function(i,o,l){l||(l=1);for(var d,h=[];d=o.exec(i);)h.push(d[l]);return h}(a,/\((.*?)\)/g)),t=n}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,a){for(a=a||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),a!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,18)},set:function(r){r?this.Ff=$s(this.Ff,18):this.Ff=Ws(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=$s(this.Ff,19):this.Ff=Ws(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,20)},set:function(r){r?(this.Ff=$s(this.Ff,20),t.sort()):this.Ff=Ws(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,22)},set:function(r){r?this.Ff=$s(this.Ff,22):this.Ff=Ws(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,23)},set:function(r){r?this.Ff=$s(this.Ff,23):this.Ff=Ws(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,27)},set:function(r){r?this.Ff=$s(this.Ff,27):this.Ff=Ws(this.Ff,27)}}),this.hasAppearanceStream=!1};Wr(Co,_a);var Ao=function(){Co.call(this),this.fontName="helvetica",this.combo=!1};Wr(Ao,Co);var Po=function(){Ao.call(this),this.combo=!0};Wr(Po,Ao);var jd=function(){Po.call(this),this.edit=!0};Wr(jd,Po);var rr=function(){_a.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,15)},set:function(r){r?this.Ff=$s(this.Ff,15):this.Ff=Ws(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,16)},set:function(r){r?this.Ff=$s(this.Ff,16):this.Ff=Ws(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,17)},set:function(r){r?this.Ff=$s(this.Ff,17):this.Ff=Ws(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,26)},set:function(r){r?this.Ff=$s(this.Ff,26):this.Ff=Ws(this.Ff,26)}});var s,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var a,n=[];for(a in n.push("<<"),t)n.push("/"+a+" ("+qi(r(t[a]))+")");return n.push(">>"),n.join(`
`)}},set:function(r){hs(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return s},set:function(r){s=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return s.substr(1,s.length-1)},set:function(r){s="/"+r}})};Wr(rr,_a);var Nd=function(){rr.call(this),this.pushButton=!0};Wr(Nd,rr);var _o=function(){rr.call(this),this.radio=!0,this.pushButton=!1;var s=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return s},set:function(t){s=t!==void 0?t:[]}})};Wr(_o,rr);var Ud=function(){var s,t;_a.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return s},set:function(n){s=n}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(n){t=n}});var r,a={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(l){return l};this.scope&&(n=this.scope.internal.getEncryptor(this.objId));var i,o=[];for(i in o.push("<<"),a)o.push("/"+i+" ("+qi(n(a[i]))+")");return o.push(">>"),o.join(`
`)},set:function(n){hs(n)==="object"&&(a=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return a.CA||""},set:function(n){typeof n=="string"&&(a.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(n){r=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(n){r="/"+n}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=ht.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Wr(Ud,_a),_o.prototype.setAppearance=function(s){if(!("createAppearanceStream"in s)||!("getCA"in s))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=s.createAppearanceStream(r.optionName),r.caption=s.getCA()}},_o.prototype.createOption=function(s){var t=new Ud;return t.Parent=this,t.optionName=s,this.Kids.push(t),F3.call(this.scope,t),t};var Sd=function(){rr.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=ht.CheckBox.createAppearanceStream()};Wr(Sd,rr);var Li=function(){_a.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,13)},set:function(t){t?this.Ff=$s(this.Ff,13):this.Ff=Ws(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,21)},set:function(t){t?this.Ff=$s(this.Ff,21):this.Ff=Ws(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,23)},set:function(t){t?this.Ff=$s(this.Ff,23):this.Ff=Ws(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,24)},set:function(t){t?this.Ff=$s(this.Ff,24):this.Ff=Ws(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,25)},set:function(t){t?this.Ff=$s(this.Ff,25):this.Ff=Ws(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,26)},set:function(t){t?this.Ff=$s(this.Ff,26):this.Ff=Ws(this.Ff,26)}});var s=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return s},set:function(t){s=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return s},set:function(t){Number.isInteger(t)&&(s=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Wr(Li,_a);var kd=function(){Li.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,14)},set:function(s){s?this.Ff=$s(this.Ff,14):this.Ff=Ws(this.Ff,14)}}),this.password=!0};Wr(kd,Li);var ht={CheckBox:{createAppearanceStream:function(){return{N:{On:ht.CheckBox.YesNormal},D:{On:ht.CheckBox.YesPushDown,Off:ht.CheckBox.OffPushDown}}},YesPushDown:function(s){var t=Ra(s);t.scope=s.scope;var r=[],a=s.scope.internal.getFont(s.fontName,s.fontStyle).id,n=s.scope.__private__.encodeColorString(s.color),i=pm(s,s.caption);return r.push("0.749023 g"),r.push("0 0 "+Et(ht.internal.getWidth(s))+" "+Et(ht.internal.getHeight(s))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+a+" "+Et(i.fontSize)+" Tf "+n),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(s){var t=Ra(s);t.scope=s.scope;var r=s.scope.internal.getFont(s.fontName,s.fontStyle).id,a=s.scope.__private__.encodeColorString(s.color),n=[],i=ht.internal.getHeight(s),o=ht.internal.getWidth(s),l=pm(s,s.caption);return n.push("1 g"),n.push("0 0 "+Et(o)+" "+Et(i)+" re"),n.push("f"),n.push("q"),n.push("0 0 1 rg"),n.push("0 0 "+Et(o-1)+" "+Et(i-1)+" re"),n.push("W"),n.push("n"),n.push("0 g"),n.push("BT"),n.push("/"+r+" "+Et(l.fontSize)+" Tf "+a),n.push(l.text),n.push("ET"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(s){var t=Ra(s);t.scope=s.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Et(ht.internal.getWidth(s))+" "+Et(ht.internal.getHeight(s))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(s){var t={D:{Off:ht.RadioButton.Circle.OffPushDown},N:{}};return t.N[s]=ht.RadioButton.Circle.YesNormal,t.D[s]=ht.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(s){var t=Ra(s);t.scope=s.scope;var r=[],a=ht.internal.getWidth(s)<=ht.internal.getHeight(s)?ht.internal.getWidth(s)/4:ht.internal.getHeight(s)/4;a=Number((.9*a).toFixed(5));var n=ht.internal.Bezier_C,i=Number((a*n).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Mn(ht.internal.getWidth(s)/2)+" "+Mn(ht.internal.getHeight(s)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(s){var t=Ra(s);t.scope=s.scope;var r=[],a=ht.internal.getWidth(s)<=ht.internal.getHeight(s)?ht.internal.getWidth(s)/4:ht.internal.getHeight(s)/4;a=Number((.9*a).toFixed(5));var n=Number((2*a).toFixed(5)),i=Number((n*ht.internal.Bezier_C).toFixed(5)),o=Number((a*ht.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Mn(ht.internal.getWidth(s)/2)+" "+Mn(ht.internal.getHeight(s)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Mn(ht.internal.getWidth(s)/2)+" "+Mn(ht.internal.getHeight(s)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),r.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),r.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),r.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(s){var t=Ra(s);t.scope=s.scope;var r=[],a=ht.internal.getWidth(s)<=ht.internal.getHeight(s)?ht.internal.getWidth(s)/4:ht.internal.getHeight(s)/4;a=Number((.9*a).toFixed(5));var n=Number((2*a).toFixed(5)),i=Number((n*ht.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Mn(ht.internal.getWidth(s)/2)+" "+Mn(ht.internal.getHeight(s)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(s){var t={D:{Off:ht.RadioButton.Cross.OffPushDown},N:{}};return t.N[s]=ht.RadioButton.Cross.YesNormal,t.D[s]=ht.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(s){var t=Ra(s);t.scope=s.scope;var r=[],a=ht.internal.calculateCross(s);return r.push("q"),r.push("1 1 "+Et(ht.internal.getWidth(s)-2)+" "+Et(ht.internal.getHeight(s)-2)+" re"),r.push("W"),r.push("n"),r.push(Et(a.x1.x)+" "+Et(a.x1.y)+" m"),r.push(Et(a.x2.x)+" "+Et(a.x2.y)+" l"),r.push(Et(a.x4.x)+" "+Et(a.x4.y)+" m"),r.push(Et(a.x3.x)+" "+Et(a.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(s){var t=Ra(s);t.scope=s.scope;var r=ht.internal.calculateCross(s),a=[];return a.push("0.749023 g"),a.push("0 0 "+Et(ht.internal.getWidth(s))+" "+Et(ht.internal.getHeight(s))+" re"),a.push("f"),a.push("q"),a.push("1 1 "+Et(ht.internal.getWidth(s)-2)+" "+Et(ht.internal.getHeight(s)-2)+" re"),a.push("W"),a.push("n"),a.push(Et(r.x1.x)+" "+Et(r.x1.y)+" m"),a.push(Et(r.x2.x)+" "+Et(r.x2.y)+" l"),a.push(Et(r.x4.x)+" "+Et(r.x4.y)+" m"),a.push(Et(r.x3.x)+" "+Et(r.x3.y)+" l"),a.push("s"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(s){var t=Ra(s);t.scope=s.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Et(ht.internal.getWidth(s))+" "+Et(ht.internal.getHeight(s))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(s){var t=s.scope.internal.getFont(s.fontName,s.fontStyle).id,r=s.scope.__private__.encodeColorString(s.color);return"/"+t+" "+s.fontSize+" Tf "+r}};ht.internal={Bezier_C:.551915024494,calculateCross:function(s){var t=ht.internal.getWidth(s),r=ht.internal.getHeight(s),a=Math.min(t,r);return{x1:{x:(t-a)/2,y:(r-a)/2+a},x2:{x:(t-a)/2+a,y:(r-a)/2},x3:{x:(t-a)/2,y:(r-a)/2},x4:{x:(t-a)/2+a,y:(r-a)/2+a}}}},ht.internal.getWidth=function(s){var t=0;return hs(s)==="object"&&(t=_p(s.Rect[2])),t},ht.internal.getHeight=function(s){var t=0;return hs(s)==="object"&&(t=_p(s.Rect[3])),t};var F3=Os.addField=function(s){if(O3(this,s),!(s instanceof _a))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=s).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),s.page=s.scope.internal.getCurrentPageInfo().pageNumber,this};Os.AcroFormChoiceField=Co,Os.AcroFormListBox=Ao,Os.AcroFormComboBox=Po,Os.AcroFormEditBox=jd,Os.AcroFormButton=rr,Os.AcroFormPushButton=Nd,Os.AcroFormRadioButton=_o,Os.AcroFormCheckBox=Sd,Os.AcroFormTextField=Li,Os.AcroFormPasswordField=kd,Os.AcroFormAppearance=ht,Os.AcroForm={ChoiceField:Co,ListBox:Ao,ComboBox:Po,EditBox:jd,Button:rr,PushButton:Nd,RadioButton:_o,CheckBox:Sd,TextField:Li,PasswordField:kd,Appearance:ht},kt.AcroForm={ChoiceField:Co,ListBox:Ao,ComboBox:Po,EditBox:jd,Button:rr,PushButton:Nd,RadioButton:_o,CheckBox:Sd,TextField:Li,PasswordField:kd,Appearance:ht};kt.AcroForm;function Z1(s){return s.reduce(function(t,r,a){return t[r]=a,t},{})}(function(s){s.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=s.__addimage__.getImageFileTypeByImageData=function(y,S){var I,M,J,ae,he,ce=t;if((S=S||t)==="RGBA"||y.data!==void 0&&y.data instanceof Uint8ClampedArray&&"height"in y&&"width"in y)return"RGBA";if(se(y))for(he in r)for(J=r[he],I=0;I<J.length;I+=1){for(ae=!0,M=0;M<J[I].length;M+=1)if(J[I][M]!==void 0&&J[I][M]!==y[M]){ae=!1;break}if(ae===!0){ce=he;break}}else for(he in r)for(J=r[he],I=0;I<J.length;I+=1){for(ae=!0,M=0;M<J[I].length;M+=1)if(J[I][M]!==void 0&&J[I][M]!==y.charCodeAt(M)){ae=!1;break}if(ae===!0){ce=he;break}}return ce===t&&S!==t&&(ce=S),ce},n=function y(S){for(var I=this.internal.write,M=this.internal.putStream,J=(0,this.internal.getFilters)();J.indexOf("FlateEncode")!==-1;)J.splice(J.indexOf("FlateEncode"),1);S.objectId=this.internal.newObject();var ae=[];if(ae.push({key:"Type",value:"/XObject"}),ae.push({key:"Subtype",value:"/Image"}),ae.push({key:"Width",value:S.width}),ae.push({key:"Height",value:S.height}),S.colorSpace===v.INDEXED?ae.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(S.palette.length/3-1)+" "+("sMask"in S&&S.sMask!==void 0?S.objectId+2:S.objectId+1)+" 0 R]"}):(ae.push({key:"ColorSpace",value:"/"+S.colorSpace}),S.colorSpace===v.DEVICE_CMYK&&ae.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ae.push({key:"BitsPerComponent",value:S.bitsPerComponent}),"decodeParameters"in S&&S.decodeParameters!==void 0&&ae.push({key:"DecodeParms",value:"<<"+S.decodeParameters+">>"}),"transparency"in S&&Array.isArray(S.transparency)){for(var he="",ce=0,ie=S.transparency.length;ce<ie;ce++)he+=S.transparency[ce]+" "+S.transparency[ce]+" ";ae.push({key:"Mask",value:"["+he+"]"})}S.sMask!==void 0&&ae.push({key:"SMask",value:S.objectId+1+" 0 R"});var ve=S.filter!==void 0?["/"+S.filter]:void 0;if(M({data:S.data,additionalKeyValues:ae,alreadyAppliedFilters:ve,objectId:S.objectId}),I("endobj"),"sMask"in S&&S.sMask!==void 0){var Ae="/Predictor "+S.predictor+" /Colors 1 /BitsPerComponent "+S.bitsPerComponent+" /Columns "+S.width,T={width:S.width,height:S.height,colorSpace:"DeviceGray",bitsPerComponent:S.bitsPerComponent,decodeParameters:Ae,data:S.sMask};"filter"in S&&(T.filter=S.filter),y.call(this,T)}if(S.colorSpace===v.INDEXED){var U=this.internal.newObject();M({data:C(new Uint8Array(S.palette)),objectId:U}),I("endobj")}},i=function(){var y=this.internal.collections.addImage_images;for(var S in y)n.call(this,y[S])},o=function(){var y,S=this.internal.collections.addImage_images,I=this.internal.write;for(var M in S)I("/I"+(y=S[M]).index,y.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",o))},d=function(){var y=this.internal.collections.addImage_images;return l.call(this),y},h=function(){return Object.keys(this.internal.collections.addImage_images).length},f=function(y){return typeof s["process"+y.toUpperCase()]=="function"},p=function(y){return hs(y)==="object"&&y.nodeType===1},x=function(y,S){if(y.nodeName==="IMG"&&y.hasAttribute("src")){var I=""+y.getAttribute("src");if(I.indexOf("data:image/")===0)return Yl(unescape(I).split("base64,").pop());var M=s.loadFile(I,!0);if(M!==void 0)return M}if(y.nodeName==="CANVAS"){if(y.width===0||y.height===0)throw new Error("Given canvas must have data. Canvas width: "+y.width+", height: "+y.height);var J;switch(S){case"PNG":J="image/png";break;case"WEBP":J="image/webp";break;case"JPEG":case"JPG":default:J="image/jpeg"}return Yl(y.toDataURL(J,1).split("base64,").pop())}},u=function(y){var S=this.internal.collections.addImage_images;if(S){for(var I in S)if(y===S[I].alias)return S[I]}},k=function(y,S,I){return y||S||(y=-96,S=-96),y<0&&(y=-1*I.width*72/y/this.internal.scaleFactor),S<0&&(S=-1*I.height*72/S/this.internal.scaleFactor),y===0&&(y=S*I.width/I.height),S===0&&(S=y*I.height/I.width),[y,S]},j=function(y,S,I,M,J,ae){var he=k.call(this,I,M,J),ce=this.internal.getCoordinateString,ie=this.internal.getVerticalCoordinateString,ve=d.call(this);if(I=he[0],M=he[1],ve[J.index]=J,ae){ae*=Math.PI/180;var Ae=Math.cos(ae),T=Math.sin(ae),U=function(re){return re.toFixed(4)},V=[U(Ae),U(T),U(-1*T),U(Ae),0,0,"cm"]}this.internal.write("q"),ae?(this.internal.write([1,"0","0",1,ce(y),ie(S+M),"cm"].join(" ")),this.internal.write(V.join(" ")),this.internal.write([ce(I),"0","0",ce(M),"0","0","cm"].join(" "))):this.internal.write([ce(I),"0","0",ce(M),ce(y),ie(S+M),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+J.index+" Do"),this.internal.write("Q")},v=s.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};s.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var w=s.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},P=s.__addimage__.sHashCode=function(y){var S,I,M=0;if(typeof y=="string")for(I=y.length,S=0;S<I;S++)M=(M<<5)-M+y.charCodeAt(S),M|=0;else if(se(y))for(I=y.byteLength/2,S=0;S<I;S++)M=(M<<5)-M+y[S],M|=0;return M},D=s.__addimage__.validateStringAsBase64=function(y){(y=y||"").toString().trim();var S=!0;return y.length===0&&(S=!1),y.length%4!=0&&(S=!1),/^[A-Za-z0-9+/]+$/.test(y.substr(0,y.length-2))===!1&&(S=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(y.substr(-2))===!1&&(S=!1),S},B=s.__addimage__.extractImageFromDataUrl=function(y){if(y==null||!(y=y.trim()).startsWith("data:"))return null;var S=y.indexOf(",");return S<0?null:y.substring(0,S).trim().endsWith("base64")?y.substring(S+1):null},F=s.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer!="undefined"&&typeof Uint8Array!="undefined"};s.__addimage__.isArrayBuffer=function(y){return F()&&y instanceof ArrayBuffer};var se=s.__addimage__.isArrayBufferView=function(y){return F()&&typeof Uint32Array!="undefined"&&(y instanceof Int8Array||y instanceof Uint8Array||typeof Uint8ClampedArray!="undefined"&&y instanceof Uint8ClampedArray||y instanceof Int16Array||y instanceof Uint16Array||y instanceof Int32Array||y instanceof Uint32Array||y instanceof Float32Array||y instanceof Float64Array)},z=s.__addimage__.binaryStringToUint8Array=function(y){for(var S=y.length,I=new Uint8Array(S),M=0;M<S;M++)I[M]=y.charCodeAt(M);return I},C=s.__addimage__.arrayBufferToBinaryString=function(y){for(var S="",I=se(y)?y:new Uint8Array(y),M=0;M<I.length;M+=8192)S+=String.fromCharCode.apply(null,I.subarray(M,M+8192));return S};s.addImage=function(){var y,S,I,M,J,ae,he,ce,ie;if(typeof arguments[1]=="number"?(S=t,I=arguments[1],M=arguments[2],J=arguments[3],ae=arguments[4],he=arguments[5],ce=arguments[6],ie=arguments[7]):(S=arguments[1],I=arguments[2],M=arguments[3],J=arguments[4],ae=arguments[5],he=arguments[6],ce=arguments[7],ie=arguments[8]),hs(y=arguments[0])==="object"&&!p(y)&&"imageData"in y){var ve=y;y=ve.imageData,S=ve.format||S||t,I=ve.x||I||0,M=ve.y||M||0,J=ve.w||ve.width||J,ae=ve.h||ve.height||ae,he=ve.alias||he,ce=ve.compression||ce,ie=ve.rotation||ve.angle||ie}var Ae=this.internal.getFilters();if(ce===void 0&&Ae.indexOf("FlateEncode")!==-1&&(ce="SLOW"),isNaN(I)||isNaN(M))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var T=A.call(this,y,S,he,ce);return j.call(this,I,M,J,ae,T,ie),this};var A=function(y,S,I,M){var J,ae,he;if(typeof y=="string"&&a(y)===t){y=unescape(y);var ce=L(y,!1);(ce!==""||(ce=s.loadFile(y,!0))!==void 0)&&(y=ce)}if(p(y)&&(y=x(y,S)),S=a(y,S),!f(S))throw new Error("addImage does not support files of type '"+S+"', please ensure that a plugin for '"+S+"' support is added.");if(((he=I)==null||he.length===0)&&(I=function(ie){return typeof ie=="string"||se(ie)?P(ie):se(ie.data)?P(ie.data):null}(y)),(J=u.call(this,I))||(F()&&(y instanceof Uint8Array||S==="RGBA"||(ae=y,y=z(y))),J=this["process"+S.toUpperCase()](y,h.call(this),I,function(ie){return ie&&typeof ie=="string"&&(ie=ie.toUpperCase()),ie in s.image_compression?ie:w.NONE}(M),ae)),!J)throw new Error("An unknown error occurred whilst processing the image.");return J},L=s.__addimage__.convertBase64ToBinaryString=function(y,S){S=typeof S!="boolean"||S;var I,M="";if(typeof y=="string"){var J;I=(J=B(y))!==null&&J!==void 0?J:y;try{M=Yl(I)}catch(ae){if(S)throw D(I)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ae.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return M};s.getImageProperties=function(y){var S,I,M="";if(p(y)&&(y=x(y)),typeof y=="string"&&a(y)===t&&((M=L(y,!1))===""&&(M=s.loadFile(y)||""),y=M),I=a(y),!f(I))throw new Error("addImage does not support files of type '"+I+"', please ensure that a plugin for '"+I+"' support is added.");if(!F()||y instanceof Uint8Array||(y=z(y)),!(S=this["process"+I.toUpperCase()](y)))throw new Error("An unknown error occurred whilst processing the image");return S.fileType=I,S}})(kt.API),function(s){var t=function(r){if(r!==void 0&&r!="")return!0};kt.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),s.events.push(["putPage",function(r){for(var a,n,i,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,d=this.internal.getPageInfoByObjId(r.objId),h=r.pageContext.annotations,f=!1,p=0;p<h.length&&!f;p++)switch((a=h[p]).type){case"link":(t(a.options.url)||t(a.options.pageNumber))&&(f=!0);break;case"reference":case"text":case"freetext":f=!0}if(f!=0){this.internal.write("/Annots [");for(var x=0;x<h.length;x++){a=h[x];var u=this.internal.pdfEscape,k=this.internal.getEncryptor(r.objId);switch(a.type){case"reference":this.internal.write(" "+a.object.objId+" 0 R ");break;case"text":var j=this.internal.newAdditionalObject(),v=this.internal.newAdditionalObject(),w=this.internal.getEncryptor(j.objId),P=a.title||"Note";i="<</Type /Annot /Subtype /Text "+(n="/Rect ["+o(a.bounds.x)+" "+l(a.bounds.y+a.bounds.h)+" "+o(a.bounds.x+a.bounds.w)+" "+l(a.bounds.y)+"] ")+"/Contents ("+u(w(a.contents))+")",i+=" /Popup "+v.objId+" 0 R",i+=" /P "+d.objId+" 0 R",i+=" /T ("+u(w(P))+") >>",j.content=i;var D=j.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(n="/Rect ["+o(a.bounds.x+30)+" "+l(a.bounds.y+a.bounds.h)+" "+o(a.bounds.x+a.bounds.w+30)+" "+l(a.bounds.y)+"] ")+" /Parent "+D,a.open&&(i+=" /Open true"),i+=" >>",v.content=i,this.internal.write(j.objId,"0 R",v.objId,"0 R");break;case"freetext":n="/Rect ["+o(a.bounds.x)+" "+l(a.bounds.y)+" "+o(a.bounds.x+a.bounds.w)+" "+l(a.bounds.y+a.bounds.h)+"] ";var B=a.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+n+"/Contents ("+u(k(a.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+B+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(a.options.name){var F=this.annotations._nameMap[a.options.name];a.options.pageNumber=F.page,a.options.top=F.y}else a.options.top||(a.options.top=0);if(n="/Rect ["+a.finalBounds.x+" "+a.finalBounds.y+" "+a.finalBounds.w+" "+a.finalBounds.h+"] ",i="",a.options.url)i="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /A <</S /URI /URI ("+u(k(a.options.url))+") >>";else if(a.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(a.options.pageNumber).objId+" 0 R",a.options.magFactor=a.options.magFactor||"XYZ",a.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+a.options.top+"]";break;case"FitV":a.options.left=a.options.left||0,i+=" /FitV "+a.options.left+"]";break;case"XYZ":default:var se=l(a.options.top);a.options.left=a.options.left||0,a.options.zoom===void 0&&(a.options.zoom=0),i+=" /XYZ "+a.options.left+" "+se+" "+a.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),s.createAnnotation=function(r){var a=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":a.pageContext.annotations.push(r)}},s.link=function(r,a,n,i,o){var l=this.internal.getCurrentPageInfo(),d=this.internal.getCoordinateString,h=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:d(r),y:h(a),w:d(r+n),h:h(a+i)},options:o,type:"link"})},s.textWithLink=function(r,a,n,i){var o,l,d=this.getTextWidth(r),h=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){l=i.maxWidth;var f=this.splitTextToSize(r,l).length;o=Math.ceil(h*f)}else l=d,o=h;return this.text(r,a,n,i),n+=.2*h,i.align==="center"&&(a-=d/2),i.align==="right"&&(a-=d),this.link(a,n-h,l,o,i),d},s.getTextWidth=function(r){var a=this.internal.getFontSize();return this.getStringUnitWidth(r)*a/this.internal.scaleFactor}}(kt.API),function(s){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},a={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},n=[1570,1571,1573,1575];s.__arabicParser__={};var i=s.__arabicParser__.isInArabicSubstitutionA=function(j){return t[j.charCodeAt(0)]!==void 0},o=s.__arabicParser__.isArabicLetter=function(j){return typeof j=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(j)},l=s.__arabicParser__.isArabicEndLetter=function(j){return o(j)&&i(j)&&t[j.charCodeAt(0)].length<=2},d=s.__arabicParser__.isArabicAlfLetter=function(j){return o(j)&&n.indexOf(j.charCodeAt(0))>=0};s.__arabicParser__.arabicLetterHasIsolatedForm=function(j){return o(j)&&i(j)&&t[j.charCodeAt(0)].length>=1};var h=s.__arabicParser__.arabicLetterHasFinalForm=function(j){return o(j)&&i(j)&&t[j.charCodeAt(0)].length>=2};s.__arabicParser__.arabicLetterHasInitialForm=function(j){return o(j)&&i(j)&&t[j.charCodeAt(0)].length>=3};var f=s.__arabicParser__.arabicLetterHasMedialForm=function(j){return o(j)&&i(j)&&t[j.charCodeAt(0)].length==4},p=s.__arabicParser__.resolveLigatures=function(j){var v=0,w=r,P="",D=0;for(v=0;v<j.length;v+=1)w[j.charCodeAt(v)]!==void 0?(D++,typeof(w=w[j.charCodeAt(v)])=="number"&&(P+=String.fromCharCode(w),w=r,D=0),v===j.length-1&&(w=r,P+=j.charAt(v-(D-1)),v-=D-1,D=0)):(w=r,P+=j.charAt(v-D),v-=D,D=0);return P};s.__arabicParser__.isArabicDiacritic=function(j){return j!==void 0&&a[j.charCodeAt(0)]!==void 0};var x=s.__arabicParser__.getCorrectForm=function(j,v,w){return o(j)?i(j)===!1?-1:!h(j)||!o(v)&&!o(w)||!o(w)&&l(v)||l(j)&&!o(v)||l(j)&&d(v)||l(j)&&l(v)?0:f(j)&&o(v)&&!l(v)&&o(w)&&h(w)?3:l(j)||!o(w)?1:2:-1},u=function(j){var v=0,w=0,P=0,D="",B="",F="",se=(j=j||"").split("\\s+"),z=[];for(v=0;v<se.length;v+=1){for(z.push(""),w=0;w<se[v].length;w+=1)D=se[v][w],B=se[v][w-1],F=se[v][w+1],o(D)?(P=x(D,B,F),z[v]+=P!==-1?String.fromCharCode(t[D.charCodeAt(0)][P]):D):z[v]+=D;z[v]=p(z[v])}return z.join(" ")},k=s.__arabicParser__.processArabic=s.processArabic=function(){var j,v=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,w=[];if(Array.isArray(v)){var P=0;for(w=[],P=0;P<v.length;P+=1)Array.isArray(v[P])?w.push([u(v[P][0]),v[P][1],v[P][2]]):w.push([u(v[P])]);j=w}else j=u(v);return typeof arguments[0]=="string"?j:(arguments[0].text=j,arguments[0])};s.events.push(["preProcessText",k])}(kt.API),kt.API.autoPrint=function(s){var t;switch((s=s||{}).variant=s.variant||"non-conform",s.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(s){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var a=150;Object.defineProperty(this,"width",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=a+1)}});var n=300;Object.defineProperty(this,"height",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=n+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(l){i=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,a){var n;if((r=r||"2d")!=="2d")return null;for(n in a)this.pdf.context2d.hasOwnProperty(n)&&(this.pdf.context2d[n]=a[n]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},s.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(kt.API),function(s){var t={left:0,top:0,bottom:0,right:0},r=!1,a=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),n.call(this))},n=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var d=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return d},set:function(j){d=j}});var h=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return h},set:function(j){h=j}});var f=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return f},set:function(j){f=j}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(j){p=j}});var x=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return x},set:function(j){x=j}});var u=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return u},set:function(j){u=j}});var k=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return k},set:function(j){k=j}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},s.setHeaderFunction=function(d){return a.call(this),this.internal.__cell__.headerFunction=typeof d=="function"?d:void 0,this},s.getTextDimensions=function(d,h){a.call(this);var f=(h=h||{}).fontSize||this.getFontSize(),p=h.font||this.getFont(),x=h.scaleFactor||this.internal.scaleFactor,u=0,k=0,j=0,v=this;if(!Array.isArray(d)&&typeof d!="string"){if(typeof d!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");d=String(d)}var w=h.maxWidth;w>0?typeof d=="string"?d=this.splitTextToSize(d,w):Object.prototype.toString.call(d)==="[object Array]"&&(d=d.reduce(function(D,B){return D.concat(v.splitTextToSize(B,w))},[])):d=Array.isArray(d)?d:[d];for(var P=0;P<d.length;P++)u<(j=this.getStringUnitWidth(d[P],{font:p})*f)&&(u=j);return u!==0&&(k=d.length),{w:u/=x,h:Math.max((k*f*this.getLineHeightFactor()-f*(this.getLineHeightFactor()-1))/x,0)}},s.cellAddPage=function(){a.call(this),this.addPage();var d=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(d.left,d.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=s.cell=function(){var d;d=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),a.call(this);var h=this.internal.__cell__.lastCell,f=this.internal.__cell__.padding,p=this.internal.__cell__.margins||t,x=this.internal.__cell__.tableHeaderRow,u=this.internal.__cell__.printHeaders;return h.lineNumber!==void 0&&(h.lineNumber===d.lineNumber?(d.x=(h.x||0)+(h.width||0),d.y=h.y||0):h.y+h.height+d.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),d.y=p.top,u&&x&&(this.printHeaderRow(d.lineNumber,!0),d.y+=x[0].height)):d.y=h.y+h.height||d.y),d.text[0]!==void 0&&(this.rect(d.x,d.y,d.width,d.height,r===!0?"FD":void 0),d.align==="right"?this.text(d.text,d.x+d.width-f,d.y+f,{align:"right",baseline:"top"}):d.align==="center"?this.text(d.text,d.x+d.width/2,d.y+f,{align:"center",baseline:"top",maxWidth:d.width-f-f}):this.text(d.text,d.x+f,d.y+f,{align:"left",baseline:"top",maxWidth:d.width-f-f})),this.internal.__cell__.lastCell=d,this};s.table=function(d,h,f,p,x){if(a.call(this),!f)throw new Error("No data for PDF table.");var u,k,j,v,w=[],P=[],D=[],B={},F={},se=[],z=[],C=(x=x||{}).autoSize||!1,A=x.printHeaders!==!1,L=x.css&&x.css["font-size"]!==void 0?16*x.css["font-size"]:x.fontSize||12,y=x.margins||Object.assign({width:this.getPageWidth()},t),S=typeof x.padding=="number"?x.padding:3,I=x.headerBackgroundColor||"#c8c8c8",M=x.headerTextColor||"#000";if(n.call(this),this.internal.__cell__.printHeaders=A,this.internal.__cell__.margins=y,this.internal.__cell__.table_font_size=L,this.internal.__cell__.padding=S,this.internal.__cell__.headerBackgroundColor=I,this.internal.__cell__.headerTextColor=M,this.setFontSize(L),p==null)P=w=Object.keys(f[0]),D=w.map(function(){return"left"});else if(Array.isArray(p)&&hs(p[0])==="object")for(w=p.map(function(ve){return ve.name}),P=p.map(function(ve){return ve.prompt||ve.name||""}),D=p.map(function(ve){return ve.align||"left"}),u=0;u<p.length;u+=1)F[p[u].name]=p[u].width*(19.049976/25.4);else Array.isArray(p)&&typeof p[0]=="string"&&(P=w=p,D=w.map(function(){return"left"}));if(C||Array.isArray(p)&&typeof p[0]=="string")for(u=0;u<w.length;u+=1){for(B[v=w[u]]=f.map(function(ve){return ve[v]}),this.setFont(void 0,"bold"),se.push(this.getTextDimensions(P[u],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),k=B[v],this.setFont(void 0,"normal"),j=0;j<k.length;j+=1)se.push(this.getTextDimensions(k[j],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);F[v]=Math.max.apply(null,se)+S+S,se=[]}if(A){var J={};for(u=0;u<w.length;u+=1)J[w[u]]={},J[w[u]].text=P[u],J[w[u]].align=D[u];var ae=l.call(this,J,F);z=w.map(function(ve){return new i(d,h,F[ve],ae,J[ve].text,void 0,J[ve].align)}),this.setTableHeaderRow(z),this.printHeaderRow(1,!1)}var he=p.reduce(function(ve,Ae){return ve[Ae.name]=Ae.align,ve},{});for(u=0;u<f.length;u+=1){"rowStart"in x&&x.rowStart instanceof Function&&x.rowStart({row:u,data:f[u]},this);var ce=l.call(this,f[u],F);for(j=0;j<w.length;j+=1){var ie=f[u][w[j]];"cellStart"in x&&x.cellStart instanceof Function&&x.cellStart({row:u,col:j,data:ie},this),o.call(this,new i(d,h,F[w[j]],ce,ie,u+2,he[w[j]]))}}return this.internal.__cell__.table_x=d,this.internal.__cell__.table_y=h,this};var l=function(d,h){var f=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,x=this.internal.scaleFactor;return Object.keys(d).map(function(u){var k=d[u];return this.splitTextToSize(k.hasOwnProperty("text")?k.text:k,h[u]-f-f)},this).map(function(u){return this.getLineHeightFactor()*u.length*p/x+f+f},this).reduce(function(u,k){return Math.max(u,k)},0)};s.setTableHeaderRow=function(d){a.call(this),this.internal.__cell__.tableHeaderRow=d},s.printHeaderRow=function(d,h){if(a.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var f;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var x=[],u=0;u<this.internal.__cell__.tableHeaderRow.length;u+=1){f=this.internal.__cell__.tableHeaderRow[u].clone(),h&&(f.y=this.internal.__cell__.margins.top||0,x.push(f)),f.lineNumber=d;var k=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,f),this.setTextColor(k)}x.length>0&&this.setTableHeaderRow(x),this.setFont(void 0,"normal"),r=!1}}(kt.API);var e2={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},t2=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],gm=Z1(t2),s2=[100,200,300,400,500,600,700,800,900],B3=Z1(s2);function xm(s){var t=s.family.replace(/"|'/g,"").toLowerCase(),r=function(i){return e2[i=i||"normal"]?i:"normal"}(s.style),a=function(i){if(!i)return 400;if(typeof i=="number")return i>=100&&i<=900&&i%100==0?i:400;if(/^\d00$/.test(i))return parseInt(i);switch(i){case"bold":return 700;case"normal":default:return 400}}(s.weight),n=function(i){return typeof gm[i=i||"normal"]=="number"?i:"normal"}(s.stretch);return{family:t,style:r,weight:a,stretch:n,src:s.src||[],ref:s.ref||{name:t,style:[n,r,a].join(" ")}}}function Lp(s,t,r,a){var n;for(n=r;n>=0&&n<t.length;n+=a)if(s[t[n]])return s[t[n]];for(n=r;n>=0&&n<t.length;n-=a)if(s[t[n]])return s[t[n]]}var U3={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Ip={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Dp(s){return[s.stretch,s.style,s.weight,s.family].join(" ")}function q3(s,t,r){for(var a=(r=r||{}).defaultFontFamily||"times",n=Object.assign({},U3,r.genericFontFamilies||{}),i=null,o=null,l=0;l<t.length;++l)if(n[(i=xm(t[l])).family]&&(i.family=n[i.family]),s.hasOwnProperty(i.family)){o=s[i.family];break}if(!(o=o||s[a]))throw new Error("Could not find a font-family for the rule '"+Dp(i)+"' and default family '"+a+"'.");if(o=function(d,h){if(h[d])return h[d];var f=gm[d],p=f<=gm.normal?-1:1,x=Lp(h,t2,f,p);if(!x)throw new Error("Could not find a matching font-stretch value for "+d);return x}(i.stretch,o),o=function(d,h){if(h[d])return h[d];for(var f=e2[d],p=0;p<f.length;++p)if(h[f[p]])return h[f[p]];throw new Error("Could not find a matching font-style for "+d)}(i.style,o),!(o=function(d,h){if(h[d])return h[d];if(d===400&&h[500])return h[500];if(d===500&&h[400])return h[400];var f=B3[d],p=Lp(h,s2,f,d<400?-1:1);if(!p)throw new Error("Could not find a matching font-weight for value "+d);return p}(i.weight,o)))throw new Error("Failed to resolve a font for the rule '"+Dp(i)+"'.");return o}function Tp(s){return s.trimLeft()}function z3(s,t){for(var r=0;r<s.length;){if(s.charAt(r)===t)return[s.substring(0,r),s.substring(r+1)];r+=1}return null}function $3(s){var t=s.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],s.substring(t[0].length)]}var md,Mp,Ep,yh=["times"];(function(s){var t,r,a,n,i,o,l,d,h,f=function(T){return T=T||{},this.isStrokeTransparent=T.isStrokeTransparent||!1,this.strokeOpacity=T.strokeOpacity||1,this.strokeStyle=T.strokeStyle||"#000000",this.fillStyle=T.fillStyle||"#000000",this.isFillTransparent=T.isFillTransparent||!1,this.fillOpacity=T.fillOpacity||1,this.font=T.font||"10px sans-serif",this.textBaseline=T.textBaseline||"alphabetic",this.textAlign=T.textAlign||"left",this.lineWidth=T.lineWidth||1,this.lineJoin=T.lineJoin||"miter",this.lineCap=T.lineCap||"butt",this.path=T.path||[],this.transform=T.transform!==void 0?T.transform.clone():new d,this.globalCompositeOperation=T.globalCompositeOperation||"normal",this.globalAlpha=T.globalAlpha||1,this.clip_path=T.clip_path||[],this.currentPoint=T.currentPoint||new o,this.miterLimit=T.miterLimit||10,this.lastPoint=T.lastPoint||new o,this.lineDashOffset=T.lineDashOffset||0,this.lineDash=T.lineDash||[],this.margin=T.margin||[0,0,0,0],this.prevPageLastElemOffset=T.prevPageLastElemOffset||0,this.ignoreClearRect=typeof T.ignoreClearRect!="boolean"||T.ignoreClearRect,this};s.events.push(["initialized",function(){this.context2d=new p(this),t=this.internal.f2,r=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,n=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,d=this.internal.Matrix,h=new f}]);var p=function(T){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var U=T;Object.defineProperty(this,"pdf",{get:function(){return U}});var V=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return V},set:function(ee){V=!!ee}});var re=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return re},set:function(ee){re=!!ee}});var G=0;Object.defineProperty(this,"posX",{get:function(){return G},set:function(ee){isNaN(ee)||(G=ee)}});var Y=0;Object.defineProperty(this,"posY",{get:function(){return Y},set:function(ee){isNaN(ee)||(Y=ee)}}),Object.defineProperty(this,"margin",{get:function(){return h.margin},set:function(ee){var H;typeof ee=="number"?H=[ee,ee,ee,ee]:((H=new Array(4))[0]=ee[0],H[1]=ee.length>=2?ee[1]:H[0],H[2]=ee.length>=3?ee[2]:H[0],H[3]=ee.length>=4?ee[3]:H[1]),h.margin=H}});var Z=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Z},set:function(ee){Z=ee}});var de=0;Object.defineProperty(this,"lastBreak",{get:function(){return de},set:function(ee){de=ee}});var Le=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Le},set:function(ee){Le=ee}}),Object.defineProperty(this,"ctx",{get:function(){return h},set:function(ee){ee instanceof f&&(h=ee)}}),Object.defineProperty(this,"path",{get:function(){return h.path},set:function(ee){h.path=ee}});var X=[];Object.defineProperty(this,"ctxStack",{get:function(){return X},set:function(ee){X=ee}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ee){var H;H=x(ee),this.ctx.fillStyle=H.style,this.ctx.isFillTransparent=H.a===0,this.ctx.fillOpacity=H.a,this.pdf.setFillColor(H.r,H.g,H.b,{a:H.a}),this.pdf.setTextColor(H.r,H.g,H.b,{a:H.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ee){var H=x(ee);this.ctx.strokeStyle=H.style,this.ctx.isStrokeTransparent=H.a===0,this.ctx.strokeOpacity=H.a,H.a===0?this.pdf.setDrawColor(255,255,255):(H.a,this.pdf.setDrawColor(H.r,H.g,H.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ee){["butt","round","square"].indexOf(ee)!==-1&&(this.ctx.lineCap=ee,this.pdf.setLineCap(ee))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ee){isNaN(ee)||(this.ctx.lineWidth=ee,this.pdf.setLineWidth(ee))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ee){["bevel","round","miter"].indexOf(ee)!==-1&&(this.ctx.lineJoin=ee,this.pdf.setLineJoin(ee))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ee){isNaN(ee)||(this.ctx.miterLimit=ee,this.pdf.setMiterLimit(ee))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ee){this.ctx.textBaseline=ee}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ee){["right","end","center","left","start"].indexOf(ee)!==-1&&(this.ctx.textAlign=ee)}});var me=null;function we(ee,H){if(me===null){var Ee=function(Fe){var Ie=[];return Object.keys(Fe).forEach(function(Ue){Fe[Ue].forEach(function(Ye){var We=null;switch(Ye){case"bold":We={family:Ue,weight:"bold"};break;case"italic":We={family:Ue,style:"italic"};break;case"bolditalic":We={family:Ue,weight:"bold",style:"italic"};break;case"":case"normal":We={family:Ue}}We!==null&&(We.ref={name:Ue,style:Ye},Ie.push(We))})}),Ie}(ee.getFontList());me=function(Fe){for(var Ie={},Ue=0;Ue<Fe.length;++Ue){var Ye=xm(Fe[Ue]),We=Ye.family,st=Ye.stretch,ot=Ye.style,mt=Ye.weight;Ie[We]=Ie[We]||{},Ie[We][st]=Ie[We][st]||{},Ie[We][st][ot]=Ie[We][st][ot]||{},Ie[We][st][ot][mt]=Ye}return Ie}(Ee.concat(H))}return me}var oe=null;Object.defineProperty(this,"fontFaces",{get:function(){return oe},set:function(ee){me=null,oe=ee}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ee){var H;if(this.ctx.font=ee,(H=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ee))!==null){var Ee=H[1];H[2];var Fe=H[3],Ie=H[4];H[5];var Ue=H[6],Ye=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ie)[2];Ie=Math.floor(Ye==="px"?parseFloat(Ie)*this.pdf.internal.scaleFactor:Ye==="em"?parseFloat(Ie)*this.pdf.getFontSize():parseFloat(Ie)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ie);var We=function(pt){var Ct,Je,Xt=[],Lt=pt.trim();if(Lt==="")return yh;if(Lt in Ip)return[Ip[Lt]];for(;Lt!=="";){switch(Je=null,Ct=(Lt=Tp(Lt)).charAt(0)){case'"':case"'":Je=z3(Lt.substring(1),Ct);break;default:Je=$3(Lt)}if(Je===null||(Xt.push(Je[0]),(Lt=Tp(Je[1]))!==""&&Lt.charAt(0)!==","))return yh;Lt=Lt.replace(/^,/,"")}return Xt}(Ue);if(this.fontFaces){var st=q3(we(this.pdf,this.fontFaces),We.map(function(pt){return{family:pt,stretch:"normal",weight:Fe,style:Ee}}));this.pdf.setFont(st.ref.name,st.ref.style)}else{var ot="";(Fe==="bold"||parseInt(Fe,10)>=700||Ee==="bold")&&(ot="bold"),Ee==="italic"&&(ot+="italic"),ot.length===0&&(ot="normal");for(var mt="",rt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Be=0;Be<We.length;Be++){if(this.pdf.internal.getFont(We[Be],ot,{noFallback:!0,disableWarning:!0})!==void 0){mt=We[Be];break}if(ot==="bolditalic"&&this.pdf.internal.getFont(We[Be],"bold",{noFallback:!0,disableWarning:!0})!==void 0)mt=We[Be],ot="bold";else if(this.pdf.internal.getFont(We[Be],"normal",{noFallback:!0,disableWarning:!0})!==void 0){mt=We[Be],ot="normal";break}}if(mt===""){for(var ft=0;ft<We.length;ft++)if(rt[We[ft]]){mt=rt[We[ft]];break}}mt=mt===""?"Times":mt,this.pdf.setFont(mt,ot)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ee){this.ctx.globalCompositeOperation=ee}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ee){this.ctx.globalAlpha=ee}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ee){this.ctx.lineDashOffset=ee,Ae.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ee){this.ctx.lineDash=ee,Ae.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ee){this.ctx.ignoreClearRect=!!ee}})};p.prototype.setLineDash=function(T){this.lineDash=T},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){B.call(this,"fill",!1)},p.prototype.stroke=function(){B.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(T,U){if(isNaN(T)||isNaN(U))throw ys.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var V=this.ctx.transform.applyToPoint(new o(T,U));this.path.push({type:"mt",x:V.x,y:V.y}),this.ctx.lastPoint=new o(T,U)},p.prototype.closePath=function(){var T=new o(0,0),U=0;for(U=this.path.length-1;U!==-1;U--)if(this.path[U].type==="begin"&&hs(this.path[U+1])==="object"&&typeof this.path[U+1].x=="number"){T=new o(this.path[U+1].x,this.path[U+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(T.x,T.y)},p.prototype.lineTo=function(T,U){if(isNaN(T)||isNaN(U))throw ys.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var V=this.ctx.transform.applyToPoint(new o(T,U));this.path.push({type:"lt",x:V.x,y:V.y}),this.ctx.lastPoint=new o(V.x,V.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),B.call(this,null,!0)},p.prototype.quadraticCurveTo=function(T,U,V,re){if(isNaN(V)||isNaN(re)||isNaN(T)||isNaN(U))throw ys.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var G=this.ctx.transform.applyToPoint(new o(V,re)),Y=this.ctx.transform.applyToPoint(new o(T,U));this.path.push({type:"qct",x1:Y.x,y1:Y.y,x:G.x,y:G.y}),this.ctx.lastPoint=new o(G.x,G.y)},p.prototype.bezierCurveTo=function(T,U,V,re,G,Y){if(isNaN(G)||isNaN(Y)||isNaN(T)||isNaN(U)||isNaN(V)||isNaN(re))throw ys.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Z=this.ctx.transform.applyToPoint(new o(G,Y)),de=this.ctx.transform.applyToPoint(new o(T,U)),Le=this.ctx.transform.applyToPoint(new o(V,re));this.path.push({type:"bct",x1:de.x,y1:de.y,x2:Le.x,y2:Le.y,x:Z.x,y:Z.y}),this.ctx.lastPoint=new o(Z.x,Z.y)},p.prototype.arc=function(T,U,V,re,G,Y){if(isNaN(T)||isNaN(U)||isNaN(V)||isNaN(re)||isNaN(G))throw ys.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Y=!!Y,!this.ctx.transform.isIdentity){var Z=this.ctx.transform.applyToPoint(new o(T,U));T=Z.x,U=Z.y;var de=this.ctx.transform.applyToPoint(new o(0,V)),Le=this.ctx.transform.applyToPoint(new o(0,0));V=Math.sqrt(Math.pow(de.x-Le.x,2)+Math.pow(de.y-Le.y,2))}Math.abs(G-re)>=2*Math.PI&&(re=0,G=2*Math.PI),this.path.push({type:"arc",x:T,y:U,radius:V,startAngle:re,endAngle:G,counterclockwise:Y})},p.prototype.arcTo=function(T,U,V,re,G){throw new Error("arcTo not implemented.")},p.prototype.rect=function(T,U,V,re){if(isNaN(T)||isNaN(U)||isNaN(V)||isNaN(re))throw ys.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(T,U),this.lineTo(T+V,U),this.lineTo(T+V,U+re),this.lineTo(T,U+re),this.lineTo(T,U),this.lineTo(T+V,U),this.lineTo(T,U)},p.prototype.fillRect=function(T,U,V,re){if(isNaN(T)||isNaN(U)||isNaN(V)||isNaN(re))throw ys.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!u.call(this)){var G={};this.lineCap!=="butt"&&(G.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(G.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(T,U,V,re),this.fill(),G.hasOwnProperty("lineCap")&&(this.lineCap=G.lineCap),G.hasOwnProperty("lineJoin")&&(this.lineJoin=G.lineJoin)}},p.prototype.strokeRect=function(T,U,V,re){if(isNaN(T)||isNaN(U)||isNaN(V)||isNaN(re))throw ys.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");k.call(this)||(this.beginPath(),this.rect(T,U,V,re),this.stroke())},p.prototype.clearRect=function(T,U,V,re){if(isNaN(T)||isNaN(U)||isNaN(V)||isNaN(re))throw ys.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(T,U,V,re))},p.prototype.save=function(T){T=typeof T!="boolean"||T;for(var U=this.pdf.internal.getCurrentPageInfo().pageNumber,V=0;V<this.pdf.internal.getNumberOfPages();V++)this.pdf.setPage(V+1),this.pdf.internal.out("q");if(this.pdf.setPage(U),T){this.ctx.fontSize=this.pdf.internal.getFontSize();var re=new f(this.ctx);this.ctxStack.push(this.ctx),this.ctx=re}},p.prototype.restore=function(T){T=typeof T!="boolean"||T;for(var U=this.pdf.internal.getCurrentPageInfo().pageNumber,V=0;V<this.pdf.internal.getNumberOfPages();V++)this.pdf.setPage(V+1),this.pdf.internal.out("Q");this.pdf.setPage(U),T&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var x=function(T){var U,V,re,G;if(T.isCanvasGradient===!0&&(T=T.getColor()),!T)return{r:0,g:0,b:0,a:0,style:T};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(T))U=0,V=0,re=0,G=0;else{var Y=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(T);if(Y!==null)U=parseInt(Y[1]),V=parseInt(Y[2]),re=parseInt(Y[3]),G=1;else if((Y=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(T))!==null)U=parseInt(Y[1]),V=parseInt(Y[2]),re=parseInt(Y[3]),G=parseFloat(Y[4]);else{if(G=1,typeof T=="string"&&T.charAt(0)!=="#"){var Z=new Y1(T);T=Z.ok?Z.toHex():"#000000"}T.length===4?(U=T.substring(1,2),U+=U,V=T.substring(2,3),V+=V,re=T.substring(3,4),re+=re):(U=T.substring(1,3),V=T.substring(3,5),re=T.substring(5,7)),U=parseInt(U,16),V=parseInt(V,16),re=parseInt(re,16)}}return{r:U,g:V,b:re,a:G,style:T}},u=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},k=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(T,U,V,re){if(isNaN(U)||isNaN(V)||typeof T!="string")throw ys.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(re=isNaN(re)?void 0:re,!u.call(this)){var G=ce(this.ctx.transform.rotation),Y=this.ctx.transform.scaleX;S.call(this,{text:T,x:U,y:V,scale:Y,angle:G,align:this.textAlign,maxWidth:re})}},p.prototype.strokeText=function(T,U,V,re){if(isNaN(U)||isNaN(V)||typeof T!="string")throw ys.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!k.call(this)){re=isNaN(re)?void 0:re;var G=ce(this.ctx.transform.rotation),Y=this.ctx.transform.scaleX;S.call(this,{text:T,x:U,y:V,scale:Y,renderingMode:"stroke",angle:G,align:this.textAlign,maxWidth:re})}},p.prototype.measureText=function(T){if(typeof T!="string")throw ys.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var U=this.pdf,V=this.pdf.internal.scaleFactor,re=U.internal.getFontSize(),G=U.getStringUnitWidth(T)*re/U.internal.scaleFactor,Y=function(Z){var de=(Z=Z||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return de}}),this};return new Y({width:G*=Math.round(96*V/72*1e4)/1e4})},p.prototype.scale=function(T,U){if(isNaN(T)||isNaN(U))throw ys.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var V=new d(T,0,0,U,0,0);this.ctx.transform=this.ctx.transform.multiply(V)},p.prototype.rotate=function(T){if(isNaN(T))throw ys.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var U=new d(Math.cos(T),Math.sin(T),-Math.sin(T),Math.cos(T),0,0);this.ctx.transform=this.ctx.transform.multiply(U)},p.prototype.translate=function(T,U){if(isNaN(T)||isNaN(U))throw ys.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var V=new d(1,0,0,1,T,U);this.ctx.transform=this.ctx.transform.multiply(V)},p.prototype.transform=function(T,U,V,re,G,Y){if(isNaN(T)||isNaN(U)||isNaN(V)||isNaN(re)||isNaN(G)||isNaN(Y))throw ys.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Z=new d(T,U,V,re,G,Y);this.ctx.transform=this.ctx.transform.multiply(Z)},p.prototype.setTransform=function(T,U,V,re,G,Y){T=isNaN(T)?1:T,U=isNaN(U)?0:U,V=isNaN(V)?0:V,re=isNaN(re)?1:re,G=isNaN(G)?0:G,Y=isNaN(Y)?0:Y,this.ctx.transform=new d(T,U,V,re,G,Y)};var j=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(T,U,V,re,G,Y,Z,de,Le){var X=this.pdf.getImageProperties(T),me=1,we=1,oe=1,ee=1;re!==void 0&&de!==void 0&&(oe=de/re,ee=Le/G,me=X.width/re*de/re,we=X.height/G*Le/G),Y===void 0&&(Y=U,Z=V,U=0,V=0),re!==void 0&&de===void 0&&(de=re,Le=G),re===void 0&&de===void 0&&(de=X.width,Le=X.height);for(var H,Ee=this.ctx.transform.decompose(),Fe=ce(Ee.rotate.shx),Ie=new d,Ue=(Ie=(Ie=(Ie=Ie.multiply(Ee.translate)).multiply(Ee.skew)).multiply(Ee.scale)).applyToRectangle(new l(Y-U*oe,Z-V*ee,re*me,G*we)),Ye=v.call(this,Ue),We=[],st=0;st<Ye.length;st+=1)We.indexOf(Ye[st])===-1&&We.push(Ye[st]);if(D(We),this.autoPaging)for(var ot=We[0],mt=We[We.length-1],rt=ot;rt<mt+1;rt++){this.pdf.setPage(rt);var Be=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ft=rt===1?this.posY+this.margin[0]:this.margin[0],pt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ct=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Je=rt===1?0:pt+(rt-2)*Ct;if(this.ctx.clip_path.length!==0){var Xt=this.path;H=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=P(H,this.posX+this.margin[3],-Je+ft+this.ctx.prevPageLastElemOffset),F.call(this,"fill",!0),this.path=Xt}var Lt=JSON.parse(JSON.stringify(Ue));Lt=P([Lt],this.posX+this.margin[3],-Je+ft+this.ctx.prevPageLastElemOffset)[0];var Ps=(rt>ot||rt<mt)&&j.call(this);Ps&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Be,Ct,null).clip().discardPath()),this.pdf.addImage(T,"JPEG",Lt.x,Lt.y,Lt.w,Lt.h,null,null,Fe),Ps&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(T,"JPEG",Ue.x,Ue.y,Ue.w,Ue.h,null,null,Fe)};var v=function(T,U,V){var re=[];U=U||this.pdf.internal.pageSize.width,V=V||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var G=this.posY+this.ctx.prevPageLastElemOffset;switch(T.type){default:case"mt":case"lt":re.push(Math.floor((T.y+G)/V)+1);break;case"arc":re.push(Math.floor((T.y+G-T.radius)/V)+1),re.push(Math.floor((T.y+G+T.radius)/V)+1);break;case"qct":var Y=ie(this.ctx.lastPoint.x,this.ctx.lastPoint.y,T.x1,T.y1,T.x,T.y);re.push(Math.floor((Y.y+G)/V)+1),re.push(Math.floor((Y.y+Y.h+G)/V)+1);break;case"bct":var Z=ve(this.ctx.lastPoint.x,this.ctx.lastPoint.y,T.x1,T.y1,T.x2,T.y2,T.x,T.y);re.push(Math.floor((Z.y+G)/V)+1),re.push(Math.floor((Z.y+Z.h+G)/V)+1);break;case"rect":re.push(Math.floor((T.y+G)/V)+1),re.push(Math.floor((T.y+T.h+G)/V)+1)}for(var de=0;de<re.length;de+=1)for(;this.pdf.internal.getNumberOfPages()<re[de];)w.call(this);return re},w=function(){var T=this.fillStyle,U=this.strokeStyle,V=this.font,re=this.lineCap,G=this.lineWidth,Y=this.lineJoin;this.pdf.addPage(),this.fillStyle=T,this.strokeStyle=U,this.font=V,this.lineCap=re,this.lineWidth=G,this.lineJoin=Y},P=function(T,U,V){for(var re=0;re<T.length;re++)switch(T[re].type){case"bct":T[re].x2+=U,T[re].y2+=V;case"qct":T[re].x1+=U,T[re].y1+=V;case"mt":case"lt":case"arc":default:T[re].x+=U,T[re].y+=V}return T},D=function(T){return T.sort(function(U,V){return U-V})},B=function(T,U){for(var V,re,G=this.fillStyle,Y=this.strokeStyle,Z=this.lineCap,de=this.lineWidth,Le=Math.abs(de*this.ctx.transform.scaleX),X=this.lineJoin,me=JSON.parse(JSON.stringify(this.path)),we=JSON.parse(JSON.stringify(this.path)),oe=[],ee=0;ee<we.length;ee++)if(we[ee].x!==void 0)for(var H=v.call(this,we[ee]),Ee=0;Ee<H.length;Ee+=1)oe.indexOf(H[Ee])===-1&&oe.push(H[Ee]);for(var Fe=0;Fe<oe.length;Fe++)for(;this.pdf.internal.getNumberOfPages()<oe[Fe];)w.call(this);if(D(oe),this.autoPaging)for(var Ie=oe[0],Ue=oe[oe.length-1],Ye=Ie;Ye<Ue+1;Ye++){this.pdf.setPage(Ye),this.fillStyle=G,this.strokeStyle=Y,this.lineCap=Z,this.lineWidth=Le,this.lineJoin=X;var We=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],st=Ye===1?this.posY+this.margin[0]:this.margin[0],ot=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],mt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],rt=Ye===1?0:ot+(Ye-2)*mt;if(this.ctx.clip_path.length!==0){var Be=this.path;V=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=P(V,this.posX+this.margin[3],-rt+st+this.ctx.prevPageLastElemOffset),F.call(this,T,!0),this.path=Be}if(re=JSON.parse(JSON.stringify(me)),this.path=P(re,this.posX+this.margin[3],-rt+st+this.ctx.prevPageLastElemOffset),U===!1||Ye===0){var ft=(Ye>Ie||Ye<Ue)&&j.call(this);ft&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],We,mt,null).clip().discardPath()),F.call(this,T,U),ft&&this.pdf.restoreGraphicsState()}this.lineWidth=de}else this.lineWidth=Le,F.call(this,T,U),this.lineWidth=de;this.path=me},F=function(T,U){if((T!=="stroke"||U||!k.call(this))&&(T==="stroke"||U||!u.call(this))){for(var V,re,G=[],Y=this.path,Z=0;Z<Y.length;Z++){var de=Y[Z];switch(de.type){case"begin":G.push({begin:!0});break;case"close":G.push({close:!0});break;case"mt":G.push({start:de,deltas:[],abs:[]});break;case"lt":var Le=G.length;if(Y[Z-1]&&!isNaN(Y[Z-1].x)&&(V=[de.x-Y[Z-1].x,de.y-Y[Z-1].y],Le>0)){for(;Le>=0;Le--)if(G[Le-1].close!==!0&&G[Le-1].begin!==!0){G[Le-1].deltas.push(V),G[Le-1].abs.push(de);break}}break;case"bct":V=[de.x1-Y[Z-1].x,de.y1-Y[Z-1].y,de.x2-Y[Z-1].x,de.y2-Y[Z-1].y,de.x-Y[Z-1].x,de.y-Y[Z-1].y],G[G.length-1].deltas.push(V);break;case"qct":var X=Y[Z-1].x+2/3*(de.x1-Y[Z-1].x),me=Y[Z-1].y+2/3*(de.y1-Y[Z-1].y),we=de.x+2/3*(de.x1-de.x),oe=de.y+2/3*(de.y1-de.y),ee=de.x,H=de.y;V=[X-Y[Z-1].x,me-Y[Z-1].y,we-Y[Z-1].x,oe-Y[Z-1].y,ee-Y[Z-1].x,H-Y[Z-1].y],G[G.length-1].deltas.push(V);break;case"arc":G.push({deltas:[],abs:[],arc:!0}),Array.isArray(G[G.length-1].abs)&&G[G.length-1].abs.push(de)}}re=U?null:T==="stroke"?"stroke":"fill";for(var Ee=!1,Fe=0;Fe<G.length;Fe++)if(G[Fe].arc)for(var Ie=G[Fe].abs,Ue=0;Ue<Ie.length;Ue++){var Ye=Ie[Ue];Ye.type==="arc"?C.call(this,Ye.x,Ye.y,Ye.radius,Ye.startAngle,Ye.endAngle,Ye.counterclockwise,void 0,U,!Ee):I.call(this,Ye.x,Ye.y),Ee=!0}else if(G[Fe].close===!0)this.pdf.internal.out("h"),Ee=!1;else if(G[Fe].begin!==!0){var We=G[Fe].start.x,st=G[Fe].start.y;M.call(this,G[Fe].deltas,We,st),Ee=!0}re&&A.call(this,re),U&&L.call(this)}},se=function(T){var U=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,V=U*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return T-V;case"top":return T+U-V;case"hanging":return T+U-2*V;case"middle":return T+U/2-V;case"ideographic":return T;case"alphabetic":default:return T}},z=function(T){return T+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var T=function(){};return T.colorStops=[],T.addColorStop=function(U,V){this.colorStops.push([U,V])},T.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},T.isCanvasGradient=!0,T},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var C=function(T,U,V,re,G,Y,Z,de,Le){for(var X=ae.call(this,V,re,G,Y),me=0;me<X.length;me++){var we=X[me];me===0&&(Le?y.call(this,we.x1+T,we.y1+U):I.call(this,we.x1+T,we.y1+U)),J.call(this,T,U,we.x2,we.y2,we.x3,we.y3,we.x4,we.y4)}de?L.call(this):A.call(this,Z)},A=function(T){switch(T){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},L=function(){this.pdf.clip(),this.pdf.discardPath()},y=function(T,U){this.pdf.internal.out(r(T)+" "+a(U)+" m")},S=function(T){var U;switch(T.align){case"right":case"end":U="right";break;case"center":U="center";break;case"left":case"start":default:U="left"}var V=this.pdf.getTextDimensions(T.text),re=se.call(this,T.y),G=z.call(this,re)-V.h,Y=this.ctx.transform.applyToPoint(new o(T.x,re)),Z=this.ctx.transform.decompose(),de=new d;de=(de=(de=de.multiply(Z.translate)).multiply(Z.skew)).multiply(Z.scale);for(var Le,X,me,we=this.ctx.transform.applyToRectangle(new l(T.x,re,V.w,V.h)),oe=de.applyToRectangle(new l(T.x,G,V.w,V.h)),ee=v.call(this,oe),H=[],Ee=0;Ee<ee.length;Ee+=1)H.indexOf(ee[Ee])===-1&&H.push(ee[Ee]);if(D(H),this.autoPaging)for(var Fe=H[0],Ie=H[H.length-1],Ue=Fe;Ue<Ie+1;Ue++){this.pdf.setPage(Ue);var Ye=Ue===1?this.posY+this.margin[0]:this.margin[0],We=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],st=this.pdf.internal.pageSize.height-this.margin[2],ot=st-this.margin[0],mt=this.pdf.internal.pageSize.width-this.margin[1],rt=mt-this.margin[3],Be=Ue===1?0:We+(Ue-2)*ot;if(this.ctx.clip_path.length!==0){var ft=this.path;Le=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=P(Le,this.posX+this.margin[3],-1*Be+Ye),F.call(this,"fill",!0),this.path=ft}var pt=P([JSON.parse(JSON.stringify(oe))],this.posX+this.margin[3],-Be+Ye+this.ctx.prevPageLastElemOffset)[0];T.scale>=.01&&(X=this.pdf.internal.getFontSize(),this.pdf.setFontSize(X*T.scale),me=this.lineWidth,this.lineWidth=me*T.scale);var Ct=this.autoPaging!=="text";if(Ct||pt.y+pt.h<=st){if(Ct||pt.y>=Ye&&pt.x<=mt){var Je=Ct?T.text:this.pdf.splitTextToSize(T.text,T.maxWidth||mt-pt.x)[0],Xt=P([JSON.parse(JSON.stringify(we))],this.posX+this.margin[3],-Be+Ye+this.ctx.prevPageLastElemOffset)[0],Lt=Ct&&(Ue>Fe||Ue<Ie)&&j.call(this);Lt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],rt,ot,null).clip().discardPath()),this.pdf.text(Je,Xt.x,Xt.y,{angle:T.angle,align:U,renderingMode:T.renderingMode}),Lt&&this.pdf.restoreGraphicsState()}}else pt.y<st&&(this.ctx.prevPageLastElemOffset+=st-pt.y);T.scale>=.01&&(this.pdf.setFontSize(X),this.lineWidth=me)}else T.scale>=.01&&(X=this.pdf.internal.getFontSize(),this.pdf.setFontSize(X*T.scale),me=this.lineWidth,this.lineWidth=me*T.scale),this.pdf.text(T.text,Y.x+this.posX,Y.y+this.posY,{angle:T.angle,align:U,renderingMode:T.renderingMode,maxWidth:T.maxWidth}),T.scale>=.01&&(this.pdf.setFontSize(X),this.lineWidth=me)},I=function(T,U,V,re){V=V||0,re=re||0,this.pdf.internal.out(r(T+V)+" "+a(U+re)+" l")},M=function(T,U,V){return this.pdf.lines(T,U,V,null,null)},J=function(T,U,V,re,G,Y,Z,de){this.pdf.internal.out([t(n(V+T)),t(i(re+U)),t(n(G+T)),t(i(Y+U)),t(n(Z+T)),t(i(de+U)),"c"].join(" "))},ae=function(T,U,V,re){for(var G=2*Math.PI,Y=Math.PI/2;U>V;)U-=G;var Z=Math.abs(V-U);Z<G&&re&&(Z=G-Z);for(var de=[],Le=re?-1:1,X=U;Z>1e-5;){var me=X+Le*Math.min(Z,Y);de.push(he.call(this,T,X,me)),Z-=Math.abs(me-X),X=me}return de},he=function(T,U,V){var re=(V-U)/2,G=T*Math.cos(re),Y=T*Math.sin(re),Z=G,de=-Y,Le=Z*Z+de*de,X=Le+Z*G+de*Y,me=4/3*(Math.sqrt(2*Le*X)-X)/(Z*Y-de*G),we=Z-me*de,oe=de+me*Z,ee=we,H=-oe,Ee=re+U,Fe=Math.cos(Ee),Ie=Math.sin(Ee);return{x1:T*Math.cos(U),y1:T*Math.sin(U),x2:we*Fe-oe*Ie,y2:we*Ie+oe*Fe,x3:ee*Fe-H*Ie,y3:ee*Ie+H*Fe,x4:T*Math.cos(V),y4:T*Math.sin(V)}},ce=function(T){return 180*T/Math.PI},ie=function(T,U,V,re,G,Y){var Z=T+.5*(V-T),de=U+.5*(re-U),Le=G+.5*(V-G),X=Y+.5*(re-Y),me=Math.min(T,G,Z,Le),we=Math.max(T,G,Z,Le),oe=Math.min(U,Y,de,X),ee=Math.max(U,Y,de,X);return new l(me,oe,we-me,ee-oe)},ve=function(T,U,V,re,G,Y,Z,de){var Le,X,me,we,oe,ee,H,Ee,Fe,Ie,Ue,Ye,We,st,ot=V-T,mt=re-U,rt=G-V,Be=Y-re,ft=Z-G,pt=de-Y;for(X=0;X<41;X++)Fe=(H=(me=T+(Le=X/40)*ot)+Le*((oe=V+Le*rt)-me))+Le*(oe+Le*(G+Le*ft-oe)-H),Ie=(Ee=(we=U+Le*mt)+Le*((ee=re+Le*Be)-we))+Le*(ee+Le*(Y+Le*pt-ee)-Ee),X==0?(Ue=Fe,Ye=Ie,We=Fe,st=Ie):(Ue=Math.min(Ue,Fe),Ye=Math.min(Ye,Ie),We=Math.max(We,Fe),st=Math.max(st,Ie));return new l(Math.round(Ue),Math.round(Ye),Math.round(We-Ue),Math.round(st-Ye))},Ae=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var T,U,V=(T=this.ctx.lineDash,U=this.ctx.lineDashOffset,JSON.stringify({lineDash:T,lineDashOffset:U}));this.prevLineDash!==V&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=V)}}})(kt.API),function(s){var t=function(i){var o,l,d,h,f,p,x,u,k,j;for(l=[],d=0,h=(i+=o="\0\0\0\0".slice(i.length%4||4)).length;h>d;d+=4)(f=(i.charCodeAt(d)<<24)+(i.charCodeAt(d+1)<<16)+(i.charCodeAt(d+2)<<8)+i.charCodeAt(d+3))!==0?(p=(f=((f=((f=((f=(f-(j=f%85))/85)-(k=f%85))/85)-(u=f%85))/85)-(x=f%85))/85)%85,l.push(p+33,x+33,u+33,k+33,j+33)):l.push(122);return function(v,w){for(var P=w;P>0;P--)v.pop()}(l,o.length),String.fromCharCode.apply(String,l)+"~>"},r=function(i){var o,l,d,h,f,p=String,x="length",u=255,k="charCodeAt",j="slice",v="replace";for(i[j](-2),i=i[j](0,-2)[v](/\s/g,"")[v]("z","!!!!!"),d=[],h=0,f=(i+=o="uuuuu"[j](i[x]%5||5))[x];f>h;h+=5)l=52200625*(i[k](h)-33)+614125*(i[k](h+1)-33)+7225*(i[k](h+2)-33)+85*(i[k](h+3)-33)+(i[k](h+4)-33),d.push(u&l>>24,u&l>>16,u&l>>8,u&l);return function(w,P){for(var D=P;D>0;D--)w.pop()}(d,o[x]),p.fromCharCode.apply(p,d)},a=function(i){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),o.test(i)===!1)return"";for(var l="",d=0;d<i.length;d+=2)l+=String.fromCharCode("0x"+(i[d]+i[d+1]));return l},n=function(i){for(var o=new Uint8Array(i.length),l=i.length;l--;)o[l]=i.charCodeAt(l);return i=(o=um(o)).reduce(function(d,h){return d+String.fromCharCode(h)},"")};s.processDataByFilters=function(i,o){var l=0,d=i||"",h=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":d=r(d),h.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":d=t(d),h.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":d=a(d),h.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":d=d.split("").map(function(f){return("0"+f.charCodeAt().toString(16)).slice(-2)}).join("")+">",h.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":d=n(d),h.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:d,reverseChain:h.reverse().join(" ")}}}(kt.API),function(s){s.loadFile=function(t,r,a){return function(n,i,o){i=i!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=function(d,h,f){var p=new XMLHttpRequest,x=0,u=function(k){var j=k.length,v=[],w=String.fromCharCode;for(x=0;x<j;x+=1)v.push(w(255&k.charCodeAt(x)));return v.join("")};if(p.open("GET",d,!h),p.overrideMimeType("text/plain; charset=x-user-defined"),h===!1&&(p.onload=function(){p.status===200?f(u(this.responseText)):f(void 0)}),p.send(null),h&&p.status===200)return u(p.responseText)}(n,i,o)}catch(d){}return l}(t,r,a)},s.loadImageFile=s.loadFile}(kt.API),function(s){function t(){return(At.html2canvas?Promise.resolve(At.html2canvas):im(()=>import("./html2canvas.esm-Bhn31G5V.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function r(){return(At.DOMPurify?Promise.resolve(At.DOMPurify):im(()=>import("./purify.es-B7tJ63FD.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var a=function(o){var l=hs(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},n=function(o,l){var d=document.createElement(o);for(var h in l.className&&(d.className=l.className),l.innerHTML&&l.dompurify&&(d.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)d.style[h]=l.style[h];return d},i=function o(l){var d=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),h=o.convert(Promise.resolve(),d);return h=(h=h.setProgress(1,o,1,[o])).set(l)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(o,l){return o.__proto__=l||i.prototype,o},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(o,l){return this.then(function(){switch(l=l||function(d){switch(a(d)){case"string":return"string";case"element":return d.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(r).then(function(d){return this.set({src:n("div",{innerHTML:o,dompurify:d})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},i.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=function d(h,f){for(var p=h.nodeType===3?document.createTextNode(h.nodeValue):h.cloneNode(!1),x=h.firstChild;x;x=x.nextSibling)f!==!0&&x.nodeType===1&&x.nodeName==="SCRIPT"||p.appendChild(d(x,f));return h.nodeType===1&&(h.nodeName==="CANVAS"?(p.width=h.width,p.height=h.height,p.getContext("2d").drawImage(h,0,0)):h.nodeName!=="TEXTAREA"&&h.nodeName!=="SELECT"||(p.value=h.value),p.addEventListener("load",function(){p.scrollTop=h.scrollTop,p.scrollLeft=h.scrollLeft},!0)),p}(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=n("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=n("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(n("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},i.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var d=Object.assign({},this.opt.html2canvas);return delete d.onrendered,l(this.prop.container,d)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},i.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var d=this.opt.jsPDF,h=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,d.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,d.context2d.posX=this.opt.x,d.context2d.posY=this.opt.y,d.context2d.margin=this.opt.margin,d.context2d.fontFaces=h,h)for(var x=0;x<h.length;++x){var u=h[x],k=u.src.find(function(j){return j.format==="truetype"});k&&d.addFont(k.url,u.ref.name,u.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,d.context2d.save(!0),l(this.prop.container,p)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},i.prototype.output=function(o,l,d){return(d=d||"pdf").toLowerCase()==="img"||d.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},i.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,l)})},i.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},i.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},i.prototype.set=function(o){if(a(o)!=="object")return this;var l=Object.keys(o||{}).map(function(d){if(d in i.template.prop)return function(){this.prop[d]=o[d]};switch(d){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[d]=o[d]}}},this);return this.then(function(){return this.thenList(l)})},i.prototype.get=function(o,l){return this.then(function(){var d=o in i.template.prop?this.prop[o]:this.opt[o];return l?l(d):d})},i.prototype.setMargin=function(o){return this.then(function(){switch(a(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},i.prototype.setPageSize=function(o){function l(d,h){return Math.floor(d*h/72*96)}return this.then(function(){(o=o||kt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},i.prototype.setProgress=function(o,l,d,h){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),d!=null&&(this.progress.n=d),h!=null&&(this.progress.stack=h),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(o,l,d,h){return this.setProgress(o?this.progress.val+o:null,l||null,d?this.progress.n+d:null,h?this.progress.stack.concat(h):null)},i.prototype.then=function(o,l){var d=this;return this.thenCore(o,l,function(h,f){return d.updateProgress(null,null,1,[h]),Promise.prototype.then.call(this,function(p){return d.updateProgress(null,h),p}).then(h,f).then(function(p){return d.updateProgress(1),p})})},i.prototype.thenCore=function(o,l,d){d=d||Promise.prototype.then,o&&(o=o.bind(this)),l&&(l=l.bind(this));var h=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:i.convert(Object.assign({},this),Promise.prototype),f=d.call(h,o,l);return i.convert(f,this.__proto__)},i.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},i.prototype.thenList=function(o){var l=this;return o.forEach(function(d){l=l.thenCore(d)}),l},i.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return i.convert(l,this)},i.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},i.prototype.error=function(o){return this.then(function(){throw new Error(o)})},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,kt.getPageSize=function(o,l,d){if(hs(o)==="object"){var h=o;o=h.orientation,l=h.unit||l,d=h.format||d}l=l||"mm",d=d||"a4",o=(""+(o||"P")).toLowerCase();var f,p=(""+d).toLowerCase(),x={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+l}var u,k=0,j=0;if(x.hasOwnProperty(p))k=x[p][1]/f,j=x[p][0]/f;else try{k=d[1],j=d[0]}catch(v){throw new Error("Invalid format: "+d)}if(o==="p"||o==="portrait")o="p",j>k&&(u=j,j=k,k=u);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",k>j&&(u=j,j=k,k=u)}return{width:j,height:k,unit:l,k:f,orientation:o}},s.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(xm):null;var d=new i(l);return l.worker?d:d.from(o).doCallback()}}(kt.API),kt.API.addJS=function(s){return Ep=s,this.internal.events.subscribe("postPutResources",function(){md=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(md+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Mp=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Ep+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){md!==void 0&&Mp!==void 0&&this.internal.out("/Names <</JavaScript "+md+" 0 R>>")}),this},function(s){var t;s.events.push(["postPutResources",function(){var r=this,a=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var n=r.outline.render().split(/\r\n/),i=0;i<n.length;i++){var o=n[i],l=a.exec(o);if(l!=null){var d=l[1];r.internal.newObjectDeferredBegin(d,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var h=this.internal.pages.length,f=[];for(i=0;i<h;i++){var p=r.internal.newObject();f.push(p);var x=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+x.objId+" 0 R /XYZ null null null]>> endobj")}var u=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<f.length;i++)r.internal.write("(page_"+(i+1)+")"+f[i]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+u+" 0 R"),r.internal.write(">>","endobj")}}]),s.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),s.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(a,n,i){var o={title:n,options:i,children:[]};return a==null&&(a=this.root),a.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(a){a.id=r.internal.newObjectDeferred();for(var n=0;n<a.children.length;n++)this.genIds_r(a.children[n])},r.outline.renderRoot=function(a){this.objStart(a),this.line("/Type /Outlines"),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1]))),this.line("/Count "+this.count_r({count:0},a)),this.objEnd()},r.outline.renderItems=function(a){for(var n=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<a.children.length;i++){var o=a.children[i];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(a)),i>0&&this.line("/Prev "+this.makeRef(a.children[i-1])),i<a.children.length-1&&this.line("/Next "+this.makeRef(a.children[i+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var d=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+d.objId+" 0 R /XYZ 0 "+n(0)+" 0]")}this.objEnd()}for(var h=0;h<a.children.length;h++)this.renderItems(a.children[h])},r.outline.line=function(a){this.ctx.val+=a+`\r
`},r.outline.makeRef=function(a){return a.id+" 0 R"},r.outline.makeString=function(a){return"("+r.internal.pdfEscape(a)+")"},r.outline.objStart=function(a){this.ctx.val+=`\r
`+a.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(a,n){for(var i=0;i<n.children.length;i++)a.count++,this.count_r(a,n.children[i]);return a.count}}])}(kt.API),function(s){var t=[192,193,194,195,196,197,198,199];s.processJPEG=function(r,a,n,i,o,l){var d,h=this.decode.DCT_DECODE,f=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(d=function(p){for(var x,u=256*p.charCodeAt(4)+p.charCodeAt(5),k=p.length,j={width:0,height:0,numcomponents:1},v=4;v<k;v+=2){if(v+=u,t.indexOf(p.charCodeAt(v+1))!==-1){x=256*p.charCodeAt(v+5)+p.charCodeAt(v+6),j={width:256*p.charCodeAt(v+7)+p.charCodeAt(v+8),height:x,numcomponents:p.charCodeAt(v+9)};break}u=256*p.charCodeAt(v+2)+p.charCodeAt(v+3)}return j}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}f={data:r,width:d.width,height:d.height,colorSpace:l,bitsPerComponent:8,filter:h,index:a,alias:n}}return f}}(kt.API);var vo,fd,Rp,Op,Fp,W3=function(){var s,t,r;function a(i){var o,l,d,h,f,p,x,u,k,j,v,w,P,D;for(this.data=i,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},p=null;;){switch(o=this.readUInt32(),k=function(){var B,F;for(F=[],B=0;B<4;++B)F.push(String.fromCharCode(this.data[this.pos++]));return F}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":p&&this.animation.frames.push(p),this.pos+=4,p={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},f=this.readUInt16(),h=this.readUInt16()||100,p.delay=1e3*f/h,p.disposeOp=this.data[this.pos++],p.blendOp=this.data[this.pos++],p.data=[];break;case"IDAT":case"fdAT":for(k==="fdAT"&&(this.pos+=4,o-=4),i=(p!=null?p.data:void 0)||this.imgData,w=0;0<=o?w<o:w>o;0<=o?++w:--w)i.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(d=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>d)throw new Error("More transparent colors than palette size");if((j=d-this.transparency.indexed.length)>0)for(P=0;0<=j?P<j:P>j;0<=j?++P:--P)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":x=(v=this.read(o)).indexOf(0),u=String.fromCharCode.apply(String,v.slice(0,x)),this.text[u]=String.fromCharCode.apply(String,v.slice(x+1));break;case"IEND":return p&&this.animation.frames.push(p),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=(D=this.colorType)===4||D===6,l=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*l,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}a.prototype.read=function(i){var o,l;for(l=[],o=0;0<=i?o<i:o>i;0<=i?++o:--o)l.push(this.data[this.pos++]);return l},a.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.decodePixels=function(i){var o=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*o),d=0,h=this;if(i==null&&(i=this.imgData),i.length===0)return new Uint8Array(0);function f(p,x,u,k){var j,v,w,P,D,B,F,se,z,C,A,L,y,S,I,M,J,ae,he,ce,ie,ve=Math.ceil((h.width-p)/u),Ae=Math.ceil((h.height-x)/k),T=h.width==ve&&h.height==Ae;for(S=o*ve,L=T?l:new Uint8Array(S*Ae),B=i.length,y=0,v=0;y<Ae&&d<B;){switch(i[d++]){case 0:for(P=J=0;J<S;P=J+=1)L[v++]=i[d++];break;case 1:for(P=ae=0;ae<S;P=ae+=1)j=i[d++],D=P<o?0:L[v-o],L[v++]=(j+D)%256;break;case 2:for(P=he=0;he<S;P=he+=1)j=i[d++],w=(P-P%o)/o,I=y&&L[(y-1)*S+w*o+P%o],L[v++]=(I+j)%256;break;case 3:for(P=ce=0;ce<S;P=ce+=1)j=i[d++],w=(P-P%o)/o,D=P<o?0:L[v-o],I=y&&L[(y-1)*S+w*o+P%o],L[v++]=(j+Math.floor((D+I)/2))%256;break;case 4:for(P=ie=0;ie<S;P=ie+=1)j=i[d++],w=(P-P%o)/o,D=P<o?0:L[v-o],y===0?I=M=0:(I=L[(y-1)*S+w*o+P%o],M=w&&L[(y-1)*S+(w-1)*o+P%o]),F=D+I-M,se=Math.abs(F-D),C=Math.abs(F-I),A=Math.abs(F-M),z=se<=C&&se<=A?D:C<=A?I:M,L[v++]=(j+z)%256;break;default:throw new Error("Invalid filter algorithm: "+i[d-1])}if(!T){var U=((x+y*k)*h.width+p)*o,V=y*S;for(P=0;P<ve;P+=1){for(var re=0;re<o;re+=1)l[U++]=L[V++];U+=(u-1)*o}}y++}}return i=j3(i),h.interlaceMethod==1?(f(0,0,8,8),f(4,0,8,8),f(0,4,4,8),f(2,0,4,4),f(0,2,2,4),f(1,0,2,2),f(0,1,1,2)):f(0,0,1,1),l},a.prototype.decodePalette=function(){var i,o,l,d,h,f,p,x,u;for(l=this.palette,f=this.transparency.indexed||[],h=new Uint8Array((f.length||0)+l.length),d=0,i=0,o=p=0,x=l.length;p<x;o=p+=3)h[d++]=l[o],h[d++]=l[o+1],h[d++]=l[o+2],h[d++]=(u=f[i++])!=null?u:255;return h},a.prototype.copyToImageData=function(i,o){var l,d,h,f,p,x,u,k,j,v,w;if(d=this.colors,j=null,l=this.hasAlphaChannel,this.palette.length&&(j=(w=this._decodedPalette)!=null?w:this._decodedPalette=this.decodePalette(),d=4,l=!0),k=(h=i.data||i).length,p=j||o,f=x=0,d===1)for(;f<k;)u=j?4*o[f/4]:x,v=p[u++],h[f++]=v,h[f++]=v,h[f++]=v,h[f++]=l?p[u++]:255,x=u;else for(;f<k;)u=j?4*o[f/4]:x,h[f++]=p[u++],h[f++]=p[u++],h[f++]=p[u++],h[f++]=l?p[u++]:255,x=u},a.prototype.decode=function(){var i;return i=new Uint8Array(this.width*this.height*4),this.copyToImageData(i,this.decodePixels()),i};var n=function(){if(Object.prototype.toString.call(At)==="[object Window]"){try{t=At.document.createElement("canvas"),r=t.getContext("2d")}catch(i){return!1}return!0}return!1};return n(),s=function(i){var o;if(n()===!0)return r.width=i.width,r.height=i.height,r.clearRect(0,0,i.width,i.height),r.putImageData(i,0,0),(o=new Image).src=t.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},a.prototype.decodeFrames=function(i){var o,l,d,h,f,p,x,u;if(this.animation){for(u=[],l=f=0,p=(x=this.animation.frames).length;f<p;l=++f)o=x[l],d=i.createImageData(o.width,o.height),h=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(d,h),o.imageData=d,u.push(o.image=s(d));return u}},a.prototype.renderFrame=function(i,o){var l,d,h;return l=(d=this.animation.frames)[o],h=d[o-1],o===0&&i.clearRect(0,0,this.width,this.height),(h!=null?h.disposeOp:void 0)===1?i.clearRect(h.xOffset,h.yOffset,h.width,h.height):(h!=null?h.disposeOp:void 0)===2&&i.putImageData(h.imageData,h.xOffset,h.yOffset),l.blendOp===0&&i.clearRect(l.xOffset,l.yOffset,l.width,l.height),i.drawImage(l.image,l.xOffset,l.yOffset)},a.prototype.animate=function(i){var o,l,d,h,f,p,x=this;return l=0,p=this.animation,h=p.numFrames,d=p.frames,f=p.numPlays,(o=function(){var u,k;if(u=l++%h,k=d[u],x.renderFrame(i,u),h>1&&l/h<f)return x.animation._timeout=setTimeout(o,k.delay)})()},a.prototype.stopAnimation=function(){var i;return clearTimeout((i=this.animation)!=null?i._timeout:void 0)},a.prototype.render=function(i){var o,l;return i._png&&i._png.stopAnimation(),i._png=this,i.width=this.width,i.height=this.height,o=i.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(l=o.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),o.putImageData(l,0,0))},a}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function H3(s){var t=0;if(s[t++]!==71||s[t++]!==73||s[t++]!==70||s[t++]!==56||(s[t++]+1&253)!=56||s[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=s[t++]|s[t++]<<8,a=s[t++]|s[t++]<<8,n=s[t++],i=n>>7,o=1<<(7&n)+1;s[t++],s[t++];var l=null,d=null;i&&(l=t,d=o,t+=3*o);var h=!0,f=[],p=0,x=null,u=0,k=null;for(this.width=r,this.height=a;h&&t<s.length;)switch(s[t++]){case 33:switch(s[t++]){case 255:if(s[t]!==11||s[t+1]==78&&s[t+2]==69&&s[t+3]==84&&s[t+4]==83&&s[t+5]==67&&s[t+6]==65&&s[t+7]==80&&s[t+8]==69&&s[t+9]==50&&s[t+10]==46&&s[t+11]==48&&s[t+12]==3&&s[t+13]==1&&s[t+16]==0)t+=14,k=s[t++]|s[t++]<<8,t++;else for(t+=12;;){if(!((y=s[t++])>=0))throw Error("Invalid block size");if(y===0)break;t+=y}break;case 249:if(s[t++]!==4||s[t+4]!==0)throw new Error("Invalid graphics extension block.");var j=s[t++];p=s[t++]|s[t++]<<8,x=s[t++],!(1&j)&&(x=null),u=j>>2&7,t++;break;case 254:for(;;){if(!((y=s[t++])>=0))throw Error("Invalid block size");if(y===0)break;t+=y}break;default:throw new Error("Unknown graphic control label: 0x"+s[t-1].toString(16))}break;case 44:var v=s[t++]|s[t++]<<8,w=s[t++]|s[t++]<<8,P=s[t++]|s[t++]<<8,D=s[t++]|s[t++]<<8,B=s[t++],F=B>>6&1,se=1<<(7&B)+1,z=l,C=d,A=!1;B>>7&&(A=!0,z=t,C=se,t+=3*se);var L=t;for(t++;;){var y;if(!((y=s[t++])>=0))throw Error("Invalid block size");if(y===0)break;t+=y}f.push({x:v,y:w,width:P,height:D,has_local_palette:A,palette_offset:z,palette_size:C,data_offset:L,data_length:t-L,transparent_index:x,interlaced:!!F,delay:p,disposal:u});break;case 59:h=!1;break;default:throw new Error("Unknown gif block: 0x"+s[t-1].toString(16))}this.numFrames=function(){return f.length},this.loopCount=function(){return k},this.frameInfo=function(S){if(S<0||S>=f.length)throw new Error("Frame index out of range.");return f[S]},this.decodeAndBlitFrameBGRA=function(S,I){var M=this.frameInfo(S),J=M.width*M.height,ae=new Uint8Array(J);Bp(s,M.data_offset,ae,J);var he=M.palette_offset,ce=M.transparent_index;ce===null&&(ce=256);var ie=M.width,ve=r-ie,Ae=ie,T=4*(M.y*r+M.x),U=4*((M.y+M.height)*r+M.x),V=T,re=4*ve;M.interlaced===!0&&(re+=4*r*7);for(var G=8,Y=0,Z=ae.length;Y<Z;++Y){var de=ae[Y];if(Ae===0&&(Ae=ie,(V+=re)>=U&&(re=4*ve+4*r*(G-1),V=T+(ie+ve)*(G<<1),G>>=1)),de===ce)V+=4;else{var Le=s[he+3*de],X=s[he+3*de+1],me=s[he+3*de+2];I[V++]=me,I[V++]=X,I[V++]=Le,I[V++]=255}--Ae}},this.decodeAndBlitFrameRGBA=function(S,I){var M=this.frameInfo(S),J=M.width*M.height,ae=new Uint8Array(J);Bp(s,M.data_offset,ae,J);var he=M.palette_offset,ce=M.transparent_index;ce===null&&(ce=256);var ie=M.width,ve=r-ie,Ae=ie,T=4*(M.y*r+M.x),U=4*((M.y+M.height)*r+M.x),V=T,re=4*ve;M.interlaced===!0&&(re+=4*r*7);for(var G=8,Y=0,Z=ae.length;Y<Z;++Y){var de=ae[Y];if(Ae===0&&(Ae=ie,(V+=re)>=U&&(re=4*ve+4*r*(G-1),V=T+(ie+ve)*(G<<1),G>>=1)),de===ce)V+=4;else{var Le=s[he+3*de],X=s[he+3*de+1],me=s[he+3*de+2];I[V++]=Le,I[V++]=X,I[V++]=me,I[V++]=255}--Ae}}}function Bp(s,t,r,a){for(var n=s[t++],i=1<<n,o=i+1,l=o+1,d=n+1,h=(1<<d)-1,f=0,p=0,x=0,u=s[t++],k=new Int32Array(4096),j=null;;){for(;f<16&&u!==0;)p|=s[t++]<<f,f+=8,u===1?u=s[t++]:--u;if(f<d)break;var v=p&h;if(p>>=d,f-=d,v!==i){if(v===o)break;for(var w=v<l?v:j,P=0,D=w;D>i;)D=k[D]>>8,++P;var B=D;if(x+P+(w!==v?1:0)>a)return void ys.log("Warning, gif stream longer than expected.");r[x++]=B;var F=x+=P;for(w!==v&&(r[x++]=B),D=w;P--;)D=k[D],r[--F]=255&D,D>>=8;j!==null&&l<4096&&(k[l++]=j<<8|B,l>=h+1&&d<12&&(++d,h=h<<1|1)),j=v}else l=o+1,h=(1<<(d=n+1))-1,j=null}return x!==a&&ys.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function bh(s){var t,r,a,n,i,o=Math.floor,l=new Array(64),d=new Array(64),h=new Array(64),f=new Array(64),p=new Array(65535),x=new Array(65535),u=new Array(64),k=new Array(64),j=[],v=0,w=7,P=new Array(64),D=new Array(64),B=new Array(64),F=new Array(256),se=new Array(2048),z=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],C=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],A=[0,1,2,3,4,5,6,7,8,9,10,11],L=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],y=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],S=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],I=[0,1,2,3,4,5,6,7,8,9,10,11],M=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],J=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ae(T,U){for(var V=0,re=0,G=new Array,Y=1;Y<=16;Y++){for(var Z=1;Z<=T[Y];Z++)G[U[re]]=[],G[U[re]][0]=V,G[U[re]][1]=Y,re++,V++;V*=2}return G}function he(T){for(var U=T[0],V=T[1]-1;V>=0;)U&1<<V&&(v|=1<<w),V--,--w<0&&(v==255?(ce(255),ce(0)):ce(v),w=7,v=0)}function ce(T){j.push(T)}function ie(T){ce(T>>8&255),ce(255&T)}function ve(T,U,V,re,G){for(var Y,Z=G[0],de=G[240],Le=function(Ie,Ue){var Ye,We,st,ot,mt,rt,Be,ft,pt,Ct,Je=0;for(pt=0;pt<8;++pt){Ye=Ie[Je],We=Ie[Je+1],st=Ie[Je+2],ot=Ie[Je+3],mt=Ie[Je+4],rt=Ie[Je+5],Be=Ie[Je+6];var Xt=Ye+(ft=Ie[Je+7]),Lt=Ye-ft,Ps=We+Be,Qt=We-Be,Gt=st+rt,nr=st-rt,Yt=ot+mt,ir=ot-mt,ss=Xt+Yt,Fs=Xt-Yt,Vs=Ps+Gt,Ut=Ps-Gt;Ie[Je]=ss+Vs,Ie[Je+4]=ss-Vs;var wt=.707106781*(Ut+Fs);Ie[Je+2]=Fs+wt,Ie[Je+6]=Fs-wt;var Ze=.382683433*((ss=ir+nr)-(Ut=Qt+Lt)),zt=.5411961*ss+Ze,vt=1.306562965*Ut+Ze,js=.707106781*(Vs=nr+Qt),Ns=Lt+js,ut=Lt-js;Ie[Je+5]=ut+zt,Ie[Je+3]=ut-zt,Ie[Je+1]=Ns+vt,Ie[Je+7]=Ns-vt,Je+=8}for(Je=0,pt=0;pt<8;++pt){Ye=Ie[Je],We=Ie[Je+8],st=Ie[Je+16],ot=Ie[Je+24],mt=Ie[Je+32],rt=Ie[Je+40],Be=Ie[Je+48];var fe=Ye+(ft=Ie[Je+56]),De=Ye-ft,ue=We+Be,Se=We-Be,Oe=st+rt,Ge=st-rt,gt=ot+mt,Ft=ot-mt,St=fe+gt,Tt=fe-gt,is=ue+Oe,Ss=ue-Oe;Ie[Je]=St+is,Ie[Je+32]=St-is;var or=.707106781*(Ss+Tt);Ie[Je+16]=Tt+or,Ie[Je+48]=Tt-or;var kr=.382683433*((St=Ft+Ge)-(Ss=Se+De)),Ia=.5411961*St+kr,Ya=1.306562965*Ss+kr,zi=.707106781*(is=Ge+Se),$i=De+zi,Wi=De-zi;Ie[Je+40]=Wi+Ia,Ie[Je+24]=Wi-Ia,Ie[Je+8]=$i+Ya,Ie[Je+56]=$i-Ya,Je++}for(pt=0;pt<64;++pt)Ct=Ie[pt]*Ue[pt],u[pt]=Ct>0?Ct+.5|0:Ct-.5|0;return u}(T,U),X=0;X<64;++X)k[z[X]]=Le[X];var me=k[0]-V;V=k[0],me==0?he(re[0]):(he(re[x[Y=32767+me]]),he(p[Y]));for(var we=63;we>0&&k[we]==0;)we--;if(we==0)return he(Z),V;for(var oe,ee=1;ee<=we;){for(var H=ee;k[ee]==0&&ee<=we;)++ee;var Ee=ee-H;if(Ee>=16){oe=Ee>>4;for(var Fe=1;Fe<=oe;++Fe)he(de);Ee&=15}Y=32767+k[ee],he(G[(Ee<<4)+x[Y]]),he(p[Y]),ee++}return we!=63&&he(Z),V}function Ae(T){T=Math.min(Math.max(T,1),100),i!=T&&(function(U){for(var V=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],re=0;re<64;re++){var G=o((V[re]*U+50)/100);G=Math.min(Math.max(G,1),255),l[z[re]]=G}for(var Y=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Z=0;Z<64;Z++){var de=o((Y[Z]*U+50)/100);de=Math.min(Math.max(de,1),255),d[z[Z]]=de}for(var Le=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],X=0,me=0;me<8;me++)for(var we=0;we<8;we++)h[X]=1/(l[z[X]]*Le[me]*Le[we]*8),f[X]=1/(d[z[X]]*Le[me]*Le[we]*8),X++}(T<50?Math.floor(5e3/T):Math.floor(200-2*T)),i=T)}this.encode=function(T,U){U&&Ae(U),j=new Array,v=0,w=7,ie(65496),ie(65504),ie(16),ce(74),ce(70),ce(73),ce(70),ce(0),ce(1),ce(1),ce(0),ie(1),ie(1),ce(0),ce(0),function(){ie(65499),ie(132),ce(0);for(var We=0;We<64;We++)ce(l[We]);ce(1);for(var st=0;st<64;st++)ce(d[st])}(),function(We,st){ie(65472),ie(17),ce(8),ie(st),ie(We),ce(3),ce(1),ce(17),ce(0),ce(2),ce(17),ce(1),ce(3),ce(17),ce(1)}(T.width,T.height),function(){ie(65476),ie(418),ce(0);for(var We=0;We<16;We++)ce(C[We+1]);for(var st=0;st<=11;st++)ce(A[st]);ce(16);for(var ot=0;ot<16;ot++)ce(L[ot+1]);for(var mt=0;mt<=161;mt++)ce(y[mt]);ce(1);for(var rt=0;rt<16;rt++)ce(S[rt+1]);for(var Be=0;Be<=11;Be++)ce(I[Be]);ce(17);for(var ft=0;ft<16;ft++)ce(M[ft+1]);for(var pt=0;pt<=161;pt++)ce(J[pt])}(),ie(65498),ie(12),ce(3),ce(1),ce(0),ce(2),ce(17),ce(3),ce(17),ce(0),ce(63),ce(0);var V=0,re=0,G=0;v=0,w=7,this.encode.displayName="_encode_";for(var Y,Z,de,Le,X,me,we,oe,ee,H=T.data,Ee=T.width,Fe=T.height,Ie=4*Ee,Ue=0;Ue<Fe;){for(Y=0;Y<Ie;){for(X=Ie*Ue+Y,we=-1,oe=0,ee=0;ee<64;ee++)me=X+(oe=ee>>3)*Ie+(we=4*(7&ee)),Ue+oe>=Fe&&(me-=Ie*(Ue+1+oe-Fe)),Y+we>=Ie&&(me-=Y+we-Ie+4),Z=H[me++],de=H[me++],Le=H[me++],P[ee]=(se[Z]+se[de+256>>0]+se[Le+512>>0]>>16)-128,D[ee]=(se[Z+768>>0]+se[de+1024>>0]+se[Le+1280>>0]>>16)-128,B[ee]=(se[Z+1280>>0]+se[de+1536>>0]+se[Le+1792>>0]>>16)-128;V=ve(P,h,V,t,a),re=ve(D,f,re,r,n),G=ve(B,f,G,r,n),Y+=32}Ue+=8}if(w>=0){var Ye=[];Ye[1]=w+1,Ye[0]=(1<<w+1)-1,he(Ye)}return ie(65497),new Uint8Array(j)},s=s||50,function(){for(var T=String.fromCharCode,U=0;U<256;U++)F[U]=T(U)}(),t=ae(C,A),r=ae(S,I),a=ae(L,y),n=ae(M,J),function(){for(var T=1,U=2,V=1;V<=15;V++){for(var re=T;re<U;re++)x[32767+re]=V,p[32767+re]=[],p[32767+re][1]=V,p[32767+re][0]=re;for(var G=-(U-1);G<=-T;G++)x[32767+G]=V,p[32767+G]=[],p[32767+G][1]=V,p[32767+G][0]=U-1+G;T<<=1,U<<=1}}(),function(){for(var T=0;T<256;T++)se[T]=19595*T,se[T+256>>0]=38470*T,se[T+512>>0]=7471*T+32768,se[T+768>>0]=-11059*T,se[T+1024>>0]=-21709*T,se[T+1280>>0]=32768*T+8421375,se[T+1536>>0]=-27439*T,se[T+1792>>0]=-5329*T}(),Ae(s)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function ba(s,t){if(this.pos=0,this.buffer=s,this.datav=new DataView(s.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Up(s){function t(C){if(!C)throw Error("assert :P")}function r(C,A,L){for(var y=0;4>y;y++)if(C[A+y]!=L.charCodeAt(y))return!0;return!1}function a(C,A,L,y,S){for(var I=0;I<S;I++)C[A+I]=L[y+I]}function n(C,A,L,y){for(var S=0;S<y;S++)C[A+S]=L}function i(C){return new Int32Array(C)}function o(C,A){for(var L=[],y=0;y<C;y++)L.push(new A);return L}function l(C,A){var L=[];return function y(S,I,M){for(var J=M[I],ae=0;ae<J&&(S.push(M.length>I+1?[]:new A),!(M.length<I+1));ae++)y(S[ae],I+1,M)}(L,0,C),L}var d=function(){var C=this;function A(c,m){for(var b=1<<m-1>>>0;c&b;)b>>>=1;return b?(c&b-1)+b:c}function L(c,m,b,_,R){t(!(_%b));do c[m+(_-=b)]=R;while(0<_)}function y(c,m,b,_,R){if(t(2328>=R),512>=R)var q=i(512);else if((q=i(R))==null)return 0;return function($,W,K,te,ye,Pe){var _e,Ne,$e=W,Te=1<<K,be=i(16),je=i(16);for(t(ye!=0),t(te!=null),t($!=null),t(0<K),Ne=0;Ne<ye;++Ne){if(15<te[Ne])return 0;++be[te[Ne]]}if(be[0]==ye)return 0;for(je[1]=0,_e=1;15>_e;++_e){if(be[_e]>1<<_e)return 0;je[_e+1]=je[_e]+be[_e]}for(Ne=0;Ne<ye;++Ne)_e=te[Ne],0<te[Ne]&&(Pe[je[_e]++]=Ne);if(je[15]==1)return(te=new S).g=0,te.value=Pe[0],L($,$e,1,Te,te),Te;var qe,He=-1,ze=Te-1,ct=0,et=1,bt=1,nt=1<<K;for(Ne=0,_e=1,ye=2;_e<=K;++_e,ye<<=1){if(et+=bt<<=1,0>(bt-=be[_e]))return 0;for(;0<be[_e];--be[_e])(te=new S).g=_e,te.value=Pe[Ne++],L($,$e+ct,ye,nt,te),ct=A(ct,_e)}for(_e=K+1,ye=2;15>=_e;++_e,ye<<=1){if(et+=bt<<=1,0>(bt-=be[_e]))return 0;for(;0<be[_e];--be[_e]){if(te=new S,(ct&ze)!=He){for($e+=nt,qe=1<<(He=_e)-K;15>He&&!(0>=(qe-=be[He]));)++He,qe<<=1;Te+=nt=1<<(qe=He-K),$[W+(He=ct&ze)].g=qe+K,$[W+He].value=$e-W-He}te.g=_e-K,te.value=Pe[Ne++],L($,$e+(ct>>K),ye,nt,te),ct=A(ct,_e)}}return et!=2*je[15]-1?0:Te}(c,m,b,_,R,q)}function S(){this.value=this.g=0}function I(){this.value=this.g=0}function M(){this.G=o(5,S),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(lr,I)}function J(c,m,b,_){t(c!=null),t(m!=null),t(2147483648>_),c.Ca=254,c.I=0,c.b=-8,c.Ka=0,c.oa=m,c.pa=b,c.Jd=m,c.Yc=b+_,c.Zc=4<=_?b+_-4+1:b,Y(c)}function ae(c,m){for(var b=0;0<m--;)b|=de(c,128)<<m;return b}function he(c,m){var b=ae(c,m);return Z(c)?-b:b}function ce(c,m,b,_){var R,q=0;for(t(c!=null),t(m!=null),t(4294967288>_),c.Sb=_,c.Ra=0,c.u=0,c.h=0,4<_&&(_=4),R=0;R<_;++R)q+=m[b+R]<<8*R;c.Ra=q,c.bb=_,c.oa=m,c.pa=b}function ie(c){for(;8<=c.u&&c.bb<c.Sb;)c.Ra>>>=8,c.Ra+=c.oa[c.pa+c.bb]<<no-8>>>0,++c.bb,c.u-=8;V(c)&&(c.h=1,c.u=0)}function ve(c,m){if(t(0<=m),!c.h&&m<=ao){var b=U(c)&ro[m];return c.u+=m,ie(c),b}return c.h=1,c.u=0}function Ae(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function T(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function U(c){return c.Ra>>>(c.u&no-1)>>>0}function V(c){return t(c.bb<=c.Sb),c.h||c.bb==c.Sb&&c.u>no}function re(c,m){c.u=m,c.h=V(c)}function G(c){c.u>=bl&&(t(c.u>=bl),ie(c))}function Y(c){t(c!=null&&c.oa!=null),c.pa<c.Zc?(c.I=(c.oa[c.pa++]|c.I<<8)>>>0,c.b+=8):(t(c!=null&&c.oa!=null),c.pa<c.Yc?(c.b+=8,c.I=c.oa[c.pa++]|c.I<<8):c.Ka?c.b=0:(c.I<<=8,c.b+=8,c.Ka=1))}function Z(c){return ae(c,1)}function de(c,m){var b=c.Ca;0>c.b&&Y(c);var _=c.b,R=b*m>>>8,q=(c.I>>>_>R)+0;for(q?(b-=R,c.I-=R+1<<_>>>0):b=R+1,_=b,R=0;256<=_;)R+=8,_>>=8;return _=7^R+Rr[_],c.b-=_,c.Ca=(b<<_)-1,q}function Le(c,m,b){c[m+0]=b>>24&255,c[m+1]=b>>16&255,c[m+2]=b>>8&255,c[m+3]=b>>0&255}function X(c,m){return c[m+0]<<0|c[m+1]<<8}function me(c,m){return X(c,m)|c[m+2]<<16}function we(c,m){return X(c,m)|X(c,m+2)<<16}function oe(c,m){var b=1<<m;return t(c!=null),t(0<m),c.X=i(b),c.X==null?0:(c.Mb=32-m,c.Xa=m,1)}function ee(c,m){t(c!=null),t(m!=null),t(c.Xa==m.Xa),a(m.X,0,c.X,0,1<<m.Xa)}function H(){this.X=[],this.Xa=this.Mb=0}function Ee(c,m,b,_){t(b!=null),t(_!=null);var R=b[0],q=_[0];return R==0&&(R=(c*q+m/2)/m),q==0&&(q=(m*R+c/2)/c),0>=R||0>=q?0:(b[0]=R,_[0]=q,1)}function Fe(c,m){return c+(1<<m)-1>>>m}function Ie(c,m){return((4278255360&c)+(4278255360&m)>>>0&4278255360)+((16711935&c)+(16711935&m)>>>0&16711935)>>>0}function Ue(c,m){C[m]=function(b,_,R,q,$,W,K){var te;for(te=0;te<$;++te){var ye=C[c](W[K+te-1],R,q+te);W[K+te]=Ie(b[_+te],ye)}}}function Ye(){this.ud=this.hd=this.jd=0}function We(c,m){return((4278124286&(c^m))>>>1)+(c&m)>>>0}function st(c){return 0<=c&&256>c?c:0>c?0:255<c?255:void 0}function ot(c,m){return st(c+(c-m+.5>>1))}function mt(c,m,b){return Math.abs(m-b)-Math.abs(c-b)}function rt(c,m,b,_,R,q,$){for(_=q[$-1],b=0;b<R;++b)q[$+b]=_=Ie(c[m+b],_)}function Be(c,m,b,_,R){var q;for(q=0;q<b;++q){var $=c[m+q],W=$>>8&255,K=16711935&(K=(K=16711935&$)+((W<<16)+W));_[R+q]=(4278255360&$)+K>>>0}}function ft(c,m){m.jd=c>>0&255,m.hd=c>>8&255,m.ud=c>>16&255}function pt(c,m,b,_,R,q){var $;for($=0;$<_;++$){var W=m[b+$],K=W>>>8,te=W,ye=255&(ye=(ye=W>>>16)+((c.jd<<24>>24)*(K<<24>>24)>>>5));te=255&(te=(te=te+((c.hd<<24>>24)*(K<<24>>24)>>>5))+((c.ud<<24>>24)*(ye<<24>>24)>>>5)),R[q+$]=(4278255360&W)+(ye<<16)+te}}function Ct(c,m,b,_,R){C[m]=function(q,$,W,K,te,ye,Pe,_e,Ne){for(K=Pe;K<_e;++K)for(Pe=0;Pe<Ne;++Pe)te[ye++]=R(W[_(q[$++])])},C[c]=function(q,$,W,K,te,ye,Pe){var _e=8>>q.b,Ne=q.Ea,$e=q.K[0],Te=q.w;if(8>_e)for(q=(1<<q.b)-1,Te=(1<<_e)-1;$<W;++$){var be,je=0;for(be=0;be<Ne;++be)be&q||(je=_(K[te++])),ye[Pe++]=R($e[je&Te]),je>>=_e}else C["VP8LMapColor"+b](K,te,$e,Te,ye,Pe,$,W,Ne)}}function Je(c,m,b,_,R){for(b=m+b;m<b;){var q=c[m++];_[R++]=q>>16&255,_[R++]=q>>8&255,_[R++]=q>>0&255}}function Xt(c,m,b,_,R){for(b=m+b;m<b;){var q=c[m++];_[R++]=q>>16&255,_[R++]=q>>8&255,_[R++]=q>>0&255,_[R++]=q>>24&255}}function Lt(c,m,b,_,R){for(b=m+b;m<b;){var q=($=c[m++])>>16&240|$>>12&15,$=$>>0&240|$>>28&15;_[R++]=q,_[R++]=$}}function Ps(c,m,b,_,R){for(b=m+b;m<b;){var q=($=c[m++])>>16&248|$>>13&7,$=$>>5&224|$>>3&31;_[R++]=q,_[R++]=$}}function Qt(c,m,b,_,R){for(b=m+b;m<b;){var q=c[m++];_[R++]=q>>0&255,_[R++]=q>>8&255,_[R++]=q>>16&255}}function Gt(c,m,b,_,R,q){if(q==0)for(b=m+b;m<b;)Le(_,((q=c[m++])[0]>>24|q[1]>>8&65280|q[2]<<8&16711680|q[3]<<24)>>>0),R+=32;else a(_,R,c,m,b)}function nr(c,m){C[m][0]=C[c+"0"],C[m][1]=C[c+"1"],C[m][2]=C[c+"2"],C[m][3]=C[c+"3"],C[m][4]=C[c+"4"],C[m][5]=C[c+"5"],C[m][6]=C[c+"6"],C[m][7]=C[c+"7"],C[m][8]=C[c+"8"],C[m][9]=C[c+"9"],C[m][10]=C[c+"10"],C[m][11]=C[c+"11"],C[m][12]=C[c+"12"],C[m][13]=C[c+"13"],C[m][14]=C[c+"0"],C[m][15]=C[c+"0"]}function Yt(c){return c==Bu||c==Uu||c==$c||c==qu}function ir(){this.eb=[],this.size=this.A=this.fb=0}function ss(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Fs(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ir,this.f.kb=new ss,this.sd=null}function Vs(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Ut(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function wt(c){return alert("todo:WebPSamplerProcessPlane"),c.T}function Ze(c,m){var b=c.T,_=m.ba.f.RGBA,R=_.eb,q=_.fb+c.ka*_.A,$=ra[m.ba.S],W=c.y,K=c.O,te=c.f,ye=c.N,Pe=c.ea,_e=c.W,Ne=m.cc,$e=m.dc,Te=m.Mc,be=m.Nc,je=c.ka,qe=c.ka+c.T,He=c.U,ze=He+1>>1;for(je==0?$(W,K,null,null,te,ye,Pe,_e,te,ye,Pe,_e,R,q,null,null,He):($(m.ec,m.fc,W,K,Ne,$e,Te,be,te,ye,Pe,_e,R,q-_.A,R,q,He),++b);je+2<qe;je+=2)Ne=te,$e=ye,Te=Pe,be=_e,ye+=c.Rc,_e+=c.Rc,q+=2*_.A,$(W,(K+=2*c.fa)-c.fa,W,K,Ne,$e,Te,be,te,ye,Pe,_e,R,q-_.A,R,q,He);return K+=c.fa,c.j+qe<c.o?(a(m.ec,m.fc,W,K,He),a(m.cc,m.dc,te,ye,ze),a(m.Mc,m.Nc,Pe,_e,ze),b--):1&qe||$(W,K,null,null,te,ye,Pe,_e,te,ye,Pe,_e,R,q+_.A,null,null,He),b}function zt(c,m,b){var _=c.F,R=[c.J];if(_!=null){var q=c.U,$=m.ba.S,W=$==zc||$==$c;m=m.ba.f.RGBA;var K=[0],te=c.ka;K[0]=c.T,c.Kb&&(te==0?--K[0]:(--te,R[0]-=c.width),c.j+c.ka+c.T==c.o&&(K[0]=c.o-c.j-te));var ye=m.eb;te=m.fb+te*m.A,c=Cs(_,R[0],c.width,q,K,ye,te+(W?0:3),m.A),t(b==K),c&&Yt($)&&ta(ye,te,W,q,K,m.A)}return 0}function vt(c){var m=c.ma,b=m.ba.S,_=11>b,R=b==Uc||b==qc||b==zc||b==Fu||b==12||Yt(b);if(m.memory=null,m.Ib=null,m.Jb=null,m.Nd=null,!vl(m.Oa,c,R?11:12))return 0;if(R&&Yt(b)&&Ve(),c.da)alert("todo:use_scaling");else{if(_){if(m.Ib=wt,c.Kb){if(b=c.U+1>>1,m.memory=i(c.U+2*b),m.memory==null)return 0;m.ec=m.memory,m.fc=0,m.cc=m.ec,m.dc=m.fc+c.U,m.Mc=m.cc,m.Nc=m.dc+b,m.Ib=Ze,Ve()}}else alert("todo:EmitYUV");R&&(m.Jb=zt,_&&ke())}if(_&&!mf){for(c=0;256>c;++c)uv[c]=89858*(c-128)+Hc>>Wc,fv[c]=-22014*(c-128)+Hc,mv[c]=-45773*(c-128),hv[c]=113618*(c-128)+Hc>>Wc;for(c=Al;c<Wu;++c)m=76283*(c-16)+Hc>>Wc,pv[c-Al]=Hr(m,255),gv[c-Al]=Hr(m+8>>4,15);mf=1}return 1}function js(c){var m=c.ma,b=c.U,_=c.T;return t(!(1&c.ka)),0>=b||0>=_?0:(b=m.Ib(c,m),m.Jb!=null&&m.Jb(c,m,b),m.Dc+=b,1)}function Ns(c){c.ma.memory=null}function ut(c,m,b,_){return ve(c,8)!=47?0:(m[0]=ve(c,14)+1,b[0]=ve(c,14)+1,_[0]=ve(c,1),ve(c,3)!=0?0:!c.h)}function fe(c,m){if(4>c)return c+1;var b=c-2>>1;return(2+(1&c)<<b)+ve(m,b)+1}function De(c,m){return 120<m?m-120:1<=(b=((b=X2[m-1])>>4)*c+(8-(15&b)))?b:1;var b}function ue(c,m,b){var _=U(b),R=c[m+=255&_].g-8;return 0<R&&(re(b,b.u+8),_=U(b),m+=c[m].value,m+=_&(1<<R)-1),re(b,b.u+c[m].g),c[m].value}function Se(c,m,b){return b.g+=c.g,b.value+=c.value<<m>>>0,t(8>=b.g),c.g}function Oe(c,m,b){var _=c.xc;return t((m=_==0?0:c.vc[c.md*(b>>_)+(m>>_)])<c.Wb),c.Ya[m]}function Ge(c,m,b,_){var R=c.ab,q=c.c*m,$=c.C;m=$+m;var W=b,K=_;for(_=c.Ta,b=c.Ua;0<R--;){var te=c.gc[R],ye=$,Pe=m,_e=W,Ne=K,$e=(K=_,W=b,te.Ea);switch(t(ye<Pe),t(Pe<=te.nc),te.hc){case 2:Tc(_e,Ne,(Pe-ye)*$e,K,W);break;case 0:var Te=ye,be=Pe,je=K,qe=W,He=(nt=te).Ea;Te==0&&(Ru(_e,Ne,null,null,1,je,qe),rt(_e,Ne+1,0,0,He-1,je,qe+1),Ne+=He,qe+=He,++Te);for(var ze=1<<nt.b,ct=ze-1,et=Fe(He,nt.b),bt=nt.K,nt=nt.w+(Te>>nt.b)*et;Te<be;){var rs=bt,os=nt,ts=1;for(wl(_e,Ne,je,qe-He,1,je,qe);ts<He;){var Jt=(ts&~ct)+ze;Jt>He&&(Jt=He),(0,yn[rs[os++]>>8&15])(_e,Ne+ +ts,je,qe+ts-He,Jt-ts,je,qe+ts),ts=Jt}Ne+=He,qe+=He,++Te&ct||(nt+=et)}Pe!=te.nc&&a(K,W-$e,K,W+(Pe-ye-1)*$e,$e);break;case 1:for($e=_e,be=Ne,He=(_e=te.Ea)-(qe=_e&~(je=(Ne=1<<te.b)-1)),Te=Fe(_e,te.b),ze=te.K,te=te.w+(ye>>te.b)*Te;ye<Pe;){for(ct=ze,et=te,bt=new Ye,nt=be+qe,rs=be+_e;be<nt;)ft(ct[et++],bt),di(bt,$e,be,Ne,K,W),be+=Ne,W+=Ne;be<rs&&(ft(ct[et++],bt),di(bt,$e,be,He,K,W),be+=He,W+=He),++ye&je||(te+=Te)}break;case 3:if(_e==K&&Ne==W&&0<te.b){for(be=K,_e=$e=W+(Pe-ye)*$e-(qe=(Pe-ye)*Fe(te.Ea,te.b)),Ne=K,je=W,Te=[],qe=(He=qe)-1;0<=qe;--qe)Te[qe]=Ne[je+qe];for(qe=He-1;0<=qe;--qe)be[_e+qe]=Te[qe];Qr(te,ye,Pe,K,$e,K,W)}else Qr(te,ye,Pe,_e,Ne,K,W)}W=_,K=b}K!=b&&a(_,b,W,K,q)}function gt(c,m){var b=c.V,_=c.Ba+c.c*c.C,R=m-c.C;if(t(m<=c.l.o),t(16>=R),0<R){var q=c.l,$=c.Ta,W=c.Ua,K=q.width;if(Ge(c,R,b,_),R=W=[W],t((b=c.C)<(_=m)),t(q.v<q.va),_>q.o&&(_=q.o),b<q.j){var te=q.j-b;b=q.j,R[0]+=te*K}if(b>=_?b=0:(R[0]+=4*q.v,q.ka=b-q.j,q.U=q.va-q.v,q.T=_-b,b=1),b){if(W=W[0],11>(b=c.ca).S){var ye=b.f.RGBA,Pe=(_=b.S,R=q.U,q=q.T,te=ye.eb,ye.A),_e=q;for(ye=ye.fb+c.Ma*ye.A;0<_e--;){var Ne=$,$e=W,Te=R,be=te,je=ye;switch(_){case Bc:Or(Ne,$e,Te,be,je);break;case Uc:Cr(Ne,$e,Te,be,je);break;case Bu:Cr(Ne,$e,Te,be,je),ta(be,je,0,Te,1,0);break;case rf:Xa(Ne,$e,Te,be,je);break;case qc:Gt(Ne,$e,Te,be,je,1);break;case Uu:Gt(Ne,$e,Te,be,je,1),ta(be,je,0,Te,1,0);break;case zc:Gt(Ne,$e,Te,be,je,0);break;case $c:Gt(Ne,$e,Te,be,je,0),ta(be,je,1,Te,1,0);break;case Fu:bn(Ne,$e,Te,be,je);break;case qu:bn(Ne,$e,Te,be,je),ks(be,je,Te,1,0);break;case af:Ka(Ne,$e,Te,be,je);break;default:t(0)}W+=K,ye+=Pe}c.Ma+=q}else alert("todo:EmitRescaledRowsYUVA");t(c.Ma<=b.height)}}c.C=m,t(c.C<=c.i)}function Ft(c){var m;if(0<c.ua)return 0;for(m=0;m<c.Wb;++m){var b=c.Ya[m].G,_=c.Ya[m].H;if(0<b[1][_[1]+0].g||0<b[2][_[2]+0].g||0<b[3][_[3]+0].g)return 0}return 1}function St(c,m,b,_,R,q){if(c.Z!=0){var $=c.qd,W=c.rd;for(t(Sn[c.Z]!=null);m<b;++m)Sn[c.Z]($,W,_,R,_,R,q),$=_,W=R,R+=q;c.qd=$,c.rd=W}}function Tt(c,m){var b=c.l.ma,_=b.Z==0||b.Z==1?c.l.j:c.C;if(_=c.C<_?_:c.C,t(m<=c.l.o),m>_){var R=c.l.width,q=b.ca,$=b.tb+R*_,W=c.V,K=c.Ba+c.c*_,te=c.gc;t(c.ab==1),t(te[0].hc==3),Mc(te[0],_,m,W,K,q,$),St(b,_,m,q,$,R)}c.C=c.Ma=m}function is(c,m,b,_,R,q,$){var W=c.$/_,K=c.$%_,te=c.m,ye=c.s,Pe=b+c.$,_e=Pe;R=b+_*R;var Ne=b+_*q,$e=280+ye.ua,Te=c.Pb?W:16777216,be=0<ye.ua?ye.Wa:null,je=ye.wc,qe=Pe<Ne?Oe(ye,K,W):null;t(c.C<q),t(Ne<=R);var He=!1;e:for(;;){for(;He||Pe<Ne;){var ze=0;if(W>=Te){var ct=Pe-b;t((Te=c).Pb),Te.wd=Te.m,Te.xd=ct,0<Te.s.ua&&ee(Te.s.Wa,Te.s.vb),Te=W+Z2}if(K&je||(qe=Oe(ye,K,W)),t(qe!=null),qe.Qb&&(m[Pe]=qe.qb,He=!0),!He)if(G(te),qe.jc){ze=te,ct=m;var et=Pe,bt=qe.pd[U(ze)&lr-1];t(qe.jc),256>bt.g?(re(ze,ze.u+bt.g),ct[et]=bt.value,ze=0):(re(ze,ze.u+bt.g-256),t(256<=bt.value),ze=bt.value),ze==0&&(He=!0)}else ze=ue(qe.G[0],qe.H[0],te);if(te.h)break;if(He||256>ze){if(!He)if(qe.nd)m[Pe]=(qe.qb|ze<<8)>>>0;else{if(G(te),He=ue(qe.G[1],qe.H[1],te),G(te),ct=ue(qe.G[2],qe.H[2],te),et=ue(qe.G[3],qe.H[3],te),te.h)break;m[Pe]=(et<<24|He<<16|ze<<8|ct)>>>0}if(He=!1,++Pe,++K>=_&&(K=0,++W,$!=null&&W<=q&&!(W%16)&&$(c,W),be!=null))for(;_e<Pe;)ze=m[_e++],be.X[(506832829*ze&4294967295)>>>be.Mb]=ze}else if(280>ze){if(ze=fe(ze-256,te),ct=ue(qe.G[4],qe.H[4],te),G(te),ct=De(_,ct=fe(ct,te)),te.h)break;if(Pe-b<ct||R-Pe<ze)break e;for(et=0;et<ze;++et)m[Pe+et]=m[Pe+et-ct];for(Pe+=ze,K+=ze;K>=_;)K-=_,++W,$!=null&&W<=q&&!(W%16)&&$(c,W);if(t(Pe<=R),K&je&&(qe=Oe(ye,K,W)),be!=null)for(;_e<Pe;)ze=m[_e++],be.X[(506832829*ze&4294967295)>>>be.Mb]=ze}else{if(!(ze<$e))break e;for(He=ze-280,t(be!=null);_e<Pe;)ze=m[_e++],be.X[(506832829*ze&4294967295)>>>be.Mb]=ze;ze=Pe,t(!(He>>>(ct=be).Xa)),m[ze]=ct.X[He],He=!0}He||t(te.h==V(te))}if(c.Pb&&te.h&&Pe<R)t(c.m.h),c.a=5,c.m=c.wd,c.$=c.xd,0<c.s.ua&&ee(c.s.vb,c.s.Wa);else{if(te.h)break e;$!=null&&$(c,W>q?q:W),c.a=0,c.$=Pe-b}return 1}return c.a=3,0}function Ss(c){t(c!=null),c.vc=null,c.yc=null,c.Ya=null;var m=c.Wa;m!=null&&(m.X=null),c.vb=null,t(c!=null)}function or(){var c=new Eu;return c==null?null:(c.a=0,c.xb=lf,nr("Predictor","VP8LPredictors"),nr("Predictor","VP8LPredictors_C"),nr("PredictorAdd","VP8LPredictorsAdd"),nr("PredictorAdd","VP8LPredictorsAdd_C"),Tc=Be,di=pt,Or=Je,Cr=Xt,bn=Lt,Ka=Ps,Xa=Qt,C.VP8LMapColor32b=io,C.VP8LMapColor8b=Ec,c)}function kr(c,m,b,_,R){var q=1,$=[c],W=[m],K=_.m,te=_.s,ye=null,Pe=0;e:for(;;){if(b)for(;q&&ve(K,1);){var _e=$,Ne=W,$e=_,Te=1,be=$e.m,je=$e.gc[$e.ab],qe=ve(be,2);if($e.Oc&1<<qe)q=0;else{switch($e.Oc|=1<<qe,je.hc=qe,je.Ea=_e[0],je.nc=Ne[0],je.K=[null],++$e.ab,t(4>=$e.ab),qe){case 0:case 1:je.b=ve(be,3)+2,Te=kr(Fe(je.Ea,je.b),Fe(je.nc,je.b),0,$e,je.K),je.K=je.K[0];break;case 3:var He,ze=ve(be,8)+1,ct=16<ze?0:4<ze?1:2<ze?2:3;if(_e[0]=Fe(je.Ea,ct),je.b=ct,He=Te=kr(ze,1,0,$e,je.K)){var et,bt=ze,nt=je,rs=1<<(8>>nt.b),os=i(rs);if(os==null)He=0;else{var ts=nt.K[0],Jt=nt.w;for(os[0]=nt.K[0][0],et=1;et<1*bt;++et)os[et]=Ie(ts[Jt+et],os[et-1]);for(;et<4*rs;++et)os[et]=0;nt.K[0]=null,nt.K[0]=os,He=1}}Te=He;break;case 2:break;default:t(0)}q=Te}}if($=$[0],W=W[0],q&&ve(K,1)&&!(q=1<=(Pe=ve(K,4))&&11>=Pe)){_.a=3;break e}var vs;if(vs=q)t:{var ms,qt,Gs,Fr=_,Js=$,Br=W,ls=Pe,Yr=b,Gr=Fr.m,tr=Fr.s,cr=[null],Pr=1,aa=0,Ea=Q2[ls];s:for(;;){if(Yr&&ve(Gr,1)){var sr=ve(Gr,3)+2,tn=Fe(Js,sr),pi=Fe(Br,sr),ho=tn*pi;if(!kr(tn,pi,0,Fr,cr))break s;for(cr=cr[0],tr.xc=sr,ms=0;ms<ho;++ms){var kn=cr[ms]>>8&65535;cr[ms]=kn,kn>=Pr&&(Pr=kn+1)}}if(Gr.h)break s;for(qt=0;5>qt;++qt){var Es=nf[qt];!qt&&0<ls&&(Es+=1<<ls),aa<Es&&(aa=Es)}var Hu=o(Pr*Ea,S),gf=Pr,xf=o(gf,M);if(xf==null)var Yc=null;else t(65536>=gf),Yc=xf;var Pl=i(aa);if(Yc==null||Pl==null||Hu==null){Fr.a=1;break s}var Gc=Hu;for(ms=Gs=0;ms<Pr;++ms){var ga=Yc[ms],mo=ga.G,fo=ga.H,vf=0,Jc=1,yf=0;for(qt=0;5>qt;++qt){Es=nf[qt],mo[qt]=Gc,fo[qt]=Gs,!qt&&0<ls&&(Es+=1<<ls);a:{var Kc,Vu=Es,Xc=Fr,_l=Pl,yv=Gc,bv=Gs,Yu=0,Cn=Xc.m,wv=ve(Cn,1);if(n(_l,0,0,Vu),wv){var jv=ve(Cn,1)+1,Nv=ve(Cn,1),bf=ve(Cn,Nv==0?1:8);_l[bf]=1,jv==2&&(_l[bf=ve(Cn,8)]=1);var Qc=1}else{var wf=i(19),jf=ve(Cn,4)+4;if(19<jf){Xc.a=3;var Zc=0;break a}for(Kc=0;Kc<jf;++Kc)wf[K2[Kc]]=ve(Cn,3);var Gu=void 0,Ll=void 0,Nf=Xc,Sv=wf,ed=Vu,Sf=_l,Ju=0,An=Nf.m,kf=8,Cf=o(128,S);r:for(;y(Cf,0,7,Sv,19);){if(ve(An,1)){var kv=2+2*ve(An,3);if((Gu=2+ve(An,kv))>ed)break r}else Gu=ed;for(Ll=0;Ll<ed&&Gu--;){G(An);var Af=Cf[0+(127&U(An))];re(An,An.u+Af.g);var po=Af.value;if(16>po)Sf[Ll++]=po,po!=0&&(kf=po);else{var Cv=po==16,Pf=po-16,Av=G2[Pf],_f=ve(An,Y2[Pf])+Av;if(Ll+_f>ed)break r;for(var Pv=Cv?kf:0;0<_f--;)Sf[Ll++]=Pv}}Ju=1;break r}Ju||(Nf.a=3),Qc=Ju}(Qc=Qc&&!Cn.h)&&(Yu=y(yv,bv,8,_l,Vu)),Qc&&Yu!=0?Zc=Yu:(Xc.a=3,Zc=0)}if(Zc==0)break s;if(Jc&&J2[qt]==1&&(Jc=Gc[Gs].g==0),vf+=Gc[Gs].g,Gs+=Zc,3>=qt){var Il,Ku=Pl[0];for(Il=1;Il<Es;++Il)Pl[Il]>Ku&&(Ku=Pl[Il]);yf+=Ku}}if(ga.nd=Jc,ga.Qb=0,Jc&&(ga.qb=(mo[3][fo[3]+0].value<<24|mo[1][fo[1]+0].value<<16|mo[2][fo[2]+0].value)>>>0,vf==0&&256>mo[0][fo[0]+0].value&&(ga.Qb=1,ga.qb+=mo[0][fo[0]+0].value<<8)),ga.jc=!ga.Qb&&6>yf,ga.jc){var td,sn=ga;for(td=0;td<lr;++td){var Pn=td,_n=sn.pd[Pn],sd=sn.G[0][sn.H[0]+Pn];256<=sd.value?(_n.g=sd.g+256,_n.value=sd.value):(_n.g=0,_n.value=0,Pn>>=Se(sd,8,_n),Pn>>=Se(sn.G[1][sn.H[1]+Pn],16,_n),Pn>>=Se(sn.G[2][sn.H[2]+Pn],0,_n),Se(sn.G[3][sn.H[3]+Pn],24,_n))}}}tr.vc=cr,tr.Wb=Pr,tr.Ya=Yc,tr.yc=Hu,vs=1;break t}vs=0}if(!(q=vs)){_.a=3;break e}if(0<Pe){if(te.ua=1<<Pe,!oe(te.Wa,Pe)){_.a=1,q=0;break e}}else te.ua=0;var Xu=_,Lf=$,_v=W,Qu=Xu.s,Zu=Qu.xc;if(Xu.c=Lf,Xu.i=_v,Qu.md=Fe(Lf,Zu),Qu.wc=Zu==0?-1:(1<<Zu)-1,b){_.xb=iv;break e}if((ye=i($*W))==null){_.a=1,q=0;break e}q=(q=is(_,ye,0,$,W,W,null))&&!K.h;break e}return q?(R!=null?R[0]=ye:(t(ye==null),t(b)),_.$=0,b||Ss(te)):Ss(te),q}function Ia(c,m){var b=c.c*c.i,_=b+m+16*m;return t(c.c<=m),c.V=i(_),c.V==null?(c.Ta=null,c.Ua=0,c.a=1,0):(c.Ta=c.V,c.Ua=c.Ba+b+m,1)}function Ya(c,m){var b=c.C,_=m-b,R=c.V,q=c.Ba+c.c*b;for(t(m<=c.l.o);0<_;){var $=16<_?16:_,W=c.l.ma,K=c.l.width,te=K*$,ye=W.ca,Pe=W.tb+K*b,_e=c.Ta,Ne=c.Ua;Ge(c,$,R,q),qs(_e,Ne,ye,Pe,te),St(W,b,b+$,ye,Pe,K),_-=$,R+=$*c.c,b+=$}t(b==m),c.C=c.Ma=m}function zi(){this.ub=this.yd=this.td=this.Rb=0}function $i(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Wi(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function mc(){this.Yb=function(){var c=[];return function m(b,_,R){for(var q=R[_],$=0;$<q&&(b.push(R.length>_+1?[]:0),!(R.length<_+1));$++)m(b[$],_+1,R)}(c,0,[3,11]),c}()}function hu(){this.jb=i(3),this.Wc=l([4,8],mc),this.Xc=l([4,17],mc)}function mu(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function Hi(){this.ld=this.La=this.dd=this.tc=0}function fc(){this.Na=this.la=0}function fu(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function sl(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function pu(){this.uc=this.M=this.Nb=0,this.wa=Array(new Hi),this.Y=0,this.ya=Array(new sl),this.aa=0,this.l=new Vi}function pc(){this.y=i(16),this.f=i(8),this.ea=i(8)}function gu(){this.cb=this.a=0,this.sc="",this.m=new Ae,this.Od=new zi,this.Kc=new $i,this.ed=new mu,this.Qa=new Wi,this.Ic=this.$c=this.Aa=0,this.D=new pu,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,Ae),this.ia=0,this.pb=o(4,fu),this.Pa=new hu,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new pc),this.Hd=0,this.rb=Array(new fc),this.sb=0,this.wa=Array(new Hi),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new sl),this.L=this.aa=0,this.gd=l([4,2],Hi),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Vi(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function xu(){var c=new gu;return c!=null&&(c.a=0,c.sc="OK",c.cb=0,c.Xb=0,Cl||(Cl=vc)),c}function Bs(c,m,b){return c.a==0&&(c.a=m,c.sc=b,c.cb=0),0}function gc(c,m,b){return 3<=b&&c[m+0]==157&&c[m+1]==1&&c[m+2]==42}function xc(c,m){if(c==null)return 0;if(c.a=0,c.sc="OK",m==null)return Bs(c,2,"null VP8Io passed to VP8GetHeaders()");var b=m.data,_=m.w,R=m.ha;if(4>R)return Bs(c,7,"Truncated header.");var q=b[_+0]|b[_+1]<<8|b[_+2]<<16,$=c.Od;if($.Rb=!(1&q),$.td=q>>1&7,$.yd=q>>4&1,$.ub=q>>5,3<$.td)return Bs(c,3,"Incorrect keyframe parameters.");if(!$.yd)return Bs(c,4,"Frame not displayable.");_+=3,R-=3;var W=c.Kc;if($.Rb){if(7>R)return Bs(c,7,"cannot parse picture header");if(!gc(b,_,R))return Bs(c,3,"Bad code word");W.c=16383&(b[_+4]<<8|b[_+3]),W.Td=b[_+4]>>6,W.i=16383&(b[_+6]<<8|b[_+5]),W.Ud=b[_+6]>>6,_+=7,R-=7,c.za=W.c+15>>4,c.Ub=W.i+15>>4,m.width=W.c,m.height=W.i,m.Da=0,m.j=0,m.v=0,m.va=m.width,m.o=m.height,m.da=0,m.ib=m.width,m.hb=m.height,m.U=m.width,m.T=m.height,n((q=c.Pa).jb,0,255,q.jb.length),t((q=c.Qa)!=null),q.Cb=0,q.Bb=0,q.Fb=1,n(q.Zb,0,0,q.Zb.length),n(q.Lb,0,0,q.Lb)}if($.ub>R)return Bs(c,7,"bad partition length");J(q=c.m,b,_,$.ub),_+=$.ub,R-=$.ub,$.Rb&&(W.Ld=Z(q),W.Kd=Z(q)),W=c.Qa;var K,te=c.Pa;if(t(q!=null),t(W!=null),W.Cb=Z(q),W.Cb){if(W.Bb=Z(q),Z(q)){for(W.Fb=Z(q),K=0;4>K;++K)W.Zb[K]=Z(q)?he(q,7):0;for(K=0;4>K;++K)W.Lb[K]=Z(q)?he(q,6):0}if(W.Bb)for(K=0;3>K;++K)te.jb[K]=Z(q)?ae(q,8):255}else W.Bb=0;if(q.Ka)return Bs(c,3,"cannot parse segment header");if((W=c.ed).zd=Z(q),W.Tb=ae(q,6),W.wb=ae(q,3),W.Pc=Z(q),W.Pc&&Z(q)){for(te=0;4>te;++te)Z(q)&&(W.vd[te]=he(q,6));for(te=0;4>te;++te)Z(q)&&(W.od[te]=he(q,6))}if(c.L=W.Tb==0?0:W.zd?1:2,q.Ka)return Bs(c,3,"cannot parse filter header");var ye=R;if(R=K=_,_=K+ye,W=ye,c.Xb=(1<<ae(c.m,2))-1,ye<3*(te=c.Xb))b=7;else{for(K+=3*te,W-=3*te,ye=0;ye<te;++ye){var Pe=b[R+0]|b[R+1]<<8|b[R+2]<<16;Pe>W&&(Pe=W),J(c.Jc[+ye],b,K,Pe),K+=Pe,W-=Pe,R+=3}J(c.Jc[+te],b,K,W),b=K<_?0:5}if(b!=0)return Bs(c,b,"cannot parse partitions");for(b=ae(K=c.m,7),R=Z(K)?he(K,4):0,_=Z(K)?he(K,4):0,W=Z(K)?he(K,4):0,te=Z(K)?he(K,4):0,K=Z(K)?he(K,4):0,ye=c.Qa,Pe=0;4>Pe;++Pe){if(ye.Cb){var _e=ye.Zb[Pe];ye.Fb||(_e+=b)}else{if(0<Pe){c.pb[Pe]=c.pb[0];continue}_e=b}var Ne=c.pb[Pe];Ne.Sc[0]=zu[Hr(_e+R,127)],Ne.Sc[1]=$u[Hr(_e+0,127)],Ne.Eb[0]=2*zu[Hr(_e+_,127)],Ne.Eb[1]=101581*$u[Hr(_e+W,127)]>>16,8>Ne.Eb[1]&&(Ne.Eb[1]=8),Ne.Qc[0]=zu[Hr(_e+te,117)],Ne.Qc[1]=$u[Hr(_e+K,127)],Ne.lc=_e+K}if(!$.Rb)return Bs(c,4,"Not a key frame.");for(Z(q),$=c.Pa,b=0;4>b;++b){for(R=0;8>R;++R)for(_=0;3>_;++_)for(W=0;11>W;++W)te=de(q,av[b][R][_][W])?ae(q,8):sv[b][R][_][W],$.Wc[b][R].Yb[_][W]=te;for(R=0;17>R;++R)$.Xc[b][R]=$.Wc[b][nv[R]]}return c.kc=Z(q),c.kc&&(c.Bd=ae(q,8)),c.cb=1}function vc(c,m,b,_,R,q,$){var W=m[R].Yb[b];for(b=0;16>R;++R){if(!de(c,W[b+0]))return R;for(;!de(c,W[b+1]);)if(W=m[++R].Yb[0],b=0,R==16)return 16;var K=m[R+1].Yb;if(de(c,W[b+2])){var te=c,ye=0;if(de(te,(_e=W)[(Pe=b)+3]))if(de(te,_e[Pe+6])){for(W=0,Pe=2*(ye=de(te,_e[Pe+8]))+(_e=de(te,_e[Pe+9+ye])),ye=0,_e=ev[Pe];_e[W];++W)ye+=ye+de(te,_e[W]);ye+=3+(8<<Pe)}else de(te,_e[Pe+7])?(ye=7+2*de(te,165),ye+=de(te,145)):ye=5+de(te,159);else ye=de(te,_e[Pe+4])?3+de(te,_e[Pe+5]):2;W=K[2]}else ye=1,W=K[1];K=$+tv[R],0>(te=c).b&&Y(te);var Pe,_e=te.b,Ne=(Pe=te.Ca>>1)-(te.I>>_e)>>31;--te.b,te.Ca+=Ne,te.Ca|=1,te.I-=(Pe+1&Ne)<<_e,q[K]=((ye^Ne)-Ne)*_[(0<R)+0]}return 16}function rl(c){var m=c.rb[c.sb-1];m.la=0,m.Na=0,n(c.zc,0,0,c.zc.length),c.ja=0}function vu(c,m){if(c==null)return 0;if(m==null)return Bs(c,2,"NULL VP8Io parameter in VP8Decode().");if(!c.cb&&!xc(c,m))return 0;if(t(c.cb),m.ac==null||m.ac(m)){m.ob&&(c.L=0);var b=Vc[c.L];if(c.L==2?(c.yb=0,c.zb=0):(c.yb=m.v-b>>4,c.zb=m.j-b>>4,0>c.yb&&(c.yb=0),0>c.zb&&(c.zb=0)),c.Va=m.o+15+b>>4,c.Hb=m.va+15+b>>4,c.Hb>c.za&&(c.Hb=c.za),c.Va>c.Ub&&(c.Va=c.Ub),0<c.L){var _=c.ed;for(b=0;4>b;++b){var R;if(c.Qa.Cb){var q=c.Qa.Lb[b];c.Qa.Fb||(q+=_.Tb)}else q=_.Tb;for(R=0;1>=R;++R){var $=c.gd[b][R],W=q;if(_.Pc&&(W+=_.vd[0],R&&(W+=_.od[0])),0<(W=0>W?0:63<W?63:W)){var K=W;0<_.wb&&(K=4<_.wb?K>>2:K>>1)>9-_.wb&&(K=9-_.wb),1>K&&(K=1),$.dd=K,$.tc=2*W+K,$.ld=40<=W?2:15<=W?1:0}else $.tc=0;$.La=R}}}b=0}else Bs(c,6,"Frame setup failed"),b=c.a;if(b=b==0){if(b){c.$c=0,0<c.Aa||(c.Ic=vv);e:{b=c.Ic,_=4*(K=c.za);var te=32*K,ye=K+1,Pe=0<c.L?K*(0<c.Aa?2:1):0,_e=(c.Aa==2?2:1)*K;if(($=_+832+(R=3*(16*b+Vc[c.L])/2*te)+(q=c.Fa!=null&&0<c.Fa.length?c.Kc.c*c.Kc.i:0))!=$)b=0;else{if($>c.Vb){if(c.Vb=0,c.Ec=i($),c.Fc=0,c.Ec==null){b=Bs(c,1,"no memory during frame initialization.");break e}c.Vb=$}$=c.Ec,W=c.Fc,c.Ac=$,c.Bc=W,W+=_,c.Gd=o(te,pc),c.Hd=0,c.rb=o(ye+1,fc),c.sb=1,c.wa=Pe?o(Pe,Hi):null,c.Y=0,c.D.Nb=0,c.D.wa=c.wa,c.D.Y=c.Y,0<c.Aa&&(c.D.Y+=K),t(!0),c.oc=$,c.pc=W,W+=832,c.ya=o(_e,sl),c.aa=0,c.D.ya=c.ya,c.D.aa=c.aa,c.Aa==2&&(c.D.aa+=K),c.R=16*K,c.B=8*K,K=(te=Vc[c.L])*c.R,te=te/2*c.B,c.sa=$,c.ta=W+K,c.qa=c.sa,c.ra=c.ta+16*b*c.R+te,c.Ha=c.qa,c.Ia=c.ra+8*b*c.B+te,c.$c=0,W+=R,c.mb=q?$:null,c.nb=q?W:null,t(W+q<=c.Fc+c.Vb),rl(c),n(c.Ac,c.Bc,0,_),b=1}}if(b){if(m.ka=0,m.y=c.sa,m.O=c.ta,m.f=c.qa,m.N=c.ra,m.ea=c.Ha,m.Vd=c.Ia,m.fa=c.R,m.Rc=c.B,m.F=null,m.J=0,!Oc){for(b=-255;255>=b;++b)Xs[255+b]=0>b?-b:b;for(b=-1020;1020>=b;++b)Za[1020+b]=-128>b?-128:127<b?127:b;for(b=-112;112>=b;++b)kl[112+b]=-16>b?-16:15<b?15:b;for(b=-255;510>=b;++b)uo[255+b]=0>b?0:255<b?255:b;Oc=1}oo=wu,Qa=yu,jl=bc,Ar=bu,Zr=wc,Us=yc,lo=cl,Rc=li,Nl=Mu,ui=dl,hi=Tu,wn=Qi,mi=ul,co=Lc,fi=_c,jn=Ta,Sl=Ja,ea=Du,pa[0]=Da,pa[1]=ju,pa[2]=Cu,pa[3]=Au,pa[4]=Sc,pa[5]=Ki,pa[6]=kc,pa[7]=il,pa[8]=_u,pa[9]=Pu,Nn[0]=jc,Nn[1]=Su,Nn[2]=Ga,Nn[3]=Gi,Nn[4]=ur,Nn[5]=ku,Nn[6]=Nc,en[0]=gn,en[1]=Nu,en[2]=Lu,en[3]=ol,en[4]=oi,en[5]=Iu,en[6]=ll,b=1}else b=0}b&&(b=function(Ne,$e){for(Ne.M=0;Ne.M<Ne.Va;++Ne.M){var Te,be=Ne.Jc[Ne.M&Ne.Xb],je=Ne.m,qe=Ne;for(Te=0;Te<qe.za;++Te){var He=je,ze=qe,ct=ze.Ac,et=ze.Bc+4*Te,bt=ze.zc,nt=ze.ya[ze.aa+Te];if(ze.Qa.Bb?nt.$b=de(He,ze.Pa.jb[0])?2+de(He,ze.Pa.jb[2]):de(He,ze.Pa.jb[1]):nt.$b=0,ze.kc&&(nt.Ad=de(He,ze.Bd)),nt.Za=!de(He,145)+0,nt.Za){var rs=nt.Ob,os=0;for(ze=0;4>ze;++ze){var ts,Jt=bt[0+ze];for(ts=0;4>ts;++ts){Jt=rv[ct[et+ts]][Jt];for(var vs=of[de(He,Jt[0])];0<vs;)vs=of[2*vs+de(He,Jt[vs])];Jt=-vs,ct[et+ts]=Jt}a(rs,os,ct,et,4),os+=4,bt[0+ze]=Jt}}else Jt=de(He,156)?de(He,128)?1:3:de(He,163)?2:0,nt.Ob[0]=Jt,n(ct,et,Jt,4),n(bt,0,Jt,4);nt.Dd=de(He,142)?de(He,114)?de(He,183)?1:3:2:0}if(qe.m.Ka)return Bs(Ne,7,"Premature end-of-partition0 encountered.");for(;Ne.ja<Ne.za;++Ne.ja){if(qe=be,He=(je=Ne).rb[je.sb-1],ct=je.rb[je.sb+je.ja],Te=je.ya[je.aa+je.ja],et=je.kc?Te.Ad:0)He.la=ct.la=0,Te.Za||(He.Na=ct.Na=0),Te.Hc=0,Te.Gc=0,Te.ia=0;else{var ms,qt;if(He=ct,ct=qe,et=je.Pa.Xc,bt=je.ya[je.aa+je.ja],nt=je.pb[bt.$b],ze=bt.ad,rs=0,os=je.rb[je.sb-1],Jt=ts=0,n(ze,rs,0,384),bt.Za)var Gs=0,Fr=et[3];else{vs=i(16);var Js=He.Na+os.Na;if(Js=Cl(ct,et[1],Js,nt.Eb,0,vs,0),He.Na=os.Na=(0<Js)+0,1<Js)oo(vs,0,ze,rs);else{var Br=vs[0]+3>>3;for(vs=0;256>vs;vs+=16)ze[rs+vs]=Br}Gs=1,Fr=et[0]}var ls=15&He.la,Yr=15&os.la;for(vs=0;4>vs;++vs){var Gr=1&Yr;for(Br=qt=0;4>Br;++Br)ls=ls>>1|(Gr=(Js=Cl(ct,Fr,Js=Gr+(1&ls),nt.Sc,Gs,ze,rs))>Gs)<<7,qt=qt<<2|(3<Js?3:1<Js?2:ze[rs+0]!=0),rs+=16;ls>>=4,Yr=Yr>>1|Gr<<7,ts=(ts<<8|qt)>>>0}for(Fr=ls,Gs=Yr>>4,ms=0;4>ms;ms+=2){for(qt=0,ls=He.la>>4+ms,Yr=os.la>>4+ms,vs=0;2>vs;++vs){for(Gr=1&Yr,Br=0;2>Br;++Br)Js=Gr+(1&ls),ls=ls>>1|(Gr=0<(Js=Cl(ct,et[2],Js,nt.Qc,0,ze,rs)))<<3,qt=qt<<2|(3<Js?3:1<Js?2:ze[rs+0]!=0),rs+=16;ls>>=2,Yr=Yr>>1|Gr<<5}Jt|=qt<<4*ms,Fr|=ls<<4<<ms,Gs|=(240&Yr)<<ms}He.la=Fr,os.la=Gs,bt.Hc=ts,bt.Gc=Jt,bt.ia=43690&Jt?0:nt.ia,et=!(ts|Jt)}if(0<je.L&&(je.wa[je.Y+je.ja]=je.gd[Te.$b][Te.Za],je.wa[je.Y+je.ja].La|=!et),qe.Ka)return Bs(Ne,7,"Premature end-of-file encountered.")}if(rl(Ne),je=$e,qe=1,Te=(be=Ne).D,He=0<be.L&&be.M>=be.zb&&be.M<=be.Va,be.Aa==0)e:{if(Te.M=be.M,Te.uc=He,xl(be,Te),qe=1,Te=(qt=be.D).Nb,He=(Jt=Vc[be.L])*be.R,ct=Jt/2*be.B,vs=16*Te*be.R,Br=8*Te*be.B,et=be.sa,bt=be.ta-He+vs,nt=be.qa,ze=be.ra-ct+Br,rs=be.Ha,os=be.Ia-ct+Br,Yr=(ls=qt.M)==0,ts=ls>=be.Va-1,be.Aa==2&&xl(be,qt),qt.uc)for(Gr=(Js=be).D.M,t(Js.D.uc),qt=Js.yb;qt<Js.Hb;++qt){Gs=qt,Fr=Gr;var tr=(cr=(Es=Js).D).Nb;ms=Es.R;var cr=cr.wa[cr.Y+Gs],Pr=Es.sa,aa=Es.ta+16*tr*ms+16*Gs,Ea=cr.dd,sr=cr.tc;if(sr!=0)if(t(3<=sr),Es.L==1)0<Gs&&jn(Pr,aa,ms,sr+4),cr.La&&ea(Pr,aa,ms,sr),0<Fr&&fi(Pr,aa,ms,sr+4),cr.La&&Sl(Pr,aa,ms,sr);else{var tn=Es.B,pi=Es.qa,ho=Es.ra+8*tr*tn+8*Gs,kn=Es.Ha,Es=Es.Ia+8*tr*tn+8*Gs;tr=cr.ld,0<Gs&&(Rc(Pr,aa,ms,sr+4,Ea,tr),ui(pi,ho,kn,Es,tn,sr+4,Ea,tr)),cr.La&&(wn(Pr,aa,ms,sr,Ea,tr),co(pi,ho,kn,Es,tn,sr,Ea,tr)),0<Fr&&(lo(Pr,aa,ms,sr+4,Ea,tr),Nl(pi,ho,kn,Es,tn,sr+4,Ea,tr)),cr.La&&(hi(Pr,aa,ms,sr,Ea,tr),mi(pi,ho,kn,Es,tn,sr,Ea,tr))}}if(be.ia&&alert("todo:DitherRow"),je.put!=null){if(qt=16*ls,ls=16*(ls+1),Yr?(je.y=be.sa,je.O=be.ta+vs,je.f=be.qa,je.N=be.ra+Br,je.ea=be.Ha,je.W=be.Ia+Br):(qt-=Jt,je.y=et,je.O=bt,je.f=nt,je.N=ze,je.ea=rs,je.W=os),ts||(ls-=Jt),ls>je.o&&(ls=je.o),je.F=null,je.J=null,be.Fa!=null&&0<be.Fa.length&&qt<ls&&(je.J=pl(be,je,qt,ls-qt),je.F=be.mb,je.F==null&&je.F.length==0)){qe=Bs(be,3,"Could not decode alpha data.");break e}qt<je.j&&(Jt=je.j-qt,qt=je.j,t(!(1&Jt)),je.O+=be.R*Jt,je.N+=be.B*(Jt>>1),je.W+=be.B*(Jt>>1),je.F!=null&&(je.J+=je.width*Jt)),qt<ls&&(je.O+=je.v,je.N+=je.v>>1,je.W+=je.v>>1,je.F!=null&&(je.J+=je.v),je.ka=qt-je.j,je.U=je.va-je.v,je.T=ls-qt,qe=je.put(je))}Te+1!=be.Ic||ts||(a(be.sa,be.ta-He,et,bt+16*be.R,He),a(be.qa,be.ra-ct,nt,ze+8*be.B,ct),a(be.Ha,be.Ia-ct,rs,os+8*be.B,ct))}if(!qe)return Bs(Ne,6,"Output aborted.")}return 1}(c,m)),m.bc!=null&&m.bc(m),b&=1}return b?(c.cb=0,b):0}function ha(c,m,b,_,R){R=c[m+b+32*_]+(R>>3),c[m+b+32*_]=-256&R?0>R?0:255:R}function Yi(c,m,b,_,R,q){ha(c,m,0,b,_+R),ha(c,m,1,b,_+q),ha(c,m,2,b,_-q),ha(c,m,3,b,_-R)}function Er(c){return(20091*c>>16)+c}function al(c,m,b,_){var R,q=0,$=i(16);for(R=0;4>R;++R){var W=c[m+0]+c[m+8],K=c[m+0]-c[m+8],te=(35468*c[m+4]>>16)-Er(c[m+12]),ye=Er(c[m+4])+(35468*c[m+12]>>16);$[q+0]=W+ye,$[q+1]=K+te,$[q+2]=K-te,$[q+3]=W-ye,q+=4,m++}for(R=q=0;4>R;++R)W=(c=$[q+0]+4)+$[q+8],K=c-$[q+8],te=(35468*$[q+4]>>16)-Er($[q+12]),ha(b,_,0,0,W+(ye=Er($[q+4])+(35468*$[q+12]>>16))),ha(b,_,1,0,K+te),ha(b,_,2,0,K-te),ha(b,_,3,0,W-ye),q++,_+=32}function yc(c,m,b,_){var R=c[m+0]+4,q=35468*c[m+4]>>16,$=Er(c[m+4]),W=35468*c[m+1]>>16;Yi(b,_,0,R+$,c=Er(c[m+1]),W),Yi(b,_,1,R+q,c,W),Yi(b,_,2,R-q,c,W),Yi(b,_,3,R-$,c,W)}function yu(c,m,b,_,R){al(c,m,b,_),R&&al(c,m+16,b,_+4)}function bc(c,m,b,_){Qa(c,m+0,b,_,1),Qa(c,m+32,b,_+128,1)}function bu(c,m,b,_){var R;for(c=c[m+0]+4,R=0;4>R;++R)for(m=0;4>m;++m)ha(b,_,m,R,c)}function wc(c,m,b,_){c[m+0]&&Ar(c,m+0,b,_),c[m+16]&&Ar(c,m+16,b,_+4),c[m+32]&&Ar(c,m+32,b,_+128),c[m+48]&&Ar(c,m+48,b,_+128+4)}function wu(c,m,b,_){var R,q=i(16);for(R=0;4>R;++R){var $=c[m+0+R]+c[m+12+R],W=c[m+4+R]+c[m+8+R],K=c[m+4+R]-c[m+8+R],te=c[m+0+R]-c[m+12+R];q[0+R]=$+W,q[8+R]=$-W,q[4+R]=te+K,q[12+R]=te-K}for(R=0;4>R;++R)$=(c=q[0+4*R]+3)+q[3+4*R],W=q[1+4*R]+q[2+4*R],K=q[1+4*R]-q[2+4*R],te=c-q[3+4*R],b[_+0]=$+W>>3,b[_+16]=te+K>>3,b[_+32]=$-W>>3,b[_+48]=te-K>>3,_+=64}function nl(c,m,b){var _,R=m-32,q=Vr,$=255-c[R-1];for(_=0;_<b;++_){var W,K=q,te=$+c[m-1];for(W=0;W<b;++W)c[m+W]=K[te+c[R+W]];m+=32}}function ju(c,m){nl(c,m,4)}function Nu(c,m){nl(c,m,8)}function Su(c,m){nl(c,m,16)}function Ga(c,m){var b;for(b=0;16>b;++b)a(c,m+32*b,c,m-32,16)}function Gi(c,m){var b;for(b=16;0<b;--b)n(c,m,c[m-1],16),m+=32}function Ji(c,m,b){var _;for(_=0;16>_;++_)n(m,b+32*_,c,16)}function jc(c,m){var b,_=16;for(b=0;16>b;++b)_+=c[m-1+32*b]+c[m+b-32];Ji(_>>5,c,m)}function ur(c,m){var b,_=8;for(b=0;16>b;++b)_+=c[m-1+32*b];Ji(_>>4,c,m)}function ku(c,m){var b,_=8;for(b=0;16>b;++b)_+=c[m+b-32];Ji(_>>4,c,m)}function Nc(c,m){Ji(128,c,m)}function Dt(c,m,b){return c+2*m+b+2>>2}function Cu(c,m){var b,_=m-32;for(_=new Uint8Array([Dt(c[_-1],c[_+0],c[_+1]),Dt(c[_+0],c[_+1],c[_+2]),Dt(c[_+1],c[_+2],c[_+3]),Dt(c[_+2],c[_+3],c[_+4])]),b=0;4>b;++b)a(c,m+32*b,_,0,_.length)}function Au(c,m){var b=c[m-1],_=c[m-1+32],R=c[m-1+64],q=c[m-1+96];Le(c,m+0,16843009*Dt(c[m-1-32],b,_)),Le(c,m+32,16843009*Dt(b,_,R)),Le(c,m+64,16843009*Dt(_,R,q)),Le(c,m+96,16843009*Dt(R,q,q))}function Da(c,m){var b,_=4;for(b=0;4>b;++b)_+=c[m+b-32]+c[m-1+32*b];for(_>>=3,b=0;4>b;++b)n(c,m+32*b,_,4)}function Sc(c,m){var b=c[m-1+0],_=c[m-1+32],R=c[m-1+64],q=c[m-1-32],$=c[m+0-32],W=c[m+1-32],K=c[m+2-32],te=c[m+3-32];c[m+0+96]=Dt(_,R,c[m-1+96]),c[m+1+96]=c[m+0+64]=Dt(b,_,R),c[m+2+96]=c[m+1+64]=c[m+0+32]=Dt(q,b,_),c[m+3+96]=c[m+2+64]=c[m+1+32]=c[m+0+0]=Dt($,q,b),c[m+3+64]=c[m+2+32]=c[m+1+0]=Dt(W,$,q),c[m+3+32]=c[m+2+0]=Dt(K,W,$),c[m+3+0]=Dt(te,K,W)}function kc(c,m){var b=c[m+1-32],_=c[m+2-32],R=c[m+3-32],q=c[m+4-32],$=c[m+5-32],W=c[m+6-32],K=c[m+7-32];c[m+0+0]=Dt(c[m+0-32],b,_),c[m+1+0]=c[m+0+32]=Dt(b,_,R),c[m+2+0]=c[m+1+32]=c[m+0+64]=Dt(_,R,q),c[m+3+0]=c[m+2+32]=c[m+1+64]=c[m+0+96]=Dt(R,q,$),c[m+3+32]=c[m+2+64]=c[m+1+96]=Dt(q,$,W),c[m+3+64]=c[m+2+96]=Dt($,W,K),c[m+3+96]=Dt(W,K,K)}function Ki(c,m){var b=c[m-1+0],_=c[m-1+32],R=c[m-1+64],q=c[m-1-32],$=c[m+0-32],W=c[m+1-32],K=c[m+2-32],te=c[m+3-32];c[m+0+0]=c[m+1+64]=q+$+1>>1,c[m+1+0]=c[m+2+64]=$+W+1>>1,c[m+2+0]=c[m+3+64]=W+K+1>>1,c[m+3+0]=K+te+1>>1,c[m+0+96]=Dt(R,_,b),c[m+0+64]=Dt(_,b,q),c[m+0+32]=c[m+1+96]=Dt(b,q,$),c[m+1+32]=c[m+2+96]=Dt(q,$,W),c[m+2+32]=c[m+3+96]=Dt($,W,K),c[m+3+32]=Dt(W,K,te)}function il(c,m){var b=c[m+0-32],_=c[m+1-32],R=c[m+2-32],q=c[m+3-32],$=c[m+4-32],W=c[m+5-32],K=c[m+6-32],te=c[m+7-32];c[m+0+0]=b+_+1>>1,c[m+1+0]=c[m+0+64]=_+R+1>>1,c[m+2+0]=c[m+1+64]=R+q+1>>1,c[m+3+0]=c[m+2+64]=q+$+1>>1,c[m+0+32]=Dt(b,_,R),c[m+1+32]=c[m+0+96]=Dt(_,R,q),c[m+2+32]=c[m+1+96]=Dt(R,q,$),c[m+3+32]=c[m+2+96]=Dt(q,$,W),c[m+3+64]=Dt($,W,K),c[m+3+96]=Dt(W,K,te)}function Pu(c,m){var b=c[m-1+0],_=c[m-1+32],R=c[m-1+64],q=c[m-1+96];c[m+0+0]=b+_+1>>1,c[m+2+0]=c[m+0+32]=_+R+1>>1,c[m+2+32]=c[m+0+64]=R+q+1>>1,c[m+1+0]=Dt(b,_,R),c[m+3+0]=c[m+1+32]=Dt(_,R,q),c[m+3+32]=c[m+1+64]=Dt(R,q,q),c[m+3+64]=c[m+2+64]=c[m+0+96]=c[m+1+96]=c[m+2+96]=c[m+3+96]=q}function _u(c,m){var b=c[m-1+0],_=c[m-1+32],R=c[m-1+64],q=c[m-1+96],$=c[m-1-32],W=c[m+0-32],K=c[m+1-32],te=c[m+2-32];c[m+0+0]=c[m+2+32]=b+$+1>>1,c[m+0+32]=c[m+2+64]=_+b+1>>1,c[m+0+64]=c[m+2+96]=R+_+1>>1,c[m+0+96]=q+R+1>>1,c[m+3+0]=Dt(W,K,te),c[m+2+0]=Dt($,W,K),c[m+1+0]=c[m+3+32]=Dt(b,$,W),c[m+1+32]=c[m+3+64]=Dt(_,b,$),c[m+1+64]=c[m+3+96]=Dt(R,_,b),c[m+1+96]=Dt(q,R,_)}function Lu(c,m){var b;for(b=0;8>b;++b)a(c,m+32*b,c,m-32,8)}function ol(c,m){var b;for(b=0;8>b;++b)n(c,m,c[m-1],8),m+=32}function ii(c,m,b){var _;for(_=0;8>_;++_)n(m,b+32*_,c,8)}function gn(c,m){var b,_=8;for(b=0;8>b;++b)_+=c[m+b-32]+c[m-1+32*b];ii(_>>4,c,m)}function Iu(c,m){var b,_=4;for(b=0;8>b;++b)_+=c[m+b-32];ii(_>>3,c,m)}function oi(c,m){var b,_=4;for(b=0;8>b;++b)_+=c[m-1+32*b];ii(_>>3,c,m)}function ll(c,m){ii(128,c,m)}function Xi(c,m,b){var _=c[m-b],R=c[m+0],q=3*(R-_)+Ou[1020+c[m-2*b]-c[m+b]],$=Fc[112+(q+4>>3)];c[m-b]=Vr[255+_+Fc[112+(q+3>>3)]],c[m+0]=Vr[255+R-$]}function Cc(c,m,b,_){var R=c[m+0],q=c[m+b];return sa[255+c[m-2*b]-c[m-b]]>_||sa[255+q-R]>_}function Ac(c,m,b,_){return 4*sa[255+c[m-b]-c[m+0]]+sa[255+c[m-2*b]-c[m+b]]<=_}function Pc(c,m,b,_,R){var q=c[m-3*b],$=c[m-2*b],W=c[m-b],K=c[m+0],te=c[m+b],ye=c[m+2*b],Pe=c[m+3*b];return 4*sa[255+W-K]+sa[255+$-te]>_?0:sa[255+c[m-4*b]-q]<=R&&sa[255+q-$]<=R&&sa[255+$-W]<=R&&sa[255+Pe-ye]<=R&&sa[255+ye-te]<=R&&sa[255+te-K]<=R}function _c(c,m,b,_){var R=2*_+1;for(_=0;16>_;++_)Ac(c,m+_,b,R)&&Xi(c,m+_,b)}function Ta(c,m,b,_){var R=2*_+1;for(_=0;16>_;++_)Ac(c,m+_*b,1,R)&&Xi(c,m+_*b,1)}function Ja(c,m,b,_){var R;for(R=3;0<R;--R)_c(c,m+=4*b,b,_)}function Du(c,m,b,_){var R;for(R=3;0<R;--R)Ta(c,m+=4,b,_)}function xn(c,m,b,_,R,q,$,W){for(q=2*q+1;0<R--;){if(Pc(c,m,b,q,$))if(Cc(c,m,b,W))Xi(c,m,b);else{var K=c,te=m,ye=b,Pe=K[te-2*ye],_e=K[te-ye],Ne=K[te+0],$e=K[te+ye],Te=K[te+2*ye],be=27*(qe=Ou[1020+3*(Ne-_e)+Ou[1020+Pe-$e]])+63>>7,je=18*qe+63>>7,qe=9*qe+63>>7;K[te-3*ye]=Vr[255+K[te-3*ye]+qe],K[te-2*ye]=Vr[255+Pe+je],K[te-ye]=Vr[255+_e+be],K[te+0]=Vr[255+Ne-be],K[te+ye]=Vr[255+$e-je],K[te+2*ye]=Vr[255+Te-qe]}m+=_}}function ma(c,m,b,_,R,q,$,W){for(q=2*q+1;0<R--;){if(Pc(c,m,b,q,$))if(Cc(c,m,b,W))Xi(c,m,b);else{var K=c,te=m,ye=b,Pe=K[te-ye],_e=K[te+0],Ne=K[te+ye],$e=Fc[112+((Te=3*(_e-Pe))+4>>3)],Te=Fc[112+(Te+3>>3)],be=$e+1>>1;K[te-2*ye]=Vr[255+K[te-2*ye]+be],K[te-ye]=Vr[255+Pe+Te],K[te+0]=Vr[255+_e-$e],K[te+ye]=Vr[255+Ne-be]}m+=_}}function cl(c,m,b,_,R,q){xn(c,m,b,1,16,_,R,q)}function li(c,m,b,_,R,q){xn(c,m,1,b,16,_,R,q)}function Tu(c,m,b,_,R,q){var $;for($=3;0<$;--$)ma(c,m+=4*b,b,1,16,_,R,q)}function Qi(c,m,b,_,R,q){var $;for($=3;0<$;--$)ma(c,m+=4,1,b,16,_,R,q)}function Mu(c,m,b,_,R,q,$,W){xn(c,m,R,1,8,q,$,W),xn(b,_,R,1,8,q,$,W)}function dl(c,m,b,_,R,q,$,W){xn(c,m,1,R,8,q,$,W),xn(b,_,1,R,8,q,$,W)}function ul(c,m,b,_,R,q,$,W){ma(c,m+4*R,R,1,8,q,$,W),ma(b,_+4*R,R,1,8,q,$,W)}function Lc(c,m,b,_,R,q,$,W){ma(c,m+4,1,R,8,q,$,W),ma(b,_+4,1,R,8,q,$,W)}function Zi(){this.ba=new Fs,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Ut,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function hl(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ml(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Ic(){this.ua=0,this.Wa=new H,this.vb=new H,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new M,this.yc=new S}function Eu(){this.xb=this.a=0,this.l=new Vi,this.ca=new Fs,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new T,this.Pb=0,this.wd=new T,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Ic,this.ab=0,this.gc=o(4,ml),this.Oc=0}function eo(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Vi,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ci(c,m,b,_,R,q,$){for(c=c==null?0:c[m+0],m=0;m<$;++m)R[q+m]=c+b[_+m]&255,c=R[q+m]}function fl(c,m,b,_,R,q,$){var W;if(c==null)ci(null,null,b,_,R,q,$);else for(W=0;W<$;++W)R[q+W]=c[m+W]+b[_+W]&255}function vn(c,m,b,_,R,q,$){if(c==null)ci(null,null,b,_,R,q,$);else{var W,K=c[m+0],te=K,ye=K;for(W=0;W<$;++W)te=ye+(K=c[m+W])-te,ye=b[_+W]+(-256&te?0>te?0:255:te)&255,te=K,R[q+W]=ye}}function pl(c,m,b,_){var R=m.width,q=m.o;if(t(c!=null&&m!=null),0>b||0>=_||b+_>q)return null;if(!c.Cc){if(c.ga==null){var $;if(c.ga=new eo,($=c.ga==null)||($=m.width*m.o,t(c.Gb.length==0),c.Gb=i($),c.Uc=0,c.Gb==null?$=0:(c.mb=c.Gb,c.nb=c.Uc,c.rc=null,$=1),$=!$),!$){$=c.ga;var W=c.Fa,K=c.P,te=c.qc,ye=c.mb,Pe=c.nb,_e=K+1,Ne=te-1,$e=$.l;if(t(W!=null&&ye!=null&&m!=null),Sn[0]=null,Sn[1]=ci,Sn[2]=fl,Sn[3]=vn,$.ca=ye,$.tb=Pe,$.c=m.width,$.i=m.height,t(0<$.c&&0<$.i),1>=te)m=0;else if($.$a=W[K+0]>>0&3,$.Z=W[K+0]>>2&3,$.Lc=W[K+0]>>4&3,K=W[K+0]>>6&3,0>$.$a||1<$.$a||4<=$.Z||1<$.Lc||K)m=0;else if($e.put=js,$e.ac=vt,$e.bc=Ns,$e.ma=$,$e.width=m.width,$e.height=m.height,$e.Da=m.Da,$e.v=m.v,$e.va=m.va,$e.j=m.j,$e.o=m.o,$.$a)e:{t($.$a==1),m=or();t:for(;;){if(m==null){m=0;break e}if(t($!=null),$.mc=m,m.c=$.c,m.i=$.i,m.l=$.l,m.l.ma=$,m.l.width=$.c,m.l.height=$.i,m.a=0,ce(m.m,W,_e,Ne),!kr($.c,$.i,1,m,null)||(m.ab==1&&m.gc[0].hc==3&&Ft(m.s)?($.ic=1,W=m.c*m.i,m.Ta=null,m.Ua=0,m.V=i(W),m.Ba=0,m.V==null?(m.a=1,m=0):m=1):($.ic=0,m=Ia(m,$.c)),!m))break t;m=1;break e}$.mc=null,m=0}else m=Ne>=$.c*$.i;$=!m}if($)return null;c.ga.Lc!=1?c.Ga=0:_=q-b}t(c.ga!=null),t(b+_<=q);e:{if(m=(W=c.ga).c,q=W.l.o,W.$a==0){if(_e=c.rc,Ne=c.Vc,$e=c.Fa,K=c.P+1+b*m,te=c.mb,ye=c.nb+b*m,t(K<=c.P+c.qc),W.Z!=0)for(t(Sn[W.Z]!=null),$=0;$<_;++$)Sn[W.Z](_e,Ne,$e,K,te,ye,m),_e=te,Ne=ye,ye+=m,K+=m;else for($=0;$<_;++$)a(te,ye,$e,K,m),_e=te,Ne=ye,ye+=m,K+=m;c.rc=_e,c.Vc=Ne}else{if(t(W.mc!=null),m=b+_,t(($=W.mc)!=null),t(m<=$.i),$.C>=m)m=1;else if(W.ic||ke(),W.ic){W=$.V,_e=$.Ba,Ne=$.c;var Te=$.i,be=($e=1,K=$.$/Ne,te=$.$%Ne,ye=$.m,Pe=$.s,$.$),je=Ne*Te,qe=Ne*m,He=Pe.wc,ze=be<qe?Oe(Pe,te,K):null;t(be<=je),t(m<=Te),t(Ft(Pe));t:for(;;){for(;!ye.h&&be<qe;){if(te&He||(ze=Oe(Pe,te,K)),t(ze!=null),G(ye),256>(Te=ue(ze.G[0],ze.H[0],ye)))W[_e+be]=Te,++be,++te>=Ne&&(te=0,++K<=m&&!(K%16)&&Tt($,K));else{if(!(280>Te)){$e=0;break t}Te=fe(Te-256,ye);var ct,et=ue(ze.G[4],ze.H[4],ye);if(G(ye),!(be>=(et=De(Ne,et=fe(et,ye)))&&je-be>=Te)){$e=0;break t}for(ct=0;ct<Te;++ct)W[_e+be+ct]=W[_e+be+ct-et];for(be+=Te,te+=Te;te>=Ne;)te-=Ne,++K<=m&&!(K%16)&&Tt($,K);be<qe&&te&He&&(ze=Oe(Pe,te,K))}t(ye.h==V(ye))}Tt($,K>m?m:K);break t}!$e||ye.h&&be<je?($e=0,$.a=ye.h?5:3):$.$=be,m=$e}else m=is($,$.V,$.Ba,$.c,$.i,m,Ya);if(!m){_=0;break e}}b+_>=q&&(c.Cc=1),_=1}if(!_)return null;if(c.Cc&&((_=c.ga)!=null&&(_.mc=null),c.ga=null,0<c.Ga))return alert("todo:WebPDequantizeLevels"),null}return c.nb+b*R}function g(c,m,b,_,R,q){for(;0<R--;){var $,W=c,K=m+(b?1:0),te=c,ye=m+(b?0:3);for($=0;$<_;++$){var Pe=te[ye+4*$];Pe!=255&&(Pe*=32897,W[K+4*$+0]=W[K+4*$+0]*Pe>>23,W[K+4*$+1]=W[K+4*$+1]*Pe>>23,W[K+4*$+2]=W[K+4*$+2]*Pe>>23)}m+=q}}function O(c,m,b,_,R){for(;0<_--;){var q;for(q=0;q<b;++q){var $=c[m+2*q+0],W=15&(te=c[m+2*q+1]),K=4369*W,te=(240&te|te>>4)*K>>16;c[m+2*q+0]=(240&$|$>>4)*K>>16&240|(15&$|$<<4)*K>>16>>4&15,c[m+2*q+1]=240&te|W}m+=R}}function ne(c,m,b,_,R,q,$,W){var K,te,ye=255;for(te=0;te<R;++te){for(K=0;K<_;++K){var Pe=c[m+K];q[$+4*K]=Pe,ye&=Pe}m+=b,$+=W}return ye!=255}function ge(c,m,b,_,R){var q;for(q=0;q<R;++q)b[_+q]=c[m+q]>>8}function ke(){ta=g,ks=O,Cs=ne,qs=ge}function Re(c,m,b){C[c]=function(_,R,q,$,W,K,te,ye,Pe,_e,Ne,$e,Te,be,je,qe,He){var ze,ct=He-1>>1,et=W[K+0]|te[ye+0]<<16,bt=Pe[_e+0]|Ne[$e+0]<<16;t(_!=null);var nt=3*et+bt+131074>>2;for(m(_[R+0],255&nt,nt>>16,Te,be),q!=null&&(nt=3*bt+et+131074>>2,m(q[$+0],255&nt,nt>>16,je,qe)),ze=1;ze<=ct;++ze){var rs=W[K+ze]|te[ye+ze]<<16,os=Pe[_e+ze]|Ne[$e+ze]<<16,ts=et+rs+bt+os+524296,Jt=ts+2*(rs+bt)>>3;nt=Jt+et>>1,et=(ts=ts+2*(et+os)>>3)+rs>>1,m(_[R+2*ze-1],255&nt,nt>>16,Te,be+(2*ze-1)*b),m(_[R+2*ze-0],255&et,et>>16,Te,be+(2*ze-0)*b),q!=null&&(nt=ts+bt>>1,et=Jt+os>>1,m(q[$+2*ze-1],255&nt,nt>>16,je,qe+(2*ze-1)*b),m(q[$+2*ze+0],255&et,et>>16,je,qe+(2*ze+0)*b)),et=rs,bt=os}1&He||(nt=3*et+bt+131074>>2,m(_[R+He-1],255&nt,nt>>16,Te,be+(He-1)*b),q!=null&&(nt=3*bt+et+131074>>2,m(q[$+He-1],255&nt,nt>>16,je,qe+(He-1)*b)))}}function Ve(){ra[Bc]=ov,ra[Uc]=cf,ra[rf]=lv,ra[qc]=df,ra[zc]=uf,ra[Fu]=hf,ra[af]=cv,ra[Bu]=cf,ra[Uu]=df,ra[$c]=uf,ra[qu]=hf}function lt(c){return c&-16384?0>c?0:255:c>>dv}function xt(c,m){return lt((19077*c>>8)+(26149*m>>8)-14234)}function Bt(c,m,b){return lt((19077*c>>8)-(6419*m>>8)-(13320*b>>8)+8708)}function Mt(c,m){return lt((19077*c>>8)+(33050*m>>8)-17685)}function Zt(c,m,b,_,R){_[R+0]=xt(c,b),_[R+1]=Bt(c,m,b),_[R+2]=Mt(c,m)}function Ds(c,m,b,_,R){_[R+0]=Mt(c,m),_[R+1]=Bt(c,m,b),_[R+2]=xt(c,b)}function Ms(c,m,b,_,R){var q=Bt(c,m,b);m=q<<3&224|Mt(c,m)>>3,_[R+0]=248&xt(c,b)|q>>5,_[R+1]=m}function Ys(c,m,b,_,R){var q=240&Mt(c,m)|15;_[R+0]=240&xt(c,b)|Bt(c,m,b)>>4,_[R+1]=q}function hr(c,m,b,_,R){_[R+0]=255,Zt(c,m,b,_,R+1)}function er(c,m,b,_,R){Ds(c,m,b,_,R),_[R+3]=255}function fa(c,m,b,_,R){Zt(c,m,b,_,R),_[R+3]=255}function Hr(c,m){return 0>c?0:c>m?m:c}function Ma(c,m,b){C[c]=function(_,R,q,$,W,K,te,ye,Pe){for(var _e=ye+(-2&Pe)*b;ye!=_e;)m(_[R+0],q[$+0],W[K+0],te,ye),m(_[R+1],q[$+0],W[K+0],te,ye+b),R+=2,++$,++K,ye+=2*b;1&Pe&&m(_[R+0],q[$+0],W[K+0],te,ye)}}function Dc(c,m,b){return b==0?c==0?m==0?6:5:m==0?4:0:b}function gl(c,m,b,_,R){switch(c>>>30){case 3:Qa(m,b,_,R,0);break;case 2:Us(m,b,_,R);break;case 1:Ar(m,b,_,R)}}function xl(c,m){var b,_,R=m.M,q=m.Nb,$=c.oc,W=c.pc+40,K=c.oc,te=c.pc+584,ye=c.oc,Pe=c.pc+600;for(b=0;16>b;++b)$[W+32*b-1]=129;for(b=0;8>b;++b)K[te+32*b-1]=129,ye[Pe+32*b-1]=129;for(0<R?$[W-1-32]=K[te-1-32]=ye[Pe-1-32]=129:(n($,W-32-1,127,21),n(K,te-32-1,127,9),n(ye,Pe-32-1,127,9)),_=0;_<c.za;++_){var _e=m.ya[m.aa+_];if(0<_){for(b=-1;16>b;++b)a($,W+32*b-4,$,W+32*b+12,4);for(b=-1;8>b;++b)a(K,te+32*b-4,K,te+32*b+4,4),a(ye,Pe+32*b-4,ye,Pe+32*b+4,4)}var Ne=c.Gd,$e=c.Hd+_,Te=_e.ad,be=_e.Hc;if(0<R&&(a($,W-32,Ne[$e].y,0,16),a(K,te-32,Ne[$e].f,0,8),a(ye,Pe-32,Ne[$e].ea,0,8)),_e.Za){var je=$,qe=W-32+16;for(0<R&&(_>=c.za-1?n(je,qe,Ne[$e].y[15],4):a(je,qe,Ne[$e+1].y,0,4)),b=0;4>b;b++)je[qe+128+b]=je[qe+256+b]=je[qe+384+b]=je[qe+0+b];for(b=0;16>b;++b,be<<=2)je=$,qe=W+ff[b],pa[_e.Ob[b]](je,qe),gl(be,Te,16*+b,je,qe)}else if(je=Dc(_,R,_e.Ob[0]),Nn[je]($,W),be!=0)for(b=0;16>b;++b,be<<=2)gl(be,Te,16*+b,$,W+ff[b]);for(b=_e.Gc,je=Dc(_,R,_e.Dd),en[je](K,te),en[je](ye,Pe),be=Te,je=K,qe=te,255&(_e=b>>0)&&(170&_e?jl(be,256,je,qe):Zr(be,256,je,qe)),_e=ye,be=Pe,255&(b>>=8)&&(170&b?jl(Te,320,_e,be):Zr(Te,320,_e,be)),R<c.Ub-1&&(a(Ne[$e].y,0,$,W+480,16),a(Ne[$e].f,0,K,te+224,8),a(Ne[$e].ea,0,ye,Pe+224,8)),b=8*q*c.B,Ne=c.sa,$e=c.ta+16*_+16*q*c.R,Te=c.qa,_e=c.ra+8*_+b,be=c.Ha,je=c.Ia+8*_+b,b=0;16>b;++b)a(Ne,$e+b*c.R,$,W+32*b,16);for(b=0;8>b;++b)a(Te,_e+b*c.B,K,te+32*b,8),a(be,je+b*c.B,ye,Pe+32*b,8)}}function to(c,m,b,_,R,q,$,W,K){var te=[0],ye=[0],Pe=0,_e=K!=null?K.kd:0,Ne=K!=null?K:new hl;if(c==null||12>b)return 7;Ne.data=c,Ne.w=m,Ne.ha=b,m=[m],b=[b],Ne.gb=[Ne.gb];e:{var $e=m,Te=b,be=Ne.gb;if(t(c!=null),t(Te!=null),t(be!=null),be[0]=0,12<=Te[0]&&!r(c,$e[0],"RIFF")){if(r(c,$e[0]+8,"WEBP")){be=3;break e}var je=we(c,$e[0]+4);if(12>je||4294967286<je){be=3;break e}if(_e&&je>Te[0]-8){be=7;break e}be[0]=je,$e[0]+=12,Te[0]-=12}be=0}if(be!=0)return be;for(je=0<Ne.gb[0],b=b[0];;){e:{var qe=c;Te=m,be=b;var He=te,ze=ye,ct=$e=[0];if((nt=Pe=[Pe])[0]=0,8>be[0])be=7;else{if(!r(qe,Te[0],"VP8X")){if(we(qe,Te[0]+4)!=10){be=3;break e}if(18>be[0]){be=7;break e}var et=we(qe,Te[0]+8),bt=1+me(qe,Te[0]+12);if(2147483648<=bt*(qe=1+me(qe,Te[0]+15))){be=3;break e}ct!=null&&(ct[0]=et),He!=null&&(He[0]=bt),ze!=null&&(ze[0]=qe),Te[0]+=18,be[0]-=18,nt[0]=1}be=0}}if(Pe=Pe[0],$e=$e[0],be!=0)return be;if(Te=!!(2&$e),!je&&Pe)return 3;if(q!=null&&(q[0]=!!(16&$e)),$!=null&&($[0]=Te),W!=null&&(W[0]=0),$=te[0],$e=ye[0],Pe&&Te&&K==null){be=0;break}if(4>b){be=7;break}if(je&&Pe||!je&&!Pe&&!r(c,m[0],"ALPH")){b=[b],Ne.na=[Ne.na],Ne.P=[Ne.P],Ne.Sa=[Ne.Sa];e:{et=c,be=m,je=b;var nt=Ne.gb;He=Ne.na,ze=Ne.P,ct=Ne.Sa,bt=22,t(et!=null),t(je!=null),qe=be[0];var rs=je[0];for(t(He!=null),t(ct!=null),He[0]=null,ze[0]=null,ct[0]=0;;){if(be[0]=qe,je[0]=rs,8>rs){be=7;break e}var os=we(et,qe+4);if(4294967286<os){be=3;break e}var ts=8+os+1&-2;if(bt+=ts,0<nt&&bt>nt){be=3;break e}if(!r(et,qe,"VP8 ")||!r(et,qe,"VP8L")){be=0;break e}if(rs[0]<ts){be=7;break e}r(et,qe,"ALPH")||(He[0]=et,ze[0]=qe+8,ct[0]=os),qe+=ts,rs-=ts}}if(b=b[0],Ne.na=Ne.na[0],Ne.P=Ne.P[0],Ne.Sa=Ne.Sa[0],be!=0)break}b=[b],Ne.Ja=[Ne.Ja],Ne.xa=[Ne.xa];e:if(nt=c,be=m,je=b,He=Ne.gb[0],ze=Ne.Ja,ct=Ne.xa,et=be[0],qe=!r(nt,et,"VP8 "),bt=!r(nt,et,"VP8L"),t(nt!=null),t(je!=null),t(ze!=null),t(ct!=null),8>je[0])be=7;else{if(qe||bt){if(nt=we(nt,et+4),12<=He&&nt>He-12){be=3;break e}if(_e&&nt>je[0]-8){be=7;break e}ze[0]=nt,be[0]+=8,je[0]-=8,ct[0]=bt}else ct[0]=5<=je[0]&&nt[et+0]==47&&!(nt[et+4]>>5),ze[0]=je[0];be=0}if(b=b[0],Ne.Ja=Ne.Ja[0],Ne.xa=Ne.xa[0],m=m[0],be!=0)break;if(4294967286<Ne.Ja)return 3;if(W==null||Te||(W[0]=Ne.xa?2:1),$=[$],$e=[$e],Ne.xa){if(5>b){be=7;break}W=$,_e=$e,Te=q,c==null||5>b?c=0:5<=b&&c[m+0]==47&&!(c[m+4]>>5)?(je=[0],nt=[0],He=[0],ce(ze=new T,c,m,b),ut(ze,je,nt,He)?(W!=null&&(W[0]=je[0]),_e!=null&&(_e[0]=nt[0]),Te!=null&&(Te[0]=He[0]),c=1):c=0):c=0}else{if(10>b){be=7;break}W=$e,c==null||10>b||!gc(c,m+3,b-3)?c=0:(_e=c[m+0]|c[m+1]<<8|c[m+2]<<16,Te=16383&(c[m+7]<<8|c[m+6]),c=16383&(c[m+9]<<8|c[m+8]),1&_e||3<(_e>>1&7)||!(_e>>4&1)||_e>>5>=Ne.Ja||!Te||!c?c=0:($&&($[0]=Te),W&&(W[0]=c),c=1))}if(!c||($=$[0],$e=$e[0],Pe&&(te[0]!=$||ye[0]!=$e)))return 3;K!=null&&(K[0]=Ne,K.offset=m-K.w,t(4294967286>m-K.w),t(K.offset==K.ha-b));break}return be==0||be==7&&Pe&&K==null?(q!=null&&(q[0]|=Ne.na!=null&&0<Ne.na.length),_!=null&&(_[0]=$),R!=null&&(R[0]=$e),0):be}function vl(c,m,b){var _=m.width,R=m.height,q=0,$=0,W=_,K=R;if(m.Da=c!=null&&0<c.Da,m.Da&&(W=c.cd,K=c.bd,q=c.v,$=c.j,11>b||(q&=-2,$&=-2),0>q||0>$||0>=W||0>=K||q+W>_||$+K>R))return 0;if(m.v=q,m.j=$,m.va=q+W,m.o=$+K,m.U=W,m.T=K,m.da=c!=null&&0<c.da,m.da){if(!Ee(W,K,b=[c.ib],q=[c.hb]))return 0;m.ib=b[0],m.hb=q[0]}return m.ob=c!=null&&c.ob,m.Kb=c==null||!c.Sd,m.da&&(m.ob=m.ib<3*_/4&&m.hb<3*R/4,m.Kb=0),1}function yl(c){if(c==null)return 2;if(11>c.S){var m=c.f.RGBA;m.fb+=(c.height-1)*m.A,m.A=-m.A}else m=c.f.kb,c=c.height,m.O+=(c-1)*m.fa,m.fa=-m.fa,m.N+=(c-1>>1)*m.Ab,m.Ab=-m.Ab,m.W+=(c-1>>1)*m.Db,m.Db=-m.Db,m.F!=null&&(m.J+=(c-1)*m.lb,m.lb=-m.lb);return 0}function so(c,m,b,_){if(_==null||0>=c||0>=m)return 2;if(b!=null){if(b.Da){var R=b.cd,q=b.bd,$=-2&b.v,W=-2&b.j;if(0>$||0>W||0>=R||0>=q||$+R>c||W+q>m)return 2;c=R,m=q}if(b.da){if(!Ee(c,m,R=[b.ib],q=[b.hb]))return 2;c=R[0],m=q[0]}}_.width=c,_.height=m;e:{var K=_.width,te=_.height;if(c=_.S,0>=K||0>=te||!(c>=Bc&&13>c))c=2;else{if(0>=_.Rd&&_.sd==null){$=q=R=m=0;var ye=(W=K*pf[c])*te;if(11>c||(q=(te+1)/2*(m=(K+1)/2),c==12&&($=(R=K)*te)),(te=i(ye+2*q+$))==null){c=1;break e}_.sd=te,11>c?((K=_.f.RGBA).eb=te,K.fb=0,K.A=W,K.size=ye):((K=_.f.kb).y=te,K.O=0,K.fa=W,K.Fd=ye,K.f=te,K.N=0+ye,K.Ab=m,K.Cd=q,K.ea=te,K.W=0+ye+q,K.Db=m,K.Ed=q,c==12&&(K.F=te,K.J=0+ye+2*q),K.Tc=$,K.lb=R)}if(m=1,R=_.S,q=_.width,$=_.height,R>=Bc&&13>R)if(11>R)c=_.f.RGBA,m&=(W=Math.abs(c.A))*($-1)+q<=c.size,m&=W>=q*pf[R],m&=c.eb!=null;else{c=_.f.kb,W=(q+1)/2,ye=($+1)/2,K=Math.abs(c.fa),te=Math.abs(c.Ab);var Pe=Math.abs(c.Db),_e=Math.abs(c.lb),Ne=_e*($-1)+q;m&=K*($-1)+q<=c.Fd,m&=te*(ye-1)+W<=c.Cd,m=(m&=Pe*(ye-1)+W<=c.Ed)&K>=q&te>=W&Pe>=W,m&=c.y!=null,m&=c.f!=null,m&=c.ea!=null,R==12&&(m&=_e>=q,m&=Ne<=c.Tc,m&=c.F!=null)}else m=0;c=m?0:2}}return c!=0||b!=null&&b.fd&&(c=yl(_)),c}var lr=64,ro=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],ao=24,no=32,bl=8,Rr=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ue("Predictor0","PredictorAdd0"),C.Predictor0=function(){return 4278190080},C.Predictor1=function(c){return c},C.Predictor2=function(c,m,b){return m[b+0]},C.Predictor3=function(c,m,b){return m[b+1]},C.Predictor4=function(c,m,b){return m[b-1]},C.Predictor5=function(c,m,b){return We(We(c,m[b+1]),m[b+0])},C.Predictor6=function(c,m,b){return We(c,m[b-1])},C.Predictor7=function(c,m,b){return We(c,m[b+0])},C.Predictor8=function(c,m,b){return We(m[b-1],m[b+0])},C.Predictor9=function(c,m,b){return We(m[b+0],m[b+1])},C.Predictor10=function(c,m,b){return We(We(c,m[b-1]),We(m[b+0],m[b+1]))},C.Predictor11=function(c,m,b){var _=m[b+0];return 0>=mt(_>>24&255,c>>24&255,(m=m[b-1])>>24&255)+mt(_>>16&255,c>>16&255,m>>16&255)+mt(_>>8&255,c>>8&255,m>>8&255)+mt(255&_,255&c,255&m)?_:c},C.Predictor12=function(c,m,b){var _=m[b+0];return(st((c>>24&255)+(_>>24&255)-((m=m[b-1])>>24&255))<<24|st((c>>16&255)+(_>>16&255)-(m>>16&255))<<16|st((c>>8&255)+(_>>8&255)-(m>>8&255))<<8|st((255&c)+(255&_)-(255&m)))>>>0},C.Predictor13=function(c,m,b){var _=m[b-1];return(ot((c=We(c,m[b+0]))>>24&255,_>>24&255)<<24|ot(c>>16&255,_>>16&255)<<16|ot(c>>8&255,_>>8&255)<<8|ot(c>>0&255,_>>0&255))>>>0};var Ru=C.PredictorAdd0;C.PredictorAdd1=rt,Ue("Predictor2","PredictorAdd2"),Ue("Predictor3","PredictorAdd3"),Ue("Predictor4","PredictorAdd4"),Ue("Predictor5","PredictorAdd5"),Ue("Predictor6","PredictorAdd6"),Ue("Predictor7","PredictorAdd7"),Ue("Predictor8","PredictorAdd8"),Ue("Predictor9","PredictorAdd9"),Ue("Predictor10","PredictorAdd10"),Ue("Predictor11","PredictorAdd11"),Ue("Predictor12","PredictorAdd12"),Ue("Predictor13","PredictorAdd13");var wl=C.PredictorAdd2;Ct("ColorIndexInverseTransform","MapARGB","32b",function(c){return c>>8&255},function(c){return c}),Ct("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(c){return c},function(c){return c>>8&255});var Tc,Qr=C.ColorIndexInverseTransform,io=C.MapARGB,Mc=C.VP8LColorIndexInverseTransformAlpha,Ec=C.MapAlpha,yn=C.VP8LPredictorsAdd=[];yn.length=16,(C.VP8LPredictors=[]).length=16,(C.VP8LPredictorsAdd_C=[]).length=16,(C.VP8LPredictors_C=[]).length=16;var di,Or,Cr,bn,Ka,Xa,oo,Qa,Us,jl,Ar,Zr,lo,Rc,Nl,ui,hi,wn,mi,co,fi,jn,Sl,ea,ta,ks,Cs,qs,Xs=i(511),Za=i(2041),kl=i(225),uo=i(767),Oc=0,Ou=Za,Fc=kl,Vr=uo,sa=Xs,Bc=0,Uc=1,rf=2,qc=3,zc=4,Fu=5,af=6,Bu=7,Uu=8,$c=9,qu=10,Y2=[2,3,7],G2=[3,3,11],nf=[280,256,256,256,40],J2=[0,1,1,1,0],K2=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],X2=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Q2=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Z2=8,zu=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],$u=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Cl=null,ev=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],tv=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],of=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],sv=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],rv=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],av=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],nv=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Nn=[],pa=[],en=[],iv=1,lf=2,Sn=[],ra=[];Re("UpsampleRgbLinePair",Zt,3),Re("UpsampleBgrLinePair",Ds,3),Re("UpsampleRgbaLinePair",fa,4),Re("UpsampleBgraLinePair",er,4),Re("UpsampleArgbLinePair",hr,4),Re("UpsampleRgba4444LinePair",Ys,2),Re("UpsampleRgb565LinePair",Ms,2);var ov=C.UpsampleRgbLinePair,lv=C.UpsampleBgrLinePair,cf=C.UpsampleRgbaLinePair,df=C.UpsampleBgraLinePair,uf=C.UpsampleArgbLinePair,hf=C.UpsampleRgba4444LinePair,cv=C.UpsampleRgb565LinePair,Wc=16,Hc=1<<Wc-1,Al=-227,Wu=482,dv=6,mf=0,uv=i(256),hv=i(256),mv=i(256),fv=i(256),pv=i(Wu-Al),gv=i(Wu-Al);Ma("YuvToRgbRow",Zt,3),Ma("YuvToBgrRow",Ds,3),Ma("YuvToRgbaRow",fa,4),Ma("YuvToBgraRow",er,4),Ma("YuvToArgbRow",hr,4),Ma("YuvToRgba4444Row",Ys,2),Ma("YuvToRgb565Row",Ms,2);var ff=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Vc=[0,2,8],xv=[8,7,6,4,4,2,2,2,1,1,1,1],vv=1;this.WebPDecodeRGBA=function(c,m,b,_,R){var q=Uc,$=new Zi,W=new Fs;$.ba=W,W.S=q,W.width=[W.width],W.height=[W.height];var K=W.width,te=W.height,ye=new Vs;if(ye==null||c==null)var Pe=2;else t(ye!=null),Pe=to(c,m,b,ye.width,ye.height,ye.Pd,ye.Qd,ye.format,null);if(Pe!=0?K=0:(K!=null&&(K[0]=ye.width[0]),te!=null&&(te[0]=ye.height[0]),K=1),K){W.width=W.width[0],W.height=W.height[0],_!=null&&(_[0]=W.width),R!=null&&(R[0]=W.height);e:{if(_=new Vi,(R=new hl).data=c,R.w=m,R.ha=b,R.kd=1,m=[0],t(R!=null),((c=to(R.data,R.w,R.ha,null,null,null,m,null,R))==0||c==7)&&m[0]&&(c=4),(m=c)==0){if(t($!=null),_.data=R.data,_.w=R.w+R.offset,_.ha=R.ha-R.offset,_.put=js,_.ac=vt,_.bc=Ns,_.ma=$,R.xa){if((c=or())==null){$=1;break e}if(function(_e,Ne){var $e=[0],Te=[0],be=[0];t:for(;;){if(_e==null)return 0;if(Ne==null)return _e.a=2,0;if(_e.l=Ne,_e.a=0,ce(_e.m,Ne.data,Ne.w,Ne.ha),!ut(_e.m,$e,Te,be)){_e.a=3;break t}if(_e.xb=lf,Ne.width=$e[0],Ne.height=Te[0],!kr($e[0],Te[0],1,_e,null))break t;return 1}return t(_e.a!=0),0}(c,_)){if(_=(m=so(_.width,_.height,$.Oa,$.ba))==0){t:{_=c;s:for(;;){if(_==null){_=0;break t}if(t(_.s.yc!=null),t(_.s.Ya!=null),t(0<_.s.Wb),t((b=_.l)!=null),t((R=b.ma)!=null),_.xb!=0){if(_.ca=R.ba,_.tb=R.tb,t(_.ca!=null),!vl(R.Oa,b,qc)){_.a=2;break s}if(!Ia(_,b.width)||b.da)break s;if((b.da||Yt(_.ca.S))&&ke(),11>_.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),_.ca.f.kb.F!=null&&ke()),_.Pb&&0<_.s.ua&&_.s.vb.X==null&&!oe(_.s.vb,_.s.Wa.Xa)){_.a=1;break s}_.xb=0}if(!is(_,_.V,_.Ba,_.c,_.i,b.o,gt))break s;R.Dc=_.Ma,_=1;break t}t(_.a!=0),_=0}_=!_}_&&(m=c.a)}else m=c.a}else{if((c=new xu)==null){$=1;break e}if(c.Fa=R.na,c.P=R.P,c.qc=R.Sa,xc(c,_)){if((m=so(_.width,_.height,$.Oa,$.ba))==0){if(c.Aa=0,b=$.Oa,t((R=c)!=null),b!=null){if(0<(K=0>(K=b.Md)?0:100<K?255:255*K/100)){for(te=ye=0;4>te;++te)12>(Pe=R.pb[te]).lc&&(Pe.ia=K*xv[0>Pe.lc?0:Pe.lc]>>3),ye|=Pe.ia;ye&&(alert("todo:VP8InitRandom"),R.ia=1)}R.Ga=b.Id,100<R.Ga?R.Ga=100:0>R.Ga&&(R.Ga=0)}vu(c,_)||(m=c.a)}}else m=c.a}m==0&&$.Oa!=null&&$.Oa.fd&&(m=yl($.ba))}$=m}q=$!=0?null:11>q?W.f.RGBA.eb:W.f.kb.y}else q=null;return q};var pf=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function h(C,A){for(var L="",y=0;y<4;y++)L+=String.fromCharCode(C[A++]);return L}function f(C,A){return(C[A+0]<<0|C[A+1]<<8|C[A+2]<<16)>>>0}function p(C,A){return(C[A+0]<<0|C[A+1]<<8|C[A+2]<<16|C[A+3]<<24)>>>0}new d;var x=[0],u=[0],k=[],j=new d,v=s,w=function(C,A){var L={},y=0,S=!1,I=0,M=0;if(L.frames=[],!function(U,V,re,G){for(var Y=0;Y<G;Y++)if(U[V+Y]!=re.charCodeAt(Y))return!0;return!1}(C,A,"RIFF",4)){for(p(C,A+=4),A+=8;A<C.length;){var J=h(C,A),ae=p(C,A+=4);A+=4;var he=ae+(1&ae);switch(J){case"VP8 ":case"VP8L":L.frames[y]===void 0&&(L.frames[y]={}),(ve=L.frames[y]).src_off=S?M:A-8,ve.src_size=I+ae+8,y++,S&&(S=!1,I=0,M=0);break;case"VP8X":(ve=L.header={}).feature_flags=C[A];var ce=A+4;ve.canvas_width=1+f(C,ce),ce+=3,ve.canvas_height=1+f(C,ce),ce+=3;break;case"ALPH":S=!0,I=he+8,M=A-8;break;case"ANIM":(ve=L.header).bgcolor=p(C,A),ce=A+4,ve.loop_count=(Ae=C)[(T=ce)+0]<<0|Ae[T+1]<<8,ce+=2;break;case"ANMF":var ie,ve;(ve=L.frames[y]={}).offset_x=2*f(C,A),A+=3,ve.offset_y=2*f(C,A),A+=3,ve.width=1+f(C,A),A+=3,ve.height=1+f(C,A),A+=3,ve.duration=f(C,A),A+=3,ie=C[A++],ve.dispose=1&ie,ve.blend=ie>>1&1}J!="ANMF"&&(A+=he)}var Ae,T;return L}}(v,0);w.response=v,w.rgbaoutput=!0,w.dataurl=!1;var P=w.header?w.header:null,D=w.frames?w.frames:null;if(P){P.loop_counter=P.loop_count,x=[P.canvas_height],u=[P.canvas_width];for(var B=0;B<D.length&&D[B].blend!=0;B++);}var F=D[0],se=j.WebPDecodeRGBA(v,F.src_off,F.src_size,u,x);F.rgba=se,F.imgwidth=u[0],F.imgheight=x[0];for(var z=0;z<u[0]*x[0]*4;z++)k[z]=se[z];return this.width=u,this.height=x,this.data=k,this}(function(s){var t=function(){return typeof um=="function"},r=function(x,u,k,j){var v=4,w=o;switch(j){case s.image_compression.FAST:v=1,w=i;break;case s.image_compression.MEDIUM:v=6,w=l;break;case s.image_compression.SLOW:v=9,w=d}x=a(x,u,k,w);var P=um(x,{level:v});return s.__addimage__.arrayBufferToBinaryString(P)},a=function(x,u,k,j){for(var v,w,P,D=x.length/u,B=new Uint8Array(x.length+D),F=f(),se=0;se<D;se+=1){if(P=se*u,v=x.subarray(P,P+u),j)B.set(j(v,k,w),P+se);else{for(var z,C=F.length,A=[];z<C;z+=1)A[z]=F[z](v,k,w);var L=p(A.concat());B.set(A[L],P+se)}w=v}return B},n=function(x){var u=Array.apply([],x);return u.unshift(0),u},i=function(x,u){var k,j=[],v=x.length;j[0]=1;for(var w=0;w<v;w+=1)k=x[w-u]||0,j[w+1]=x[w]-k+256&255;return j},o=function(x,u,k){var j,v=[],w=x.length;v[0]=2;for(var P=0;P<w;P+=1)j=k&&k[P]||0,v[P+1]=x[P]-j+256&255;return v},l=function(x,u,k){var j,v,w=[],P=x.length;w[0]=3;for(var D=0;D<P;D+=1)j=x[D-u]||0,v=k&&k[D]||0,w[D+1]=x[D]+256-(j+v>>>1)&255;return w},d=function(x,u,k){var j,v,w,P,D=[],B=x.length;D[0]=4;for(var F=0;F<B;F+=1)j=x[F-u]||0,v=k&&k[F]||0,w=k&&k[F-u]||0,P=h(j,v,w),D[F+1]=x[F]-P+256&255;return D},h=function(x,u,k){if(x===u&&u===k)return x;var j=Math.abs(u-k),v=Math.abs(x-k),w=Math.abs(x+u-k-k);return j<=v&&j<=w?x:v<=w?u:k},f=function(){return[n,i,o,l,d]},p=function(x){var u=x.map(function(k){return k.reduce(function(j,v){return j+Math.abs(v)},0)});return u.indexOf(Math.min.apply(null,u))};s.processPNG=function(x,u,k,j){var v,w,P,D,B,F,se,z,C,A,L,y,S,I,M,J=this.decode.FLATE_DECODE,ae="";if(this.__addimage__.isArrayBuffer(x)&&(x=new Uint8Array(x)),this.__addimage__.isArrayBufferView(x)){if(x=(P=new W3(x)).imgData,w=P.bits,v=P.colorSpace,B=P.colors,[4,6].indexOf(P.colorType)!==-1){if(P.bits===8){C=(z=P.pixelBitlength==32?new Uint32Array(P.decodePixels().buffer):P.pixelBitlength==16?new Uint16Array(P.decodePixels().buffer):new Uint8Array(P.decodePixels().buffer)).length,L=new Uint8Array(C*P.colors),A=new Uint8Array(C);var he,ce=P.pixelBitlength-P.bits;for(I=0,M=0;I<C;I++){for(S=z[I],he=0;he<ce;)L[M++]=S>>>he&255,he+=P.bits;A[I]=S>>>he&255}}if(P.bits===16){C=(z=new Uint32Array(P.decodePixels().buffer)).length,L=new Uint8Array(C*(32/P.pixelBitlength)*P.colors),A=new Uint8Array(C*(32/P.pixelBitlength)),y=P.colors>1,I=0,M=0;for(var ie=0;I<C;)S=z[I++],L[M++]=S>>>0&255,y&&(L[M++]=S>>>16&255,S=z[I++],L[M++]=S>>>0&255),A[ie++]=S>>>16&255;w=8}j!==s.image_compression.NONE&&t()?(x=r(L,P.width*P.colors,P.colors,j),se=r(A,P.width,1,j)):(x=L,se=A,J=void 0)}if(P.colorType===3&&(v=this.color_spaces.INDEXED,F=P.palette,P.transparency.indexed)){var ve=P.transparency.indexed,Ae=0;for(I=0,C=ve.length;I<C;++I)Ae+=ve[I];if((Ae/=255)===C-1&&ve.indexOf(0)!==-1)D=[ve.indexOf(0)];else if(Ae!==C){for(z=P.decodePixels(),A=new Uint8Array(z.length),I=0,C=z.length;I<C;I++)A[I]=ve[z[I]];se=r(A,P.width,1)}}var T=function(U){var V;switch(U){case s.image_compression.FAST:V=11;break;case s.image_compression.MEDIUM:V=13;break;case s.image_compression.SLOW:V=14;break;default:V=12}return V}(j);return J===this.decode.FLATE_DECODE&&(ae="/Predictor "+T+" "),ae+="/Colors "+B+" /BitsPerComponent "+w+" /Columns "+P.width,(this.__addimage__.isArrayBuffer(x)||this.__addimage__.isArrayBufferView(x))&&(x=this.__addimage__.arrayBufferToBinaryString(x)),(se&&this.__addimage__.isArrayBuffer(se)||this.__addimage__.isArrayBufferView(se))&&(se=this.__addimage__.arrayBufferToBinaryString(se)),{alias:k,data:x,index:u,filter:J,decodeParameters:ae,transparency:D,palette:F,sMask:se,predictor:T,width:P.width,height:P.height,bitsPerComponent:w,colorSpace:v}}}})(kt.API),function(s){s.processGIF89A=function(t,r,a,n){var i=new H3(t),o=i.width,l=i.height,d=[];i.decodeAndBlitFrameRGBA(0,d);var h={data:d,width:o,height:l},f=new bh(100).encode(h,100);return s.processJPEG.call(this,f,r,a,n)},s.processGIF87A=s.processGIF89A}(kt.API),ba.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var s=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(s);for(var t=0;t<s;t++){var r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:n,green:a,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},ba.prototype.parseBGR=function(){this.pos=this.offset;try{var s="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[s]()}catch(r){ys.log("bit decode error:"+r)}},ba.prototype.bit1=function(){var s,t=Math.ceil(this.width/8),r=t%4;for(s=this.height-1;s>=0;s--){for(var a=this.bottom_up?s:this.height-1-s,n=0;n<t;n++)for(var i=this.datav.getUint8(this.pos++,!0),o=a*this.width*4+8*n*4,l=0;l<8&&8*n+l<this.width;l++){var d=this.palette[i>>7-l&1];this.data[o+4*l]=d.blue,this.data[o+4*l+1]=d.green,this.data[o+4*l+2]=d.red,this.data[o+4*l+3]=255}r!==0&&(this.pos+=4-r)}},ba.prototype.bit4=function(){for(var s=Math.ceil(this.width/2),t=s%4,r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,n=0;n<s;n++){var i=this.datav.getUint8(this.pos++,!0),o=a*this.width*4+2*n*4,l=i>>4,d=15&i,h=this.palette[l];if(this.data[o]=h.blue,this.data[o+1]=h.green,this.data[o+2]=h.red,this.data[o+3]=255,2*n+1>=this.width)break;h=this.palette[d],this.data[o+4]=h.blue,this.data[o+4+1]=h.green,this.data[o+4+2]=h.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},ba.prototype.bit8=function(){for(var s=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var n=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*a;if(n<this.palette.length){var o=this.palette[n];this.data[i]=o.red,this.data[i+1]=o.green,this.data[i+2]=o.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}s!==0&&(this.pos+=4-s)}},ba.prototype.bit15=function(){for(var s=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,n=0;n<this.width;n++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,l=(i>>5&t)/t*255|0,d=(i>>10&t)/t*255|0,h=i>>15?255:0,f=a*this.width*4+4*n;this.data[f]=d,this.data[f+1]=l,this.data[f+2]=o,this.data[f+3]=h}this.pos+=s}},ba.prototype.bit16=function(){for(var s=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),a=this.height-1;a>=0;a--){for(var n=this.bottom_up?a:this.height-1-a,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&t)/t*255|0,d=(o>>5&r)/r*255|0,h=(o>>11)/t*255|0,f=n*this.width*4+4*i;this.data[f]=h,this.data[f+1]=d,this.data[f+2]=l,this.data[f+3]=255}this.pos+=s}},ba.prototype.bit24=function(){for(var s=this.height-1;s>=0;s--){for(var t=this.bottom_up?s:this.height-1-s,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=i,this.data[o+1]=n,this.data[o+2]=a,this.data[o+3]=255}this.pos+=this.width%4}},ba.prototype.bit32=function(){for(var s=this.height-1;s>=0;s--)for(var t=this.bottom_up?s:this.height-1-s,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*r;this.data[l]=i,this.data[l+1]=n,this.data[l+2]=a,this.data[l+3]=o}},ba.prototype.getData=function(){return this.data},function(s){s.processBMP=function(t,r,a,n){var i=new ba(t,!1),o=i.width,l=i.height,d={data:i.getData(),width:o,height:l},h=new bh(100).encode(d,100);return s.processJPEG.call(this,h,r,a,n)}}(kt.API),Up.prototype.getData=function(){return this.data},function(s){s.processWEBP=function(t,r,a,n){var i=new Up(t),o=i.width,l=i.height,d={data:i.getData(),width:o,height:l},h=new bh(100).encode(d,100);return s.processJPEG.call(this,h,r,a,n)}}(kt.API),kt.API.processRGBA=function(s,t,r){for(var a=s.data,n=a.length,i=new Uint8Array(n/4*3),o=new Uint8Array(n/4),l=0,d=0,h=0;h<n;h+=4){var f=a[h],p=a[h+1],x=a[h+2],u=a[h+3];i[l++]=f,i[l++]=p,i[l++]=x,o[d++]=u}var k=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:k,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:s.width,height:s.height}},kt.API.setLanguage=function(s){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[s]!==void 0&&(this.internal.languageSettings.languageCode=s,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},vo=kt.API,fd=vo.getCharWidthsArray=function(s,t){var r,a,n=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:n.metadata.Unicode.widths,d=l.fof?l.fof:1,h=t.kerning?t.kerning:n.metadata.Unicode.kerning,f=h.fof?h.fof:1,p=t.doKerning!==!1,x=0,u=s.length,k=0,j=l[0]||d,v=[];for(r=0;r<u;r++)a=s.charCodeAt(r),typeof n.metadata.widthOfString=="function"?v.push((n.metadata.widthOfGlyph(n.metadata.characterToGlyph(a))+o*(1e3/i)||0)/1e3):(x=p&&hs(h[a])==="object"&&!isNaN(parseInt(h[a][k],10))?h[a][k]/f:0,v.push((l[a]||j)/d+x)),k=a;return v},Rp=vo.getStringUnitWidth=function(s,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),a=t.font||this.internal.getFont(),n=t.charSpace||this.internal.getCharSpace();return vo.processArabic&&(s=vo.processArabic(s)),typeof a.metadata.widthOfString=="function"?a.metadata.widthOfString(s,r,n)/r:fd.apply(this,arguments).reduce(function(i,o){return i+o},0)},Op=function(s,t,r,a){for(var n=[],i=0,o=s.length,l=0;i!==o&&l+t[i]<r;)l+=t[i],i++;n.push(s.slice(0,i));var d=i;for(l=0;i!==o;)l+t[i]>a&&(n.push(s.slice(d,i)),l=0,d=i),l+=t[i],i++;return d!==i&&n.push(s.slice(d,i)),n},Fp=function(s,t,r){r||(r={});var a,n,i,o,l,d,h,f=[],p=[f],x=r.textIndent||0,u=0,k=0,j=s.split(" "),v=fd.apply(this,[" ",r])[0];if(d=r.lineIndent===-1?j[0].length+2:r.lineIndent||0){var w=Array(d).join(" "),P=[];j.map(function(B){(B=B.split(/\s*\n/)).length>1?P=P.concat(B.map(function(F,se){return(se&&F.length?`
`:"")+F})):P.push(B[0])}),j=P,d=Rp.apply(this,[w,r])}for(i=0,o=j.length;i<o;i++){var D=0;if(a=j[i],d&&a[0]==`
`&&(a=a.substr(1),D=1),x+u+(k=(n=fd.apply(this,[a,r])).reduce(function(B,F){return B+F},0))>t||D){if(k>t){for(l=Op.apply(this,[a,n,t-(x+u),t]),f.push(l.shift()),f=[l.pop()];l.length;)p.push([l.shift()]);k=n.slice(a.length-(f[0]?f[0].length:0)).reduce(function(B,F){return B+F},0)}else f=[a];p.push(f),x=k+d,u=v}else f.push(a),x+=u+k,u=v}return h=d?function(B,F){return(F?w:"")+B.join(" ")}:function(B){return B.join(" ")},p.map(h)},vo.splitTextToSize=function(s,t,r){var a,n=(r=r||{}).fontSize||this.internal.getFontSize(),i=function(f){if(f.widths&&f.kerning)return{widths:f.widths,kerning:f.kerning};var p=this.internal.getFont(f.fontName,f.fontStyle);return p.metadata.Unicode?{widths:p.metadata.Unicode.widths||{0:1},kerning:p.metadata.Unicode.kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,r);a=Array.isArray(s)?s:String(s).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/n;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/n:0,i.lineIndent=r.lineIndent;var l,d,h=[];for(l=0,d=a.length;l<d;l++)h=h.concat(Fp.apply(this,[a[l],o,i]));return h},function(s){s.__fontmetrics__=s.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},a={},n=0;n<t.length;n++)r[t[n]]="0123456789abcdef"[n],a["0123456789abcdef"[n]]=t[n];var i=function(p){return"0x"+parseInt(p,10).toString(16)},o=s.__fontmetrics__.compress=function(p){var x,u,k,j,v=["{"];for(var w in p){if(x=p[w],isNaN(parseInt(w,10))?u="'"+w+"'":(w=parseInt(w,10),u=(u=i(w).slice(2)).slice(0,-1)+a[u.slice(-1)]),typeof x=="number")x<0?(k=i(x).slice(3),j="-"):(k=i(x).slice(2),j=""),k=j+k.slice(0,-1)+a[k.slice(-1)];else{if(hs(x)!=="object")throw new Error("Don't know what to do with value type "+hs(x)+".");k=o(x)}v.push(u+k)}return v.push("}"),v.join("")},l=s.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var x,u,k,j,v={},w=1,P=v,D=[],B="",F="",se=p.length-1,z=1;z<se;z+=1)(j=p[z])=="'"?x?(k=x.join(""),x=void 0):x=[]:x?x.push(j):j=="{"?(D.push([P,k]),P={},k=void 0):j=="}"?((u=D.pop())[0][u[1]]=P,k=void 0,P=u[0]):j=="-"?w=-1:k===void 0?r.hasOwnProperty(j)?(B+=r[j],k=parseInt(B,16)*w,w=1,B=""):B+=j:r.hasOwnProperty(j)?(F+=r[j],P[k]=parseInt(F,16)*w,w=1,k=void 0,F=""):F+=j;return v},d={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},h={Unicode:{Courier:d,"Courier-Bold":d,"Courier-BoldOblique":d,"Courier-Oblique":d,Helvetica:d,"Helvetica-Bold":d,"Helvetica-BoldOblique":d,"Helvetica-Oblique":d,"Times-Roman":d,"Times-Bold":d,"Times-BoldItalic":d,"Times-Italic":d}},f={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};s.events.push(["addFont",function(p){var x=p.font,u=f.Unicode[x.postScriptName];u&&(x.metadata.Unicode={},x.metadata.Unicode.widths=u.widths,x.metadata.Unicode.kerning=u.kerning);var k=h.Unicode[x.postScriptName];k&&(x.metadata.Unicode.encoding=k,x.encoding=k.codePages[0])}])}(kt.API),function(s){var t=function(r){for(var a=r.length,n=new Uint8Array(a),i=0;i<a;i++)n[i]=r.charCodeAt(i);return n};s.API.events.push(["addFont",function(r){var a=void 0,n=r.font,i=r.instance;if(!n.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+n.postScriptName+"').");if(typeof(a=i.existsFileInVFS(n.postScriptName)===!1?i.loadFile(n.postScriptName):i.getFileFromVFS(n.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+n.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(Yl(l)),o.metadata=s.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(n,a)}}])}(kt),function(s){function t(){return(At.canvg?Promise.resolve(At.canvg):im(()=>import("./index.es-d9VE6QLZ.js"),__vite__mapDeps([0,1,2]))).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}kt.API.addSvgAsImage=function(r,a,n,i,o,l,d,h){if(isNaN(a)||isNaN(n))throw ys.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(o))throw ys.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var f=document.createElement("canvas");f.width=i,f.height=o;var p=f.getContext("2d");p.fillStyle="#fff",p.fillRect(0,0,f.width,f.height);var x={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},u=this;return t().then(function(k){return k.fromString(p,r,x)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(k){return k.render(x)}).then(function(){u.addImage(f.toDataURL("image/jpeg",1),a,n,i,o,d,h)})}}(),kt.API.putTotalPages=function(s){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(s,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(s,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var a=1;a<=this.internal.getNumberOfPages();a++)for(var n=0;n<this.internal.pages[a].length;n++)this.internal.pages[a][n]=this.internal.pages[a][n].replace(t,r);return this},kt.API.viewerPreferences=function(s,t){var r;s=s||{},t=t||!1;var a,n,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),d=[],h=0,f=0,p=0;function x(k,j){var v,w=!1;for(v=0;v<k.length;v+=1)k[v]===j&&(w=!0);return w}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,s==="reset"||t===!0){var u=l.length;for(p=0;p<u;p+=1)r[l[p]].value=r[l[p]].defaultValue,r[l[p]].explicitSet=!1}if(hs(s)==="object"){for(n in s)if(i=s[n],x(l,n)&&i!==void 0){if(r[n].type==="boolean"&&typeof i=="boolean")r[n].value=i;else if(r[n].type==="name"&&x(r[n].valueSet,i))r[n].value=i;else if(r[n].type==="integer"&&Number.isInteger(i))r[n].value=i;else if(r[n].type==="array"){for(h=0;h<i.length;h+=1)if(a=!0,i[h].length===1&&typeof i[h][0]=="number")d.push(String(i[h]-1));else if(i[h].length>1){for(f=0;f<i[h].length;f+=1)typeof i[h][f]!="number"&&(a=!1);a===!0&&d.push([i[h][0]-1,i[h][1]-1].join(" "))}r[n].value="["+d.join(" ")+"]"}else r[n].value=r[n].defaultValue;r[n].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var k,j=[];for(k in r)r[k].explicitSet===!0&&(r[k].type==="name"?j.push("/"+k+" /"+r[k].value):j.push("/"+k+" "+r[k].value));j.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+j.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(s){var t=function(){var a='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',n=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(a)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),d=unescape(encodeURIComponent("</x:xmpmeta>")),h=i.length+o.length+l.length+n.length+d.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+h+" >>"),this.internal.write("stream"),this.internal.write(n+i+o+l+d),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};s.addMetadata=function(a,n){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:a,namespaceuri:n||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(kt.API),function(s){var t=s.API,r=t.pdfEscape16=function(i,o){for(var l,d=o.metadata.Unicode.widths,h=["","0","00","000","0000"],f=[""],p=0,x=i.length;p<x;++p){if(l=o.metadata.characterToGlyph(i.charCodeAt(p)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=i.charCodeAt(p),d.indexOf(l)==-1&&(d.push(l),d.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return f.join("");l=l.toString(16),f.push(h[4-l.length],l)}return f.join("")},a=function(i){var o,l,d,h,f,p,x;for(f=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,d=[],p=0,x=(l=Object.keys(i).sort(function(u,k){return u-k})).length;p<x;p++)o=l[p],d.length>=100&&(f+=`
`+d.length+` beginbfchar
`+d.join(`
`)+`
endbfchar`,d=[]),i[o]!==void 0&&i[o]!==null&&typeof i[o].toString=="function"&&(h=("0000"+i[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),d.push("<"+o+"><"+h+">"));return d.length&&(f+=`
`+d.length+` beginbfchar
`+d.join(`
`)+`
endbfchar
`),f+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(o){var l=o.font,d=o.out,h=o.newObject,f=o.putStream;if(l.metadata instanceof s.API.TTFFont&&l.encoding==="Identity-H"){for(var p=l.metadata.Unicode.widths,x=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),u="",k=0;k<x.length;k++)u+=String.fromCharCode(x[k]);var j=h();f({data:u,addLength1:!0,objectId:j}),d("endobj");var v=h();f({data:a(l.metadata.toUnicode),addLength1:!0,objectId:v}),d("endobj");var w=h();d("<<"),d("/Type /FontDescriptor"),d("/FontName /"+bo(l.fontName)),d("/FontFile2 "+j+" 0 R"),d("/FontBBox "+s.API.PDFObject.convert(l.metadata.bbox)),d("/Flags "+l.metadata.flags),d("/StemV "+l.metadata.stemV),d("/ItalicAngle "+l.metadata.italicAngle),d("/Ascent "+l.metadata.ascender),d("/Descent "+l.metadata.decender),d("/CapHeight "+l.metadata.capHeight),d(">>"),d("endobj");var P=h();d("<<"),d("/Type /Font"),d("/BaseFont /"+bo(l.fontName)),d("/FontDescriptor "+w+" 0 R"),d("/W "+s.API.PDFObject.convert(p)),d("/CIDToGIDMap /Identity"),d("/DW 1000"),d("/Subtype /CIDFontType2"),d("/CIDSystemInfo"),d("<<"),d("/Supplement 0"),d("/Registry (Adobe)"),d("/Ordering ("+l.encoding+")"),d(">>"),d(">>"),d("endobj"),l.objectNumber=h(),d("<<"),d("/Type /Font"),d("/Subtype /Type0"),d("/ToUnicode "+v+" 0 R"),d("/BaseFont /"+bo(l.fontName)),d("/Encoding /"+l.encoding),d("/DescendantFonts ["+P+" 0 R]"),d(">>"),d("endobj"),l.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(o){var l=o.font,d=o.out,h=o.newObject,f=o.putStream;if(l.metadata instanceof s.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var p=l.metadata.rawData,x="",u=0;u<p.length;u++)x+=String.fromCharCode(p[u]);var k=h();f({data:x,addLength1:!0,objectId:k}),d("endobj");var j=h();f({data:a(l.metadata.toUnicode),addLength1:!0,objectId:j}),d("endobj");var v=h();d("<<"),d("/Descent "+l.metadata.decender),d("/CapHeight "+l.metadata.capHeight),d("/StemV "+l.metadata.stemV),d("/Type /FontDescriptor"),d("/FontFile2 "+k+" 0 R"),d("/Flags 96"),d("/FontBBox "+s.API.PDFObject.convert(l.metadata.bbox)),d("/FontName /"+bo(l.fontName)),d("/ItalicAngle "+l.metadata.italicAngle),d("/Ascent "+l.metadata.ascender),d(">>"),d("endobj"),l.objectNumber=h();for(var w=0;w<l.metadata.hmtx.widths.length;w++)l.metadata.hmtx.widths[w]=parseInt(l.metadata.hmtx.widths[w]*(1e3/l.metadata.head.unitsPerEm));d("<</Subtype/TrueType/Type/Font/ToUnicode "+j+" 0 R/BaseFont/"+bo(l.fontName)+"/FontDescriptor "+v+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+s.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),d("endobj"),l.isAlreadyPutted=!0}})(i)}]);var n=function(i){var o,l=i.text||"",d=i.x,h=i.y,f=i.options||{},p=i.mutex||{},x=p.pdfEscape,u=p.activeFontKey,k=p.fonts,j=u,v="",w=0,P="",D=k[j].encoding;if(k[j].encoding!=="Identity-H")return{text:l,x:d,y:h,options:f,mutex:p};for(P=l,j=u,Array.isArray(l)&&(P=l[0]),w=0;w<P.length;w+=1)k[j].metadata.hasOwnProperty("cmap")&&(o=k[j].metadata.cmap.unicode.codeMap[P[w].charCodeAt(0)]),o||P[w].charCodeAt(0)<256&&k[j].metadata.hasOwnProperty("Unicode")?v+=P[w]:v+="";var B="";return parseInt(j.slice(1))<14||D==="WinAnsiEncoding"?B=x(v,j).split("").map(function(F){return F.charCodeAt(0).toString(16)}).join(""):D==="Identity-H"&&(B=r(v,k[j])),p.isHex=!0,{text:B,x:d,y:h,options:f,mutex:p}};t.events.push(["postProcessText",function(i){var o=i.text||"",l=[],d={text:o,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(o)){var h=0;for(h=0;h<o.length;h+=1)Array.isArray(o[h])&&o[h].length===3?l.push([n(Object.assign({},d,{text:o[h][0]})).text,o[h][1],o[h][2]]):l.push(n(Object.assign({},d,{text:o[h]})).text);i.text=l}else i.text=n(Object.assign({},d,{text:o})).text}])}(kt),function(s){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};s.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},s.addFileToVFS=function(r,a){return t.call(this),this.internal.vFS[r]=a,this},s.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(kt.API),function(s){s.__bidiEngine__=s.prototype.__bidiEngine__=function(a){var n,i,o,l,d,h,f,p=t,x=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],u=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],k={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},j={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},v=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],w=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),P=!1,D=0;this.__bidiEngine__={};var B=function(y){var S=y.charCodeAt(),I=S>>8,M=j[I];return M!==void 0?p[256*M+(255&S)]:I===252||I===253?"AL":w.test(I)?"L":I===8?"R":"N"},F=function(y){for(var S,I=0;I<y.length;I++){if((S=B(y.charAt(I)))==="L")return!1;if(S==="R")return!0}return!1},se=function(y,S,I,M){var J,ae,he,ce,ie=S[M];switch(ie){case"L":case"R":P=!1;break;case"N":case"AN":break;case"EN":P&&(ie="AN");break;case"AL":P=!0,ie="R";break;case"WS":ie="N";break;case"CS":M<1||M+1>=S.length||(J=I[M-1])!=="EN"&&J!=="AN"||(ae=S[M+1])!=="EN"&&ae!=="AN"?ie="N":P&&(ae="AN"),ie=ae===J?ae:"N";break;case"ES":ie=(J=M>0?I[M-1]:"B")==="EN"&&M+1<S.length&&S[M+1]==="EN"?"EN":"N";break;case"ET":if(M>0&&I[M-1]==="EN"){ie="EN";break}if(P){ie="N";break}for(he=M+1,ce=S.length;he<ce&&S[he]==="ET";)he++;ie=he<ce&&S[he]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(ce=S.length,he=M+1;he<ce&&S[he]==="NSM";)he++;if(he<ce){var ve=y[M],Ae=ve>=1425&&ve<=2303||ve===64286;if(J=S[he],Ae&&(J==="R"||J==="AL")){ie="R";break}}}ie=M<1||(J=S[M-1])==="B"?"N":I[M-1];break;case"B":P=!1,n=!0,ie=D;break;case"S":i=!0,ie="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":P=!1;break;case"BN":ie="N"}return ie},z=function(y,S,I){var M=y.split("");return I&&C(M,I,{hiLevel:D}),M.reverse(),S&&S.reverse(),M.join("")},C=function(y,S,I){var M,J,ae,he,ce,ie=-1,ve=y.length,Ae=0,T=[],U=D?u:x,V=[];for(P=!1,n=!1,i=!1,J=0;J<ve;J++)V[J]=B(y[J]);for(ae=0;ae<ve;ae++){if(ce=Ae,T[ae]=se(y,V,T,ae),M=240&(Ae=U[ce][k[T[ae]]]),Ae&=15,S[ae]=he=U[Ae][5],M>0)if(M===16){for(J=ie;J<ae;J++)S[J]=1;ie=-1}else ie=-1;if(U[Ae][6])ie===-1&&(ie=ae);else if(ie>-1){for(J=ie;J<ae;J++)S[J]=he;ie=-1}V[ae]==="B"&&(S[ae]=0),I.hiLevel|=he}i&&function(re,G,Y){for(var Z=0;Z<Y;Z++)if(re[Z]==="S"){G[Z]=D;for(var de=Z-1;de>=0&&re[de]==="WS";de--)G[de]=D}}(V,S,ve)},A=function(y,S,I,M,J){if(!(J.hiLevel<y)){if(y===1&&D===1&&!n)return S.reverse(),void(I&&I.reverse());for(var ae,he,ce,ie,ve=S.length,Ae=0;Ae<ve;){if(M[Ae]>=y){for(ce=Ae+1;ce<ve&&M[ce]>=y;)ce++;for(ie=Ae,he=ce-1;ie<he;ie++,he--)ae=S[ie],S[ie]=S[he],S[he]=ae,I&&(ae=I[ie],I[ie]=I[he],I[he]=ae);Ae=ce}Ae++}}},L=function(y,S,I){var M=y.split(""),J={hiLevel:D};return I||(I=[]),C(M,I,J),function(ae,he,ce){if(ce.hiLevel!==0&&f)for(var ie,ve=0;ve<ae.length;ve++)he[ve]===1&&(ie=v.indexOf(ae[ve]))>=0&&(ae[ve]=v[ie+1])}(M,I,J),A(2,M,S,I,J),A(1,M,S,I,J),M.join("")};return this.__bidiEngine__.doBidiReorder=function(y,S,I){if(function(J,ae){if(ae)for(var he=0;he<J.length;he++)ae[he]=he;l===void 0&&(l=F(J)),h===void 0&&(h=F(J))}(y,S),o||!d||h)if(o&&d&&l^h)D=l?1:0,y=z(y,S,I);else if(!o&&d&&h)D=l?1:0,y=L(y,S,I),y=z(y,S);else if(!o||l||d||h){if(o&&!d&&l^h)y=z(y,S),l?(D=0,y=L(y,S,I)):(D=1,y=L(y,S,I),y=z(y,S));else if(o&&l&&!d&&h)D=1,y=L(y,S,I),y=z(y,S);else if(!o&&!d&&l^h){var M=f;l?(D=1,y=L(y,S,I),D=0,f=!1,y=L(y,S,I),f=M):(D=0,y=L(y,S,I),y=z(y,S),D=1,f=!1,y=L(y,S,I),f=M,y=z(y,S))}}else D=0,y=L(y,S,I);else D=l?1:0,y=L(y,S,I);return y},this.__bidiEngine__.setOptions=function(y){y&&(o=y.isInputVisual,d=y.isOutputVisual,l=y.isInputRtl,h=y.isOutputRtl,f=y.isSymmetricSwapping)},this.__bidiEngine__.setOptions(a),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new s.__bidiEngine__({isInputVisual:!0});s.API.events.push(["postProcessText",function(a){var n=a.text;a.x,a.y;var i=a.options||{};a.mutex,i.lang;var o=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(n)==="[object Array]"){var l=0;for(o=[],l=0;l<n.length;l+=1)Object.prototype.toString.call(n[l])==="[object Array]"?o.push([r.doBidiReorder(n[l][0]),n[l][1],n[l][2]]):o.push([r.doBidiReorder(n[l])]);a.text=o}else a.text=r.doBidiReorder(n);r.setOptions({isInputVisual:!0})}])}(kt),kt.API.TTFFont=function(){function s(t){var r;if(this.rawData=t,r=this.contents=new ri(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new iS(this),this.registerTTF()}return s.open=function(t){return new s(t)},s.prototype.parse=function(){return this.directory=new V3(this.contents),this.head=new G3(this),this.name=new Z3(this),this.cmap=new r2(this),this.toUnicode={},this.hhea=new J3(this),this.maxp=new eS(this),this.hmtx=new tS(this),this.post=new X3(this),this.os2=new K3(this),this.loca=new nS(this),this.glyf=new sS(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},s.prototype.registerTTF=function(){var t,r,a,n,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var o,l,d,h;for(h=[],o=0,l=(d=this.bbox).length;o<l;o++)t=d[o],h.push(Math.round(t*this.scaleFactor));return h}.call(this),this.stemV=0,this.post.exists?(a=255&(n=this.post.italic_angle),32768&(r=n>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+a)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},s.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},s.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},s.prototype.widthOfString=function(t,r,a){var n,i,o,l;for(o=0,i=0,l=(t=""+t).length;0<=l?i<l:i>l;i=0<=l?++i:--i)n=t.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(n))+a*(1e3/r)||0;return o*(r/1e3)},s.prototype.lineHeight=function(t,r){var a;return r==null&&(r=!1),a=r?this.lineGap:0,(this.ascender+a-this.decender)/1e3*t},s}();var La,ri=function(){function s(t){this.data=t!=null?t:[],this.pos=0,this.length=this.data.length}return s.prototype.readByte=function(){return this.data[this.pos++]},s.prototype.writeByte=function(t){return this.data[this.pos++]=t},s.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},s.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},s.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},s.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},s.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},s.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},s.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},s.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},s.prototype.readString=function(t){var r,a;for(a=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)a[r]=String.fromCharCode(this.readByte());return a.join("")},s.prototype.writeString=function(t){var r,a,n;for(n=[],r=0,a=t.length;0<=a?r<a:r>a;r=0<=a?++r:--r)n.push(this.writeByte(t.charCodeAt(r)));return n},s.prototype.readShort=function(){return this.readInt16()},s.prototype.writeShort=function(t){return this.writeInt16(t)},s.prototype.readLongLong=function(){var t,r,a,n,i,o,l,d;return t=this.readByte(),r=this.readByte(),a=this.readByte(),n=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),d=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^a)+4294967296*(255^n)+16777216*(255^i)+65536*(255^o)+256*(255^l)+(255^d)+1):72057594037927940*t+281474976710656*r+1099511627776*a+4294967296*n+16777216*i+65536*o+256*l+d},s.prototype.writeLongLong=function(t){var r,a;return r=Math.floor(t/4294967296),a=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(a>>24&255),this.writeByte(a>>16&255),this.writeByte(a>>8&255),this.writeByte(255&a)},s.prototype.readInt=function(){return this.readInt32()},s.prototype.writeInt=function(t){return this.writeInt32(t)},s.prototype.read=function(t){var r,a;for(r=[],a=0;0<=t?a<t:a>t;a=0<=t?++a:--a)r.push(this.readByte());return r},s.prototype.write=function(t){var r,a,n,i;for(i=[],a=0,n=t.length;a<n;a++)r=t[a],i.push(this.writeByte(r));return i},s}(),V3=function(){var s;function t(r){var a,n,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},n=0,i=this.tableCount;0<=i?n<i:n>i;n=0<=i?++n:--n)a={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[a.tag]=a}return t.prototype.encode=function(r){var a,n,i,o,l,d,h,f,p,x,u,k,j;for(j in u=Object.keys(r).length,d=Math.log(2),p=16*Math.floor(Math.log(u)/d),o=Math.floor(p/d),f=16*u-p,(n=new ri).writeInt(this.scalarType),n.writeShort(u),n.writeShort(p),n.writeShort(o),n.writeShort(f),i=16*u,h=n.pos+i,l=null,k=[],r)for(x=r[j],n.writeString(j),n.writeInt(s(x)),n.writeInt(h),n.writeInt(x.length),k=k.concat(x),j==="head"&&(l=h),h+=x.length;h%4;)k.push(0),h++;return n.write(k),a=2981146554-s(n.data),n.pos=l+8,n.writeUInt32(a),n.data},s=function(r){var a,n,i,o;for(r=a2.call(r);r.length%4;)r.push(0);for(i=new ri(r),n=0,a=0,o=r.length;a<o;a=a+=4)n+=i.readUInt32();return 4294967295&n},t}(),Y3={}.hasOwnProperty,Va=function(s,t){for(var r in t)Y3.call(t,r)&&(s[r]=t[r]);function a(){this.constructor=s}return a.prototype=t.prototype,s.prototype=new a,s.__super__=t.prototype,s};La=function(){function s(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return s.prototype.parse=function(){},s.prototype.encode=function(){},s.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},s}();var G3=function(s){function t(){return t.__super__.constructor.apply(this,arguments)}return Va(t,La),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var a;return(a=new ri).writeInt(this.version),a.writeInt(this.revision),a.writeInt(this.checkSumAdjustment),a.writeInt(this.magicNumber),a.writeShort(this.flags),a.writeShort(this.unitsPerEm),a.writeLongLong(this.created),a.writeLongLong(this.modified),a.writeShort(this.xMin),a.writeShort(this.yMin),a.writeShort(this.xMax),a.writeShort(this.yMax),a.writeShort(this.macStyle),a.writeShort(this.lowestRecPPEM),a.writeShort(this.fontDirectionHint),a.writeShort(r),a.writeShort(this.glyphDataFormat),a.data},t}(),qp=function(){function s(t,r){var a,n,i,o,l,d,h,f,p,x,u,k,j,v,w,P,D;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),p=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(d=0;d<256;++d)this.codeMap[d]=t.readByte();break;case 4:for(u=t.readUInt16(),x=u/2,t.pos+=6,i=function(){var B,F;for(F=[],d=B=0;0<=x?B<x:B>x;d=0<=x?++B:--B)F.push(t.readUInt16());return F}(),t.pos+=2,j=function(){var B,F;for(F=[],d=B=0;0<=x?B<x:B>x;d=0<=x?++B:--B)F.push(t.readUInt16());return F}(),h=function(){var B,F;for(F=[],d=B=0;0<=x?B<x:B>x;d=0<=x?++B:--B)F.push(t.readUInt16());return F}(),f=function(){var B,F;for(F=[],d=B=0;0<=x?B<x:B>x;d=0<=x?++B:--B)F.push(t.readUInt16());return F}(),n=(this.length-t.pos+this.offset)/2,l=function(){var B,F;for(F=[],d=B=0;0<=n?B<n:B>n;d=0<=n?++B:--B)F.push(t.readUInt16());return F}(),d=w=0,D=i.length;w<D;d=++w)for(v=i[d],a=P=k=j[d];k<=v?P<=v:P>=v;a=k<=v?++P:--P)f[d]===0?o=a+h[d]:(o=l[f[d]/2+(a-k)-(x-d)]||0)!==0&&(o+=h[d]),this.codeMap[a]=65535&o}t.pos=p}return s.encode=function(t,r){var a,n,i,o,l,d,h,f,p,x,u,k,j,v,w,P,D,B,F,se,z,C,A,L,y,S,I,M,J,ae,he,ce,ie,ve,Ae,T,U,V,re,G,Y,Z,de,Le,X,me;switch(M=new ri,o=Object.keys(t).sort(function(we,oe){return we-oe}),r){case"macroman":for(j=0,v=function(){var we=[];for(k=0;k<256;++k)we.push(0);return we}(),P={0:0},i={},J=0,ie=o.length;J<ie;J++)P[de=t[n=o[J]]]==null&&(P[de]=++j),i[n]={old:t[n],new:P[t[n]]},v[n]=P[t[n]];return M.writeUInt16(1),M.writeUInt16(0),M.writeUInt32(12),M.writeUInt16(0),M.writeUInt16(262),M.writeUInt16(0),M.write(v),{charMap:i,subtable:M.data,maxGlyphID:j+1};case"unicode":for(S=[],p=[],D=0,P={},a={},w=h=null,ae=0,ve=o.length;ae<ve;ae++)P[F=t[n=o[ae]]]==null&&(P[F]=++D),a[n]={old:F,new:P[F]},l=P[F]-n,w!=null&&l===h||(w&&p.push(w),S.push(n),h=l),w=n;for(w&&p.push(w),p.push(65535),S.push(65535),L=2*(A=S.length),C=2*Math.pow(Math.log(A)/Math.LN2,2),x=Math.log(C/2)/Math.LN2,z=2*A-C,d=[],se=[],u=[],k=he=0,Ae=S.length;he<Ae;k=++he){if(y=S[k],f=p[k],y===65535){d.push(0),se.push(0);break}if(y-(I=a[y].new)>=32768)for(d.push(0),se.push(2*(u.length+A-k)),n=ce=y;y<=f?ce<=f:ce>=f;n=y<=f?++ce:--ce)u.push(a[n].new);else d.push(I-y),se.push(0)}for(M.writeUInt16(3),M.writeUInt16(1),M.writeUInt32(12),M.writeUInt16(4),M.writeUInt16(16+8*A+2*u.length),M.writeUInt16(0),M.writeUInt16(L),M.writeUInt16(C),M.writeUInt16(x),M.writeUInt16(z),Y=0,T=p.length;Y<T;Y++)n=p[Y],M.writeUInt16(n);for(M.writeUInt16(0),Z=0,U=S.length;Z<U;Z++)n=S[Z],M.writeUInt16(n);for(Le=0,V=d.length;Le<V;Le++)l=d[Le],M.writeUInt16(l);for(X=0,re=se.length;X<re;X++)B=se[X],M.writeUInt16(B);for(me=0,G=u.length;me<G;me++)j=u[me],M.writeUInt16(j);return{charMap:a,subtable:M.data,maxGlyphID:D+1}}},s}(),r2=function(s){function t(){return t.__super__.constructor.apply(this,arguments)}return Va(t,La),t.prototype.tag="cmap",t.prototype.parse=function(r){var a,n,i;for(r.pos=this.offset,this.version=r.readUInt16(),i=r.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=i?n<i:n>i;n=0<=i?++n:--n)a=new qp(r,this.offset),this.tables.push(a),a.isUnicode&&this.unicode==null&&(this.unicode=a);return!0},t.encode=function(r,a){var n,i;return a==null&&(a="macroman"),n=qp.encode(r,a),(i=new ri).writeUInt16(0),i.writeUInt16(1),n.table=i.data.concat(n.subtable),n},t}(),J3=function(s){function t(){return t.__super__.constructor.apply(this,arguments)}return Va(t,La),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t}(),K3=function(s){function t(){return t.__super__.constructor.apply(this,arguments)}return Va(t,La),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var a,n;for(n=[],a=0;a<10;++a)n.push(r.readByte());return n}(),this.charRange=function(){var a,n;for(n=[],a=0;a<4;++a)n.push(r.readInt());return n}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var a,n;for(n=[],a=0;a<2;a=++a)n.push(r.readInt());return n}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t}(),X3=function(s){function t(){return t.__super__.constructor.apply(this,arguments)}return Va(t,La),t.prototype.tag="post",t.prototype.parse=function(r){var a,n,i;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var o;for(n=r.readUInt16(),this.glyphNameIndex=[],o=0;0<=n?o<n:o>n;o=0<=n?++o:--o)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],i=[];r.pos<this.offset+this.length;)a=r.readByte(),i.push(this.names.push(r.readString(a)));return i;case 151552:return n=r.readUInt16(),this.offsets=r.read(n);case 196608:break;case 262144:return this.map=function(){var l,d,h;for(h=[],o=l=0,d=this.file.maxp.numGlyphs;0<=d?l<d:l>d;o=0<=d?++l:--l)h.push(r.readUInt32());return h}.call(this)}},t}(),Q3=function(s,t){this.raw=s,this.length=s.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},Z3=function(s){function t(){return t.__super__.constructor.apply(this,arguments)}return Va(t,La),t.prototype.tag="name",t.prototype.parse=function(r){var a,n,i,o,l,d,h,f,p,x,u;for(r.pos=this.offset,r.readShort(),a=r.readShort(),d=r.readShort(),n=[],o=0;0<=a?o<a:o>a;o=0<=a?++o:--o)n.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+d+r.readShort()});for(h={},o=p=0,x=n.length;p<x;o=++p)i=n[o],r.pos=i.offset,f=r.readString(i.length),l=new Q3(f,i),h[u=i.nameID]==null&&(h[u]=[]),h[i.nameID].push(l);this.strings=h,this.copyright=h[0],this.fontFamily=h[1],this.fontSubfamily=h[2],this.uniqueSubfamily=h[3],this.fontName=h[4],this.version=h[5];try{this.postscriptName=h[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch(k){this.postscriptName=h[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=h[7],this.manufacturer=h[8],this.designer=h[9],this.description=h[10],this.vendorUrl=h[11],this.designerUrl=h[12],this.license=h[13],this.licenseUrl=h[14],this.preferredFamily=h[15],this.preferredSubfamily=h[17],this.compatibleFull=h[18],this.sampleText=h[19]},t}(),eS=function(s){function t(){return t.__super__.constructor.apply(this,arguments)}return Va(t,La),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t}(),tS=function(s){function t(){return t.__super__.constructor.apply(this,arguments)}return Va(t,La),t.prototype.tag="hmtx",t.prototype.parse=function(r){var a,n,i,o,l,d,h;for(r.pos=this.offset,this.metrics=[],a=0,d=this.file.hhea.numberOfMetrics;0<=d?a<d:a>d;a=0<=d?++a:--a)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var f,p;for(p=[],a=f=0;0<=i?f<i:f>i;a=0<=i?++f:--f)p.push(r.readInt16());return p}(),this.widths=function(){var f,p,x,u;for(u=[],f=0,p=(x=this.metrics).length;f<p;f++)o=x[f],u.push(o.advance);return u}.call(this),n=this.widths[this.widths.length-1],h=[],a=l=0;0<=i?l<i:l>i;a=0<=i?++l:--l)h.push(this.widths.push(n));return h},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t}(),a2=[].slice,sS=function(s){function t(){return t.__super__.constructor.apply(this,arguments)}return Va(t,La),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var a,n,i,o,l,d,h,f,p,x;return r in this.cache?this.cache[r]:(o=this.file.loca,a=this.file.contents,n=o.indexOf(r),(i=o.lengthOf(r))===0?this.cache[r]=null:(a.pos=this.offset+n,l=(d=new ri(a.read(i))).readShort(),f=d.readShort(),x=d.readShort(),h=d.readShort(),p=d.readShort(),this.cache[r]=l===-1?new aS(d,f,x,h,p):new rS(d,l,f,x,h,p),this.cache[r]))},t.prototype.encode=function(r,a,n){var i,o,l,d,h;for(l=[],o=[],d=0,h=a.length;d<h;d++)i=r[a[d]],o.push(l.length),i&&(l=l.concat(i.encode(n)));return o.push(l.length),{table:l,offsets:o}},t}(),rS=function(){function s(t,r,a,n,i,o){this.raw=t,this.numberOfContours=r,this.xMin=a,this.yMin=n,this.xMax=i,this.yMax=o,this.compound=!1}return s.prototype.encode=function(){return this.raw.data},s}(),aS=function(){function s(t,r,a,n,i){var o,l;for(this.raw=t,this.xMin=r,this.yMin=a,this.xMax=n,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return s.prototype.encode=function(){var t,r,a;for(r=new ri(a2.call(this.raw.data)),t=0,a=this.glyphIDs.length;t<a;++t)r.pos=this.glyphOffsets[t];return r.data},s}(),nS=function(s){function t(){return t.__super__.constructor.apply(this,arguments)}return Va(t,La),t.prototype.tag="loca",t.prototype.parse=function(r){var a,n;return r.pos=this.offset,a=this.file.head.indexToLocFormat,this.offsets=a===0?function(){var i,o;for(o=[],n=0,i=this.length;n<i;n+=2)o.push(2*r.readUInt16());return o}.call(this):function(){var i,o;for(o=[],n=0,i=this.length;n<i;n+=4)o.push(r.readUInt32());return o}.call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,a){for(var n=new Uint32Array(this.offsets.length),i=0,o=0,l=0;l<n.length;++l)if(n[l]=i,o<a.length&&a[o]==l){++o,n[l]=i;var d=this.offsets[l],h=this.offsets[l+1]-d;h>0&&(i+=h)}for(var f=new Array(4*n.length),p=0;p<n.length;++p)f[4*p+3]=255&n[p],f[4*p+2]=(65280&n[p])>>8,f[4*p+1]=(16711680&n[p])>>16,f[4*p]=(4278190080&n[p])>>24;return f},t}(),iS=function(){function s(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return s.prototype.generateCmap=function(){var t,r,a,n,i;for(r in n=this.font.cmap.tables[0].codeMap,t={},i=this.subset)a=i[r],t[r]=n[a];return t},s.prototype.glyphsFor=function(t){var r,a,n,i,o,l,d;for(n={},o=0,l=t.length;o<l;o++)n[i=t[o]]=this.font.glyf.glyphFor(i);for(i in r=[],n)(a=n[i])!=null&&a.compound&&r.push.apply(r,a.glyphIDs);if(r.length>0)for(i in d=this.glyphsFor(r))a=d[i],n[i]=a;return n},s.prototype.encode=function(t,r){var a,n,i,o,l,d,h,f,p,x,u,k,j,v,w;for(n in a=r2.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),u={0:0},w=a.charMap)u[(d=w[n]).old]=d.new;for(k in x=a.maxGlyphID,o)k in u||(u[k]=x++);return f=function(P){var D,B;for(D in B={},P)B[P[D]]=D;return B}(u),p=Object.keys(f).sort(function(P,D){return P-D}),j=function(){var P,D,B;for(B=[],P=0,D=p.length;P<D;P++)l=p[P],B.push(f[l]);return B}(),i=this.font.glyf.encode(o,j,u),h=this.font.loca.encode(i.offsets,j),v={cmap:this.font.cmap.raw(),glyf:i.table,loca:h,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(v["OS/2"]=this.font.os2.raw()),this.font.directory.encode(v)},s}();kt.API.PDFObject=function(){var s;function t(){}return s=function(r,a){return(Array(a+1).join("0")+r).slice(-a)},t.convert=function(r){var a,n,i,o;if(Array.isArray(r))return"["+function(){var l,d,h;for(h=[],l=0,d=r.length;l<d;l++)a=r[l],h.push(t.convert(a));return h}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+s(r.getUTCFullYear(),4)+s(r.getUTCMonth(),2)+s(r.getUTCDate(),2)+s(r.getUTCHours(),2)+s(r.getUTCMinutes(),2)+s(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(n in i=["<<"],r)o=r[n],i.push("/"+n+" "+t.convert(o));return i.push(">>"),i.join(`
`)}return""+r},t}();function oS({className:s}){const[t,r]=N.useState({dateRange:"30d"}),[a,n]=N.useState(!1),[i,o]=N.useState(null),l=typeof window!="undefined"&&window.pulse2?window.pulse2:null,d=typeof window!="undefined"&&localStorage.getItem("jwtToken")||"",h=(v,w={})=>{const P=E({},w.headers||{});return d&&(P.Authorization=`Bearer ${d}`),l!=null&&l.nonce&&(P["X-WP-Nonce"]=l.nonce),fetch(v,Q(E({},w),{headers:P}))},f=N.useCallback(()=>xe(this,null,function*(){if(l){n(!0);try{const v=yield h(`${l.apiUrl}/analytics/summary`);if(v.ok){const w=yield v.json();o(Q(E({},w),{lastUpdated:new Date}))}else{const[w,P,D]=yield Promise.all([h(`${l.apiUrl}/projects`),h(`${l.apiUrl}/activities?limit=200&analytics=true`),h(`${l.apiUrl}/activities?limit=10&sort=desc`)]);if(w.ok&&P.ok&&D.ok){const B=yield w.json(),F=yield P.json(),se=yield D.json(),z={};B.forEach(S=>{const I=S.status||"Unknown";z[I]=(z[I]||0)+1});const C={},A={};F.forEach(S=>{const I=S.type||"unknown";C[I]=(C[I]||0)+1;const M=S.userName||"Unknown User";A[M]=(A[M]||0)+1});const L=Object.entries(A).map(([S,I])=>({userName:S,activityCount:I})).sort((S,I)=>I.activityCount-S.activityCount).slice(0,5),y=se.slice(0,10).map(S=>({id:S.id,type:S.type,userName:S.userName,projectName:S.projectName,createdAt:S.createdAt}));o({totalProjects:B.length,totalActivities:F.length,projectsByStatus:z,activitiesByType:C,recentActivities:y,topUsers:L,lastUpdated:new Date})}}}catch(v){}finally{n(!1)}}}),[l]);N.useEffect(()=>{f()},[f]);const p=()=>{f()},x=v=>{if(i){if(v==="json"){const w=JSON.stringify(i,null,2),P=new Blob([w],{type:"application/json"}),D=URL.createObjectURL(P);u(D,"analytics.json")}else if(v==="csv"){const w=o3.unparse([["Metric","Value"],["Total Projects",i.totalProjects],["Total Activities",i.totalActivities]]),P=new Blob([w],{type:"text/csv"}),D=URL.createObjectURL(P);u(D,"analytics.csv")}else if(v==="pdf"){const w=new kt;w.text("Analytics Report",10,10),w.text(`Total Projects: ${i.totalProjects}`,10,20),w.text(`Total Activities: ${i.totalActivities}`,10,30),w.save("analytics.pdf")}}},u=(v,w)=>{const P=document.createElement("a");P.href=v,P.download=w,P.click(),URL.revokeObjectURL(v)},k=v=>({planning:"bg-blue-100 text-blue-800",in_progress:"bg-yellow-100 text-yellow-800",review:"bg-purple-100 text-purple-800",completed:"bg-green-100 text-green-800",on_hold:"bg-gray-100 text-gray-800"})[v]||"bg-gray-100 text-gray-800",j=v=>({project_created:"bg-green-100 text-green-800",note_added:"bg-blue-100 text-blue-800",status_changed:"bg-purple-100 text-purple-800",member_added:"bg-indigo-100 text-indigo-800",media_uploaded:"bg-orange-100 text-orange-800"})[v]||"bg-gray-100 text-gray-800";return i?e.jsxs("div",{className:Ce("space-y-6",s),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Analytics Dashboard"}),e.jsxs("p",{className:"text-muted-foreground",children:["Last updated ",Zn(i.lastUpdated,{addSuffix:!0})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(bs,{value:t.dateRange,onValueChange:v=>r(w=>Q(E({},w),{dateRange:v})),children:[e.jsx(fs,{className:"w-32",children:e.jsx(ws,{})}),e.jsxs(ps,{children:[e.jsx(tt,{value:"7d",children:"Last 7 days"}),e.jsx(tt,{value:"30d",children:"Last 30 days"}),e.jsx(tt,{value:"90d",children:"Last 90 days"})]})]}),e.jsxs(le,{onClick:p,disabled:a,variant:"outline",children:[e.jsx(jo,{className:Ce("h-4 w-4 mr-2",a&&"animate-spin")}),"Refresh"]}),e.jsx(le,{onClick:()=>x("csv"),variant:"outline",children:"CSV"}),e.jsx(le,{onClick:()=>x("json"),variant:"outline",children:"JSON"}),e.jsx(le,{onClick:()=>x("pdf"),variant:"outline",children:"PDF"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(Ke,{children:[e.jsx(_t,{className:"pb-2",children:e.jsx(Ot,{className:"text-sm font-medium",children:"Total Projects"})}),e.jsxs(Xe,{children:[e.jsx("div",{className:"text-2xl font-bold",children:i.totalProjects}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Active projects in the system"})]})]}),e.jsxs(Ke,{children:[e.jsx(_t,{className:"pb-2",children:e.jsx(Ot,{className:"text-sm font-medium",children:"Total Activities"})}),e.jsxs(Xe,{children:[e.jsx("div",{className:"text-2xl font-bold",children:i.totalActivities}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Actions performed by users"})]})]}),e.jsxs(Ke,{children:[e.jsx(_t,{className:"pb-2",children:e.jsx(Ot,{className:"text-sm font-medium",children:"Active Users"})}),e.jsxs(Xe,{children:[e.jsx("div",{className:"text-2xl font-bold",children:i.topUsers.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Users with recent activity"})]})]}),e.jsxs(Ke,{children:[e.jsx(_t,{className:"pb-2",children:e.jsx(Ot,{className:"text-sm font-medium",children:"Avg Activities/Day"})}),e.jsxs(Xe,{children:[e.jsx("div",{className:"text-2xl font-bold",children:i.totalActivities>0?Math.round(i.totalActivities/30):0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Based on last 30 days"})]})]})]}),e.jsxs(Ke,{children:[e.jsx(_t,{children:e.jsxs(Ot,{className:"flex items-center gap-2",children:[e.jsx(Qo,{className:"h-5 w-5"}),"Projects by Status"]})}),e.jsx(Xe,{children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(i.projectsByStatus).map(([v,w])=>e.jsx("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:w}),e.jsx(Qe,{className:k(v),children:v.replace("_"," ")})]})},v))})})]}),e.jsxs(Ke,{children:[e.jsx(_t,{children:e.jsxs(Ot,{className:"flex items-center gap-2",children:[e.jsx(km,{className:"h-5 w-5"}),"Activities by Type"]})}),e.jsx(Xe,{children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(i.activitiesByType).map(([v,w])=>e.jsx("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:w}),e.jsx(Qe,{className:j(v),children:v.replace("_"," ")})]})},v))})})]}),e.jsxs(Ke,{children:[e.jsx(_t,{children:e.jsxs(Ot,{className:"flex items-center gap-2",children:[e.jsx(dr,{className:"h-5 w-5"}),"Most Active Users"]})}),e.jsx(Xe,{children:e.jsx("div",{className:"space-y-3",children:i.topUsers.map((v,w)=>e.jsx("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-muted rounded-full flex items-center justify-center text-sm font-medium",children:w+1}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:v.userName}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[v.activityCount," activities"]})]})]})},v.userName))})})]}),e.jsxs(Ke,{children:[e.jsx(_t,{children:e.jsxs(Ot,{className:"flex items-center gap-2",children:[e.jsx(es,{className:"h-5 w-5"}),"Recent Activities"]})}),e.jsx(Xe,{children:e.jsx("div",{className:"space-y-3",children:i.recentActivities.map(v=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Qe,{className:j(v.type),children:v.type.replace("_"," ")}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:v.userName}),v.projectName&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Project: ",v.projectName]})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:Zn(new Date(v.createdAt),{addSuffix:!0})})]},v.id))})})]})]}):e.jsxs("div",{className:Ce("space-y-6",s),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Analytics Dashboard"}),e.jsxs(le,{onClick:p,disabled:a,variant:"outline",children:[e.jsx(jo,{className:Ce("h-4 w-4 mr-2",a&&"animate-spin")}),"Refresh"]})]}),e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Zg,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Loading analytics data..."})]})]})}function lS({className:s,onNavigateToProject:t}){const{currentUser:r,users:a,invitations:n,loadingUsers:i,loadingInvitations:o,createUser:l,updateUser:d,deleteUser:h,createInvitation:f,updateInvitation:p,deleteInvitation:x,requestPasswordReset:u,hasPermission:k,canManageUsers:j,canInviteMembers:v,isCreatingUser:w,isUpdatingUser:P,isDeletingUser:D,isCreatingInvitation:B,isUpdatingInvitation:F,isDeletingInvitation:se,isRequestingPasswordReset:z}=e3(),[C,A]=N.useState("profile"),[L,y]=N.useState(!1),[S,I]=N.useState(!1),[M,J]=N.useState(!1),[ae,he]=N.useState(!1),[ce,ie]=N.useState(!1),[ve,Ae]=N.useState(""),[T,U]=N.useState("client"),[V,re]=N.useState("none"),[G,Y]=N.useState({email:"",displayName:"",role:"client",projectId:"none"}),[Z,de]=N.useState({displayName:(r==null?void 0:r.display_name)||"",bio:(r==null?void 0:r.bio)||"",timezone:(r==null?void 0:r.timezone)||"UTC",notificationsEnabled:(r==null?void 0:r.notifications_enabled)==="true"}),[Le,X]=N.useState(""),[me,we]=N.useState(!1),[oe,ee]=N.useState(null),H={totalMembers:a.length,activeMembers:a.filter(Be=>Be.status==="active").length,projectsCount:2,averageResponseTime:4.5,memberActivity:a.slice(0,5).map(Be=>({userId:Be.id,userName:Be.displayName,activityCount:Math.floor(Math.random()*20)+1,lastActivity:Be.lastActive}))},Ee=()=>{ve&&(f({email:ve,role:T,project_id:V==="none"?void 0:V,project_name:V==="none"?void 0:"Sample Project"}),y(!1),Ae(""),U("client"),re("none"))},Fe=()=>{!G.email||!G.displayName||(l({email:G.email,display_name:G.displayName,role:G.role,project_id:G.projectId==="none"?void 0:G.projectId}),I(!1),Y({email:"",displayName:"",role:"client",projectId:"none"}))},Ie=()=>{r&&(d({userId:r.id,updates:{id:r.id,display_name:Z.displayName,meta:{bio:Z.bio,timezone:Z.timezone,notifications_enabled:Z.notificationsEnabled.toString()}}}),J(!1))},Ue=()=>{Le&&(u(Le),he(!1),X(""))},Ye=Be=>{p({invitationId:Be.id,updates:{status:"pending",expires_at:new Date(Date.now()+7*24*60*60*1e3).toISOString()}})},We=Be=>{x(Be.id)},st=Be=>{confirm("Are you sure you want to delete this user? This action cannot be undone.")&&h(Be)},ot=Be=>{navigator.clipboard.writeText(Be)},mt=Be=>({admin:"bg-red-100 text-red-800",project_manager:"bg-blue-100 text-blue-800",client:"bg-green-100 text-green-800",artist:"bg-purple-100 text-purple-800",viewer:"bg-gray-100 text-gray-800"})[Be],rt=Be=>({pending:"bg-yellow-100 text-yellow-800",accepted:"bg-green-100 text-green-800",declined:"bg-red-100 text-red-800",expired:"bg-gray-100 text-gray-800"})[Be];return r?e.jsxs("div",{className:Ce("p-6 space-y-6",s),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Profile & Team Management"}),e.jsxs("div",{className:"flex gap-2",children:[j()&&e.jsxs(le,{onClick:()=>I(!0),className:"hover-shimmer",children:[e.jsx(Uf,{className:"h-4 w-4 mr-2"}),"Create User"]}),v()&&e.jsxs(le,{onClick:()=>y(!0),className:"hover-shimmer",children:[e.jsx(wo,{className:"h-4 w-4 mr-2"}),"Invite Member"]})]})]}),e.jsxs(Jo,{value:C,onValueChange:A,className:"space-y-4",children:[e.jsxs(Bi,{className:"grid w-full grid-cols-5",children:[e.jsx(yr,{value:"profile",children:"Profile"}),e.jsx(yr,{value:"team",children:"Team"}),e.jsx(yr,{value:"invitations",children:"Invitations"}),e.jsx(yr,{value:"analytics",children:"Analytics"}),e.jsx(yr,{value:"activity",children:"Activity"})]}),e.jsx(br,{value:"profile",className:"space-y-4",children:e.jsx(a3,{currentUser:r,hasPermission:k,setIsEditProfileDialogOpen:J,setIsPasswordResetDialogOpen:he,getRoleColor:mt})}),e.jsx(br,{value:"team",className:"space-y-4",children:e.jsx(n3,{teamStats:H,users:a,loadingUsers:i,currentUser:r,hasPermission:k,handleDeleteUser:st,isDeletingUser:D,getRoleColor:mt})}),e.jsx(br,{value:"invitations",className:"space-y-4",children:e.jsxs(Ke,{className:"glass-card",children:[e.jsx(_t,{children:e.jsxs(Ot,{className:"flex items-center gap-2",children:[e.jsx(wo,{className:"h-5 w-5"}),"Pending Invitations"]})}),e.jsx(Xe,{children:o?e.jsx("div",{className:"space-y-4",children:[1,2].map(Be=>e.jsx("div",{className:"flex items-center gap-3 p-4 border rounded-lg animate-pulse",children:e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-1/3"}),e.jsx("div",{className:"h-3 bg-muted rounded w-1/2"})]})},Be))}):e.jsxs("div",{className:"space-y-4",children:[n.map(Be=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:Be.email}),e.jsx(Qe,{className:rt(Be.status),children:Be.status}),e.jsx(Qe,{variant:"outline",className:mt(Be.role),children:Be.role.replace("_"," ")})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Invited by ",Be.invited_by_name," • ",Zn(new Date(Be.created_at),{addSuffix:!0})]}),Be.project_name&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Project: ",Be.project_name]})]}),e.jsx("div",{className:"flex items-center gap-2",children:Be.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsxs(le,{variant:"outline",size:"sm",onClick:()=>Ye(Be),disabled:F,className:"hover-shimmer",children:[e.jsx(hn,{className:"h-4 w-4 mr-2"}),"Resend"]}),e.jsx(le,{variant:"outline",size:"sm",onClick:()=>We(Be),disabled:se,className:"hover-shimmer text-destructive",children:e.jsx(Hs,{className:"h-4 w-4"})})]})})]},Be.id)),n.length===0&&e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(wo,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No pending invitations"}),v&&e.jsxs(le,{onClick:()=>y(!0),className:"mt-4 hover-shimmer",children:[e.jsx(wo,{className:"h-4 w-4 mr-2"}),"Send Invitation"]})]})]})})]})}),e.jsx(br,{value:"analytics",className:"space-y-4",children:e.jsx(oS,{})}),e.jsx(br,{value:"activity",className:"space-y-4",children:e.jsx(C1,{limit:50,userId:r==null?void 0:r.id,showFilters:!0,showRefreshButton:!0,isMainActivityTab:!1,hideAllUsersFilter:!0,onActivityClick:Be=>{Be.projectId&&Be.projectId!=="general"&&t&&t(Be.projectId)}})})]}),e.jsx(Ts,{open:L,onOpenChange:y,children:e.jsxs(Is,{className:"glass-card",children:[e.jsxs(Dr,{children:[e.jsx(Ks,{children:"Invite Team Member"}),e.jsx(vi,{children:"Send an invitation to join your team. They will receive an email with instructions to accept."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(jt,{htmlFor:"invite-email",children:"Email Address"}),e.jsx(Pt,{id:"invite-email",type:"email",placeholder:"colleague@example.com",value:ve,onChange:Be=>Ae(Be.target.value)})]}),e.jsxs("div",{children:[e.jsx(jt,{htmlFor:"invite-role",children:"Role"}),e.jsxs(bs,{value:T,onValueChange:Be=>U(Be),children:[e.jsx(fs,{children:e.jsx(ws,{})}),e.jsxs(ps,{children:[e.jsx(tt,{value:"client",children:"Client"}),e.jsx(tt,{value:"artist",children:"Artist"}),e.jsx(tt,{value:"project_manager",children:"Project Manager"}),e.jsx(tt,{value:"viewer",children:"Viewer"})]})]})]}),e.jsxs("div",{children:[e.jsx(jt,{htmlFor:"invite-project",children:"Project (Optional)"}),e.jsxs(bs,{value:V,onValueChange:re,children:[e.jsx(fs,{children:e.jsx(ws,{placeholder:"Select a project"})}),e.jsxs(ps,{children:[e.jsx(tt,{value:"none",children:"No specific project"}),e.jsx(tt,{value:"project-1",children:"Sample Project 1"}),e.jsx(tt,{value:"project-2",children:"Sample Project 2"})]})]})]})]}),e.jsxs(Rn,{children:[e.jsx(le,{variant:"outline",onClick:()=>y(!1),children:"Cancel"}),e.jsxs(le,{onClick:Ee,className:"hover-shimmer",disabled:B||!ve,children:[e.jsx(hn,{className:"h-4 w-4 mr-2"}),"Send Invitation"]})]})]})}),e.jsx(Ts,{open:S,onOpenChange:I,children:e.jsxs(Is,{className:"glass-card",children:[e.jsxs(Dr,{children:[e.jsx(Ks,{children:"Create New User"}),e.jsx(vi,{children:"Create a new user account. A secure password will be generated automatically."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(jt,{htmlFor:"create-email",children:"Email Address"}),e.jsx(Pt,{id:"create-email",type:"email",placeholder:"user@example.com",value:G.email,onChange:Be=>Y(ft=>Q(E({},ft),{email:Be.target.value}))})]}),e.jsxs("div",{children:[e.jsx(jt,{htmlFor:"create-name",children:"Display Name"}),e.jsx(Pt,{id:"create-name",placeholder:"John Doe",value:G.displayName,onChange:Be=>Y(ft=>Q(E({},ft),{displayName:Be.target.value}))})]}),e.jsxs("div",{children:[e.jsx(jt,{htmlFor:"create-role",children:"Role"}),e.jsxs(bs,{value:G.role,onValueChange:Be=>Y(ft=>Q(E({},ft),{role:Be})),children:[e.jsx(fs,{children:e.jsx(ws,{})}),e.jsxs(ps,{children:[e.jsx(tt,{value:"client",children:"Client"}),e.jsx(tt,{value:"artist",children:"Artist"}),e.jsx(tt,{value:"project_manager",children:"Project Manager"}),e.jsx(tt,{value:"viewer",children:"Viewer"})]})]})]}),e.jsxs("div",{children:[e.jsx(jt,{htmlFor:"create-project",children:"Assign to Project (Optional)"}),e.jsxs(bs,{value:G.projectId,onValueChange:Be=>Y(ft=>Q(E({},ft),{projectId:Be})),children:[e.jsx(fs,{children:e.jsx(ws,{placeholder:"Select a project"})}),e.jsxs(ps,{children:[e.jsx(tt,{value:"none",children:"No specific project"}),e.jsx(tt,{value:"project-1",children:"Sample Project 1"}),e.jsx(tt,{value:"project-2",children:"Sample Project 2"})]})]})]})]}),e.jsxs(Rn,{children:[e.jsx(le,{variant:"outline",onClick:()=>I(!1),children:"Cancel"}),e.jsxs(le,{onClick:Fe,className:"hover-shimmer",disabled:w||!G.email||!G.displayName,children:[e.jsx(Uf,{className:"h-4 w-4 mr-2"}),"Create User"]})]})]})}),e.jsx(Ts,{open:M,onOpenChange:J,children:e.jsxs(Is,{className:"glass-card",children:[e.jsxs(Dr,{children:[e.jsx(Ks,{children:"Edit Profile"}),e.jsx(vi,{children:"Update your profile information and preferences."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(jt,{htmlFor:"edit-name",children:"Display Name"}),e.jsx(Pt,{id:"edit-name",value:Z.displayName,onChange:Be=>de(ft=>Q(E({},ft),{displayName:Be.target.value}))})]}),e.jsxs("div",{children:[e.jsx(jt,{htmlFor:"edit-bio",children:"Bio"}),e.jsx(Sr,{id:"edit-bio",placeholder:"Tell us about yourself...",value:Z.bio,onChange:Be=>de(ft=>Q(E({},ft),{bio:Be.target.value}))})]}),e.jsxs("div",{children:[e.jsx(jt,{htmlFor:"edit-timezone",children:"Timezone"}),e.jsxs(bs,{value:Z.timezone,onValueChange:Be=>de(ft=>Q(E({},ft),{timezone:Be})),children:[e.jsx(fs,{children:e.jsx(ws,{})}),e.jsxs(ps,{children:[e.jsx(tt,{value:"UTC",children:"UTC"}),e.jsx(tt,{value:"America/New_York",children:"Eastern Time"}),e.jsx(tt,{value:"America/Chicago",children:"Central Time"}),e.jsx(tt,{value:"America/Denver",children:"Mountain Time"}),e.jsx(tt,{value:"America/Los_Angeles",children:"Pacific Time"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(T1,{id:"notifications",checked:Z.notificationsEnabled,onCheckedChange:Be=>de(ft=>Q(E({},ft),{notificationsEnabled:Be}))}),e.jsx(jt,{htmlFor:"notifications",children:"Enable notifications"})]})]}),e.jsxs(Rn,{children:[e.jsx(le,{variant:"outline",onClick:()=>J(!1),children:"Cancel"}),e.jsxs(le,{onClick:Ie,className:"hover-shimmer",disabled:P,children:[e.jsx(Am,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})]})}),e.jsx(Ts,{open:ae,onOpenChange:he,children:e.jsxs(Is,{className:"glass-card",children:[e.jsxs(Dr,{children:[e.jsx(Ks,{children:"Request Password Reset"}),e.jsx(vi,{children:"Enter your email address to receive a password reset link."})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx(jt,{htmlFor:"reset-email",children:"Email Address"}),e.jsx(Pt,{id:"reset-email",type:"email",placeholder:"your@email.com",value:Le,onChange:Be=>X(Be.target.value)})]})}),e.jsxs(Rn,{children:[e.jsx(le,{variant:"outline",onClick:()=>he(!1),children:"Cancel"}),e.jsxs(le,{onClick:Ue,className:"hover-shimmer",disabled:z||!Le,children:[e.jsx(Cm,{className:"h-4 w-4 mr-2"}),"Send Reset Link"]})]})]})}),e.jsx(Ts,{open:ce,onOpenChange:ie,children:e.jsxs(Is,{className:"glass-card",children:[e.jsxs(Dr,{children:[e.jsx(Ks,{children:"User Credentials"}),e.jsx(vi,{children:"Please save these credentials securely and share them with the user."})]}),e.jsx("div",{className:"space-y-4",children:oe&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(jt,{children:"Email"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pt,{value:oe.email,readOnly:!0}),e.jsx(le,{variant:"outline",size:"sm",onClick:()=>ot(oe.email),children:e.jsx(Hl,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{children:[e.jsx(jt,{children:"Username"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pt,{value:oe.username,readOnly:!0}),e.jsx(le,{variant:"outline",size:"sm",onClick:()=>ot(oe.username),children:e.jsx(Hl,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{children:[e.jsx(jt,{children:"Password"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pt,{type:me?"text":"password",value:oe.password,readOnly:!0}),e.jsx(le,{variant:"outline",size:"sm",onClick:()=>we(!me),children:me?e.jsx(tx,{className:"h-4 w-4"}):e.jsx(Yd,{className:"h-4 w-4"})}),e.jsx(le,{variant:"outline",size:"sm",onClick:()=>ot(oe.password),children:e.jsx(Hl,{className:"h-4 w-4"})})]})]})]})}),e.jsx(Rn,{children:e.jsxs(le,{onClick:()=>ie(!1),children:[e.jsx(Tr,{className:"h-4 w-4 mr-2"}),"Got it"]})})]})})]}):e.jsx("div",{className:Ce("flex items-center justify-center h-64",s),children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ho,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:"Please log in to view your profile"})]})})}const cS="https://virtual.motionpal.ir/wp-json/jwt-auth/v1/token",dS=({isOpen:s,onClose:t,onLoginSuccess:r})=>{const[a,n]=N.useState(""),[i,o]=N.useState(""),[l,d]=N.useState(!1),[h,f]=N.useState("");if(!s)return null;const p=x=>xe(void 0,null,function*(){x.preventDefault(),d(!0),f("");try{const k=yield(yield fetch(cS,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a,password:i})})).json();if(k.token){localStorage.setItem("jwtToken",k.token);let j=null;try{const w=yield fetch("https://virtual.motionpal.ir/wp-json/pulse2/v1/me",{headers:{Authorization:`Bearer ${k.token}`}});if(!w.ok){const D=yield w.text();throw new Error(`Failed to fetch user ID: Status ${w.status} - ${D}`)}const P=yield w.json();P.id&&(j=String(P.id))}catch(w){}j?localStorage.setItem("userId",j):localStorage.setItem("userId","demo-user");const v=k.user_display_name||k.user_nicename||k.user_email||a;localStorage.setItem("userDisplayName",v),r(k.token,v),t()}else f(k.message||"Login failed")}catch(u){f("Network error")}finally{d(!1)}});return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",children:[e.jsxs("div",{className:"bg-background text-foreground rounded-2xl shadow-2xl p-6 w-full max-w-sm relative flex flex-col items-center border border-border",children:[e.jsx("button",{onClick:t,className:"absolute top-2 right-2 text-2xl text-foreground/60 hover:text-foreground",children:"×"}),e.jsxs("div",{className:"flex flex-col items-center mb-6",children:[e.jsx("div",{className:"glassy-login-icon mb-3 flex items-center justify-center",children:e.jsxs("svg",{width:"44",height:"44",viewBox:"0 0 44 44",fill:"none",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"primary-gradient",x1:"0",y1:"0",x2:"44",y2:"44",gradientUnits:"userSpaceOnUse",children:[e.jsx("stop",{stopColor:"#D72660"}),e.jsx("stop",{offset:"1",stopColor:"#FF6FB5"})]})}),e.jsx("circle",{cx:"22",cy:"22",r:"20",fill:"url(#primary-gradient)",fillOpacity:"0.7"}),e.jsx("circle",{cx:"22",cy:"22",r:"20",fill:"white",fillOpacity:"0.08"}),e.jsx("circle",{cx:"22",cy:"22",r:"20",stroke:"white",strokeOpacity:"0.18",strokeWidth:"2"}),e.jsx("path",{d:"M22 13v11l8 5",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})]})}),e.jsx("h2",{className:"text-2xl font-bold mb-1",children:"Welcome Back"})]}),e.jsxs("form",{onSubmit:p,className:"space-y-5 w-full",children:[e.jsxs("div",{className:"relative",children:[e.jsx(wo,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground"}),e.jsx(Pt,{type:"text",value:a,onChange:x=>n(x.target.value),className:"pl-10",placeholder:"email address",required:!0})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Cm,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground"}),e.jsx(Pt,{type:"password",value:i,onChange:x=>o(x.target.value),className:"pl-10",placeholder:"Password",required:!0})]}),h&&e.jsx("div",{className:"text-destructive text-sm text-center",children:h}),e.jsx(le,{type:"submit",className:"w-full button-primary-enhanced hover-shimmer cyrus-ui mt-2",disabled:l,children:l?"Logging in...":"Login"})]})]}),e.jsx("style",{children:`
        .glassy-login-icon {
          background: rgba(255,255,255,0.10);
          border-radius: 9999px;
          box-shadow: 0 4px 32px 0 rgba(215,38,96,0.12), 0 1.5px 8px 0 rgba(255,111,181,0.10);
          backdrop-filter: blur(8px);
          padding: 0.75rem;
        }
      `})]})};function uS(s){const[t,r]=N.useState("active"),[a,n]=N.useState("newest"),[i,o]=N.useState("all"),[l,d]=N.useState("");return{filteredAndSortedProjects:N.useMemo(()=>{if(!Array.isArray(s))return[];const f=p=>{try{return new Date(p)}catch(x){return null}};return s.filter(p=>t==="archived"?p.isArchived:t==="active"?!p.isArchived:!0).filter(p=>i==="all"?!0:p.status===i).filter(p=>{if(!l)return!0;const x=l.toLowerCase();return p.name.toLowerCase().includes(x)||p.client.toLowerCase().includes(x)||p.projectManager.toLowerCase().includes(x)||p.brief.toLowerCase().includes(x)}).sort((p,x)=>{switch(a){case"newest":return new Date(x.createdAt||0).getTime()-new Date(p.createdAt||0).getTime();case"oldest":return new Date(p.createdAt||0).getTime()-new Date(x.createdAt||0).getTime();case"name":return p.name.localeCompare(x.name);case"status":return p.status.localeCompare(x.status);case"priority":const u={urgent:4,high:3,medium:2,low:1};return(u[x.priority]||0)-(u[p.priority]||0);case"deadline":const k=f(p.endDate),j=f(x.endDate);return!k&&!j?0:k?j?k.getTime()-j.getTime():-1:1;default:return 0}})},[s,t,a,i,l]),filterMode:t,setFilterMode:r,sortMode:a,setSortMode:n,statusFilter:i,setStatusFilter:o,searchTerm:l,setSearchTerm:d}}function n2(){const s=typeof window!="undefined"&&window.pulse2?window.pulse2:null,t=typeof window!="undefined"&&localStorage.getItem("jwtToken")||"",r=(L,y={})=>{const S=E({},y.headers||{});return t&&(S.Authorization=`Bearer ${t}`),s!=null&&s.nonce&&(S["X-WP-Nonce"]=s.nonce),fetch(L,Q(E({},y),{headers:S}))},a=N.useCallback(()=>{const L=typeof window!="undefined"&&localStorage.getItem("userId")||"demo-user",y=typeof window!="undefined"&&localStorage.getItem("userDisplayName")||"Demo User",S=typeof window!="undefined"?localStorage.getItem("userAvatar"):void 0;return{userId:L,userName:y,userAvatar:S}},[]),n=N.useCallback(()=>typeof window=="undefined"?{}:{userAgent:navigator.userAgent,ipAddress:void 0,location:void 0},[]),i=N.useCallback(L=>xe(this,null,function*(){try{const{userId:y,userName:S,userAvatar:I}=a(),M=n(),J=Q(E({},L),{userId:y,userName:S,userAvatar:I,timestamp:new Date,metadata:M}),ae=typeof window!="undefined"&&window.pulse2?window.pulse2:null,he=typeof window!="undefined"&&localStorage.getItem("jwtToken")||"";if(ae){const ce=J.details||{},ie={type:J.type,title:J.type.replace("_"," ").replace(/\b\w/g,Ae=>Ae.toUpperCase()),description:JSON.stringify(ce),project_id:J.projectId,project_name:"projectName"in ce?ce.projectName:void 0,related_id:"noteId"in ce?ce.noteId:"projectId"in ce?ce.projectId:J.projectId};(yield fetch(`${ae.apiUrl}/activities`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${he}`,"X-WP-Nonce":ae.nonce},body:JSON.stringify(ie)})).ok}else{const ce=JSON.parse(localStorage.getItem("activities")||"[]");ce.unshift(Q(E({},J),{id:`activity-${Date.now()}-${Math.random()}`})),localStorage.setItem("activities",JSON.stringify(ce.slice(0,1e3)))}}catch(y){}}),[a,n]),o=N.useCallback((L,y,S)=>xe(this,null,function*(){yield i({type:"project_created",projectId:L,details:{projectName:y,client:S}})}),[i]),l=N.useCallback((L,y,S,I=!1,M)=>xe(this,null,function*(){let J="Unknown Project";try{const ae=typeof window!="undefined"&&window.pulse2?window.pulse2:null;if(ae&&L&&L!=="general"){const he=yield r(`${ae.apiUrl}/projects/${L}`);he.ok&&(J=(yield he.json()).name||"Unknown Project")}}catch(ae){}yield i({type:"note_added",projectId:L,details:{projectName:J,noteId:y,noteContentPreview:S.length>100?S.substring(0,100)+"...":S,isReply:I,parentNoteId:M}})}),[i]),d=N.useCallback((L,y,S,I)=>xe(this,null,function*(){yield i({type:"note_edited",projectId:L,details:{noteId:y,noteContentPreview:S.length>100?S.substring(0,100)+"...":S,oldContent:I.length>100?I.substring(0,100)+"...":I}})}),[i]),h=N.useCallback((L,y,S)=>xe(this,null,function*(){yield i({type:"note_deleted",projectId:L,details:{noteId:y,noteContentPreview:S.length>100?S.substring(0,100)+"...":S}})}),[i]),f=N.useCallback((L,y,S)=>xe(this,null,function*(){yield i({type:"media_uploaded",projectId:L,details:{mediaIds:y,mediaCount:y.length,categories:S}})}),[i]),p=N.useCallback((L,y)=>xe(this,null,function*(){yield i({type:"media_deleted",projectId:L,details:{mediaIds:y,mediaCount:y.length}})}),[i]),x=N.useCallback((L,y,S,I)=>xe(this,null,function*(){let M="Unknown Project";try{if(s&&L&&L!=="general"){const J=yield r(`${s.apiUrl}/projects/${L}`);J.ok&&(M=(yield J.json()).name||"Unknown Project")}}catch(J){}yield i({type:"status_changed",projectId:L,details:{projectName:M,statusFrom:y,statusTo:S,reason:I}})}),[i,s,r]),u=N.useCallback((L,y,S,I,M)=>xe(this,null,function*(){yield i({type:I?"deadline_extended":"deadline_shortened",projectId:L,details:{deadlineFrom:y,deadlineTo:S,reason:M}})}),[i]),k=N.useCallback((L,y,S)=>xe(this,null,function*(){yield i({type:"priority_changed",projectId:L,details:{priorityFrom:y,priorityTo:S}})}),[i]),j=N.useCallback((L,y,S,I,M)=>xe(this,null,function*(){yield i({type:"external_link_added",projectId:L,details:{linkId:y,linkName:S,linkType:I,linkUrl:M}})}),[i]),v=N.useCallback((L,y,S,I)=>xe(this,null,function*(){yield i({type:"external_link_removed",projectId:L,details:{linkId:y,linkName:S,linkType:I}})}),[i]),w=N.useCallback((L,y,S)=>xe(this,null,function*(){yield i({type:"brief_updated",projectId:L,details:{briefPreview:y.length>100?y.substring(0,100)+"...":y,oldBriefPreview:S.length>100?S.substring(0,100)+"...":S}})}),[i]),P=N.useCallback((L,y,S,I)=>xe(this,null,function*(){yield i({type:"member_added",projectId:L,details:{memberId:y,memberName:S,memberRole:I}})}),[i]),D=N.useCallback((L,y,S,I)=>xe(this,null,function*(){yield i({type:"member_removed",projectId:L,details:{memberId:y,memberName:S,memberRole:I}})}),[i]),B=N.useCallback((L,y,S,I,M)=>xe(this,null,function*(){yield i({type:"member_role_changed",projectId:L,details:{memberId:y,memberName:S,roleFrom:I,roleTo:M}})}),[i]),F=N.useCallback((L,y,S)=>xe(this,null,function*(){yield i({type:"project_manager_changed",projectId:L,details:{managerFrom:y,managerTo:S}})}),[i]),se=N.useCallback((L,y,S)=>xe(this,null,function*(){yield i({type:"client_changed",projectId:L,details:{clientFrom:y,clientTo:S}})}),[i]),z=N.useCallback((L,y,S,I)=>xe(this,null,function*(){yield i({type:"artists_updated",projectId:L,details:{artistsAdded:y,artistsRemoved:S,totalArtists:I}})}),[i]),C=N.useCallback((L,y,S)=>xe(this,null,function*(){yield i({type:"video_url_added",projectId:L,details:{videoUrl:y,videoPlatform:S}})}),[i]),A=N.useCallback((L,y,S)=>xe(this,null,function*(){yield i({type:"video_url_removed",projectId:L,details:{videoUrl:y,videoPlatform:S}})}),[i]);return{logActivity:i,logProjectCreated:o,logNoteAdded:l,logNoteEdited:d,logNoteDeleted:h,logMediaUploaded:f,logMediaDeleted:p,logStatusChanged:x,logDeadlineChanged:u,logPriorityChanged:k,logExternalLinkAdded:j,logExternalLinkRemoved:v,logBriefUpdated:w,logMemberAdded:P,logMemberRemoved:D,logMemberRoleChanged:B,logProjectManagerChanged:F,logClientChanged:se,logArtistsUpdated:z,logVideoUrlAdded:C,logVideoUrlRemoved:A}}const i2=N.createContext(void 0);function hS({children:s,defaultTheme:t="dark"}){const[r,a]=N.useState(()=>localStorage.getItem("theme")||t);N.useEffect(()=>{const o=window.document.documentElement;o.classList.remove("light","dark"),o.classList.add(r),localStorage.setItem("theme",r)},[r]);const i={theme:r,setTheme:a,toggleTheme:()=>{a(r==="dark"?"light":"dark")}};return e.jsx(i2.Provider,{value:i,children:s})}const mS=()=>{const s=N.useContext(i2);if(s===void 0)throw new Error("useTheme must be used within a ThemeProvider");return s};var o2="AlertDialog",[fS,qk]=fn(o2,[_g]),pn=_g(),l2=s=>{const n=s,{__scopeAlertDialog:t}=n,r=Me(n,["__scopeAlertDialog"]),a=pn(t);return e.jsx(Cg,Q(E(E({},a),r),{modal:!0}))};l2.displayName=o2;var pS="AlertDialogTrigger",gS=N.forwardRef((s,t)=>{const i=s,{__scopeAlertDialog:r}=i,a=Me(i,["__scopeAlertDialog"]),n=pn(r);return e.jsx(Ag,Q(E(E({},n),a),{ref:t}))});gS.displayName=pS;var xS="AlertDialogPortal",c2=s=>{const n=s,{__scopeAlertDialog:t}=n,r=Me(n,["__scopeAlertDialog"]),a=pn(t);return e.jsx(kg,E(E({},a),r))};c2.displayName=xS;var vS="AlertDialogOverlay",d2=N.forwardRef((s,t)=>{const i=s,{__scopeAlertDialog:r}=i,a=Me(i,["__scopeAlertDialog"]),n=pn(r);return e.jsx(vm,Q(E(E({},n),a),{ref:t}))});d2.displayName=vS;var Lo="AlertDialogContent",[yS,bS]=fS(Lo),wS=lg("AlertDialogContent"),u2=N.forwardRef((s,t)=>{const h=s,{__scopeAlertDialog:r,children:a}=h,n=Me(h,["__scopeAlertDialog","children"]),i=pn(r),o=N.useRef(null),l=As(t,o),d=N.useRef(null);return e.jsx(Yv,{contentName:Lo,titleName:h2,docsSlug:"alert-dialog",children:e.jsx(yS,{scope:r,cancelRef:d,children:e.jsxs(ym,Q(E(E({role:"alertdialog"},i),n),{ref:l,onOpenAutoFocus:Rt(n.onOpenAutoFocus,f=>{var p;f.preventDefault(),(p=d.current)==null||p.focus({preventScroll:!0})}),onPointerDownOutside:f=>f.preventDefault(),onInteractOutside:f=>f.preventDefault(),children:[e.jsx(wS,{children:a}),e.jsx(NS,{contentRef:o})]}))})})});u2.displayName=Lo;var h2="AlertDialogTitle",m2=N.forwardRef((s,t)=>{const i=s,{__scopeAlertDialog:r}=i,a=Me(i,["__scopeAlertDialog"]),n=pn(r);return e.jsx(wm,Q(E(E({},n),a),{ref:t}))});m2.displayName=h2;var f2="AlertDialogDescription",p2=N.forwardRef((s,t)=>{const i=s,{__scopeAlertDialog:r}=i,a=Me(i,["__scopeAlertDialog"]),n=pn(r);return e.jsx(jm,Q(E(E({},n),a),{ref:t}))});p2.displayName=f2;var jS="AlertDialogAction",g2=N.forwardRef((s,t)=>{const i=s,{__scopeAlertDialog:r}=i,a=Me(i,["__scopeAlertDialog"]),n=pn(r);return e.jsx(bm,Q(E(E({},n),a),{ref:t}))});g2.displayName=jS;var x2="AlertDialogCancel",v2=N.forwardRef((s,t)=>{const l=s,{__scopeAlertDialog:r}=l,a=Me(l,["__scopeAlertDialog"]),{cancelRef:n}=bS(x2,r),i=pn(r),o=As(t,n);return e.jsx(bm,Q(E(E({},i),a),{ref:o}))});v2.displayName=x2;var NS=({contentRef:s})=>{const t=`\`${Lo}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Lo}\` by passing a \`${f2}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Lo}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return N.useEffect(()=>{var a;const r=document.getElementById((a=s.current)==null?void 0:a.getAttribute("aria-describedby"))},[t,s]),null},SS=l2,kS=c2,y2=d2,b2=u2,w2=g2,j2=v2,N2=m2,S2=p2;const CS=SS,AS=kS,k2=N.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Me(n,["className"]);return e.jsx(y2,Q(E({className:Ce("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s)},t),{ref:r}))});k2.displayName=y2.displayName;const C2=N.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Me(n,["className"]);return e.jsxs(AS,{children:[e.jsx(k2,{}),e.jsx(b2,E({ref:r,className:Ce("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s)},t))]})});C2.displayName=b2.displayName;const A2=r=>{var a=r,{className:s}=a,t=Me(a,["className"]);return e.jsx("div",E({className:Ce("flex flex-col space-y-2 text-center sm:text-left",s)},t))};A2.displayName="AlertDialogHeader";const P2=r=>{var a=r,{className:s}=a,t=Me(a,["className"]);return e.jsx("div",E({className:Ce("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s)},t))};P2.displayName="AlertDialogFooter";const _2=N.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Me(n,["className"]);return e.jsx(N2,E({ref:r,className:Ce("text-lg font-semibold",s)},t))});_2.displayName=N2.displayName;const L2=N.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Me(n,["className"]);return e.jsx(S2,E({ref:r,className:Ce("text-sm text-muted-foreground",s)},t))});L2.displayName=S2.displayName;const I2=N.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Me(n,["className"]);return e.jsx(w2,E({ref:r,className:Ce(Om(),s)},t))});I2.displayName=w2.displayName;const D2=N.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Me(n,["className"]);return e.jsx(j2,E({ref:r,className:Ce(Om({variant:"outline"}),"mt-2 sm:mt-0",s)},t))});D2.displayName=j2.displayName;function du(s){const[t,r]=N.useState([]),[a,n]=N.useState(""),[i,o]=N.useState(null),[l,d]=N.useState(""),[h,f]=N.useState(null),[p,x]=N.useState(""),[u,k]=N.useState(null),j=n2(),v=localStorage.getItem("userId")||"demo-user",w=localStorage.getItem("userDisplayName")||"Demo User",P=window.pulse2;N.useEffect(()=>{if(s&&P){const C=()=>xe(this,null,function*(){const L=yield z(`${P.apiUrl}/notes?project_id=${s}`);r(L||[])});C();const A=setInterval(C,5e3);return()=>clearInterval(A)}},[s,P]);const D=()=>xe(this,null,function*(){if(!a.trim()||!s)return;const C=yield z(`${P.apiUrl}/notes`,{body:JSON.stringify({project_id:s,content:a})});r(A=>[...A,C]),n(""),j.logNoteAdded(s,C.id,a)}),B=C=>xe(this,null,function*(){if(!l.trim()||!s)return;const A=yield z(`${P.apiUrl}/notes`,{body:JSON.stringify({project_id:s,content:l,parent_note_id:C})});r(L=>L.map(y=>y.id===C?Q(E({},y),{replies:[...y.replies||[],A]}):y)),o(null),d(""),j.logNoteAdded(s,A.id,l,!0,C)}),F=C=>xe(this,null,function*(){if(!p.trim()||!s)return;const A=t.find(S=>S.id===C),L=(A==null?void 0:A.content)||"",y=yield z(`${P.apiUrl}/notes/${C}`,{body:JSON.stringify({content:p})});r(S=>S.map(I=>I.id===C?y:I)),f(null),x(""),j.logNoteEdited(s,C,p,L)}),se=()=>xe(this,null,function*(){if(!u||!s)return;const C=t.find(A=>A.id===u);C&&(yield z(`${P.apiUrl}/notes/${u}`,{}),r(A=>A.filter(L=>L.id!==u)),j.logNoteDeleted(s,u,C.content)),k(null)}),z=(L,...y)=>xe(this,[L,...y],function*(C,A={}){return{id:"mock-id",projectId:s,authorId:v,authorName:w,content:"mock-content",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}});return{notes:t,noteInput:a,setNoteInput:n,replyTo:i,setReplyTo:o,replyInput:l,setReplyInput:d,editingNoteId:h,setEditingNoteId:f,editInput:p,setEditInput:x,noteIdToDelete:u,setNoteIdToDelete:k,handleAddNote:D,handleReply:B,handleEditNote:F,handleConfirmDelete:se}}function PS({autoRefresh:s,onToggle:t,className:r,size:a="sm"}){return e.jsx("div",{className:`flex items-center gap-2 ${r}`,children:e.jsx(le,{variant:s?"default":"outline",size:a,onClick:()=>t(!s),className:"flex items-center gap-2",children:s?e.jsxs(e.Fragment,{children:[e.jsx(Lh,{className:"h-4 w-4"}),"5s Auto"]}):e.jsxs(e.Fragment,{children:[e.jsx(ix,{className:"h-4 w-4"}),"Manual"]})})})}function _S({imageUrl:s,imageAlt:t,projectId:r,mediaId:a,userId:n,userName:i,comments:o=[],onAddComment:l,onResolveComment:d,className:h}){const f=N.useRef(null),[p,x]=N.useState(!0),[u,k]=N.useState(null),j=du(r),{setNoteInput:v,handleAddNote:w}=j,P=()=>{!u||!u.content.trim()||(v(u.content),w(),k(null))},D=()=>{k(null)},B=se=>{d==null||d(se)},F=se=>{if(u)return;const z=se.currentTarget.getBoundingClientRect(),C=(se.clientX-z.left)/z.width*100,A=(se.clientY-z.top)/z.height*100;k({x:C,y:A,content:""})};return e.jsxs("div",{className:Ce("relative",h),children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Nr,{className:"w-4 h-4 text-blue-600"}),e.jsxs("span",{className:"text-sm font-medium",children:["Comments (",o.filter(se=>!se.resolved).length,")"]})]}),e.jsxs(le,{variant:"outline",size:"sm",onClick:()=>x(!p),className:"text-xs",children:[p?"Hide":"Show"," Comments"]})]}),e.jsxs("div",{className:"relative glass-card p-2 rounded-lg",children:[e.jsx("img",{ref:f,src:s,alt:t,className:"w-full h-auto rounded cursor-crosshair",onClick:F}),p&&o.map(se=>e.jsx(LS,{comment:se,onResolve:()=>B(se.id),currentUserId:n},se.id)),u&&e.jsx("div",{className:"absolute z-20",style:{left:`${u.x}%`,top:`${u.y}%`,transform:"translate(-50%, -50%)"},children:e.jsx(IS,{value:u.content,onChange:se=>k(Q(E({},u),{content:se})),onSave:P,onCancel:D})})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2 text-center",children:"Click anywhere on the image to add a comment"})]})}function LS({comment:s,onResolve:t,currentUserId:r}){const[a,n]=N.useState(!1),i=s.authorId===r;return e.jsxs(e.Fragment,{children:[e.jsx("button",{className:Ce("absolute w-6 h-6 rounded-full border-2 border-white shadow-lg transition-all duration-200 z-10",s.resolved?"bg-green-500 hover:bg-green-600":"bg-blue-500 hover:bg-blue-600",a&&"scale-110"),style:{left:`${s.x}%`,top:`${s.y}%`,transform:"translate(-50%, -50%)"},onClick:o=>{o.stopPropagation(),n(!a)},children:e.jsx(Nr,{className:"w-3 h-3 text-white mx-auto"})}),a&&e.jsx("div",{className:"absolute z-20 min-w-[250px] max-w-[300px]",style:{left:`${s.x}%`,top:`${s.y}%`,transform:"translate(-50%, calc(-100% - 10px))"},children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg border p-3",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium",children:s.authorName}),s.resolved&&e.jsx(Qe,{variant:"secondary",className:"text-xs",children:"Resolved"})]}),e.jsx("button",{onClick:()=>n(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(Hs,{className:"w-3 h-3"})})]}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 mb-2",children:s.content}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-gray-500",children:new Date(s.createdAt).toLocaleDateString()}),!s.resolved&&i&&e.jsxs(le,{size:"sm",variant:"outline",onClick:t,className:"text-xs h-6",children:[e.jsx(la,{className:"w-3 h-3 mr-1"}),"Resolve"]})]})]})})]})}function IS({value:s,onChange:t,onSave:r,onCancel:a}){const n=i=>{i.key==="Enter"&&!i.shiftKey?(i.preventDefault(),r()):i.key==="Escape"&&a()};return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg border p-3 min-w-[250px]",children:[e.jsx(Sr,{value:s,onChange:i=>t(i.target.value),placeholder:"Add your comment...",className:"min-h-[60px] mb-2 text-sm",onKeyDown:n,autoFocus:!0}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(le,{variant:"outline",size:"sm",onClick:a,children:"Cancel"}),e.jsxs(le,{size:"sm",onClick:r,disabled:!s.trim(),children:[e.jsx(hn,{className:"w-3 h-3 mr-1"}),"Comment"]})]})]})}const wh=["#FF6B35","#F7931E","#FFD23F","#06FFA5","#118AB2","#073B4C","#7209B7","#F72585"],DS=s=>{if(!s)return wh[0];let t=0;for(let r=0;r<s.length;r++)t=s.charCodeAt(r)+((t<<5)-t);return wh[Math.abs(t)%wh.length]},Zm=N.memo(({note:s,isReply:t=!1,userId:r,replyTo:a,setReplyTo:n,replyInput:i,setReplyInput:o,editingNoteId:l,setEditingNoteId:d,editInput:h,setEditInput:f,setNoteIdToDelete:p,handleReply:x,handleEditNote:u})=>{const k=String(s.authorId||"")===String(r||"");return e.jsxs("div",{className:`p-3 flex flex-col gap-1 rounded-lg bg-black/20 backdrop-blur-sm border border-white/10 shadow-lg ${t?"ml-8 mt-2":""}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-semibold text-sm text-primary-foreground bg-primary/70 rounded px-2 py-0.5",style:{backgroundColor:DS(s.authorId)},children:s.authorName}),e.jsx("span",{className:"text-xs text-muted-foreground",children:Wt(s.createdAt,"PPpp")})]}),l===s.id?e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(Pt,{value:h,onChange:j=>f(j.target.value),className:"flex-1 text-sm text-muted-foreground",onKeyDown:j=>{j.key==="Enter"&&u(s.id)},autoFocus:!0}),e.jsx(le,{size:"sm",onClick:()=>u(s.id),className:"hover-shimmer",children:e.jsx(hn,{className:"h-4 w-4"})}),e.jsx(le,{size:"sm",variant:"outline",onClick:()=>d(null),className:"hover-shimmer",children:"Cancel"})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-base flex-1 break-words",children:s.content}),e.jsxs("div",{className:"flex items-center",children:[k&&e.jsxs(e.Fragment,{children:[e.jsx(le,{size:"icon",variant:"ghost",onClick:()=>{d(s.id),f(s.content)},className:"hover-shimmer",children:e.jsx(Vl,{className:"h-4 w-4"})}),e.jsx(le,{size:"icon",variant:"ghost",onClick:()=>p(s.id),className:"hover-shimmer text-destructive",children:e.jsx(jr,{className:"h-4 w-4"})})]}),e.jsx(le,{size:"icon",variant:"ghost",onClick:()=>{n(a===s.id?null:s.id),a!==s.id&&o("")},className:"hover-shimmer",children:e.jsx(ex,{className:"h-4 w-4"})})]})]}),a===s.id&&e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx(Pt,{value:i,onChange:j=>o(j.target.value),placeholder:`Reply to ${s.authorName}`,className:"flex-1 text-sm text-muted-foreground",onKeyDown:j=>{j.key==="Enter"&&i.trim()&&x(s.id)},autoFocus:!0}),e.jsx(le,{onClick:()=>x(s.id),size:"sm",className:"hover-shimmer",disabled:!i.trim(),children:e.jsx(hn,{className:"h-4 w-4"})}),e.jsx(le,{onClick:()=>{n(null),o("")},size:"sm",variant:"outline",className:"hover-shimmer",children:"Cancel"})]}),s.replies&&s.replies.map(j=>e.jsx(Zm,{note:j,isReply:!0,userId:r,replyTo:a,setReplyTo:n,replyInput:i,setReplyInput:o,editingNoteId:l,setEditingNoteId:d,editInput:h,setEditInput:f,setNoteIdToDelete:p,handleReply:x,handleEditNote:u},j.id))]})});Zm.displayName="NoteCard";function TS({project:s,isLoggedIn:t,onEdit:r,onPin:a,isPinned:n,autoRefresh:i,onToggleAutoRefresh:o,onCreateOrNavigateMoodboard:l,onCreateOrNavigateWhiteboard:d,onBack:h}){var Le;const[f,p]=N.useState(null),[x,u]=N.useState(null),[k,j]=N.useState(!1),[v,w]=N.useState(!1),[P,D]=N.useState(!1),{notes:B,noteInput:F,setNoteInput:se,handleAddNote:z,handleEditNote:C,handleConfirmDelete:A,handleReply:L,replyTo:y,setReplyTo:S,replyInput:I,setReplyInput:M,editingNoteId:J,setEditingNoteId:ae,editInput:he,setEditInput:ce,noteIdToDelete:ie,setNoteIdToDelete:ve}=du(s.id),Ae=typeof window!="undefined"&&localStorage.getItem("userId")||"demo-user",T=N.useCallback(X=>{L(X)},[L]),U=N.useCallback(X=>{C(X)},[C]),V=()=>xe(this,null,function*(){try{nn({title:"Creating moodboard...",description:"Please wait while we set up your moodboard."});const X=yield Nt.createWorkspaceForProject(s.id,"moodboard");w(!0),nn({title:X.isNew?"Moodboard created":"Existing moodboard found",description:X.message}),nn({title:"Ready to view",description:"Click here to go to the Moodboards tab",action:e.jsx(le,{variant:"default",size:"sm",onClick:()=>{const me=document.querySelector('[data-viewmode="moodboards"]');if(me)me.click();else{const we=new CustomEvent("navigate",{detail:{viewMode:"moodboards",workspaceId:X.workspace.id}});window.dispatchEvent(we)}},className:"button-primary-enhanced hover-shimmer cyrus-ui",children:"View Moodboards"}),duration:1e4})}catch(X){nn({title:"Error",description:"Failed to create moodboard. Please try again.",variant:"destructive"})}}),re=()=>xe(this,null,function*(){try{nn({title:"Creating whiteboard...",description:"Please wait while we set up your whiteboard."});const X=yield Nt.createWorkspaceForProject(s.id,"whiteboard");D(!0),nn({title:X.isNew?"Whiteboard created":"Existing whiteboard found",description:X.message}),nn({title:"Ready to view",description:"Click here to go to the Whiteboards tab",action:e.jsx(le,{variant:"default",size:"sm",onClick:()=>{const me=document.querySelector('[data-viewmode="whiteboards"]');if(me)me.click();else{const we=new CustomEvent("navigate",{detail:{viewMode:"whiteboards",workspaceId:X.workspace.id}});window.dispatchEvent(we)}},className:"button-primary-enhanced hover-shimmer cyrus-ui",children:"View Whiteboards"}),duration:1e4})}catch(X){nn({title:"Error",description:"Failed to create whiteboard. Please try again.",variant:"destructive"})}}),G=N.useMemo(()=>{const X={All:s.media},me=s.media.reduce((we,oe)=>(we[oe.type]||(we[oe.type]=[]),we[oe.type].push(oe),we),{});return E(E({},X),me)},[s.media]),Y=Object.keys(G),[Z,de]=N.useState(Y[0]);return N.useEffect(()=>{Y.length>0&&!Y.includes(Z)&&de(Y[0])},[Y,Z]),e.jsx("div",{className:"p-4 sm:p-6 lg:p-8",children:e.jsxs("div",{className:"glass-card p-6 rounded-lg shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4 md:w-1/2",children:[e.jsx(le,{variant:"ghost",size:"sm",onClick:h,className:"hover-shimmer cyrus-ui",children:e.jsx(Ca,{className:"h-4 w-4"})}),e.jsx("h1",{className:"text-2xl font-bold bg-gradient-primary bg-clip-text text-transparent",children:s.name})]}),e.jsxs("div",{className:"flex items-center gap-3 md:w-1/2 justify-end",children:[t&&e.jsxs(e.Fragment,{children:[e.jsx(le,{onClick:V,variant:"ghost",size:"icon",className:`h-8 w-8 hover-shimmer ${v?"bg-primary text-primary-foreground":""}`,children:e.jsx(ar,{className:"h-4 w-4 text-purple-500"})}),e.jsx(le,{onClick:re,variant:"ghost",size:"icon",className:`h-8 w-8 hover-shimmer ${P?"bg-primary text-primary-foreground":""}`,children:e.jsx(Mr,{className:"h-4 w-4 text-green-500"})}),e.jsx(le,{onClick:a,variant:"outline",className:"hover-shimmer",children:e.jsx(ka,{className:Ce("h-4 w-4",n&&"fill-foreground")})}),e.jsx(le,{onClick:r,variant:"outline",className:"hover-shimmer cyrus-ui",children:"Edit Project"})]}),e.jsxs(bs,{value:s.status,onValueChange:X=>{},children:[e.jsx(fs,{className:`w-full max-w-[190px] py-1 px-3 text-xs font-medium hover-shimmer border-l-4 ${Rd(s.status)}`,children:e.jsx(ws,{children:((Le=oa.find(X=>X.value===s.status))==null?void 0:Le.label)||s.status})}),e.jsx(ps,{children:oa.map(X=>e.jsx(tt,{value:X.value,children:X.label},X.value))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(da,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:["Created by: ",e.jsx("span",{className:"font-medium",children:s.createdBy||localStorage.getItem("userDisplayName")||"Unknown"})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-1 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ay,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("span",{children:["Client: ",e.jsx("span",{className:"font-medium",children:s.client})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(da,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("span",{children:["PM: ",e.jsx("span",{className:"font-medium",children:s.projectManager||"Not assigned"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(dr,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("span",{children:["Artists: ",e.jsx("span",{className:"font-medium",children:s.artists.map(X=>X.name).join(", ")})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xs,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:["Start: ",e.jsx("span",{className:"font-medium",children:Wt(s.startDate)})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xs,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:["End: ",e.jsx("span",{className:"font-medium",children:Wt(s.endDate)})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pm,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:["Priority: ",e.jsx(Qe,{variant:"outline",className:Ce("font-medium",s.priority==="high"?"text-red-500":s.priority==="medium"?"text-amber-500":"text-green-500"),children:s.priority})]})]}),s.statusHistory&&s.statusHistory.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[e.jsx(ex,{className:"h-5 w-5 text-muted-foreground"}),"Status History"]}),e.jsx("div",{className:"space-y-2",children:s.statusHistory.map((X,me)=>e.jsxs("div",{className:"flex items-center justify-between p-2 rounded-md bg-card/50 backdrop-blur-sm border",children:[e.jsx("div",{children:e.jsx("span",{className:"font-medium",children:X.status})}),e.jsx("span",{className:"text-sm text-muted-foreground",children:Wt(X.date,"PPpp")})]},me))})]})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold mb-2 flex items-center gap-2",children:[e.jsx(Cd,{className:"h-5 w-5 text-muted-foreground"}),"Brief & Notes"]}),e.jsxs("div",{className:"p-4 bg-card/50 backdrop-blur-sm rounded-md border",children:[s.brief?e.jsx("p",{className:"whitespace-pre-wrap",children:s.brief}):e.jsx("p",{className:"text-muted-foreground italic",children:"No brief provided"}),e.jsx(Zl,{className:"my-4"}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"font-semibold text-base mb-2 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Nr,{className:"h-5 w-5"})," Project Notes"]}),e.jsx(PS,{autoRefresh:i,onToggle:o})]}),t&&e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx(Pt,{value:F,onChange:X=>se(X.target.value),placeholder:"Write a note...",className:"flex-1",onKeyDown:X=>{X.key==="Enter"&&z()}}),e.jsx(le,{onClick:z,size:"sm",children:e.jsx(hn,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"space-y-3",children:[B.length===0&&e.jsx("div",{className:"text-muted-foreground text-sm",children:"No notes yet."}),B.map(X=>e.jsx(Zm,{note:X,userId:Ae,replyTo:y,setReplyTo:S,replyInput:I,setReplyInput:M,editingNoteId:J,setEditingNoteId:ae,editInput:he,setEditInput:ce,setNoteIdToDelete:ve,handleReply:T,handleEditNote:U},X.id))]})]})]})]})})]}),s.externalLinks&&s.externalLinks.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"External Links"}),e.jsx("div",{className:"grid gap-2",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))"},children:s.externalLinks.map((X,me)=>e.jsx("a",{href:X.url,target:"_blank",rel:"noopener noreferrer",className:"p-2 bg-card/50 backdrop-blur-sm rounded-md border hover:bg-card/80 transition-colors hover-shimmer",children:X.name||X.url},me))})]}),s.media.length>0&&e.jsxs("div",{className:"mt-8",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Media"}),e.jsxs(Jo,{value:Z,onValueChange:X=>de(X),className:"w-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 w-full",children:[e.jsx(Bi,{className:"rounded-full bg-muted/20 px-2 py-1",children:Y.map(X=>e.jsx(yr,{value:X,className:"hover-shimmer",children:X},X))}),s.videoUrl&&e.jsxs(le,{variant:"ghost",size:"sm",onClick:X=>{X.stopPropagation(),j(!0)},className:"flex items-center gap-2 hover-shimmer ml-4",children:[e.jsx(Ih,{className:"h-5 w-5"}),e.jsx("span",{className:"text-xs font-medium",children:"Watch Me"})]})]}),Y.map(X=>e.jsx(br,{value:X,children:e.jsx(G0,{media:G[X],categoryName:X,onImageClick:me=>p({media:G[X],index:me}),onCommentClick:me=>u(me)})},X))]}),s.videoUrl&&e.jsx(Ts,{open:!!k,onOpenChange:X=>{X||j(!1)},children:e.jsxs(Is,{className:"max-w-3xl h-[60vh] p-0 bg-black",onClick:X=>X.stopPropagation(),children:[e.jsx(Ks,{className:"sr-only",children:"YouTube Video Player"}),e.jsx("iframe",{width:"100%",height:"100%",src:`https://www.youtube.com/embed/${kx(s.videoUrl)||""}`,title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})]})})]}),e.jsx(CS,{open:ie!==null,onOpenChange:X=>!X&&ve(null),children:e.jsxs(C2,{children:[e.jsxs(A2,{children:[e.jsx(_2,{children:"Are you absolutely sure?"}),e.jsx(L2,{children:"This action cannot be undone. This will permanently delete this note and any replies to it."})]}),e.jsxs(P2,{children:[e.jsx(D2,{children:"Cancel"}),e.jsx(I2,{onClick:A,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})}),f&&e.jsx(Um,{media:f.media,initialIndex:f.index,onClose:()=>p(null)}),x&&e.jsx(Ts,{open:!!x,onOpenChange:X=>!X&&u(null),children:e.jsxs(Is,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Ks,{children:["Image Comments - ",x.filename]}),e.jsx(_S,{imageUrl:x.url,imageAlt:x.filename,projectId:s.id,mediaId:x.id,userId:Ae,userName:typeof window!="undefined"&&localStorage.getItem("userName")||"Demo User",comments:[],onAddComment:X=>{},onResolveComment:X=>{}})]})})]})})}function MS({project:s,onBack:t,onEdit:r,isLoggedIn:a=!1,onPin:n,isPinned:i=!1,autoRefresh:o=!1,onToggleAutoRefresh:l}){const[d,h]=N.useState(o),f=l?o:d,p=l||h,{toast:x}=Pa();du(s==null?void 0:s.id);const u=N.useCallback(j=>xe(this,null,function*(){try{x({title:"Creating moodboard...",description:"Please wait while we set up your moodboard."});const v=yield Nt.createWorkspaceForProject(j.id,"moodboard");x({title:v.isNew?"Moodboard created":"Existing moodboard found",description:v.message}),x({title:"Ready to view",description:"Click here to go to the Moodboards tab",action:e.jsx(le,{variant:"default",size:"sm",onClick:()=>{const w=document.querySelector('[data-viewmode="moodboards"]');if(w)w.click();else{const P=new CustomEvent("navigate",{detail:{viewMode:"moodboards",workspaceId:v.workspace.id}});window.dispatchEvent(P)}},className:"bg-gradient-primary",children:"View Moodboards"}),duration:1e4})}catch(v){x({title:"Error",description:"Failed to create moodboard. Please try again.",variant:"destructive"})}}),[x]),k=N.useCallback(j=>xe(this,null,function*(){try{x({title:"Creating whiteboard...",description:"Please wait while we set up your whiteboard."});const v=yield Nt.createWorkspaceForProject(j.id,"whiteboard");x({title:v.isNew?"Whiteboard created":"Existing whiteboard found",description:v.message}),x({title:"Ready to view",description:"Click here to go to the Whiteboards tab",action:e.jsx(le,{variant:"default",size:"sm",onClick:()=>{const w=document.querySelector('[data-viewmode="whiteboards"]');if(w)w.click();else{const P=new CustomEvent("navigate",{detail:{viewMode:"whiteboards",workspaceId:v.workspace.id}});window.dispatchEvent(P)}},className:"bg-gradient-primary",children:"View Whiteboards"}),duration:1e4})}catch(v){x({title:"Error",description:"Failed to create whiteboard. Please try again.",variant:"destructive"})}}),[x]);return e.jsx(TS,{project:s,isLoggedIn:a,onEdit:r,onPin:n,isPinned:i,autoRefresh:f,onToggleAutoRefresh:p,onCreateOrNavigateMoodboard:u,onCreateOrNavigateWhiteboard:k,onBack:t})}var uu="Checkbox",[ES,zk]=fn(uu),[RS,ef]=ES(uu);function OS(s){const{__scopeCheckbox:t,checked:r,children:a,defaultChecked:n,disabled:i,form:o,name:l,onCheckedChange:d,required:h,value:f="on",internal_do_not_use_render:p}=s,[x,u]=$o({prop:r,defaultProp:n!=null?n:!1,onChange:d,caller:uu}),[k,j]=N.useState(null),[v,w]=N.useState(null),P=N.useRef(!1),D=k?!!o||!!k.closest("form"):!0,B={checked:x,disabled:i,setChecked:u,control:k,setControl:j,name:l,form:o,value:f,hasConsumerStoppedPropagationRef:P,required:h,defaultChecked:Xn(n)?!1:n,isFormControl:D,bubbleInput:v,setBubbleInput:w};return e.jsx(RS,Q(E({scope:t},B),{children:FS(p)?p(B):a}))}var T2="CheckboxTrigger",M2=N.forwardRef((i,n)=>{var o=i,{__scopeCheckbox:s,onKeyDown:t,onClick:r}=o,a=Me(o,["__scopeCheckbox","onKeyDown","onClick"]);const{control:l,value:d,disabled:h,checked:f,required:p,setControl:x,setChecked:u,hasConsumerStoppedPropagationRef:k,isFormControl:j,bubbleInput:v}=ef(T2,s),w=As(n,x),P=N.useRef(f);return N.useEffect(()=>{const D=l==null?void 0:l.form;if(D){const B=()=>u(P.current);return D.addEventListener("reset",B),()=>D.removeEventListener("reset",B)}},[l,u]),e.jsx(Vt.button,Q(E({type:"button",role:"checkbox","aria-checked":Xn(f)?"mixed":f,"aria-required":p,"data-state":B2(f),"data-disabled":h?"":void 0,disabled:h,value:d},a),{ref:w,onKeyDown:Rt(t,D=>{D.key==="Enter"&&D.preventDefault()}),onClick:Rt(r,D=>{u(B=>Xn(B)?!0:!B),v&&j&&(k.current=D.isPropagationStopped(),k.current||D.stopPropagation())})}))});M2.displayName=T2;var tf=N.forwardRef((s,t)=>{const x=s,{__scopeCheckbox:r,name:a,checked:n,defaultChecked:i,required:o,disabled:l,value:d,onCheckedChange:h,form:f}=x,p=Me(x,["__scopeCheckbox","name","checked","defaultChecked","required","disabled","value","onCheckedChange","form"]);return e.jsx(OS,{__scopeCheckbox:r,checked:n,defaultChecked:i,disabled:l,required:o,onCheckedChange:h,name:a,form:f,value:d,internal_do_not_use_render:({isFormControl:u})=>e.jsxs(e.Fragment,{children:[e.jsx(M2,Q(E({},p),{ref:t,__scopeCheckbox:r})),u&&e.jsx(F2,{__scopeCheckbox:r})]})})});tf.displayName=uu;var E2="CheckboxIndicator",R2=N.forwardRef((s,t)=>{const o=s,{__scopeCheckbox:r,forceMount:a}=o,n=Me(o,["__scopeCheckbox","forceMount"]),i=ef(E2,r);return e.jsx(Ui,{present:a||Xn(i.checked)||i.checked===!0,children:e.jsx(Vt.span,Q(E({"data-state":B2(i.checked),"data-disabled":i.disabled?"":void 0},n),{ref:t,style:E({pointerEvents:"none"},s.style)}))})});R2.displayName=E2;var O2="CheckboxBubbleInput",F2=N.forwardRef((a,r)=>{var n=a,{__scopeCheckbox:s}=n,t=Me(n,["__scopeCheckbox"]);const{control:i,hasConsumerStoppedPropagationRef:o,checked:l,defaultChecked:d,required:h,disabled:f,name:p,value:x,form:u,bubbleInput:k,setBubbleInput:j}=ef(O2,s),v=As(r,j),w=Fm(l),P=Pg(i);N.useEffect(()=>{const B=k;if(!B)return;const F=window.HTMLInputElement.prototype,z=Object.getOwnPropertyDescriptor(F,"checked").set,C=!o.current;if(w!==l&&z){const A=new Event("click",{bubbles:C});B.indeterminate=Xn(l),z.call(B,Xn(l)?!1:l),B.dispatchEvent(A)}},[k,w,l,o]);const D=N.useRef(Xn(l)?!1:l);return e.jsx(Vt.input,Q(E({type:"checkbox","aria-hidden":!0,defaultChecked:d!=null?d:D.current,required:h,disabled:f,name:p,value:x,form:u},t),{tabIndex:-1,ref:v,style:Q(E(E({},t.style),P),{position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"})}))});F2.displayName=O2;function FS(s){return typeof s=="function"}function Xn(s){return s==="indeterminate"}function B2(s){return Xn(s)?"indeterminate":s?"checked":"unchecked"}const Ii=N.forwardRef((a,r)=>{var n=a,{className:s}=n,t=Me(n,["className"]);return e.jsx(tf,Q(E({ref:r,className:Ce("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s)},t),{children:e.jsx(R2,{className:Ce("flex items-center justify-center text-current"),children:e.jsx(la,{className:"h-4 w-4"})})}))});Ii.displayName=tf.displayName;const zp=[{id:"user-1",name:"John Smith",email:"john@example.com",avatar:"JS"},{id:"user-2",name:"Sarah Wilson",email:"sarah@example.com",avatar:"SW"},{id:"user-3",name:"Mike Chen",email:"mike@example.com",avatar:"MC"},{id:"user-4",name:"Emily Davis",email:"emily@example.com",avatar:"ED"}];function BS({moodboard:s,onSubmit:t,onCancel:r,availableTags:a}){var U,V,re;const{toast:n}=Pa(),i=N.useRef(null),[o,l]=N.useState([]),[d,h]=N.useState(!1);N.useEffect(()=>{xe(this,null,function*(){h(!0);try{const Y=yield vr.getProjects();l(Y)}catch(Y){n({title:"Error",description:"Failed to load projects. Please try again.",variant:"destructive"})}finally{h(!1)}})},[n]);const[f,p]=N.useState({name:(s==null?void 0:s.name)||"",description:(s==null?void 0:s.description)||"",projectId:(s==null?void 0:s.projectId)||"",isPublic:((U=s==null?void 0:s.settings)==null?void 0:U.isPublic)||!1,allowComments:((V=s==null?void 0:s.settings)==null?void 0:V.allowComments)||!0,allowEditing:((re=s==null?void 0:s.settings)==null?void 0:re.allowEditing)||!0}),[x,u]=N.useState((s==null?void 0:s.tags)||[]),[k,j]=N.useState((s==null?void 0:s.collaborators)||["current-user"]),[v,w]=N.useState(()=>{if(!s)return[];const G=[];return s.images&&s.images.forEach(Y=>{G.push({id:Y.id,type:"image",url:Y.url,title:Y.filename||"Untitled Image",createdAt:new Date().toISOString()})}),s.links&&s.links.forEach(Y=>{G.push({id:Y.id,type:"link",url:Y.url,title:Y.title||Y.url,createdAt:new Date().toISOString()})}),G}),[P,D]=N.useState(""),[B,F]=N.useState(""),[se,z]=N.useState(!1),[C,A]=N.useState(""),[L,y]=N.useState(""),S=(G,Y)=>{p(Z=>Q(E({},Z),{[G]:Y}))},I=G=>{u(Y=>Y.includes(G)?Y.filter(Z=>Z!==G):[...Y,G])},M=()=>{L.trim()&&!x.includes(L.trim())&&(u(G=>[...G,L.trim()]),y(""))},J=G=>{u(Y=>Y.filter(Z=>Z!==G))},ae=()=>{const G=zp.find(Y=>Y.email===C);G&&!k.includes(G.id)?(j(Y=>[...Y,G.id]),A(""),z(!1),n({title:"Collaborator Added",description:`${G.name} has been added to the moodboard.`})):G?n({title:"Already Added",description:"This user is already a collaborator.",variant:"destructive"}):(n({title:"Invitation Sent",description:`An invitation has been sent to ${C}.`}),A(""),z(!1))},he=G=>{G!=="current-user"&&j(Y=>Y.filter(Z=>Z!==G))},ce=G=>{const Y=G.target.files;Y&&(Array.from(Y).forEach(Z=>{const de=new FileReader;de.onload=Le=>{var me;const X={id:`item-${Date.now()}-${Math.random()}`,type:"image",url:(me=Le.target)==null?void 0:me.result,title:Z.name,createdAt:new Date().toISOString()};w(we=>[...we,X])},de.readAsDataURL(Z)}),i.current&&(i.current.value=""))},ie=()=>{if(P.trim()){const G={id:`item-${Date.now()}`,type:"link",url:P.trim(),title:B.trim()||P.trim(),createdAt:new Date().toISOString()};w(Y=>[...Y,G]),D(""),F("")}},ve=G=>{w(Y=>Y.filter(Z=>Z.id!==G))},Ae=G=>{if(G.preventDefault(),!f.name.trim()){n({title:"Error",description:"Please enter a moodboard name.",variant:"destructive"});return}const Y=Q(E({},f),{tags:x,collaborators:k,settings:{isPublic:f.isPublic,allowComments:f.allowComments,allowEditing:f.allowEditing,autoSave:!0},items:v});t(Y),n({title:s?"Moodboard Updated":"Moodboard Created",description:`Your moodboard has been ${s?"updated":"created"} successfully.`})},T=G=>zp.find(Y=>Y.id===G);return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("div",{className:"sticky top-0 z-10 bg-background/80 backdrop-blur-sm border-b",children:e.jsx("div",{className:"max-w-6xl mx-auto p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(le,{variant:"ghost",onClick:r,className:"hover-shimmer cyrus-ui",children:[e.jsx(Ca,{className:"w-4 h-4 mr-2"}),"Back"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold bg-gradient-primary bg-clip-text text-transparent",children:s?"Edit Moodboard":"Create New Moodboard"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s?"Update your moodboard details and content":"Set up your visual inspiration board"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(le,{type:"button",variant:"outline",onClick:r,className:"hover-shimmer cyrus-ui",children:"Cancel"}),e.jsxs(le,{type:"submit",form:"moodboard-form",className:"button-primary-enhanced hover-shimmer cyrus-ui",children:[e.jsx(Am,{className:"w-4 h-4 mr-2"}),s?"Update Moodboard":"Create Moodboard"]})]})]})})}),e.jsx("div",{className:"max-w-6xl mx-auto p-4",children:e.jsx("form",{id:"moodboard-form",onSubmit:Ae,className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-12 gap-4",children:[e.jsx("div",{className:"xl:col-span-4 space-y-4",children:e.jsxs(Ke,{className:"glass-card border-0 shadow-lg",children:[e.jsx(_t,{className:"pb-3",children:e.jsxs(Ot,{className:"flex items-center gap-2 text-lg",children:[e.jsx(ar,{className:"h-5 w-5 text-primary"}),"Basic Information"]})}),e.jsxs(Xe,{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(jt,{htmlFor:"name",className:"text-sm font-medium",children:"Moodboard Name *"}),e.jsx(Pt,{id:"name",placeholder:"e.g., Brand Identity Exploration",value:f.name,onChange:G=>S("name",G.target.value),className:"hover-shimmer cyrus-ui",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(jt,{htmlFor:"description",className:"text-sm font-medium",children:"Description"}),e.jsx(Sr,{id:"description",placeholder:"Describe the purpose and direction of this moodboard...",value:f.description,onChange:G=>S("description",G.target.value),className:"hover-shimmer cyrus-ui resize-none min-h-20",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(jt,{htmlFor:"project",className:"text-sm font-medium",children:"Project"}),e.jsxs(bs,{value:f.projectId,onValueChange:G=>S("projectId",G),children:[e.jsx(fs,{className:"hover-shimmer cyrus-ui",children:e.jsx(ws,{placeholder:"Select a project (optional)"})}),e.jsx(ps,{children:d?e.jsx("div",{className:"p-2 text-center text-muted-foreground",children:"Loading projects..."}):o.length>0?o.map(G=>e.jsxs(tt,{value:G.id,children:[G.name," - ",G.client||"No Client"]},G.id)):e.jsx("div",{className:"p-2 text-center text-muted-foreground",children:"No projects available"})})]})]}),e.jsxs("div",{className:"space-y-3 pt-2",children:[e.jsx(jt,{className:"text-sm font-medium",children:"Settings"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ii,{id:"isPublic",checked:f.isPublic,onCheckedChange:G=>S("isPublic",G)}),e.jsx(jt,{htmlFor:"isPublic",className:"text-sm",children:"Public moodboard"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ii,{id:"allowComments",checked:f.allowComments,onCheckedChange:G=>S("allowComments",G)}),e.jsx(jt,{htmlFor:"allowComments",className:"text-sm",children:"Allow comments"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ii,{id:"allowEditing",checked:f.allowEditing,onCheckedChange:G=>S("allowEditing",G)}),e.jsx(jt,{htmlFor:"allowEditing",className:"text-sm",children:"Allow collaborative editing"})]})]})]})]})]})}),e.jsxs("div",{className:"xl:col-span-5 space-y-6",children:[e.jsxs(Ke,{className:"glass-card border-0 shadow-lg",children:[e.jsx(_t,{className:"pb-4",children:e.jsxs(Ot,{className:"flex items-center gap-2 text-lg",children:[e.jsx(Pm,{className:"w-5 h-5 text-primary"}),"Tags & Categories"]})}),e.jsxs(Xe,{className:"space-y-4",children:[a&&a.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(jt,{className:"text-sm font-medium",children:"Available Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.map(G=>e.jsx(Qe,{variant:x.includes(G)?"default":"outline",className:"cursor-pointer hover-shimmer cyrus-ui transition-all",onClick:()=>I(G),children:G},G))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(jt,{className:"text-sm font-medium",children:"Add Custom Tag"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Pt,{placeholder:"Enter tag name",value:L,onChange:G=>y(G.target.value),className:"hover-shimmer cyrus-ui",onKeyDown:G=>{G.key==="Enter"&&(G.preventDefault(),M())}}),e.jsx(le,{type:"button",onClick:M,size:"sm",className:"hover-shimmer cyrus-ui",children:e.jsx(gs,{className:"w-4 h-4"})})]})]}),x.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(jt,{className:"text-sm font-medium",children:"Selected Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:x.map(G=>e.jsxs(Qe,{variant:"secondary",className:"hover-shimmer cyrus-ui",children:[G,e.jsx("button",{type:"button",onClick:()=>J(G),className:"ml-1 hover:text-destructive",children:e.jsx(Hs,{className:"w-3 h-3"})})]},G))})]})]})]}),e.jsxs(Ke,{className:"glass-card border-0 shadow-lg",children:[e.jsx(_t,{className:"pb-4",children:e.jsxs(Ot,{className:"flex items-center gap-2 text-lg",children:[e.jsx(Yn,{className:"w-5 h-5 text-primary"}),"Content (",v.length," items)"]})}),e.jsxs(Xe,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(le,{type:"button",variant:"outline",onClick:()=>{var G;return(G=i.current)==null?void 0:G.click()},className:"hover-shimmer cyrus-ui",children:[e.jsx(lx,{className:"w-4 h-4 mr-2"}),"Upload Images"]}),e.jsxs(le,{type:"button",variant:"outline",onClick:()=>{P.trim()&&ie()},className:"hover-shimmer cyrus-ui",children:[e.jsx(qa,{className:"w-4 h-4 mr-2"}),"Add Link"]})]}),e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[e.jsx(Pt,{placeholder:"Link URL...",value:P,onChange:G=>D(G.target.value),className:"hover-shimmer cyrus-ui"}),e.jsx(Pt,{placeholder:"Link title (optional)",value:B,onChange:G=>F(G.target.value),className:"hover-shimmer cyrus-ui"})]})}),v.length>0&&e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:v.map(G=>e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"aspect-square rounded-lg overflow-hidden border glass-card",children:G.type==="image"?e.jsx("img",{src:G.url,alt:G.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-muted flex items-center justify-center",children:e.jsx(qa,{className:"w-8 h-8 text-muted-foreground"})})}),e.jsx(le,{type:"button",variant:"destructive",size:"sm",className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity w-6 h-6 p-0",onClick:()=>ve(G.id),children:e.jsx(Hs,{className:"w-3 h-3"})}),e.jsx("p",{className:"text-xs text-center mt-1 truncate",children:G.title})]},G.id))})]})]})]}),e.jsx("div",{className:"xl:col-span-3 space-y-6",children:e.jsxs(Ke,{className:"glass-card border-0 shadow-lg",children:[e.jsx(_t,{className:"pb-4",children:e.jsxs(Ot,{className:"flex items-center justify-between text-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(dr,{className:"w-5 h-5 text-primary"}),"Collaborators (",k.length,")"]}),e.jsx(le,{type:"button",variant:"outline",size:"sm",onClick:()=>z(!0),className:"hover-shimmer cyrus-ui",children:e.jsx(gs,{className:"w-4 h-4"})})]})}),e.jsx(Xe,{className:"space-y-3",children:k.map(G=>{const Y=T(G),Z=G==="current-user";return e.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-muted/20",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center text-sm font-medium",children:(Y==null?void 0:Y.avatar)||"U"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:(Y==null?void 0:Y.name)||"Current User"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:(Y==null?void 0:Y.email)||"current@example.com"})]})]}),!Z&&e.jsx(le,{type:"button",variant:"ghost",size:"sm",onClick:()=>he(G),className:"text-destructive hover:text-destructive",children:e.jsx(jr,{className:"w-4 h-4"})})]},G)})})]})})]})})}),e.jsx("input",{type:"file",ref:i,onChange:ce,accept:"image/*",multiple:!0,className:"hidden"}),e.jsx(Ts,{open:se,onOpenChange:z,children:e.jsxs(Is,{className:"glass-card max-w-md",children:[e.jsx(Dr,{children:e.jsxs(Ks,{className:"flex items-center gap-2",children:[e.jsx(wo,{className:"w-5 h-5"}),"Invite Collaborator"]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(jt,{htmlFor:"invite-email",children:"Email Address"}),e.jsx(Pt,{id:"invite-email",type:"email",placeholder:"colleague@example.com",value:C,onChange:G=>A(G.target.value),className:"hover-shimmer cyrus-ui"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(le,{type:"button",variant:"outline",onClick:()=>z(!1),children:"Cancel"}),e.jsx(le,{type:"button",onClick:ae,className:"hover-shimmer cyrus-ui",children:"Send Invite"})]})]})]})})]})}function US({moodboard:s,onBack:t,onEdit:r,onDelete:a,getUserById:n,onMoodboardUpdate:i}){var U,V,re,G;const[o,l]=N.useState(null),[d,h]=N.useState(0),[f,p]=N.useState(!1),[x,u]=N.useState(!1),[k,j]=N.useState({title:"",url:""}),[v,w]=N.useState(""),[P,D]=N.useState(null),[B,F]=N.useState(""),[se,z]=N.useState(!1),{toast:C}=Pa(),A=N.useRef(null),L=n(s.createdBy),y=((U=s.images)==null?void 0:U.length)||0,S=((V=s.links)==null?void 0:V.length)||0,I=((re=s.comments)==null?void 0:re.length)||0,M=()=>{if(!k.url){C({title:"Missing URL",description:"Please enter a URL for the link",variant:"destructive"});return}const Y={id:`link-${Date.now()}`,type:"link",url:k.url,title:k.title||k.url},Z=Q(E({},s),{links:[...s.links||[],Y]});i(Z),j({title:"",url:""}),u(!1),C({description:"Link added successfully"})},J=Y=>xe(this,null,function*(){var de;const Z=(de=Y.target.files)==null?void 0:de[0];if(Z)try{let Le,X;const me=typeof window!="undefined"&&"pulse2"in window?window.pulse2:null;if(me){const ee=new FormData;ee.append("file",Z);const H=yield fetch(me.mediaUrl,{method:"POST",headers:{"X-WP-Nonce":me.nonce},body:ee});if(!H.ok)throw new Error("Failed to upload media");const Ee=yield H.json();Le=Ee.source_url,X=Ee.id.toString()}else Le=URL.createObjectURL(Z),X=`image-${Date.now()}`;const we={id:X,type:"image",url:Le,filename:Z.name},oe=Q(E({},s),{images:[...s.images||[],we]});i(oe),z(!1),C({description:"Image added successfully"})}catch(Le){C({title:"Upload Failed",description:"Failed to upload image. Please try again.",variant:"destructive"})}}),ae=(Y,Z)=>{l(Y),h(Z),p(!0)},he=()=>{if(!s.images||s.images.length===0)return;const Y=d>0?d-1:s.images.length-1;h(Y),l(s.images[Y])},ce=()=>{if(!s.images||s.images.length===0)return;const Y=d<s.images.length-1?d+1:0;h(Y),l(s.images[Y])},ie=()=>{if(!v.trim())return;const Y=n("current-user"),Z=localStorage.getItem("userId")||Y.id,de={id:`comment-${Date.now()}`,text:v,createdBy:Z,createdAt:new Date().toISOString()},Le=Q(E({},s),{comments:[...s.comments||[],de]});i(Le),w(""),C({description:"Comment added successfully"})},ve=Y=>{const Z=Q(E({},s),{images:(s.images||[]).filter(de=>de.id!==Y)});i(Z),C({description:"Image removed successfully"})},Ae=Y=>{const Z=Q(E({},s),{links:(s.links||[]).filter(de=>de.id!==Y)});i(Z),C({description:"Link removed successfully"})},T=Y=>{const Z=document.createElement("a");Z.href=Y.url,Z.download=Y.filename||"image.jpg",document.body.appendChild(Z),Z.click(),document.body.removeChild(Z)};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex flex-wrap justify-between items-center mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(le,{variant:"ghost",size:"sm",onClick:t,children:e.jsx(Ca,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h1",{className:"text-2xl font-bold",children:s.name}),s.tags&&s.tags.length>0&&e.jsx("div",{className:"flex gap-1",children:s.tags.map(Y=>e.jsx(Qe,{variant:"secondary",className:"text-xs",children:Y},Y))})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(da,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:L.name})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Yn,{className:"h-3.5 w-3.5"}),e.jsxs("span",{children:[y," ",y===1?"image":"images"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(qa,{className:"h-3.5 w-3.5"}),e.jsxs("span",{children:[S," ",S===1?"link":"links"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Nr,{className:"h-3.5 w-3.5"}),e.jsxs("span",{children:[I," ",I===1?"comment":"comments"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(xs,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:Wt(s.createdAt,"MMMM d, yyyy")})]})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-2 md:mt-0",children:[e.jsxs(le,{variant:"outline",size:"sm",onClick:r,children:[e.jsx(Vl,{className:"h-4 w-4 mr-2"}),"Edit Moodboard"]}),e.jsxs(le,{variant:"outline",size:"sm",onClick:()=>z(!0),children:[e.jsx(Yn,{className:"h-4 w-4 mr-2"}),"Add Image"]}),e.jsxs(le,{variant:"outline",size:"sm",onClick:()=>u(!0),children:[e.jsx(qa,{className:"h-4 w-4 mr-2"}),"Add Link"]}),e.jsxs(le,{variant:"destructive",size:"sm",onClick:a,children:[e.jsx(jr,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h2",{className:"text-xl font-bold",children:["Images (",y,")"]}),e.jsx("input",{type:"file",ref:A,className:"hidden",accept:"image/*",onChange:J}),e.jsxs(le,{size:"sm",variant:"ghost",onClick:()=>{var Y;return(Y=A.current)==null?void 0:Y.click()},children:[e.jsx(gs,{className:"h-4 w-4 mr-2"}),"Upload"]})]}),s.images&&s.images.length>0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:s.images.map((Y,Z)=>e.jsxs(Ke,{className:"overflow-hidden group relative",children:[e.jsx("div",{className:"aspect-video cursor-pointer overflow-hidden",onClick:()=>ae(Y,Z),children:e.jsx("img",{src:Y.url,alt:`Image ${Z+1}`,className:"w-full h-full object-cover transition-transform group-hover:scale-105"})}),e.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx(le,{size:"icon",variant:"secondary",className:"h-8 w-8 rounded-full bg-black/50 hover:bg-black/70",onClick:de=>{de.stopPropagation(),T(Y)},children:e.jsx(_h,{className:"h-4 w-4 text-white"})}),e.jsx(le,{size:"icon",variant:"destructive",className:"h-8 w-8 rounded-full bg-black/50 hover:bg-destructive/90",onClick:de=>{de.stopPropagation(),ve(Y.id)},children:e.jsx(jr,{className:"h-4 w-4 text-white"})})]})})]},Y.id))}):e.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg",children:[e.jsx(Yn,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Images Yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Upload images to start building your moodboard"}),e.jsxs(le,{onClick:()=>{var Y;return(Y=A.current)==null?void 0:Y.click()},children:[e.jsx(gs,{className:"h-4 w-4 mr-2"}),"Add Images"]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h2",{className:"text-xl font-bold",children:["Links (",S,")"]}),e.jsxs(le,{size:"sm",variant:"ghost",onClick:()=>u(!0),children:[e.jsx(gs,{className:"h-4 w-4 mr-2"}),"Add Link"]})]}),s.links&&s.links.length>0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:s.links.map(Y=>e.jsx(Ke,{className:"group relative",children:e.jsxs(Xe,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-muted rounded-md p-2",children:e.jsx(qa,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium mb-1 truncate",children:Y.title}),e.jsx("a",{href:Y.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline truncate block",children:Y.url})]})]}),e.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(le,{size:"icon",variant:"destructive",className:"h-8 w-8 rounded-full",onClick:()=>Ae(Y.id),children:e.jsx(jr,{className:"h-4 w-4"})})})]})},Y.id))}):e.jsxs("div",{className:"text-center py-8 border-2 border-dashed border-muted-foreground/20 rounded-lg",children:[e.jsx(qa,{className:"h-12 w-12 text-muted-foreground/40 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Links Yet"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Add links to resources and inspiration"}),e.jsxs(le,{variant:"outline",onClick:()=>u(!0),children:[e.jsx(gs,{className:"h-4 w-4 mr-2"}),"Add Link"]})]})]})]}),e.jsx("div",{className:"lg:col-span-1",children:((G=s.settings)==null?void 0:G.allowComments)!==!1&&e.jsxs(Ke,{className:"glass-card",children:[e.jsx(_t,{children:e.jsxs(Ot,{className:"flex items-center gap-2",children:[e.jsx(Nr,{className:"h-5 w-5"}),"Comments (",I,")"]})}),e.jsxs(Xe,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(Sr,{placeholder:"Add a comment...",value:v,onChange:Y=>w(Y.target.value),className:"min-h-20"}),e.jsxs(le,{onClick:ie,disabled:!v.trim(),size:"sm",className:"w-full",children:[e.jsx(hn,{className:"h-4 w-4 mr-2"}),"Add Comment"]})]}),e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:s.comments&&s.comments.length>0?s.comments.map(Y=>e.jsxs("div",{className:"p-3 bg-muted/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-primary/20 flex items-center justify-center text-xs font-medium",children:n(Y.createdBy).name.charAt(0)}),e.jsx("span",{className:"text-sm font-medium",children:n(Y.createdBy).name})]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:Z5(Y.createdAt)})]}),e.jsx("p",{className:"text-sm",children:Y.text})]},Y.id)):e.jsx("div",{className:"text-center py-4 text-muted-foreground text-sm",children:"No comments yet. Be the first to comment!"})})]})]})})]}),f&&o&&s.images&&s.images.length>0&&e.jsx(Ts,{open:f,onOpenChange:p,children:e.jsx(Is,{className:"max-w-[95vw] max-h-[95vh] p-0 overflow-hidden",onClick:Y=>Y.stopPropagation(),children:e.jsxs("div",{className:"relative flex items-center justify-center min-h-[70vh] bg-background/95",children:[e.jsx(le,{variant:"ghost",size:"sm",className:"absolute top-4 right-4 z-10 bg-background/80 hover:bg-background",onClick:Y=>{Y.stopPropagation(),p(!1)},children:e.jsx(Hs,{className:"h-4 w-4"})}),s.images.length>1&&e.jsxs(e.Fragment,{children:[e.jsx(le,{variant:"ghost",size:"sm",className:"absolute left-4 top-1/2 -translate-y-1/2 z-10 bg-background/80 hover:bg-background",onClick:Y=>{Y.stopPropagation(),he()},children:e.jsx(lc,{className:"h-4 w-4"})}),e.jsx(le,{variant:"ghost",size:"sm",className:"absolute right-4 top-1/2 -translate-y-1/2 z-10 bg-background/80 hover:bg-background",onClick:Y=>{Y.stopPropagation(),ce()},children:e.jsx(Wa,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"flex items-center justify-center w-full h-full p-8",children:e.jsx("img",{src:o.url,alt:o.filename||`Image ${d+1}`,className:"max-w-full max-h-[85vh] object-contain"})}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-background/80 backdrop-blur-sm p-4 flex justify-between items-center",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs(Qe,{variant:"outline",className:"bg-background/50",children:[d+1," / ",s.images.length]}),s.tags&&s.tags.length>0&&e.jsx("div",{className:"flex gap-1",children:s.tags.map(Y=>e.jsx(Qe,{variant:"secondary",className:"text-xs",children:Y},Y))}),o.filename&&e.jsx(Qe,{variant:"outline",className:"text-xs",children:o.filename})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(le,{variant:"outline",size:"sm",onClick:()=>{navigator.clipboard.writeText(o.url),C({title:"Link copied!",description:"The image URL has been copied to your clipboard."})},children:[e.jsx(Hl,{className:"h-4 w-4 mr-2"}),"Copy URL"]}),e.jsxs(le,{variant:"outline",size:"sm",onClick:()=>T(o),children:[e.jsx(_h,{className:"h-4 w-4 mr-2"}),"Download"]}),e.jsxs(le,{variant:"destructive",size:"sm",onClick:()=>{if(ve(o.id),s.images&&s.images.length===1)p(!1);else if(s.images&&s.images.length>1){const Y=d>=s.images.length-1?0:d;h(Y),l(s.images[Y])}},children:[e.jsx(jr,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})})}),e.jsx(Ts,{open:x,onOpenChange:u,children:e.jsxs(Is,{children:[e.jsx(Ks,{children:"Add Link"}),e.jsxs("div",{className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"linkTitle",className:"text-sm font-medium",children:"Title"}),e.jsx(Pt,{id:"linkTitle",placeholder:"Enter link title",value:k.title,onChange:Y=>j(Q(E({},k),{title:Y.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"linkUrl",className:"text-sm font-medium",children:"URL"}),e.jsx(Pt,{id:"linkUrl",placeholder:"https://",value:k.url,onChange:Y=>j(Q(E({},k),{url:Y.target.value}))})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(le,{variant:"outline",onClick:()=>{u(!1),j({title:"",url:""})},children:"Cancel"}),e.jsx(le,{onClick:M,children:"Add Link"})]})]})]})}),e.jsx(Ts,{open:se,onOpenChange:z,children:e.jsxs(Is,{children:[e.jsx(Ks,{children:"Add Image"}),e.jsxs("div",{className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Upload Image"}),e.jsxs("div",{className:"border-2 border-dashed rounded-lg p-8 text-center",children:[e.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:J,id:"image-upload-dialog"}),e.jsxs("label",{htmlFor:"image-upload-dialog",className:"cursor-pointer flex flex-col items-center",children:[e.jsx(Yn,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("p",{className:"font-medium mb-1",children:"Click to upload"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"SVG, PNG, JPG or GIF (max 10MB)"})]})]})]}),e.jsx("div",{className:"flex justify-end gap-2 pt-4",children:e.jsx(le,{variant:"outline",onClick:()=>z(!1),children:"Cancel"})})]})]})})]})}const qS=[{id:"user-1",name:"John Smith",email:"john@example.com",avatar:"JS"},{id:"user-2",name:"Sarah Wilson",email:"sarah@example.com",avatar:"SW"},{id:"user-3",name:"Mike Chen",email:"mike@example.com",avatar:"MC"},{id:"user-4",name:"Emily Davis",email:"emily@example.com",avatar:"ED"}],zS=["Brand Identity","Color Palette","Typography","Photography","Illustration","UI/UX","Product Design","Marketing","Campaign","Concept","Inspiration"];function $S({className:s,projects:t=[],onEnterFocusMode:r,onExitFocusMode:a}){const[n,i]=N.useState("list"),[o,l]=N.useState([]),[d,h]=N.useState(null),[f,p]=N.useState(""),[x,u]=N.useState("all"),{toast:k}=Pa(),[j,v]=N.useState(!1);N.useEffect(()=>{xe(this,null,function*(){v(!0);try{const S=Nt.workspaces.filter(I=>I.type==="moodboard");l(S)}catch(S){k({title:"Error",description:"Failed to load moodboards",variant:"destructive"})}finally{v(!1)}})},[k]);const w=N.useMemo(()=>o.filter(y=>{var I,M;const S=y.name.toLowerCase().includes(f.toLowerCase())||((I=y.description)==null?void 0:I.toLowerCase().includes(f.toLowerCase()))||((M=y.tags)==null?void 0:M.some(J=>J.toLowerCase().includes(f.toLowerCase())));return x==="archived"?y.isArchived&&S:x==="active"?!y.isArchived&&S:S}),[o,f,x]),P=y=>{l(S=>S.map(I=>I.id===y.id?y:I)),h(y),i("detail"),r==null||r()},D=y=>{const S=localStorage.getItem("userId"),I=localStorage.getItem("userDisplayName");return y===S||y==="current-user"?{id:S||y,name:I||"Current User",email:"current@example.com",avatar:(I==null?void 0:I.charAt(0))||"CU"}:qS.find(J=>J.id===y)||{id:y,name:"Unknown User",email:"",avatar:"UN"}},B=()=>{h(null),i("create")},F=y=>{h(y),i("edit")},se=y=>{h(y),i("detail"),r==null||r()},z=y=>xe(this,null,function*(){try{yield Nt.deleteWorkspace(y),l(S=>S.filter(I=>I.id!==y)),k({description:"Moodboard deleted successfully"}),i("list"),a==null||a()}catch(S){k({title:"Error",description:"Failed to delete moodboard",variant:"destructive"})}}),C=()=>{h(null),i("list"),a==null||a()},A=y=>xe(this,null,function*(){try{v(!0);const S=yield Nt.createWorkspaceForProject(y.id,"moodboard");k({title:S.isNew?"Moodboard created":"Existing moodboard found",description:S.message});const I=Nt.workspaces.filter(M=>M.type==="moodboard");l(I),se(S.workspace)}catch(S){k({title:"Error",description:"Failed to create moodboard",variant:"destructive"})}finally{v(!1)}}),L=y=>{const S=localStorage.getItem("userId")||"current-user";if(localStorage.getItem("userDisplayName"),n==="edit"&&d){const I=[],M=[];y.items&&y.items.forEach(ae=>{ae.type==="image"?I.push({id:`img-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,type:"image",url:ae.url,filename:ae.url.split("/").pop()||"image"}):M.push({id:`link-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,type:"link",url:ae.url,title:ae.title||ae.url})});const J=Q(E({},d),{name:y.name,description:y.description||d.description,projectId:y.projectId||d.projectId,tags:y.tags||d.tags,updatedAt:new Date().toISOString(),settings:Q(E({},d.settings),{isPublic:y.isPublic!==void 0?y.isPublic:d.settings.isPublic}),images:[...d.images||[],...I],links:[...d.links||[],...M]});P(J),k({description:"Moodboard updated successfully"})}else{const I=[],M=[];y.items&&y.items.forEach(ae=>{ae.type==="image"?I.push({id:`img-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,type:"image",url:ae.url,filename:ae.url.split("/").pop()||"image"}):M.push({id:`link-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,type:"link",url:ae.url,title:ae.title||ae.url})});const J={id:`moodboard-${Date.now()}`,projectId:y.projectId||"",name:y.name,type:"moodboard",description:y.description||"",tags:y.tags||[],createdBy:S,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),isArchived:!1,collaborators:[S],settings:{isPublic:y.isPublic||!1,allowComments:!0,allowEditing:!0,autoSave:!0},images:I,links:M,comments:[]};l(ae=>[...ae,J]),Nt.workspaces.push(J),h(J),i("detail"),r==null||r(),k({description:"New moodboard created successfully"})}};return n==="detail"&&d?e.jsx(US,{moodboard:d,onBack:C,onEdit:()=>F(d),onDelete:()=>z(d.id),getUserById:D,onMoodboardUpdate:P}):n==="create"?e.jsx("div",{className:Ce("p-6",s),children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(le,{variant:"ghost",size:"sm",onClick:()=>i("list"),children:e.jsx(Ca,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Create Moodboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Choose how you want to create your moodboard"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-4xl",children:[e.jsxs(Ke,{className:"cursor-pointer transition-all hover:shadow-md hover:scale-[1.02] border-l-4 border-l-purple-500",children:[e.jsxs(_t,{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"p-4 bg-purple-100 rounded-full",children:e.jsx(ar,{className:"h-8 w-8 text-purple-600"})})}),e.jsx(Ot,{className:"text-xl",children:"Standalone Moodboard"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Create a new moodboard from scratch without linking to a specific project"})]}),e.jsx(Xe,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("span",{className:"text-muted-foreground",children:"Features:"})}),e.jsxs("ul",{className:"text-xs text-muted-foreground space-y-1",children:[e.jsx("li",{children:"• Custom name and description"}),e.jsx("li",{children:"• Add images and links manually"}),e.jsx("li",{children:"• Collaborative editing"}),e.jsx("li",{children:"• Share with team members"})]})]}),e.jsx(le,{className:"w-full button-primary-enhanced hover-shimmer cyrus-ui",onClick:()=>{const y=localStorage.getItem("userId")||"current-user";localStorage.getItem("userDisplayName");const S={id:`moodboard-${Date.now()}`,projectId:"",name:"New Moodboard",type:"moodboard",description:"",tags:[],createdBy:y,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),isArchived:!1,collaborators:[y],settings:{isPublic:!1,allowComments:!0,allowEditing:!0,autoSave:!0},images:[],links:[],comments:[]};l(I=>[...I,S]),Nt.workspaces.push(S),h(S),i("edit"),k({description:"New moodboard created successfully"})},children:"Create Standalone"})]})})]}),e.jsxs(Ke,{className:"cursor-pointer transition-all hover:shadow-md hover:scale-[1.02] border-l-4 border-l-blue-500",children:[e.jsxs(_t,{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"p-4 bg-blue-100 rounded-full",children:e.jsx(gs,{className:"h-8 w-8 text-blue-600"})})}),e.jsx(Ot,{className:"text-xl",children:"Project-Based Moodboard"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Create a moodboard linked to an existing project with its media and links"})]}),e.jsx(Xe,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("span",{className:"text-muted-foreground",children:"Features:"})}),e.jsxs("ul",{className:"text-xs text-muted-foreground space-y-1",children:[e.jsx("li",{children:"• Auto-populated with project media"}),e.jsx("li",{children:"• Synced with project updates"}),e.jsx("li",{children:"• Project team collaboration"}),e.jsx("li",{children:"• Client presentation ready"})]})]}),e.jsx(le,{className:"w-full button-primary-enhanced hover-shimmer cyrus-ui",onClick:()=>i("create-project-based"),children:"Select Project"})]})})]})]})]})}):n==="create-project-based"?e.jsx("div",{className:Ce("p-6",s),children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(le,{variant:"ghost",size:"sm",onClick:()=>i("create"),children:e.jsx(Ca,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Select Project"}),e.jsx("p",{className:"text-muted-foreground",children:"Choose a project to create a moodboard from"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(y=>e.jsxs(Ke,{className:"cursor-pointer transition-all hover:shadow-md hover:scale-[1.02] border-l-4",style:{borderLeftColor:y.status==="delivered"?"#10b981":"#3b82f6"},onClick:()=>A(y),children:[e.jsxs(_t,{children:[e.jsx(Ot,{className:"text-lg",children:y.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:y.client})]}),e.jsx(Xe,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Status"}),e.jsx(Qe,{variant:"outline",children:y.status})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Created"}),e.jsx("span",{children:Wt(y.createdAt)})]}),e.jsx("div",{className:"pt-2",children:e.jsx(le,{className:"w-full button-primary-enhanced hover-shimmer cyrus-ui",size:"sm",children:"Create Moodboard"})})]})})]},y.id))}),t.length===0&&!j&&e.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg",children:[e.jsx("div",{className:"text-gray-400 mb-4",children:e.jsx("svg",{className:"h-12 w-12 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Projects Available"}),e.jsx("p",{className:"text-gray-500",children:"Create a project first to set up a moodboard"})]}),j&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading projects..."})]})]})}):n==="edit"&&d?e.jsx(BS,{moodboard:d,onSubmit:L,onCancel:C,availableTags:zS}):e.jsxs("div",{className:Ce("p-6",s),children:[e.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Moodboards"}),e.jsx("p",{className:"text-muted-foreground",children:"Create and organize visual inspiration for your projects"})]}),e.jsxs(le,{onClick:B,className:"button-primary-enhanced hover-shimmer cyrus-ui",children:[e.jsx(gs,{className:"h-4 w-4 mr-2"}),"New Moodboard"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"md:col-span-2 relative",children:[e.jsx(dn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),e.jsx(Pt,{placeholder:"Search moodboards...",className:"pl-10",value:f,onChange:y=>p(y.target.value)})]}),e.jsx("div",{className:"md:col-span-1",children:e.jsxs(bs,{value:x,onValueChange:u,children:[e.jsx(fs,{children:e.jsx(ws,{placeholder:"Filter by status"})}),e.jsxs(ps,{children:[e.jsx(tt,{value:"all",children:"All Moodboards"}),e.jsx(tt,{value:"active",children:"Active"}),e.jsx(tt,{value:"archived",children:"Archived"})]})]})})]}),j?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading moodboards..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:w.map(y=>{var ce,ie,ve;const S=t.find(Ae=>Ae.id===y.projectId);S&&S.name,S&&S.client;const I=D(y.createdBy),M=((ce=y.images)==null?void 0:ce.length)||0,J=((ie=y.links)==null?void 0:ie.length)||0,ae=((ve=y.comments)==null?void 0:ve.length)||0;return e.jsxs(Ke,{className:"cursor-pointer transition-all hover:shadow-md hover:scale-[1.01] overflow-hidden",onClick:()=>se(y),children:[e.jsx("div",{className:"h-48 grid grid-cols-2 gap-1 bg-gray-100 overflow-hidden",children:he()}),e.jsx(_t,{className:"pb-2",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:y.name}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mt-1",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(da,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:I.name})]}),e.jsx("span",{children:"•"}),e.jsx("span",{children:Wt(y.createdAt,"MMM d, yyyy")}),S&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsx("span",{children:S.name})]})]})]}),e.jsx(ar,{className:"h-5 w-5 text-muted-foreground"})]})}),e.jsxs(Xe,{className:"pt-0",children:[e.jsx("div",{className:"flex items-center justify-between text-sm text-muted-foreground mb-3",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Yn,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:M})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(qa,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:J})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Nr,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:ae})]})]})}),y.tags&&y.tags.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1 mb-3",children:[y.tags.slice(0,3).map(Ae=>e.jsx(Qe,{variant:"secondary",className:"text-xs",children:Ae},Ae)),y.tags.length>3&&e.jsxs(Qe,{variant:"outline",className:"text-xs",children:["+",y.tags.length-3]})]}),e.jsxs(le,{variant:"outline",size:"sm",className:"w-full",onClick:Ae=>{Ae.stopPropagation(),se(y)},children:[e.jsx(Yd,{className:"h-4 w-4 mr-2"}),"View Moodboard"]})]}),e.jsx(f1,{className:"pt-0",children:e.jsxs("div",{className:"flex justify-between w-full items-center",children:[e.jsxs("div",{className:"flex gap-4 text-xs text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ar,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:M})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(qa,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:J})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(xs,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:Wt(y.updatedAt)})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(uc,{className:"h-6 w-6",children:e.jsx(hc,{className:"text-xs bg-primary text-primary-foreground",children:I.avatar})})})]})})]},y.id);function he(){return y.images&&y.images.length>0?y.images.length===1?e.jsx("div",{className:"col-span-2 h-full",children:e.jsx("img",{src:y.images[0].url,alt:"Moodboard preview",className:"h-full w-full object-cover"})}):y.images.length===2?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-full",children:e.jsx("img",{src:y.images[0].url,alt:"Moodboard preview",className:"h-full w-full object-cover"})}),e.jsx("div",{className:"h-full",children:e.jsx("img",{src:y.images[1].url,alt:"Moodboard preview",className:"h-full w-full object-cover"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-full col-span-1",children:e.jsx("img",{src:y.images[0].url,alt:"Moodboard preview",className:"h-full w-full object-cover"})}),e.jsxs("div",{className:"grid grid-rows-2 gap-1 h-full col-span-1",children:[e.jsx("div",{children:e.jsx("img",{src:y.images[1].url,alt:"Moodboard preview",className:"h-full w-full object-cover"})}),e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:y.images[2].url,alt:"Moodboard preview",className:"h-full w-full object-cover"}),y.images.length>3&&e.jsxs("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center text-white font-medium",children:["+",y.images.length-3]})]})]})]}):e.jsx("div",{className:"col-span-2 h-full flex items-center justify-center bg-gray-100",children:e.jsx(ar,{className:"h-12 w-12 text-gray-300"})})}})}),w.length===0&&e.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg",children:[e.jsx(ar,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Moodboards Found"}),e.jsx("p",{className:"text-gray-500 mb-4",children:f?"No moodboards match your search. Try different keywords.":"Create your first moodboard to start organizing visual inspiration."}),e.jsxs(le,{onClick:B,children:[e.jsx(gs,{className:"h-4 w-4 mr-2"}),"Create Moodboard"]})]})]})]})}const WS=({onSubmit:s})=>{const[t,r]=N.useState(""),a=n=>{n.preventDefault(),t.trim()&&(s(t),r(""))};return e.jsx(Ke,{className:"glass-card",children:e.jsx(Xe,{className:"p-4",children:e.jsxs("form",{onSubmit:a,className:"space-y-3",children:[e.jsx(Sr,{placeholder:"Add a comment...",value:t,onChange:n=>r(n.target.value),className:"resize-none min-h-[80px] hover-shimmer cyrus-ui"}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(le,{type:"submit",size:"sm",disabled:!t.trim(),className:"hover-shimmer cyrus-ui",children:[e.jsx(Nr,{className:"h-4 w-4 mr-2"}),"Add Comment"]})})]})})})},HS=({whiteboard:s,onBack:t,onPin:r,isPinned:a})=>{const[n,i]=N.useState([]);N.useEffect(()=>{s.categories&&Array.isArray(s.categories)?i(s.categories):i([{id:"cat-default",name:"Images",color:"#3b82f6",isMinimized:!1,images:[]}])},[s.id,s.categories]),N.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]);const[o,l]=N.useState(null),[d,h]=N.useState(1),[f,p]=N.useState({x:0,y:0}),[x,u]=N.useState(!1),[k,j]=N.useState({x:void 0,y:void 0}),[v]=N.useState(5),[w,P]=N.useState({x:0,y:0}),[D,B]=N.useState(!1),[F,se]=N.useState(!1),[z,C]=N.useState(""),[A,L]=N.useState(!1),[y,S]=N.useState(null),[I,M]=N.useState(""),[J,ae]=N.useState("pins"),[he,ce]=N.useState(null),[ie,ve]=N.useState(null),[Ae,T]=N.useState(""),[U,V]=N.useState(""),[re,G]=N.useState(null),[Y,Z]=N.useState(!1),[de,Le]=N.useState(""),[X,me]=N.useState(null),[we,oe]=N.useState(null),[ee,H]=N.useState(!1),[Ee,Fe]=N.useState(!0),Ie=N.useRef(null);du(s.id);const Ue=()=>{const fe=localStorage.getItem("userId")||"current-user",De=localStorage.getItem("userDisplayName")||"Current User";return{id:fe,name:De,avatar:"https://i.pravatar.cc/150?u=current-user"}},Ye=fe=>{const De=localStorage.getItem("userId"),ue=localStorage.getItem("userDisplayName");return fe===De||fe==="current-user"?{id:De||fe,name:ue||"Current User",email:"current@example.com"}:[{id:"user-1",name:"John Smith",email:"john@example.com"},{id:"user-2",name:"Sarah Wilson",email:"sarah@example.com"},{id:"user-3",name:"Mike Chen",email:"mike@example.com"},{id:"user-4",name:"Emily Davis",email:"emily@example.com"}].find(Ge=>Ge.id===fe)||{id:fe,name:"Unknown User",email:""}},We=N.useRef(null),st=()=>{if(z.trim()){const fe={id:`cat-${Date.now()}`,name:z.trim(),color:"#8b5cf6",isMinimized:!1,images:[]};i(De=>[...De,fe]),C(""),L(!1),ds.logActivity({type:"whiteboard_updated",title:"Added category",description:`Added new category "${z.trim()}" to whiteboard.`,projectId:s.projectId,userId:Ue().id})}},ot=fe=>{window.confirm("Are you sure you want to delete this category and all its images?")&&(i(De=>De.filter(ue=>ue.id!==fe)),ds.logActivity({type:"whiteboard_updated",title:"Deleted category",description:`Deleted category with ID: ${fe}`,projectId:s.projectId,userId:Ue().id}))},mt=(fe,De)=>{De.trim()&&(i(ue=>ue.map(Se=>Se.id===fe?Q(E({},Se),{name:De.trim()}):Se)),S(null),M(""))},rt=fe=>{i(De=>De.map(ue=>ue.id===fe?Q(E({},ue),{isMinimized:!ue.isMinimized}):ue))},Be=(fe,De)=>{i(Se=>{const Oe=Se.findIndex(St=>St.id===fe);if(Oe===-1)return Se;const Ge=[...Se],[gt]=Ge.splice(Oe,1);let Ft;switch(De){case"up":Ft=Math.max(0,Oe-1);break;case"down":Ft=Math.min(Ge.length,Oe+1);break;case"top":Ft=0;break;case"bottom":Ft=Ge.length;break;default:return Se}return Ge.splice(Ft,0,gt),Ge});const ue=n.find(Se=>Se.id===fe);ds.logActivity({type:"whiteboard_updated",title:"Category moved",description:`Moved category "${ue==null?void 0:ue.name}" ${De}`,projectId:s.projectId,userId:Ue().id})},ft=fe=>xe(void 0,null,function*(){const De=fe.target.files;if(!De||!re)return;const ue=Ue();for(const Se of Array.from(De))try{let Oe,Ge;const gt=typeof window!="undefined"&&"pulse2"in window?window.pulse2:null;if(gt){const St=new FormData;St.append("file",Se);const Tt=yield fetch(gt.mediaUrl,{method:"POST",headers:{"X-WP-Nonce":gt.nonce},body:St});if(!Tt.ok)throw new Error("Failed to upload media");const is=yield Tt.json();Oe=is.source_url,Ge=is.id.toString()}else Oe=URL.createObjectURL(Se),Ge=`img-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;const Ft={id:Ge,url:Oe,filename:Se.name,categoryId:re,label:Se.name,uploadedBy:ue.id,uploadedAt:new Date().toISOString(),pins:[],comments:[]};i(St=>St.map(Tt=>Tt.id===re?Q(E({},Tt),{images:[...Tt.images,Ft]}):Tt));try{const St=n.map(Tt=>Tt.id===re?Q(E({},Tt),{images:[...Tt.images,Ft]}):Tt);yield Nt.updateWorkspace(s.id,Q(E({},s),{categories:St}))}catch(St){}yield ds.logActivity({type:"whiteboard_updated",title:"Added image to whiteboard",description:`Added image "${Se.name}" to whiteboard "${s.name}".`,projectId:s.projectId,userId:ue.id,metadata:{whiteboardId:s.id,imageId:Ft.id,categoryId:re,filename:Se.name}})}catch(Oe){}fe.target.value=""}),pt=fe=>xe(void 0,null,function*(){var De,ue;if(window.confirm("Are you sure you want to delete this image? This will also remove it from the associated project.")){const Se=n.flatMap(Oe=>Oe.images).find(Oe=>Oe.id===fe);if(!Se)return;i(Oe=>Oe.map(Ge=>Q(E({},Ge),{images:Ge.images.filter(gt=>gt.id!==fe)}))),(o==null?void 0:o.id)===fe&&l(null);try{if(s.projectId){const Oe=yield vr.getProject(s.projectId),Ge=(De=Oe.media)==null?void 0:De.find(gt=>gt.filename===Se.filename||gt.url===Se.url);if(Ge){const gt=((ue=Oe.media)==null?void 0:ue.filter(Ft=>Ft.id!==Ge.id))||[];yield vr.updateProject(s.projectId,{media:gt})}}}catch(Oe){}ds.logActivity({type:"whiteboard_updated",title:"Deleted image",description:`Deleted image: ${Se.filename}`,projectId:s.projectId,userId:Ue().id,metadata:{imageId:fe,filename:Se.filename}})}}),Ct=fe=>{l(fe),h(1),p({x:0,y:0})},Je=fe=>{B(!1)},Xt=fe=>{if(!Ee||ee||D)return;fe.stopPropagation(),fe.preventDefault();const ue=fe.currentTarget.getBoundingClientRect(),Se=(fe.clientX-ue.left)/ue.width*100,Oe=(fe.clientY-ue.top)/ue.height*100,Ge=Math.max(0,Math.min(100,Se)),gt=Math.max(0,Math.min(100,Oe));me({x:Ge,y:gt}),Z(!0)},Lt=()=>xe(void 0,null,function*(){if(!o||!X||!de.trim())return;const fe=Ue(),De={id:`pin-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,x:X.x,y:X.y,note:de.trim(),createdBy:fe.id,createdAt:new Date().toISOString(),isResolved:!1,replies:[]};try{const ue=yield Nt.createImagePin(o.id,{x:X.x,y:X.y,note:de.trim()}),Se=Q(E({},De),{id:ue.id}),Oe=n.map(Ge=>Q(E({},Ge),{images:Ge.images.map(gt=>gt.id===o.id?Q(E({},gt),{pins:[...gt.pins,Se]}):gt)}));i(Oe),l(Ge=>Ge?Q(E({},Ge),{pins:[...Ge.pins,Se]}):null),me(null),Le(""),Z(!1),yield ds.logActivity({type:"pin_added",title:"Pin added to whiteboard",description:`Added pin to image "${o.filename}" in whiteboard "${s.name}".`,projectId:s.projectId,userId:fe.id,metadata:{whiteboardId:s.id,imageId:o.id,pinId:Se.id,imageName:o.filename,pinNote:Se.note}})}catch(ue){alert("Failed to save pin. Please try again.")}}),Ps=fe=>xe(void 0,null,function*(){if(!o||!fe.trim())return;const De=Ue(),ue={id:`comment-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,text:fe.trim(),createdBy:De.id,createdAt:new Date().toISOString(),userAvatar:De.avatar,replies:[]};try{const Se=yield Nt.createWorkspaceComment(s.id,{text:fe.trim(),imageId:o.id}),Oe=Q(E({},ue),{id:Se.id}),Ge=n.map(gt=>Q(E({},gt),{images:gt.images.map(Ft=>Ft.id===o.id?Q(E({},Ft),{comments:[...Ft.comments,Oe]}):Ft)}));i(Ge),l(gt=>gt?Q(E({},gt),{comments:[...gt.comments,Oe]}):null),yield ds.logActivity({type:"comment_added",title:"Comment added to whiteboard",description:`Added comment to image "${o.filename}" in whiteboard "${s.name}".`,projectId:s.projectId,userId:De.id,metadata:{whiteboardId:s.id,imageId:o.id,commentId:Oe.id,imageName:o.filename,commentText:Oe.text}})}catch(Se){alert("Failed to save comment. Please try again.")}}),Qt=fe=>xe(void 0,null,function*(){if(!(!o||!window.confirm("Are you sure you want to delete this comment?")))try{const De=n.map(ue=>Q(E({},ue),{images:ue.images.map(Se=>Se.id===o.id?Q(E({},Se),{comments:Se.comments.filter(Oe=>Oe.id!==fe)}):Se)}));i(De),l(ue=>ue?Q(E({},ue),{comments:ue.comments.filter(Se=>Se.id!==fe)}):null);try{yield Nt.updateWorkspace(s.id,Q(E({},s),{categories:De}))}catch(ue){}yield ds.logActivity({type:"whiteboard_updated",title:"Comment deleted from whiteboard",description:`Deleted comment from image "${o.filename}" in whiteboard "${s.name}".`,projectId:s.projectId,userId:Ue().id,metadata:{whiteboardId:s.id,imageId:o.id,commentId:fe,imageName:o.filename}})}catch(De){}}),Gt=(fe,De)=>{if(!(!o||!De.trim()))try{Nt.updatePin(fe,{note:De.trim()});const ue=n.map(Se=>Q(E({},Se),{images:Se.images.map(Oe=>Oe.id===o.id?Q(E({},Oe),{pins:Oe.pins.map(Ge=>Ge.id===fe?Q(E({},Ge),{note:De.trim()}):Ge)}):Oe)}));i(ue),l(Se=>Se?Q(E({},Se),{pins:Se.pins.map(Oe=>Oe.id===fe?Q(E({},Oe),{note:De.trim()}):Oe)}):null),ce(null),T(""),ds.logActivity({type:"whiteboard_updated",title:"Pin updated in whiteboard",description:`Updated pin on image "${o.filename}" in whiteboard "${s.name}".`,projectId:s.projectId,userId:Ue().id,metadata:{whiteboardId:s.id,imageId:o.id,pinId:fe,imageName:o.filename,newNote:De.trim()}})}catch(ue){alert("Failed to update pin. Please try again.")}},nr=fe=>{if(!(!o||!window.confirm("Are you sure you want to delete this pin?")))try{Nt.deletePin(fe);const De=n.map(ue=>Q(E({},ue),{images:ue.images.map(Se=>Se.id===o.id?Q(E({},Se),{pins:Se.pins.filter(Oe=>Oe.id!==fe)}):Se)}));i(De),l(ue=>ue?Q(E({},ue),{pins:ue.pins.filter(Se=>Se.id!==fe)}):null),ds.logActivity({type:"whiteboard_updated",title:"Pin deleted from whiteboard",description:`Deleted pin from image "${o.filename}" in whiteboard "${s.name}".`,projectId:s.projectId,userId:Ue().id,metadata:{whiteboardId:s.id,imageId:o.id,pinId:fe,imageName:o.filename}})}catch(De){alert("Failed to delete pin. Please try again.")}},Yt=fe=>{if(!o)return;const De=o.pins.find(ue=>ue.id===fe);if(De)try{Nt.updatePin(fe,{isResolved:!De.isResolved});const ue=n.map(Se=>Q(E({},Se),{images:Se.images.map(Oe=>Oe.id===o.id?Q(E({},Oe),{pins:Oe.pins.map(Ge=>Ge.id===fe?Q(E({},Ge),{isResolved:!Ge.isResolved}):Ge)}):Oe)}));i(ue),l(Se=>Se?Q(E({},Se),{pins:Se.pins.map(Oe=>Oe.id===fe?Q(E({},Oe),{isResolved:!Oe.isResolved}):Oe)}):null),ds.logActivity({type:"whiteboard_updated",title:`Pin ${De.isResolved?"unresolved":"resolved"} in whiteboard`,description:`${De.isResolved?"Unresolved":"Resolved"} pin on image "${o.filename}" in whiteboard "${s.name}".`,projectId:s.projectId,userId:Ue().id,metadata:{whiteboardId:s.id,imageId:o.id,pinId:fe,imageName:o.filename,isResolved:!De.isResolved}})}catch(ue){alert("Failed to update pin status. Please try again.")}},ir=(fe,De)=>{o&&(i(ue=>ue.map(Se=>Q(E({},Se),{images:Se.images.map(Oe=>Oe.id===o.id?Q(E({},Oe),{comments:Oe.comments.map(Ge=>Ge.id===fe?Q(E({},Ge),{text:De}):Ge)}):Oe)}))),l(ue=>ue?Q(E({},ue),{comments:ue.comments.map(Se=>Se.id===fe?Q(E({},Se),{text:De}):Se)}):null),ve(null),V(""),ds.logActivity({type:"whiteboard_updated",title:"Comment updated",projectId:s.projectId,userId:Ue().id,metadata:{imageId:o.id,commentId:fe}}))},ss=()=>h(fe=>Math.min(fe*1.2,5)),Fs=()=>h(fe=>Math.max(fe/1.2,.1)),Vs=()=>{h(1);const fe=Ut(0,0,1,Ie);p(fe)},Ut=N.useCallback((fe,De,ue,Se)=>{if(!(Se!=null&&Se.current))return{x:fe,y:De};const Oe=Se.current,Ge=Oe.querySelector("img");if(!Ge)return{x:fe,y:De};const gt=Oe.getBoundingClientRect(),Ft=Ge.offsetWidth*ue,St=Ge.offsetHeight*ue,Tt=gt.width,is=gt.height,Ss=50,or=Math.max(Ss,(Ft-Tt)/2+Ss),kr=Math.min(-Ss,-(Ft-Tt)/2-Ss),Ia=Math.max(Ss,(St-is)/2+Ss),Ya=Math.min(-Ss,-(St-is)/2-Ss);return Ft<=Tt?fe=Math.max(kr,Math.min(or,0)):fe=Math.max(kr,Math.min(or,fe)),St<=is?De=Math.max(Ya,Math.min(Ia,0)):De=Math.max(Ya,Math.min(Ia,De)),{x:fe,y:De}},[]),wt=N.useCallback(fe=>{if(!Ie.current)return;const ue=Ie.current.getBoundingClientRect(),Se=fe.clientX-ue.left,Oe=fe.clientY-ue.top,Ge=ue.width/2,gt=ue.height/2,Ft=fe.deltaY>0?.9:1.1,St=Math.max(.1,Math.min(5,d*Ft));if(St===d)return;const Tt=(Se-Ge-f.x)/d,is=(Oe-gt-f.y)/d,Ss=Ge+Tt*St-Se,or=gt+is*St-Oe,kr=Ut(-Ss,-or,St,Ie);h(St),p(kr)},[d,f,Ut]),Ze=N.useCallback(fe=>{var De;if(ee&&we&&o&&Ie.current){fe.preventDefault(),fe.stopPropagation();const Se=(De=Ie.current.querySelector("img"))==null?void 0:De.getBoundingClientRect();if(!Se)return;const Oe=(fe.clientX-Se.left)/Se.width*100,Ge=(fe.clientY-Se.top)/Se.height*100,gt=Math.max(0,Math.min(100,Oe)),Ft=Math.max(0,Math.min(100,Ge));i(St=>St.map(Tt=>Q(E({},Tt),{images:Tt.images.map(is=>is.id===o.id?Q(E({},is),{pins:is.pins.map(Ss=>Ss.id===we?Q(E({},Ss),{x:gt,y:Ft}):Ss)}):is)}))),l(St=>St?Q(E({},St),{pins:St.pins.map(Tt=>Tt.id===we?Q(E({},Tt),{x:gt,y:Ft}):Tt)}):null)}},[ee,we,o]),zt=N.useCallback(fe=>{fe.button===0&&(fe.preventDefault(),j({x:fe.clientX-f.x,y:fe.clientY-f.y}),P({x:fe.clientX,y:fe.clientY}),B(!1))},[f]),vt=N.useCallback(fe=>{if(ee){Ze(fe);return}if(x&&k.x!==void 0&&k.y!==void 0){fe.preventDefault();const De=fe.clientX-k.x,ue=fe.clientY-k.y,Se=Ut(De,ue,d,Ie);p(Se)}else if(!ee&&k.x!==void 0&&k.y!==void 0){const De=fe.clientX-w.x,ue=fe.clientY-w.y;if(Math.sqrt(De*De+ue*ue)>v){u(!0),B(!0),fe.preventDefault();const Oe=fe.clientX-k.x,Ge=fe.clientY-k.y,gt=Ut(Oe,Ge,d,Ie);p(gt)}}},[x,ee,k,w,v,Ut,d,Ze]),js=N.useCallback(()=>{u(!1),B(!1),j({x:void 0,y:void 0})},[]),Ns=N.useCallback((fe,De)=>{fe.stopPropagation(),fe.preventDefault(),oe(De),H(!0),j({x:void 0,y:void 0}),B(!1)},[]);N.useCallback(()=>{ee&&we&&(H(!1),oe(null),ds.logActivity({type:"whiteboard_updated",title:"Pin moved",description:"Moved pin in image",projectId:s.projectId,userId:Ue().id}))},[ee,we,s.projectId]),N.useEffect(()=>{const fe=ue=>{if(x&&k.x!==void 0&&k.y!==void 0){const Se=ue.clientX-k.x,Oe=ue.clientY-k.y,Ge=Ut(Se,Oe,d,Ie);p(Ge)}},De=()=>{ee&&we&&ds.logActivity({type:"whiteboard_updated",title:`Pin repositioned in ${o==null?void 0:o.filename}`,projectId:s.projectId,userId:Ue().id,metadata:{imageId:o==null?void 0:o.id,pinId:we}}),u(!1),H(!1),oe(null),B(!1),j({x:void 0,y:void 0})};return(x||ee)&&(document.addEventListener("mousemove",fe),document.addEventListener("mouseup",De)),()=>{document.removeEventListener("mousemove",fe),document.removeEventListener("mouseup",De)}},[x,ee,k,Ut,d,o,we,s.projectId]),N.useEffect(()=>{o&&(Nt.getImagePins(o.id).then(fe=>{if(fe&&fe.length>0){const De=n.map(ue=>Q(E({},ue),{images:ue.images.map(Se=>Se.id===o.id?Q(E({},Se),{pins:fe}):Se)}));i(De),l(ue=>ue?Q(E({},ue),{pins:fe}):null)}}).catch(fe=>{}),Nt.getWorkspaceComments(s.id).then(fe=>{if(fe&&fe.length>0){const De=fe.filter(ue=>ue.imageId===o.id);if(De.length>0){const ue=n.map(Se=>Q(E({},Se),{images:Se.images.map(Oe=>Oe.id===o.id?Q(E({},Oe),{comments:De}):Oe)}));i(ue),l(Se=>Se?Q(E({},Se),{comments:De}):null)}}}).catch(fe=>{}))},[o==null?void 0:o.id,s.id]);const ut=()=>o?e.jsx("div",{className:"w-full",children:e.jsxs(Jo,{value:J,onValueChange:fe=>ae(fe),children:[e.jsxs(Bi,{className:"grid w-full grid-cols-2 mb-4",children:[e.jsxs(yr,{value:"pins",className:"flex items-center gap-2",children:[e.jsx(ka,{className:"h-4 w-4"}),"Pins (",o.pins.length,")"]}),e.jsxs(yr,{value:"comments",className:"flex items-center gap-2",children:[e.jsx(Nr,{className:"h-4 w-4"}),"Comments (",o.comments.length,")"]})]}),e.jsx(br,{value:"pins",className:"space-y-4",children:o.pins.length>0?o.pins.map(fe=>e.jsx(Ke,{className:"glass-card",children:e.jsx(Xe,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ka,{className:Ce("h-4 w-4 mt-1",fe.isResolved?"text-green-500":"text-blue-500")}),e.jsx("div",{className:"flex-1",children:he===fe.id?e.jsxs("div",{className:"space-y-2",children:[e.jsx(Sr,{value:Ae,onChange:De=>T(De.target.value),className:"text-sm resize-none min-h-[60px]"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(le,{size:"sm",onClick:()=>Gt(fe.id,Ae),disabled:!Ae.trim(),children:"Save"}),e.jsx(le,{size:"sm",variant:"outline",onClick:()=>{ce(null),T("")},children:"Cancel"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:Ce("text-sm",fe.isResolved&&"line-through text-muted-foreground"),children:fe.note}),e.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-muted-foreground",children:[e.jsx("span",{children:Ye(fe.createdBy).name}),e.jsx("span",{children:"•"}),e.jsx("span",{children:Wt(fe.createdAt)}),e.jsx(Qe,{variant:fe.isResolved?"default":"secondary",className:"text-xs",children:fe.isResolved?"Resolved":"Open"})]}),e.jsxs("div",{className:"flex gap-1 mt-3",children:[e.jsx(le,{size:"sm",variant:"outline",onClick:()=>{ce(fe.id),T(fe.note)},className:"hover-shimmer cyrus-ui h-7 w-7 p-0",children:e.jsx(Vl,{className:"h-3 w-3"})}),e.jsx(le,{size:"sm",variant:fe.isResolved?"secondary":"default",onClick:()=>Yt(fe.id),className:"hover-shimmer cyrus-ui h-7 w-7 p-0",title:fe.isResolved?"Unresolve":"Resolve",children:e.jsx(la,{className:"h-3 w-3"})}),e.jsx(le,{size:"sm",variant:"destructive",onClick:()=>nr(fe.id),className:"hover-shimmer cyrus-ui h-7 w-7 p-0",children:e.jsx(jr,{className:"h-3 w-3"})})]})]})})]})})},fe.id)):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(ka,{className:"h-8 w-8 mx-auto mb-2"}),e.jsx("p",{children:"No pins yet"}),e.jsx("p",{className:"text-xs",children:Ee?"Click on the image to add pins (Pin mode: ON)":"Enable pin mode using the pin button below the image"})]})}),e.jsxs(br,{value:"comments",className:"space-y-4",children:[e.jsx(WS,{onSubmit:Ps}),o.comments.length>0?o.comments.map(fe=>e.jsx(Ke,{className:"glass-card",children:e.jsx(Xe,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white text-xs font-medium",children:fe.userAvatar||Ye(fe.createdBy).name.charAt(0).toUpperCase()}),e.jsx("div",{className:"flex-1",children:ie===fe.id?e.jsxs("div",{className:"space-y-2",children:[e.jsx(Sr,{value:U,onChange:De=>V(De.target.value),className:"text-sm resize-none min-h-[60px]"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(le,{size:"sm",onClick:()=>ir(fe.id,U),disabled:!U.trim(),children:"Save"}),e.jsx(le,{size:"sm",variant:"outline",onClick:()=>{ve(null),V("")},children:"Cancel"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm",children:fe.text}),e.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-muted-foreground",children:[e.jsx("span",{children:Ye(fe.createdBy).name}),e.jsx("span",{children:"•"}),e.jsx("span",{children:Wt(fe.createdAt)})]}),e.jsxs("div",{className:"flex gap-1 mt-3",children:[e.jsx(le,{size:"sm",variant:"outline",onClick:()=>{ve(fe.id),V(fe.text)},className:"hover-shimmer cyrus-ui h-7 w-7 p-0",children:e.jsx(Vl,{className:"h-3 w-3"})}),e.jsx(le,{size:"sm",variant:"destructive",onClick:()=>Qt(fe.id),className:"hover-shimmer cyrus-ui h-7 w-7 p-0",children:e.jsx(jr,{className:"h-3 w-3"})})]})]})})]})})},fe.id)):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Nr,{className:"h-8 w-8 mx-auto mb-2"}),e.jsx("p",{children:"No comments yet"}),e.jsx("p",{className:"text-xs",children:"Start a conversation about this image"})]})]})]})}):null;return e.jsxs("div",{className:"h-screen flex flex-col bg-background overflow-hidden",children:[e.jsxs("header",{className:"flex items-center justify-between p-4 border-b bg-background/80 backdrop-blur-sm flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(le,{onClick:t,variant:"ghost",size:"sm",className:"mr-2",children:e.jsx(Ca,{className:"h-4 w-4"})}),e.jsx("div",{children:o?e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-xl font-bold",children:o.filename}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(xs,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:Wt(o.uploadedAt)}),e.jsx("span",{className:"h-1 w-1 rounded-full bg-muted-foreground"}),e.jsx(da,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:Ye(o.uploadedBy).name})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-xl font-bold",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(xs,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:Wt(s.updatedAt||s.createdAt)}),e.jsx("span",{className:"h-1 w-1 rounded-full bg-muted-foreground"}),e.jsx(da,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:Ue().name})]})]})})]}),e.jsx("div",{className:"flex items-center gap-2",children:!o&&e.jsxs(le,{variant:"ghost",size:"sm",onClick:()=>L(!0),className:"flex items-center gap-1",children:[e.jsx(Dy,{className:"h-4 w-4"}),"Add Category"]})})]}),o?e.jsxs("div",{className:"flex flex-1 min-h-0 overflow-hidden",children:[e.jsxs("div",{className:"flex-1 relative overflow-hidden bg-black/5",style:{cursor:ee?"default":x?"grabbing":k.x!==void 0?"grab":"default"},onWheel:wt,onMouseDown:zt,onMouseMove:vt,onMouseUp:js,ref:Ie,children:[e.jsxs("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 z-10 flex items-center gap-2 bg-background/80 backdrop-blur-sm border rounded-lg px-3 py-2",children:[e.jsx(le,{variant:"ghost",size:"sm",onClick:Fs,disabled:d<=.1,children:e.jsx(Wy,{className:"h-4 w-4"})}),e.jsxs("span",{className:"text-xs font-medium min-w-[3rem] text-center",children:[Math.round(d*100),"%"]}),e.jsx(le,{variant:"ghost",size:"sm",onClick:ss,disabled:d>=5,children:e.jsx($y,{className:"h-4 w-4"})}),e.jsx("div",{className:"w-px h-4 bg-border mx-1"}),e.jsx(Ti,{children:e.jsxs(ei,{children:[e.jsx(ti,{asChild:!0,children:e.jsx(le,{variant:Ee?"default":"ghost",size:"sm",onClick:()=>Fe(!Ee),className:Ce("hover-shimmer cyrus-ui",Ee&&"bg-primary text-primary-foreground"),children:e.jsx(ka,{className:"h-4 w-4"})})}),e.jsx(mn,{children:e.jsx("p",{children:Ee?"Disable pin creation":"Enable pin creation"})})]})}),e.jsx("div",{className:"w-px h-4 bg-border mx-1"}),e.jsx(le,{variant:"ghost",size:"sm",onClick:Vs,children:e.jsx(ix,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",style:{transform:`translate(${f.x}px, ${f.y}px) scale(${d})`,transformOrigin:"center center"},children:e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:o.url,alt:o.filename,className:"max-w-full max-h-full object-contain",style:{pointerEvents:x?"none":"auto",cursor:Ee?"crosshair":"default",width:"auto",height:"auto",maxWidth:"70vw",maxHeight:"60vh"},onMouseDown:Je,onClick:Xt,draggable:!1}),o.pins.map(fe=>e.jsx("div",{className:`absolute w-6 h-6 -ml-3 -mt-3 rounded-full flex items-center justify-center transition-all duration-200 ${fe.isResolved?"bg-green-500 hover:bg-green-600":"bg-red-500 hover:bg-red-600"} ${we===fe.id?"ring-2 ring-white cursor-grabbing":"hover:scale-110 cursor-grab"} shadow-lg hover:shadow-xl`,style:{left:`${fe.x}%`,top:`${fe.y}%`,transform:`scale(${1/d})`},onMouseDown:De=>Ns(De,fe.id),onClick:De=>{ee||(De.stopPropagation(),ce(fe.id),T(fe.note))},children:e.jsx("span",{className:"text-white text-xs font-bold",children:o.pins.findIndex(De=>De.id===fe.id)+1})},fe.id)),X&&e.jsx("div",{className:"absolute w-6 h-6 -ml-3 -mt-3 rounded-full bg-blue-500 flex items-center justify-center animate-pulse",style:{left:`${X.x}%`,top:`${X.y}%`,transform:`scale(${1/d})`},children:e.jsx(ka,{className:"h-3 w-3 text-white"})})]})})]}),e.jsx("div",{className:"w-[450px] border-l bg-background flex flex-col overflow-hidden",children:e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:ut()})})]}):e.jsx("div",{className:"flex-1 p-4 overflow-auto",children:e.jsx("div",{className:"space-y-3",children:n.map(fe=>e.jsxs(Ke,{children:[e.jsx(_t,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:y===fe.id?e.jsx("div",{className:"flex gap-2 items-center",children:e.jsx(Pt,{value:I,onChange:De=>M(De.target.value),className:"h-6 text-sm px-2",onBlur:()=>mt(fe.id,I),onKeyDown:De=>{De.key==="Enter"&&mt(fe.id,I),De.key==="Escape"&&S(null)},autoFocus:!0})}):e.jsxs(e.Fragment,{children:[e.jsx(le,{variant:"ghost",size:"sm",onClick:()=>rt(fe.id),className:"h-6 w-6 p-0",children:fe.isMinimized?e.jsx(Wa,{className:"h-4 w-4"}):e.jsx(Wo,{className:"h-4 w-4"})}),e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:fe.color}}),e.jsx("h3",{className:"text-sm font-medium",children:fe.name}),e.jsx(Qe,{variant:"secondary",className:"text-xs",children:fe.images.length})]})}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs(le,{variant:"ghost",size:"sm",onClick:()=>{var De;G(fe.id),(De=We.current)==null||De.click()},className:"h-6 px-2 text-xs",children:[e.jsx(gs,{className:"h-3 w-3 mr-1"}),"Add"]}),e.jsxs(Yo,{children:[e.jsx(Go,{asChild:!0,children:e.jsx(le,{variant:"ghost",size:"sm",className:"h-6 px-2",children:e.jsx(Gl,{className:"h-3 w-3"})})}),e.jsxs(Fi,{children:[e.jsxs(as,{onClick:()=>{S(fe.id),M(fe.name)},children:[e.jsx(Vl,{className:"h-4 w-4 mr-2"}),"Rename Category"]}),e.jsx(as,{onClick:()=>rt(fe.id),children:fe.isMinimized?e.jsxs(e.Fragment,{children:[e.jsx(Yd,{className:"h-4 w-4 mr-2"}),"Show Images"]}):e.jsxs(e.Fragment,{children:[e.jsx(tx,{className:"h-4 w-4 mr-2"}),"Hide Images"]})}),e.jsx(am,{}),e.jsxs(KN,{children:[e.jsxs(W0,{children:[e.jsx(Uy,{className:"h-4 w-4 mr-2"}),"Move Category"]}),e.jsxs(H0,{children:[e.jsx(as,{onClick:()=>Be(fe.id,"top"),disabled:n.findIndex(De=>De.id===fe.id)===0,children:"To Top"}),e.jsx(as,{onClick:()=>Be(fe.id,"up"),disabled:n.findIndex(De=>De.id===fe.id)===0,children:"Move Up"}),e.jsx(as,{onClick:()=>Be(fe.id,"down"),disabled:n.findIndex(De=>De.id===fe.id)===n.length-1,children:"Move Down"}),e.jsx(as,{onClick:()=>Be(fe.id,"bottom"),disabled:n.findIndex(De=>De.id===fe.id)===n.length-1,children:"To Bottom"})]})]}),e.jsx(am,{}),e.jsxs(as,{onClick:()=>ot(fe.id),className:"text-destructive",children:[e.jsx(jr,{className:"h-4 w-4 mr-2"}),"Delete Category"]})]})]})]})]})}),!fe.isMinimized&&e.jsx(Xe,{className:"pt-0",children:fe.images.length===0?e.jsx("div",{className:"text-center py-4 text-muted-foreground text-sm",children:"No images in this category"}):e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-2",children:fe.images.map(De=>e.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>Ct(De),children:[e.jsx("img",{src:De.url,alt:De.filename,className:"w-full aspect-square object-cover rounded border hover:shadow-md transition-shadow"}),De.pins.length>0&&e.jsx("div",{className:"absolute top-1 right-1",children:e.jsx(Qe,{variant:"secondary",className:"bg-red-500/90 text-white text-xs px-1 py-0",children:De.pins.length})}),e.jsx("div",{className:"absolute top-1 left-1 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(le,{size:"sm",variant:"destructive",className:"h-5 w-5 p-0",onClick:ue=>{ue.stopPropagation(),pt(De.id)},children:e.jsx(Hs,{className:"h-3 w-3"})})}),e.jsx("div",{className:"mt-1",children:e.jsx("p",{className:"text-xs text-center text-muted-foreground truncate",children:De.filename||`Image ${fe.images.findIndex(ue=>ue.id===De.id)+1}`})})]},De.id))})})]},fe.id))})}),e.jsx("input",{type:"file",ref:We,className:"hidden",onChange:ft,multiple:!0,accept:"image/*"}),e.jsx(Ts,{open:A,onOpenChange:L,children:e.jsxs(Is,{children:[e.jsx(Dr,{children:e.jsx(Ks,{children:"Add New Category"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(Pt,{placeholder:"Category name",value:z,onChange:fe=>C(fe.target.value)}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(le,{onClick:st,disabled:!z.trim(),children:"Add Category"}),e.jsx(le,{variant:"outline",onClick:()=>L(!1),children:"Cancel"})]})]})]})}),e.jsx(Ts,{open:Y,onOpenChange:Z,children:e.jsxs(Is,{children:[e.jsx(Dr,{children:e.jsx(Ks,{children:"Add Pin"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(Sr,{placeholder:"Enter your note...",value:de,onChange:fe=>Le(fe.target.value),className:"resize-none min-h-[100px]"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(le,{onClick:Lt,disabled:!de.trim(),children:"Add Pin"}),e.jsx(le,{variant:"outline",onClick:()=>{Z(!1),Le(""),me(null)},children:"Cancel"})]})]})]})})]})};function VS({stage:s,isSelected:t=!1,onClick:r,onCompleted:a,onEdit:n,onDelete:i,onStarted:o,className:l}){const f=(x=>{const u={not_started:{color:"bg-slate-500",textColor:"text-slate-700",icon:es,text:"Pending"},in_progress:{color:"bg-blue-500",textColor:"text-blue-700",icon:Di,text:"In Progress"},completed:{color:"bg-green-500",textColor:"text-green-700",icon:Tr,text:"Completed"},skipped:{color:"bg-gray-500",textColor:"text-gray-700",icon:_i,text:"Skipped"}};return u[x]||u.not_started})(s.status).icon,p=s.dueDate&&new Date(s.dueDate)<new Date&&s.status!=="completed";return s.status==="in_progress"||s.status,e.jsx(Ke,{className:Ce("glass-card hover:shadow-lg transition-all duration-300 cursor-pointer group border-0",t&&"ring-2 ring-primary shadow-xl",l),onClick:r,children:e.jsxs(Xe,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("div",{className:Ce("w-8 h-8 rounded-full glass-card flex items-center justify-center text-white shadow-sm flex-shrink-0",s.status==="completed"&&"bg-gradient-to-br from-green-500 to-emerald-600",s.status==="in_progress"&&"bg-gradient-to-br from-blue-500 to-indigo-600",s.status==="not_started"&&"bg-gradient-to-br from-slate-500 to-gray-600"),children:e.jsx(f,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-semibold text-lg truncate text-foreground",children:s.name}),s.isRequired&&e.jsx(Qe,{variant:"secondary",className:"text-xs glass-card",children:"Required"}),p&&e.jsx(Qe,{variant:"destructive",className:"text-xs",children:"Overdue"})]}),s.description&&e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-2",children:s.description}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(dr,{className:"h-3 w-3"}),e.jsxs("span",{children:[s.assignedTo.length," assigned"]})]}),s.estimatedHours>0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(es,{className:"h-3 w-3"}),e.jsxs("span",{children:[s.estimatedHours,"h estimated"]})]}),s.dueDate&&e.jsxs("div",{className:Ce("flex items-center gap-1",p&&"text-destructive"),children:[e.jsx(es,{className:"h-3 w-3"}),e.jsxs("span",{children:["Due ",Wt(s.dueDate)]})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-2",onClick:x=>x.stopPropagation(),children:[e.jsxs(Qe,{variant:"secondary",className:Ce("text-xs border-0 shadow-sm glass-card",s.status==="completed"&&"bg-green-500/20 text-green-700",s.status==="in_progress"&&"bg-blue-500/20 text-blue-700",s.status==="not_started"&&"bg-slate-500/20 text-slate-700"),children:[s.status==="completed"&&"Completed",s.status==="in_progress"&&"In Progress",s.status==="not_started"&&"Pending"]}),s.status==="in_progress"&&e.jsxs(le,{size:"sm",variant:"outline",onClick:x=>{x.stopPropagation(),a()},className:"glass-card hover:shadow-lg transition-all duration-300 bg-gradient-to-r from-blue-500 to-indigo-600 text-white border-0",children:[e.jsx(Tr,{className:"h-4 w-4 mr-1"}),"Complete"]}),s.status==="not_started"&&o&&e.jsxs(le,{size:"sm",variant:"outline",onClick:x=>{x.stopPropagation(),o()},className:"glass-card hover:shadow-lg transition-all duration-300",children:[e.jsx(Di,{className:"h-4 w-4 mr-1"}),"Start"]}),e.jsxs(Yo,{children:[e.jsx(Go,{asChild:!0,children:e.jsx(le,{variant:"ghost",size:"sm",className:"glass-card hover:shadow-lg transition-all duration-300 opacity-0 group-hover:opacity-100",children:e.jsx(Gl,{className:"h-4 w-4"})})}),e.jsxs(Fi,{align:"end",className:"glass-card border-0",children:[n&&e.jsx(as,{onClick:n,children:"Edit Stage"}),e.jsx(as,{children:"View Details"}),e.jsx(as,{children:"Assign Users"}),s.status==="not_started"&&o&&e.jsx(as,{onClick:o,children:"Start Stage"}),i&&e.jsx(as,{className:"text-destructive",onClick:i,children:"Delete Stage"})]})]})]})]}),s.status==="in_progress"&&e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground mb-1",children:[e.jsx("span",{children:"Progress"}),e.jsx("span",{children:"75%"})," "]}),e.jsx("div",{className:"w-full bg-muted/20 rounded-full h-1.5",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 h-1.5 rounded-full transition-all duration-300",style:{width:"75%"}})})]}),s.actualHours>0&&e.jsxs("div",{className:"mt-3 flex justify-between text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:"Time Spent:"}),e.jsxs("span",{className:Ce("font-medium",s.actualHours>s.estimatedHours?"text-destructive":"text-foreground"),children:[s.actualHours,"h",s.estimatedHours>0&&` / ${s.estimatedHours}h`]})]})]})})}function YS({stages:s,selectedStage:t,onStageSelect:r,onStageCompleted:a,onStageStarted:n,className:i}){const o=(d,h)=>{const f={"initial review":{pending:{primary:"from-purple-500 to-indigo-600",bg:"bg-purple-50 border-purple-200",text:"text-purple-700"},in_progress:{primary:"from-purple-600 to-indigo-700",bg:"bg-purple-100 border-purple-300",text:"text-purple-800"},completed:{primary:"from-purple-400 to-indigo-500",bg:"bg-purple-50 border-purple-200",text:"text-purple-600"}},"design development":{pending:{primary:"from-orange-500 to-red-600",bg:"bg-orange-50 border-orange-200",text:"text-orange-700"},in_progress:{primary:"from-orange-600 to-red-700",bg:"bg-orange-100 border-orange-300",text:"text-orange-800"},completed:{primary:"from-orange-400 to-red-500",bg:"bg-orange-50 border-orange-200",text:"text-orange-600"}},"client review":{pending:{primary:"from-emerald-500 to-teal-600",bg:"bg-emerald-50 border-emerald-200",text:"text-emerald-700"},in_progress:{primary:"from-emerald-600 to-teal-700",bg:"bg-emerald-100 border-emerald-300",text:"text-emerald-800"},completed:{primary:"from-emerald-400 to-teal-500",bg:"bg-emerald-50 border-emerald-200",text:"text-emerald-600"}},"final delivery":{pending:{primary:"from-blue-500 to-cyan-600",bg:"bg-blue-50 border-blue-200",text:"text-blue-700"},in_progress:{primary:"from-blue-600 to-cyan-700",bg:"bg-blue-100 border-blue-300",text:"text-blue-800"},completed:{primary:"from-blue-400 to-cyan-500",bg:"bg-blue-50 border-blue-200",text:"text-blue-600"}}},p=h.toLowerCase(),x=Object.keys(f).find(j=>p.includes(j))||"design development",u=f[x],k={pending:Q(E({},u.pending),{icon:es,text:"Pending",opacity:"opacity-70"}),in_progress:Q(E({},u.in_progress),{icon:Di,text:"In Progress",opacity:"opacity-100"}),completed:Q(E({},u.completed),{icon:Tr,text:"Completed",opacity:"opacity-90"}),skipped:{primary:"from-gray-400 to-gray-500",bg:"bg-gray-50 border-gray-200",text:"text-gray-600",icon:_i,label:"Skipped",opacity:"opacity-60"}};return k[d]||k.pending},l=[{id:"1",name:"Alex Chen",avatar:"AC"},{id:"2",name:"Sarah Wilson",avatar:"SW"},{id:"3",name:"Mike Johnson",avatar:"MJ"}];return s.length===0?e.jsxs("div",{className:"glass-card p-12 rounded-lg text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gradient-to-br from-purple-100 to-pink-100 flex items-center justify-center",children:e.jsx(es,{className:"w-8 h-8 text-purple-600"})}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No Workflow Stages"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Create your first workflow stage to start the approval process"})]}):e.jsx("div",{className:Ce("space-y-6",i),children:e.jsx("div",{className:"glass-card p-6 rounded-lg overflow-x-auto border-0",children:e.jsx("div",{className:"flex items-center space-x-4 min-w-max",children:s.map((d,h)=>{const f=o(d.status,d.name),p=(t==null?void 0:t.id)===d.id,x=h===s.length-1,u=f.icon;return e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:Ce("relative cursor-pointer transition-all duration-300 hover:scale-105",p&&"scale-105 ring-2 ring-primary"),onClick:()=>r(d),children:e.jsxs("div",{className:Ce("glass-card p-4 rounded-xl min-w-[280px] border-0",p&&"shadow-xl"),children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:Ce("w-8 h-8 rounded-full glass-card flex items-center justify-center text-white shadow-sm border-0",d.status==="completed"&&"bg-gradient-to-br from-green-500 to-emerald-600",d.status==="in_progress"&&"bg-gradient-to-br from-blue-500 to-indigo-600",d.status==="not_started"&&"bg-gradient-to-br from-slate-500 to-gray-600"),children:e.jsx(u,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-sm text-foreground",children:d.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Stage ",h+1]})]})]}),e.jsxs(Qe,{variant:"secondary",className:Ce("text-xs border-0 shadow-sm glass-card",d.status==="completed"&&"bg-green-500/20 text-green-700",d.status==="in_progress"&&"bg-blue-500/20 text-blue-700",d.status==="not_started"&&"bg-slate-500/20 text-slate-700"),children:[d.status==="completed"&&"Completed",d.status==="in_progress"&&"In Progress",d.status==="not_started"&&"Pending"]})]}),e.jsxs("div",{className:"space-y-2",children:[d.description&&e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:d.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsx(es,{className:"h-3 w-3"}),d.estimatedHours,"h est."]}),d.actualHours>0&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:[d.actualHours,"h actual"]})]}),d.assignedTo&&d.assignedTo.length>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex -space-x-1",children:[d.assignedTo.slice(0,3).map((k,j)=>{const v=l.find(w=>w.id===k);return e.jsx("div",{className:"w-6 h-6 rounded-full glass-card flex items-center justify-center text-white text-xs font-medium border-2 border-background shadow-sm",title:v==null?void 0:v.name,children:(v==null?void 0:v.avatar)||k.charAt(0).toUpperCase()},k)}),d.assignedTo.length>3&&e.jsxs("div",{className:"w-6 h-6 rounded-full glass-card flex items-center justify-center text-white text-xs font-medium border-2 border-background",children:["+",d.assignedTo.length-3]})]}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[d.assignedTo.length," assigned"]})]}),d.dueDate&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsx(xs,{className:"h-3 w-3"}),"Due ",Wt(d.dueDate)]})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-border/20",children:[d.status==="in_progress"&&e.jsxs(le,{size:"sm",onClick:k=>{k.stopPropagation(),a(d.id)},className:"w-full text-xs glass-card hover:shadow-lg transition-all duration-300 bg-gradient-to-r from-blue-500 to-indigo-600 text-white border-0",children:[e.jsx(Tr,{className:"h-3 w-3 mr-1"}),"Mark Complete"]}),d.status==="not_started"&&e.jsxs(le,{size:"sm",variant:"outline",onClick:k=>{k.stopPropagation(),n(d.id)},className:"w-full text-xs glass-card hover:shadow-lg transition-all duration-300 border-0",children:[e.jsx(Di,{className:"h-3 w-3 mr-1"}),"Start Stage"]}),d.status==="completed"&&e.jsxs("div",{className:"flex items-center justify-center text-xs text-muted-foreground",children:[e.jsx(Tr,{className:"h-3 w-3 mr-1"}),"Completed ",d.completedAt&&Wt(d.completedAt)]})]})]})}),!x&&e.jsxs("div",{className:"flex items-center mx-2",children:[e.jsx("div",{className:Ce("w-8 h-0.5 transition-all duration-300",d.status==="completed"?"bg-gradient-to-r from-green-400 to-blue-500":"bg-gradient-to-r from-border/30 to-border/30")}),e.jsx(Wa,{className:Ce("h-5 w-5 transition-colors duration-300",d.status==="completed"?"text-green-500":"text-muted-foreground/50")})]})]},d.id)})})})})}function GS({stageId:s,items:t,onUpdated:r,className:a}){const[n,i]=N.useState(!1),[o,l]=N.useState(null),[d,h]=N.useState(""),[f,p]=N.useState(""),[x,u]=N.useState("medium"),[k,j]=N.useState(""),[v,w]=N.useState(!1),P=A=>{const L={low:{color:"bg-gray-500",text:"Low"},medium:{color:"bg-blue-500",text:"Medium"},high:{color:"bg-orange-500",text:"High"},urgent:{color:"bg-red-500",text:"Urgent"}};return L[A]||L.medium},D=()=>xe(this,null,function*(){if(d.trim())try{w(!0);try{yield Nt.createChecklistItem(s,{text:d.trim(),description:f.trim(),priority:x,estimatedHours:parseFloat(k)||0,order:t.length,isCompleted:!1,attachments:[]})}catch(A){}h(""),p(""),u("medium"),j(""),i(!1),r()}catch(A){}finally{w(!1)}}),B=A=>xe(this,null,function*(){try{try{yield Nt.updateChecklistItem(A.id,{isCompleted:!A.isCompleted})}catch(L){}r()}catch(L){}}),F=A=>xe(this,null,function*(){try{yield Nt.deleteChecklistItem(A),r()}catch(L){}}),se=[...t].sort((A,L)=>A.order-L.order),z=t.filter(A=>A.isCompleted).length,C=t.length>0?Math.round(z/t.length*100):0;return e.jsxs("div",{className:Ce("space-y-4",a),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Progress"}),e.jsxs(Qe,{variant:"secondary",className:"cyrus-ui",children:[z," / ",t.length]})]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[C,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-primary h-2 rounded-full transition-all duration-300",style:{width:`${C}%`}})}),e.jsx("div",{className:"space-y-2",children:se.length===0?e.jsxs("div",{className:"glass-card p-6 rounded-lg text-center",children:[e.jsx(es,{className:"h-8 w-8 text-muted-foreground mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No tasks yet"})]}):se.map(A=>{const L=P(A.priority);return e.jsx("div",{className:Ce("glass-card p-3 rounded-lg group hover:glow transition-all",A.isCompleted&&"opacity-60"),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ii,{checked:A.isCompleted,onCheckedChange:()=>B(A),className:"mt-1"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:Ce("font-medium text-sm",A.isCompleted&&"line-through text-muted-foreground"),children:A.text}),e.jsx(Qe,{variant:"secondary",className:Ce("text-white text-xs cyrus-ui",L.color),children:L.text})]}),A.description&&e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:A.description}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[A.estimatedHours>0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(es,{className:"h-3 w-3"}),e.jsxs("span",{children:[A.estimatedHours,"h estimated"]})]}),A.actualHours>0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(la,{className:"h-3 w-3"}),e.jsxs("span",{children:[A.actualHours,"h spent"]})]}),A.completedAt&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(la,{className:"h-3 w-3"}),e.jsxs("span",{children:["Completed ",Wt(A.completedAt)]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(le,{variant:"ghost",size:"sm",onClick:()=>l(A),className:"h-6 w-6 p-0 hover-shimmer cyrus-ui",children:e.jsx(nx,{className:"h-3 w-3"})}),e.jsx(le,{variant:"ghost",size:"sm",onClick:()=>F(A.id),className:"h-6 w-6 p-0 hover-shimmer cyrus-ui text-destructive hover:text-destructive",children:e.jsx(jr,{className:"h-3 w-3"})})]})]})},A.id)})}),e.jsxs(Ts,{open:n,onOpenChange:i,children:[e.jsx(ru,{asChild:!0,children:e.jsxs(le,{variant:"outline",className:"w-full hover-shimmer cyrus-ui",children:[e.jsx(gs,{className:"h-4 w-4 mr-2"}),"Add Task"]})}),e.jsxs(Is,{className:"glass-card border-0",children:[e.jsx(Dr,{children:e.jsx(Ks,{children:"Add New Task"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Task Name"}),e.jsx(Pt,{value:d,onChange:A=>h(A.target.value),placeholder:"Enter task name...",className:"input-glass cyrus-ui"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Description (Optional)"}),e.jsx(Sr,{value:f,onChange:A=>p(A.target.value),placeholder:"Add more details...",className:"input-glass cyrus-ui",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Priority"}),e.jsxs(bs,{value:x,onValueChange:A=>u(A),children:[e.jsx(fs,{className:"input-glass cyrus-ui",children:e.jsx(ws,{})}),e.jsxs(ps,{children:[e.jsx(tt,{value:"low",children:"Low"}),e.jsx(tt,{value:"medium",children:"Medium"}),e.jsx(tt,{value:"high",children:"High"}),e.jsx(tt,{value:"urgent",children:"Urgent"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Estimated Hours"}),e.jsx(Pt,{type:"number",min:"0",step:"0.5",value:k,onChange:A=>j(A.target.value),placeholder:"0",className:"input-glass cyrus-ui"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(le,{variant:"outline",onClick:()=>i(!1),className:"hover-shimmer cyrus-ui",children:"Cancel"}),e.jsx(le,{onClick:D,disabled:!d.trim()||v,className:"hover-shimmer cyrus-ui",children:v?"Adding...":"Add Task"})]})]})]})]})]})}const $p=[{id:"1",name:"John Smith",email:"john@example.com"},{id:"2",name:"Sarah Johnson",email:"sarah@example.com"},{id:"3",name:"Mike Chen",email:"mike@example.com"},{id:"4",name:"Emily Davis",email:"emily@example.com"}];function JS({stageId:s,workspaceId:t,approvals:r,onUpdated:a,className:n}){const[i,o]=N.useState(!1),[l,d]=N.useState(""),[h,f]=N.useState("sequential"),[p,x]=N.useState(""),[u,k]=N.useState(""),[j,v]=N.useState(!1),w=z=>{const C={pending:{color:"bg-yellow-500",text:"Pending",icon:es},approved:{color:"bg-green-500",text:"Approved",icon:la},rejected:{color:"bg-red-500",text:"Rejected",icon:Hs},delegated:{color:"bg-blue-500",text:"Delegated",icon:da}};return C[z]||C.pending},P=()=>xe(this,null,function*(){if(l)try{v(!0);try{yield Nt.createWorkflowApproval({stageId:s,workspaceId:t,approverId:parseInt(l),approvalType:h,comments:p,deadline:u||void 0,approvalOrder:r.length,attachments:[]})}catch(z){}d(""),f("sequential"),x(""),k(""),o(!1),a()}catch(z){}finally{v(!1)}}),D=(z,C,A)=>xe(this,null,function*(){try{yield Nt.updateWorkflowApproval(z,{status:C,comments:A||""}),a()}catch(L){}}),B=[...r].sort((z,C)=>new Date(C.requestedAt).getTime()-new Date(z.requestedAt).getTime()),F=r.filter(z=>z.status==="pending"),se=r.filter(z=>z.status!=="pending");return e.jsxs("div",{className:Ce("space-y-4",n),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Approvals"}),e.jsxs(Qe,{variant:"secondary",className:"cyrus-ui",children:[se.length," / ",r.length," completed"]})]}),F.length>0&&e.jsxs(Qe,{variant:"secondary",className:"bg-yellow-500 text-white cyrus-ui",children:[F.length," pending"]})]}),e.jsx("div",{className:"space-y-3",children:B.length===0?e.jsxs("div",{className:"glass-card p-6 rounded-lg text-center",children:[e.jsx(Ho,{className:"h-8 w-8 text-muted-foreground mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No approvals requested yet"})]}):B.map(z=>{const C=w(z.status),A=C.icon,L=$p.find(S=>S.id===z.approverId.toString()),y=z.deadline&&new Date(z.deadline)<new Date&&z.status==="pending";return e.jsxs("div",{className:"glass-card p-4 rounded-lg hover:glow transition-all",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:Ce("w-8 h-8 rounded-full flex items-center justify-center",C.color),children:e.jsx(A,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-medium text-sm",children:L?L.name:`User ${z.approverId}`}),e.jsx(Qe,{variant:"secondary",className:Ce("text-white text-xs cyrus-ui",C.color),children:C.text}),y&&e.jsx(Qe,{variant:"destructive",className:"text-xs",children:"Overdue"})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Requested ",Wt(z.requestedAt),z.deadline&&` • Due ${Wt(z.deadline)}`]})]})]}),z.status==="pending"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(le,{size:"sm",variant:"outline",onClick:()=>D(z.id,"approved"),className:"hover-shimmer cyrus-ui text-green-600 hover:text-green-600",children:[e.jsx(la,{className:"h-3 w-3 mr-1"}),"Approve"]}),e.jsxs(le,{size:"sm",variant:"outline",onClick:()=>D(z.id,"rejected"),className:"hover-shimmer cyrus-ui text-red-600 hover:text-red-600",children:[e.jsx(Hs,{className:"h-3 w-3 mr-1"}),"Reject"]})]})]}),z.comments&&e.jsxs("div",{className:"glass-card p-3 rounded bg-muted/30",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Comments:"}),e.jsx("p",{className:"text-sm",children:z.comments})]}),e.jsxs("div",{className:"mt-3 flex items-center gap-4 text-xs text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(hn,{className:"h-3 w-3"}),e.jsxs("span",{children:["Type: ",z.approvalType]})]}),z.approvedAt&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(la,{className:"h-3 w-3"}),e.jsxs("span",{children:["Decided ",Wt(z.approvedAt)]})]})]})]},z.id)})}),e.jsxs(Ts,{open:i,onOpenChange:o,children:[e.jsx(ru,{asChild:!0,children:e.jsxs(le,{variant:"outline",className:"w-full hover-shimmer cyrus-ui",children:[e.jsx(gs,{className:"h-4 w-4 mr-2"}),"Request Approval"]})}),e.jsxs(Is,{className:"glass-card border-0",children:[e.jsx(Dr,{children:e.jsx(Ks,{children:"Request Approval"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Approver"}),e.jsxs(bs,{value:l,onValueChange:d,children:[e.jsx(fs,{className:"input-glass cyrus-ui",children:e.jsx(ws,{placeholder:"Select an approver..."})}),e.jsx(ps,{children:$p.map(z=>e.jsxs(tt,{value:z.id,children:[z.name," (",z.email,")"]},z.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Approval Type"}),e.jsxs(bs,{value:h,onValueChange:z=>f(z),children:[e.jsx(fs,{className:"input-glass cyrus-ui",children:e.jsx(ws,{})}),e.jsxs(ps,{children:[e.jsx(tt,{value:"sequential",children:"Sequential (one at a time)"}),e.jsx(tt,{value:"parallel",children:"Parallel (all at once)"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Deadline (Optional)"}),e.jsx(Pt,{type:"datetime-local",value:u,onChange:z=>k(z.target.value),className:"input-glass cyrus-ui"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Comments (Optional)"}),e.jsx(Sr,{value:p,onChange:z=>x(z.target.value),placeholder:"Add any additional context or instructions...",className:"input-glass cyrus-ui",rows:3})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(le,{variant:"outline",onClick:()=>o(!1),className:"hover-shimmer cyrus-ui",children:"Cancel"}),e.jsx(le,{onClick:P,disabled:!l||j,className:"hover-shimmer cyrus-ui",children:j?"Requesting...":"Request Approval"})]})]})]})]})]})}const KS=[{name:"Initial Review",description:"Review project requirements and initial concepts",estimatedHours:4,category:"review"},{name:"Design Development",description:"Create initial design concepts and iterations",estimatedHours:8,category:"design"},{name:"Client Review",description:"Present designs to client for feedback and approval",estimatedHours:2,category:"review"},{name:"Final Delivery",description:"Finalize assets and deliver to client",estimatedHours:3,category:"delivery"}];function XS({workspaceId:s,nextOrder:t,existingStages:r,onStageCreated:a,onClose:n,project:i}){const[o,l]=N.useState({name:"",description:"",isRequired:!0,estimatedHours:"",dueDate:"",priority:"medium"}),[d,h]=N.useState([]),[f,p]=N.useState([]),[x,u]=N.useState([]),[k,j]=N.useState(!1),[v,w]=N.useState(null),[P,D]=N.useState("manual"),B=(i==null?void 0:i.artists)||[],F=i!=null&&i.projectManager?[{id:i.projectManager,name:i.projectManager}]:[],se=[...B,...F],z=M=>({id:M.id,name:M.name,email:`${M.name.toLowerCase().replace(" ",".")}@example.com`,avatar:M.name.split(" ").map(J=>J[0]).join("").toUpperCase()});N.useEffect(()=>{xe(this,null,function*(){try{const J=yield Nt.getWorkflowTemplates();u(J)}catch(J){}})},[]);const C=(M,J)=>{l(ae=>Q(E({},ae),{[M]:J}))},A=M=>{h(J=>J.includes(M)?J.filter(ae=>ae!==M):[...J,M])},L=M=>{const J=M.stages[0];J&&(l(ae=>Q(E({},ae),{name:J.name,description:J.description,estimatedHours:J.estimatedHours.toString(),isRequired:J.isRequired})),w(M.id))},y=M=>{l(J=>Q(E({},J),{name:M.name,description:M.description,estimatedHours:M.estimatedHours.toString()})),w(M.name)},S=()=>o.name.trim()&&o.description.trim(),I=M=>xe(this,null,function*(){if(M.preventDefault(),!!S()){j(!0);try{const J={id:`stage-${Date.now()}`,workspaceId:s,name:o.name.trim(),description:o.description.trim(),status:"not_started",order:t,isRequired:o.isRequired,assignedTo:d,dependencies:f,estimatedHours:parseFloat(o.estimatedHours)||0,actualHours:0,dueDate:o.dueDate||new Date(Date.now()+6048e5).toISOString(),priority:o.priority,templateId:v,checklistItems:[],completedAt:null,completedBy:null,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};yield Nt.createWorkflowStage(s,J),a(J),l({name:"",description:"",isRequired:!0,estimatedHours:"",dueDate:"",priority:"medium"}),h([]),p([]),w(null)}catch(J){}finally{j(!1)}}});return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold bg-gradient-primary bg-clip-text text-transparent",children:"Create New Workflow Stage"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Add a new stage to your workflow pipeline with dependencies and templates."})]}),e.jsxs(le,{variant:"outline",onClick:n,size:"sm",className:"glass-card",children:[e.jsx(Hs,{className:"h-4 w-4 mr-2"}),"Cancel"]})]}),e.jsxs("form",{onSubmit:I,className:"space-y-6",children:[e.jsx("div",{className:"glass-card p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qo,{className:"h-5 w-5 text-primary"}),e.jsx("span",{className:"font-medium",children:"Creation Mode:"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(le,{type:"button",variant:P==="manual"?"default":"outline",size:"sm",onClick:()=>D("manual"),className:"glass-card hover:shadow-lg transition-all duration-300",children:"Manual Setup"}),e.jsxs(le,{type:"button",variant:P==="template"?"default":"outline",size:"sm",onClick:()=>D("template"),className:"glass-card hover:shadow-lg transition-all duration-300",children:[e.jsx(Cd,{className:"h-4 w-4 mr-2"}),"From Template"]})]})]})}),P==="template"&&e.jsxs("div",{className:"glass-card border-dashed border-primary/30 p-6 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Cd,{className:"h-5 w-5 text-primary"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Workflow Templates"})]}),e.jsxs(Jo,{defaultValue:"quick",className:"space-y-4",children:[e.jsxs(Bi,{className:"grid w-full grid-cols-2 glass-card",children:[e.jsx(yr,{value:"quick",children:"Quick Templates"}),e.jsx(yr,{value:"library",children:"Template Library"})]}),e.jsx(br,{value:"quick",className:"space-y-4",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:KS.map(M=>e.jsxs(le,{type:"button",variant:v===M.name?"default":"outline",className:Ce("h-auto p-4 flex flex-col items-start text-left glass-card hover:shadow-lg transition-all duration-300",v===M.name&&"bg-gradient-to-r from-blue-500 to-indigo-600 text-white"),onClick:()=>y(M),children:[e.jsx("div",{className:"font-semibold text-sm mb-1",children:M.name}),e.jsx("div",{className:"text-xs opacity-80 line-clamp-2 mb-2",children:M.description}),e.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[e.jsx(es,{className:"h-3 w-3"}),M.estimatedHours,"h"]})]},M.name))})}),e.jsx(br,{value:"library",className:"space-y-4",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:x.map(M=>e.jsxs("div",{className:Ce("glass-card cursor-pointer transition-all hover:shadow-lg p-4 rounded-lg",v===M.id&&"ring-2 ring-primary"),onClick:()=>L(M),children:[e.jsx("div",{className:"font-semibold text-base mb-2",children:M.name}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:M.description}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx(Qe,{variant:"secondary",className:"glass-card",children:M.category}),e.jsxs("span",{className:"text-muted-foreground",children:[M.stages.length," stages"]})]})]},M.id))})})]})]}),e.jsxs(Jo,{defaultValue:"basic",className:"space-y-6",children:[e.jsxs(Bi,{className:"grid w-full grid-cols-4 glass-card",children:[e.jsx(yr,{value:"basic",children:"Basic Info"}),e.jsx(yr,{value:"scheduling",children:"Scheduling"}),e.jsx(yr,{value:"assignment",children:"Assignment"}),e.jsx(yr,{value:"dependencies",children:"Dependencies"})]}),e.jsx(br,{value:"basic",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"glass-card p-6 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Tr,{className:"h-5 w-5 text-primary"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Stage Details"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(jt,{htmlFor:"stage-name",children:"Stage Name *"}),e.jsx(Pt,{id:"stage-name",type:"text",value:o.name,onChange:M=>C("name",M.target.value),placeholder:"e.g., Design Development",className:"glass-card hover:shadow-lg transition-all duration-300",required:!0})]}),e.jsxs("div",{children:[e.jsx(jt,{htmlFor:"stage-description",children:"Description *"}),e.jsx(Sr,{id:"stage-description",value:o.description,onChange:M=>C("description",M.target.value),placeholder:"Describe what happens in this stage...",rows:4,className:"glass-card hover:shadow-lg transition-all duration-300 resize-none",required:!0})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ii,{id:"required",checked:o.isRequired,onCheckedChange:M=>C("isRequired",M)}),e.jsx("label",{htmlFor:"required",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"This stage is required"})]})]})]}),e.jsxs("div",{className:"glass-card p-6 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(dr,{className:"h-5 w-5 text-primary"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Planning & Assignment"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",children:[e.jsx(es,{className:"h-4 w-4 inline mr-1"}),"Estimated Hours"]}),e.jsx(Pt,{type:"number",value:o.estimatedHours,onChange:M=>C("estimatedHours",M.target.value),placeholder:"0",min:"0",step:"0.5",className:"glass-card hover:shadow-lg transition-all duration-300"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",children:[e.jsx(xs,{className:"h-4 w-4 inline mr-1"}),"Due Date"]}),e.jsx(Pt,{type:"date",value:o.dueDate,onChange:M=>C("dueDate",M.target.value),className:"glass-card hover:shadow-lg transition-all duration-300"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-3",children:[e.jsx(dr,{className:"h-4 w-4 inline mr-1"}),"Assign Team Members"]}),e.jsx("div",{className:"grid grid-cols-1 gap-2 max-h-40 overflow-y-auto",children:se.map(M=>{const J=z(M);return e.jsxs("div",{className:Ce("flex items-center gap-3 p-3 rounded-lg glass-card cursor-pointer transition-all hover:shadow-lg",d.includes(J.id)?"bg-primary/10 border-primary/30":"border-border hover:border-primary/30"),onClick:()=>A(J.id),children:[e.jsx(Ii,{checked:d.includes(J.id),onChange:()=>A(J.id)}),e.jsx("div",{className:"w-8 h-8 rounded-full glass-card flex items-center justify-center text-white text-xs font-medium bg-gradient-to-br from-blue-500 to-purple-600",children:J.avatar}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-sm",children:J.name}),e.jsx("div",{className:"text-xs text-muted-foreground",children:J.email})]})]},J.id)})})]}),d.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Selected Members"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:d.map(M=>{const J=se.find(he=>he.id===M);if(!J)return null;const ae=z(J);return e.jsx(Qe,{variant:"secondary",className:"glass-card",children:ae.name},M)})})]})]})]})]})}),e.jsx(br,{value:"scheduling",className:"space-y-6",children:e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(es,{className:"h-12 w-12 mx-auto mb-4 opacity-20"}),e.jsx("p",{children:"Scheduling features coming soon"})]})}),e.jsx(br,{value:"assignment",className:"space-y-6",children:e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(dr,{className:"h-12 w-12 mx-auto mb-4 opacity-20"}),e.jsx("p",{children:"Advanced assignment features coming soon"})]})}),e.jsx(br,{value:"dependencies",className:"space-y-6",children:e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(qa,{className:"h-12 w-12 mx-auto mb-4 opacity-20"}),e.jsx("p",{children:"Dependency management coming soon"})]})})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t border-border/20",children:[e.jsxs(le,{type:"button",variant:"outline",onClick:()=>{l({name:"",description:"",isRequired:!0,estimatedHours:"",dueDate:"",priority:"medium"}),h([]),w(null)},className:"glass-card hover:shadow-lg transition-all duration-300",children:[e.jsx(Hs,{className:"h-4 w-4 mr-2"}),"Reset Form"]}),e.jsx(le,{type:"submit",disabled:!S()||k,className:"glass-card hover:shadow-lg transition-all duration-300 bg-gradient-to-r from-blue-500 to-indigo-600 text-white border-0",children:k?e.jsxs(e.Fragment,{children:[e.jsx(es,{className:"h-4 w-4 mr-2 animate-spin"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Am,{className:"h-4 w-4 mr-2"}),"Create Stage"]})})]})]})]})}function QS({workspace:s,onBack:t,className:r,project:a}){const[n,i]=N.useState([]),[o,l]=N.useState(null),[d,h]=N.useState([]),[f,p]=N.useState([]),[x,u]=N.useState([]),[k,j]=N.useState(null),[v,w]=N.useState(!0),[P,D]=N.useState(!0),[B,F]=N.useState("pipeline"),[se,z]=N.useState("all"),[C,A]=N.useState("all"),[L,y]=N.useState("order"),[S,I]=N.useState(!1),[M,J]=N.useState(!1),[ae,he]=N.useState([]),[ce,ie]=N.useState(null);N.useEffect(()=>{ve()},[s.id]),N.useEffect(()=>{if(o){const oe=setTimeout(()=>{U(o.id)},100);return()=>clearTimeout(oe)}},[o]);const ve=()=>xe(this,null,function*(){try{w(!0);const[oe,ee,H]=yield Promise.allSettled([Nt.getWorkflowStages(s.id),Nt.getWorkflowTemplates(),Nt.getWorkflowMetrics(s.id)]);if(oe.status==="fulfilled")i(oe.value),D(!0),oe.value.length>0&&!o&&l(oe.value[0]);else{D(!1);const Ee=T(a);i(Ee),Ee.length>0&&!o&&l(Ee[0])}ee.status==="fulfilled"?u(ee.value):u([]),H.status==="fulfilled"?j(H.value):j(null)}catch(oe){const ee=T(a);i(ee),ee.length>0&&!o&&l(ee[0]),u([]),j(null)}finally{w(!1)}}),Ae=oe=>{switch(oe){case"delivered":case"render-approved":return"completed";case"preview":case"preview-feedback":case"preview-approved":case"rendering":case"waiting-preview-reply":case"waiting-render-reply":return"in_progress";default:return"not_started"}},T=oe=>{if(!oe)return[];const ee=Ae(oe.status);return[{id:"stage-1",workspaceId:s.id,name:"Project Brief Review",description:`Review project requirements for ${oe.name}`,order:0,isRequired:!0,assignedTo:oe.artists.map(Ee=>Ee.id),status:ee,dependencies:[],estimatedHours:4,actualHours:0,dueDate:oe.startDate,priority:oe.priority,checklistItems:[],completedAt:ee==="completed"?oe.updatedAt:null,completedBy:oe.projectManager,createdAt:oe.createdAt,updatedAt:oe.updatedAt},{id:"stage-2",workspaceId:s.id,name:"Design Development",description:`Create initial design concepts for ${oe.name}`,order:1,isRequired:!0,assignedTo:oe.artists.map(Ee=>Ee.id),status:ee,dependencies:["stage-1"],estimatedHours:16,actualHours:0,dueDate:new Date(new Date(oe.startDate).getTime()+7*24*60*60*1e3).toISOString(),priority:oe.priority,checklistItems:[],completedAt:ee==="completed"?oe.updatedAt:null,completedBy:oe.projectManager,createdAt:oe.createdAt,updatedAt:oe.updatedAt},{id:"stage-3",workspaceId:s.id,name:"Client Review",description:`Present designs to ${oe.client} for feedback`,order:2,isRequired:!0,assignedTo:[oe.projectManager],status:ee==="completed"?"completed":"not_started",dependencies:["stage-2"],estimatedHours:4,actualHours:0,dueDate:oe.endDate,priority:oe.priority,checklistItems:[],completedAt:ee==="completed"?oe.updatedAt:null,completedBy:oe.projectManager,createdAt:oe.createdAt,updatedAt:oe.updatedAt}]},U=oe=>xe(this,null,function*(){if(!P){const ee=V(oe,a);h(ee),p([]);return}try{const[ee,H]=yield Promise.allSettled([Nt.getStageChecklistItems(oe),Nt.getWorkflowApprovals({stageId:oe})]);if(ee.status==="fulfilled")h(ee.value);else{D(!1);const Ee=V(oe,a);h(Ee)}H.status==="fulfilled"?p(H.value):p([])}catch(ee){D(!1);const H=V(oe,a);h(H),p([])}}),V=(oe,ee)=>{if(!ee)return[];const H=Ae(ee.status);return[{id:"item-1",stageId:oe,text:`Review ${ee.name} requirements`,description:`Go through the detailed requirements for ${ee.name} and note any questions`,completed:H!=="not_started",completedBy:H!=="not_started"?ee.projectManager:void 0,completedAt:H!=="not_started"?ee.updatedAt:void 0,estimatedHours:2,actualHours:H!=="not_started"?1.5:void 0,priority:ee.priority,tags:[],dependencies:[],createdAt:ee.createdAt,updatedAt:ee.updatedAt},{id:"item-2",stageId:oe,text:`Schedule kickoff meeting with ${ee.client}`,description:`Coordinate with ${ee.client} and team for project kickoff`,completed:H==="completed",completedBy:H==="completed"?ee.projectManager:void 0,completedAt:H==="completed"?ee.updatedAt:void 0,estimatedHours:1,actualHours:H==="completed"?.5:void 0,priority:"medium",tags:[],dependencies:[],createdAt:ee.createdAt,updatedAt:ee.updatedAt},{id:"item-3",stageId:oe,text:"Create project timeline",description:`Draft initial timeline with key milestones for ${ee.name}`,completed:!1,completedBy:void 0,completedAt:void 0,estimatedHours:3,actualHours:void 0,priority:"medium",tags:[],dependencies:[],createdAt:ee.createdAt,updatedAt:ee.updatedAt}]},re=()=>{let oe=n;return se!=="all"&&(oe=oe.filter(ee=>ee.status===se)),C!=="all"&&(oe=oe.filter(ee=>ee.assignedTo.includes(C))),oe.sort((ee,H)=>{switch(L){case"dueDate":return new Date(ee.dueDate).getTime()-new Date(H.dueDate).getTime();case"priority":{const Ee={urgent:0,high:1,medium:2,low:3};return Ee[ee.priority]-Ee[H.priority]}case"status":{const Ee={not_started:0,in_progress:1,completed:2,skipped:3,blocked:4};return Ee[ee.status]-Ee[H.status]}case"order":default:return ee.order-H.order}})},G=()=>{if(n.length===0)return 0;const oe=n.filter(ee=>ee.status==="completed").length;return Math.round(oe/n.length*100)},Y=oe=>{const ee={not_started:{color:"bg-slate-500/20 border-slate-500/30",text:"Not Started",icon:es},in_progress:{color:"bg-blue-500/20 border-blue-500/30",text:"In Progress",icon:Zg},completed:{color:"bg-green-500/20 border-green-500/30",text:"Completed",icon:Tr},skipped:{color:"bg-gray-500/20 border-gray-500/30",text:"Skipped",icon:Ho}},H=ee[oe]||ee.not_started,Ee=H.icon;return e.jsxs(Qe,{variant:"outline",className:Ce("text-xs border backdrop-blur-sm",H.color),children:[e.jsx(Ee,{className:"h-3 w-3 mr-1"}),H.text]})},Z=oe=>{i(ee=>[...ee,oe].sort((H,Ee)=>H.order-Ee.order)),l(oe),I(!1)},de=oe=>xe(this,null,function*(){try{yield Nt.completeWorkflowStage(oe),yield ve()}catch(ee){i(H=>H.map(Ee=>Ee.id===oe?Q(E({},Ee),{status:"completed",completedAt:new Date().toISOString(),completedBy:"current-user"}):Ee)),(o==null?void 0:o.id)===oe&&l(H=>H?Q(E({},H),{status:"completed",completedAt:new Date().toISOString(),completedBy:"current-user"}):null)}}),Le=oe=>xe(this,null,function*(){try{yield Nt.updateWorkflowStage(oe,{status:"in_progress"}),yield ve()}catch(ee){i(H=>H.map(Ee=>Ee.id===oe?Q(E({},Ee),{status:"in_progress"}):Ee)),(o==null?void 0:o.id)===oe&&l(H=>H?Q(E({},H),{status:"in_progress"}):null)}}),X=()=>{o&&U(o.id)},me=()=>{o&&U(o.id)},we=re();return v?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-8 bg-muted rounded w-1/3"}),e.jsx("div",{className:"h-4 bg-muted rounded w-2/3"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[...Array(3)].map((oe,ee)=>e.jsx("div",{className:"h-32 bg-muted rounded"},ee))})]})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex flex-wrap justify-between items-center mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(le,{variant:"ghost",size:"sm",onClick:t,children:e.jsx(Ca,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h1",{className:"text-2xl font-bold",children:s.name}),a&&e.jsxs("div",{className:"flex gap-1",children:[e.jsx(Qe,{variant:"secondary",className:"text-xs",children:a.status}),e.jsx(Qe,{variant:"outline",className:"text-xs",children:a.priority})]})]}),e.jsx("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:a&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(da,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:a.client})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ca,{className:"h-3.5 w-3.5"}),e.jsxs("span",{children:[n.length," stages"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Tr,{className:"h-3.5 w-3.5"}),e.jsxs("span",{children:[G(),"% complete"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(xs,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:Wt(s.createdAt,"MMMM d, yyyy")})]})]})})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-2 md:mt-0",children:[e.jsxs(bs,{value:B,onValueChange:oe=>F(oe),children:[e.jsx(fs,{className:"w-32",children:e.jsx(ws,{})}),e.jsxs(ps,{children:[e.jsx(tt,{value:"pipeline",children:"Pipeline"}),e.jsx(tt,{value:"list",children:"List"}),e.jsx(tt,{value:"kanban",children:"Kanban"})]})]}),e.jsxs(bs,{value:se,onValueChange:z,children:[e.jsx(fs,{className:"w-32",children:e.jsx(ws,{})}),e.jsxs(ps,{children:[e.jsx(tt,{value:"all",children:"All Stages"}),e.jsx(tt,{value:"not_started",children:"Not Started"}),e.jsx(tt,{value:"in_progress",children:"In Progress"}),e.jsx(tt,{value:"completed",children:"Completed"})]})]}),e.jsxs(le,{onClick:()=>I(!S),variant:"outline",size:"sm",children:[e.jsx(gs,{className:"h-4 w-4 mr-2"}),S?"Cancel":"Add Stage"]})]})]}),e.jsx("div",{className:"mb-6",children:e.jsx(Ke,{children:e.jsxs(Xe,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Overall Progress"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[G(),"%"]})]}),e.jsx("div",{className:"w-full bg-muted/20 rounded-full h-2",children:e.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-300",style:{width:`${G()}%`}})}),e.jsxs("div",{className:"flex items-center justify-between mt-2 text-xs text-muted-foreground",children:[e.jsxs("span",{children:[n.filter(oe=>oe.status==="completed").length," of ",n.length," stages completed"]}),a&&e.jsxs("span",{children:["Due ",Wt(a.endDate)]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 mt-4",children:[e.jsx("div",{className:"glass-card p-3 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-gradient-to-br from-green-500 to-emerald-600 flex items-center justify-center",children:e.jsx(Tr,{className:"h-3 w-3 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Completed"}),e.jsx("p",{className:"text-sm font-bold text-green-600",children:n.filter(oe=>oe.status==="completed").length})]})]})}),e.jsx("div",{className:"glass-card p-3 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center",children:e.jsx(Di,{className:"h-3 w-3 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"In Progress"}),e.jsx("p",{className:"text-sm font-bold text-blue-600",children:n.filter(oe=>oe.status==="in_progress").length})]})]})}),e.jsx("div",{className:"glass-card p-3 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-gradient-to-br from-orange-500 to-red-600 flex items-center justify-center",children:e.jsx(es,{className:"h-3 w-3 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Pending"}),e.jsx("p",{className:"text-sm font-bold text-orange-600",children:n.filter(oe=>oe.status==="not_started").length})]})]})})]})]})})}),S&&e.jsx("div",{className:"mb-6",children:e.jsx(Ke,{children:e.jsx(Xe,{className:"p-6",children:e.jsx(XS,{workspaceId:s.id,onStageCreated:Z,nextOrder:n.length,existingStages:n,onClose:()=>I(!1),project:a})})})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[B==="pipeline"&&e.jsx(YS,{stages:we,selectedStage:o,onStageSelect:l,onStageCompleted:de,onStageStarted:Le}),B==="list"&&e.jsx("div",{className:"space-y-4",children:we.map(oe=>e.jsx(VS,{stage:oe,isSelected:(o==null?void 0:o.id)===oe.id,onClick:()=>l(oe),onCompleted:()=>de(oe.id),onStarted:()=>Le(oe.id)},oe.id))}),B==="kanban"&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:["not_started","in_progress","completed"].map(oe=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:Ce("w-3 h-3 rounded-full",oe==="not_started"&&"bg-slate-500",oe==="in_progress"&&"bg-blue-500",oe==="completed"&&"bg-green-500")}),e.jsx("h3",{className:"font-semibold capitalize",children:oe.replace("_"," ")}),e.jsx(Qe,{variant:"secondary",className:"text-xs",children:n.filter(ee=>ee.status===oe).length})]}),e.jsx("div",{className:"space-y-2",children:n.filter(ee=>ee.status===oe).map(ee=>e.jsx(Ke,{className:Ce("cursor-pointer transition-all hover:shadow-md",(o==null?void 0:o.id)===ee.id&&"ring-2 ring-primary"),onClick:()=>l(ee),children:e.jsxs(Xe,{className:"p-3",children:[e.jsx("h4",{className:"font-medium text-sm",children:ee.name}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[ee.assignedTo.length," assigned"]})]})},ee.id))})]},oe))})]}),o&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(Ke,{children:[e.jsx(_t,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Ot,{className:"text-lg",children:o.name}),Y(o.status)]})}),e.jsxs(Xe,{className:"space-y-3",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:o.description}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(dr,{className:"h-4 w-4"}),e.jsxs("span",{children:[o.assignedTo.length," assigned"]})]}),o.dueDate&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(es,{className:"h-4 w-4"}),e.jsxs("span",{children:["Due ",Wt(o.dueDate)]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Tr,{className:"h-4 w-4"}),e.jsxs("span",{children:[d.filter(oe=>oe.completed).length," / ",d.length," tasks completed"]})]})]})]}),e.jsxs(Ke,{className:"lg:col-span-2",children:[e.jsx(_t,{children:e.jsx(Ot,{className:"text-lg",children:"Checklist"})}),e.jsx(Xe,{children:e.jsx(GS,{stageId:o.id,items:d,onUpdated:X})})]})]}),e.jsxs(Ke,{children:[e.jsx(_t,{children:e.jsx(Ot,{className:"text-lg",children:"Approvals"})}),e.jsx(Xe,{children:e.jsx(JS,{stageId:o.id,workspaceId:s.id,approvals:f,onUpdated:me})})]})]})]})]})}function ZS({tasks:s,milestones:t,dependencies:r,viewMode:a,timeRange:n,onTaskUpdated:i}){const[o,l]=N.useState(1200),[d,h]=N.useState(null),f=N.useRef(null),x=(()=>{if(s.length===0){const A=new Date;return{start:new Date(A.getTime()-30*24*60*60*1e3),end:new Date(A.getTime()+60*24*60*60*1e3)}}const F=[...s.map(A=>new Date(A.startDate)),...s.map(A=>new Date(A.endDate)),...t.map(A=>new Date(A.dueDate))],se=new Date(Math.min(...F.map(A=>A.getTime()))),z=new Date(Math.max(...F.map(A=>A.getTime()))),C=n==="week"?7:n==="month"?30:90;return{start:new Date(se.getTime()-C*24*60*60*1e3),end:new Date(z.getTime()+C*24*60*60*1e3)}})(),u=Math.ceil((x.end.getTime()-x.start.getTime())/(24*60*60*1e3)),j=(()=>{const F=[],se=new Date(x.start),z=n==="week"?1:n==="month"?7:30;for(;se<=x.end;)F.push(new Date(se)),se.setDate(se.getDate()+z);return F})(),v=o/u,w=F=>{const se=new Date(F.startDate),z=new Date(F.endDate),C=Math.floor((se.getTime()-x.start.getTime())/(24*60*60*1e3)),A=Math.ceil((z.getTime()-se.getTime())/(24*60*60*1e3));return{left:Math.max(0,C*v),width:Math.max(v*.5,A*v)}},P=F=>{const se=new Date(F.dueDate);return Math.floor((se.getTime()-x.start.getTime())/(24*60*60*1e3))*v},D=F=>{switch(F){case"completed":return"bg-green-500";case"in_progress":return"bg-blue-500";case"on_hold":return"bg-yellow-500";case"cancelled":return"bg-red-500";default:return"bg-gray-400"}},B=F=>{switch(F){case"urgent":return"border-red-500";case"high":return"border-orange-500";case"medium":return"border-blue-500";default:return"border-gray-400"}};return a==="table"?e.jsx(Ke,{className:"glass-card border-0",children:e.jsx(Xe,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200/20",children:[e.jsx("th",{className:"text-left p-4 font-medium",children:"Task"}),e.jsx("th",{className:"text-left p-4 font-medium",children:"Status"}),e.jsx("th",{className:"text-left p-4 font-medium",children:"Priority"}),e.jsx("th",{className:"text-left p-4 font-medium",children:"Progress"}),e.jsx("th",{className:"text-left p-4 font-medium",children:"Start Date"}),e.jsx("th",{className:"text-left p-4 font-medium",children:"End Date"}),e.jsx("th",{className:"text-left p-4 font-medium",children:"Hours"})]})}),e.jsx("tbody",{children:s.map(F=>e.jsxs("tr",{className:"border-b border-gray-200/10 hover:bg-gray-50/5 transition-colors",children:[e.jsx("td",{className:"p-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:F.name}),e.jsx("p",{className:"text-sm text-muted-foreground truncate max-w-xs",children:F.description})]})}),e.jsx("td",{className:"p-4",children:e.jsx(Qe,{variant:"secondary",className:Ce("text-white",D(F.status)),children:F.status.replace("_"," ")})}),e.jsx("td",{className:"p-4",children:e.jsx(Qe,{variant:"outline",className:B(F.priority),children:F.priority})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-20 h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-primary rounded-full transition-all",style:{width:`${F.progressPercentage}%`}})}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[F.progressPercentage,"%"]})]})}),e.jsx("td",{className:"p-4 text-sm",children:Wt(F.startDate)}),e.jsx("td",{className:"p-4 text-sm",children:Wt(F.endDate)}),e.jsxs("td",{className:"p-4 text-sm",children:[F.actualHours,"/",F.estimatedHours,"h"]})]},F.id))})]})})})}):a==="calendar"?e.jsx(Ke,{className:"glass-card border-0",children:e.jsx(Xe,{className:"p-6",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(xs,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Calendar View"}),e.jsx("p",{className:"text-muted-foreground",children:"Calendar view will be implemented in Phase 4"})]})})}):e.jsx(Ti,{children:e.jsx(Ke,{className:"glass-card border-0",children:e.jsx(Xe,{className:"p-0",children:e.jsxs("div",{ref:f,className:"overflow-x-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white/5 backdrop-blur-sm border-b border-gray-200/20 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Gantt Chart"}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(xs,{className:"h-4 w-4"}),Wt(x.start)," - ",Wt(x.end)]})]}),e.jsx("div",{className:"relative",style:{width:o},children:e.jsx("div",{className:"flex",children:j.map((F,se)=>e.jsx("div",{className:"flex-shrink-0 text-xs text-muted-foreground border-r border-gray-200/20 pr-2",style:{width:n==="week"?v:n==="month"?v*7:v*30},children:n==="week"?F.toLocaleDateString("en-US",{month:"short",day:"numeric"}):n==="month"?F.toLocaleDateString("en-US",{month:"short",day:"numeric"}):F.toLocaleDateString("en-US",{month:"short",year:"numeric"})},se))})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"space-y-2",children:s.map((F,se)=>{const z=w(F);return e.jsxs("div",{className:"relative h-12 flex items-center",children:[e.jsx("div",{className:"w-80 pr-4 flex-shrink-0",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:Ce("w-3 h-3 rounded-full",D(F.status))}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm truncate",children:F.name}),e.jsxs("p",{className:"text-xs text-muted-foreground truncate",children:[F.estimatedHours,"h • ",F.priority]})]})]})}),e.jsxs("div",{className:"relative flex-1",style:{minWidth:o},children:[e.jsx("div",{className:"absolute inset-0 flex",children:j.map((C,A)=>e.jsx("div",{className:"border-r border-gray-200/10",style:{width:n==="week"?v:n==="month"?v*7:v*30}},A))}),e.jsxs(ei,{children:[e.jsx(ti,{asChild:!0,children:e.jsxs("div",{className:Ce("absolute top-1/2 -translate-y-1/2 h-6 rounded-md cursor-pointer transition-all hover:scale-105","glass-card border-l-4 hover:shadow-lg",B(F.priority),d===F.id&&"ring-2 ring-blue-500"),style:{left:z.left,width:z.width},onClick:()=>h(F.id),children:[e.jsx("div",{className:"h-full bg-gradient-primary rounded-r-md opacity-60",style:{width:`${F.progressPercentage}%`}}),e.jsx("div",{className:"absolute inset-0 flex items-center px-2",children:e.jsx("span",{className:"text-xs font-medium text-white drop-shadow-sm truncate",children:z.width>100?F.name:""})})]})}),e.jsx(mn,{className:"glass-card border-0",children:e.jsxs("div",{className:"p-2",children:[e.jsx("p",{className:"font-medium",children:F.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:F.description}),e.jsxs("div",{className:"mt-2 space-y-1 text-xs",children:[e.jsxs("p",{children:["Status: ",e.jsx(Qe,{variant:"secondary",className:"text-xs",children:F.status})]}),e.jsxs("p",{children:["Progress: ",F.progressPercentage,"%"]}),e.jsxs("p",{children:["Duration: ",Wt(F.startDate)," - ",Wt(F.endDate)]}),e.jsxs("p",{children:["Hours: ",F.actualHours,"/",F.estimatedHours]})]})]})})]})]})]},F.id)})}),t.length>0&&e.jsxs("div",{className:"mt-8",children:[e.jsxs("h4",{className:"text-sm font-medium mb-4 flex items-center gap-2",children:[e.jsx(Aa,{className:"h-4 w-4"}),"Milestones"]}),e.jsxs("div",{className:"relative h-8",style:{minWidth:o},children:[e.jsx("div",{className:"absolute inset-0 flex",children:j.map((F,se)=>e.jsx("div",{className:"border-r border-gray-200/10",style:{width:n==="week"?v:n==="month"?v*7:v*30}},se))}),t.map(F=>e.jsxs(ei,{children:[e.jsx(ti,{asChild:!0,children:e.jsx("div",{className:"absolute top-1/2 -translate-y-1/2 -translate-x-1/2 cursor-pointer",style:{left:P(F)},children:e.jsx("div",{className:Ce("w-4 h-4 rotate-45 border-2 border-white shadow-md hover:scale-125 transition-transform",F.isCritical?"bg-red-500":"bg-blue-500"),style:{backgroundColor:F.color}})})}),e.jsx(mn,{className:"glass-card border-0",children:e.jsxs("div",{className:"p-2",children:[e.jsx("p",{className:"font-medium",children:F.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:F.description}),e.jsxs("div",{className:"mt-2 space-y-1 text-xs",children:[e.jsxs("p",{children:["Due: ",Wt(F.dueDate)]}),e.jsxs("p",{children:["Status: ",e.jsx(Qe,{variant:"secondary",className:"text-xs",children:F.status})]}),F.isCritical&&e.jsx("p",{className:"text-red-500 font-medium",children:"Critical Milestone"})]})]})})]},F.id))]})]}),e.jsx("div",{className:"relative",style:{minWidth:o},children:(()=>{const se=Math.floor((new Date().getTime()-x.start.getTime())/(24*60*60*1e3))*v;return se>=0&&se<=o?e.jsx("div",{className:"absolute top-0 bottom-0 w-0.5 bg-red-500 z-10",style:{left:se},children:e.jsx("div",{className:"absolute -top-2 -left-1 w-2 h-2 bg-red-500 rounded-full"})}):null})()})]})]})})})})}var sf="Progress",ek=100,[tk,$k]=fn(sf),[sk,rk]=tk(sf),U2=N.forwardRef((s,t)=>{const f=s,{__scopeProgress:r,value:a=null,max:n,getValueLabel:i=ak}=f,o=Me(f,["__scopeProgress","value","max","getValueLabel"]);(n||n===0)&&Wp(n);const l=Wp(n)?n:ek;a!==null&&Hp(a,l);const d=Hp(a,l)?a:null,h=qd(d)?i(d,l):void 0;return e.jsx(sk,{scope:r,value:d,max:l,children:e.jsx(Vt.div,Q(E({"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":qd(d)?d:void 0,"aria-valuetext":h,role:"progressbar","data-state":$2(d,l),"data-value":d!=null?d:void 0,"data-max":l},o),{ref:t}))})});U2.displayName=sf;var q2="ProgressIndicator",z2=N.forwardRef((s,t)=>{var o;const i=s,{__scopeProgress:r}=i,a=Me(i,["__scopeProgress"]),n=rk(q2,r);return e.jsx(Vt.div,Q(E({"data-state":$2(n.value,n.max),"data-value":(o=n.value)!=null?o:void 0,"data-max":n.max},a),{ref:t}))});z2.displayName=q2;function ak(s,t){return`${Math.round(s/t*100)}%`}function $2(s,t){return s==null?"indeterminate":s===t?"complete":"loading"}function qd(s){return typeof s=="number"}function Wp(s){return qd(s)&&!isNaN(s)&&s>0}function Hp(s,t){return qd(s)&&!isNaN(s)&&s<=t&&s>=0}var W2=U2,nk=z2;const tc=N.forwardRef((n,a)=>{var i=n,{className:s,value:t}=i,r=Me(i,["className","value"]);return e.jsx(W2,Q(E({ref:a,className:Ce("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s)},r),{children:e.jsx(nk,{className:"h-full w-full flex-1 bg-indicator transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}))});tc.displayName=W2.displayName;function ik({tasks:s,onTaskUpdated:t}){const[r,a]=N.useState("all"),[n,i]=N.useState("all"),o=s.filter(u=>{const k=r==="all"||u.status===r,j=n==="all"||u.priority===n;return k&&j}),l=u=>{switch(u){case"completed":return"bg-green-500";case"in_progress":return"bg-blue-500";case"on_hold":return"bg-yellow-500";case"cancelled":return"bg-red-500";default:return"bg-gray-400"}},d=u=>{switch(u){case"urgent":return"border-red-500 text-red-600";case"high":return"border-orange-500 text-orange-600";case"medium":return"border-blue-500 text-blue-600";default:return"border-gray-400 text-gray-600"}},h=u=>{switch(u){case"completed":return e.jsx(Tr,{className:"h-4 w-4"});case"in_progress":return e.jsx(Di,{className:"h-4 w-4"});case"on_hold":return e.jsx(Lh,{className:"h-4 w-4"});default:return e.jsx(es,{className:"h-4 w-4"})}},f=(u,k)=>xe(this,null,function*(){t()}),p=u=>{},x=u=>{};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Status:"}),e.jsxs("select",{value:r,onChange:u=>a(u.target.value),className:"glass-card border border-gray-200/20 rounded-md px-3 py-1 text-sm hover-shimmer cyrus-ui",children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"not_started",children:"Not Started"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"on_hold",children:"On Hold"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Priority:"}),e.jsxs("select",{value:n,onChange:u=>i(u.target.value),className:"glass-card border border-gray-200/20 rounded-md px-3 py-1 text-sm hover-shimmer cyrus-ui",children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"urgent",children:"Urgent"})]})]}),e.jsxs("div",{className:"ml-auto text-sm text-muted-foreground",children:[o.length," of ",s.length," tasks"]})]}),e.jsx("div",{className:"grid gap-4",children:o.map(u=>e.jsx(Ke,{className:"glass-card border-0 hover:shadow-lg transition-shadow",children:e.jsx(Xe,{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:Ce("w-3 h-3 rounded-full",l(u.status))}),e.jsx("h3",{className:"font-semibold truncate",children:u.name}),e.jsxs(Qe,{variant:"outline",className:Ce("text-xs",d(u.priority)),children:[e.jsx(Aa,{className:"h-3 w-3 mr-1"}),u.priority]})]}),u.description&&e.jsx("p",{className:"text-sm text-muted-foreground mb-4 line-clamp-2",children:u.description}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Progress"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[u.progressPercentage,"%"]})]}),e.jsx(tc,{value:u.progressPercentage,className:"h-2"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Start Date"}),e.jsx("p",{className:"font-medium",children:Wt(u.startDate)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"End Date"}),e.jsx("p",{className:"font-medium",children:Wt(u.endDate)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Hours"}),e.jsxs("p",{className:"font-medium",children:[u.actualHours,"/",u.estimatedHours,"h"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Status"}),e.jsxs("div",{className:"flex items-center gap-1",children:[h(u.status),e.jsx("span",{className:"font-medium capitalize",children:u.status.replace("_"," ")})]})]})]})]}),e.jsxs(Yo,{children:[e.jsx(Go,{asChild:!0,children:e.jsx(le,{variant:"ghost",size:"sm",className:"hover-shimmer cyrus-ui",children:e.jsx(Iy,{className:"h-4 w-4"})})}),e.jsxs(Fi,{className:"glass-card border-0",children:[e.jsxs(as,{onClick:()=>p(u.id),children:[e.jsx(nx,{className:"h-4 w-4 mr-2"}),"Edit Task"]}),u.status!=="in_progress"&&e.jsxs(as,{onClick:()=>f(u.id),children:[e.jsx(Di,{className:"h-4 w-4 mr-2"}),"Start Task"]}),u.status==="in_progress"&&e.jsxs(as,{onClick:()=>f(u.id),children:[e.jsx(Lh,{className:"h-4 w-4 mr-2"}),"Pause Task"]}),u.status!=="completed"&&e.jsxs(as,{onClick:()=>f(u.id),children:[e.jsx(Tr,{className:"h-4 w-4 mr-2"}),"Mark Complete"]}),e.jsxs(as,{onClick:()=>x(u.id),className:"text-red-600 focus:text-red-600",children:[e.jsx(jr,{className:"h-4 w-4 mr-2"}),"Delete Task"]})]})]})]})})},u.id))}),o.length===0&&e.jsx(Ke,{className:"glass-card border-0",children:e.jsxs(Xe,{className:"p-12 text-center",children:[e.jsx(es,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No tasks found"}),e.jsx("p",{className:"text-muted-foreground",children:s.length===0?"No tasks have been created yet":"No tasks match the current filters"})]})})]})}const ok=[{id:"1",name:"Alex Chen",email:"alex@example.com",role:"Project Manager",hourlyRate:75,maxHoursPerWeek:40},{id:"2",name:"Sarah Wilson",email:"sarah@example.com",role:"Senior Designer",hourlyRate:65,maxHoursPerWeek:40},{id:"3",name:"Mike Johnson",email:"mike@example.com",role:"Developer",hourlyRate:70,maxHoursPerWeek:40},{id:"4",name:"Emily Davis",email:"emily@example.com",role:"UX Designer",hourlyRate:60,maxHoursPerWeek:35}];function lk({tasks:s,assignments:t}){const[r,a]=N.useState("week"),i=ok.map(d=>{const h=s.filter(v=>v.createdBy===d.id||Math.random()>.5),f=h.reduce((v,w)=>v+w.estimatedHours,0),p=h.reduce((v,w)=>v+w.actualHours,0),x=h.filter(v=>v.status==="completed").length,u=h.filter(v=>v.status==="in_progress").length,k=d.maxHoursPerWeek>0?Math.min(100,f/d.maxHoursPerWeek*100):0,j=f>0?(f-p)/f*100:0;return Q(E({},d),{tasks:h,totalEstimatedHours:f,totalActualHours:p,completedTasks:x,inProgressTasks:u,utilizationPercentage:k,efficiency:Math.max(0,j),isOverallocated:k>100})}),o=l=>l>80?"text-green-600":l>60?"text-blue-600":l>40?"text-yellow-600":"text-red-600";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Resource Planning"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Team workload and capacity management"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Period:"}),e.jsxs("select",{value:r,onChange:l=>a(l.target.value),className:"glass-card border border-gray-200/20 rounded-md px-3 py-1 text-sm hover-shimmer cyrus-ui",children:[e.jsx("option",{value:"week",children:"This Week"}),e.jsx("option",{value:"month",children:"This Month"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(Ke,{className:"glass-card border-0",children:e.jsx(Xe,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(dr,{className:"h-4 w-4 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Team Members"}),e.jsx("p",{className:"text-lg font-semibold",children:i.length})]})]})})}),e.jsx(Ke,{className:"glass-card border-0",children:e.jsx(Xe,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(es,{className:"h-4 w-4 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Hours"}),e.jsxs("p",{className:"text-lg font-semibold",children:[i.reduce((l,d)=>l+d.totalEstimatedHours,0),"h"]})]})]})})}),e.jsx(Ke,{className:"glass-card border-0",children:e.jsx(Xe,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(yd,{className:"h-4 w-4 text-orange-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Avg Utilization"}),e.jsxs("p",{className:"text-lg font-semibold",children:[Math.round(i.reduce((l,d)=>l+d.utilizationPercentage,0)/i.length),"%"]})]})]})})}),e.jsx(Ke,{className:"glass-card border-0",children:e.jsx(Xe,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_i,{className:"h-4 w-4 text-red-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Overallocated"}),e.jsx("p",{className:"text-lg font-semibold",children:i.filter(l=>l.isOverallocated).length})]})]})})})]}),e.jsx("div",{className:"grid gap-4",children:i.map(l=>e.jsxs(Ke,{className:"glass-card border-0",children:[e.jsx(_t,{className:"pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-primary flex items-center justify-center text-white font-medium",children:l.name.split(" ").map(d=>d[0]).join("")}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:l.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:l.role})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[l.isOverallocated&&e.jsxs(Qe,{variant:"destructive",className:"text-xs",children:[e.jsx(_i,{className:"h-3 w-3 mr-1"}),"Overallocated"]}),e.jsxs(Qe,{variant:"outline",className:"text-xs",children:["$",l.hourlyRate,"/hr"]})]})]})}),e.jsxs(Xe,{className:"pt-0",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Utilization"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[l.totalEstimatedHours,"h / ",l.maxHoursPerWeek,"h"]})]}),e.jsx(tc,{value:Math.min(100,l.utilizationPercentage),className:"h-2"}),e.jsxs("div",{className:"flex items-center justify-between mt-1",children:[e.jsxs("span",{className:Ce("text-xs font-medium",l.utilizationPercentage>100?"text-red-600":"text-muted-foreground"),children:[Math.round(l.utilizationPercentage),"%"]}),l.utilizationPercentage>100&&e.jsxs("span",{className:"text-xs text-red-600",children:["+",Math.round(l.utilizationPercentage-100),"% over capacity"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Tasks"}),e.jsx("p",{className:"font-medium",children:l.tasks.length})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Completed"}),e.jsx("p",{className:"font-medium text-green-600",children:l.completedTasks})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"In Progress"}),e.jsx("p",{className:"font-medium text-blue-600",children:l.inProgressTasks})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Efficiency"}),e.jsxs("p",{className:Ce("font-medium",o(l.efficiency)),children:[Math.round(l.efficiency),"%"]})]})]}),l.tasks.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h5",{className:"text-sm font-medium mb-2",children:"Current Tasks"}),e.jsxs("div",{className:"space-y-2",children:[l.tasks.slice(0,3).map(d=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50/50 rounded",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[e.jsx("div",{className:Ce("w-2 h-2 rounded-full",d.status==="completed"?"bg-green-500":d.status==="in_progress"?"bg-blue-500":"bg-gray-400")}),e.jsx("span",{className:"text-sm truncate",children:d.name})]}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[d.estimatedHours,"h"]})]},d.id)),l.tasks.length>3&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",l.tasks.length-3," more tasks"]})]})]})]})]},l.id))}),e.jsxs(Ke,{className:"glass-card border-0",children:[e.jsx(_t,{children:e.jsxs(Ot,{className:"flex items-center gap-2",children:[e.jsx(yd,{className:"h-4 w-4"}),"Resource Recommendations"]})}),e.jsx(Xe,{children:e.jsxs("div",{className:"space-y-3",children:[i.filter(l=>l.isOverallocated).length>0&&e.jsxs("div",{className:"p-3 bg-red-50/50 border border-red-200/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(_i,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{className:"text-sm font-medium text-red-700",children:"Overallocation Alert"})]}),e.jsxs("p",{className:"text-sm text-red-600",children:[i.filter(l=>l.isOverallocated).map(l=>l.name).join(", "),i.filter(l=>l.isOverallocated).length===1?" is":" are"," overallocated. Consider redistributing tasks or adjusting timelines."]})]}),i.some(l=>l.utilizationPercentage<60)&&e.jsxs("div",{className:"p-3 bg-blue-50/50 border border-blue-200/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(yd,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-blue-700",children:"Capacity Available"})]}),e.jsxs("p",{className:"text-sm text-blue-600",children:[i.filter(l=>l.utilizationPercentage<60).map(l=>l.name).join(", "),i.filter(l=>l.utilizationPercentage<60).length===1?" has":" have"," available capacity for additional tasks."]})]}),i.every(l=>l.utilizationPercentage>=60&&l.utilizationPercentage<=100)&&e.jsxs("div",{className:"p-3 bg-green-50/50 border border-green-200/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(dr,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-green-700",children:"Optimal Allocation"})]}),e.jsx("p",{className:"text-sm text-green-600",children:"Team resources are optimally allocated with good utilization rates."})]})]})})]})]})}function ck({workspaceId:s,onTaskCreated:t,project:r}){const[a,n]=N.useState({name:"",description:"",startDate:"",endDate:"",priority:"medium",estimatedHours:""}),[i,o]=N.useState([]),[l,d]=N.useState(!1),h=(r==null?void 0:r.artists)||[],f=r!=null&&r.projectManager?[{id:r.projectManager,name:r.projectManager}]:[],p=[...h,...f],x=j=>({id:j.id,name:j.name,email:`${j.name.toLowerCase().replace(" ",".")}@example.com`,avatar:j.name.split(" ").map(v=>v[0]).join("").toUpperCase()}),u=j=>xe(this,null,function*(){if(j.preventDefault(),!(!a.name.trim()||!a.startDate||!a.endDate))try{d(!0);const v={name:a.name.trim(),description:a.description.trim(),startDate:a.startDate,endDate:a.endDate,priority:a.priority,estimatedHours:parseFloat(a.estimatedHours)||0,status:"not_started"};try{const w=yield Nt.createTimelineTask(s,v);t(w)}catch(w){const P=Q(E({id:`task-${Date.now()}`,workspaceId:s},v),{progressPercentage:0,actualHours:0,parentTaskId:null,createdBy:"1",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()});t(P)}}catch(v){}finally{d(!1)}}),k=j=>{o(v=>v.includes(j)?v.filter(w=>w!==j):[...v,j])};return e.jsxs("div",{className:"w-full space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold bg-gradient-primary bg-clip-text text-transparent",children:"Add a new task to the timeline"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Create a new task with timeline, priority, and team assignment"})]}),e.jsxs("form",{onSubmit:u,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"glass-card p-6 rounded-lg space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Ho,{className:"h-5 w-5 text-primary"}),e.jsx("h3",{className:"font-semibold",children:"Task Information"})]}),e.jsxs("div",{children:[e.jsx(jt,{htmlFor:"taskName",className:"text-sm font-medium",children:"Task Name"}),e.jsx(Pt,{id:"taskName",value:a.name,onChange:j=>n(v=>Q(E({},v),{name:j.target.value})),placeholder:"Enter task name...",className:"glass-card hover:shadow-lg transition-all duration-300",required:!0})]}),e.jsxs("div",{children:[e.jsx(jt,{htmlFor:"taskDescription",className:"text-sm font-medium",children:"Description"}),e.jsx(Sr,{id:"taskDescription",value:a.description,onChange:j=>n(v=>Q(E({},v),{description:j.target.value})),placeholder:"Describe the task...",rows:3,className:"glass-card hover:shadow-lg transition-all duration-300"})]})]}),e.jsxs("div",{className:"glass-card p-6 rounded-lg space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(dr,{className:"h-5 w-5 text-primary"}),e.jsx("label",{className:"text-sm font-medium",children:"Assign Team Members"}),e.jsxs(Qe,{variant:"secondary",className:"glass-card",children:[i.length," selected"]})]}),e.jsx("div",{className:"space-y-2",children:p.map(j=>{const v=x(j);return e.jsxs("div",{className:Ce("flex items-center justify-between p-3 rounded-lg glass-card cursor-pointer transition-all hover:shadow-lg",i.includes(v.id)&&"bg-primary/10 ring-1 ring-primary/20"),onClick:()=>k(v.id),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full glass-card flex items-center justify-center text-white text-sm font-medium bg-gradient-to-br from-blue-500 to-purple-600",children:v.avatar}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:v.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:v.email})]})]}),e.jsx("div",{className:Ce("w-5 h-5 rounded border-2 transition-all",i.includes(v.id)?"bg-primary border-primary":"border-gray-300"),children:i.includes(v.id)&&e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})})]},v.id)})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"glass-card p-6 rounded-lg space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Py,{className:"h-5 w-5 text-primary"}),e.jsx("h3",{className:"font-semibold",children:"Timeline"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(jt,{htmlFor:"startDate",className:"text-sm font-medium",children:"Start Date"}),e.jsx(Pt,{id:"startDate",type:"datetime-local",value:a.startDate,onChange:j=>n(v=>Q(E({},v),{startDate:j.target.value})),className:"glass-card hover:shadow-lg transition-all duration-300",required:!0})]}),e.jsxs("div",{children:[e.jsx(jt,{htmlFor:"endDate",className:"text-sm font-medium",children:"End Date"}),e.jsx(Pt,{id:"endDate",type:"datetime-local",value:a.endDate,onChange:j=>n(v=>Q(E({},v),{endDate:j.target.value})),className:"glass-card hover:shadow-lg transition-all duration-300",required:!0})]})]})]}),e.jsxs("div",{className:"glass-card p-6 rounded-lg space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Aa,{className:"h-5 w-5 text-primary"}),e.jsx("h3",{className:"font-semibold",children:"Priority & Estimation"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(jt,{htmlFor:"priority",className:"text-sm font-medium",children:"Priority"}),e.jsxs(bs,{value:a.priority,onValueChange:j=>n(v=>Q(E({},v),{priority:j})),children:[e.jsx(fs,{className:"glass-card hover:shadow-lg transition-all duration-300",children:e.jsx(ws,{})}),e.jsxs(ps,{children:[e.jsx(tt,{value:"low",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-500"}),"Low"]})}),e.jsx(tt,{value:"medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),"Medium"]})}),e.jsx(tt,{value:"high",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-orange-500"}),"High"]})}),e.jsx(tt,{value:"urgent",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500"}),"Urgent"]})})]})]})]}),e.jsxs("div",{children:[e.jsx(jt,{htmlFor:"estimatedHours",className:"text-sm font-medium",children:"Estimated Hours"}),e.jsxs("div",{className:"relative",children:[e.jsx(es,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(Pt,{id:"estimatedHours",type:"number",min:"0",step:"0.5",value:a.estimatedHours,onChange:j=>n(v=>Q(E({},v),{estimatedHours:j.target.value})),placeholder:"0",className:"glass-card hover:shadow-lg transition-all duration-300 pl-10"})]})]})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-border/20",children:[e.jsx(le,{type:"button",variant:"outline",className:"glass-card hover:shadow-lg transition-all duration-300",disabled:l,children:"Cancel"}),e.jsx(le,{type:"submit",className:"glass-card hover:shadow-lg transition-all duration-300 bg-gradient-to-r from-blue-500 to-indigo-600 text-white border-0",disabled:l||!a.name.trim()||!a.startDate||!a.endDate,children:l?"Creating...":"Create Task"})]})]})]})}const dk=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#f97316","#06b6d4","#84cc16"];function uk({workspaceId:s,milestones:t,onUpdated:r,onMilestoneCreated:a}){const[n,i]=N.useState(!1),[o,l]=N.useState({name:"",description:"",dueDate:"",color:"#3b82f6",isCritical:!1}),[d,h]=N.useState(!1),f=k=>xe(this,null,function*(){if(k.preventDefault(),!(!o.name.trim()||!o.dueDate))try{h(!0);const j={name:o.name.trim(),description:o.description.trim(),dueDate:o.dueDate,color:o.color,isCritical:o.isCritical};try{yield Nt.createTimelineMilestone(s,j)}catch(v){const w=Q(E({id:`milestone-${Date.now()}`,workspaceId:s},j),{status:"pending",completionPercentage:0,achievedAt:null,achievedBy:null,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()});a&&a(w)}l({name:"",description:"",dueDate:"",color:"#3b82f6",isCritical:!1}),i(!1),r()}catch(j){}finally{h(!1)}}),p=k=>{switch(k){case"achieved":return"bg-green-500";case"missed":return"bg-red-500";case"cancelled":return"bg-gray-500";default:return"bg-blue-500"}},x=k=>{switch(k){case"achieved":return e.jsx(Tr,{className:"h-4 w-4"});case"missed":return e.jsx(Ho,{className:"h-4 w-4"});case"cancelled":return e.jsx(Ho,{className:"h-4 w-4"});default:return e.jsx(Qo,{className:"h-4 w-4"})}},u=[...t].sort((k,j)=>new Date(k.dueDate).getTime()-new Date(j.dueDate).getTime());return e.jsxs(Ke,{className:"glass-card border-0",children:[e.jsx(_t,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Ot,{className:"flex items-center gap-2",children:[e.jsx(Aa,{className:"h-4 w-4"}),"Milestones"]}),e.jsxs(Ts,{open:n,onOpenChange:i,children:[e.jsx(ru,{asChild:!0,children:e.jsxs(le,{size:"sm",className:"hover-shimmer cyrus-ui",children:[e.jsx(gs,{className:"h-4 w-4 mr-2"}),"Add Milestone"]})}),e.jsxs(Is,{className:"glass-card border-0","aria-describedby":"milestone-dialog-description",children:[e.jsx(Dr,{children:e.jsx(Ks,{className:"bg-gradient-primary bg-clip-text text-transparent",children:"Create New Milestone"})}),e.jsx("div",{id:"milestone-dialog-description",className:"sr-only",children:"Dialog for creating a new milestone with name, description, due date, color, and critical status"}),e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(jt,{htmlFor:"milestoneName",className:"text-sm font-medium",children:"Milestone Name"}),e.jsx(Pt,{id:"milestoneName",value:o.name,onChange:k=>l(j=>Q(E({},j),{name:k.target.value})),placeholder:"Enter milestone name...",className:"glass-card border-gray-200/20 focus:border-blue-500/50",required:!0})]}),e.jsxs("div",{children:[e.jsx(jt,{htmlFor:"milestoneDescription",className:"text-sm font-medium",children:"Description"}),e.jsx(Sr,{id:"milestoneDescription",value:o.description,onChange:k=>l(j=>Q(E({},j),{description:k.target.value})),placeholder:"Describe the milestone...",rows:3,className:"glass-card border-gray-200/20 focus:border-blue-500/50"})]}),e.jsxs("div",{children:[e.jsx(jt,{htmlFor:"milestoneDueDate",className:"text-sm font-medium",children:"Due Date"}),e.jsx(Pt,{id:"milestoneDueDate",type:"datetime-local",value:o.dueDate,onChange:k=>l(j=>Q(E({},j),{dueDate:k.target.value})),className:"glass-card border-gray-200/20 focus:border-blue-500/50",required:!0})]}),e.jsxs("div",{children:[e.jsx(jt,{className:"text-sm font-medium",children:"Color"}),e.jsx("div",{className:"flex gap-2 mt-2",children:dk.map(k=>e.jsx("button",{type:"button",className:Ce("w-8 h-8 rounded-full border-2 transition-all hover:scale-110",o.color===k?"border-gray-800 scale-110":"border-gray-300"),style:{backgroundColor:k},onClick:()=>l(j=>Q(E({},j),{color:k}))},k))})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{id:"isCritical",type:"checkbox",checked:o.isCritical,onChange:k=>l(j=>Q(E({},j),{isCritical:k.target.checked})),className:"w-4 h-4 text-red-600 rounded focus:ring-red-500"}),e.jsx(jt,{htmlFor:"isCritical",className:"text-sm font-medium",children:"Critical Milestone"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200/20",children:[e.jsx(le,{type:"button",variant:"outline",onClick:()=>i(!1),className:"hover-shimmer cyrus-ui",disabled:d,children:"Cancel"}),e.jsx(le,{type:"submit",className:"button-primary-enhanced hover-shimmer cyrus-ui",disabled:d||!o.name.trim()||!o.dueDate,children:d?"Creating...":"Create Milestone"})]})]})]})]})]})}),e.jsx(Xe,{children:u.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Aa,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No milestones yet"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Create your first milestone to track important project deadlines"}),e.jsxs(le,{onClick:()=>i(!0),className:"hover-shimmer cyrus-ui",children:[e.jsx(gs,{className:"h-4 w-4 mr-2"}),"Add Milestone"]})]}):e.jsx("div",{className:"space-y-3",children:u.map(k=>{const j=new Date(k.dueDate)<new Date&&k.status==="pending",v=Math.ceil((new Date(k.dueDate).getTime()-new Date().getTime())/(1e3*60*60*24));return e.jsx("div",{className:Ce("p-4 rounded-lg border transition-all hover:shadow-md","glass-card border-gray-200/20",j&&"border-red-200/50 bg-red-50/20"),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("div",{className:"w-4 h-4 rotate-45 border-2 border-white shadow-sm mt-1 flex-shrink-0",style:{backgroundColor:k.color}}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-semibold truncate",children:k.name}),k.isCritical&&e.jsx(Qe,{variant:"destructive",className:"text-xs",children:"Critical"})]}),k.description&&e.jsx("p",{className:"text-sm text-muted-foreground mb-2 line-clamp-2",children:k.description}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(xs,{className:"h-3 w-3"}),e.jsx("span",{className:Ce(j?"text-red-600 font-medium":"text-muted-foreground"),children:Wt(k.dueDate)})]}),k.status==="pending"&&e.jsx("span",{className:Ce("text-xs",j?"text-red-600":v<=7?"text-orange-600":"text-muted-foreground"),children:j?`${Math.abs(v)} days overdue`:v===0?"Due today":`${v} days remaining`})]})]})]}),e.jsx("div",{className:"flex items-center gap-2 ml-4",children:e.jsxs(Qe,{variant:"secondary",className:Ce("text-white text-xs",p(k.status)),children:[x(k.status),e.jsx("span",{className:"ml-1 capitalize",children:k.status})]})})]})},k.id)})})})]})}function hk({tasks:s,milestones:t,onTaskClick:r,onMilestoneClick:a,onDateClick:n}){const[i,o]=N.useState(new Date),[l,d]=N.useState(null),h=N.useMemo(()=>{const v=i.getFullYear(),w=i.getMonth(),P=new Date(v,w,1),D=new Date(v,w+1,0),B=new Date(P);B.setDate(B.getDate()-P.getDay());const F=new Date(D);F.setDate(F.getDate()+(6-D.getDay()));const se=[],z=new Date(B);for(;z<=F;)se.push(new Date(z)),z.setDate(z.getDate()+1);return se},[i]),f=v=>{const w=v.toISOString().split("T")[0],P=s.filter(B=>{const F=new Date(B.startDate).toISOString().split("T")[0],se=new Date(B.endDate).toISOString().split("T")[0];return w>=F&&w<=se}),D=t.filter(B=>{const F=new Date(B.dueDate).toISOString().split("T")[0];return w===F});return{tasks:P,milestones:D}},p=v=>{o(w=>{const P=new Date(w);return P.setMonth(P.getMonth()+(v==="next"?1:-1)),P})},x=v=>{const w=new Date;return v.toDateString()===w.toDateString()},u=v=>v.getMonth()===i.getMonth(),k=v=>{switch(v){case"completed":return"bg-green-500";case"in_progress":return"bg-blue-500";case"not_started":return"bg-gray-500";case"on_hold":return"bg-yellow-500";case"cancelled":return"bg-red-500";case"achieved":return"bg-green-500";case"pending":return"bg-blue-500";case"missed":return"bg-red-500";default:return"bg-gray-500"}},j=v=>{switch(v){case"urgent":return"border-red-500";case"high":return"border-orange-500";case"medium":return"border-yellow-500";case"low":return"border-gray-500";default:return"border-gray-500"}};return e.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between flex-shrink-0 p-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:i.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{variant:"outline",size:"sm",onClick:()=>p("prev"),className:"hover-shimmer cyrus-ui",children:e.jsx(lc,{className:"h-4 w-4"})}),e.jsx(le,{variant:"outline",size:"sm",onClick:()=>o(new Date),className:"hover-shimmer cyrus-ui",children:"Today"}),e.jsx(le,{variant:"outline",size:"sm",onClick:()=>p("next"),className:"hover-shimmer cyrus-ui",children:e.jsx(Wa,{className:"h-4 w-4"})})]})]}),e.jsx("div",{className:"flex-1 overflow-hidden",children:e.jsx(Ke,{className:"glass-card border-0 h-full",children:e.jsxs(Xe,{className:"p-0 h-full flex flex-col",children:[e.jsx("div",{className:"grid grid-cols-7 border-b border-border/20 flex-shrink-0",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(v=>e.jsx("div",{className:"p-3 text-center text-sm font-medium text-muted-foreground",children:v},v))}),e.jsx("div",{className:"grid grid-cols-7 flex-1 overflow-auto",children:h.map((v,w)=>{const P=f(v),D=P.tasks.length>0||P.milestones.length>0;return e.jsxs("div",{className:Ce("min-h-[120px] p-2 border-r border-b border-border/10 cursor-pointer transition-colors hover:bg-muted/30",!u(v)&&"text-muted-foreground bg-muted/20",x(v)&&"bg-primary/10 ring-1 ring-primary/30",(l==null?void 0:l.toDateString())===v.toDateString()&&"bg-accent"),onClick:()=>{d(v),n==null||n(v)},children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:Ce("text-sm font-medium",x(v)&&"text-primary font-bold"),children:v.getDate()}),D&&e.jsx("div",{className:"w-2 h-2 rounded-full bg-indicator"})]}),e.jsxs("div",{className:"space-y-1",children:[P.milestones.slice(0,2).map(B=>e.jsx("div",{className:Ce("text-xs p-1 rounded cursor-pointer hover:opacity-80 transition-opacity",k(B.status),"text-white"),onClick:F=>{F.stopPropagation(),a==null||a(B)},children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Aa,{className:"h-3 w-3"}),e.jsx("span",{className:"truncate",children:B.name})]})},B.id)),P.tasks.slice(0,2).map(B=>e.jsx("div",{className:Ce("text-xs p-1 rounded border-l-2 bg-muted/50 cursor-pointer hover:bg-muted/70 transition-colors",j(B.priority)),onClick:F=>{F.stopPropagation(),r==null||r(B)},children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:Ce("w-2 h-2 rounded-full",k(B.status))}),e.jsx("span",{className:"truncate",children:B.name})]})},B.id)),P.tasks.length+P.milestones.length>4&&e.jsxs("div",{className:"text-xs text-muted-foreground p-1",children:["+",P.tasks.length+P.milestones.length-4," more"]})]})]},w)})})]})})}),l&&e.jsx("div",{className:"flex-shrink-0 p-4",children:e.jsxs(Ke,{className:"glass-card border-0",children:[e.jsx(_t,{children:e.jsxs(Ot,{className:"flex items-center gap-2",children:[e.jsx(xs,{className:"h-5 w-5"}),l.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})}),e.jsx(Xe,{className:"space-y-4 max-h-64 overflow-y-auto",children:(()=>{const v=f(l);return v.tasks.length===0&&v.milestones.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(xs,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No tasks or milestones on this date"}),e.jsxs(le,{variant:"outline",size:"sm",className:"mt-2 hover-shimmer cyrus-ui",onClick:()=>n==null?void 0:n(l),children:[e.jsx(gs,{className:"h-4 w-4 mr-2"}),"Add Task"]})]}):e.jsxs("div",{className:"space-y-4",children:[v.milestones.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium mb-2 flex items-center gap-2",children:[e.jsx(Aa,{className:"h-4 w-4"}),"Milestones (",v.milestones.length,")"]}),e.jsx("div",{className:"space-y-2",children:v.milestones.map(w=>e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg border border-border/50 cursor-pointer hover:bg-muted/30 transition-colors",onClick:()=>a==null?void 0:a(w),children:[e.jsx("div",{className:Ce("w-3 h-3 rounded-full",k(w.status))}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:w.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:w.description})]}),e.jsx(Qe,{variant:"secondary",className:Ce("text-white text-xs",k(w.status)),children:w.status})]},w.id))})]}),v.tasks.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium mb-2 flex items-center gap-2",children:[e.jsx(es,{className:"h-4 w-4"}),"Tasks (",v.tasks.length,")"]}),e.jsx("div",{className:"space-y-2",children:v.tasks.map(w=>e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg border border-border/50 cursor-pointer hover:bg-muted/30 transition-colors",onClick:()=>r==null?void 0:r(w),children:[e.jsx("div",{className:Ce("w-3 h-3 rounded-full",k(w.status))}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:w.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[w.estimatedHours,"h estimated • ",w.priority," priority"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(Qe,{variant:"outline",className:Ce("text-xs border-2",j(w.priority)),children:w.priority}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[w.progressPercentage,"% complete"]})]})]},w.id))})]})]})})()})]})})]})}function mk({stats:s}){const t=r=>r<=80?"destructive":r<=100?"default":"secondary";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Ke,{className:"glass-card border-0",children:[e.jsx(_t,{children:e.jsxs(Ot,{className:"flex items-center gap-2",children:[e.jsx(yd,{className:"h-5 w-5"}),"Project Health Overview"]})}),e.jsxs(Xe,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Overall Progress"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[s.completionPercentage,"%"]})]}),e.jsx(tc,{value:s.completionPercentage,className:"h-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Milestone Progress"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[s.milestoneProgress,"%"]})]}),e.jsx(tc,{value:s.milestoneProgress,className:"h-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Time Efficiency"}),e.jsx(Qe,{variant:t(s.timeEfficiency),children:s.timeEfficiency>0?`${s.timeEfficiency}%`:"N/A"})]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[s.totalActualHours,"h actual vs ",s.totalEstimatedHours,"h estimated"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[e.jsx(Ke,{className:"glass-card border-0",children:e.jsxs(Xe,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(xs,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Tasks"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-2xl font-bold",children:s.totalTasks}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[s.completedTasks," completed, ",s.inProgressTasks," active"]})]})]})}),e.jsx(Ke,{className:"glass-card border-0",children:e.jsxs(Xe,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Aa,{className:"h-4 w-4 text-purple-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Milestones"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-2xl font-bold",children:s.totalMilestones}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[s.completedMilestones," achieved",s.criticalMilestones>0&&`, ${s.criticalMilestones} critical`]})]})]})}),e.jsx(Ke,{className:"glass-card border-0",children:e.jsxs(Xe,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(es,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Time Spent"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"text-2xl font-bold",children:[s.totalActualHours,"h"]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["of ",s.totalEstimatedHours,"h estimated"]})]})]})}),e.jsx(Ke,{className:"glass-card border-0",children:e.jsxs(Xe,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(_i,{className:"h-4 w-4 text-red-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Urgent"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:s.overdueTasks+s.upcomingDeadlines}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[s.overdueTasks," overdue, ",s.upcomingDeadlines," due soon"]})]})]})})]}),e.jsxs(Ke,{className:"glass-card border-0",children:[e.jsx(_t,{children:e.jsxs(Ot,{className:"flex items-center gap-2",children:[e.jsx(Qo,{className:"h-5 w-5"}),"Task Status Breakdown"]})}),e.jsx(Xe,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"text-center p-3 rounded-lg bg-green-50 dark:bg-green-950",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:s.completedTasks}),e.jsx("div",{className:"text-sm text-green-700 dark:text-green-300",children:"Completed"})]}),e.jsxs("div",{className:"text-center p-3 rounded-lg bg-blue-50 dark:bg-blue-950",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:s.inProgressTasks}),e.jsx("div",{className:"text-sm text-blue-700 dark:text-blue-300",children:"In Progress"})]}),e.jsxs("div",{className:"text-center p-3 rounded-lg bg-gray-50 dark:bg-gray-950",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-600",children:s.notStartedTasks}),e.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Not Started"})]}),e.jsxs("div",{className:"text-center p-3 rounded-lg bg-yellow-50 dark:bg-yellow-950",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:s.onHoldTasks}),e.jsx("div",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:"On Hold"})]}),e.jsxs("div",{className:"text-center p-3 rounded-lg bg-red-50 dark:bg-red-950",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:s.overdueTasks}),e.jsx("div",{className:"text-sm text-red-700 dark:text-red-300",children:"Overdue"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(Ke,{className:"glass-card border-0",children:[e.jsx(_t,{children:e.jsxs(Ot,{className:"flex items-center gap-2",children:[e.jsx(Cy,{className:"h-5 w-5"}),"Priority Analysis"]})}),e.jsxs(Xe,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"High Priority Tasks"}),e.jsx(Qe,{variant:"secondary",className:"bg-red-100 text-red-700 dark:bg-red-950 dark:text-red-300",children:s.highPriorityTasks})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Average Progress"}),e.jsxs(Qe,{variant:"outline",children:[s.averageProgress,"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Critical Milestones"}),e.jsx(Qe,{variant:s.criticalMilestones>0?"destructive":"secondary",children:s.criticalMilestones})]})]})]}),e.jsxs(Ke,{className:"glass-card border-0",children:[e.jsx(_t,{children:e.jsxs(Ot,{className:"flex items-center gap-2",children:[e.jsx(_i,{className:"h-5 w-5"}),"Risk Indicators"]})}),e.jsxs(Xe,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Overdue Tasks"}),e.jsx(Qe,{variant:s.overdueTasks>0?"destructive":"secondary",children:s.overdueTasks})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Due Next 7 Days"}),e.jsx(Qe,{variant:s.upcomingDeadlines>0?"default":"secondary",children:s.upcomingDeadlines})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Missed Milestones"}),e.jsx(Qe,{variant:s.missedMilestones>0?"destructive":"secondary",children:s.missedMilestones})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Time Efficiency"}),e.jsx(Qe,{variant:t(s.timeEfficiency),children:s.timeEfficiency>0?`${s.timeEfficiency}%`:"N/A"})]})]})]})]})]})}function fk({workspace:s,onBack:t,className:r,project:a}){const[n,i]=N.useState([]),[o,l]=N.useState([]),[d,h]=N.useState([]),[f,p]=N.useState([]),[x,u]=N.useState(!0),[k,j]=N.useState("gantt"),[v,w]=N.useState("month"),[P,D]=N.useState(!1),[B,F]=N.useState(!1),[se,z]=N.useState("timeline");N.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]),N.useEffect(()=>{C()},[s.id]);const C=()=>xe(this,null,function*(){try{u(!0);try{const[M,J,ae,he]=yield Promise.all([Nt.getTimelineTasks(s.id),Nt.getTimelineMilestones(s.id),Nt.getTimelineAssignments(),Nt.getTimelineDependencies(s.id)]);i(M),l(J),h(ae),p(he)}catch(M){const J=[{id:"task-1",workspaceId:s.id,name:"Project Planning & Research",description:"Initial project scope definition and market research",startDate:new Date(Date.now()-6048e5).toISOString(),endDate:new Date(Date.now()-2592e5).toISOString(),status:"completed",priority:"high",progressPercentage:100,estimatedHours:32,actualHours:28,parentTaskId:null,createdBy:"1",createdAt:new Date(Date.now()-864e6).toISOString(),updatedAt:new Date(Date.now()-2592e5).toISOString()},{id:"task-2",workspaceId:s.id,name:"Design Concept Development",description:"Create initial design concepts and mood boards",startDate:new Date(Date.now()-1728e5).toISOString(),endDate:new Date(Date.now()+432e6).toISOString(),status:"in_progress",priority:"high",progressPercentage:65,estimatedHours:48,actualHours:32,parentTaskId:null,createdBy:"2",createdAt:new Date(Date.now()-432e6).toISOString(),updatedAt:new Date(Date.now()-864e5).toISOString()},{id:"task-3",workspaceId:s.id,name:"Client Review & Feedback",description:"Present concepts to client and incorporate feedback",startDate:new Date(Date.now()+5184e5).toISOString(),endDate:new Date(Date.now()+864e6).toISOString(),status:"not_started",priority:"medium",progressPercentage:0,estimatedHours:16,actualHours:0,parentTaskId:null,createdBy:"1",createdAt:new Date(Date.now()-432e6).toISOString(),updatedAt:new Date(Date.now()-432e6).toISOString()},{id:"task-4",workspaceId:s.id,name:"Final Design Production",description:"Complete final designs and prepare deliverables",startDate:new Date(Date.now()+9504e5).toISOString(),endDate:new Date(Date.now()+15552e5).toISOString(),status:"not_started",priority:"urgent",progressPercentage:0,estimatedHours:40,actualHours:0,parentTaskId:null,createdBy:"2",createdAt:new Date(Date.now()-432e6).toISOString(),updatedAt:new Date(Date.now()-432e6).toISOString()}],ae=[{id:"milestone-1",workspaceId:s.id,name:"Concept Approval",description:"Client approves initial design concepts",dueDate:new Date(Date.now()+864e5*8).toISOString(),status:"pending",color:"#3b82f6",isCritical:!0,completionPercentage:0,achievedAt:null,achievedBy:null,createdAt:new Date(Date.now()-864e5*5).toISOString(),updatedAt:new Date(Date.now()-864e5*5).toISOString()},{id:"milestone-2",workspaceId:s.id,name:"Project Completion",description:"Final deliverables completed and delivered",dueDate:new Date(Date.now()+864e5*20).toISOString(),status:"pending",color:"#10b981",isCritical:!0,completionPercentage:0,achievedAt:null,achievedBy:null,createdAt:new Date(Date.now()-864e5*5).toISOString(),updatedAt:new Date(Date.now()-864e5*5).toISOString()}];i(J),l(ae),h([]),p([])}}catch(M){}finally{u(!1)}}),A=M=>{i(J=>[...J,M]),D(!1)},L=M=>{l(J=>[...J,M])},y=()=>xe(this,null,function*(){yield C()}),I=(()=>{const M=n.length,J=n.filter(X=>X.status==="completed").length,ae=n.filter(X=>X.status==="in_progress").length,he=n.filter(X=>X.status==="not_started").length,ce=n.filter(X=>X.status==="on_hold").length,ie=n.filter(X=>X.status==="cancelled").length,ve=n.filter(X=>new Date(X.endDate)<new Date&&X.status!=="completed").length,Ae=o.length,T=o.filter(X=>X.status==="achieved").length,U=o.filter(X=>X.status==="pending").length,V=o.filter(X=>X.status==="missed").length,re=o.filter(X=>X.isCritical).length,G=n.reduce((X,me)=>X+me.estimatedHours,0),Y=n.reduce((X,me)=>X+me.actualHours,0),Z=n.filter(X=>X.priority==="high"||X.priority==="urgent").length,de=M>0?Math.round(n.reduce((X,me)=>X+me.progressPercentage,0)/M):0,Le=n.filter(X=>{const me=new Date(X.endDate),we=new Date,oe=Math.ceil((me.getTime()-we.getTime())/(1e3*60*60*24));return oe>=0&&oe<=7&&X.status!=="completed"}).length;return{totalTasks:M,completedTasks:J,inProgressTasks:ae,notStartedTasks:he,onHoldTasks:ce,cancelledTasks:ie,overdueTasks:ve,totalMilestones:Ae,completedMilestones:T,pendingMilestones:U,missedMilestones:V,criticalMilestones:re,totalEstimatedHours:G,totalActualHours:Y,highPriorityTasks:Z,averageProgress:de,upcomingDeadlines:Le,completionPercentage:M>0?Math.round(J/M*100):0,milestoneProgress:Ae>0?Math.round(T/Ae*100):0,timeEfficiency:G>0?Math.round(G/Y*100):0}})();return x?e.jsx("div",{className:"glass-card p-6 rounded-lg shadow-lg",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3"}),e.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})}):e.jsxs("div",{className:Ce("h-screen flex flex-col bg-background overflow-hidden",r),children:[e.jsx("div",{className:"glass-navbar p-4 border-b flex-shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(le,{variant:"ghost",size:"sm",onClick:t,className:"glass-card hover:shadow-lg transition-all duration-300",children:e.jsx(Ca,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold text-responsive-xl",children:s.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[I.totalTasks," tasks • ",I.completionPercentage,"% complete"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(bs,{value:v,onValueChange:M=>w(M),children:[e.jsx(fs,{className:"glass-input w-32",children:e.jsx(ws,{})}),e.jsxs(ps,{className:"glass-card",children:[e.jsx(tt,{value:"week",children:"Week"}),e.jsx(tt,{value:"month",children:"Month"}),e.jsx(tt,{value:"quarter",children:"Quarter"})]})]}),e.jsxs(bs,{value:k,onValueChange:M=>j(M),children:[e.jsx(fs,{className:"glass-input w-32",children:e.jsx(ws,{})}),e.jsxs(ps,{className:"glass-card",children:[e.jsx(tt,{value:"gantt",children:"Gantt"}),e.jsx(tt,{value:"table",children:"Table"}),e.jsx(tt,{value:"calendar",children:"Calendar"})]})]}),e.jsxs(Ts,{open:P,onOpenChange:D,children:[e.jsx(ru,{asChild:!0,children:e.jsxs(le,{className:"btn-glass-primary touch-target",children:[e.jsx(gs,{className:"h-4 w-4 mr-2"}),"Add Task"]})}),e.jsxs(Is,{className:"glass-modal","aria-describedby":"task-dialog-description",children:[e.jsx("div",{id:"task-dialog-description",className:"sr-only",children:"Dialog for creating a new task with name, description, timeline, priority, estimation, and team assignment"}),e.jsx(ck,{workspaceId:s.id,onTaskCreated:A,project:a})]})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 xl:grid-cols-10 gap-3 p-4 flex-shrink-0",children:[e.jsx(Ke,{className:"glass-card border-0",children:e.jsx(Xe,{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xs,{className:"h-4 w-4 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Tasks"}),e.jsx("p",{className:"text-sm font-semibold",children:I.totalTasks})]})]})})}),e.jsx(Ke,{className:"glass-card border-0",children:e.jsx(Xe,{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qo,{className:"h-4 w-4 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Completed"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("p",{className:"text-sm font-semibold text-green-600",children:I.completedTasks}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["(",I.completionPercentage,"%)"]})]})]})]})})}),e.jsx(Ke,{className:"glass-card border-0",children:e.jsx(Xe,{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(dr,{className:"h-4 w-4 text-orange-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"In Progress"}),e.jsx("p",{className:"text-sm font-semibold text-orange-600",children:I.inProgressTasks})]})]})})}),e.jsx(Ke,{className:"glass-card border-0",children:e.jsx(Xe,{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-red-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Overdue"}),e.jsx("p",{className:"text-sm font-semibold text-red-600",children:I.overdueTasks})]})]})})}),e.jsx(Ke,{className:"glass-card border-0",children:e.jsx(Xe,{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Aa,{className:"h-4 w-4 text-purple-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Milestones"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("p",{className:"text-sm font-semibold",children:I.totalMilestones}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["(",I.milestoneProgress,"% complete)"]})]})]})]})})}),e.jsx(Ke,{className:"glass-card border-0",children:e.jsx(Xe,{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(es,{className:"h-4 w-4 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Hours Spent"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("p",{className:"text-sm font-semibold",children:I.totalActualHours}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["of ",I.totalEstimatedHours,"h est."]})]})]})]})})}),e.jsx(Ke,{className:"glass-card border-0",children:e.jsx(Xe,{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-yellow-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"High Priority"}),e.jsx("p",{className:"text-sm font-semibold text-yellow-600",children:I.highPriorityTasks})]})]})})}),e.jsx(Ke,{className:"glass-card border-0",children:e.jsx(Xe,{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-purple-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Critical"}),e.jsx("p",{className:"text-sm font-semibold text-purple-600",children:I.criticalMilestones})]})]})})}),e.jsx(Ke,{className:"glass-card border-0",children:e.jsx(Xe,{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Upcoming"}),e.jsx("p",{className:"text-sm font-semibold text-blue-600",children:I.upcomingDeadlines})]})]})})}),e.jsx(Ke,{className:"glass-card border-0",children:e.jsx(Xe,{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Efficiency"}),e.jsxs("p",{className:"text-sm font-semibold text-green-600",children:[I.timeEfficiency,"%"]})]})]})})})]}),e.jsxs("div",{className:"flex items-center gap-2 p-4 flex-shrink-0",children:[e.jsx(le,{variant:se==="timeline"?"default":"outline",size:"sm",onClick:()=>z("timeline"),className:"glass-card hover:shadow-lg transition-all duration-300",children:"Timeline"}),e.jsx(le,{variant:se==="tasks"?"default":"outline",size:"sm",onClick:()=>z("tasks"),className:"glass-card hover:shadow-lg transition-all duration-300",children:"Task Manager"}),e.jsx(le,{variant:se==="resources"?"default":"outline",size:"sm",onClick:()=>z("resources"),className:"glass-card hover:shadow-lg transition-all duration-300",children:"Resources"}),e.jsx(le,{variant:se==="analytics"?"default":"outline",size:"sm",onClick:()=>z("analytics"),className:"glass-card hover:shadow-lg transition-all duration-300",children:"Analytics"})]}),e.jsxs("div",{className:"flex flex-1 min-h-0 overflow-hidden",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[se==="timeline"&&k==="calendar"&&e.jsx(hk,{tasks:n,milestones:o,onTaskClick:M=>{},onMilestoneClick:M=>{},onDateClick:M=>{}}),se==="timeline"&&k!=="calendar"&&e.jsx(ZS,{tasks:n,milestones:o,dependencies:f,viewMode:k,timeRange:v,onTaskUpdated:y}),se==="tasks"&&e.jsx(ik,{tasks:n,onTaskUpdated:y}),se==="resources"&&e.jsx(lk,{tasks:n,assignments:d}),se==="analytics"&&e.jsx(mk,{stats:I})]}),e.jsx("div",{className:"w-[450px] border-l bg-background flex flex-col overflow-hidden",children:e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:e.jsx(uk,{workspaceId:s.id,milestones:o,onUpdated:C,onMilestoneCreated:L})})})]})]})}function pk({className:s,projects:t=[],onEnterFocusMode:r,onExitFocusMode:a}){const[n,i]=N.useState("list"),[o,l]=N.useState(null),[d,h]=N.useState([]),{toast:f}=Pa(),[p,x]=N.useState(!1);N.useEffect(()=>{xe(this,null,function*(){x(!0);try{const P=Nt.workspaces.filter(D=>D.type==="whiteboard");h(P)}catch(P){f({title:"Error",description:"Failed to load whiteboards",variant:"destructive"})}finally{x(!1)}})},[f]);const u=w=>{l(w),i("detail"),r==null||r()},k=w=>xe(this,null,function*(){try{x(!0);const P=yield Nt.createWorkspaceForProject(w.id,"whiteboard");f({title:P.isNew?"Whiteboard created":"Existing whiteboard found",description:P.message});const D=Nt.workspaces.filter(B=>B.type==="whiteboard");h(D),u(P.workspace)}catch(P){f({title:"Error",description:"Failed to create whiteboard",variant:"destructive"})}finally{x(!1)}}),j=()=>{i("create")},v=()=>{l(null),i("list"),a==null||a()};return n==="detail"&&o?e.jsx(HS,{whiteboard:o,onBack:v}):n==="create"?e.jsx("div",{className:Ce("p-6",s),children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(le,{variant:"ghost",size:"sm",onClick:()=>i("list"),children:e.jsx(Ca,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Create Whiteboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Select a project to create image review workspace"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(w=>e.jsxs(Ke,{className:"cursor-pointer transition-all hover:shadow-md hover:scale-[1.02] border-l-4",style:{borderLeftColor:w.status==="Completed"?"#10b981":"#3b82f6"},onClick:()=>k(w),children:[e.jsxs(_t,{children:[e.jsx(Ot,{className:"text-lg",children:w.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:w.client})]}),e.jsx(Xe,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Status"}),e.jsx(Qe,{variant:"outline",children:w.status})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Created"}),e.jsx("span",{children:Wt(w.createdAt)})]}),e.jsx("div",{className:"pt-2",children:e.jsx(le,{className:"w-full",size:"sm",children:"Create Whiteboard"})})]})})]},w.id))}),t.length===0&&!p&&e.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg",children:[e.jsx("div",{className:"text-gray-400 mb-4",children:e.jsx("svg",{className:"h-12 w-12 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Projects Available"}),e.jsx("p",{className:"text-gray-500",children:"Create a project first to set up whiteboard image review"})]}),p&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading projects..."})]})]})}):e.jsxs("div",{className:Ce("p-6",s),children:[e.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Whiteboards"}),e.jsx("p",{className:"text-muted-foreground",children:"Create and manage image review workspaces for design feedback"})]}),e.jsxs(le,{onClick:j,className:"button-primary-enhanced hover-shimmer cyrus-ui",children:[e.jsx(gs,{className:"h-4 w-4 mr-2"}),"New Whiteboard"]})]}),p?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading whiteboards..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(w=>{var F,se;const P=t.find(z=>z.id===w.projectId),D=P?P.name:"Unknown Project",B=P?P.client:"";return e.jsxs(Ke,{className:"cursor-pointer transition-all hover:shadow-md hover:scale-[1.01]",onClick:()=>u(w),children:[e.jsx(_t,{children:e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsx(Ot,{className:"text-lg",children:w.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[D," ",B&&`• ${B}`]})]}),e.jsx(Mr,{className:"h-5 w-5 text-muted-foreground"})]})}),e.jsx(Xe,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Yn,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[((F=w.images)==null?void 0:F.length)||0," images"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Nr,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[((se=w.comments)==null?void 0:se.length)||0," comments"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(xs,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:Wt(w.updatedAt)})]})]}),e.jsxs("div",{className:"aspect-video bg-muted rounded-md overflow-hidden relative",children:[w.images&&w.images.length>0?e.jsx("img",{src:w.images[0].url,alt:"Whiteboard preview",className:"w-full h-full object-cover"}):e.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:e.jsx(Mr,{className:"h-12 w-12 opacity-20"})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/30 to-transparent"})]}),e.jsxs(le,{className:"w-full",variant:"outline",onClick:z=>{z.stopPropagation(),u(w)},children:[e.jsx(Yd,{className:"h-4 w-4 mr-2"}),"View Whiteboard"]})]})})]},w.id)})}),d.length===0&&!p&&e.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg mt-8",children:[e.jsx("div",{className:"text-gray-400 mb-4",children:e.jsx(Mr,{className:"h-12 w-12 mx-auto"})}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Whiteboards Yet"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Create a whiteboard to start collaborating on image reviews"}),e.jsxs(le,{onClick:j,className:"button-primary-enhanced hover-shimmer cyrus-ui",children:[e.jsx(gs,{className:"h-4 w-4 mr-2"}),"New Whiteboard"]})]})]})]})}function gk({className:s,projects:t=[],onEnterFocusMode:r,onExitFocusMode:a}){const[n,i]=N.useState("list"),[o,l]=N.useState(null),d=p=>xe(this,null,function*(){try{const u=(yield Nt.getWorkflows()).find(k=>k.projectId===p.id);if(u)l(u),i("detail"),r==null||r();else{const k=yield Nt.createWorkflow({projectId:p.id,name:`${p.name} - Workflow`,createdBy:"Current User",isArchived:!1,collaborators:["current-user"],settings:{isPublic:!1,allowComments:!0,allowEditing:!0,autoSave:!0}});l(k),i("detail"),r==null||r()}}catch(x){const u={id:`workflow-${p.id}`,projectId:p.id,name:`${p.name} - Workflow`,type:"workflow",createdBy:"Current User",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),isArchived:!1,collaborators:["current-user"],settings:{isPublic:!1,allowComments:!0,allowEditing:!0,autoSave:!0}};l(u),i("detail"),r==null||r()}}),h=()=>{i("create")},f=()=>{i("list"),l(null),a==null||a()};if(n==="detail"&&o){const p=t.find(x=>x.id===o.projectId);return e.jsx(QS,{workspace:o,onBack:f,className:s,project:p})}return n==="create"?e.jsx("div",{className:Ce("p-6",s),children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(le,{variant:"ghost",size:"sm",onClick:()=>i("list"),children:e.jsx(Ca,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Create Workflow"}),e.jsx("p",{className:"text-muted-foreground",children:"Select a project to create project workflow"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(p=>e.jsxs(Ke,{className:"cursor-pointer transition-all hover:shadow-md hover:scale-[1.02] border-l-4",style:{borderLeftColor:p.color},onClick:()=>d(p),children:[e.jsxs(_t,{children:[e.jsx(Ot,{className:"text-lg",children:p.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:p.client})]}),e.jsx(Xe,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Status"}),e.jsx(Qe,{variant:"outline",children:p.status})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Created"}),e.jsx("span",{children:Wt(p.createdAt)})]}),e.jsx("div",{className:"pt-2",children:e.jsx(le,{className:"w-full",size:"sm",children:"Create Workflow"})})]})})]},p.id))})]})}):e.jsxs("div",{className:Ce("p-6",s),children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Workflows"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Creative pipeline management and approval processes"})]}),e.jsxs(le,{onClick:h,className:"button-primary-enhanced hover-shimmer cyrus-ui",children:[e.jsx(gs,{className:"h-4 w-4 mr-2"}),"New Workflow"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(p=>e.jsx(Ke,{className:"cursor-pointer transition-all hover:shadow-md hover:scale-[1.01] overflow-hidden",onClick:()=>d(p),children:e.jsxs(Xe,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-100 flex items-center justify-center",children:e.jsx(ca,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"font-semibold text-lg",children:[p.name," - Workflow"]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Client: ",p.client]})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground mb-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(la,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:"Pipeline"})]}),e.jsx("span",{children:Wt(p.updatedAt)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Qe,{variant:"secondary",className:"text-xs",children:p.status}),e.jsx(ca,{className:"h-5 w-5 text-muted-foreground"})]})]})},p.id))}),t.length===0&&e.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg",children:[e.jsx(ca,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Workflow Projects"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Create your first project workflow to start managing creative pipelines"}),e.jsxs(le,{onClick:h,className:"button-primary-enhanced hover-shimmer cyrus-ui",children:[e.jsx(gs,{className:"h-4 w-4 mr-2"}),"Create Workflow"]})]})]})}function xk({className:s,projects:t=[],onEnterFocusMode:r,onExitFocusMode:a}){const[n,i]=N.useState("list"),[o,l]=N.useState(null),d=p=>xe(this,null,function*(){try{const u=(yield Nt.getTimelines(p.id)).find(k=>k.projectId===p.id);if(u)l(u),i("detail"),r==null||r();else{const k=yield Nt.createTimeline({projectId:p.id,name:`${p.name} - Timeline`,createdBy:"Current User",isArchived:!1,collaborators:["current-user"],settings:{isPublic:!1,allowComments:!0,allowEditing:!0,autoSave:!0}});l(k),i("detail"),r==null||r()}}catch(x){const u={id:`timeline-${p.id}`,projectId:p.id,name:`${p.name} - Timeline`,type:"timeline",createdBy:"Current User",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),isArchived:!1,collaborators:["current-user"],settings:{isPublic:!1,allowComments:!0,allowEditing:!0,autoSave:!0}};l(u),i("detail"),r==null||r()}}),h=()=>{i("create")},f=()=>{i("list"),l(null),a==null||a()};return n==="detail"&&o?e.jsx(fk,{workspace:o,onBack:f,className:s}):n==="create"?e.jsx("div",{className:Ce("p-6",s),children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(le,{variant:"ghost",size:"sm",onClick:()=>i("list"),children:e.jsx(Ca,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Create Timeline"}),e.jsx("p",{className:"text-muted-foreground",children:"Select a project to create project timeline"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(p=>e.jsxs(Ke,{className:"cursor-pointer transition-all hover:shadow-md hover:scale-[1.02] border-l-4",style:{borderLeftColor:p.color},onClick:()=>d(p),children:[e.jsxs(_t,{children:[e.jsx(Ot,{className:"text-lg",children:p.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:p.client})]}),e.jsx(Xe,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Status"}),e.jsx(Qe,{variant:"outline",children:p.status})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Created"}),e.jsx("span",{children:Wt(p.createdAt)})]}),e.jsx("div",{className:"pt-2",children:e.jsx(le,{className:"w-full",size:"sm",children:"Create Timeline"})})]})})]},p.id))})]})}):e.jsxs("div",{className:Ce("p-6",s),children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Timelines"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Project timeline management with Gantt charts and milestone tracking"})]}),e.jsxs(le,{onClick:h,className:"button-primary-enhanced hover-shimmer cyrus-ui",children:[e.jsx(gs,{className:"h-4 w-4 mr-2"}),"New Timeline"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(p=>{const x=Math.floor(Math.random()*15)+5,u=Math.floor(Math.random()*x),k=Math.round(u/x*100),j=Math.floor(Math.random()*5)+2,v=Math.floor(Math.random()*6)+2,w=k>=60,P=["Design Review","Beta Release","Client Approval","Launch Prep"][Math.floor(Math.random()*4)];return e.jsx(Ke,{className:"cursor-pointer transition-all hover:shadow-md hover:scale-[1.01] overflow-hidden",onClick:()=>d(p),children:e.jsxs(Xe,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-orange-100 flex items-center justify-center",children:e.jsx(es,{className:"h-4 w-4 text-orange-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"font-semibold text-lg",children:[p.name," Timeline"]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Client: ",p.client]})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs font-medium",children:"Progress"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[k,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:e.jsx("div",{className:"bg-orange-500 h-1.5 rounded-full transition-all duration-500",style:{width:`${k}%`}})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3 text-xs",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold",children:x}),e.jsx("div",{className:"text-muted-foreground",children:"Tasks"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold",children:j}),e.jsx("div",{className:"text-muted-foreground",children:"Milestones"})]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(Qe,{variant:w?"default":"destructive",className:"text-xs",children:w?"On Track":"Behind Schedule"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[v," members"]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground mb-2",children:["Next: ",P]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:Wt(p.updatedAt)}),e.jsx(es,{className:"h-4 w-4"})]})]})},p.id)})}),t.length===0&&e.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg",children:[e.jsx(es,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Timeline Projects"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Create your first project timeline to start tracking tasks and milestones"}),e.jsxs(le,{onClick:h,children:[e.jsx(gs,{className:"h-4 w-4 mr-2"}),"Create Timeline"]})]})]})}function vk({searchTerm:s,searchScope:t,currentTab:r,onResultClick:a,isVisible:n,onClose:i}){const[o,l]=N.useState([]),[d,h]=N.useState(!1),f=N.useMemo(()=>[{id:"project-1",type:"project",title:"Nike Campaign 2024",description:"Revolutionary sneaker campaign targeting Gen Z",metadata:{createdBy:"Sarah Chen",createdAt:"2024-01-15",status:"Active",tags:["marketing","campaign","nike"]}},{id:"moodboard-1",type:"moodboard",title:"Nike Brand Exploration",description:"Visual inspiration and color palettes for Nike campaign",metadata:{projectName:"Nike Campaign 2024",createdBy:"Mike Johnson",createdAt:"2024-01-20",tags:["branding","colors","inspiration"]}},{id:"whiteboard-1",type:"whiteboard",title:"Nike Homepage Review",description:"Feedback and annotations on homepage designs",metadata:{projectName:"Nike Campaign 2024",createdBy:"Emma Wilson",createdAt:"2024-01-25",tags:["feedback","review","homepage"]}},{id:"workflow-1",type:"workflow",title:"Campaign Launch Process",description:"Step-by-step workflow for campaign execution",metadata:{projectName:"Nike Campaign 2024",createdBy:"Alex Turner",createdAt:"2024-01-18",tags:["process","workflow","launch"]}}],[]);N.useEffect(()=>{if(!s.trim()){l([]);return}h(!0);const u=setTimeout(()=>{let k=f;if(t==="current")switch(r){case"list":k=f.filter(v=>v.type==="project");break;case"moodboards":k=f.filter(v=>v.type==="moodboard");break;case"whiteboards":k=f.filter(v=>v.type==="whiteboard");break;case"workflows":k=f.filter(v=>v.type==="workflow");break}const j=k.filter(v=>{var P,D,B,F,se;const w=s.toLowerCase();return v.title.toLowerCase().includes(w)||((P=v.description)==null?void 0:P.toLowerCase().includes(w))||((B=(D=v.metadata)==null?void 0:D.tags)==null?void 0:B.some(z=>z.toLowerCase().includes(w)))||((se=(F=v.metadata)==null?void 0:F.createdBy)==null?void 0:se.toLowerCase().includes(w))});l(j),h(!1)},300);return()=>clearTimeout(u)},[s,t,r,f]);const p=u=>{switch(u){case"project":return e.jsx(xs,{className:"h-4 w-4"});case"moodboard":return e.jsx(ar,{className:"h-4 w-4"});case"whiteboard":return e.jsx(Mr,{className:"h-4 w-4"});case"workflow":return e.jsx(ca,{className:"h-4 w-4"});case"timeline":return e.jsx(es,{className:"h-4 w-4"});case"activity":return e.jsx(dr,{className:"h-4 w-4"});default:return e.jsx(dn,{className:"h-4 w-4"})}},x=u=>{switch(u){case"project":return"bg-blue-100 text-blue-700";case"moodboard":return"bg-purple-100 text-purple-700";case"whiteboard":return"bg-green-100 text-green-700";case"workflow":return"bg-orange-100 text-orange-700";case"timeline":return"bg-red-100 text-red-700";case"activity":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return!n||!s.trim()?null:e.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 z-50",children:e.jsx(Ke,{className:"glass-card border shadow-lg",children:e.jsxs(Xe,{className:"p-0",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(dn,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:t==="global"?"Global Search":`Search in ${r}`}),e.jsxs(Qe,{variant:"secondary",className:"text-xs",children:[o.length," results"]})]}),e.jsx(le,{variant:"ghost",size:"sm",onClick:i,children:e.jsx(Hs,{className:"h-4 w-4"})})]}),e.jsx(Hm,{className:"max-h-80",children:d?e.jsxs("div",{className:"p-8 text-center text-muted-foreground",children:[e.jsx(dn,{className:"h-8 w-8 mx-auto mb-2 animate-pulse"}),"Searching..."]}):o.length>0?e.jsx("div",{className:"p-2",children:o.map(u=>{var k,j,v,w;return e.jsx("div",{className:"p-3 rounded-lg hover:bg-muted/50 cursor-pointer transition-colors",onClick:()=>a(u),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:Ce("p-2 rounded-lg",x(u.type)),children:p(u.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-medium text-sm truncate",children:u.title}),e.jsx(Qe,{variant:"outline",className:"text-xs capitalize",children:u.type})]}),u.description&&e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2 mb-2",children:u.description}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[((k=u.metadata)==null?void 0:k.projectName)&&e.jsxs("span",{children:["Project: ",u.metadata.projectName]}),((j=u.metadata)==null?void 0:j.createdBy)&&e.jsxs("span",{children:["by ",u.metadata.createdBy]}),((v=u.metadata)==null?void 0:v.createdAt)&&e.jsx("span",{children:new Date(u.metadata.createdAt).toLocaleDateString()})]}),((w=u.metadata)==null?void 0:w.tags)&&e.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[u.metadata.tags.slice(0,3).map(P=>e.jsx(Qe,{variant:"secondary",className:"text-xs",children:P},P)),u.metadata.tags.length>3&&e.jsxs(Qe,{variant:"outline",className:"text-xs",children:["+",u.metadata.tags.length-3]})]})]})]})},u.id)})}):e.jsxs("div",{className:"p-8 text-center text-muted-foreground",children:[e.jsx(dn,{className:"h-8 w-8 mx-auto mb-2"}),e.jsxs("p",{children:['No results found for "',s,'"']}),e.jsx("p",{className:"text-xs mt-1",children:"Try different keywords or check your search scope"})]})})]})})})}const yk=({isOpen:s,onClose:t,onNavigate:r,currentView:a,isLoggedIn:n,userDisplayName:i,notificationCount:o,onLogout:l,onLogin:d})=>{var j;const[h,f]=N.useState(!1);N.useEffect(()=>{f(!0)},[]),N.useEffect(()=>(s?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[s]);const p=[{id:"list",label:"Projects",icon:Ty,description:"Manage your projects"},{id:"calendar",label:"Calendar",icon:xs,description:"View project timeline"},{id:"monday",label:"Monday",icon:sx,description:"Board view"}],x=[{id:"moodboards",label:"Moodboards",icon:ar,description:"Visual inspiration"},{id:"whiteboards",label:"Whiteboards",icon:Mr,description:"Collaborative workspace"},{id:"workflows",label:"Workflows",icon:ca,description:"Process management"},{id:"timeline",label:"Timeline",icon:es,description:"Project timelines"}],u=[{id:"activity",label:"Activity",icon:km,description:"Recent updates"},{id:"profile",label:"Profile",icon:da,description:"Your account"}],k=v=>{r(v),t()};return h?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:Ce("fixed inset-0 bg-black/50 backdrop-blur-sm z-40 transition-opacity duration-300",s?"opacity-100":"opacity-0 pointer-events-none"),onClick:t}),e.jsx("div",{className:Ce("fixed top-0 left-0 h-full w-80 bg-background border-r shadow-2xl z-50 transform transition-transform duration-300 ease-out",s?"translate-x-0":"-translate-x-full"),children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-2xl font-bold bg-gradient-to-r from-pink-500 to-purple-400 bg-clip-text text-transparent",children:"CT"}),e.jsx("div",{className:"text-lg font-semibold",children:"Menu"})]}),e.jsx(le,{variant:"ghost",size:"sm",onClick:t,children:e.jsx(Hs,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"p-6 border-b",children:n?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-medium",children:((j=i==null?void 0:i.charAt(0))==null?void 0:j.toUpperCase())||"U"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:i||"User"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Online"})]}),e.jsx(le,{variant:"ghost",size:"sm",children:e.jsx(Wa,{className:"h-4 w-4"})})]}):e.jsx(le,{onClick:d,className:"w-full button-primary-enhanced",children:"Sign In"})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wider mb-4",children:"Main"}),e.jsx("div",{className:"space-y-2",children:p.map(v=>{const w=v.icon,P=a===v.id;return e.jsxs("button",{onClick:()=>k(v.id),className:Ce("w-full flex items-center gap-4 p-4 rounded-lg text-left transition-colors duration-200",P?"bg-primary text-primary-foreground shadow-md":"hover:bg-muted/50"),children:[e.jsx(w,{className:"h-5 w-5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium",children:v.label}),e.jsx("div",{className:Ce("text-sm",P?"text-primary-foreground/80":"text-muted-foreground"),children:v.description})]}),P&&e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary-foreground flex-shrink-0"})]},v.id)})})]}),e.jsx(Zl,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wider mb-4",children:"Workspaces"}),e.jsx("div",{className:"space-y-2",children:x.map(v=>{const w=v.icon,P=a===v.id;return e.jsxs("button",{onClick:()=>k(v.id),className:Ce("w-full flex items-center gap-4 p-4 rounded-lg text-left transition-colors duration-200",P?"bg-primary text-primary-foreground shadow-md":"hover:bg-muted/50"),children:[e.jsx(w,{className:"h-5 w-5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium",children:v.label}),e.jsx("div",{className:Ce("text-sm",P?"text-primary-foreground/80":"text-muted-foreground"),children:v.description})]}),P&&e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary-foreground flex-shrink-0"})]},v.id)})})]}),e.jsx(Zl,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wider mb-4",children:"Tools"}),e.jsx("div",{className:"space-y-2",children:u.map(v=>{const w=v.icon,P=a===v.id;return e.jsxs("button",{onClick:()=>k(v.id),className:Ce("w-full flex items-center gap-4 p-4 rounded-lg text-left transition-colors duration-200",P?"bg-primary text-primary-foreground shadow-md":"hover:bg-muted/50"),children:[e.jsx(w,{className:"h-5 w-5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium",children:v.label}),e.jsx("div",{className:Ce("text-sm",P?"text-primary-foreground/80":"text-muted-foreground"),children:v.description})]}),v.id==="activity"&&o>0&&e.jsx(Qe,{variant:"destructive",className:"text-xs",children:o}),P&&e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary-foreground flex-shrink-0"})]},v.id)})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wider mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(le,{variant:"outline",size:"sm",className:"h-auto py-3 flex-col gap-2",children:[e.jsx(dn,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs",children:"Search"})]}),e.jsxs(le,{variant:"outline",size:"sm",className:"h-auto py-3 flex-col gap-2 relative",children:[e.jsx(Ph,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs",children:"Alerts"}),o>0&&e.jsx(Qe,{variant:"destructive",className:"absolute -top-1 -right-1 text-xs w-5 h-5 p-0 flex items-center justify-center",children:o})]})]})]})]}),n&&e.jsx("div",{className:"p-6 border-t",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(le,{variant:"outline",size:"sm",className:"flex-1",children:[e.jsx(ox,{className:"h-4 w-4 mr-2"}),"Settings"]}),e.jsx(le,{variant:"outline",size:"sm",onClick:l,children:e.jsx(Oy,{className:"h-4 w-4"})})]})})]})})]}):null},bk=s=>{switch(s){case"project_created":case"project_updated":return e.jsx(xs,{className:"h-4 w-4"});case"moodboard_created":case"moodboard_updated":case"moodboard_deleted":case"moodboard_element_added":return e.jsx(ar,{className:"h-4 w-4"});case"whiteboard_created":case"whiteboard_updated":case"whiteboard_deleted":return e.jsx(Mr,{className:"h-4 w-4"});case"workflow_created":case"workflow_updated":case"workflow_deleted":case"workflow_stage_completed":return e.jsx(ca,{className:"h-4 w-4"});case"timeline_created":case"timeline_updated":case"timeline_deleted":case"timeline_milestone_reached":return e.jsx(es,{className:"h-4 w-4"});case"comment_added":return e.jsx(Nr,{className:"h-4 w-4"});case"whiteboard_pin_added":case"whiteboard_pin_resolved":return e.jsx(ka,{className:"h-4 w-4"});case"timeline_milestone_created":case"timeline_milestone_achieved":return e.jsx(Aa,{className:"h-4 w-4"});default:return e.jsx(Wl,{className:"h-4 w-4"})}},wk=s=>s.includes("project")?"bg-blue-500":s.includes("moodboard")?"bg-purple-500":s.includes("whiteboard")?"bg-green-500":s.includes("workflow")?"bg-orange-500":s.includes("timeline")?"bg-indigo-500":s.includes("comment")?"bg-yellow-500":s.includes("pin")?"bg-red-500":"bg-gray-500",jk=s=>{const t=s.split("_"),r=t.pop()||"",a=t.join(" ");return`${a.charAt(0).toUpperCase()+a.slice(1)} ${r}`};function Nk({activity:s,open:t,onOpenChange:r,onNavigateToItem:a}){var j,v,w,P,D,B,F,se,z,C;if(!s)return null;const n=s.timestamp?Zn(new Date(s.timestamp),{addSuffix:!0}):"Unknown time",i=(j=s.details)==null?void 0:j.projectName,o=(v=s.details)==null?void 0:v.workspaceName,l=(w=s.details)==null?void 0:w.reason,d=(P=s.details)==null?void 0:P.noteContent,h=(D=s.details)==null?void 0:D.commentText,f=(B=s.details)==null?void 0:B.notePreview,p=(F=s.details)==null?void 0:F.stageName,x=(se=s.details)==null?void 0:se.taskName,u=(z=s.details)==null?void 0:z.oldValue,k=(C=s.details)==null?void 0:C.newValue;return e.jsx(Ts,{open:t,onOpenChange:r,children:e.jsxs(Is,{className:"max-w-md",children:[e.jsxs(Dr,{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-full text-white ${wk(s.type)}`,children:bk(s.type)}),e.jsx(Ks,{children:o||i||"Activity Details"})]}),e.jsx(vi,{asChild:!0,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Qe,{variant:"outline",children:jk(s.type)}),e.jsx("span",{className:"text-xs text-muted-foreground",children:n})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-sm",children:l||d||h||f||"No additional details available."}),e.jsxs("div",{className:"space-y-2 text-sm",children:[i&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xs,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:["Project: ",i]})]}),o&&e.jsxs("div",{className:"flex items-center gap-2",children:[s.type.includes("moodboard")&&e.jsx(ar,{className:"h-4 w-4 text-muted-foreground"}),s.type.includes("whiteboard")&&e.jsx(Mr,{className:"h-4 w-4 text-muted-foreground"}),s.type.includes("workflow")&&e.jsx(ca,{className:"h-4 w-4 text-muted-foreground"}),s.type.includes("timeline")&&e.jsx(es,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:[s.type.includes("moodboard")&&"Moodboard: ",s.type.includes("whiteboard")&&"Whiteboard: ",s.type.includes("workflow")&&"Workflow: ",s.type.includes("timeline")&&"Timeline: ",o]})]}),p&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Tr,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:["Stage: ",p]})]}),x&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Aa,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:["Milestone: ",x]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(da,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:["By: ",s.userName]})]})]}),u&&k&&e.jsxs("div",{className:"space-y-2 border-t pt-2",children:[e.jsx("p",{className:"text-xs font-medium",children:"Changes:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{className:"p-2 bg-red-100 dark:bg-red-900/20 rounded",children:[e.jsx("p",{className:"font-medium mb-1",children:"Previous"}),e.jsx("p",{children:String(u)})]}),e.jsxs("div",{className:"p-2 bg-green-100 dark:bg-green-900/20 rounded",children:[e.jsx("p",{className:"font-medium mb-1",children:"New"}),e.jsx("p",{children:String(k)})]})]})]})]}),e.jsxs(Rn,{className:"sm:justify-between",children:[e.jsxs(le,{variant:"ghost",onClick:()=>r(!1),children:[e.jsx(Hs,{className:"h-4 w-4 mr-2"}),"Close"]}),a&&e.jsx(le,{onClick:a,className:"button-primary-enhanced hover-shimmer cyrus-ui",children:"View Details"})]})]})})}class pd extends Error{constructor(r,a,n,i){super(r);Qs(this,"statusCode");Qs(this,"response");Qs(this,"data");this.name="ApiError",this.statusCode=a,this.response=n,this.data=i}}class H2{constructor(t){Qs(this,"baseUrl");Qs(this,"timeout");Qs(this,"retryAttempts");Qs(this,"retryDelay");Qs(this,"defaultHeaders");Qs(this,"token",null);this.baseUrl=t.baseUrl.replace(/\/$/,""),this.timeout=t.timeout||1e4,this.retryAttempts=t.retryAttempts||3,this.retryDelay=t.retryDelay||1e3,this.defaultHeaders=E({"Content-Type":"application/json"},t.defaultHeaders)}setAuthToken(t){this.token=t}getAuthToken(){return this.token}getHeaders(t){var a;const r=E(E({},this.defaultHeaders),t);return this.token&&(r.Authorization=`Bearer ${this.token}`),typeof window!="undefined"&&((a=window.pulse2)!=null&&a.nonce)&&(r["X-WP-Nonce"]=window.pulse2.nonce),r}delay(t){return xe(this,null,function*(){return new Promise(r=>setTimeout(r,t))})}shouldRetry(t,r,a){return r>=a?!1:!t.statusCode||t.statusCode>=500||t.statusCode===408||t.statusCode===429}makeRequest(a){return xe(this,arguments,function*(t,r={}){var k;const n=t.startsWith("http")?t:`${this.baseUrl}${t}`,i=r.timeout||this.timeout,o=(k=r.retryAttempts)!=null?k:this.retryAttempts,l=r.skipRetry||!1,j=r,{timeout:d,retryAttempts:h,skipRetry:f}=j,p=Me(j,["timeout","retryAttempts","skipRetry"]),x=this.getHeaders(r.headers);let u;for(let v=0;v<=o;v++)try{const w=new AbortController,P=setTimeout(()=>w.abort(),i),D=yield fetch(n,Q(E({},p),{headers:x,signal:w.signal}));clearTimeout(P);let B;const F=D.headers.get("content-type");if(F!=null&&F.includes("application/json")?B=yield D.json():B=yield D.text(),!D.ok){const se=new pd((B==null?void 0:B.message)||B||`HTTP ${D.status}: ${D.statusText}`,D.status,D,B);if(l||!this.shouldRetry(se,v,o))throw se;u=se,yield this.delay(this.retryDelay*Math.pow(2,v));continue}return B}catch(w){if(w instanceof pd?u=w:w instanceof DOMException&&w.name==="AbortError"?u=new pd("Request timeout",408):u=new pd(w instanceof Error?w.message:"Network error",0),l||!this.shouldRetry(u,v,o))throw u;yield this.delay(this.retryDelay*Math.pow(2,v))}throw u})}get(t,r){return xe(this,null,function*(){return this.makeRequest(t,Q(E({},r),{method:"GET"}))})}post(t,r,a){return xe(this,null,function*(){return this.makeRequest(t,Q(E({},a),{method:"POST",body:r?JSON.stringify(r):void 0}))})}put(t,r,a){return xe(this,null,function*(){return this.makeRequest(t,Q(E({},a),{method:"PUT",body:r?JSON.stringify(r):void 0}))})}patch(t,r,a){return xe(this,null,function*(){return this.makeRequest(t,Q(E({},a),{method:"PATCH",body:r?JSON.stringify(r):void 0}))})}delete(t,r){return xe(this,null,function*(){return this.makeRequest(t,Q(E({},r),{method:"DELETE"}))})}upload(t,r,a,n){return xe(this,null,function*(){const i=new FormData;i.append("file",r),a&&Object.entries(a).forEach(([l,d])=>{i.append(l,d)});const o=this.getHeaders(n==null?void 0:n.headers);return delete o["Content-Type"],this.makeRequest(t,Q(E({},n),{method:"POST",body:i,headers:o}))})}batch(t){return xe(this,null,function*(){return Promise.all(t.map(r=>r()))})}healthCheck(){return xe(this,null,function*(){try{return yield this.get("/health",{skipRetry:!0,timeout:5e3}),!0}catch(t){return!1}})}}class V2 extends H2{constructor(t){var r;super({baseUrl:(t==null?void 0:t.baseUrl)||typeof window!="undefined"&&((r=window.pulse2)==null?void 0:r.apiUrl)||"/wp-json/pulse2/v1",timeout:(t==null?void 0:t.timeout)||15e3,retryAttempts:(t==null?void 0:t.retryAttempts)||3,retryDelay:(t==null?void 0:t.retryDelay)||1e3,defaultHeaders:E({"Content-Type":"application/json"},t==null?void 0:t.defaultHeaders)})}getProjects(){return xe(this,null,function*(){return this.get("/projects")})}getProject(t){return xe(this,null,function*(){return this.get(`/projects/${t}`)})}createProject(t){return xe(this,null,function*(){return this.post("/projects",t)})}updateProject(t,r){return xe(this,null,function*(){return this.put(`/projects/${t}`,r)})}deleteProject(t){return xe(this,null,function*(){return this.delete(`/projects/${t}`)})}getWorkspaces(){return xe(this,null,function*(){return this.get("/workspaces")})}getWorkspacesByProject(t){return xe(this,null,function*(){return this.get(`/workspaces/project/${t}`)})}createWorkspace(t){return xe(this,null,function*(){return this.post("/workspaces",t)})}updateWorkspace(t,r){return xe(this,null,function*(){return this.put(`/workspaces/${t}`,r)})}deleteWorkspace(t){return xe(this,null,function*(){return this.delete(`/workspaces/${t}`)})}uploadWorkspaceImage(t,r,a){return xe(this,null,function*(){const n=new FormData;return n.append("file",r),a&&Object.entries(a).forEach(([i,o])=>{n.append(i,o)}),this.upload(`/workspaces/${t}/images`,r,a)})}getMedia(t){return xe(this,null,function*(){return this.get(`/media/${t}`)})}uploadMedia(t,r){return xe(this,null,function*(){var n;const a=typeof window!="undefined"&&((n=window.pulse2)!=null&&n.mediaUrl)?window.pulse2.mediaUrl:"/wp-json/wp/v2/media";return this.upload(a,t,r)})}}new H2({baseUrl:"/api",timeout:1e4,retryAttempts:3,retryDelay:1e3});new V2;const Bl=new V2,Sk=()=>!(typeof window!="undefined"&&window.pulse2);class kk{constructor(){Qs(this,"shouldUseMock");this.shouldUseMock=Sk()}getProjects(){return xe(this,null,function*(){return this.shouldUseMock?vr.getProjects():Bl.getProjects()})}getProject(t){return xe(this,null,function*(){return this.shouldUseMock?vr.getProject(t):Bl.getProject(t)})}createProject(t){return xe(this,null,function*(){return this.shouldUseMock?vr.createProject(t):Bl.createProject(t)})}updateProject(t,r){return xe(this,null,function*(){return this.shouldUseMock?vr.updateProject(t,r):Bl.updateProject(t,r)})}deleteProject(t){return xe(this,null,function*(){return this.shouldUseMock?vr.deleteProject(t):Bl.deleteProject(t)})}addProjectMedia(t,r){return xe(this,null,function*(){if(this.shouldUseMock)return vr.addProjectMedia(t,r);{const n=[...(yield this.getProject(t)).media||[],r];return this.updateProject(t,{media:n})}})}updateProjectMedia(t,r,a){return xe(this,null,function*(){var n;if(this.shouldUseMock)return vr.updateProjectMedia(t,r,a);{const o=((n=(yield this.getProject(t)).media)==null?void 0:n.map(l=>l.id===r?E(E({},l),a):l))||[];return this.updateProject(t,{media:o})}})}deleteProjectMedia(t,r){return xe(this,null,function*(){var a;if(this.shouldUseMock)return vr.deleteProjectMedia(t,r);{const i=((a=(yield this.getProject(t)).media)==null?void 0:a.filter(o=>o.id!==r))||[];return this.updateProject(t,{media:i})}})}}const gd=new kk,Ul=typeof window!="undefined"&&window.pulse2?window.pulse2:null,Ck=()=>{const s=K0(),[t,r]=N.useState("list"),[a,n]=N.useState(null),[i,o]=N.useState(null),[l,d]=N.useState(!1),[h,f]=N.useState("list"),[p,x]=N.useState(!1),[u,k]=N.useState([{id:"1",name:"Priority",projectIds:[],expanded:!0}]),[j,v]=N.useState(null),[w,P]=N.useState(""),[D,B]=N.useState(null),[F,se]=N.useState(null),[z,C]=N.useState(null),[A,L]=N.useState(!1),[y,S]=N.useState(!1),[I,M]=N.useState(0),[J,ae]=N.useState(""),[he,ce]=N.useState(!1),[ie,ve]=N.useState("current"),[Ae,T]=N.useState(!1),[U,V]=N.useState(!1),[re,G]=N.useState(!1),[Y,Z]=N.useState(!1),{theme:de,toggleTheme:Le}=mS(),{toast:X,toasts:me}=Pa(),we=Xd(),oe=n2(),ee=!!F;N.useEffect(()=>{const ue=me.filter(Se=>Se.open).length;M(ue)},[me]),N.useEffect(()=>{const ue=localStorage.getItem("jwtToken"),Se=localStorage.getItem("userDisplayName");ue&&se(ue),Se&&C(Se)},[]);const{data:H=[],isLoading:Ee,error:Fe}=Dd({queryKey:["projects"],queryFn:()=>gd.getProjects()}),Ie=Oa({mutationFn:ue=>xe(void 0,null,function*(){return gd.createProject(ue)}),onSuccess:ue=>{we.invalidateQueries({queryKey:["projects"]}),X({title:"Project Created",description:"Your project has been created successfully."}),oe.logProjectCreated(ue.id,ue.name,ue.client)},onError:()=>{X({title:"Error",description:"Failed to create project.",variant:"destructive"})}}),Ue=Oa({mutationFn:Oe=>xe(void 0,[Oe],function*({id:ue,data:Se}){return gd.updateProject(ue,Se)}),onSuccess:()=>{we.invalidateQueries({queryKey:["projects"]}),X({title:"Project Updated",description:"Your project has been updated successfully."})},onError:()=>{X({title:"Error",description:"Failed to update project.",variant:"destructive"})}}),Ye=Oa({mutationFn:ue=>xe(void 0,null,function*(){if(s||!Ul||!F)return vr.deleteProject(ue);const Se=yield fetch(`${Ul.apiUrl}/projects/${ue}`,{method:"DELETE",headers:{Authorization:`Bearer ${F}`,"Content-Type":"application/json"}});if(!Se.ok)throw new Error("Failed to delete project");return Se.json()}),onSuccess:()=>{we.invalidateQueries({queryKey:["projects"]}),X({title:"Project Deleted",description:"Your project has been deleted successfully."})},onError:()=>{X({title:"Error",description:"Failed to delete project.",variant:"destructive"})}}),{filteredAndSortedProjects:We,filterMode:st,setFilterMode:ot,sortMode:mt,setSortMode:rt,statusFilter:Be,setStatusFilter:ft,searchTerm:pt,setSearchTerm:Ct}=uS(H||[]),Je=ue=>xe(void 0,null,function*(){try{const Se=Q(E({},ue),{createdBy:z||"Unknown User"}),Oe=yield gd.createProject(Se);we.invalidateQueries({queryKey:["projects"]}),X({title:"Project Created",description:`${Oe.name} has been created.`}),oe.logProjectCreated(Oe.id,Oe.name,Oe.client),Vs()}catch(Se){X({title:"Error",description:Se.message,variant:"destructive"})}}),Xt=ue=>{i&&(Ue.mutate({id:i.id,data:ue}),ds.logActivity({type:"project_updated",title:ue.name||i.name,projectId:i.id,userId:"current-user",metadata:{changes:Object.keys(ue)}}))},Lt=ue=>{rt(ue)},Ps=()=>{const ue=document.createElement("input");ue.type="file",ue.accept=".json",ue.onchange=Se=>xe(void 0,null,function*(){var Ge;const Oe=(Ge=Se.target.files)==null?void 0:Ge[0];if(Oe)try{const gt=yield Oe.text(),Ft=JSON.parse(gt);if(Array.isArray(Ft.projects)){for(const St of Ft.projects){const Tt=Q(E({},St),{notes:[],media:[],externalLinks:[],artists:[],statusHistory:St.statusHistory||[]});if(delete Tt.id,yield Ie.mutateAsync(Tt),St.notes&&Array.isArray(St.notes))for(const is of St.notes)yield Gt(is,St.id)}X({title:"Import Successful",description:"Projects imported successfully."})}else X({title:"Import Error",description:"Invalid file format.",variant:"destructive"})}catch(gt){X({title:"Import Error",description:"Failed to import projects.",variant:"destructive"})}}),ue.click()},Qt=()=>{const ue={version:"2.0",exportDate:new Date().toISOString(),projects:We,activities:ds.getActivities(),metadata:{totalProjects:We.length,activeProjects:We.filter(gt=>!gt.isArchived).length,archivedProjects:We.filter(gt=>gt.isArchived).length,exportedBy:z||"Unknown User"}},Se=new Blob([JSON.stringify(ue,null,2)],{type:"application/json"}),Oe=URL.createObjectURL(Se),Ge=document.createElement("a");Ge.href=Oe,Ge.download=`pulse2-projects-export-${new Date().toISOString().split("T")[0]}.json`,Ge.click(),URL.revokeObjectURL(Oe),ds.logActivity({type:"project_updated",title:`Exported ${We.length} projects`,projectId:"",userId:"current-user",metadata:{exportType:"projects",count:We.length}})},Gt=(ue,Se,Oe)=>xe(void 0,null,function*(){const Ge={content:ue.content,projectId:Se,parentId:Oe,createdAt:ue.createdAt,updatedAt:ue.updatedAt},gt=s?`/mock-api/projects/${Se}/notes`:`${Ul==null?void 0:Ul.apiUrl}/projects/${Se}/notes`,Ft=yield fetch(gt,{method:"POST",headers:{Authorization:`Bearer ${F}`,"Content-Type":"application/json"},body:JSON.stringify(Ge)});if(!Ft.ok)return;const St=yield Ft.json();if(St&&St.id&&ue.replies&&Array.isArray(ue.replies))for(const Tt of ue.replies)yield Gt(Tt,Se,St.id)}),nr=ue=>{window.confirm(`Are you sure you want to delete "${ue.name}"?`)&&(oe.logActivity({type:"project_deleted",projectId:ue.id,details:{projectName:ue.name}}),Ye.mutate(ue.id))},Yt=(ue,Se)=>{const Oe=new Date().toISOString().split("T")[0],gt=(ue.statusHistory||[]).filter(is=>is.date.split("T")[0]!==Oe),Ft={id:typeof crypto!="undefined"&&crypto.randomUUID?crypto.randomUUID():`${Date.now()}-${Math.random()}`,status:Se,date:new Date().toISOString(),note:`Status updated to ${Se}`},St=[...gt,Ft],Tt={status:Se,statusHistory:St};Ue.mutate({id:ue.id,data:Tt}),oe.logStatusChanged(ue.id,ue.status,Se)},ir=(ue,Se)=>{Ue.mutate({id:ue.id,data:Q(E({},ue),{isArchived:Se})}),X({title:Se?"Project Archived":"Project Restored"}),Se&&oe.logActivity({type:"project_archived",projectId:ue.id,details:{projectName:ue.name}})},ss=(ue=null)=>{if(!ee&&!ue){d(!0);return}o(ue),r("form"),V(!0)},Fs=ue=>{n(ue),r("detail"),V(!0)},Vs=()=>{r("list"),n(null),o(null),V(!1)},Ut=ue=>{f(ue),r("list"),n(null),o(null),V(!1),G(!1)},wt=(ue,Se)=>{if(!ue)return;const Oe=[...u],Ge=Oe.find(gt=>gt.id===Se);Ge&&!Ge.projectIds.includes(ue)&&(Ge.projectIds.push(ue),k(Oe)),B(null)},Ze=ue=>{const Se=[...u];Se.forEach(Oe=>{Oe.projectIds=Oe.projectIds.filter(Ge=>Ge!==ue)}),k(Se)},zt=ue=>u.some(Se=>Se.projectIds.includes(ue)),[vt,js]=N.useState(null),[Ns,ut]=N.useState(!1),fe=ue=>{js(ue),ut(!0)},De=()=>{vt&&(ut(!1),vt.projectId&&(Fs(vt.projectId),vt.type.includes("moodboard")||vt.type.includes("whiteboard")||vt.type.includes("workflow")||vt.type.includes("timeline")))};return e.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[e.jsxs("header",{className:Ce("border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 sticky top-0 z-50 transition-all duration-500 ease-in-out",U&&"transform -translate-y-full"),children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(le,{variant:"ghost",size:"sm",onClick:()=>G(!0),className:"md:hidden",children:e.jsx(Fy,{className:"h-5 w-5"})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"text-3xl font-extrabold bg-gradient-to-r from-pink-500 to-purple-400 bg-clip-text text-transparent tracking-tight",children:"CT"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("h1",{className:"text-xl font-bold",children:[t==="list"&&h==="activity"&&"Activity Feed",t==="list"&&h==="profile"&&(ee&&z?`${z} & Team`:"Profile & Team"),t==="list"&&h==="moodboards"&&"Moodboards",t==="list"&&h==="whiteboards"&&"Whiteboards",t==="list"&&h==="workflows"&&"Workflows",t==="list"&&h==="timeline"&&"Timeline",t==="list"&&!["activity","profile","moodboards","whiteboards","workflows","timeline"].includes(h)&&"Projects",t==="detail"&&"Project Details",t==="form"&&(i?"Edit Project":"New Project")]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"A unified view of all our creative projects."})]})]}),ee&&z&&e.jsx("div",{className:"px-3 py-1.5 rounded-md text-sm font-medium bg-muted text-muted-foreground border border-border",children:z})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex items-center gap-2 relative",children:[e.jsxs("div",{className:"relative",children:[e.jsx(dn,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(Pt,{placeholder:ie==="global"?"Search entire app...":"Search current tab...",className:"pl-10 w-64 hover-shimmer cyrus-ui",value:J,onChange:ue=>{ae(ue.target.value),T(ue.target.value.trim().length>0)},onFocus:()=>J.trim().length>0&&T(!0)}),e.jsx(vk,{searchTerm:J,searchScope:ie,currentTab:h,onResultClick:ue=>{T(!1),ae("")},isVisible:Ae,onClose:()=>T(!1)})]}),e.jsx(le,{variant:ie==="global"?"default":"outline",size:"sm",onClick:()=>ve(ie==="global"?"current":"global"),className:"hover-shimmer cyrus-ui",title:ie==="global"?"Search entire app":"Search current tab only",children:e.jsx(Qo,{className:"h-4 w-4"})})]})})]}),e.jsx("div",{className:"px-4 border-b hidden md:block",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs(le,{onClick:()=>{f("list"),V(!1)},className:Ce("rounded-none border-b-2 border-transparent hover-shimmer cyrus-ui",h==="list"?"button-primary-enhanced":""),children:[e.jsx(Ey,{className:"h-4 w-4 mr-2"}),"Projects"]}),e.jsxs(le,{onClick:()=>{f("calendar"),V(!1)},className:Ce("rounded-none border-b-2 border-transparent hover-shimmer cyrus-ui",h==="calendar"?"button-primary-enhanced":""),children:[e.jsx(xs,{className:"h-4 w-4 mr-2"}),"Calendar"]}),e.jsxs(le,{onClick:()=>{f("monday"),V(!1)},className:Ce("rounded-none border-b-2 border-transparent hover-shimmer cyrus-ui",h==="monday"?"button-primary-enhanced":""),children:[e.jsx(sx,{className:"h-4 w-4 mr-2"}),"Monday"]}),e.jsxs(le,{onClick:()=>{f("moodboards"),V(!1)},className:Ce("rounded-none border-b-2 border-transparent hover-shimmer cyrus-ui",h==="moodboards"?"button-primary-enhanced":""),"data-viewmode":"moodboards",children:[e.jsx(ar,{className:"h-4 w-4 mr-2"}),"Moodboards"]}),e.jsxs(le,{onClick:()=>{f("whiteboards"),V(!1)},className:Ce("rounded-none border-b-2 border-transparent hover-shimmer cyrus-ui",h==="whiteboards"?"button-primary-enhanced":""),"data-viewmode":"whiteboards",children:[e.jsx(Mr,{className:"h-4 w-4 mr-2"}),"Whiteboards"]}),e.jsxs(le,{onClick:()=>{f("workflows"),V(!1)},className:Ce("rounded-none border-b-2 border-transparent hover-shimmer cyrus-ui",h==="workflows"?"button-primary-enhanced":""),children:[e.jsx(ca,{className:"h-4 w-4 mr-2"}),"Workflows"]}),e.jsxs(le,{onClick:()=>{f("timeline"),V(!1)},className:Ce("rounded-none border-b-2 border-transparent hover-shimmer cyrus-ui",h==="timeline"?"button-primary-enhanced":""),children:[e.jsx(es,{className:"h-4 w-4 mr-2"}),"Timeline"]}),e.jsxs(le,{onClick:()=>{f("activity"),V(!1)},className:Ce("rounded-none border-b-2 border-transparent hover-shimmer cyrus-ui",h==="activity"?"button-primary-enhanced":""),children:[e.jsx(km,{className:"h-4 w-4 mr-2"}),"Activity"]}),e.jsx(le,{onClick:()=>{f("profile"),V(!1)},className:Ce("rounded-none border-b-2 border-transparent hover-shimmer cyrus-ui",h==="profile"?"button-primary-enhanced":""),children:ee&&z?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 mr-2 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center text-white text-xs font-medium",children:z.charAt(0).toUpperCase()}),z]}):e.jsxs(e.Fragment,{children:[e.jsx(dr,{className:"h-4 w-4 mr-2"}),"Profile"]})}),e.jsx(le,{variant:"ghost",onClick:()=>V(!0),className:"rounded-none border-b-2 border-transparent ml-2",title:"Hide Header",children:e.jsx(Wo,{className:"h-4 w-4"})}),e.jsx("div",{className:"ml-auto flex items-center gap-3",children:!ee&&e.jsxs(le,{onClick:()=>d(!0),className:"button-primary-enhanced hover-shimmer cyrus-ui",children:[e.jsx(Ry,{className:"h-4 w-4 mr-2"}),"Login"]})})]})})]}),e.jsxs("div",{className:Ce("flex-1 transition-all duration-500 ease-in-out",A&&"ml-80",U&&"transform -translate-y-[120px]"),children:[e.jsx(dS,{isOpen:l,onClose:()=>d(!1),onLoginSuccess:(ue,Se)=>{se(ue),C(Se),localStorage.setItem("userDisplayName",Se)}}),e.jsxs("div",{className:Ce("p-0",U&&"pt-4"),children:[Ee&&e.jsx("p",{className:"p-4",children:"Loading projects..."}),!Ee&&!Fe&&t==="list"&&e.jsxs(e.Fragment,{children:[(h==="list"||h==="monday")&&e.jsx("div",{className:"p-4 glass-card m-4 mb-2",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("div",{className:"flex-1 relative min-w-[200px]",children:[e.jsx(dn,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(Pt,{placeholder:"Search projects...",className:"pl-10",value:pt,onChange:ue=>Ct(ue.target.value)})]}),e.jsxs(bs,{value:Be,onValueChange:ue=>ft(ue),children:[e.jsx(fs,{className:"w-[180px] hover-shimmer cyrus-ui",children:e.jsx(ws,{placeholder:"All Statuses"})}),e.jsxs(ps,{children:[e.jsx(tt,{value:"all",children:"All Statuses"}),oa.map(ue=>e.jsx(tt,{value:ue.value,children:ue.label},ue.value))]})]}),e.jsxs(bs,{value:mt,onValueChange:Lt,children:[e.jsx(fs,{className:"w-[180px] hover-shimmer cyrus-ui",children:e.jsx(ws,{placeholder:"Sort by..."})}),e.jsxs(ps,{children:[e.jsx(tt,{value:"newest",children:"Newest"}),e.jsx(tt,{value:"oldest",children:"Oldest"}),e.jsx(tt,{value:"priority",children:"Priority"}),e.jsx(tt,{value:"name",children:"Name"}),e.jsx(tt,{value:"status",children:"Status"})]})]}),e.jsxs("div",{className:"flex items-center gap-1 p-1 bg-muted rounded-lg",children:[e.jsx(le,{size:"sm",onClick:()=>ot("active"),className:Ce("hover-shimmer",st==="active"?"button-primary-enhanced":""),children:"Active"}),e.jsx(le,{size:"sm",onClick:()=>ot("archived"),className:Ce("hover-shimmer",st==="archived"?"button-primary-enhanced":""),children:"Archived"})]}),h==="list"&&e.jsx("div",{className:"flex items-center gap-1 p-1 bg-muted rounded-lg",children:e.jsx(le,{size:"sm",onClick:()=>x(!p),className:Ce("hover-shimmer",p?"button-primary-enhanced":""),children:p?e.jsxs(e.Fragment,{children:[e.jsx(rx,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:"Expand"})]}):e.jsxs(e.Fragment,{children:[e.jsx(ax,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:"Compact"})]})})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(le,{onClick:()=>ss(null),className:"button-primary-enhanced hover-shimmer cyrus-ui",children:[e.jsx(gs,{className:"h-4 w-4 mr-2"}),"New Project"]}),e.jsxs(le,{onClick:Ps,className:"button-primary-enhanced hover-shimmer cyrus-ui",children:[e.jsx(lx,{className:"h-4 w-4 mr-2"}),"Import"]}),e.jsxs(le,{onClick:Qt,className:"button-primary-enhanced hover-shimmer cyrus-ui",children:[e.jsx(_h,{className:"h-4 w-4 mr-2"}),"Export"]})]})]})}),h==="list"&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4",children:We.map(ue=>e.jsx(d4,{project:ue,onEdit:()=>ss(ue),onStatusChange:Se=>Yt(ue,Se),onArchive:()=>ir(ue,!0),onRestore:()=>ir(ue,!1),onDelete:()=>nr(ue),isCompact:p,isLoggedIn:ee,onClick:()=>Fs(ue.id)},ue.id))}),h==="calendar"&&e.jsx(I4,{projects:We,onProjectClick:Fs,onActivityClick:fe}),h==="activity"&&e.jsx(C1,{limit:50,showFilters:!0,showRefreshButton:!0,isMainActivityTab:!0}),h==="profile"&&e.jsx(lS,{}),h==="moodboards"&&e.jsx($S,{projects:We,onEnterFocusMode:()=>V(!0),onExitFocusMode:()=>V(!1)}),h==="whiteboards"&&e.jsx(pk,{projects:We,onEnterFocusMode:()=>V(!0),onExitFocusMode:()=>V(!1)}),h==="workflows"&&e.jsx(gk,{projects:We,onEnterFocusMode:()=>V(!0),onExitFocusMode:()=>V(!1)}),h==="timeline"&&e.jsx(xk,{projects:We,onEnterFocusMode:()=>V(!0),onExitFocusMode:()=>V(!1)}),h==="monday"&&e.jsx(Y4,{projects:We,onEditProject:ue=>ss(ue),onStatusChange:(ue,Se)=>Yt(ue,Se),onArchiveProject:ue=>ir(ue,!0),onRestoreProject:ue=>ir(ue,!1),onDeleteProject:ue=>nr(ue),isLoggedIn:ee,onProjectClick:ue=>Fs(ue)})]}),t==="detail"&&a&&e.jsx(MS,{project:H.find(ue=>ue.id===a),onBack:Vs,onEdit:()=>ss(H.find(ue=>ue.id===a)),isLoggedIn:ee,onPin:()=>{zt(a)?Ze(a):u.length===1?wt(a,u[0].id):B(a)},isPinned:zt(a),autoRefresh:Y,onToggleAutoRefresh:Z}),t==="form"&&e.jsx(_4,{onClose:Vs,onSubmit:ue=>{i?Xt(ue):Je(ue),Vs()},project:i||void 0,isLoggedIn:ee}),!Ee&&We.length===0&&t==="list"&&e.jsxs("div",{className:"text-center py-16 glass-card m-4",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"No projects found"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:st==="active"?"Create a new project to get started.":"No archived projects match your filters."})]})]})]}),e.jsxs("div",{className:"fixed right-4 bottom-4 flex flex-col gap-3 z-50",children:[e.jsx(le,{onClick:Le,className:"w-12 h-12 rounded-full glass-card border-0 shadow-lg hover-shimmer cyrus-ui transition-all duration-300 hover:scale-110 hover:glow",size:"icon",variant:"ghost",children:de==="dark"?e.jsx(zy,{className:"h-4 w-4"}):e.jsx(By,{className:"h-4 w-4"})}),e.jsxs("div",{className:"relative",children:[e.jsx(le,{onClick:()=>{S(!y),A&&L(!1),y||M(0)},className:Ce("w-12 h-12 rounded-full glass-card border-0 shadow-lg hover-shimmer cyrus-ui transition-all duration-300 hover:scale-110 hover:glow",y&&"ring-2 ring-primary ring-offset-2 ring-offset-background"),size:"icon",variant:"ghost",children:e.jsx(Ph,{className:"h-4 w-4"})}),I>0&&e.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-gradient-to-r from-red-500 to-pink-500 text-white text-xs rounded-full flex items-center justify-center font-bold shadow-lg z-[60] border-2 border-background pointer-events-none animate-pulse",children:I>9?"9+":I})]}),e.jsx(le,{onClick:()=>{L(!A),y&&S(!1)},className:Ce("w-12 h-12 rounded-full glass-card border-0 shadow-lg hover-shimmer cyrus-ui transition-all duration-300 hover:scale-110 hover:glow",A&&"ring-2 ring-primary ring-offset-2 ring-offset-background"),size:"icon",variant:"ghost",children:e.jsx(ka,{className:"h-4 w-4"})})]}),(A||y)&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-40",onClick:()=>{L(!1),S(!1)}}),e.jsxs("div",{className:"fixed top-0 left-0 h-full w-full sm:w-80 md:w-96 bg-background/95 backdrop-blur-sm border-r shadow-2xl z-50 overflow-y-auto",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold bg-gradient-primary bg-clip-text text-transparent",children:y?"Recent Activity":"Pinned Projects"}),e.jsx(le,{variant:"ghost",size:"sm",onClick:()=>{L(!1),S(!1)},className:"hover-shimmer cyrus-ui",children:"×"})]})}),e.jsx("div",{className:"p-4",children:y?e.jsx("div",{className:"space-y-3",children:(()=>{const Se=JSON.parse(localStorage.getItem("activities")||"[]").slice(0,10);return Se.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Ph,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No recent activity"}),e.jsx("p",{className:"text-xs",children:"Activity will appear here when you interact with projects"})]}):Se.map((Oe,Ge)=>e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-muted/20 hover:bg-muted/30 transition-colors",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-indicator mt-2 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:Oe.title}),e.jsx("span",{className:"text-xs text-muted-foreground whitespace-nowrap",children:new Date(Oe.date).toLocaleDateString()})]}),e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:Oe.description||Oe.title}),Oe.projectName&&e.jsx("div",{className:"flex items-center gap-1",children:e.jsx("span",{className:"text-xs bg-primary/10 text-primary px-2 py-0.5 rounded",children:Oe.projectName})})]})]},Oe.id||Ge))})()}):e.jsx("div",{className:"space-y-3",children:u.map(ue=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:ue.name}),e.jsx(Qe,{variant:"secondary",className:"text-xs",children:ue.projectIds.length})]}),ue.projectIds.length===0?e.jsx("p",{className:"text-xs text-muted-foreground italic",children:"No pinned projects"}):e.jsx("div",{className:"space-y-2",children:ue.projectIds.map(Se=>{const Oe=H.find(Ge=>Ge.id===Se);return Oe?e.jsxs("div",{className:"flex items-center gap-2 p-2 rounded bg-muted/10 hover:bg-muted/20 cursor-pointer transition-colors",onClick:()=>{Fs(Se),L(!1)},children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-indicator"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:Oe.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:Oe.client})]})]},Se):null})})]},ue.id))})})]})]}),e.jsx(Ts,{open:!!D,onOpenChange:()=>B(null),children:e.jsxs(Is,{className:"glass-card",children:[e.jsx(Dr,{children:e.jsx(Ks,{children:"Select a group to pin this project"})}),e.jsx("div",{className:"flex flex-col gap-2",children:u.map(ue=>e.jsx(le,{onClick:()=>wt(D,ue.id),variant:"outline",className:"hover-shimmer cyrus-ui",children:ue.name},ue.id))})]})}),U&&e.jsx(le,{onClick:()=>V(!1),className:Ce("fixed bottom-4 left-1/2 -translate-x-1/2 z-[60] shadow-xl transition-all duration-300 ease-in-out","bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/80","border border-border/50 hover:bg-accent hover:text-accent-foreground","h-10 w-10 rounded-full p-0","hover:scale-110 active:scale-95"),title:"Show Header",children:e.jsx(Wo,{className:"h-5 w-5"})}),e.jsx(yk,{isOpen:re,onClose:()=>G(!1),onNavigate:Ut,currentView:h,isLoggedIn:ee,userDisplayName:z,notificationCount:I,onLogout:()=>{se(null),C(null),localStorage.removeItem("jwtToken"),localStorage.removeItem("userDisplayName"),localStorage.removeItem("userId"),G(!1)},onLogin:()=>{d(!0),G(!1)}}),e.jsx(Nk,{activity:vt,open:Ns,onOpenChange:ut,onNavigateToItem:De})]})},Ak=()=>{const s=n0();return N.useEffect(()=>{},[s.pathname]),e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),e.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),e.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},Pk=new gj,Vp=()=>e.jsx(hS,{defaultTheme:"dark",children:e.jsx(wj,{client:Pk,children:e.jsxs(Ti,{children:[e.jsx(rw,{}),e.jsx(Ew,{}),e.jsx(yN,{children:e.jsxs(gN,{children:[e.jsx(Kh,{path:"/",element:e.jsx(Ck,{})}),e.jsx(Kh,{path:"*",element:e.jsx(Ak,{})})]})})]})})});function Yp(){const s=document.getElementById("pulse2-root");if(s){const t=s.querySelector("#root");if(t)try{jh(t).render(e.jsx(Vp,{}))}catch(r){}}else{const t=document.getElementById("root");if(t)try{jh(t).render(e.jsx(Vp,{}))}catch(r){}}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",Yp):Yp();export{hs as _};
